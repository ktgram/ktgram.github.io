{"config":{"lang":["en","zh","hi","ru","ko","pt","vi"],"separator":"[\\s\\-,:!=\\[\\]()\"/]+|(?!\\b)(?=[A-Z][a-z])|\\.(?!\\d)|&[lg]t;","pipeline":["stopWordFilter"],"fields":{"title":{"boost":1000.0},"text":{"boost":1.0},"tags":{"boost":1000000.0}}},"docs":[{"location":"","title":"Home","text":""},{"location":"#intro","title":"Intro","text":"<p>Let's get an idea of how the library handles updates in general:</p> <p> </p> <p>After receiving an update, the library performs three main steps, as we can see.</p>"},{"location":"#processing","title":"Processing","text":"<p>Processing is to repackage the received update into the appropriate subclass of <code>ProcessedUpdate</code> depending on the payload being carried.</p> <p>This step is needed to make it easier to operate the update and to extend the processing capabilities.</p>"},{"location":"#handling","title":"Handling","text":"<p>Next comes the main step, here we get to the handling itself.</p>"},{"location":"#global-ratelimiter","title":"Global RateLimiter","text":"<p>If there is a user in the update, we check for exceeding the global rate limiter.</p>"},{"location":"#parse-text","title":"Parse text","text":"<p>Next, depending on the payload, we take a particular update component containing text and parse it according to the configuration.</p> <p>More detailed you can see in update parsing article.</p>"},{"location":"#find-activity","title":"Find Activity","text":"<p>Next, according to the processing priority:</p> <p> </p> <p>We are looking for a correspondence between the parsed data and the activities we are operating on. As we can see on the priority diagram, <code>Commands</code> always come first.</p> <p>I.e. if the text load in the update corresponds to any command, further search for <code>Inputs</code>, <code>Common</code> and of course execution of the <code>Unprocessed</code> action will not be performed.</p> <p>The only thing is that if there is a <code>UpdateHandlers</code> will be triggered in parallel regardless.</p>"},{"location":"#commands","title":"Commands","text":"<p>Let's take a closer look at the commands and their processing.</p> <p>As you may have noticed, although the annotation for processing commands is called <code>CommandHandler</code>, it is more versatile than the classic concept in Telegram Bots.</p>"},{"location":"#scopes","title":"Scopes","text":"<p>This is because it has a wider range of processing possibilities, i.e. the target function can be defined not only depending on the text match, but also on the type of a suitable update, this is the concept of scopes.</p> <p>Accordingly, each command can have different handlers for a different list of scopes, or vice versa, one command for several.</p> <p>Below you can see how mapping by text payload and scope is done:</p> <p> </p>"},{"location":"#inputs","title":"Inputs","text":"<p>Next, if the text payload does not match any command the input points are searched.</p> <p>The concept is very similar to input waiting in commandline applications, you put in the bot context for a particular user a point that will handle his next input, it doesn't matter what it contains, the main thing is that the next update has a <code>User</code> to be able to relate it to the set input waiting point.</p> <p>Below you can see an example of processing an update when there is no match on <code>Commands</code>.</p> <p> </p>"},{"location":"#commons","title":"Commons","text":"<p>If the handler finds no <code>commands</code> or <code>inputs</code>, it checks the text load against <code>common</code> handlers.</p> <p>We advise to use it without abuse, since it checks doing iteration over all entries.</p>"},{"location":"#unprocessed","title":"Unprocessed","text":"<p>And the final step, if the handler doesn't find any matching activity (<code>UpdateHandler</code> works completely in parallel and don't count as usual activity), then the <code>UnprocessedHandler</code> comes into play, if it is set, it will handle this case, it may be useful to warn the user that something has gone wrong.</p> <p>More detailed read in Handlers article.</p>"},{"location":"#activity-ratelimiter","title":"Activity RateLimiter","text":"<p>After finding an activity, it also checks the user's rate limits on it, according to the parameters specified in the activity parameters.</p>"},{"location":"#activity","title":"Activity","text":"<p>Activity refers to the different types of handlers the telegram bot library can handle, including Commands, Inputs, Regexes, and the Unprocessed handler.</p>"},{"location":"#invocation","title":"Invocation","text":"<p>The final processing step is the invocation of the found activity.</p> <p>More details can be found in the invocation article.</p>"},{"location":"#see-also","title":"See also","text":"<ul> <li>Update parsing</li> <li>Activity invocation</li> <li>Handlers</li> <li>Bot configuration</li> <li>Web starters (Spring, Ktor)</li> </ul>"},{"location":"Actions/","title":"Actions","text":""},{"location":"Actions/#all-requests-is-actions","title":"All requests is Actions","text":"<p>All telegram api requests are various kinds of <code>TgAction</code> interfaces that implementing different methods such as <code>SendMessageAction</code>, which have wrapped in the form of <code>message()</code> - type functions for the convenience of the library interface.</p> <p> </p> <p>Each <code>Action</code> may be able of having its own possible methods, depending on the available <code>Feature</code>.</p>"},{"location":"Actions/#features","title":"Features","text":"<p>Different actions may have different <code>Features</code> depending on the Telegram Bot Api, such as: <code>OptionsFeature</code>, <code>MarkupFeature</code> <code>EntitiesFeature</code> <code>CaptionFeature</code>.</p> <p>Let's take a closer look at them:</p>"},{"location":"Actions/#options","title":"Options","text":"<p>For example, <code>OptionsFeature</code> is used to pass optional parameters.</p> <p>Each action has its own type of options, the corresponding you can see in the <code>Action</code> itself in the <code>options</code> parameter, in properties section. For example, <code>sendMessage</code> which contains a <code>MessageOptions</code> data class with different parameters as options.</p> <p>Example usage:</p> <pre><code>message{ \"*Test*\" }.options {\n    parseMode = ParseMode.Markdown\n}.send(user, bot)\n</code></pre>"},{"location":"Actions/#markup","title":"Markup","text":"<p>There is also a method for sending markups that supports all kind of keyboards: <code>ReplyKeyboardMarkup</code>, <code>InlineKeyboardMarkup</code>, <code>ForceReply</code>, <code>ReplyKeyboardRemove</code>.</p>"},{"location":"Actions/#inline-keyboard-markup","title":"Inline Keyboard Markup","text":"<p>This builder allows you to construct inline buttons with any combination of parameters.</p> <pre><code>message{ \"Test\" }.inlineKeyboardMarkup {\n    \"name\" callback \"callbackData\"         //\n    \"buttonName\" url \"https://google.com\"  //--- these two buttons will be in the same row.\n    newLine() // or br()\n    \"otherButton\" webAppInfo \"data\"       // this will be in other row\n\n    // you can also use a different style within the builder:\n    callbackData(\"buttonName\") { \"callbackData\" }\n}.send(user, bot)\n</code></pre> <p>More details can be seen in the builder documentation.</p>"},{"location":"Actions/#reply-keyboard-markup","title":"Reply Keyboard Markup","text":"<p>This builder allows you to construct menu buttons.</p> <pre><code>message{ \"Test\" }.replyKeyboardMarkup {\n  + \"Menu button\"     // you can add buttons by using unary plus operator\n  + \"Menu button 2\"\n  br() // go to second row\n  \"Send polls \ud83d\udc40\" requestPoll true   // button with parameter\n\n  options {\n    resizeKeyboard = true\n  }\n}.send(user, bot)\n</code></pre> <p>Additional options applicable to the keyboard can be seen in <code>ReplyKeyboardMarkupOptions</code>.</p> <p>See the builder documentation for more details about the methods.</p> <p>It's mostly convenient to use dsl for collecting keyboard markup, but if needed, you can also add markup manually.</p> <pre><code>message{ \"*Test*\" }.markup {\n    InlineKeyboardMarkup(\n        InlineKeyboardButton(\"test\", callbackData = \"testCallback\")\n    )\n}.send(user, bot)\n</code></pre> <pre><code>message{ \"*Test*\" }.markup {\n    ReplyKeyboardMarkup(\n        KeyboardButton(\"Test menu button\")\n    )\n}.send(user, bot)\n</code></pre>"},{"location":"Actions/#entities","title":"Entities","text":"<p>There is also a method for sending <code>MessageEntity</code>.</p> <p>Example usage:</p> <pre><code>message{ \"Test \\$hello\" }.replyKeyboardMarkup {\n    +\"Test menu button\"\n}.entities {\n    5 to 15 url \"https://google.com\" // add TextLink\n    entity(EntityType.Bold, 0, 4)\n    entity(EntityType.Cashtag, 5, 5) // backslash doesn't count (because it's used for compiler)\n}.send(user, bot)\n</code></pre>"},{"location":"Actions/#contextual-entities","title":"Contextual entities.","text":"<p>Entities can also be added through the context of some constructs, they are labeled with a specific EntitiesContextBuilder interface, it is also present in the caption feature.</p> <p>Example usage:</p> <pre><code>message { \"usual text \" - bold { \"this is bold text\" } - \" continue usual\" }.send(user, bot)\n</code></pre> <p>All kinds of entity types are supported.</p>"},{"location":"Actions/#caption","title":"Caption","text":"<p>Also, the <code>caption</code> method can be used to add captions to media files.</p> <p>Example usage:</p> <pre><code>photo { \"FILE_ID\" }.caption { \"Test caption\" }.send(user, bot)\n</code></pre>"},{"location":"Actions/#see-also","title":"See also","text":"<ul> <li>Bot context</li> <li>FSM | Conversation handling</li> </ul>"},{"location":"Activites-and-Processors/","title":"Activites And Processors","text":""},{"location":"Activites-and-Processors/#introduction","title":"Introduction","text":"<p><code>Activity</code> in the terms of this library is the abstract entity that is a generalization of entities such as <code>@CommandHandler</code>, <code>@InputHandler</code>, <code>@UnprocessedHandler</code>, and <code>@CommonHandler</code>.</p> <p>Also take a look at handlers article.</p>"},{"location":"Activites-and-Processors/#collecting-activities","title":"Collecting activities","text":"<p>Activities are collected and prepared all context in compile time (except for those defined through functional dsl).</p> <p>If you want to limit the area in which the package will be searched, you can pass a parameter to plugin:</p> <pre><code>ktGram {\n    packages = listOf(\"com.example.mybot\")\n}\n</code></pre> <p>or without plugin through ksp:</p> <pre><code>ksp {\n    arg(\"package\", \"com.example.mybot\")\n}\n</code></pre> <p>note in such a case, in order for the collected actions to be processed correctly, you must also specify the package in the instance itself.</p> <pre><code>fun main() = runBlocking {\n    val bot = TelegramBot(\"BOT_TOKEN\", \"com.example.mybot\")\n\n    bot.handleUpdates()\n    // start long-polling listener\n}\n</code></pre> <p>this option is added to be able to run multiple bot instances:</p> <pre><code>ktGram {\n    packages = listOf(\"com.example.mybot\", \"com.example.mybot2\")\n}\n</code></pre> <p>or if you're not using plugin to specify different packages you need to specify them with <code>;</code> separator:</p> <pre><code>ksp {\n    arg(\"package\", \"com.example.mybot;com.example.mybot2\")\n}\n</code></pre>"},{"location":"Activites-and-Processors/#processing","title":"Processing","text":""},{"location":"Activites-and-Processors/#webhooks","title":"Webhooks","text":"<p>In your controller (or another place where the <code>webhook</code> is processed), you call: <code>bot.update.parseAndHandle(webhookString)</code></p>"},{"location":"Activites-and-Processors/#long-polling","title":"Long polling","text":"<p>Call: <code>bot.handleUpdates()</code> or through <code>bot.update.setListener { handle(it) }</code></p>"},{"location":"Activites-and-Processors/#see-also","title":"See also","text":"<ul> <li>Update parsing</li> <li>Activity invocation</li> <li>Actions</li> </ul>"},{"location":"Activity-invocation/","title":"Activity Invocation","text":"<p>During activity invocation, it is possible to pass the bot context, as it is declared as a parameter in target functions. </p> <p>The parameters that can be passed are: </p> <ul> <li><code>ProcessedUpdate</code> (and all its subclasses) - current processing update.</li> <li><code>ProcessingContext</code> - low level context of handling activity.</li> <li><code>User</code> - if present.</li> <li><code>Chat</code> - if present.</li> <li><code>TelegramBot</code> - current bot instance. </li> </ul> <p>It is also possible to add a custom type for passing. </p> <p>To do this, add a class that implements <code>Autowiring&lt;T&gt;</code> and mark it with the <code>@Injectable</code> annotation. </p> <p>After implementing the <code>Autowiring</code> interface - <code>T</code> will be available for passing in target functions and will be obtained through the method described in the interface. </p> <pre><code>@Injectable\nobject UserResolver : Autowiring&lt;UserRecord&gt; {\n    override suspend fun get(update: ProcessedUpdate, bot: TelegramBot): UserRecord? {\n        return userRepository.getUserByTgId(update.user.id)\n    }\n}\n</code></pre> <p>Other parameters declared in functions will be searched in parsed parameters. </p> <p>Additionally, parsed parameters during passing can be cast to certain types, here is their list: </p> <ul> <li><code>String</code></li> <li><code>Integer</code></li> <li><code>Long</code></li> <li><code>Short</code></li> <li><code>Float</code></li> <li><code>Double</code></li> </ul> <p>Moreover, note that if parameters are declared and missing (or in parsed parameters or for example <code>User</code> is missing in <code>Update</code>) or the declared type does not fit the received parameter in the function, <code>null</code> will be passed so be careful.</p> <p>Summarizing everything, below here is an example of how function parameters are usually formed:</p> <p> </p>"},{"location":"Activity-invocation/#see-also","title":"See also","text":"<ul> <li>Update parsing</li> <li>Activities &amp; Processors</li> </ul>"},{"location":"Bot-Context/","title":"Bot Context","text":"<p>The bot can also provide the ability to remember some data through the <code>UserData</code> and <code>ClassData</code> interfaces.</p> <ul> <li><code>userData</code> is a user-level data.</li> <li><code>classData</code> is a class-level data, i.e. the data will be stored until the user moves to a command or input that is in a   different class. (in function mode it will work like as user data)</li> </ul> <p>By default, implementation is provided through <code>ConcurrentHashMap</code> but can be changed to your own through <code>UserData</code> and <code>ClassData</code> interfaces using the data storage tools of your choice.</p> <p>Caution</p> <p>Don't forget to hit gradle <code>kspKotlin</code>/or any relevant ksp task to make required codegen bindings available.</p> <p>To change, all you need to do is put under your implementation <code>@CtxProvider</code> annotation and run gradle ksp task (or build).</p> <pre><code>@CtxProvider\nclass MyRedis : UserData&lt;String&gt; {\n    // ...\n}\n</code></pre>"},{"location":"Bot-Context/#see-also","title":"See also","text":"<ul> <li>Home</li> <li>Update parsing</li> </ul>"},{"location":"Bot-configuration/","title":"Bot Configuration","text":"<p>Library provides plenty of configuration options, you can see api reference in the <code>BotConfiguration</code> class description.</p> <p>There are also two approaches to configuring the bot:</p>"},{"location":"Bot-configuration/#configurator-lambda","title":"Configurator lambda","text":"<pre><code>// ...\nval bot = TelegramBot(\"BOT_TOKEN\") {\n  inputListener = RedisInputListenerImpl()\n  classManager = KoinClassManagerImpl()\n  logging {\n      botLogLevel = LogLvl.DEBUG\n  }\n}\n// ...\n</code></pre>"},{"location":"Bot-configuration/#configloader-interface","title":"ConfigLoader interface","text":"<p>There is also the ability to configure through a special <code>ConfigLoader</code> interface, which you can use to load settings from external sources (<code>properties</code>, <code>command line args</code>, etc.).</p> <p>The implementation of this interface can be passed through a secondary constructor and the instance will be configured accordingly.</p> <pre><code>val bot = TelegramBot(ConfigLoaderImpl)\n</code></pre> <p>Currently there's several modules provided that implements this interface like <code>ktgram-config-env</code>, <code>ktgram-config-toml</code>.</p>"},{"location":"Bot-configuration/#botconfiguration-overview","title":"BotConfiguration Overview","text":""},{"location":"Bot-configuration/#botconfiguration","title":"BotConfiguration","text":"<p>The <code>BotConfiguration</code> class is the central hub for configuring a bot. It includes properties for identifying the bot, setting up the API host, determining whether the bot operates in a test environment, handling inputs, managing classes, and controlling input auto-removal. Additionally, it provides internal properties for rate limiting, HTTP client configuration, logging, update listening, and command parsing.</p>"},{"location":"Bot-configuration/#properties","title":"Properties","text":"<ul> <li><code>identifier</code>: Identifies different bot instances during multi-bot processing.</li> <li><code>apiHost</code>: Host of the Telegram API.</li> <li><code>isTestEnv</code>: Flag indicating whether the bot operates in a test environment.</li> <li><code>inputListener</code>: Instance of the input handling class.</li> <li><code>classManager</code>: Manager used to get classes.</li> <li><code>inputAutoRemoval</code>: Flag regulating the auto-deletion of the input point during processing.</li> <li><code>exceptionHandlingStrategy</code>: Defines the strategy for handling exceptions.<ul> <li><code>CollectToChannel</code> - Collect to <code>TgUpdateHandler.caughtExceptions</code>.</li> <li><code>Throw</code> - Throw again wrapped with <code>TgException</code>.</li> <li><code>DoNothing</code> - Do nothing :)</li> <li><code>Handle</code> - Set custom handler.</li> </ul> </li> <li><code>throwExOnActionsFailure</code>: Throws an exception when any bot request fails.</li> </ul>"},{"location":"Bot-configuration/#configuration-blocks","title":"Configuration Blocks","text":"<p><code>BotConfiguration</code> also offers functions to configure its internal components:</p> <ul> <li><code>httpClient(block: HttpConfiguration.() -&gt; Unit)</code>: Configures the HTTP client.</li> <li><code>logging(block: LoggingConfiguration.() -&gt; Unit)</code>: Configures logging.</li> <li><code>rateLimiter(block: RateLimiterConfiguration.() -&gt; Unit)</code>: Configures request limiting.</li> <li><code>updatesListener(block: UpdatesListenerConfiguration.() -&gt; Unit)</code>: Configures the updates listener.</li> <li><code>commandParsing(block: CommandParsingConfiguration.() -&gt; Unit)</code>: Specifies command parsing pattern.</li> </ul>"},{"location":"Bot-configuration/#associated-configuration-classes","title":"Associated Configuration Classes","text":""},{"location":"Bot-configuration/#ratelimiterconfiguration","title":"RateLimiterConfiguration","text":"<p>Configures global rate limiting.</p> <ul> <li><code>limits</code>: Global rate limits.</li> <li><code>mechanism</code>: Mechanism used for rate limiting, default is TokenBucket algorithm.</li> <li><code>exceededAction</code>: Action applied when the limit is exceeded.</li> </ul>"},{"location":"Bot-configuration/#httpconfiguration","title":"HttpConfiguration","text":"<p>Contains configuration for the bot's HTTP client.</p> <ul> <li><code>requestTimeoutMillis</code>: Request timeout in milliseconds.</li> <li><code>connectTimeoutMillis</code>: Connection timeout in milliseconds.</li> <li><code>socketTimeoutMillis</code>: Socket timeout in milliseconds.</li> <li><code>maxRequestRetry</code>: Maximum retry for HTTP requests.</li> <li><code>retryStrategy</code>: Strategy for retries, customizable.</li> <li><code>retryDelay</code>: Multiplier for timeout at each retry.</li> <li><code>proxy</code>: Proxy settings for HTTP calls.</li> <li><code>additionalHeaders</code>: Headers applied to every request.</li> </ul>"},{"location":"Bot-configuration/#loggingconfiguration","title":"LoggingConfiguration","text":"<p>Manages logging levels for bot actions and HTTP requests.</p> <ul> <li><code>botLogLevel</code>: Level of logs for bot actions.</li> <li><code>httpLogLevel</code>: Level of logs for HTTP requests.</li> </ul>"},{"location":"Bot-configuration/#updateslistenerconfiguration","title":"UpdatesListenerConfiguration","text":"<p>Configures parameters related to pulling updates.</p> <ul> <li><code>dispatcher</code>: Dispatcher for collecting incoming updates.</li> <li><code>processingDispatcher</code>: Dispatcher for processing updates.</li> <li><code>pullingDelay</code>: Delay after each pulling request.</li> <li><code>updatesPollingTimeout</code>: Timeout option for long-polling mechanism.</li> </ul>"},{"location":"Bot-configuration/#commandparsingconfiguration","title":"CommandParsingConfiguration","text":"<p>Specifies parameters for command parsing.</p> <ul> <li><code>commandDelimiter</code>: Separator between command and parameters.</li> <li><code>parametersDelimiter</code>: Separator between parameters.</li> <li><code>parameterValueDelimiter</code>: Separator between key and value of parameter.</li> <li><code>restrictSpacesInCommands</code>: Flag indicating if spaces in commands should be treated as the end of the command.</li> <li><code>useIdentifierInGroupCommands</code>: Uses bot's identifier to match commands containing @.</li> </ul>"},{"location":"Bot-configuration/#example-configuration","title":"Example Configuration","text":"<p>Here's an example of how to configure a bot using these classes:</p> <pre><code>val bot = TelegramBot(\"TOKEN\") {\n    identifier = \"MyBot\",\n    apiHost = \"https://api.telegram.org\",\n    isTestEnv = true,\n    inputListener = InputListenerMapImpl(),\n    classManager = ClassManagerImpl(),\n\n    httpClient {\n        requestTimeoutMillis = 5000L\n        connectTimeoutMillis = 3000L\n        socketTimeoutMillis = 2000L\n    }\n    logging {\n        botLogLevel = LogLvl.DEBUG\n        httpLogLevel = HttpLogLevel.BODY\n    }\n    updatesListener {\n        dispatcher = Dispatchers.IO\n        processingDispatcher = Dispatchers.Unconfined\n        pullingDelay = 1000L\n    }\n    commandParsing {\n        commandDelimiter = '*'\n        parametersDelimiter = '&amp;'\n        restrictSpacesInCommands = true\n    }\n}\n</code></pre> <p>This configuration sets up a bot with specific identifiers, enables test environment mode, configures rate limiting, HTTP client settings, logging levels, update listener parameters, and command parsing rules.</p> <p>By leveraging these configuration options, developers can fine-tune their bots to meet specific requirements and optimize performance across various operational scenarios.</p>"},{"location":"F.A.Q/","title":"F.A.Q","text":""},{"location":"F.A.Q/#abstractmethoderror-exception","title":"<code>AbstractMethodError</code> exception","text":"<p>If you getting such exception on the startup of your application:</p> <pre><code>Exception in thread \"DefaultDispatcher-worker-1\" java.lang.AbstractMethodError: 'kotlinx.serialization.KSerializer[] kotlinx.serialization.internal.GeneratedSerializer.typeParametersSerializers()'\n    at eu.vendeli.tgbot.types.options.GetUpdatesOptions$$serializer.typeParametersSerializers(GetUpdatesOptions.kt:6)\n</code></pre> <p>It happening because your build system resolving old serialization library which internal mechanics differs. To solve it you should make it use more newer version, for example by adding this to your buildscript:</p> <pre><code>configurations.all {\n    resolutionStrategy.eachDependency {\n        val serdeVer = \"x.x.x\" // should be &gt;= 1.8.0\n        when(requested.module.toString()) {\n            // json serialiazaton\n            \"org.jetbrains.kotlinx:kotlinx-serialization-json\" -&gt; useVersion(serdeVer)\n            \"org.jetbrains.kotlinx:kotlinx-serialization-json-jvm\" -&gt; useVersion(serdeVer)\n            \"org.jetbrains.kotlinx:kotlinx-serialization-core\" -&gt; useVersion(serdeVer)\n            \"org.jetbrains.kotlinx:kotlinx-serialization-core-jvm\" -&gt; useVersion(serdeVer)\n            \"org.jetbrains.kotlinx:kotlinx-serialization-bom\" -&gt; useVersion(serdeVer)\n        }\n    }\n}\n</code></pre> <p>(If it was well described in changelog I would never upgraded it bc I getting so much reports on this issue)</p>"},{"location":"F.A.Q/#how-do-i-get-the-methods-response","title":"How do I get the method's response?","text":"<p>To get a response and be able to operate over, you need to use <code>sendReturning</code> at the end of the method instead of <code>send</code>.</p> <p>In this case the <code>Response</code> class is returned, which contains the response, success or failure, further you need to either handle the failure or just call <code>getOrNull()</code>.</p> <p>There's section about: Processing responses.</p>"},{"location":"F.A.Q/#im-getting-error-while-using-spring-boot-devtools","title":"I'm getting error while using <code>spring-boot-devtools</code>","text":"<p>This happens because <code>spring-boot-devtools</code> has its own <code>classloader</code> and it does not find methods.</p> <p>You need to add to <code>resources/META-INF/spring-devtools.properties</code>:</p> <pre><code>restart.include.generated=/eu.vendeli\n</code></pre>"},{"location":"F.A.Q/#how-to-change-ktor-engine","title":"How to change ktor engine","text":"<p>If you want to change the engine used by the client you can simply change the parameter in the plugin settings.</p>"},{"location":"F.A.Q/#how-to-use-my-favorite-logging-provider","title":"How to use my favorite logging provider","text":"<p>The library uses <code>slf4j-api</code> and to use the provider you just need to add it to the dependencies.</p> <p>The library plugin automatically detects the use of the provider, if provider is missing, <code>logback</code> will be used by default.</p>"},{"location":"F.A.Q/#catch-network-exceptions-within-long-polling-handler","title":"Catch network exceptions within long-polling handler","text":"<p>For example if you have an unstable connection and need to catch an error because of this, perhaps this approach will help you:</p> <pre><code>fun main() {\n    val bot = TelegramBot(\"TOKEN\")\n\n    try {\n        bot.handleUpdates()\n    } catch (e: Exception) {\n        // handle if needed\n\n        bot.update.stopListener()\n        bot.handleUpdates()\n    }\n}\n</code></pre> <p>Also you can take a look how it's done in spring-starter.</p>"},{"location":"FSM-and-Conversation-handling/","title":"Fsm And Conversation Handling","text":"<p>The library also supports the FSM mechanism, which is a mechanism for progressive processing of user input with incorrect input handling.</p> <p>Note</p> <p>TL;DR: See example there.</p>"},{"location":"FSM-and-Conversation-handling/#in-theory","title":"In theory","text":"<p>Let's imagine a situation where you need to collect a user survey, you can ask for all the data of a person at one step, but with incorrect input of one of the parameters, it will be difficult both for the user and for us, and each step may have a difference depending on certain input data.</p> <p>Now let's imagine step-by-step input of data, where the bot enters dialogue mode with the user.</p> <p> </p> <p>Green arrows indicate the process of transitioning through steps without errors, blue arrows mean saving the current state and waiting for re-input (for example, if the user indicated that he is -100 years old, it should ask for age again), and red ones show exit from the entire process due to any command or any other meaning cancellation.</p>"},{"location":"FSM-and-Conversation-handling/#in-practice","title":"In practice","text":"<p>The Wizard system enables multi-step user interactions in Telegram bots. It guides users through a sequence of steps, validates input, stores state, and transitions between steps.</p> <p>Key Benefits: - Type-safe: Compile-time type checking for state access - Declarative: Define steps as nested classes/objects - Flexible: Support for conditional transitions, jumps, and retries - Stateful: Automatic state persistence with pluggable storage backends - Integrated: Works with the existing Activity system</p>"},{"location":"FSM-and-Conversation-handling/#core-concepts","title":"Core Concepts","text":""},{"location":"FSM-and-Conversation-handling/#wizardstep","title":"WizardStep","text":"<p>A <code>WizardStep</code> represents a single step in the wizard flow. Each step must implement:</p> <ul> <li><code>onEntry(ctx: WizardContext)</code>: Called when the user enters this step. Use this to prompt the user.</li> <li><code>onRetry(ctx: WizardContext)</code>: Called when validation fails and the step should retry. Use this to show error messages.</li> <li><code>validate(ctx: WizardContext): Transition</code>: Validates the current input and returns a <code>Transition</code> indicating what happens next.</li> <li><code>store(ctx: WizardContext): Any?</code> (optional): Returns the value to persist for this step. Return <code>null</code> if the step doesn't store state.</li> </ul> <pre><code>object NameStep : WizardStep(isInitial = true) {\n    override suspend fun onEntry(ctx: WizardContext) {\n        message { \"What is your name?\" }.send(ctx.user, ctx.bot)\n    }\n\n    override suspend fun onRetry(ctx: WizardContext) {\n        message { \"Name cannot be empty. Please try again.\" }.send(ctx.user, ctx.bot)\n    }\n\n    override suspend fun validate(ctx: WizardContext): Transition {\n        return if (ctx.update.text.isNullOrBlank()) {\n            Transition.Retry\n        } else {\n            Transition.Next\n        }\n    }\n\n    override suspend fun store(ctx: WizardContext): String {\n        return ctx.update.text!!\n    }\n}\n</code></pre> <p>Note</p> <p>If some step is not marked as initial -&gt; first declared step is considered as.</p>"},{"location":"FSM-and-Conversation-handling/#transition","title":"Transition","text":"<p>A <code>Transition</code> determines what happens after validation:</p> <ul> <li><code>Transition.Next</code>: Move to the next step in sequence</li> <li><code>Transition.JumpTo(step: KClass&lt;out WizardStep&gt;)</code>: Jump to a specific step</li> <li><code>Transition.Retry</code>: Retry the current step (validation failed)</li> <li><code>Transition.Finish</code>: Finish the wizard</li> </ul> <pre><code>// Conditional jump based on input\noverride suspend fun validate(ctx: WizardContext): Transition {\n    val age = ctx.update.text?.toIntOrNull()\n    return when {\n        age == null -&gt; Transition.Retry\n        age &lt; 18 -&gt; Transition.JumpTo(UnderageStep::class)\n        else -&gt; Transition.Next\n    }\n}\n</code></pre>"},{"location":"FSM-and-Conversation-handling/#wizardcontext","title":"WizardContext","text":"<p><code>WizardContext</code> provides access to: - <code>user: User</code>: The current user - <code>update: ProcessedUpdate</code>: The current update - <code>bot: TelegramBot</code>: The bot instance - <code>userReference: UserChatReference</code>: User and chat ID reference for state storage</p> <p>Plus type-safe state access methods (generated by KSP).</p>"},{"location":"FSM-and-Conversation-handling/#defining-a-wizard","title":"Defining a Wizard","text":""},{"location":"FSM-and-Conversation-handling/#basic-structure","title":"Basic Structure","text":"<p>A wizard is defined as a class or object annotated with <code>@WizardHandler</code>:</p> <pre><code>@WizardHandler(trigger = [\"/survey\"])\nobject SurveyWizard {\n    object NameStep : WizardStep(isInitial = true) {\n        // ... step implementation\n    }\n\n    object AgeStep : WizardStep {\n        // ... step implementation\n    }\n\n    object FinishStep : WizardStep {\n        // ... step implementation\n    }\n}\n</code></pre>"},{"location":"FSM-and-Conversation-handling/#annotation-parameters","title":"Annotation Parameters","text":"<p><code>@WizardHandler</code> accepts: - <code>trigger: Array&lt;String&gt;</code>: Commands that start the wizard (e.g., <code>[\"/start\", \"/survey\"]</code>) - <code>scope: Array&lt;UpdateType&gt;</code>: Update types to listen for (default: <code>[UpdateType.MESSAGE]</code>) - <code>stateManagers: Array&lt;KClass&lt;out WizardStateManager&lt;*&gt;&gt;&gt;</code>: State manager classes for storing step data</p>"},{"location":"FSM-and-Conversation-handling/#state-management","title":"State Management","text":""},{"location":"FSM-and-Conversation-handling/#wizardstatemanager","title":"WizardStateManager","text":"<p>State is stored using <code>WizardStateManager&lt;T&gt;</code> implementations. Each manager handles a specific type:</p> <pre><code>interface WizardStateManager&lt;T : Any&gt; {\n    suspend fun get(key: KClass&lt;out WizardStep&gt;, reference: UserChatReference): T?\n    suspend fun set(key: KClass&lt;out WizardStep&gt;, reference: UserChatReference, value: T)\n    suspend fun del(key: KClass&lt;out WizardStep&gt;, reference: UserChatReference)\n}\n</code></pre> <p>See also: MapStateManager, MapStringStateManager, MapIntStateManager, MapLongStateManager."},{"location":"FSM-and-Conversation-handling/#automatic-matching","title":"Automatic Matching","text":"<p>KSP matches steps to state managers based on the <code>store()</code> return type:</p> <pre><code>@WizardHandler(\n    trigger = [\"/survey\"],\n    stateManagers = [StringStateManager::class, IntStateManager::class]\n)\nobject SurveyWizard {\n    object NameStep : WizardStep(isInitial = true) {\n        override suspend fun store(ctx: WizardContext): String {\n            return ctx.update.text!! // Matches StringStateManager\n        }\n    }\n\n    object AgeStep : WizardStep {\n        override suspend fun store(ctx: WizardContext): Int {\n            return ctx.update.text!!.toInt() // Matches IntStateManager\n        }\n    }\n}\n</code></pre>"},{"location":"FSM-and-Conversation-handling/#per-step-override","title":"Per-Step Override","text":"<p>Override the state manager for a specific step using <code>@WizardHandler.StateManager</code>:</p> <pre><code>@WizardHandler(\n    trigger = [\"/survey\"],\n    stateManagers = [DefaultStateManager::class]\n)\nobject SurveyWizard {\n    object NameStep : WizardStep(isInitial = true) {\n        // Uses DefaultStateManager\n    }\n\n    @WizardHandler.StateManager(CustomStateManager::class)\n    object AgeStep : WizardStep {\n        // Uses CustomStateManager instead\n    }\n}\n</code></pre>"},{"location":"FSM-and-Conversation-handling/#type-safe-state-access","title":"Type-Safe State Access","text":"<p>KSP generates type-safe extension functions on <code>WizardContext</code> for each step that stores state.</p>"},{"location":"FSM-and-Conversation-handling/#generated-functions","title":"Generated Functions","text":"<p>For a step that stores a <code>String</code>:</p> <pre><code>// Generated automatically by KSP\nsuspend inline fun &lt;reified S : WizardStep&gt; WizardContext.getState(): String?\nsuspend inline fun &lt;reified S : WizardStep&gt; WizardContext.setState(value: String)\nsuspend inline fun &lt;reified S : WizardStep&gt; WizardContext.delState()\n</code></pre>"},{"location":"FSM-and-Conversation-handling/#usage","title":"Usage","text":"<pre><code>object FinishStep : WizardStep {\n    override suspend fun onEntry(ctx: WizardContext) {\n        // Type-safe access - returns String? (nullable)\n        val name: String? = ctx.getState&lt;NameStep&gt;()\n\n        // Type-safe access - returns Int? (nullable)\n        val age: Int? = ctx.getState&lt;AgeStep&gt;()\n\n        val summary = buildString {\n            appendLine(\"Name: $name\")\n            appendLine(\"Age: $age\")\n        }\n\n        message { summary }.send(ctx.user, ctx.bot)\n    }\n\n    override suspend fun onRetry(ctx: WizardContext) = Unit\n\n    override suspend fun validate(ctx: WizardContext): Transition {\n        return Transition.Finish\n    }\n}\n</code></pre>"},{"location":"FSM-and-Conversation-handling/#fallback-methods","title":"Fallback Methods","text":"<p>If type-safe methods aren't available, use the fallback methods:</p> <pre><code>// Fallback - returns Any?\nval name = ctx.getState(NameStep::class)\n\n// Fallback - accepts Any?\nctx.setState(NameStep::class, \"John\")\nctx.delState(NameStep::class)\n</code></pre>"},{"location":"FSM-and-Conversation-handling/#complete-example","title":"Complete Example","text":""},{"location":"FSM-and-Conversation-handling/#user-registration-wizard","title":"User Registration Wizard","text":"<pre><code>@WizardHandler(\n    trigger = [\"/register\"],\n    stateManagers = [StringStateManager::class, IntStateManager::class]\n)\nobject RegistrationWizard {\n    object NameStep : WizardStep(isInitial = true) {\n        override suspend fun onEntry(ctx: WizardContext) {\n            message { \"What is your name?\" }.send(ctx.user, ctx.bot)\n        }\n\n        override suspend fun onRetry(ctx: WizardContext) {\n            message { \"Please enter a valid name.\" }.send(ctx.user, ctx.bot)\n        }\n\n        override suspend fun validate(ctx: WizardContext): Transition {\n            val name = ctx.update.text?.trim()\n            return if (name.isNullOrBlank() || name.length &lt; 2) {\n                Transition.Retry\n            } else {\n                Transition.Next\n            }\n        }\n\n        override suspend fun store(ctx: WizardContext): String {\n            return ctx.update.text!!.trim()\n        }\n    }\n\n    object AgeStep : WizardStep {\n        override suspend fun onEntry(ctx: WizardContext) {\n            message { \"How old are you?\" }.send(ctx.user, ctx.bot)\n        }\n\n        override suspend fun onRetry(ctx: WizardContext) {\n            message { \"Please enter a valid age (must be a number).\" }.send(ctx.user, ctx.bot)\n        }\n\n        override suspend fun validate(ctx: WizardContext): Transition {\n            val age = ctx.update.text?.toIntOrNull()\n            return when {\n                age == null -&gt; Transition.Retry\n                age &lt; 0 || age &gt; 150 -&gt; Transition.Retry\n                age &lt; 18 -&gt; Transition.JumpTo(UnderageStep::class)\n                else -&gt; Transition.Next\n            }\n        }\n\n        override suspend fun store(ctx: WizardContext): Int {\n            return ctx.update.text!!.toInt()\n        }\n    }\n\n    object UnderageStep : WizardStep {\n        override suspend fun onEntry(ctx: WizardContext) {\n            message { \n                \"Sorry, you must be 18 or older to register.\" \n            }.send(ctx.user, ctx.bot)\n        }\n\n        override suspend fun onRetry(ctx: WizardContext) = Unit\n\n        override suspend fun validate(ctx: WizardContext): Transition {\n            return Transition.Finish\n        }\n    }\n\n    object ConfirmationStep : WizardStep {\n        override suspend fun onEntry(ctx: WizardContext) {\n            // Type-safe state access\n            val name: String? = ctx.getState&lt;NameStep&gt;()\n            val age: Int? = ctx.getState&lt;AgeStep&gt;()\n\n            val confirmation = buildString {\n                appendLine(\"Please confirm your information:\")\n                appendLine(\"Name: $name\")\n                appendLine(\"Age: $age\")\n                appendLine()\n                appendLine(\"Reply 'yes' to confirm or 'no' to start over.\")\n            }\n\n            message { confirmation }.send(ctx.user, ctx.bot)\n        }\n\n        override suspend fun onRetry(ctx: WizardContext) {\n            message { \"Please reply 'yes' or 'no'.\" }.send(ctx.user, ctx.bot)\n        }\n\n        override suspend fun validate(ctx: WizardContext): Transition {\n            val response = ctx.update.text?.lowercase()?.trim()\n            return when (response) {\n                \"yes\" -&gt; Transition.Finish\n                \"no\" -&gt; Transition.JumpTo(NameStep::class) // Start over\n                else -&gt; Transition.Retry\n            }\n        }\n    }\n\n    object FinishStep : WizardStep {\n        override suspend fun onEntry(ctx: WizardContext) {\n            val name: String? = ctx.getState&lt;NameStep&gt;()\n            val age: Int? = ctx.getState&lt;AgeStep&gt;()\n\n            // Save to database, send confirmation, etc.\n            message { \n                \"Registration complete! Welcome, $name (age $age).\" \n            }.send(ctx.user, ctx.bot)\n        }\n\n        override suspend fun onRetry(ctx: WizardContext) = Unit\n\n        override suspend fun validate(ctx: WizardContext): Transition {\n            return Transition.Finish\n        }\n    }\n}\n</code></pre>"},{"location":"FSM-and-Conversation-handling/#advanced-features","title":"Advanced Features","text":""},{"location":"FSM-and-Conversation-handling/#conditional-transitions","title":"Conditional Transitions","text":"<p>Use <code>Transition.JumpTo</code> for conditional flows:</p> <pre><code>override suspend fun validate(ctx: WizardContext): Transition {\n    val choice = ctx.update.text?.lowercase()\n    return when (choice) {\n        \"premium\" -&gt; Transition.JumpTo(PremiumStep::class)\n        \"basic\" -&gt; Transition.JumpTo(BasicStep::class)\n        else -&gt; Transition.Retry\n    }\n}\n</code></pre>"},{"location":"FSM-and-Conversation-handling/#stateless-steps","title":"Stateless Steps","text":"<p>Steps don't need to store state. Simply return <code>null</code> from <code>store()</code> (or keep as is):</p> <pre><code>object ConfirmationStep : WizardStep {\n    override suspend fun store(ctx: WizardContext): Any? = null\n    // ... rest of implementation\n}\n</code></pre>"},{"location":"FSM-and-Conversation-handling/#custom-state-managers","title":"Custom State Managers","text":"<p>Implement <code>WizardStateManager&lt;T&gt;</code> for custom storage (database, Redis, etc.):</p> <pre><code>class DatabaseStateManager : WizardStateManager&lt;String&gt; {\n    override suspend fun get(\n        key: KClass&lt;out WizardStep&gt;,\n        reference: UserChatReference\n    ): String? {\n        // Load from database\n        return database.getWizardState(reference.userId, key.qualifiedName)\n    }\n\n    override suspend fun set(\n        key: KClass&lt;out WizardStep&gt;,\n        reference: UserChatReference,\n        value: String\n    ) {\n        // Save to database\n        database.saveWizardState(reference.userId, key.qualifiedName, value)\n    }\n\n    override suspend fun del(\n        key: KClass&lt;out WizardStep&gt;,\n        reference: UserChatReference\n    ) {\n        // Delete from database\n        database.deleteWizardState(reference.userId, key.qualifiedName)\n    }\n}\n</code></pre>"},{"location":"FSM-and-Conversation-handling/#how-it-works-internally","title":"How It Works Internally","text":""},{"location":"FSM-and-Conversation-handling/#code-generation","title":"Code Generation","text":"<p>KSP generates:</p> <ol> <li>WizardActivity: A concrete implementation extending <code>WizardActivity</code> with hardcoded steps</li> <li>Start Activity: Handles the command trigger and starts the wizard</li> <li>Input Activity: Handles user input during the wizard flow</li> <li>State Accessors: Type-safe extension functions for state access</li> </ol>"},{"location":"FSM-and-Conversation-handling/#flow","title":"Flow","text":"<ol> <li>User sends <code>/register</code> \u2192 Start Activity is invoked</li> <li>Start Activity creates <code>WizardContext</code> and calls <code>wizardActivity.start(ctx)</code></li> <li><code>start()</code> enters the initial step and sets <code>inputListener</code> to track the current step</li> <li>User sends a message \u2192 Input Activity is invoked</li> <li>Input Activity calls <code>wizardActivity.handleInput(ctx)</code></li> <li><code>handleInput()</code> validates input, persists state, and transitions to the next step</li> <li>Process repeats until <code>Transition.Finish</code> is returned</li> </ol>"},{"location":"FSM-and-Conversation-handling/#state-persistence","title":"State Persistence","text":"<ul> <li>State is persisted after successful validation (before transition)</li> <li>Each step's <code>store()</code> return value is saved using the matching <code>WizardStateManager</code></li> <li>State is scoped per user and chat (<code>UserChatReference</code>)</li> </ul>"},{"location":"FSM-and-Conversation-handling/#best-practices","title":"Best Practices","text":""},{"location":"FSM-and-Conversation-handling/#1-always-provide-clear-prompts","title":"1. Always Provide Clear Prompts","text":"<pre><code>override suspend fun onEntry(ctx: WizardContext) {\n    message { \n        \"Please enter your email address:\\n\" +\n        \"(Format: user@example.com)\" \n    }.send(ctx.user, ctx.bot)\n}\n</code></pre>"},{"location":"FSM-and-Conversation-handling/#2-handle-validation-errors-gracefully","title":"2. Handle Validation Errors Gracefully","text":"<pre><code>override suspend fun onRetry(ctx: WizardContext) {\n    message { \n        \"Invalid email format. Please try again.\\n\" +\n        \"Example: user@example.com\" \n    }.send(ctx.user, ctx.bot)\n}\n</code></pre>"},{"location":"FSM-and-Conversation-handling/#3-use-type-safe-state-access","title":"3. Use Type-Safe State Access","text":"<p>Prefer generated type-safe methods:</p> <pre><code>// \u2705 Good - type-safe\nval name: String? = ctx.getState&lt;NameStep&gt;()\n\n// \u274c Avoid - loses type safety\nval name = ctx.getState(NameStep::class) as? String\n</code></pre>"},{"location":"FSM-and-Conversation-handling/#4-keep-steps-focused","title":"4. Keep Steps Focused","text":"<p>Each step should have a single responsibility:</p> <pre><code>// \u2705 Good - focused step\nobject EmailStep : WizardStep {\n    // Only handles email collection\n}\n\n// \u274c Avoid - too much logic\nobject PersonalInfoStep : WizardStep {\n    // Handles name, email, phone, address...\n}\n</code></pre>"},{"location":"FSM-and-Conversation-handling/#5-use-meaningful-step-names","title":"5. Use Meaningful Step Names","text":"<pre><code>// \u2705 Good\nobject EmailVerificationStep : WizardStep\n\n// \u274c Avoid\nobject Step2 : WizardStep\n</code></pre>"},{"location":"FSM-and-Conversation-handling/#6-clean-up-state-when-needed","title":"6. Clean Up State When Needed","text":"<p>If you need to clear state manually:</p> <pre><code>object CancelStep : WizardStep {\n    override suspend fun onEntry(ctx: WizardContext) {\n        // Clear all wizard state\n        ctx.delState&lt;NameStep&gt;()\n        ctx.delState&lt;AgeStep&gt;()\n\n        message { \"Registration cancelled.\" }.send(ctx.user, ctx.bot)\n    }\n}\n</code></pre>"},{"location":"FSM-and-Conversation-handling/#summary","title":"Summary","text":"<p>The Wizard system provides: - \u2705 Type-safe state management with compile-time checking - \u2705 Declarative step definitions as nested classes - \u2705 Flexible transitions with conditional logic - \u2705 Automatic code generation via KSP - \u2705 Integrated with the existing Activity system - \u2705 Pluggable state storage backends</p> <p>Start building wizards by annotating a class with <code>@WizardHandler</code> and defining your steps as nested <code>WizardStep</code> objects! if you have any questions contact us in chat, we will be glad to help :)</p>"},{"location":"Functional-DSL/","title":"Functional Dsl","text":""},{"location":"Functional-DSL/#to-infinity-functional-dsl-and-beyond","title":"To ~~infinity~~ functional dsl and beyond!","text":"<p>The bot supports both annotation-based and functional dsl setting context. You can combine both approaches.</p>"},{"location":"Functional-DSL/#functional-dsl","title":"Functional DSL","text":"<p>Functional DSL is just different way of defining bot context.</p> <p>Example:</p> <pre><code>suspend fun main() {\n    val bot = TelegramBot(\"BOT_TOKEN\")\n\n    bot.setFunctionality {\n        onChosenInlineResult {\n            println(\"got a result ${update.chosenInlineResult.resultId} from ${update.user}\")\n        }\n    }\n}\n</code></pre>"},{"location":"Functional-DSL/#commands-and-inputs","title":"Commands and Inputs","text":"<p>You can handle both <code>commands</code> and <code>inputs</code> using the functional DSL.</p>"},{"location":"Functional-DSL/#commands","title":"Commands","text":"<pre><code>suspend fun main() {\n    val bot = TelegramBot(\"BOT_TOKEN\")\n\n    bot.setFunctionality {\n        // Regular command\n        onCommand(\"/start\") {\n            message { \"Hello\" }.send(user, bot)\n        }\n\n        // Regex-based command matching\n        onCommand(\"\"\"(red|green|blue)\"\"\".toRegex()) {\n            message { \"you typed ${update.text} color\" }.send(user, bot)\n        }\n    }\n}\n</code></pre> <p>In <code>onCommand</code>, parsed parameters are available as <code>Map&lt;String, String&gt;</code> based on your configuration.</p>"},{"location":"Functional-DSL/#inputs","title":"Inputs","text":"<p>You can use inputs via <code>bot.inputListener</code>.</p> <pre><code>suspend fun main() {\n    val bot = TelegramBot(\"BOT_TOKEN\")\n\n    bot.setFunctionality {\n        onCommand(\"/start\") {\n            message { \"Hello, what's your name?\" }.send(user, bot)\n            bot.inputListener[user] = \"testInput\"\n        }\n\n        onInput(\"testInput\") {\n            message { \"Hey, nice to meet you, ${update.text}\" }.send(user, bot)\n        }\n    }\n}\n</code></pre>"},{"location":"Functional-DSL/#input-chains","title":"Input Chains","text":"<p>For multi-step input flows, use <code>inputChain</code>:</p> <pre><code>bot.setFunctionality {\n    inputChain(\"conversation\") {\n        message { \"Nice to meet you, ${update.text}\" }.send(user, bot)\n        message { \"What is your favorite food?\" }.send(user, bot)\n    }.breakIf({ update.text == \"peanut butter\" }) { // chain break condition\n        message { \"Oh, too bad, I'm allergic to it.\" }.send(user, bot)\n        // action that will be applied when condition matches\n    }.andThen {\n        // next input point if break condition doesn't match\n        message { \"Great choice!\" }.send(user, bot)\n    }\n}\n</code></pre> <p>The chain automatically advances to the next step unless a break condition is met. If a break condition matches and <code>repeat</code> is <code>true</code> (default), the user stays on the current step.</p>"},{"location":"Functional-DSL/#update-type-handlers","title":"Update Type Handlers","text":"<p>Handle specific update types directly:</p> <pre><code>bot.setFunctionality {\n    onUpdate(UpdateType.MESSAGE, UpdateType.CALLBACK_QUERY) {\n        // Handle both message and callback query updates\n        println(\"Received update: ${update.type}\")\n    }\n}\n</code></pre>"},{"location":"Functional-DSL/#common-matchers","title":"Common Matchers","text":"<p>Match text content (not just commands) using <code>common</code>:</p> <pre><code>bot.setFunctionality {\n    // String matching\n    common(\"hello\") {\n        message { \"Hi there!\" }.send(user, bot)\n    }\n\n    // Regex matching\n    common(\"\"\"\\d+\"\"\".toRegex()) {\n        message { \"You sent a number!\" }.send(user, bot)\n    }\n}\n</code></pre>"},{"location":"Functional-DSL/#fallback-handler","title":"Fallback Handler","text":"<p>Handle updates that weren't processed by any handler:</p> <pre><code>bot.setFunctionality {\n    whenNotHandled {\n        message { \"I didn't understand that.\" }.send(user, bot)\n    }\n}\n</code></pre>"},{"location":"Functional-DSL/#advanced-configuration","title":"Advanced Configuration","text":""},{"location":"Functional-DSL/#rate-limiting","title":"Rate Limiting","text":"<p>Apply rate limits to any handler:</p> <pre><code>bot.setFunctionality {\n    onCommand(\"/expensive\", rateLimits = RateLimits(5, 60)) {\n        // This command can only be called 5 times per 60 seconds\n        message { \"Processing...\" }.send(user, bot)\n    }\n}\n</code></pre>"},{"location":"Functional-DSL/#guards","title":"Guards","text":"<p>Use guards to add custom validation logic:</p> <pre><code>bot.setFunctionality {\n    onCommand(\"/admin\", guard = AdminGuard::class) {\n        message { \"Admin command executed\" }.send(user, bot)\n    }\n}\n</code></pre>"},{"location":"Functional-DSL/#argument-parsing","title":"Argument Parsing","text":"<p>Customize how command arguments are parsed:</p> <pre><code>bot.setFunctionality {\n    onCommand(\"/custom\", argParser = CustomArgParser::class) {\n        // parameters will be parsed using CustomArgParser\n        message { \"Parameters: $parameters\" }.send(user, bot)\n    }\n}\n</code></pre>"},{"location":"Functional-DSL/#combining-functional-and-annotation-based-setting","title":"Combining Functional and Annotation-Based setting","text":"<p>You can use both approaches in the same bot:</p> <pre><code>// Annotation-based handler\n@CommandHandler([\"/register\"])\nsuspend fun register(ctx: CommandContext) {\n    message { \"Registration started\" }.send(ctx.user, ctx.bot)\n}\n\n// Functional handler\nbot.setFunctionality {\n    onCommand(\"/help\") {\n        message { \"Available commands: /register, /help\" }.send(user, bot)\n    }\n}\n</code></pre> <p>Both handlers are registered in the same <code>ActivityRegistry</code> and work seamlessly together.</p>"},{"location":"Functional-DSL/#see-also","title":"See also","text":"<ul> <li>Action</li> <li>Useful utilities</li> </ul>"},{"location":"Guards/","title":"Guards","text":""},{"location":"Guards/#introduction","title":"Introduction","text":"<p>Guards are an essential feature for developers creating bots. These guards function as pre-execution checks that determine whether a particular command should be invoked. By implementing these checks, developers can enhance the functionality, security, and user experience of their bots.</p>"},{"location":"Guards/#purpose-of-activity-guards","title":"Purpose of Activity Guards","text":"<p>The primary purpose of activity guards is to ensure that only authorized users or specific conditions trigger a activity. </p> <p>This can prevent misuse, maintain the bot's integrity, and streamline interactions.</p>"},{"location":"Guards/#common-use-cases","title":"Common Use Cases","text":"<ol> <li>Authentication and Authorization: Ensuring only certain users can access specific commands.</li> <li>Pre-condition Checks: Verifying that certain conditions are met before executing a activity (e.g., ensuring a user is in a particular state or context).</li> <li>Contextual Guards: Making decisions based on the current chat or user state.</li> </ol>"},{"location":"Guards/#implementation-strategies","title":"Implementation Strategies","text":"<p>Implementing Telegram Command Guards typically involves writing functions or methods that encapsulate the logic for each guard. Below are common strategies:</p> <ol> <li>User Role Check:</li> <li> <p>Ensuring the user has the required role (e.g., admin, moderator) before executing the command.       <pre><code> override suspend fun condition(user: User?, update: ProcessedUpdate, bot: TelegramBot): Boolean {\n  // Check if the user is an admin in the given chat\n }\n</code></pre></p> </li> <li> <p>State Verification:</p> </li> <li> <p>Checking the user's state before allowing command execution.      <pre><code>override suspend fun condition(user: User?, update: ProcessedUpdate, bot: TelegramBot): Boolean {\n   return bot.userData[user.id, \"data\"] == requiredState\n}\n</code></pre></p> </li> <li> <p>Custom Guards:</p> </li> <li>Creating custom logic based on specific requirements.      <pre><code>override suspend fun condition(user: User?, update: ProcessedUpdate, bot: TelegramBot): Boolean {\n   // Custom logic to determine if the command should be executed\n}\n</code></pre></li> </ol>"},{"location":"Guards/#integrating-guards-with-activities","title":"Integrating Guards with Activities","text":"<p>To integrate these guards with your bot commands, you can create a guard that checks these conditions before the command handler is invoked.</p>"},{"location":"Guards/#implementing-example","title":"Implementing Example","text":"<pre><code>// define somewhere your guard class that implements Guard interface\nobject YourGuard : Guard {\n    override suspend fun condition(user: User?, update: ProcessedUpdate, bot: TelegramBot): Boolean {\n        // write your condition here\n    }\n}\n\n// ...\n\n@CommandHandler([\"yourCommand\"])\n@Guard(YourGuard::class) // InputHandler also is supported\nfun command(bot: TelegramBot) {\n   // command body\n}\n</code></pre>"},{"location":"Guards/#best-practices","title":"Best Practices","text":"<ul> <li>Modularity: Keep guard logic modular and separate from activities.</li> <li>Reusability: Write reusable guard functions that can be easily applied across different commands/inputs.</li> <li>Efficiency: Optimize guard checks to minimize performance overhead.</li> <li>User Feedback: Provide clear feedback to users when a command is blocked by a guard.</li> </ul>"},{"location":"Guards/#conclusion","title":"Conclusion","text":"<p>Activity Guards are a powerful tool for managing bot command/input execution. </p> <p>By implementing robust guard mechanisms, developers can ensure their bots operate securely and efficiently, providing a better user experience.</p>"},{"location":"Guards/#see-also","title":"See also","text":"<ul> <li>Activities and Proccessors</li> <li>Update parsing</li> <li>Actions</li> <li>Activity invocation</li> </ul>"},{"location":"Handlers/","title":"Handlers","text":""},{"location":"Handlers/#variety-of-handlers","title":"Variety of Handlers","text":"<p>In bot development, particularly in systems involving user interactions, it is crucial to manage and process commands and events efficiently.</p> <p>These annotations mark functions designed to process specific commands, inputs, or updates and provide metadata such as command keywords, scopes, and guards.</p>"},{"location":"Handlers/#annotations-overview","title":"Annotations Overview","text":""},{"location":"Handlers/#commandhandler","title":"CommandHandler","text":"<p>The <code>CommandHandler</code> annotation is used to mark functions that process specific commands. This annotation includes properties that define the command's keywords and scopes.</p> <ul> <li>value: Specifies the keywords associated with the command.</li> <li>scope: Determines the context or scope in which the command will be checked.</li> </ul> <pre><code>@CommandHandler([\"text\"])\nsuspend fun test(user: User, bot: TelegramBot) {\n    //...\n}\n</code></pre>"},{"location":"Handlers/#commandhandlercallbackquery","title":"CommandHandler.CallbackQuery","text":"<p>A specialized version of the <code>CommandHandler</code> annotation designed specifically for handling callback queries. It includes similar properties as <code>CommandHandler</code>, with a focus on callback-related commands.</p> <p>It's actually the same as just <code>@CommandHandler</code> with a preset <code>UpdateType.CALLBACK_QUERY</code> scope.</p> <ul> <li>value: Specifies the keywords associated with the command.</li> <li>autoAnswer: Reply to <code>callbackQuery</code> automatically (call <code>answerCallbackQuery</code> before handling).</li> </ul> <pre><code>@CommandHandler.CallbackQuery([\"text\"])\nsuspend fun test(user: User, bot: TelegramBot) {\n    //...\n}\n</code></pre>"},{"location":"Handlers/#commonhandler","title":"CommonHandler","text":"<p>The <code>CommonHandler</code> annotation is intended for functions that process commands with lower priority compared to <code>CommandHandler</code> and <code>InputHandler</code>. It is used at the source level and provides a flexible way to define common command handlers.</p> <p>Be aware, priority works within just <code>@CommonHandler</code>'s itself  (ie. not affects other handlers).</p>"},{"location":"Handlers/#commonhandlertext","title":"CommonHandler.Text","text":"<p>This annotation specifies text matching against updates. It includes properties to define the matching text, filtering conditions, priority, and scope.</p> <ul> <li>value: The text to match against incoming updates.</li> <li>filter: A class that defines conditions used in the matching process.</li> <li>priority: The priority level of the handler, where 0 is the highest priority.</li> <li>scope: The context or scope in which the text matching will be checked.</li> </ul> <pre><code>@CommonHandler.Text([\"text\"], filter = isNewUserFilter::class, priority = 10)\nsuspend fun test(user: User, bot: TelegramBot) {\n    //...\n}\n</code></pre>"},{"location":"Handlers/#commonhandlerregex","title":"CommonHandler.Regex","text":"<p>Similar to <code>CommonHandler.Text</code>, this annotation is used for matching updates based on regular expressions. It includes properties for defining the regex pattern, options, filtering conditions, priority, and scope.</p> <ul> <li>value: The regex pattern used for matching.</li> <li>options: Regex options that modify the behavior of the regex pattern.</li> <li>filter: A class that defines conditions used in the matching process.</li> <li>priority: The priority level of the handler, where 0 is the highest priority.</li> <li>scope: The context or scope in which the regex matching will be checked.</li> </ul> <pre><code>@CommonHandler.Regex(\"^\\d+$\", scope = [UpdateType.EDITED_MESSAGE])\nsuspend fun test(update: EditedMessageUpdate, user: User, bot: TelegramBot) {\n    //...\n}\n</code></pre>"},{"location":"Handlers/#inputhandler","title":"InputHandler","text":"<p>The <code>InputHandler</code> annotation marks functions that process specific input events. It is intended for functions that handle inputs at runtime and includes properties for defining input keywords and scopes.</p> <ul> <li>value: Specifies the keywords associated with the input event.</li> </ul> <pre><code>@InputHandler(\"text\")\nsuspend fun test(update: ProcessedUpdate, user: User, bot: TelegramBot) {\n    //...\n}\n</code></pre>"},{"location":"Handlers/#unprocessedhandler","title":"UnprocessedHandler","text":"<p>The <code>UnprocessedHandler</code> annotation is used to mark functions that handle updates not processed by other handlers. It ensures that any unprocessed updates are managed appropriately, with only one processing point possible for this handler type.</p> <pre><code>@UnprocessedHandler\nsuspend fun test(update: ProcessedUpdate, user: User, bot: TelegramBot) {\n    //...\n}\n</code></pre>"},{"location":"Handlers/#updatehandler","title":"UpdateHandler","text":"<p>The <code>UpdateHandler</code> annotation marks functions that handle specific types of incoming updates. It provides a way to categorize and process different update types systematically.</p> <ul> <li>type: Specifies the types of updates the handler function will process.</li> </ul> <pre><code>@UpdateHandler([UpdateType.PRE_CHECKOUT_QUERY])\nsuspend fun test(update: PreCheckoutQueryUpdate, user: User, bot: TelegramBot) {\n    //...\n}\n</code></pre>"},{"location":"Handlers/#handler-companion-annotations","title":"Handler Companion Annotations","text":"<p>There are also additional annotations that are optional to the handlers, complementing the optional behavior of the handlers itself.</p> <p>They can be placed both on functions to which a handler is applied and on classes, in the latter case they will be automatically applied to all handlers in that class, but if there is a need it is possible to have separate behavior for some functions.</p> <p>I.e. the applying has such a priority, <code>Function</code> &gt; <code>Class</code>, where function have higher priority.</p>"},{"location":"Handlers/#rate-limiting","title":"Rate Limiting","text":"<p>In addition, let us also disclose the rate limiting mechanism described in the annotations.</p> <p>You can set general limits for each user:</p> <pre><code>// ...\nval bot = TelegramBot(\"BOT_TOKEN\") {\n    rateLimiter { // general limits\n        limits = RateLimits(period = 10000, rate = 5)\n    }\n}\n</code></pre>"},{"location":"Handlers/#handler-specific","title":"# Handler specific","text":"<p>Limits on certain actions can be defined using the <code>RateLimits</code> annotation, supported <code>@CommandHandler</code>, <code>@CommandHandler.CallbackQuery</code>, <code>@InputHandler</code>, <code>@CommonHandler</code>.</p> <pre><code>@CommandHandler([\"/start\"])\n@RateLimits(period = 1000L, rate = 1L)\nsuspend fun start(user: User, bot: TelegramBot) {\n    // ...\n}\n</code></pre>"},{"location":"Handlers/#guard","title":"Guard","text":"<p>You can define guards separately to control access to handlers, supported <code>@CommandHandler</code>, <code>@CommandHandler.CallbackQuery</code>, <code>@InputHandler</code> :</p> <pre><code>@CommandHandler([\"text\"])\n@Guard(isAdminGuard::class)\nsuspend fun test(user: User, bot: TelegramBot) {\n    //...\n}\n</code></pre>"},{"location":"Handlers/#argparser","title":"ArgParser","text":"<p>You can define custom argument parser separately to change parameters parsing behaviour for handlers, supported <code>@CommandHandler</code>, <code>@CommandHandler.CallbackQuery</code>, <code>@CommonHandler</code>:</p> <pre><code>@CommandHandler([\"text\"])\n@ArgParser(SpaceArgParser::class)\nsuspend fun test(user: User, bot: TelegramBot) {\n    //...\n}\n</code></pre> <p>see also <code>defaultArgParser</code></p>"},{"location":"Handlers/#conclusion","title":"Conclusion","text":"<p>These annotations provide robust and flexible tools for handling commands, inputs, and events, while allowing for separate configurations of rate limits and guards, enhancing the overall structure and maintainability of bot development.</p>"},{"location":"Handlers/#see-also","title":"See also","text":"<ul> <li>Activities &amp; Processors</li> <li>Activity invocation</li> <li>FSM and Conversation handling</li> <li>Update parsing</li> <li>Aide</li> </ul>"},{"location":"Interceptors-%28middleware%29/","title":"Interceptors (Middleware)","text":""},{"location":"Interceptors-%28middleware%29/#interceptors-cross-cutting-logic-for-your-bot","title":"Interceptors: Cross-Cutting Logic for Your Bot","text":"<p>When building a Telegram bot, you often repeat setup, checks, or cleanup across handlers. Interceptors let you plug in shared logic around handlers, keeping handlers focused and maintainable.</p> <p>Here\u2019s how interceptors work in telegram-bot and how to use them.</p>"},{"location":"Interceptors-%28middleware%29/#what-are-interceptors-simple-explanation","title":"What Are Interceptors? (Simple Explanation)","text":"<p>Interceptors are functions that run at specific points in the update processing pipeline. They let you: - Inspect and modify the processing context - Add cross-cutting logic (logging, auth, metrics) - Stop processing early if needed - Clean up resources after processing</p> <p>Think of interceptors as checkpoints that every update passes through before, during, and after handler execution.</p>"},{"location":"Interceptors-%28middleware%29/#the-processing-pipeline","title":"The Processing Pipeline","text":"<p>The bot processes updates through a pipeline with seven phases:</p> Phase When It Runs What You Can Use It For Setup As soon as the update arrives, before any processing \u2714 Global rate limiting\u2714 Filter out spam or malformed updates\u2714 Initial logging\u2714 Setup shared context Parsing After setup, extracts command and parameters \u2714 Custom command parsing\u2714 Enrich context with parsed data\u2714 Validate update structure Match Finds the appropriate handler (Command/Input/Common) \u2714 Override handler selection\u2714 Custom input handling logic\u2714 Log matched handlers Validation After handler is found, before invocation \u2714 Handler-specific permissions\u2714 Rate limiting per handler\u2714 Guard checks\u2714 Cancel processing if conditions aren't met PreInvoke Immediately before the handler runs \u2714 Last-minute checks\u2714 Start timers/metrics\u2714 Enrich context for handler\u2714 Modify handler behavior Invoke The handler is executed here \u2714 Wrap handler execution\u2714 Error handling\u2714 Logging handler results PostInvoke After handler completes (success or failure) \u2714 Cleanup resources\u2714 Log results\u2714 Send fallback messages on errors\u2714 Modify results before returning"},{"location":"Interceptors-%28middleware%29/#creating-an-interceptor","title":"Creating an Interceptor","text":"<p>An interceptor is a simple function that receives a <code>ProcessingContext</code>:</p> <pre><code>import eu.vendeli.tgbot.core.PipelineInterceptor\nimport eu.vendeli.tgbot.types.component.ProcessingContext\n\nval myInterceptor: PipelineInterceptor = { context -&gt;\n    // Your logic here\n    println(\"Processing update: ${context.update.updateId}\")\n}\n</code></pre> <p>Or using a lambda:</p> <pre><code>val loggingInterceptor = PipelineInterceptor { context -&gt;\n    val logger = context.bot.config.loggerFactory.get(\"MyInterceptor\")\n    logger.info(\"Processing update #${context.update.updateId}\")\n}\n</code></pre>"},{"location":"Interceptors-%28middleware%29/#registering-interceptors","title":"Registering Interceptors","text":"<p>Register interceptors on the processing pipeline:</p> <pre><code>suspend fun main() {\n    val bot = TelegramBot(\"BOT_TOKEN\")\n\n    // Register an interceptor for the Setup phase\n    bot.update.pipeline.intercept(ProcessingPipePhase.Setup) { context -&gt;\n        // Check if user is banned\n        val user = context.update.userOrNull\n        if (user != null &amp;&amp; isBanned(user.id)) {\n            context.finish() // Stop processing\n            return@intercept\n        }\n    }\n\n    // Register an interceptor for the PreInvoke phase\n    bot.update.pipeline.intercept(ProcessingPipePhase.PreInvoke) { context -&gt;\n        val startTime = System.currentTimeMillis()\n        // store start time\n    }\n\n    // Register an interceptor for the PostInvoke phase\n    bot.update.pipeline.intercept(ProcessingPipePhase.PostInvoke) { context -&gt;\n        val startTime = // get start time\n        if (startTime != null) {\n            val duration = System.currentTimeMillis() - startTime\n            println(\"Handler took ${duration}ms\")\n        }\n    }\n\n    bot.handleUpdates()\n}\n</code></pre>"},{"location":"Interceptors-%28middleware%29/#real-world-example-authentication-metrics","title":"Real-World Example: Authentication &amp; Metrics","text":"<p>Example: a bot that requires authentication for certain commands, measures handler execution time, and logs all commands.</p> <pre><code>suspend fun main() {\n    val bot = TelegramBot(\"BOT_TOKEN\")\n\n    // Setup phase: Check if user is authenticated\n    bot.update.pipeline.intercept(ProcessingPipePhase.Setup) { context -&gt;\n        val user = context.update.userOrNull ?: return@intercept\n\n        if (!isAuthenticated(user.id)) {\n            message { \"Please authenticate first using /login\" }\n                .send(user, context.bot)\n            context.finish()\n        }\n    }\n\n    // PreInvoke phase: Start timer and check permissions\n    bot.update.pipeline.intercept(ProcessingPipePhase.PreInvoke) { context -&gt;\n        val activity = context.activity ?: return@intercept\n        val user = context.update.userOrNull ?: return@intercept\n\n        // Check if user has permission for this specific handler\n        if (!hasPermission(user.id, activity)) {\n            message { \"You don't have permission to use this command.\" }\n                .send(user, context.bot)\n            context.finish()\n            return@intercept\n        }\n\n        // Start timer\n        // store start time\n    }\n\n    // PostInvoke phase: Log and cleanup\n    bot.update.pipeline.intercept(ProcessingPipePhase.PostInvoke) { context -&gt;\n        val activity = context.activity ?: return@intercept\n        val startTime = // get start time\n\n        if (startTime != null) {\n            val duration = System.currentTimeMillis() - startTime\n            val logger = context.bot.config.loggerFactory.get(\"Metrics\")\n            logger.info(\n                \"Handler ${activity::class.simpleName} took ${duration}ms \" +\n                \"for user ${context.update.userOrNull?.id}\"\n            )\n        }\n    }\n\n    bot.handleUpdates()\n}\n</code></pre>"},{"location":"Interceptors-%28middleware%29/#processingcontext","title":"ProcessingContext","text":"<p>The <code>ProcessingContext</code> provides access to:</p> <ul> <li><code>update: ProcessedUpdate</code> - The current update being processed</li> <li><code>bot: TelegramBot</code> - The bot instance</li> <li><code>registry: ActivityRegistry</code> - The activity registry</li> <li><code>parsedInput: String</code> - The parsed command/input text</li> <li><code>parameters: Map&lt;String, String&gt;</code> - Parsed command parameters</li> <li><code>activity: Activity?</code> - The resolved handler (null until Match phase)</li> <li><code>shouldProceed: Boolean</code> - Whether processing should continue</li> <li><code>additionalContext: AdditionalContext</code> - Additional context data</li> <li><code>finish()</code> - Stop processing early</li> </ul>"},{"location":"Interceptors-%28middleware%29/#stopping-processing-early","title":"Stopping Processing Early","text":"<p>Call <code>context.finish()</code> to stop processing:</p> <pre><code>bot.update.pipeline.intercept(ProcessingPipePhase.Validation) { context -&gt;\n    if (someCondition) {\n        context.finish() // No further phases will execute\n    }\n}\n</code></pre>"},{"location":"Interceptors-%28middleware%29/#storing-custom-data","title":"Storing Custom Data","text":"<p>Use <code>additionalContext</code> to pass data between interceptors:</p> <pre><code>// In PreInvoke\ncontext.additionalContext[\"userId\"] = context.update.userOrNull?.id\n\n// In PostInvoke\nval userId = context.additionalContext[\"userId\"] as? Long\n</code></pre>"},{"location":"Interceptors-%28middleware%29/#multiple-interceptors","title":"Multiple Interceptors","text":"<p>You can register multiple interceptors for the same phase. They execute in registration order:</p> <pre><code>bot.update.pipeline.intercept(ProcessingPipePhase.Setup) { context -&gt;\n    println(\"First interceptor\")\n}\n\nbot.update.pipeline.intercept(ProcessingPipePhase.Setup) { context -&gt;\n    println(\"Second interceptor\")\n}\n\n// When an update is processed:\n// Output: \"First interceptor\"\n// Output: \"Second interceptor\"\n</code></pre> <p>If an interceptor calls <code>context.finish()</code>, subsequent interceptors in that phase are skipped, and later phases won't execute.</p>"},{"location":"Interceptors-%28middleware%29/#best-practices","title":"Best Practices","text":""},{"location":"Interceptors-%28middleware%29/#1-use-the-right-phase","title":"1. Use the Right Phase","text":"<ul> <li>Setup: Global checks, filtering, initial setup</li> <li>Parsing: Custom parsing logic</li> <li>Match: Handler selection logic</li> <li>Validation: Permissions, rate limits, guards</li> <li>PreInvoke: Handler-specific preparation</li> <li>Invoke: Usually handled by the default interceptor</li> <li>PostInvoke: Cleanup, logging, error handling</li> </ul>"},{"location":"Interceptors-%28middleware%29/#2-keep-interceptors-focused","title":"2. Keep Interceptors Focused","text":"<p>Each interceptor should do one thing:</p> <pre><code>// \u2705 Good - focused interceptor\nbot.update.pipeline.intercept(ProcessingPipePhase.Setup) { context -&gt;\n    if (isBanned(context.update.userOrNull?.id)) {\n        context.finish()\n    }\n}\n\n// \u274c Avoid - doing too much\nbot.update.pipeline.intercept(ProcessingPipePhase.Setup) { context -&gt;\n    // Authentication\n    // Logging\n    // Metrics\n    // Rate limiting\n    // ... too much!\n}\n</code></pre>"},{"location":"Interceptors-%28middleware%29/#3-handle-errors-gracefully","title":"3. Handle Errors Gracefully","text":"<p>Interceptors should not crash the bot:</p> <pre><code>bot.update.pipeline.intercept(ProcessingPipePhase.PreInvoke) { context -&gt;\n    try {\n        // Your logic\n    } catch (e: Exception) {\n        val logger = context.bot.config.loggerFactory.get(\"Interceptor\")\n        logger.error(\"Interceptor error\", e)\n        // Don't call context.finish() unless you want to stop processing\n    }\n}\n</code></pre>"},{"location":"Interceptors-%28middleware%29/#4-clean-up-resources","title":"4. Clean Up Resources","text":"<p>If you open resources in <code>PreInvoke</code>, clean them up in <code>PostInvoke</code>:</p> <pre><code>var timer: Timer? = null\n\nbot.update.pipeline.intercept(ProcessingPipePhase.PreInvoke) { context -&gt;\n    timer = Timer()\n    context.additionalContext[\"timer\"] = timer\n}\n\nbot.update.pipeline.intercept(ProcessingPipePhase.PostInvoke) { context -&gt;\n    val timer = context.additionalContext[\"timer\"] as? Timer\n    timer?.stop()\n}\n</code></pre>"},{"location":"Interceptors-%28middleware%29/#5-order-matters","title":"5. Order Matters","text":"<p>Register interceptors in the order you want them to run:</p> <pre><code>// More general checks first\nbot.update.pipeline.intercept(ProcessingPipePhase.Setup) { \n    // Global ban check\n}\n\n// More specific checks later\nbot.update.pipeline.intercept(ProcessingPipePhase.Validation) { \n    // Handler-specific permission check\n}\n</code></pre>"},{"location":"Interceptors-%28middleware%29/#6-use-interceptors-for-cross-cutting-concerns","title":"6. Use Interceptors for Cross-Cutting Concerns","text":"<p>Interceptors are ideal for: - \u2705 Authentication/authorization - \u2705 Logging - \u2705 Metrics/performance monitoring - \u2705 Rate limiting - \u2705 Error handling - \u2705 Request/response transformation</p> <p>For handler-specific logic, keep it in the handler.</p>"},{"location":"Interceptors-%28middleware%29/#default-interceptors","title":"Default Interceptors","text":"<p>The framework includes default interceptors for core functionality:</p> <ul> <li>DefaultSetupInterceptor: Global rate limiting</li> <li>DefaultParsingInterceptor: Command parsing</li> <li>DefaultMatchInterceptor: Handler matching (commands, inputs, common matchers)</li> <li>DefaultValidationInterceptor: Guard checks and per-handler rate limiting</li> <li>DefaultInvokeInterceptor: Handler execution and error handling</li> </ul> <p>Your custom interceptors run alongside these defaults. You can add logic before or after the defaults, but you cannot remove the default interceptors.</p>"},{"location":"Interceptors-%28middleware%29/#advanced-conditional-interceptors","title":"Advanced: Conditional Interceptors","text":"<p>You can make interceptors conditional:</p> <pre><code>bot.update.pipeline.intercept(ProcessingPipePhase.PreInvoke) { context -&gt;\n    val activity = context.activity ?: return@intercept\n\n    // Only apply to specific handlers\n    if (activity::class.simpleName?.contains(\"Admin\") == true) {\n        // Admin-specific logic\n        checkAdminPermissions(context)\n    }\n}\n</code></pre>"},{"location":"Interceptors-%28middleware%29/#summary","title":"Summary","text":"<p>Interceptors provide a clean way to add cross-cutting logic to your bot:</p> <ul> <li>\u2705 Seven phases for different stages of processing</li> <li>\u2705 Simple API: Just implement <code>PipelineInterceptor</code></li> <li>\u2705 Flexible: Register multiple interceptors per phase</li> <li>\u2705 Powerful: Access to full processing context</li> <li>\u2705 Safe: Can stop processing early with <code>context.finish()</code></li> </ul> <p>Use interceptors to keep your handlers focused on business logic while handling shared concerns like authentication, logging, and metrics in a centralized way.</p>"},{"location":"Interceptors-%28middleware%29/#see-also","title":"See also","text":"<ul> <li>Functional Handling DSL - Functional update processing</li> <li>Guards - Handler-level permission checks</li> </ul>"},{"location":"Update-parsing/","title":"Update Parsing","text":""},{"location":"Update-parsing/#text-payload","title":"Text payload","text":"<p>Certain updates may have text payload that can be parsed for further processing. Let's take a look at them:</p> <ul> <li><code>MessageUpdate</code> -&gt; <code>message.text</code></li> <li><code>EditedMessageUpdate</code> -&gt; <code>editedMessage.text</code></li> <li><code>ChannelPostUpdate</code> -&gt; <code>channelPost.text</code></li> <li><code>EditedChannelPostUpdate</code> -&gt; <code>editedChannelPost.text</code></li> <li><code>InlineQueryUpdate</code> -&gt; <code>inlineQuery.query</code></li> <li><code>ChosenInlineResultUpdate</code> -&gt; <code>chosenInlineResult.query</code></li> <li><code>CallbackQueryUpdate</code> -&gt; <code>callbackQuery.data</code></li> <li><code>ShippingQueryUpdate</code> -&gt; <code>shippingQuery.invoicePayload</code></li> <li><code>PreCheckoutQueryUpdate</code> -&gt; <code>preCheckoutQuery.invoicePayload</code></li> <li><code>PollUpdate</code> -&gt; <code>poll.question</code></li> <li><code>PurchasedPaidMediaUpdate</code> -&gt; <code>purchasedPaidMedia.paidMediaPayload</code></li> </ul> <p>From the listed updates, a certain parameter is selected and taken as <code>TextReference</code>, for further parsing.</p>"},{"location":"Update-parsing/#parsing","title":"Parsing","text":"<p>The selected parameters are parsed with the appropriate configured delimiters into the command and parameters to it.</p> <p>See configuration <code>commandParsing</code> block.</p> <p>You can see in the diagram below which components are mapped to which parts of the target function.</p> <p> </p>"},{"location":"Update-parsing/#parammapping","title":"@ParamMapping","text":"<p>There is also an annotation called <code>@ParamMapping</code> for convenience or for any special case. </p> <p>It allows you to map the name of the parameter from the incoming text to any parameter. </p> <p>This is also convenient when your incoming data is limited, for example, <code>CallbackData</code> (64 characters).</p> <p>See example of usage: <code>greeting?name=Adam</code></p> <pre><code>@CommandHandler([\"greeting\"])\nsuspend fun greeting(@ParamMapping(\"name\") anyParameterName: String, user: User, bot: TelegramBot) {\n    message { \"Hello, $anyParameterName\" }.send(to = user, via = bot)\n}\n</code></pre> <p>And also it can be used for catching unnamed parameters, in cases where the parser is set up such that parameter names are skipped or even they absent, which passes by 'param_n' pattern, where <code>n</code> is its ordinal.</p> <p>For example such text - <code>myCommand?p1=v1&amp;v2&amp;p3=&amp;p4=v4&amp;p5=</code>, will be parsed to: * command - <code>myCommand</code> * parameters   * <code>p1</code> = <code>v1</code>   * <code>param_2</code> = <code>v2</code>   * <code>p3</code> = <code>* `p4` = `v4`   * `p5` =</code></p> <p>As you can see since second parameter don't have declared name it represented as <code>param_2</code>.</p> <p>So you can abbreviate the variable names in the callback itself and use clear readable names in the code.</p>"},{"location":"Update-parsing/#deeplink","title":"Deeplink","text":"<p>Considering the information from above if you expect deeplink in your start command you can catch it with:</p> <pre><code>@CommandHandler([\"/start\"])\nsuspend fun start(@ParamMapping(\"param_1\") deeplink: String?, user: User, bot: TelegramBot) {\n    message { \"deeplink is $deeplink\" }.send(to = user, via = bot)\n}\n</code></pre>"},{"location":"Update-parsing/#group-commands","title":"Group commands","text":"<p>In <code>commandParsing</code> configuration we have parameter <code>useIdentifierInGroupCommands</code> when it turned on, we can use <code>TelegramBot.identifier</code> (don't forget to change it if you are using described parameter) in the command matching process, it helps to separate similar commands between several bots, otherwise the <code>@MyBot</code> part will just be skipped. </p>"},{"location":"Update-parsing/#see-also","title":"See also","text":"<ul> <li>Activity invocation</li> <li>Activities &amp; Processors</li> <li>Actions</li> </ul>"},{"location":"Useful-utilities-and-tips/","title":"Useful Utilities And Tips","text":""},{"location":"Useful-utilities-and-tips/#operating-with-processedupdate","title":"Operating with ProcessedUpdate","text":"<p>The <code>ProcessedUpdate</code> is a generic class for updates which, depending on the original data, can be provided in different types (<code>MessageUpdate</code>, <code>CallbackQueryUpdate</code>, etc.)</p> <p>So you can check the type of incoming data and further manipulate certain data with smartcasts, for example:</p> <pre><code>// ...\nif (update !is MessageUpdate) {\n    message { \"Only messages are allowed\" }.send(user, bot)\n    return\n}\n// Further on, ProcessedUpdate will be perceived as MessageUpdate.\n</code></pre> <p>There's also an <code>UserReference</code> interface inside that lets you determine if there's a user reference inside, example use case:</p> <pre><code>val user = if(update is UserReference) update.user else null\n</code></pre> <p>If needed inside there is always the original <code>update</code> in the update parameter.</p>"},{"location":"Useful-utilities-and-tips/#dependency-injection","title":"Dependency injection","text":"<p>The library uses simple mechanism to initialize classes where your update processing methods are annotated with the provided annotations.</p> <p><code>ClassManagerImpl</code> is used by default to invoke annotated methods.</p> <p>But if you want to use some other libraries for that you can redefine the <code>ClassManager</code> interface, using your preferred mechanism and pass it on when initializing the bot.</p> <pre><code>fun main() = runBlocking {\n    val bot = TelegramBot(\"BOT_TOKEN\", \"com.example.controllers\") {\n        classManager = ClassManagerImpl()\n    }\n\n    bot.handleUpdates()\n}\n</code></pre>"},{"location":"Useful-utilities-and-tips/#filtering-updates","title":"Filtering updates","text":"<p>If there's no complex conditions you can simply filter some updates for being processed:</p> <pre><code>// function where updates filtering condition defined\nfun filteringFun(update: Update): Boolean = update.message?.text.isNullOrBlank()\n\nfun main() = runBlocking {\n  val bot = TelegramBot(\"BOT_TOKEN\")\n\n  // setting more specific processing flow for updates\n  bot.update.setListener {\n    if(filteringFun(it)) return@setListener\n\n    // so simply, if the listener left the scope before reaching the handler function, that it is filtering.\n    // actually you can even write directly if-condition there with return@setListener or extend filtering to separate class.\n\n    handle(it) // or manual handling way with block\n  }\n}\n</code></pre> <p>to include filtering in your command matching or excluding process take a look at guards or <code>@CommonHandler</code>.</p>"},{"location":"Useful-utilities-and-tips/#generalize-options-for-different-methods","title":"Generalize options for different methods","text":"<p>If you have to apply the same optional parameters often, you can write a similar function that suits you and lighten the boilerplate code :)</p> <p>Some common properties are separated to different interfaces.</p> <pre><code>@Suppress(\"NOTHING_TO_INLINE\")\ninline fun &lt;T, R, O&gt; T.markdownMode(crossinline block: O.() -&gt; Unit = {}): T\n        where               T : TgAction&lt;R&gt;,\n                            T : OptionsFeature&lt;T, O&gt;,\n                            O : Options,\n                            O : OptionsParseMode =\n    options {\n        parseMode = ParseMode.Markdown\n        block()\n    }\n\n\n// ... and in your code\n\nmessage { \"test\" }.markdownMode().send(to, via)\n</code></pre>"},{"location":"Web-starters-%28Spring-and-Ktor%29/","title":"Web Starters (Spring And Ktor)","text":""},{"location":"Web-starters-%28Spring-and-Ktor%29/#spring-starter","title":"Spring starter","text":"<p>The Spring Starter module for library is an auto-configuration module that integrates Telegram bot functionalities into Spring Boot applications. It leverages the power of Spring Boot's dependency injection and configuration properties to automatically configure Telegram bots based on the provided configuration. This library is particularly useful for developers looking to build Telegram bots using Kotlin and Spring Boot, offering a streamlined approach to bot development and management.</p>"},{"location":"Web-starters-%28Spring-and-Ktor%29/#key-features","title":"Key Features","text":"<ul> <li>Auto-Configuration: The library automatically configures Telegram bots based on the provided configuration properties, eliminating the need for manual setup.</li> <li>Configuration Properties: It supports configuration properties for easy customization of bot settings, such as bot tokens, package names, and identifiers.</li> <li>Spring Integration: Seamlessly integrates with the Spring ecosystem, utilizing Spring's dependency injection and application context for managing bot instances.</li> <li>Coroutine Support: Leverages Kotlin coroutines for asynchronous bot operations, ensuring efficient and non-blocking execution.</li> </ul>"},{"location":"Web-starters-%28Spring-and-Ktor%29/#getting-started","title":"Getting Started","text":"<p>To use the Spring Starter Library for Telegram Bots, you need to include it as a dependency in your Spring Boot project. The library is designed to work with Spring Boot applications and requires the Spring Boot framework to function.</p>"},{"location":"Web-starters-%28Spring-and-Ktor%29/#dependency","title":"Dependency","text":"<p>Add the following dependency to your <code>build.gradle</code> or <code>pom.xml</code> file:</p> <pre><code>dependencies {\n    implementation 'eu.vendeli:spring-starter:&lt;version&gt;'\n}\n</code></pre> <p>Replace <code>&lt;version&gt;</code> with the latest version of the library.</p>"},{"location":"Web-starters-%28Spring-and-Ktor%29/#configuration","title":"Configuration","text":"<p>The library uses Spring Boot's <code>@ConfigurationProperties</code> to bind configuration properties. You can define your bot configurations in the <code>application.properties</code> or <code>application.yml</code> file of your Spring Boot application.</p> <pre><code>ktgram:\n autoStartPolling: true\n shareHttpClient: true\n bot:\n    - token: YOUR_BOT_TOKEN\n      pckg: com.example.bot\n      identifier: MyBot\n</code></pre>"},{"location":"Web-starters-%28Spring-and-Ktor%29/#usage","title":"Usage","text":"<p>Once the library is included and configured, it automatically creates and configures Telegram bot instances based on the provided configuration.</p> <p>It also supports multiple bot instances, to initialize several ones just declare it as new entry in bot section:</p> <pre><code>ktgram:\n bot:\n    - token: YOUR_BOT_TOKEN\n    - token: SECOND_BOT_TOKEN\n</code></pre>"},{"location":"Web-starters-%28Spring-and-Ktor%29/#advanced-configuration","title":"Advanced Configuration","text":"<p>For more advanced configurations, such as customizing bot behavior or integrating with other Spring components, you can extend the <code>BotConfiguration</code> class and change bot configuration through its <code>applyCfg</code> method, you can see example there.</p> <p>Tip</p> <p>To configure each initialized instance with a custom configuration, distinguish them by their identifier (the BotConfiguration class also has an identifier).</p>"},{"location":"Web-starters-%28Spring-and-Ktor%29/#ktor","title":"Ktor","text":"<p>The module is designed to facilitate the creation of a webhook server for Telegram bots. It allows developers to configure the server, including SSL/TLS settings, and declare multiple Telegram bots with custom configurations. The setup process is flexible, enabling developers to tailor the server to their specific needs.</p>"},{"location":"Web-starters-%28Spring-and-Ktor%29/#installation","title":"Installation","text":"<p>To install ktor starter add additional to main dependency:</p> <pre><code>dependencies {\n    implementation(\"eu.vendeli:ktor-starter:x.y.z\") // there\n    // change x.y.z to current library version\n}\n</code></pre>"},{"location":"Web-starters-%28Spring-and-Ktor%29/#key-components","title":"Key Components","text":"<p><code>serveWebhook</code> Function</p> <p>The serveWebhook function is the core of the library. It sets up and starts the webhook server for Telegram bots. It accepts two parameters:</p> <ul> <li><code>wait</code>: A boolean indicating whether the server should wait for the application to stop before shutting down. Defaults to true.</li> <li><code>serverBuilder</code>: A lambda function that configures the server. Defaults to an empty lambda.</li> </ul>"},{"location":"Web-starters-%28Spring-and-Ktor%29/#configuration_1","title":"Configuration","text":"<ul> <li><code>WEBHOOK_PREFIX</code>: it's paramter that will be used for address prefix for webhook listener route. (defaults to \"/\")</li> </ul>"},{"location":"Web-starters-%28Spring-and-Ktor%29/#server-setup","title":"Server Setup","text":"<ul> <li><code>server</code>: A method to set the server configuration using either EnvConfiguration or ManualConfiguration.</li> <li><code>engine</code>: A method to configure the Netty application engine.</li> <li><code>ktorModule</code>: A method to add Ktor modules to the application.</li> </ul> <p>The library provides wide range of configurable parameters for the server, including host, port, SSL settings, and more. There are two concrete options for its configuring: </p> <ul> <li><code>EnvConfiguration</code>: Reads configuration values from environment with <code>KTGRAM_</code> prefix.</li> <li><code>ManualConfiguration</code>: Allows for manual setting of configuration values, set your parameters in <code>server {}</code> function.</li> </ul> <p>There's list of parameters that can be set:</p> <ul> <li><code>HOST</code>: The hostname or IP address of the server.</li> <li><code>PORT</code>: The port number for the server.</li> <li><code>SSL_PORT</code>: The port number for SSL/TLS connections.</li> <li><code>PEM_PRIVATE_KEY_PATH</code>: The path to the PEM private key file.</li> <li><code>PEM_CHAIN_PATH</code>: The path to the PEM certificate chain file.</li> <li><code>PEM_PRIVATE_KEY</code>: The PEM private key PASSWORD as a character array.</li> <li><code>KEYSTORE_PATH</code>: The path to the Java KeyStore file.</li> <li><code>KEYSTORE_PASSWORD</code>: The password for the KeyStore.</li> <li><code>KEY_ALIAS</code>: The alias for the key in the KeyStore.</li> <li><code>SSL_ON</code>: A boolean indicating whether SSL/TLS should be enabled. Defaults to true.</li> </ul> <p>Tip</p> <p>If pem certificates are present, the module itself will create a jks storage from them at the specified path.</p>"},{"location":"Web-starters-%28Spring-and-Ktor%29/#bot-configuration","title":"Bot Configuration:","text":"<p>To configure bot call <code>declareBot {}</code> which have such parameters:</p> <ul> <li><code>token</code>: The bot token.</li> <li><code>pckg</code>: The package name for the bot.</li> <li><code>configuration</code>: A lambda function for configuring the bot.</li> <li><code>handlingBehaviour</code>: A lambda function for setting the bot's handling behavior.</li> <li><code>onInit</code>: A lambda function to be executed when the bot is initialized.</li> </ul>"},{"location":"Web-starters-%28Spring-and-Ktor%29/#example-usage","title":"Example Usage","text":"<p>To use this module, call <code>serveWebhook</code> function, configure it with your desired settings, declare your bots. Here's a simplified example:</p> <pre><code>fun main() = runBlocking {\n    serveWebhook {\n        server {\n            HOST = \"0.0.0.0\"\n            PORT = 8080\n            SSL_PORT = 8443\n\n            PEM_PRIVATE_KEY_PATH = \"/etc/letsencrypt/live/example.com/privkey.pem\"\n            PEM_CHAIN_PATH = \"/etc/letsencrypt/live/example.com/fullchain.pem\"\n            PEM_PRIVATE_KEY = \"pem_changeit\".toCharArray()\n\n            KEYSTORE_PATH = \"/etc/ssl/certs/java/cacerts/bot_keystore.jks\"\n            KEYSTORE_PASSWORD = \"changeit\".toCharArray()\n            // Set other configuration parameters as needed\n        }\n        declareBot {\n            token = \"YOUR_BOT_TOKEN\"\n            // Configure other bot settings\n        }\n        // Add more bots or set other parameters if needed\n    }\n}\n</code></pre> <p>Caution</p> <p>Don't forget to set webhook to make everything work. :)</p> <p>By default module will serve webhook listenening endpoints as <code>host/BOT_TOKEN</code></p>"},{"location":"zh/","title":"\u9996\u9875","text":""},{"location":"zh/#_1","title":"\u7b80\u4ecb","text":"<p>\u8ba9\u6211\u4eec\u4e86\u89e3\u4e00\u4e0b\u5e93\u5982\u4f55\u5904\u7406\u66f4\u65b0\u7684\u4e00\u822c\u60c5\u51b5\uff1a</p> <p> </p> <p>\u5982\u6211\u4eec\u6240\u89c1\uff0c\u5728\u6536\u5230\u66f4\u65b0\u540e\uff0c\u5e93\u6267\u884c\u4e09\u4e2a\u4e3b\u8981\u6b65\u9aa4\u3002</p>"},{"location":"zh/#_2","title":"\u5904\u7406","text":"<p>\u5904\u7406\u662f\u5c06\u6536\u5230\u7684\u66f4\u65b0\u91cd\u65b0\u6253\u5305\u4e3a<code>ProcessedUpdate</code>\u7684\u76f8\u5e94\u5b50\u7c7b\u7684\u8fc7\u7a0b\uff0c\u5177\u4f53\u53d6\u51b3\u4e8e\u6240\u643a\u5e26\u7684\u8d1f\u8f7d\u3002</p> <p>\u8fd9\u4e00\u6b65\u662f\u4e3a\u4e86\u66f4\u5bb9\u6613\u64cd\u4f5c\u66f4\u65b0\u5e76\u6269\u5c55\u5904\u7406\u80fd\u529b\u800c\u9700\u8981\u7684\u3002</p>"},{"location":"zh/#_3","title":"\u5904\u7406","text":"<p>\u63a5\u4e0b\u6765\u662f\u4e3b\u8981\u6b65\u9aa4\uff0c\u8fd9\u91cc\u6211\u4eec\u8fdb\u5165\u5904\u7406\u672c\u8eab\u3002</p>"},{"location":"zh/#_4","title":"\u5168\u5c40\u901f\u7387\u9650\u5236\u5668","text":"<p>\u5982\u679c\u66f4\u65b0\u4e2d\u6709\u7528\u6237\uff0c\u6211\u4eec\u68c0\u67e5\u662f\u5426\u8d85\u8fc7\u4e86\u5168\u5c40\u901f\u7387\u9650\u5236\u5668\u3002</p>"},{"location":"zh/#_5","title":"\u89e3\u6790\u6587\u672c","text":"<p>\u63a5\u4e0b\u6765\uff0c\u6839\u636e\u8d1f\u8f7d\uff0c\u6211\u4eec\u83b7\u53d6\u5305\u542b\u6587\u672c\u7684\u7279\u5b9a\u66f4\u65b0\u7ec4\u4ef6\uff0c\u5e76\u6839\u636e\u914d\u7f6e\u5bf9\u5176\u8fdb\u884c\u89e3\u6790\u3002</p> <p>\u66f4\u8be6\u7ec6\u7684\u5185\u5bb9\u53ef\u4ee5\u5728\u66f4\u65b0\u89e3\u6790\u6587\u7ae0\u4e2d\u67e5\u770b\u3002</p>"},{"location":"zh/#_6","title":"\u67e5\u627e\u6d3b\u52a8","text":"<p>\u63a5\u4e0b\u6765\uff0c\u6839\u636e\u5904\u7406\u4f18\u5148\u7ea7\uff1a</p> <p> </p> <p>\u6211\u4eec\u5728\u89e3\u6790\u6570\u636e\u548c\u6211\u4eec\u6b63\u5728\u64cd\u4f5c\u7684\u6d3b\u52a8\u4e4b\u95f4\u5bfb\u627e\u5bf9\u5e94\u5173\u7cfb\u3002 \u6b63\u5982\u6211\u4eec\u5728\u4f18\u5148\u7ea7\u56fe\u4e2d\u770b\u5230\u7684\uff0c<code>Commands</code>\u59cb\u7ec8\u6392\u5728\u7b2c\u4e00\u4f4d\u3002</p> <p>\u4e5f\u5c31\u662f\u8bf4\uff0c\u5982\u679c\u66f4\u65b0\u4e2d\u7684\u6587\u672c\u8d1f\u8f7d\u4e0e\u4efb\u4f55\u547d\u4ee4\u76f8\u5bf9\u5e94\uff0c\u5219\u4e0d\u4f1a\u6267\u884c\u5bf9<code>Inputs</code>\u3001<code>Common</code>\u7684\u8fdb\u4e00\u6b65\u641c\u7d22\uff0c\u5f53\u7136\u4e5f\u4e0d\u4f1a\u6267\u884c<code>Unprocessed</code>\u64cd\u4f5c\u3002</p> <p>\u552f\u4e00\u9700\u8981\u6ce8\u610f\u7684\u662f\uff0c\u5982\u679c\u6709<code>UpdateHandlers</code>\u5c06\u5e76\u884c\u89e6\u53d1\uff0c\u800c\u4e0d\u7ba1\u8fd9\u4e9b\u3002</p>"},{"location":"zh/#_7","title":"\u547d\u4ee4","text":"<p>\u8ba9\u6211\u4eec\u66f4\u8be6\u7ec6\u5730\u4e86\u89e3\u547d\u4ee4\u53ca\u5176\u5904\u7406\u3002</p> <p>\u6b63\u5982\u60a8\u53ef\u80fd\u5df2\u7ecf\u6ce8\u610f\u5230\u7684\uff0c\u867d\u7136\u7528\u4e8e\u5904\u7406\u547d\u4ee4\u7684\u6ce8\u89e3\u79f0\u4e3a<code>CommandHandler</code>\uff0c\u4f46\u5b83\u6bd4\u7535\u62a5\u673a\u5668\u4eba\u4e2d\u7684\u7ecf\u5178\u6982\u5ff5\u66f4\u901a\u7528\u3002</p>"},{"location":"zh/#_8","title":"\u4f5c\u7528\u57df","text":"<p>\u8fd9\u662f\u56e0\u4e3a\u5b83\u7684\u5904\u7406\u53ef\u80fd\u6027\u8303\u56f4\u66f4\u5e7f\uff0c\u5373\u76ee\u6807\u51fd\u6570\u4e0d\u4ec5\u53ef\u4ee5\u6839\u636e\u6587\u672c\u5339\u914d\u6765\u5b9a\u4e49\uff0c\u8fd8\u53ef\u4ee5\u6839\u636e\u76f8\u5e94\u66f4\u65b0\u7684\u7c7b\u578b\u6765\u5b9a\u4e49\uff0c\u8fd9\u5c31\u662f\u4f5c\u7528\u57df\u7684\u6982\u5ff5\u3002</p> <p>\u56e0\u6b64\uff0c\u6bcf\u4e2a\u547d\u4ee4\u53ef\u4ee5\u6839\u636e\u4e0d\u540c\u7684\u4f5c\u7528\u57df\u5217\u8868\u5177\u6709\u4e0d\u540c\u7684\u5904\u7406\u7a0b\u5e8f\uff0c\u6216\u8005\u53cd\u8fc7\u6765\uff0c\u4e00\u4e2a\u547d\u4ee4\u5bf9\u5e94\u591a\u4e2a\u5904\u7406\u7a0b\u5e8f\u3002</p> <p>\u4e0b\u9762\u60a8\u53ef\u4ee5\u770b\u5230\u5982\u4f55\u901a\u8fc7\u6587\u672c\u8d1f\u8f7d\u548c\u4f5c\u7528\u57df\u8fdb\u884c\u6620\u5c04\uff1a</p> <p> </p>"},{"location":"zh/#_9","title":"\u8f93\u5165","text":"<p>\u63a5\u4e0b\u6765\uff0c\u5982\u679c\u6587\u672c\u8d1f\u8f7d\u4e0e\u4efb\u4f55\u547d\u4ee4\u90fd\u4e0d\u5339\u914d\uff0c\u5219\u641c\u7d22\u8f93\u5165\u70b9\u3002</p> <p>\u8fd9\u4e2a\u6982\u5ff5\u4e0e\u547d\u4ee4\u884c\u5e94\u7528\u7a0b\u5e8f\u4e2d\u7684\u8f93\u5165\u7b49\u5f85\u975e\u5e38\u76f8\u4f3c\uff0c\u60a8\u5728\u673a\u5668\u4eba\u4e0a\u4e0b\u6587\u4e2d\u4e3a\u7279\u5b9a\u7528\u6237\u8bbe\u7f6e\u4e00\u4e2a\u70b9\uff0c\u8be5\u70b9\u5c06\u5904\u7406\u4ed6\u7684\u4e0b\u4e00\u4e2a\u8f93\u5165\uff0c\u65e0\u8bba\u5b83\u5305\u542b\u4ec0\u4e48\uff0c\u4e3b\u8981\u7684\u662f\u4e0b\u4e00\u4e2a\u66f4\u65b0\u6709\u4e00\u4e2a<code>User</code>\u4ee5\u4fbf\u80fd\u591f\u5c06\u5176\u4e0e\u8bbe\u7f6e\u7684\u8f93\u5165\u7b49\u5f85\u70b9\u5173\u8054\u8d77\u6765\u3002</p> <p>\u4e0b\u9762\u60a8\u53ef\u4ee5\u770b\u5230\u5f53\u5728<code>Commands</code>\u4e0a\u6ca1\u6709\u5339\u914d\u65f6\u5904\u7406\u66f4\u65b0\u7684\u793a\u4f8b\u3002</p> <p> </p>"},{"location":"zh/#_10","title":"\u901a\u7528","text":"<p>\u5982\u679c\u5904\u7406\u7a0b\u5e8f\u627e\u4e0d\u5230<code>commands</code>\u6216<code>inputs</code>\uff0c\u5b83\u4f1a\u68c0\u67e5\u6587\u672c\u8d1f\u8f7d\u4e0e<code>common</code>\u5904\u7406\u7a0b\u5e8f\u7684\u5339\u914d\u3002</p> <p>\u6211\u4eec\u5efa\u8bae\u4e0d\u8981\u6ee5\u7528\u5b83\uff0c\u56e0\u4e3a\u5b83\u9700\u8981\u904d\u5386\u6240\u6709\u6761\u76ee\u3002</p>"},{"location":"zh/#_11","title":"\u672a\u5904\u7406","text":"<p>\u6700\u540e\u4e00\u6b65\uff0c\u5982\u679c\u5904\u7406\u7a0b\u5e8f\u627e\u4e0d\u5230\u4efb\u4f55\u5339\u914d\u7684\u6d3b\u52a8\uff08<code>UpdateHandler</code>\u5b8c\u5168\u5e76\u884c\u5de5\u4f5c\uff0c\u4e0d\u7b97\u4f5c\u5e38\u89c4\u6d3b\u52a8\uff09\uff0c\u5219<code>UnprocessedHandler</code>\u5f00\u59cb\u53d1\u6325\u4f5c\u7528\uff0c\u5982\u679c\u8bbe\u7f6e\u4e86\u5b83\uff0c\u5b83\u5c06\u5904\u7406\u8fd9\u79cd\u60c5\u51b5\uff0c\u8b66\u544a\u7528\u6237\u51fa\u4e86\u95ee\u9898\u7684\u505a\u6cd5\u53ef\u80fd\u5f88\u6709\u7528\u3002</p> <p>\u5728Handlers\u6587\u7ae0\u4e2d\u53ef\u4ee5\u9605\u8bfb\u66f4\u591a\u8be6\u7ec6\u4fe1\u606f\u3002</p>"},{"location":"zh/#_12","title":"\u6d3b\u52a8\u901f\u7387\u9650\u5236\u5668","text":"<p>\u627e\u5230\u6d3b\u52a8\u540e\uff0c\u5b83\u4e5f\u4f1a\u6839\u636e\u6d3b\u52a8\u53c2\u6570\u4e2d\u6307\u5b9a\u7684\u53c2\u6570\u68c0\u67e5\u7528\u6237\u7684\u901f\u7387\u9650\u5236\u3002</p>"},{"location":"zh/#_13","title":"\u6d3b\u52a8","text":"<p>\u6d3b\u52a8\u662f\u6307\u7535\u62a5\u673a\u5668\u4eba\u5e93\u53ef\u4ee5\u5904\u7406\u7684\u5404\u79cd\u7c7b\u578b\u7684\u5904\u7406\u7a0b\u5e8f\uff0c\u5305\u62ec\u547d\u4ee4\u3001\u8f93\u5165\u3001\u6b63\u5219\u8868\u8fbe\u5f0f\u548c\u672a\u5904\u7406\u5904\u7406\u7a0b\u5e8f\u3002</p>"},{"location":"zh/#_14","title":"\u8c03\u7528","text":"<p>\u6700\u540e\u7684\u5904\u7406\u6b65\u9aa4\u662f\u8c03\u7528\u627e\u5230\u7684\u6d3b\u52a8\u3002</p> <p>\u66f4\u591a\u8be6\u7ec6\u4fe1\u606f\u53ef\u4ee5\u5728\u8c03\u7528\u6587\u7ae0\u4e2d\u627e\u5230\u3002</p>"},{"location":"zh/#_15","title":"\u53e6\u8bf7\u53c2\u9605","text":"<ul> <li>\u66f4\u65b0\u89e3\u6790</li> <li>\u6d3b\u52a8\u8c03\u7528</li> <li>\u5904\u7406\u7a0b\u5e8f</li> <li>\u673a\u5668\u4eba\u914d\u7f6e</li> <li>Web\u542f\u52a8\u5668\uff08Spring\u3001Ktor\uff09</li> </ul>"},{"location":"zh/Actions/#all-requests-is-actions","title":"All requests is Actions","text":"<p>\u6240\u6709 Telegram API \u8bf7\u6c42\u90fd\u662f\u5404\u79cd\u7c7b\u578b\u7684 <code>TgAction</code> \u63a5\u53e3\uff0c\u5b9e\u73b0\u4e0d\u540c\u7684\u65b9\u6cd5\uff0c\u5982 <code>SendMessageAction</code>\uff0c\u8fd9\u4e9b\u65b9\u6cd5\u88ab\u5305\u88c5\u6210 <code>message()</code> \u7c7b\u578b\u7684\u51fd\u6570\uff0c\u4ee5\u4fbf\u4e8e\u5e93\u63a5\u53e3\u7684\u4f7f\u7528\u3002</p> <p> </p> <p>\u6bcf\u4e2a <code>Action</code> \u53ef\u80fd\u6839\u636e\u53ef\u7528\u7684 <code>Feature</code> \u5177\u6709\u81ea\u5df1\u7684\u65b9\u6cd5\u3002</p>"},{"location":"zh/Actions/#features","title":"Features","text":"<p>\u4e0d\u540c\u7684\u64cd\u4f5c\u53ef\u80fd\u6839\u636e Telegram Bot API \u5177\u6709\u4e0d\u540c\u7684 <code>Features</code>\uff0c\u4f8b\u5982\uff1a <code>OptionsFeature</code>, <code>MarkupFeature</code> <code>EntitiesFeature</code> <code>CaptionFeature</code>\u3002</p> <p>\u8ba9\u6211\u4eec\u66f4\u8be6\u7ec6\u5730\u4e86\u89e3\u5b83\u4eec\uff1a</p>"},{"location":"zh/Actions/#options","title":"Options","text":"<p>\u4f8b\u5982\uff0c<code>OptionsFeature</code> \u7528\u4e8e\u4f20\u9012\u53ef\u9009\u53c2\u6570\u3002</p> <p>\u6bcf\u4e2a\u64cd\u4f5c\u90fd\u6709\u81ea\u5df1\u7684\u9009\u9879\u7c7b\u578b\uff0c\u53ef\u4ee5\u5728 <code>Action</code> \u672c\u8eab\u7684 <code>options</code> \u53c2\u6570\u7684\u5c5e\u6027\u90e8\u5206\u4e2d\u67e5\u770b\u76f8\u5e94\u7684\u9009\u9879\u3002\u4f8b\u5982\uff0c<code>sendMessage</code> \u5305\u542b\u4e00\u4e2a\u5e26\u6709\u4e0d\u540c\u53c2\u6570\u7684 <code>MessageOptions</code> \u6570\u636e\u7c7b\u4f5c\u4e3a\u9009\u9879\u3002</p> <p>\u4f7f\u7528\u793a\u4f8b\uff1a</p> <pre><code>message{ \"*Test*\" }.options {\n    parseMode = ParseMode.Markdown\n}.send(user, bot)\n</code></pre>"},{"location":"zh/Actions/#markup","title":"Markup","text":"<p>\u8fd8\u6709\u4e00\u4e2a\u7528\u4e8e\u53d1\u9001\u6807\u8bb0\u7684\u65b9\u6cd5\uff0c\u652f\u6301\u6240\u6709\u7c7b\u578b\u7684 keyboards\uff1a<code>ReplyKeyboardMarkup</code>, <code>InlineKeyboardMarkup</code>, <code>ForceReply</code>, <code>ReplyKeyboardRemove</code>\u3002</p>"},{"location":"zh/Actions/#inline-keyboard-markup","title":"Inline Keyboard Markup","text":"<p>\u8fd9\u4e2a\u6784\u5efa\u5668\u5141\u8bb8\u60a8\u6784\u9020\u5185\u8054\u6309\u94ae\uff0c\u5e76\u53ef\u4ee5\u7ec4\u5408\u4efb\u4f55\u53c2\u6570\u3002</p> <pre><code>message{ \"Test\" }.inlineKeyboardMarkup {\n    \"name\" callback \"callbackData\"         //\n    \"buttonName\" url \"https://google.com\"  //--- \u8fd9\u4e24\u4e2a\u6309\u94ae\u5c06\u5728\u540c\u4e00\u884c\u3002\n    newLine() // \u6216 br()\n    \"otherButton\" webAppInfo \"data\"       // \u8fd9\u5c06\u5728\u5176\u4ed6\u884c\n\n    // \u60a8\u8fd8\u53ef\u4ee5\u5728\u6784\u5efa\u5668\u4e2d\u4f7f\u7528\u4e0d\u540c\u7684\u6837\u5f0f\uff1a\n    callbackData(\"buttonName\") { \"callbackData\" }\n}.send(user, bot)\n</code></pre> <p>\u66f4\u591a\u8be6\u60c5\u8bf7\u53c2\u9605\u6784\u5efa\u5668\u6587\u6863\u3002</p>"},{"location":"zh/Actions/#reply-keyboard-markup","title":"Reply Keyboard Markup","text":"<p>\u8fd9\u4e2a\u6784\u5efa\u5668\u5141\u8bb8\u60a8\u6784\u9020\u83dc\u5355\u6309\u94ae\u3002</p> <pre><code>message{ \"Test\" }.replyKeyboardMarkup {\n  + \"Menu button\"     // \u60a8\u53ef\u4ee5\u4f7f\u7528\u4e00\u5143\u52a0\u8fd0\u7b97\u7b26\u6dfb\u52a0\u6309\u94ae\n  + \"Menu button 2\"\n  br() // \u8f6c\u5230\u7b2c\u4e8c\u884c\n  \"Send polls \ud83d\udc40\" requestPoll true   // \u5e26\u53c2\u6570\u7684\u6309\u94ae\n\n  options {\n    resizeKeyboard = true\n  }\n}.send(user, bot)\n</code></pre> <p>\u9002\u7528\u4e8e\u952e\u76d8\u7684\u5176\u4ed6\u9009\u9879\u53ef\u4ee5\u5728 <code>ReplyKeyboardMarkupOptions</code> \u4e2d\u67e5\u770b\u3002</p> <p>\u6709\u5173\u65b9\u6cd5\u7684\u66f4\u591a\u8be6\u7ec6\u4fe1\u606f\uff0c\u8bf7\u53c2\u9605\u6784\u5efa\u5668\u6587\u6863\u3002</p> <p>\u4f7f\u7528 DSL \u6536\u96c6\u952e\u76d8\u6807\u8bb0\u901a\u5e38\u5f88\u65b9\u4fbf\uff0c\u4f46\u5982\u679c\u9700\u8981\uff0c\u60a8\u4e5f\u53ef\u4ee5\u624b\u52a8\u6dfb\u52a0\u6807\u8bb0\u3002</p> <pre><code>message{ \"*Test*\" }.markup {\n    InlineKeyboardMarkup(\n        InlineKeyboardButton(\"test\", callbackData = \"testCallback\")\n    )\n}.send(user, bot)\n</code></pre> <pre><code>message{ \"*Test*\" }.markup {\n    ReplyKeyboardMarkup(\n        KeyboardButton(\"Test menu button\")\n    )\n}.send(user, bot)\n</code></pre>"},{"location":"zh/Actions/#entities","title":"Entities","text":"<p>\u8fd8\u6709\u4e00\u4e2a\u7528\u4e8e\u53d1\u9001 <code>MessageEntity</code> \u7684\u65b9\u6cd5\u3002</p> <p>\u4f7f\u7528\u793a\u4f8b\uff1a</p> <pre><code>message{ \"Test \\$hello\" }.replyKeyboardMarkup {\n    +\"Test menu button\"\n}.entities {\n    5 to 15 url \"https://google.com\" // \u6dfb\u52a0 TextLink\n    entity(EntityType.Bold, 0, 4)\n    entity(EntityType.Cashtag, 5, 5) // \u53cd\u659c\u6760\u4e0d\u8ba1\u6570\uff08\u56e0\u4e3a\u5b83\u7528\u4e8e\u7f16\u8bd1\u5668\uff09\n}.send(user, bot)\n</code></pre>"},{"location":"zh/Actions/#contextual-entities","title":"Contextual entities.","text":"<p>\u5b9e\u4f53\u4e5f\u53ef\u4ee5\u901a\u8fc7\u67d0\u4e9b\u6784\u9020\u7684\u4e0a\u4e0b\u6587\u6dfb\u52a0\uff0c\u5b83\u4eec\u88ab\u6807\u8bb0\u4e3a\u7279\u5b9a\u7684 EntitiesContextBuilder \u63a5\u53e3\uff0c\u8be5\u63a5\u53e3\u4e5f\u5b58\u5728\u4e8e\u6807\u9898\u529f\u80fd\u4e2d\u3002</p> <p>\u4f7f\u7528\u793a\u4f8b\uff1a</p> <pre><code>message { \"usual text \" - bold { \"this is bold text\" } - \" continue usual\" }.send(user, bot)\n</code></pre> <p>\u652f\u6301\u6240\u6709\u7c7b\u578b\u7684 entity types\u3002</p>"},{"location":"zh/Actions/#caption","title":"Caption","text":"<p>\u6b64\u5916\uff0c<code>caption</code> \u65b9\u6cd5\u53ef\u7528\u4e8e\u4e3a\u5a92\u4f53\u6587\u4ef6\u6dfb\u52a0\u6807\u9898\u3002</p> <p>\u4f7f\u7528\u793a\u4f8b\uff1a</p> <pre><code>photo { \"FILE_ID\" }.caption { \"Test caption\" }.send(user, bot)\n</code></pre>"},{"location":"zh/Activites-and-Processors/#_1","title":"\u4ecb\u7ecd","text":"<p>\u5728\u672c\u5e93\u7684\u672f\u8bed\u4e2d\uff0c<code>Activity</code> \u662f\u62bd\u8c61\u5b9e\u4f53\uff0c\u662f\u5bf9\u8bf8\u5982 <code>@CommandHandler</code>\u3001<code>@InputHandler</code>\u3001<code>@UnprocessedHandler</code> \u548c <code>@CommonHandler</code> \u7b49\u5b9e\u4f53\u7684\u6cdb\u5316\u3002</p> <p>\u53e6\u8bf7\u53c2\u9605\u5904\u7406\u5668\u6587\u7ae0\u3002</p>"},{"location":"zh/Activites-and-Processors/#activities","title":"\u6536\u96c6 activities","text":"<p>Activities \u5728\u7f16\u8bd1\u65f6\u88ab\u6536\u96c6\u548c\u51c6\u5907\u6240\u6709\u4e0a\u4e0b\u6587\uff08\u9664\u4e86\u901a\u8fc7\u51fd\u6570\u5f0f DSL \u5b9a\u4e49\u7684\u90a3\u4e9b\uff09\u3002</p> <p>\u5982\u679c\u4f60\u60f3\u9650\u5236\u641c\u7d22\u5305\u7684\u8303\u56f4\uff0c\u53ef\u4ee5\u5c06\u53c2\u6570\u4f20\u9012\u7ed9\u63d2\u4ef6\uff1a</p> <pre><code>ktGram {\n    packages = listOf(\"com.example.mybot\")\n}\n</code></pre> <p>\u6216\u901a\u8fc7 ksp \u800c\u4e0d\u4f7f\u7528\u63d2\u4ef6\uff1a</p> <pre><code>ksp {\n    arg(\"package\", \"com.example.mybot\")\n}\n</code></pre> <p>\u6ce8\u610f\uff0c\u5728\u8fd9\u79cd\u60c5\u51b5\u4e0b\uff0c\u8981\u6b63\u786e\u5904\u7406\u6536\u96c6\u7684\u64cd\u4f5c\uff0c\u4f60\u8fd8\u5fc5\u987b\u5728\u5b9e\u4f8b\u672c\u8eab\u4e2d\u6307\u5b9a\u5305\u3002</p> <pre><code>fun main() = runBlocking {\n    val bot = TelegramBot(\"BOT_TOKEN\", \"com.example.mybot\")\n\n    bot.handleUpdates()\n    // \u542f\u52a8\u957f\u8f6e\u8be2\u76d1\u542c\u5668\n}\n</code></pre> <p>\u6dfb\u52a0\u6b64\u9009\u9879\u662f\u4e3a\u4e86\u80fd\u591f\u8fd0\u884c\u591a\u4e2a bot \u5b9e\u4f8b\uff1a</p> <pre><code>ktGram {\n    packages = listOf(\"com.example.mybot\", \"com.example.mybot2\")\n}\n</code></pre> <p>\u6216\u8005\u5982\u679c\u4f60\u4e0d\u4f7f\u7528\u63d2\u4ef6\u6765\u6307\u5b9a\u4e0d\u540c\u7684\u5305\uff0c\u4f60\u9700\u8981\u7528 <code>;</code> \u5206\u9694\u7b26\u6307\u5b9a\u5b83\u4eec\uff1a</p> <pre><code>ksp {\n    arg(\"package\", \"com.example.mybot;com.example.mybot2\")\n}\n</code></pre>"},{"location":"zh/Activites-and-Processors/#_2","title":"\u5904\u7406","text":""},{"location":"zh/Activites-and-Processors/#webhooks","title":"Webhooks","text":"<p>\u5728\u4f60\u7684\u63a7\u5236\u5668\uff08\u6216\u5904\u7406 <code>webhook</code> \u7684\u5176\u4ed6\u5730\u65b9\uff09\uff0c\u8c03\u7528\uff1a<code>bot.update.parseAndHandle(webhookString)</code></p>"},{"location":"zh/Activites-and-Processors/#_3","title":"\u957f\u8f6e\u8be2","text":"<p>\u8c03\u7528\uff1a<code>bot.handleUpdates()</code> \u6216\u901a\u8fc7 <code>bot.update.setListener { handle(it) }</code></p>"},{"location":"zh/Activites-and-Processors/#_4","title":"\u53e6\u8bf7\u53c2\u9605","text":"<ul> <li>\u66f4\u65b0\u89e3\u6790</li> <li>Activity \u8c03\u7528</li> <li>Actions</li> </ul>"},{"location":"zh/Activity-invocation/","title":"Activity Invocation","text":"<p>During activity invocation, it is possible to pass the bot context, as it is declared as a parameter in target functions.</p> <p>The parameters that can be passed are:</p> <ul> <li><code>ProcessedUpdate</code> (and all its subclasses) - current processing update.</li> <li><code>ProcessingContext</code> - low level context of handling activity.</li> <li><code>User</code> - if present.</li> <li><code>Chat</code> - if present.</li> <li><code>TelegramBot</code> - current bot instance.</li> </ul> <p>It is also possible to add a custom type for passing.</p> <p>To do this, add a class that implements <code>Autowiring&lt;T&gt;</code> and mark it with the <code>@Injectable</code> annotation.</p> <p>After implementing the <code>Autowiring</code> interface - <code>T</code> will be available for passing in target functions and will be obtained through the method described in the interface.</p> <pre><code>@Injectable\nobject UserResolver : Autowiring&lt;UserRecord&gt; {\n    override suspend fun get(update: ProcessedUpdate, bot: TelegramBot): UserRecord? {\n        return userRepository.getUserByTgId(update.user.id)\n    }\n}\n</code></pre> <p>Other parameters declared in functions will be searched in parsed parameters.</p> <p>Additionally, parsed parameters during passing can be cast to certain types, here is their list:</p> <ul> <li><code>String</code></li> <li><code>Integer</code></li> <li><code>Long</code></li> <li><code>Short</code></li> <li><code>Float</code></li> <li><code>Double</code></li> </ul> <p>Moreover, note that if parameters are declared and missing (or in parsed parameters or for example <code>User</code> is missing in <code>Update</code>) or the declared type does not fit the received parameter in the function, <code>null</code> will be passed so be careful.</p> <p>Summarizing everything, below here is an example of how function parameters are usually formed:</p> <p> </p>"},{"location":"zh/Bot-configuration/","title":"Bot Configuration","text":"<p>\u5e93\u63d0\u4f9b\u4e86\u4e30\u5bcc\u7684\u914d\u7f6e\u9009\u9879\uff0c\u4f60\u53ef\u4ee5\u5728 <code>BotConfiguration</code> \u7c7b\u63cf\u8ff0\u4e2d\u67e5\u770b API \u53c2\u8003\u3002</p> <p>\u914d\u7f6e bot \u6709\u4e24\u79cd\u65b9\u6cd5\uff1a</p>"},{"location":"zh/Bot-configuration/#configloader","title":"ConfigLoader \u63a5\u53e3","text":"<p>\u8fd8\u53ef\u4ee5\u901a\u8fc7\u7279\u6b8a\u7684 <code>ConfigLoader</code> \u63a5\u53e3\u8fdb\u884c\u914d\u7f6e\uff0c \u4f60\u53ef\u4ee5\u4ece\u5916\u90e8\u6e90\uff08<code>properties</code>\u3001<code>command line args</code> \u7b49\uff09\u52a0\u8f7d\u8bbe\u7f6e\u3002</p> <p>\u53ef\u4ee5\u901a\u8fc7\u6b21\u6784\u9020\u51fd\u6570\u4f20\u5165\u6b64\u63a5\u53e3\u7684\u5b9e\u73b0\uff0c\u5b9e\u4f8b\u5c06\u76f8\u5e94\u5730\u8fdb\u884c\u914d\u7f6e\u3002</p> <pre><code>val bot = TelegramBot(ConfigLoaderImpl)\n</code></pre> <p>\u76ee\u524d\u63d0\u4f9b\u4e86\u51e0\u4e2a\u5b9e\u73b0\u6b64\u63a5\u53e3\u7684\u6a21\u5757\uff0c\u5982 <code>ktgram-config-env</code>\u3001<code>ktgram-config-toml</code>\u3002</p>"},{"location":"zh/Bot-configuration/#botconfiguration","title":"BotConfiguration \u6982\u8ff0","text":""},{"location":"zh/Bot-configuration/#botconfiguration_1","title":"BotConfiguration","text":"<p><code>BotConfiguration</code> \u7c7b\u662f\u914d\u7f6e bot \u7684\u4e2d\u5fc3\u67a2\u7ebd\u3002\u5b83\u5305\u62ec\u7528\u4e8e\u6807\u8bc6 bot\u3001\u8bbe\u7f6e API \u4e3b\u673a\u3001\u786e\u5b9a bot \u662f\u5426\u5728\u6d4b\u8bd5\u73af\u5883\u4e2d\u8fd0\u884c\u3001\u5904\u7406\u8f93\u5165\u3001\u7ba1\u7406\u7c7b\u548c\u63a7\u5236\u8f93\u5165\u81ea\u52a8\u5220\u9664\u7684\u5c5e\u6027\u3002\u6b64\u5916\uff0c\u5b83\u8fd8\u63d0\u4f9b\u4e86\u901f\u7387\u9650\u5236\u3001HTTP \u5ba2\u6237\u7aef\u914d\u7f6e\u3001\u65e5\u5fd7\u8bb0\u5f55\u3001\u66f4\u65b0\u76d1\u542c\u548c\u547d\u4ee4\u89e3\u6790\u7684\u5185\u90e8\u5c5e\u6027\u3002</p>"},{"location":"zh/Bot-configuration/#_1","title":"\u5c5e\u6027","text":"<ul> <li><code>identifier</code>: \u5728\u591a bot \u5904\u7406\u671f\u95f4\u6807\u8bc6\u4e0d\u540c\u7684 bot \u5b9e\u4f8b\u3002</li> <li><code>apiHost</code>: Telegram API \u7684\u4e3b\u673a\u3002</li> <li><code>isTestEnv</code>: \u6307\u793a bot \u662f\u5426\u5728\u6d4b\u8bd5\u73af\u5883\u4e2d\u8fd0\u884c\u3002</li> <li><code>inputListener</code>: \u8f93\u5165\u5904\u7406\u7c7b\u7684\u5b9e\u4f8b\u3002</li> <li><code>classManager</code>: \u7528\u4e8e\u83b7\u53d6\u7c7b\u7684\u7ba1\u7406\u5668\u3002</li> <li><code>inputAutoRemoval</code>: \u5728\u5904\u7406\u671f\u95f4\u8c03\u8282\u8f93\u5165\u70b9\u81ea\u52a8\u5220\u9664\u7684\u6807\u5fd7\u3002</li> <li><code>exceptionHandlingStrategy</code>: \u5b9a\u4e49\u5f02\u5e38\u5904\u7406\u7b56\u7565\u3002<ul> <li><code>CollectToChannel</code> - \u6536\u96c6\u5230 <code>TgUpdateHandler.caughtExceptions</code>\u3002</li> <li><code>Throw</code> - \u518d\u6b21\u629b\u51fa\u5e76\u5305\u88c5\u5728 <code>TgException</code> \u4e2d\u3002</li> <li><code>DoNothing</code> - \u4ec0\u4e48\u90fd\u4e0d\u505a :)</li> <li><code>Handle</code> - \u8bbe\u7f6e\u81ea\u5b9a\u4e49\u5904\u7406\u7a0b\u5e8f\u3002</li> </ul> </li> <li><code>throwExOnActionsFailure</code>: \u5f53\u4efb\u4f55 bot \u8bf7\u6c42\u5931\u8d25\u65f6\u629b\u51fa\u5f02\u5e38\u3002</li> </ul>"},{"location":"zh/Bot-configuration/#_2","title":"\u914d\u7f6e\u5757","text":"<p><code>BotConfiguration</code> \u8fd8\u63d0\u4f9b\u4e86\u914d\u7f6e\u5176\u5185\u90e8\u7ec4\u4ef6\u7684\u51fd\u6570\uff1a</p> <ul> <li><code>httpClient(block: HttpConfiguration.() -&gt; Unit)</code>: \u914d\u7f6e HTTP \u5ba2\u6237\u7aef\u3002</li> <li><code>logging(block: LoggingConfiguration.() -&gt; Unit)</code>: \u914d\u7f6e\u65e5\u5fd7\u8bb0\u5f55\u3002</li> <li><code>rateLimiter(block: RateLimiterConfiguration.() -&gt; Unit)</code>: \u914d\u7f6e\u8bf7\u6c42\u9650\u5236\u3002</li> <li><code>updatesListener(block: UpdatesListenerConfiguration.() -&gt; Unit)</code>: \u914d\u7f6e\u66f4\u65b0\u76d1\u542c\u5668\u3002</li> <li><code>commandParsing(block: CommandParsingConfiguration.() -&gt; Unit)</code>: \u6307\u5b9a\u547d\u4ee4\u89e3\u6790\u6a21\u5f0f\u3002</li> </ul>"},{"location":"zh/Bot-configuration/#_3","title":"\u5173\u8054\u914d\u7f6e\u7c7b","text":""},{"location":"zh/Bot-configuration/#ratelimiterconfiguration","title":"RateLimiterConfiguration","text":"<p>\u914d\u7f6e\u5168\u5c40\u901f\u7387\u9650\u5236\u3002</p> <ul> <li><code>limits</code>: \u5168\u5c40\u901f\u7387\u9650\u5236\u3002</li> <li><code>mechanism</code>: \u7528\u4e8e\u901f\u7387\u9650\u5236\u7684\u673a\u5236\uff0c\u9ed8\u8ba4\u4e3a TokenBucket \u7b97\u6cd5\u3002</li> <li><code>exceededAction</code>: \u8d85\u51fa\u9650\u5236\u65f6\u5e94\u7528\u7684\u52a8\u4f5c\u3002</li> </ul>"},{"location":"zh/Bot-configuration/#httpconfiguration","title":"HttpConfiguration","text":"<p>\u5305\u542b bot \u7684 HTTP \u5ba2\u6237\u7aef\u914d\u7f6e\u3002</p> <ul> <li><code>requestTimeoutMillis</code>: \u8bf7\u6c42\u8d85\u65f6\uff08\u6beb\u79d2\uff09\u3002</li> <li><code>connectTimeoutMillis</code>: \u8fde\u63a5\u8d85\u65f6\uff08\u6beb\u79d2\uff09\u3002</li> <li><code>socketTimeoutMillis</code>: Socket \u8d85\u65f6\uff08\u6beb\u79d2\uff09\u3002</li> <li><code>maxRequestRetry</code>: HTTP \u8bf7\u6c42\u7684\u6700\u5927\u91cd\u8bd5\u6b21\u6570\u3002</li> <li><code>retryStrategy</code>: \u91cd\u8bd5\u7b56\u7565\uff0c\u53ef\u81ea\u5b9a\u4e49\u3002</li> <li><code>retryDelay</code>: \u6bcf\u6b21\u91cd\u8bd5\u7684\u8d85\u65f6\u500d\u6570\u3002</li> <li><code>proxy</code>: HTTP \u8c03\u7528\u7684\u4ee3\u7406\u8bbe\u7f6e\u3002</li> <li><code>additionalHeaders</code>: \u5e94\u7528\u4e8e\u6bcf\u4e2a\u8bf7\u6c42 headers\u3002</li> </ul>"},{"location":"zh/Bot-configuration/#loggingconfiguration","title":"LoggingConfiguration","text":"<p>\u7ba1\u7406 bot \u64cd\u4f5c\u548c HTTP \u8bf7\u6c42\u7684\u65e5\u5fd7\u7ea7\u522b\u3002</p> <ul> <li><code>botLogLevel</code>: bot \u64cd\u4f5c\u7684\u65e5\u5fd7\u7ea7\u522b\u3002</li> <li><code>httpLogLevel</code>: HTTP \u8bf7\u6c42\u7684\u65e5\u5fd7\u7ea7\u522b\u3002</li> </ul>"},{"location":"zh/Bot-configuration/#updateslistenerconfiguration","title":"UpdatesListenerConfiguration","text":"<p>\u914d\u7f6e\u4e0e\u62c9\u53d6\u66f4\u65b0\u76f8\u5173\u7684\u53c2\u6570\u3002</p> <ul> <li><code>dispatcher</code>: \u6536\u96c6\u4f20\u5165\u66f4\u65b0\u7684\u8c03\u5ea6\u5668\u3002</li> <li><code>processingDispatcher</code>: \u5904\u7406\u66f4\u65b0\u7684\u8c03\u5ea6\u5668\u3002</li> <li><code>pullingDelay</code>: \u6bcf\u6b21\u62c9\u53d6\u8bf7\u6c42\u540e\u7684\u5ef6\u8fdf\u3002</li> <li><code>updatesPollingTimeout</code>: \u957f\u8f6e\u8be2\u673a\u5236\u7684\u8d85\u65f6\u9009\u9879\u3002</li> </ul>"},{"location":"zh/Bot-configuration/#commandparsingconfiguration","title":"CommandParsingConfiguration","text":"<p>\u6307\u5b9a\u547d\u4ee4\u89e3\u6790\u7684\u53c2\u6570\u3002</p> <ul> <li><code>commandDelimiter</code>: \u547d\u4ee4\u548c\u53c2\u6570\u4e4b\u95f4\u7684\u5206\u9694\u7b26\u3002</li> <li><code>parametersDelimiter</code>: \u53c2\u6570\u4e4b\u95f4\u7684\u5206\u9694\u7b26\u3002</li> <li><code>parameterValueDelimiter</code>: \u53c2\u6570\u952e\u548c\u503c\u4e4b\u95f4\u7684\u5206\u9694\u7b26\u3002</li> <li><code>restrictSpacesInCommands</code>: \u6307\u793a\u662f\u5426\u5c06\u547d\u4ee4\u4e2d\u7684\u7a7a\u683c\u89c6\u4e3a\u547d\u4ee4\u7684\u7ed3\u675f\u3002</li> <li><code>useIdentifierInGroupCommands</code>: \u4f7f\u7528 bot \u7684\u6807\u8bc6\u7b26\u5339\u914d\u5305\u542b @ \u7684\u547d\u4ee4\u3002</li> </ul>"},{"location":"zh/Bot-configuration/#_4","title":"\u793a\u4f8b\u914d\u7f6e","text":"<p>\u8fd9\u662f\u4e00\u4e2a\u5982\u4f55\u4f7f\u7528\u8fd9\u4e9b\u7c7b\u914d\u7f6e bot \u7684\u793a\u4f8b\uff1a</p> <pre><code>val bot = TelegramBot(\"TOKEN\") {\n    identifier = \"MyBot\",\n    apiHost = \"https://api.telegram.org\",\n    isTestEnv = true,\n    inputListener = InputListenerMapImpl(),\n    classManager = ClassManagerImpl(),\n\n    httpClient {\n        requestTimeoutMillis = 5000L\n        connectTimeoutMillis = 3000L\n        socketTimeoutMillis = 2000L\n    }\n    logging {\n        botLogLevel = LogLvl.DEBUG\n        httpLogLevel = HttpLogLevel.BODY\n    }\n    updatesListener {\n        dispatcher = Dispatchers.IO\n        processingDispatcher = Dispatchers.Unconfined\n        pullingDelay = 1000L\n    }\n    commandParsing {\n        commandDelimiter = '*'\n        parametersDelimiter = '&amp;'\n        restrictSpacesInCommands = true\n    }\n}\n</code></pre> <p>\u6b64\u914d\u7f6e\u8bbe\u7f6e\u4e86\u4e00\u4e2a\u5177\u6709\u7279\u5b9a\u6807\u8bc6\u7b26\u7684 bot\uff0c\u542f\u7528\u4e86\u6d4b\u8bd5\u73af\u5883\u6a21\u5f0f\uff0c\u914d\u7f6e\u4e86\u901f\u7387\u9650\u5236\u3001HTTP \u5ba2\u6237\u7aef\u8bbe\u7f6e\u3001\u65e5\u5fd7\u7ea7\u522b\u3001\u66f4\u65b0\u76d1\u542c\u5668\u53c2\u6570\u548c\u547d\u4ee4\u89e3\u6790\u89c4\u5219\u3002</p> <p>\u901a\u8fc7\u5229\u7528\u8fd9\u4e9b\u914d\u7f6e\u9009\u9879\uff0c\u5f00\u53d1\u8005\u53ef\u4ee5\u5fae\u8c03\u4ed6\u4eec\u7684 bot \u4ee5\u6ee1\u8db3\u7279\u5b9a\u9700\u6c42\uff0c\u5e76\u5728\u5404\u79cd\u64cd\u4f5c\u573a\u666f\u4e2d\u4f18\u5316\u6027\u80fd\u3002</p>"},{"location":"zh/F.A.Q/","title":"\u5e38\u89c1\u95ee\u9898\u89e3\u7b54","text":""},{"location":"zh/F.A.Q/#abstractmethoderror","title":"<code>AbstractMethodError</code> \u5f02\u5e38","text":"<p>\u5982\u679c\u5728\u542f\u52a8\u5e94\u7528\u7a0b\u5e8f\u65f6\u9047\u5230\u6b64\u5f02\u5e38\uff1a</p> <pre><code>Exception in thread \"DefaultDispatcher-worker-1\" java.lang.AbstractMethodError: 'kotlinx.serialization.KSerializer[] kotlinx.serialization.internal.GeneratedSerializer.typeParametersSerializers()'\n    at eu.vendeli.tgbot.types.options.GetUpdatesOptions$$serializer.typeParametersSerializers(GetUpdatesOptions.kt:6)\n</code></pre> <p>\u8fd9\u662f\u56e0\u4e3a\u4f60\u7684\u6784\u5efa\u7cfb\u7edf\u89e3\u6790\u4e86\u65e7\u7684\u5e8f\u5217\u5316\u5e93\uff0c\u5176\u5185\u90e8\u673a\u5236\u4e0d\u540c\u3002 \u8981\u89e3\u51b3\u8fd9\u4e2a\u95ee\u9898\uff0c\u4f60\u9700\u8981\u8ba9\u5b83\u4f7f\u7528\u66f4\u65b0\u7684\u7248\u672c\uff0c\u4f8b\u5982\u901a\u8fc7\u5728 buildscript \u4e2d\u6dfb\u52a0\u4ee5\u4e0b\u5185\u5bb9\uff1a</p> <pre><code>configurations.all {\n    resolutionStrategy.eachDependency {\n        val serdeVer = \"x.x.x\" // \u5e94\u8be5 &gt;= 1.8.0\n        when(requested.module.toString()) {\n            // json \u5e8f\u5217\u5316\n            \"org.jetbrains.kotlinx:kotlinx-serialization-json\" -&gt; useVersion(serdeVer)\n            \"org.jetbrains.kotlinx:kotlinx-serialization-json-jvm\" -&gt; useVersion(serdeVer)\n            \"org.jetbrains.kotlinx:kotlinx-serialization-core\" -&gt; useVersion(serdeVer)\n            \"org.jetbrains.kotlinx:kotlinx-serialization-core-jvm\" -&gt; useVersion(serdeVer)\n            \"org.jetbrains.kotlinx:kotlinx-serialization-bom\" -&gt; useVersion(serdeVer)\n        }\n    }\n}\n</code></pre> <p>(\u5982\u679c\u5728\u53d8\u66f4\u65e5\u5fd7\u4e2d\u6709\u5f88\u597d\u7684\u63cf\u8ff0\uff0c\u6211\u6c38\u8fdc\u4e0d\u4f1a\u5347\u7ea7\u5b83\uff0c\u56e0\u4e3a\u6211\u6536\u5230\u4e86\u5f88\u591a\u5173\u4e8e\u6b64\u95ee\u9898\u7684\u62a5\u544a)</p>"},{"location":"zh/F.A.Q/#_1","title":"\u5982\u4f55\u83b7\u53d6\u65b9\u6cd5\u7684\u54cd\u5e94\uff1f","text":"<p>\u8981\u83b7\u53d6\u54cd\u5e94\u5e76\u80fd\u591f\u64cd\u4f5c\uff0c\u4f60\u9700\u8981\u4f7f\u7528\u65b9\u6cd5\u7684\u672b\u5c3e\u7684 <code>sendReturning</code> \u800c\u4e0d\u662f <code>send</code>\u3002</p> <p>\u5728\u8fd9\u79cd\u60c5\u51b5\u4e0b\uff0c\u4f1a\u8fd4\u56de <code>Response</code> \u7c7b\uff0c\u5b83\u5305\u542b\u54cd\u5e94\u3001\u6210\u529f\u6216\u5931\u8d25\uff0c\u63a5\u4e0b\u6765\u4f60\u9700\u8981\u5904\u7406\u5931\u8d25\u6216\u76f4\u63a5\u8c03\u7528 <code>getOrNull()</code>\u3002</p> <p>\u8fd9\u91cc\u6709\u4e00\u8282\u5173\u4e8e\uff1a\u5904\u7406\u54cd\u5e94\u3002</p>"},{"location":"zh/F.A.Q/#spring-boot-devtools","title":"\u4f7f\u7528 <code>spring-boot-devtools</code> \u65f6\u51fa\u73b0\u9519\u8bef","text":"<p>\u8fd9\u662f\u56e0\u4e3a <code>spring-boot-devtools</code> \u6709\u81ea\u5df1\u7684 <code>classloader</code>\uff0c\u5b83\u627e\u4e0d\u5230\u65b9\u6cd5\u3002</p> <p>\u4f60\u9700\u8981\u5c06\u4ee5\u4e0b\u5185\u5bb9\u6dfb\u52a0\u5230 <code>resources/META-INF/spring-devtools.properties</code>\uff1a</p> <pre><code>restart.include.generated=/eu.vendeli\n</code></pre>"},{"location":"zh/F.A.Q/#ktor","title":"\u5982\u4f55\u66f4\u6539 ktor \u5f15\u64ce","text":"<p>\u5982\u679c\u4f60\u60f3\u66f4\u6539\u5ba2\u6237\u7aef\u4f7f\u7528\u7684\u5f15\u64ce\uff0c\u4f60\u53ef\u4ee5\u7b80\u5355\u5730\u66f4\u6539\u53c2\u6570\u5728\u63d2\u4ef6\u8bbe\u7f6e\u4e2d\u3002</p>"},{"location":"zh/F.A.Q/#_2","title":"\u5982\u4f55\u4f7f\u7528\u6211\u6700\u559c\u6b22\u7684\u65e5\u5fd7\u63d0\u4f9b\u7a0b\u5e8f","text":"<p>\u8be5\u5e93\u4f7f\u7528 <code>slf4j-api</code>\uff0c\u8981\u4f7f\u7528\u63d0\u4f9b\u7a0b\u5e8f\uff0c\u4f60\u53ea\u9700\u8981\u5c06\u5176\u6dfb\u52a0\u5230\u4f9d\u8d56\u9879\u4e2d\u3002</p> <p>\u5e93\u63d2\u4ef6\u4f1a\u81ea\u52a8\u68c0\u6d4b\u63d0\u4f9b\u7a0b\u5e8f\u7684\u4f7f\u7528\uff0c\u5982\u679c\u7f3a\u5c11\u63d0\u4f9b\u7a0b\u5e8f\uff0c\u5c06\u9ed8\u8ba4\u4f7f\u7528 <code>logback</code>\u3002</p>"},{"location":"zh/F.A.Q/#_3","title":"\u5728\u957f\u8f6e\u8be2\u5904\u7406\u7a0b\u5e8f\u4e2d\u6355\u83b7\u7f51\u7edc\u5f02\u5e38","text":"<p>\u4f8b\u5982\uff0c\u5982\u679c\u4f60\u6709\u4e0d\u7a33\u5b9a\u7684\u8fde\u63a5\u5e76\u9700\u8981\u56e0\u4e3a\u8fd9\u4e2a\u539f\u56e0\u6355\u83b7\u9519\u8bef\uff0c\u4e5f\u8bb8\u8fd9\u79cd\u65b9\u6cd5\u4f1a\u5bf9\u4f60\u6709\u5e2e\u52a9\uff1a</p> <pre><code>fun main() {\n    val bot = TelegramBot(\"TOKEN\")\n\n    try {\n        bot.handleUpdates()\n    } catch (e: Exception) {\n        // \u5982\u679c\u9700\u8981\u5904\u7406\n\n        bot.update.stopListener()\n        bot.handleUpdates()\n    }\n}\n</code></pre> <p>\u4f60\u4e5f\u53ef\u4ee5\u770b\u770bspring-starter\u4e2d\u662f\u5982\u4f55\u5b9e\u73b0\u7684\u3002</p>"},{"location":"zh/FSM-and-Conversation-handling/","title":"FSM \u4e0e\u4f1a\u8bdd\u5904\u7406","text":"<p>\u5e93\u8fd8\u652f\u6301 FSM \u673a\u5236\uff0c\u8fd9\u662f\u4e00\u79cd\u7528\u4e8e\u5904\u7406\u7528\u6237\u8f93\u5165\u548c\u9519\u8bef\u8f93\u5165\u5904\u7406\u7684\u6e10\u8fdb\u5f0f\u5904\u7406\u673a\u5236\u3002</p> <p>Note</p> <p>TL;DR: \u67e5\u770b\u793a\u4f8b \u90a3\u91cc\u3002</p>"},{"location":"zh/FSM-and-Conversation-handling/#_1","title":"\u7406\u8bba","text":"<p>\u8ba9\u6211\u4eec\u60f3\u8c61\u4e00\u4e2a\u9700\u8981\u6536\u96c6\u7528\u6237\u8c03\u67e5\u7684\u60c5\u51b5\uff0c\u4f60\u53ef\u4ee5\u5728\u4e00\u4e2a\u6b65\u9aa4\u4e2d\u8be2\u95ee\u4e00\u4e2a\u4eba\u7684\u6240\u6709\u6570\u636e\uff0c\u4f46\u5bf9\u4e8e\u67d0\u4e2a\u53c2\u6570\u7684\u9519\u8bef\u8f93\u5165\uff0c\u5bf9\u4e8e\u7528\u6237\u548c\u6211\u4eec\u6765\u8bf4\u90fd\u4f1a\u5f88\u56f0\u96be\uff0c\u5e76\u4e14\u6bcf\u4e2a\u6b65\u9aa4\u53ef\u80fd\u6839\u636e\u67d0\u4e9b\u8f93\u5165\u6570\u636e\u800c\u6709\u6240\u4e0d\u540c\u3002</p> <p>\u73b0\u5728\u8ba9\u6211\u4eec\u60f3\u8c61\u9010\u6b65\u8f93\u5165\u6570\u636e\uff0c\u5176\u4e2d\u673a\u5668\u4eba\u8fdb\u5165\u4e0e\u7528\u6237\u7684\u5bf9\u8bdd\u6a21\u5f0f\u3002</p> <p> </p> <p>\u7eff\u8272\u7bad\u5934\u8868\u793a\u65e0\u9519\u8bef\u5730\u901a\u8fc7\u6b65\u9aa4\u7684\u8f6c\u6362\u8fc7\u7a0b\uff0c\u84dd\u8272\u7bad\u5934\u8868\u793a\u4fdd\u5b58\u5f53\u524d\u72b6\u6001\u5e76\u7b49\u5f85\u91cd\u65b0\u8f93\u5165\uff08\u4f8b\u5982\uff0c\u5982\u679c\u7528\u6237\u8868\u793a\u4ed6 -100 \u5c81\uff0c\u5e94\u8be5\u91cd\u65b0\u8be2\u95ee\u5e74\u9f84\uff09\uff0c\u7ea2\u8272\u7bad\u5934\u8868\u793a\u7531\u4e8e\u4efb\u4f55\u547d\u4ee4\u6216\u4efb\u4f55\u5176\u4ed6\u6709\u610f\u4e49\u7684\u53d6\u6d88\u800c\u9000\u51fa\u6574\u4e2a\u8fc7\u7a0b\u3002</p>"},{"location":"zh/FSM-and-Conversation-handling/#_2","title":"\u5b9e\u8df5","text":"<p>Wizard \u7cfb\u7edf\u5728 Telegram \u673a\u5668\u4eba\u4e2d\u542f\u7528\u591a\u6b65\u9aa4\u7528\u6237\u4ea4\u4e92\u3002\u5b83\u5f15\u5bfc\u7528\u6237\u5b8c\u6210\u4e00\u7cfb\u5217\u6b65\u9aa4\uff0c\u9a8c\u8bc1\u8f93\u5165\uff0c\u5b58\u50a8\u72b6\u6001\uff0c\u5e76\u5728\u6b65\u9aa4\u4e4b\u95f4\u8f6c\u6362\u3002</p> <p>\u4e3b\u8981\u4f18\u70b9: - \u7c7b\u578b\u5b89\u5168: \u7f16\u8bd1\u65f6\u7c7b\u578b\u68c0\u67e5\u7528\u4e8e\u72b6\u6001\u8bbf\u95ee - \u58f0\u660e\u5f0f: \u5c06\u6b65\u9aa4\u5b9a\u4e49\u4e3a\u5d4c\u5957\u7c7b/\u5bf9\u8c61 - \u7075\u6d3b: \u652f\u6301\u6761\u4ef6\u8f6c\u6362\u3001\u8df3\u8f6c\u548c\u91cd\u8bd5 - \u6709\u72b6\u6001: \u81ea\u52a8\u72b6\u6001\u6301\u4e45\u5316\uff0c\u652f\u6301\u53ef\u63d2\u62d4\u7684\u5b58\u50a8\u540e\u7aef - \u96c6\u6210: \u4e0e\u73b0\u6709\u7684 Activity \u7cfb\u7edf\u914d\u5408\u5de5\u4f5c</p>"},{"location":"zh/FSM-and-Conversation-handling/#_3","title":"\u6838\u5fc3\u6982\u5ff5","text":""},{"location":"zh/FSM-and-Conversation-handling/#wizardstep","title":"WizardStep","text":"<p><code>WizardStep</code> \u8868\u793a\u5411\u5bfc\u6d41\u7a0b\u4e2d\u7684\u5355\u4e2a\u6b65\u9aa4\u3002\u6bcf\u4e2a\u6b65\u9aa4\u5fc5\u987b\u5b9e\u73b0:</p> <ul> <li><code>onEntry(ctx: WizardContext)</code>: \u5f53\u7528\u6237\u8fdb\u5165\u6b64\u6b65\u9aa4\u65f6\u8c03\u7528\u3002\u7528\u4e8e\u63d0\u793a\u7528\u6237\u3002</li> <li><code>onRetry(ctx: WizardContext)</code>: \u5f53\u9a8c\u8bc1\u5931\u8d25\u4e14\u6b65\u9aa4\u5e94\u8be5\u91cd\u8bd5\u65f6\u8c03\u7528\u3002\u7528\u4e8e\u663e\u793a\u9519\u8bef\u6d88\u606f\u3002</li> <li><code>validate(ctx: WizardContext): Transition</code>: \u9a8c\u8bc1\u5f53\u524d\u8f93\u5165\u5e76\u8fd4\u56de <code>Transition</code> \u4ee5\u6307\u793a\u63a5\u4e0b\u6765\u53d1\u751f\u4ec0\u4e48\u3002</li> <li><code>store(ctx: WizardContext): Any?</code> (\u53ef\u9009): \u8fd4\u56de\u8981\u4e3a\u6b64\u6b65\u9aa4\u6301\u4e45\u5316\u7684\u8fd4\u56de\u503c\u3002\u5982\u679c\u6b65\u9aa4\u4e0d\u5b58\u50a8\u72b6\u6001\uff0c\u5219\u8fd4\u56de <code>null</code>\u3002</li> </ul> <pre><code>object NameStep : WizardStep(isInitial = true) {\n    override suspend fun onEntry(ctx: WizardContext) {\n        message { \"What is your name?\" }.send(ctx.user, ctx.bot)\n    }\n\n    override suspend fun onRetry(ctx: WizardContext) {\n        message { \"Name cannot be empty. Please try again.\" }.send(ctx.user, ctx.bot)\n    }\n\n    override suspend fun validate(ctx: WizardContext): Transition {\n        return if (ctx.update.text.isNullOrBlank()) {\n            Transition.Retry\n        } else {\n            Transition.Next\n        }\n    }\n\n    override suspend fun store(ctx: WizardContext): String {\n        return ctx.update.text!!\n    }\n}\n</code></pre> <p>Note</p> <p>\u5982\u679c\u67d0\u4e2a\u6b65\u9aa4\u672a\u6807\u8bb0\u4e3a\u521d\u59cb -&gt; \u7b2c\u4e00\u4e2a\u58f0\u660e\u7684\u6b65\u9aa4\u88ab\u89c6\u4e3a\u521d\u59cb\u3002</p>"},{"location":"zh/FSM-and-Conversation-handling/#transition","title":"Transition","text":"<p><code>Transition</code> \u786e\u5b9a\u9a8c\u8bc1\u540e\u53d1\u751f\u4ec0\u4e48:</p> <ul> <li><code>Transition.Next</code>: \u79fb\u52a8\u5230\u5e8f\u5217\u4e2d\u7684\u4e0b\u4e00\u4e2a\u6b65\u9aa4</li> <li><code>Transition.JumpTo(step: KClass&lt;out WizardStep&gt;)</code>: \u8df3\u8f6c\u5230\u7279\u5b9a\u6b65\u9aa4</li> <li><code>Transition.Retry</code>: \u91cd\u8bd5\u5f53\u524d\u6b65\u9aa4\uff08\u9a8c\u8bc1\u5931\u8d25\uff09</li> <li><code>Transition.Finish</code>: \u5b8c\u6210\u5411\u5bfc</li> </ul> <pre><code>// \u57fa\u4e8e\u8f93\u5165\u7684\u6761\u4ef6\u8df3\u8f6c\noverride suspend fun validate(ctx: WizardContext): Transition {\n    val age = ctx.update.text?.toIntOrNull()\n    return when {\n        age == null -&gt; Transition.Retry\n        age &lt; 18 -&gt; Transition.JumpTo(UnderageStep::class)\n        else -&gt; Transition.Next\n    }\n}\n</code></pre>"},{"location":"zh/FSM-and-Conversation-handling/#wizardcontext","title":"WizardContext","text":"<p><code>WizardContext</code> \u63d0\u4f9b\u5bf9\u4ee5\u4e0b\u5185\u5bb9\u7684\u8bbf\u95ee: - <code>user: User</code>: \u5f53\u524d\u7528\u6237 - <code>update: ProcessedUpdate</code>: \u5f53\u524d\u66f4\u65b0 - <code>bot: TelegramBot</code>: \u673a\u5668\u4eba\u5b9e\u4f8b - <code>userReference: UserChatReference</code>: \u7528\u4e8e\u72b6\u6001\u5b58\u50a8\u7684\u7528\u6237\u548c\u804a\u5929 ID \u5f15\u7528</p> <p>\u4ee5\u53ca\u7c7b\u578b\u5b89\u5168\u7684\u72b6\u6001\u8bbf\u95ee\u65b9\u6cd5\uff08\u7531 KSP \u751f\u6210\uff09\u3002</p>"},{"location":"zh/FSM-and-Conversation-handling/#_4","title":"\u5b9a\u4e49\u5411\u5bfc","text":""},{"location":"zh/FSM-and-Conversation-handling/#_5","title":"\u57fa\u672c\u7ed3\u6784","text":"<p>\u5411\u5bfc\u88ab\u5b9a\u4e49\u4e3a\u4f7f\u7528 <code>@WizardHandler</code> \u6ce8\u89e3\u7684\u7c7b\u6216\u5bf9\u8c61:</p> <pre><code>@WizardHandler(trigger = [\"/survey\"])\nobject SurveyWizard {\n    object NameStep : WizardStep(isInitial = true) {\n        // ... \u6b65\u9aa4\u5b9e\u73b0\n    }\n\n    object AgeStep : WizardStep {\n        // ... \u6b65\u9aa4\u5b9e\u73b0\n    }\n\n    object FinishStep : WizardStep {\n        // ... \u6b65\u9aa4\u5b9e\u73b0\n    }\n}\n</code></pre>"},{"location":"zh/FSM-and-Conversation-handling/#_6","title":"\u6ce8\u89e3\u53c2\u6570","text":"<p><code>@WizardHandler</code> \u63a5\u53d7: - <code>trigger: Array&lt;String&gt;</code>: \u542f\u52a8\u5411\u5bfc\u7684\u547d\u4ee4\uff08\u4f8b\u5982: <code>[\"/start\", \"/survey\"]</code>\uff09 - <code>scope: Array&lt;UpdateType&gt;</code>: \u8981\u76d1\u542c\u7684\u66f4\u65b0\u7c7b\u578b\uff08\u9ed8\u8ba4: <code>[UpdateType.MESSAGE]</code>\uff09 - <code>stateManagers: Array&lt;KClass&lt;out WizardStateManager&lt;*&gt;&gt;&gt;</code>: \u7528\u4e8e\u5b58\u50a8\u6b65\u9aa4\u6570\u636e\u7684\u72b6\u6001\u7ba1\u7406\u5668\u7c7b</p>"},{"location":"zh/FSM-and-Conversation-handling/#_7","title":"\u72b6\u6001\u7ba1\u7406","text":""},{"location":"zh/FSM-and-Conversation-handling/#wizardstatemanager","title":"WizardStateManager","text":"<p>\u72b6\u6001\u4f7f\u7528 <code>WizardStateManager&lt;T&gt;</code> \u5b9e\u73b0\u5b58\u50a8\u3002\u6bcf\u4e2a\u7ba1\u7406\u5668\u5904\u7406\u7279\u5b9a\u7c7b\u578b:</p> <pre><code>interface WizardStateManager&lt;T : Any&gt; {\n    suspend fun get(key: KClass&lt;out WizardStep&gt;, reference: UserChatReference): T?\n    suspend fun set(key: KClass&lt;out WizardStep&gt;, reference: UserChatReference, value: T)\n    suspend fun del(key: KClass&lt;out WizardStep&gt;, reference: UserChatReference)\n}\n</code></pre> <p>\u53e6\u8bf7\u53c2\u9605: MapStateManager, MapStringStateManager, MapIntStateManager, MapLongStateManager\u3002"},{"location":"zh/FSM-and-Conversation-handling/#_8","title":"\u81ea\u52a8\u5339\u914d","text":"<p>KSP \u6839\u636e <code>store()</code> \u8fd4\u56de\u7c7b\u578b\u5c06\u6b65\u9aa4\u5339\u914d\u5230\u72b6\u6001\u7ba1\u7406\u5668:</p> <pre><code>@WizardHandler(\n    trigger = [\"/survey\"],\n    stateManagers = [StringStateManager::class, IntStateManager::class]\n)\nobject SurveyWizard {\n    object NameStep : WizardStep(isInitial = true) {\n        override suspend fun store(ctx: WizardContext): String {\n            return ctx.update.text!! // \u5339\u914d StringStateManager\n        }\n    }\n\n    object AgeStep : WizardStep {\n        override suspend fun store(ctx: WizardContext): Int {\n            return ctx.update.text!!.toInt() // \u5339\u914d IntStateManager\n        }\n    }\n}\n</code></pre>"},{"location":"zh/FSM-and-Conversation-handling/#_9","title":"\u6bcf\u6b65\u8986\u76d6","text":"<p>\u4f7f\u7528 <code>@WizardHandler.StateManager</code> \u4e3a\u7279\u5b9a\u6b65\u9aa4\u8986\u76d6\u72b6\u6001\u7ba1\u7406\u5668:</p> <pre><code>@WizardHandler(\n    trigger = [\"/survey\"],\n    stateManagers = [DefaultStateManager::class]\n)\nobject SurveyWizard {\n    object NameStep : WizardStep(isInitial = true) {\n        // \u4f7f\u7528 DefaultStateManager\n    }\n\n    @WizardHandler.StateManager(CustomStateManager::class)\n    object AgeStep : WizardStep {\n        // \u4f7f\u7528 CustomStateManager \u4ee3\u66ff\n    }\n}\n</code></pre>"},{"location":"zh/FSM-and-Conversation-handling/#_10","title":"\u7c7b\u578b\u5b89\u5168\u7684\u72b6\u6001\u8bbf\u95ee","text":"<p>KSP \u4e3a\u6bcf\u4e2a\u5b58\u50a8\u72b6\u6001\u7684\u6b65\u9aa4\u751f\u6210\u7c7b\u578b\u5b89\u5168\u7684\u6269\u5c55\u51fd\u6570\u5230 <code>WizardContext</code>\u3002</p>"},{"location":"zh/FSM-and-Conversation-handling/#_11","title":"\u751f\u6210\u7684\u51fd\u6570","text":"<p>\u5bf9\u4e8e\u5b58\u50a8 <code>String</code> \u7684\u6b65\u9aa4:</p> <pre><code>// \u7531 KSP \u81ea\u52a8\u751f\u6210\nsuspend inline fun &lt;reified S : WizardStep&gt; WizardContext.getState(): String?\nsuspend inline fun &lt;reified S : WizardStep&gt; WizardContext.setState(value: String)\nsuspend inline fun &lt;reified S : WizardStep&gt; WizardContext.delState()\n</code></pre>"},{"location":"zh/FSM-and-Conversation-handling/#_12","title":"\u7528\u6cd5","text":"<pre><code>object FinishStep : WizardStep {\n    override suspend fun onEntry(ctx: WizardContext) {\n        // \u7c7b\u578b\u5b89\u5168\u8bbf\u95ee - \u8fd4\u56de String? (\u53ef\u7a7a)\n        val name: String? = ctx.getState&lt;NameStep&gt;()\n\n        // \u7c7b\u578b\u5b89\u5168\u8bbf\u95ee - \u8fd4\u56de Int? (\u53ef\u7a7a)\n        val age: Int? = ctx.getState&lt;AgeStep&gt;()\n\n        val summary = buildString {\n            appendLine(\"Name: $name\")\n            appendLine(\"Age: $age\")\n        }\n\n        message { summary }.send(ctx.user, ctx.bot)\n    }\n\n    override suspend fun onRetry(ctx: WizardContext) = Unit\n\n    override suspend fun validate(ctx: WizardContext): Transition {\n        return Transition.Finish\n    }\n}\n</code></pre>"},{"location":"zh/FSM-and-Conversation-handling/#_13","title":"\u56de\u9000\u65b9\u6cd5","text":"<p>\u5982\u679c\u7c7b\u578b\u5b89\u5168\u65b9\u6cd5\u4e0d\u53ef\u7528\uff0c\u8bf7\u4f7f\u7528\u56de\u9000\u65b9\u6cd5:</p> <pre><code>// \u56de\u9000 - \u8fd4\u56de Any?\nval name = ctx.getState(NameStep::class)\n\n// \u56de\u9000 - \u63a5\u53d7 Any?\nctx.setState(NameStep::class, \"John\")\nctx.delState(NameStep::class)\n</code></pre>"},{"location":"zh/FSM-and-Conversation-handling/#_14","title":"\u5b8c\u6574\u793a\u4f8b","text":""},{"location":"zh/FSM-and-Conversation-handling/#_15","title":"\u7528\u6237\u6ce8\u518c\u5411\u5bfc","text":"<pre><code>@WizardHandler(\n    trigger = [\"/register\"],\n    stateManagers = [StringStateManager::class, IntStateManager::class]\n)\nobject RegistrationWizard {\n    object NameStep : WizardStep(isInitial = true) {\n        override suspend fun onEntry(ctx: WizardContext) {\n            message { \"What is your name?\" }.send(ctx.user, ctx.bot)\n        }\n\n        override suspend fun onRetry(ctx: WizardContext) {\n            message { \"Please enter a valid name.\" }.send(ctx.user, ctx.bot)\n        }\n\n        override suspend fun validate(ctx: WizardContext): Transition {\n            val name = ctx.update.text?.trim()\n            return if (name.isNullOrBlank() || name.length &lt; 2) {\n                Transition.Retry\n            } else {\n                Transition.Next\n            }\n        }\n\n        override suspend fun store(ctx: WizardContext): String {\n            return ctx.update.text!!.trim()\n        }\n    }\n\n    object AgeStep : WizardStep {\n        override suspend fun onEntry(ctx: WizardContext) {\n            message { \"How old are you?\" }.send(ctx.user, ctx.bot)\n        }\n\n        override suspend fun onRetry(ctx: WizardContext) {\n            message { \"Please enter a valid age (must be a number).\" }.send(ctx.user, ctx.bot)\n        }\n\n        override suspend fun validate(ctx: WizardContext): Transition {\n            val age = ctx.update.text?.toIntOrNull()\n            return when {\n                age == null -&gt; Transition.Retry\n                age &lt; 0 || age &gt; 150 -&gt; Transition.Retry\n                age &lt; 18 -&gt; Transition.JumpTo(UnderageStep::class)\n                else -&gt; Transition.Next\n            }\n        }\n\n        override suspend fun store(ctx: WizardContext): Int {\n            return ctx.update.text!!.toInt()\n        }\n    }\n\n    object UnderageStep : WizardStep {\n        override suspend fun onEntry(ctx: WizardContext) {\n            message { \n                \"Sorry, you must be 18 or older to register.\" \n            }.send(ctx.user, ctx.bot)\n        }\n\n        override suspend fun onRetry(ctx: WizardContext) = Unit\n\n        override suspend fun validate(ctx: WizardContext): Transition {\n            return Transition.Finish\n        }\n    }\n\n    object ConfirmationStep : WizardStep {\n        override suspend fun onEntry(ctx: WizardContext) {\n            // \u7c7b\u578b\u5b89\u5168\u72b6\u6001\u8bbf\u95ee\n            val name: String? = ctx.getState&lt;NameStep&gt;()\n            val age: Int? = ctx.getState&lt;AgeStep&gt;()\n\n            val confirmation = buildString {\n                appendLine(\"Please confirm your information:\")\n                appendLine(\"Name: $name\")\n                appendLine(\"Age: $age\")\n                appendLine()\n                appendLine(\"Reply 'yes' to confirm or 'no' to start over.\")\n            }\n\n            message { confirmation }.send(ctx.user, ctx.bot)\n        }\n\n        override suspend fun onRetry(ctx: WizardContext) {\n            message { \"Please reply 'yes' or 'no'.\" }.send(ctx.user, ctx.bot)\n        }\n\n        override suspend fun validate(ctx: WizardContext): Transition {\n            val response = ctx.update.text?.lowercase()?.trim()\n            return when (response) {\n                \"yes\" -&gt; Transition.Finish\n                \"no\" -&gt; Transition.JumpTo(NameStep::class) // \u91cd\u65b0\u5f00\u59cb\n                else -&gt; Transition.Retry\n            }\n        }\n    }\n\n    object FinishStep : WizardStep {\n        override suspend fun onEntry(ctx: WizardContext) {\n            val name: String? = ctx.getState&lt;NameStep&gt;()\n            val age: Int? = ctx.getState&lt;AgeStep&gt;()\n\n            // \u4fdd\u5b58\u5230\u6570\u636e\u5e93\u3001\u53d1\u9001\u786e\u8ba4\u7b49\n            message { \n                \"Registration complete! Welcome, $name (age $age).\" \n            }.send(ctx.user, ctx.bot)\n        }\n\n        override suspend fun onRetry(ctx: WizardContext) = Unit\n\n        override suspend fun validate(ctx: WizardContext): Transition {\n            return Transition.Finish\n        }\n    }\n}\n</code></pre>"},{"location":"zh/FSM-and-Conversation-handling/#_16","title":"\u9ad8\u7ea7\u529f\u80fd","text":""},{"location":"zh/FSM-and-Conversation-handling/#_17","title":"\u6761\u4ef6\u8f6c\u6362","text":"<p>\u4f7f\u7528 <code>Transition.JumpTo</code> \u5b9e\u73b0\u6761\u4ef6\u6d41\u7a0b:</p> <pre><code>override suspend fun validate(ctx: WizardContext): Transition {\n    val choice = ctx.update.text?.lowercase()\n    return when (choice) {\n        \"premium\" -&gt; Transition.JumpTo(PremiumStep::class)\n        \"basic\" -&gt; Transition.JumpTo(BasicStep::class)\n        else -&gt; Transition.Retry\n    }\n}\n</code></pre>"},{"location":"zh/FSM-and-Conversation-handling/#_18","title":"\u65e0\u72b6\u6001\u6b65\u9aa4","text":"<p>\u6b65\u9aa4\u4e0d\u9700\u8981\u5b58\u50a8\u72b6\u6001\u3002\u53ea\u9700\u4ece <code>store()</code> \u8fd4\u56de <code>null</code> (\u6216\u4fdd\u6301\u539f\u6837):</p> <pre><code>object ConfirmationStep : WizardStep {\n    override suspend fun store(ctx: WizardContext): Any? = null\n    // ... \u5176\u4f59\u5b9e\u73b0\n}\n</code></pre>"},{"location":"zh/FSM-and-Conversation-handling/#_19","title":"\u81ea\u5b9a\u4e49\u72b6\u6001\u7ba1\u7406\u5668","text":"<p>\u4e3a\u81ea\u5b9a\u4e49\u5b58\u50a8\uff08\u6570\u636e\u5e93\u3001Redis \u7b49\uff09\u5b9e\u73b0 <code>WizardStateManager&lt;T&gt;</code>:</p> <pre><code>class DatabaseStateManager : WizardStateManager&lt;String&gt; {\n    override suspend fun get(\n        key: KClass&lt;out WizardStep&gt;,\n        reference: UserChatReference\n    ): String? {\n        // \u4ece\u6570\u636e\u5e93\u52a0\u8f7d\n        return database.getWizardState(reference.userId, key.qualifiedName)\n    }\n\n    override suspend fun set(\n        key: KClass&lt;out WizardStep&gt;,\n        reference: UserChatReference,\n        value: String\n    ) {\n        // \u4fdd\u5b58\u5230\u6570\u636e\u5e93\n        database.saveWizardState(reference.userId, key.qualifiedName, value)\n    }\n\n    override suspend fun del(\n        key: KClass&lt;out WizardStep&gt;,\n        reference: UserChatReference\n    ) {\n        // \u4ece\u6570\u636e\u5e93\u5220\u9664\n        database.deleteWizardState(reference.userId, key.qualifiedName)\n    }\n}\n</code></pre>"},{"location":"zh/FSM-and-Conversation-handling/#_20","title":"\u5185\u90e8\u5de5\u4f5c\u539f\u7406","text":""},{"location":"zh/FSM-and-Conversation-handling/#_21","title":"\u4ee3\u7801\u751f\u6210","text":"<p>KSP \u751f\u6210:</p> <ol> <li>WizardActivity: \u6269\u5c55 <code>WizardActivity</code> \u7684\u5177\u4f53\u5b9e\u73b0\uff0c\u5305\u542b\u786c\u7f16\u7801\u6b65\u9aa4</li> <li>Start Activity: \u5904\u7406\u547d\u4ee4\u89e6\u53d1\u5e76\u542f\u52a8\u5411\u5bfc</li> <li>Input Activity: \u5728\u5411\u5bfc\u6d41\u7a0b\u4e2d\u5904\u7406\u7528\u6237\u8f93\u5165</li> <li>State Accessors: \u7528\u4e8e\u72b6\u6001\u8bbf\u95ee\u7684\u7c7b\u578b\u5b89\u5168\u6269\u5c55\u51fd\u6570</li> </ol>"},{"location":"zh/FSM-and-Conversation-handling/#_22","title":"\u6d41\u7a0b","text":"<ol> <li>\u7528\u6237\u53d1\u9001 <code>/register</code> \u2192 Start Activity \u88ab\u8c03\u7528</li> <li>Start Activity \u521b\u5efa <code>WizardContext</code> \u5e76\u8c03\u7528 <code>wizardActivity.start(ctx)</code></li> <li><code>start()</code> \u8fdb\u5165\u521d\u59cb\u6b65\u9aa4\u5e76\u8bbe\u7f6e <code>inputListener</code> \u4ee5\u8ddf\u8e2a\u5f53\u524d\u6b65\u9aa4</li> <li>\u7528\u6237\u53d1\u9001\u6d88\u606f \u2192 Input Activity \u88ab\u8c03\u7528</li> <li>Input Activity \u8c03\u7528 <code>wizardActivity.handleInput(ctx)</code></li> <li><code>handleInput()</code> \u9a8c\u8bc1\u8f93\u5165\u3001\u6301\u4e45\u5316\u72b6\u6001\u5e76\u8f6c\u6362\u5230\u4e0b\u4e00\u6b65</li> <li>\u8fc7\u7a0b\u91cd\u590d\u76f4\u5230\u8fd4\u56de <code>Transition.Finish</code></li> </ol>"},{"location":"zh/FSM-and-Conversation-handling/#_23","title":"\u72b6\u6001\u6301\u4e45\u5316","text":"<ul> <li>\u72b6\u6001\u5728\u6210\u529f\u9a8c\u8bc1\u540e\u6301\u4e45\u5316\uff08\u8f6c\u6362\u4e4b\u524d\uff09</li> <li>\u6bcf\u4e2a\u6b65\u9aa4\u7684 <code>store()</code> \u8fd4\u56de\u503c\u4f7f\u7528\u5339\u914d\u7684 <code>WizardStateManager</code> \u4fdd\u5b58</li> <li>\u72b6\u6001\u6309\u7528\u6237\u548c\u804a\u5929\u4f5c\u7528\u57df (<code>UserChatReference</code>)</li> </ul>"},{"location":"zh/FSM-and-Conversation-handling/#_24","title":"\u6700\u4f73\u5b9e\u8df5","text":""},{"location":"zh/FSM-and-Conversation-handling/#1","title":"1. \u59cb\u7ec8\u63d0\u4f9b\u6e05\u6670\u7684\u63d0\u793a","text":"<pre><code>override suspend fun onEntry(ctx: WizardContext) {\n    message { \n        \"Please enter your email address:\\n\" +\n        \"(Format: user@example.com)\" \n    }.send(ctx.user, ctx.bot)\n}\n</code></pre>"},{"location":"zh/FSM-and-Conversation-handling/#2","title":"2. \u4f18\u96c5\u5730\u5904\u7406\u9a8c\u8bc1\u9519\u8bef","text":"<pre><code>override suspend fun onRetry(ctx: WizardContext) {\n    message { \n        \"Invalid email format. Please try again.\\n\" +\n        \"Example: user@example.com\" \n    }.send(ctx.user, ctx.bot)\n}\n</code></pre>"},{"location":"zh/FSM-and-Conversation-handling/#3","title":"3. \u4f7f\u7528\u7c7b\u578b\u5b89\u5168\u7684\u72b6\u6001\u8bbf\u95ee","text":"<p>\u4f18\u5148\u4f7f\u7528\u751f\u6210\u7684\u7c7b\u578b\u5b89\u5168\u65b9\u6cd5:</p> <pre><code>// \u2705 \u597d - \u7c7b\u578b\u5b89\u5168\nval name: String? = ctx.getState&lt;NameStep&gt;()\n\n// \u274c \u907f\u514d - \u5931\u53bb\u7c7b\u578b\u5b89\u5168\nval name = ctx.getState(NameStep::class) as? String\n</code></pre>"},{"location":"zh/FSM-and-Conversation-handling/#4","title":"4. \u4fdd\u6301\u6b65\u9aa4\u4e13\u6ce8","text":"<p>\u6bcf\u4e2a\u6b65\u9aa4\u5e94\u8be5\u6709\u5355\u4e00\u804c\u8d23:</p> <pre><code>// \u2705 \u597d - \u4e13\u6ce8\u7684\u6b65\u9aa4\nobject EmailStep : WizardStep {\n    // \u53ea\u5904\u7406\u7535\u5b50\u90ae\u4ef6\u6536\u96c6\n}\n\n// \u274c \u907f\u514d - \u903b\u8f91\u8fc7\u591a\nobject PersonalInfoStep : WizardStep {\n    // \u5904\u7406\u59d3\u540d\u3001\u7535\u5b50\u90ae\u4ef6\u3001\u7535\u8bdd\u3001\u5730\u5740...\n}\n</code></pre>"},{"location":"zh/FSM-and-Conversation-handling/#5","title":"5. \u4f7f\u7528\u6709\u610f\u4e49\u7684\u6b65\u9aa4\u540d\u79f0","text":"<pre><code>// \u2705 \u597d\nobject EmailVerificationStep : WizardStep\n\n// \u274c \u907f\u514d\nobject Step2 : WizardStep\n</code></pre>"},{"location":"zh/FSM-and-Conversation-handling/#6","title":"6. \u5728\u9700\u8981\u65f6\u6e05\u7406\u72b6\u6001","text":"<p>\u5982\u679c\u9700\u8981\u624b\u52a8\u6e05\u9664\u72b6\u6001:</p> <pre><code>object CancelStep : WizardStep {\n    override suspend fun onEntry(ctx: WizardContext) {\n        // \u6e05\u9664\u6240\u6709\u5411\u5bfc\u72b6\u6001\n        ctx.delState&lt;NameStep&gt;()\n        ctx.delState&lt;AgeStep&gt;()\n\n        message { \"Registration cancelled.\" }.send(ctx.user, ctx.bot)\n    }\n}\n</code></pre>"},{"location":"zh/FSM-and-Conversation-handling/#_25","title":"\u603b\u7ed3","text":"<p>Wizard \u7cfb\u7edf\u63d0\u4f9b: - \u2705 \u7c7b\u578b\u5b89\u5168 \u7684\u72b6\u6001\u7ba1\u7406\uff0c\u7f16\u8bd1\u65f6\u68c0\u67e5 - \u2705 \u58f0\u660e\u5f0f \u7684\u6b65\u9aa4\u5b9a\u4e49\u4f5c\u4e3a\u5d4c\u5957\u7c7b - \u2705 \u7075\u6d3b \u7684\u8f6c\u6362\uff0c\u652f\u6301\u6761\u4ef6\u903b\u8f91 - \u2705 \u81ea\u52a8 \u7684\u4ee3\u7801\u751f\u6210\uff0c\u901a\u8fc7 KSP - \u2705 \u96c6\u6210 \u5230\u73b0\u6709\u7684 Activity \u7cfb\u7edf - \u2705 \u53ef\u63d2\u62d4 \u7684\u72b6\u6001\u5b58\u50a8\u540e\u7aef</p> <p>\u5f00\u59cb\u6784\u5efa\u5411\u5bfc\uff0c\u901a\u8fc7\u4f7f\u7528 <code>@WizardHandler</code> \u6ce8\u89e3\u7c7b\u5e76\u5b9a\u4e49\u6b65\u9aa4\u4f5c\u4e3a\u5d4c\u5957 <code>WizardStep</code> \u5bf9\u8c61!</p>"},{"location":"zh/Guards/#_1","title":"\u4ecb\u7ecd","text":"<p>Guards \u662f\u5f00\u53d1\u8005\u521b\u5efa\u673a\u5668\u4eba\u65f6\u7684\u4e00\u9879\u91cd\u8981\u529f\u80fd\u3002\u8fd9\u4e9b guards \u4f5c\u4e3a\u6267\u884c\u524d\u68c0\u67e5\uff0c\u7528\u4e8e\u786e\u5b9a\u662f\u5426\u5e94\u8be5\u8c03\u7528\u7279\u5b9a\u547d\u4ee4\u3002\u901a\u8fc7\u5b9e\u65bd\u8fd9\u4e9b\u68c0\u67e5\uff0c\u5f00\u53d1\u8005\u53ef\u4ee5\u589e\u5f3a\u673a\u5668\u4eba\u7684\u529f\u80fd\u6027\u3001\u5b89\u5168\u6027\u548c\u7528\u6237\u4f53\u9a8c\u3002</p>"},{"location":"zh/Guards/#activity-guards","title":"Activity Guards \u7684\u76ee\u7684","text":"<p>Activity Guards \u7684\u4e3b\u8981\u76ee\u7684\u662f\u786e\u4fdd\u53ea\u6709\u6388\u6743\u7528\u6237\u6216\u7279\u5b9a\u6761\u4ef6\u624d\u80fd\u89e6\u53d1\u6d3b\u52a8\u3002</p> <p>\u8fd9\u53ef\u4ee5\u9632\u6b62\u6ee5\u7528\uff0c\u7ef4\u62a4\u673a\u5668\u4eba\u7684\u5b8c\u6574\u6027\uff0c\u5e76\u7b80\u5316\u4ea4\u4e92\u3002</p>"},{"location":"zh/Guards/#_2","title":"\u5e38\u89c1\u7528\u4f8b","text":"<ol> <li>\u8ba4\u8bc1\u548c\u6388\u6743\uff1a\u786e\u4fdd\u53ea\u6709\u7279\u5b9a\u7528\u6237\u53ef\u4ee5\u8bbf\u95ee\u7279\u5b9a\u547d\u4ee4\u3002</li> <li>\u524d\u7f6e\u6761\u4ef6\u68c0\u67e5\uff1a\u5728\u6267\u884c\u6d3b\u52a8\u4e4b\u524d\u9a8c\u8bc1\u662f\u5426\u6ee1\u8db3\u67d0\u4e9b\u6761\u4ef6\uff08\u4f8b\u5982\uff0c\u786e\u4fdd\u7528\u6237\u5904\u4e8e\u7279\u5b9a\u72b6\u6001\u6216\u4e0a\u4e0b\u6587\u4e2d\uff09\u3002</li> <li>\u4e0a\u4e0b\u6587 Guards\uff1a\u6839\u636e\u5f53\u524d\u804a\u5929\u6216\u7528\u6237\u72b6\u6001\u8fdb\u884c\u51b3\u7b56\u3002</li> </ol>"},{"location":"zh/Guards/#_3","title":"\u5b9e\u73b0\u7b56\u7565","text":"<p>\u5b9e\u73b0 Telegram Command Guards \u901a\u5e38\u6d89\u53ca\u7f16\u5199\u5c01\u88c5\u6bcf\u4e2a guard \u903b\u8f91\u7684\u51fd\u6570\u6216\u65b9\u6cd5\u3002\u4ee5\u4e0b\u662f\u5e38\u89c1\u7b56\u7565\uff1a</p> <ol> <li>\u7528\u6237\u89d2\u8272\u68c0\u67e5\uff1a</li> <li> <p>\u786e\u4fdd\u7528\u6237\u5177\u6709\u6267\u884c\u547d\u4ee4\u6240\u9700\u7684\u89d2\u8272\uff08\u4f8b\u5982\uff0c\u7ba1\u7406\u5458\u3001\u7248\u4e3b\uff09\u4e4b\u524d\u6267\u884c\u547d\u4ee4\u3002       <pre><code> override suspend fun condition(user: User?, update: ProcessedUpdate, bot: TelegramBot): Boolean {\n  // \u68c0\u67e5\u7528\u6237\u662f\u5426\u4e3a\u7ed9\u5b9a\u804a\u5929\u4e2d\u7684\u7ba1\u7406\u5458\n }\n</code></pre></p> </li> <li> <p>\u72b6\u6001\u9a8c\u8bc1\uff1a</p> </li> <li> <p>\u5728\u5141\u8bb8\u547d\u4ee4\u6267\u884c\u4e4b\u524d\u68c0\u67e5\u7528\u6237\u72b6\u6001\u3002      <pre><code>override suspend fun condition(user: User?, update: ProcessedUpdate, bot: TelegramBot): Boolean {\n   return bot.userData[user.id, \"data\"] == requiredState\n}\n</code></pre></p> </li> <li> <p>\u81ea\u5b9a\u4e49 Guards\uff1a</p> </li> <li>\u6839\u636e\u7279\u5b9a\u9700\u6c42\u521b\u5efa\u81ea\u5b9a\u4e49\u903b\u8f91\u3002      <pre><code>override suspend fun condition(user: User?, update: ProcessedUpdate, bot: TelegramBot): Boolean {\n   // \u81ea\u5b9a\u4e49\u903b\u8f91\u6765\u786e\u5b9a\u662f\u5426\u5e94\u8be5\u6267\u884c\u547d\u4ee4\n}\n</code></pre></li> </ol>"},{"location":"zh/Guards/#guards-activities","title":"\u5c06 Guards \u4e0e Activities \u96c6\u6210","text":"<p>\u8981\u5c06\u8fd9\u4e9b Guards \u4e0e\u673a\u5668\u4eba\u547d\u4ee4\u96c6\u6210\uff0c\u60a8\u53ef\u4ee5\u521b\u5efa\u4e00\u4e2a guard \u6765\u68c0\u67e5\u8fd9\u4e9b\u6761\u4ef6\uff0c\u7136\u540e\u518d\u8c03\u7528\u547d\u4ee4\u5904\u7406\u7a0b\u5e8f\u3002</p>"},{"location":"zh/Guards/#_4","title":"\u5b9e\u73b0\u793a\u4f8b","text":"<pre><code>// \u5728\u67d0\u4e2a\u5730\u65b9\u5b9a\u4e49\u5b9e\u73b0 Guard \u63a5\u53e3\u7684 guard \u7c7b\nobject YourGuard : Guard {\n    override suspend fun condition(user: User?, update: ProcessedUpdate, bot: TelegramBot): Boolean {\n        // \u5728\u6b64\u5904\u7f16\u5199\u6761\u4ef6\n    }\n}\n\n// ...\n\n@CommandHandler([\"yourCommand\"])\n@Guard(YourGuard::class) // \u4e5f\u652f\u6301 InputHandler\nfun command(bot: TelegramBot) {\n   // \u547d\u4ee4\u4e3b\u4f53\n}\n</code></pre>"},{"location":"zh/Guards/#_5","title":"\u6700\u4f73\u5b9e\u8df5","text":"<ul> <li>\u6a21\u5757\u5316\uff1a\u4fdd\u6301 guard \u903b\u8f91\u6a21\u5757\u5316\u5e76\u4e0e activities \u5206\u79bb\u3002</li> <li>\u53ef\u91cd\u7528\u6027\uff1a\u7f16\u5199\u53ef\u91cd\u7528\u7684 guard \u51fd\u6570\uff0c\u53ef\u4ee5\u8f7b\u677e\u5e94\u7528\u4e8e\u4e0d\u540c\u7684\u547d\u4ee4/\u8f93\u5165\u3002</li> <li>\u6548\u7387\uff1a\u4f18\u5316 guard \u68c0\u67e5\u4ee5\u6700\u5c0f\u5316\u6027\u80fd\u5f00\u9500\u3002</li> <li>\u7528\u6237\u53cd\u9988\uff1a\u5f53\u547d\u4ee4\u88ab guard \u963b\u6b62\u65f6\uff0c\u5411\u7528\u6237\u63d0\u4f9b\u6e05\u6670\u7684\u53cd\u9988\u3002</li> </ul>"},{"location":"zh/Guards/#_6","title":"\u7ed3\u8bba","text":"<p>Activity Guards \u662f\u7ba1\u7406\u673a\u5668\u4eba\u547d\u4ee4/\u8f93\u5165\u6267\u884c\u7684\u5f3a\u5927\u5de5\u5177\u3002</p> <p>\u901a\u8fc7\u5b9e\u65bd\u5f3a\u5927\u7684 guard \u673a\u5236\uff0c\u5f00\u53d1\u8005\u53ef\u4ee5\u786e\u4fdd\u4ed6\u4eec\u7684\u673a\u5668\u4eba\u5b89\u5168\u9ad8\u6548\u5730\u8fd0\u884c\uff0c\u63d0\u4f9b\u66f4\u597d\u7684\u7528\u6237\u4f53\u9a8c\u3002</p>"},{"location":"zh/Guards/#_7","title":"\u53e6\u8bf7\u53c2\u9605","text":"<ul> <li>Activities and Proccessors</li> <li>Update parsing</li> <li>Actions</li> <li>Activity invocation</li> </ul>"},{"location":"zh/Handlers/","title":"\u5904\u7406\u7a0b\u5e8f","text":""},{"location":"zh/Handlers/#_1","title":"\u5904\u7406\u7a0b\u5e8f\u79cd\u7c7b","text":"<p>\u5728\u673a\u5668\u4eba\u5f00\u53d1\u4e2d\uff0c\u7279\u522b\u662f\u5728\u6d89\u53ca\u7528\u6237\u4ea4\u4e92\u7684\u7cfb\u7edf\u4e2d\uff0c\u9ad8\u6548\u5730\u7ba1\u7406\u548c\u5904\u7406\u547d\u4ee4\u548c\u4e8b\u4ef6\u81f3\u5173\u91cd\u8981\u3002</p> <p>\u8fd9\u4e9b\u6ce8\u89e3\u6807\u8bb0\u4e86\u8bbe\u8ba1\u7528\u4e8e\u5904\u7406\u7279\u5b9a\u547d\u4ee4\u3001\u8f93\u5165\u6216\u66f4\u65b0\u7684\u51fd\u6570\uff0c\u5e76\u63d0\u4f9b\u5143\u6570\u636e\uff0c\u5982\u547d\u4ee4\u5173\u952e\u5b57\u3001\u4f5c\u7528\u57df\u548c\u4fdd\u62a4\u3002</p>"},{"location":"zh/Handlers/#_2","title":"\u6ce8\u89e3\u6982\u8ff0","text":""},{"location":"zh/Handlers/#commandhandler","title":"CommandHandler","text":"<p><code>CommandHandler</code> \u6ce8\u89e3\u7528\u4e8e\u6807\u8bb0\u5904\u7406\u7279\u5b9a\u547d\u4ee4\u7684\u51fd\u6570\u3002\u6b64\u6ce8\u89e3\u5305\u542b\u5b9a\u4e49\u547d\u4ee4\u5173\u952e\u5b57\u548c\u4f5c\u7528\u57df\u7684\u5c5e\u6027\u3002</p> <ul> <li>value: \u6307\u5b9a\u4e0e\u547d\u4ee4\u5173\u8054\u7684\u5173\u952e\u5b57\u3002</li> <li>scope: \u786e\u5b9a\u5c06\u68c0\u67e5\u547d\u4ee4\u7684\u4e0a\u4e0b\u6587\u6216\u4f5c\u7528\u57df\u3002</li> </ul> <pre><code>@CommandHandler([\"text\"])\nsuspend fun test(user: User, bot: TelegramBot) {\n    //...\n}\n</code></pre>"},{"location":"zh/Handlers/#commandhandlercallbackquery","title":"CommandHandler.CallbackQuery","text":"<p><code>CommandHandler</code> \u6ce8\u89e3\u7684\u4e13\u95e8\u7248\u672c\uff0c\u4e13\u95e8\u7528\u4e8e\u5904\u7406\u56de\u8c03\u67e5\u8be2\u3002\u5b83\u5305\u542b\u4e0e <code>CommandHandler</code> \u7c7b\u4f3c\u7684\u5c5e\u6027\uff0c\u4f46\u4e13\u6ce8\u4e8e\u56de\u8c03\u76f8\u5173\u7684\u547d\u4ee4\u3002</p> <p>\u5b83\u5b9e\u9645\u4e0a\u4e0e\u9884\u8bbe <code>UpdateType.CALLBACK_QUERY</code> \u4f5c\u7528\u57df\u7684 <code>@CommandHandler</code> \u76f8\u540c\u3002</p> <ul> <li>value: \u6307\u5b9a\u4e0e\u547d\u4ee4\u5173\u8054\u7684\u5173\u952e\u5b57\u3002</li> <li>autoAnswer: \u81ea\u52a8\u56de\u590d <code>callbackQuery</code>\uff08\u5728\u5904\u7406\u4e4b\u524d\u8c03\u7528 <code>answerCallbackQuery</code>\uff09\u3002</li> </ul> <pre><code>@CommandHandler.CallbackQuery([\"text\"])\nsuspend fun test(user: User, bot: TelegramBot) {\n    //...\n}\n</code></pre>"},{"location":"zh/Handlers/#commonhandler","title":"CommonHandler","text":"<p><code>CommonHandler</code> \u6ce8\u89e3\u7528\u4e8e\u5904\u7406\u4f18\u5148\u7ea7\u4f4e\u4e8e <code>CommandHandler</code> \u548c <code>InputHandler</code> \u7684\u547d\u4ee4\u7684\u51fd\u6570\u3002\u5b83\u5728\u6e90\u7ea7\u522b\u4f7f\u7528\uff0c\u5e76\u63d0\u4f9b\u4e86\u4e00\u79cd\u7075\u6d3b\u7684\u65b9\u5f0f\u6765\u5b9a\u4e49\u901a\u7528\u547d\u4ee4\u5904\u7406\u7a0b\u5e8f\u3002</p> <p>\u8bf7\u6ce8\u610f\uff0c\u4f18\u5148\u7ea7\u4ec5\u5728 <code>@CommonHandler</code> \u672c\u8eab\u5185\u8d77\u4f5c\u7528\uff08\u5373\u4e0d\u5f71\u54cd\u5176\u4ed6\u5904\u7406\u7a0b\u5e8f\uff09\u3002</p>"},{"location":"zh/Handlers/#commonhandlertext","title":"CommonHandler.Text","text":"<p>\u6b64\u6ce8\u89e3\u6307\u5b9a\u9488\u5bf9\u66f4\u65b0\u7684\u6587\u672c\u5339\u914d\u3002\u5b83\u5305\u542b\u5b9a\u4e49\u5339\u914d\u6587\u672c\u3001\u7b5b\u9009\u6761\u4ef6\u3001\u4f18\u5148\u7ea7\u548c\u4f5c\u7528\u57df\u7684\u5c5e\u6027\u3002</p> <ul> <li>value: \u8981\u4e0e\u4f20\u5165\u66f4\u65b0\u5339\u914d\u7684\u6587\u672c\u3002</li> <li>filter: \u5b9a\u4e49\u5339\u914d\u8fc7\u7a0b\u4e2d\u4f7f\u7528\u7684\u6761\u4ef6\u7684\u7c7b\u3002</li> <li>priority: \u5904\u7406\u7a0b\u5e8f\u7684\u4f18\u5148\u7ea7\u7ea7\u522b\uff0c0 \u4e3a\u6700\u9ad8\u4f18\u5148\u7ea7\u3002</li> <li>scope: \u5c06\u68c0\u67e5\u6587\u672c\u5339\u914d\u7684\u4e0a\u4e0b\u6587\u6216\u4f5c\u7528\u57df\u3002</li> </ul> <pre><code>@CommonHandler.Text([\"text\"], filter = isNewUserFilter::class, priority = 10)\nsuspend fun test(user: User, bot: TelegramBot) {\n    //...\n}\n</code></pre>"},{"location":"zh/Handlers/#commonhandlerregex","title":"CommonHandler.Regex","text":"<p>\u4e0e <code>CommonHandler.Text</code> \u7c7b\u4f3c\uff0c\u6b64\u6ce8\u89e3\u7528\u4e8e\u57fa\u4e8e\u6b63\u5219\u8868\u8fbe\u5f0f\u5339\u914d\u66f4\u65b0\u3002\u5b83\u5305\u542b\u5b9a\u4e49\u6b63\u5219\u8868\u8fbe\u5f0f\u6a21\u5f0f\u3001\u9009\u9879\u3001\u7b5b\u9009\u6761\u4ef6\u3001\u4f18\u5148\u7ea7\u548c\u4f5c\u7528\u57df\u7684\u5c5e\u6027\u3002</p> <ul> <li>value: \u7528\u4e8e\u5339\u914d\u7684\u6b63\u5219\u8868\u8fbe\u5f0f\u6a21\u5f0f\u3002</li> <li>options: \u4fee\u6539\u6b63\u5219\u8868\u8fbe\u5f0f\u6a21\u5f0f\u884c\u4e3a\u7684\u6b63\u5219\u8868\u8fbe\u5f0f\u9009\u9879\u3002</li> <li>filter: \u5b9a\u4e49\u5339\u914d\u8fc7\u7a0b\u4e2d\u4f7f\u7528\u7684\u6761\u4ef6\u7684\u7c7b\u3002</li> <li>priority: \u5904\u7406\u7a0b\u5e8f\u7684\u4f18\u5148\u7ea7\u7ea7\u522b\uff0c0 \u4e3a\u6700\u9ad8\u4f18\u5148\u7ea7\u3002</li> <li>scope: \u5c06\u68c0\u67e5\u6b63\u5219\u8868\u8fbe\u5f0f\u5339\u914d\u7684\u4e0a\u4e0b\u6587\u6216\u4f5c\u7528\u57df\u3002</li> </ul> <pre><code>@CommonHandler.Regex(\"^\\d+$\", scope = [UpdateType.EDITED_MESSAGE])\nsuspend fun test(update: EditedMessageUpdate, user: User, bot: TelegramBot) {\n    //...\n}\n</code></pre>"},{"location":"zh/Handlers/#inputhandler","title":"InputHandler","text":"<p><code>InputHandler</code> \u6ce8\u89e3\u6807\u8bb0\u5904\u7406\u7279\u5b9a\u8f93\u5165\u4e8b\u4ef6\u7684\u51fd\u6570\u3002\u5b83\u7528\u4e8e\u5728\u8fd0\u884c\u65f6\u5904\u7406\u8f93\u5165\u7684\u51fd\u6570\uff0c\u5e76\u5305\u542b\u5b9a\u4e49\u8f93\u5165\u5173\u952e\u5b57\u548c\u4f5c\u7528\u57df\u7684\u5c5e\u6027\u3002</p> <ul> <li>value: \u6307\u5b9a\u4e0e\u8f93\u5165\u4e8b\u4ef6\u5173\u8054\u7684\u5173\u952e\u5b57\u3002</li> </ul> <pre><code>@InputHandler(\"text\")\nsuspend fun test(update: ProcessedUpdate, user: User, bot: TelegramBot) {\n    //...\n}\n</code></pre>"},{"location":"zh/Handlers/#unprocessedhandler","title":"UnprocessedHandler","text":"<p><code>UnprocessedHandler</code> \u6ce8\u89e3\u7528\u4e8e\u6807\u8bb0\u5904\u7406\u672a\u88ab\u5176\u4ed6\u5904\u7406\u7a0b\u5e8f\u5904\u7406\u7684\u66f4\u65b0\u7684\u51fd\u6570\u3002\u5b83\u786e\u4fdd\u4efb\u4f55\u672a\u5904\u7406\u7684\u66f4\u65b0\u90fd\u80fd\u5f97\u5230\u9002\u5f53\u7ba1\u7406\uff0c\u8fd9\u79cd\u5904\u7406\u7a0b\u5e8f\u7c7b\u578b\u53ea\u6709\u4e00\u4e2a\u5904\u7406\u70b9\u3002</p> <pre><code>@UnprocessedHandler\nsuspend fun test(update: ProcessedUpdate, user: User, bot: TelegramBot) {\n    //...\n}\n</code></pre>"},{"location":"zh/Handlers/#updatehandler","title":"UpdateHandler","text":"<p><code>UpdateHandler</code> \u6ce8\u89e3\u6807\u8bb0\u5904\u7406\u7279\u5b9a\u7c7b\u578b\u4f20\u5165\u66f4\u65b0\u7684\u51fd\u6570\u3002\u5b83\u63d0\u4f9b\u4e86\u4e00\u79cd\u7cfb\u7edf\u5730\u5206\u7c7b\u548c\u5904\u7406\u4e0d\u540c\u66f4\u65b0\u7c7b\u578b\u7684\u65b9\u6cd5\u3002</p> <ul> <li>type: \u6307\u5b9a\u5904\u7406\u7a0b\u5e8f\u51fd\u6570\u5c06\u5904\u7406\u7684\u66f4\u65b0\u7c7b\u578b\u3002</li> </ul> <pre><code>@UpdateHandler([UpdateType.PRE_CHECKOUT_QUERY])\nsuspend fun test(update: PreCheckoutQueryUpdate, user: User, bot: TelegramBot) {\n    //...\n}\n</code></pre>"},{"location":"zh/Handlers/#_3","title":"\u5904\u7406\u7a0b\u5e8f\u4f34\u968f\u6ce8\u89e3","text":"<p>\u8fd8\u6709\u4e00\u4e9b\u989d\u5916\u7684\u6ce8\u89e3\u662f\u5904\u7406\u7a0b\u5e8f\u7684\u53ef\u9009\u6ce8\u89e3\uff0c\u8865\u5145\u4e86\u5904\u7406\u7a0b\u5e8f\u672c\u8eab\u7684\u53ef\u9009\u884c\u4e3a\u3002</p> <p>\u5b83\u4eec\u53ef\u4ee5\u540c\u65f6\u653e\u7f6e\u5728\u5e94\u7528\u5904\u7406\u7a0b\u5e8f\u7684\u51fd\u6570\u548c\u7c7b\u4e0a\uff0c\u5728\u540e\u4e00\u79cd\u60c5\u51b5\u4e0b\uff0c\u5b83\u4eec\u5c06\u81ea\u52a8\u5e94\u7528\u4e8e\u8be5\u7c7b\u4e2d\u7684\u6240\u6709\u5904\u7406\u7a0b\u5e8f\uff0c\u4f46\u5982\u679c\u9700\u8981\uff0c\u53ef\u4ee5\u4e3a\u67d0\u4e9b\u51fd\u6570\u8bbe\u7f6e\u5355\u72ec\u7684\u884c\u4e3a\u3002</p> <p>\u5373\uff0c\u5e94\u7528\u7684\u4f18\u5148\u7ea7\u4e3a <code>Function</code> &gt; <code>Class</code>\uff0c\u5176\u4e2d\u51fd\u6570\u5177\u6709\u66f4\u9ad8\u7684\u4f18\u5148\u7ea7\u3002</p>"},{"location":"zh/Handlers/#_4","title":"\u901f\u7387\u9650\u5236","text":"<p>\u6b64\u5916\uff0c\u8ba9\u6211\u4eec\u8fd8\u62ab\u9732\u6ce8\u89e3\u4e2d\u63cf\u8ff0\u7684\u901f\u7387\u9650\u5236\u673a\u5236\u3002</p> <p>\u60a8\u53ef\u4ee5\u4e3a\u6bcf\u4e2a\u7528\u6237\u8bbe\u7f6e\u4e00\u822c\u9650\u5236\uff1a</p> <pre><code>// ...\nval bot = TelegramBot(\"BOT_TOKEN\") {\n    rateLimiter { // \u4e00\u822c\u9650\u5236\n        limits = RateLimits(period = 10000, rate = 5)\n    }\n}\n</code></pre>"},{"location":"zh/Handlers/#_5","title":"\u7279\u5b9a\u5904\u7406\u7a0b\u5e8f\u7684\u901f\u7387\u9650\u5236","text":"<p>\u53ef\u4ee5\u4f7f\u7528 <code>RateLimits</code> \u6ce8\u89e3\u5b9a\u4e49\u67d0\u4e9b\u64cd\u4f5c\u7684\u9650\u5236\uff0c\u652f\u6301 <code>@CommandHandler</code>\u3001<code>@CommandHandler.CallbackQuery</code>\u3001<code>@InputHandler</code>\u3001<code>@CommonHandler</code>\u3002</p> <pre><code>@CommandHandler([\"/start\"])\n@RateLimits(period = 1000L, rate = 1L)\nsuspend fun start(user: User, bot: TelegramBot) {\n    // ...\n}\n</code></pre>"},{"location":"zh/Handlers/#_6","title":"\u4fdd\u62a4","text":"<p>\u60a8\u53ef\u4ee5\u5355\u72ec\u5b9a\u4e49\u4fdd\u62a4\u6765\u63a7\u5236\u5bf9\u5904\u7406\u7a0b\u5e8f\u7684\u8bbf\u95ee\uff0c\u652f\u6301 <code>@CommandHandler</code>\u3001<code>@CommandHandler.CallbackQuery</code>\u3001<code>@InputHandler</code>\uff1a</p> <pre><code>@CommandHandler([\"text\"])\n@Guard(isAdminGuard::class)\nsuspend fun test(user: User, bot: TelegramBot) {\n    //...\n}\n</code></pre>"},{"location":"zh/Handlers/#_7","title":"\u53c2\u6570\u89e3\u6790\u5668","text":"<p>\u60a8\u53ef\u4ee5\u5355\u72ec\u5b9a\u4e49\u81ea\u5b9a\u4e49\u53c2\u6570\u89e3\u6790\u5668\u6765\u66f4\u6539\u5904\u7406\u7a0b\u5e8f\u7684\u53c2\u6570\u89e3\u6790\u884c\u4e3a\uff0c\u652f\u6301 <code>@CommandHandler</code>\u3001<code>@CommandHandler.CallbackQuery</code>\u3001<code>@CommonHandler</code>\uff1a</p> <pre><code>@CommandHandler([\"text\"])\n@ArgParser(SpaceArgParser::class)\nsuspend fun test(user: User, bot: TelegramBot) {\n    //...\n}\n</code></pre> <p>\u53e6\u8bf7\u53c2\u9605 <code>defaultArgParser</code></p>"},{"location":"zh/Handlers/#_8","title":"\u7ed3\u8bba","text":"<p>\u8fd9\u4e9b\u6ce8\u89e3\u4e3a\u5904\u7406\u547d\u4ee4\u3001\u8f93\u5165\u548c\u4e8b\u4ef6\u63d0\u4f9b\u4e86\u5f3a\u5927\u800c\u7075\u6d3b\u7684\u5de5\u5177\uff0c\u540c\u65f6\u5141\u8bb8\u5355\u72ec\u914d\u7f6e\u901f\u7387\u9650\u5236\u548c\u4fdd\u62a4\uff0c\u589e\u5f3a\u4e86\u673a\u5668\u4eba\u5f00\u53d1\u7684\u6574\u4f53\u7ed3\u6784\u548c\u53ef\u7ef4\u62a4\u6027\u3002</p>"},{"location":"zh/Handlers/#_9","title":"\u53e6\u8bf7\u53c2\u9605","text":"<ul> <li>\u6d3b\u52a8\u548c\u5904\u7406\u5668</li> <li>\u6d3b\u52a8\u8c03\u7528</li> <li>FSM \u548c\u4f1a\u8bdd\u5904\u7406</li> <li>\u66f4\u65b0\u89e3\u6790</li> <li>\u52a9\u624b</li> </ul>"},{"location":"zh/Interceptors-%28middleware%29/","title":"\u62e6\u622a\u5668\uff08\u4e2d\u95f4\u4ef6\uff09","text":""},{"location":"zh/Interceptors-%28middleware%29/#_1","title":"\u62e6\u622a\u5668\uff1a\u673a\u5668\u4eba\u7684\u6a2a\u5207\u903b\u8f91","text":"<p>\u6784\u5efa Telegram \u673a\u5668\u4eba\u65f6\uff0c\u4f60\u7ecf\u5e38\u9700\u8981\u5728\u5904\u7406\u7a0b\u5e8f\u4e2d\u91cd\u590d\u8bbe\u7f6e\u3001\u68c0\u67e5\u6216\u6e05\u7406\u5de5\u4f5c\u3002\u62e6\u622a\u5668\u5141\u8bb8\u4f60\u63d2\u5165\u5171\u4eab\u903b\u8f91\uff0c\u4f7f\u5904\u7406\u7a0b\u5e8f\u4fdd\u6301\u4e13\u6ce8\u548c\u53ef\u7ef4\u62a4\u6027\u3002</p> <p>\u4ee5\u4e0b\u662f\u62e6\u622a\u5668\u5728 telegram-bot \u4e2d\u7684\u5de5\u4f5c\u539f\u7406\u4ee5\u53ca\u5982\u4f55\u4f7f\u7528\u5b83\u4eec\u3002</p>"},{"location":"zh/Interceptors-%28middleware%29/#_2","title":"\u4ec0\u4e48\u662f\u62e6\u622a\u5668\uff1f\uff08\u7b80\u5355\u89e3\u91ca\uff09","text":"<p>\u62e6\u622a\u5668\u662f\u5728\u66f4\u65b0\u5904\u7406\u7ba1\u9053\u7684\u7279\u5b9a\u70b9\u8fd0\u884c\u7684\u51fd\u6570\u3002\u5b83\u4eec\u5141\u8bb8\u4f60\uff1a - \u68c0\u67e5\u548c\u4fee\u6539\u5904\u7406\u4e0a\u4e0b\u6587 - \u6dfb\u52a0\u6a2a\u5207\u903b\u8f91\uff08\u65e5\u5fd7\u8bb0\u5f55\u3001\u8ba4\u8bc1\u3001\u6307\u6807\uff09 - \u5982\u679c\u9700\u8981\uff0c\u63d0\u524d\u505c\u6b62\u5904\u7406 - \u5904\u7406\u5b8c\u6210\u540e\u6e05\u7406\u8d44\u6e90</p> <p>\u53ef\u4ee5\u5c06\u62e6\u622a\u5668\u89c6\u4e3a\u6bcf\u4e2a\u66f4\u65b0\u5728\u5904\u7406\u7a0b\u5e8f\u6267\u884c\u4e4b\u524d\u3001\u671f\u95f4\u548c\u4e4b\u540e\u90fd\u8981\u901a\u8fc7\u7684\u68c0\u67e5\u70b9\u3002</p>"},{"location":"zh/Interceptors-%28middleware%29/#_3","title":"\u5904\u7406\u7ba1\u9053","text":"<p>\u673a\u5668\u4eba\u901a\u8fc7\u5305\u542b\u4e03\u4e2a\u9636\u6bb5\u7684\u7ba1\u9053\u5904\u7406\u66f4\u65b0\uff1a</p> \u9636\u6bb5 \u4f55\u65f6\u8fd0\u884c \u4f60\u53ef\u4ee5\u7528\u5b83\u505a\u4ec0\u4e48 Setup \u66f4\u65b0\u5230\u8fbe\u540e\u7acb\u5373\uff0c\u5728\u4efb\u4f55\u5904\u7406\u4e4b\u524d \u2714 \u5168\u5c40\u901f\u7387\u9650\u5236\u2714 \u8fc7\u6ee4\u5783\u573e\u4fe1\u606f\u6216\u683c\u5f0f\u9519\u8bef\u7684\u66f4\u65b0\u2714 \u521d\u59cb\u65e5\u5fd7\u8bb0\u5f55\u2714 \u8bbe\u7f6e\u5171\u4eab\u4e0a\u4e0b\u6587 Parsing \u5728 Setup \u4e4b\u540e\uff0c\u63d0\u53d6\u547d\u4ee4\u548c\u53c2\u6570 \u2714 \u81ea\u5b9a\u4e49\u547d\u4ee4\u89e3\u6790\u2714 \u4f7f\u7528\u89e3\u6790\u6570\u636e\u4e30\u5bcc\u4e0a\u4e0b\u6587\u2714 \u9a8c\u8bc1\u66f4\u65b0\u7ed3\u6784 Match \u627e\u5230\u5408\u9002\u7684\u5904\u7406\u7a0b\u5e8f\uff08Command/Input/Common\uff09 \u2714 \u8986\u76d6\u5904\u7406\u7a0b\u5e8f\u9009\u62e9\u2714 \u81ea\u5b9a\u4e49\u8f93\u5165\u5904\u7406\u903b\u8f91\u2714 \u8bb0\u5f55\u5339\u914d\u7684\u5904\u7406\u7a0b\u5e8f Validation \u627e\u5230\u5904\u7406\u7a0b\u5e8f\u540e\uff0c\u8c03\u7528\u4e4b\u524d \u2714 \u5904\u7406\u7a0b\u5e8f\u7279\u5b9a\u7684\u6743\u9650\u2714 \u6bcf\u4e2a\u5904\u7406\u7a0b\u5e8f\u7684\u901f\u7387\u9650\u5236\u2714 \u4fdd\u62a4\u68c0\u67e5\u2714 \u5982\u679c\u6761\u4ef6\u4e0d\u6ee1\u8db3\u5219\u53d6\u6d88\u5904\u7406 PreInvoke \u5904\u7406\u7a0b\u5e8f\u8fd0\u884c\u524d\u7acb\u5373 \u2714 \u6700\u540e\u68c0\u67e5\u2714 \u542f\u52a8\u8ba1\u65f6\u5668/\u6307\u6807\u2714 \u4e3a\u5904\u7406\u7a0b\u5e8f\u4e30\u5bcc\u4e0a\u4e0b\u6587\u2714 \u4fee\u6539\u5904\u7406\u7a0b\u5e8f\u884c\u4e3a Invoke \u8fd9\u91cc\u6267\u884c\u5904\u7406\u7a0b\u5e8f \u2714 \u5305\u88c5\u5904\u7406\u7a0b\u5e8f\u6267\u884c\u2714 \u9519\u8bef\u5904\u7406\u2714 \u8bb0\u5f55\u5904\u7406\u7a0b\u5e8f\u7ed3\u679c PostInvoke \u5904\u7406\u7a0b\u5e8f\u5b8c\u6210\u540e\uff08\u6210\u529f\u6216\u5931\u8d25\uff09 \u2714 \u6e05\u7406\u8d44\u6e90\u2714 \u8bb0\u5f55\u7ed3\u679c\u2714 \u5728\u9519\u8bef\u65f6\u53d1\u9001\u56de\u9000\u6d88\u606f\u2714 \u5728\u8fd4\u56de\u524d\u4fee\u6539\u7ed3\u679c"},{"location":"zh/Interceptors-%28middleware%29/#_4","title":"\u521b\u5efa\u62e6\u622a\u5668","text":"<p>\u62e6\u622a\u5668\u662f\u4e00\u4e2a\u7b80\u5355\u7684\u51fd\u6570\uff0c\u63a5\u6536 <code>ProcessingContext</code>\uff1a</p> <pre><code>import eu.vendeli.tgbot.core.PipelineInterceptor\nimport eu.vendeli.tgbot.types.component.ProcessingContext\n\nval myInterceptor: PipelineInterceptor = { context -&gt;\n    // \u4f60\u7684\u903b\u8f91\n    println(\"\u5904\u7406\u66f4\u65b0: ${context.update.updateId}\")\n}\n</code></pre> <p>\u6216\u8005\u4f7f\u7528 lambda\uff1a</p> <pre><code>val loggingInterceptor = PipelineInterceptor { context -&gt;\n    val logger = context.bot.config.loggerFactory.get(\"MyInterceptor\")\n    logger.info(\"\u5904\u7406\u66f4\u65b0 #${context.update.updateId}\")\n}\n</code></pre>"},{"location":"zh/Interceptors-%28middleware%29/#_5","title":"\u6ce8\u518c\u62e6\u622a\u5668","text":"<p>\u5728\u5904\u7406\u7ba1\u9053\u4e0a\u6ce8\u518c\u62e6\u622a\u5668\uff1a</p> <pre><code>suspend fun main() {\n    val bot = TelegramBot(\"BOT_TOKEN\")\n\n    // \u4e3a Setup \u9636\u6bb5\u6ce8\u518c\u62e6\u622a\u5668\n    bot.update.pipeline.intercept(ProcessingPipePhase.Setup) { context -&gt;\n        // \u68c0\u67e5\u7528\u6237\u662f\u5426\u88ab\u7981\u6b62\n        val user = context.update.userOrNull\n        if (user != null &amp;&amp; isBanned(user.id)) {\n            context.finish() // \u505c\u6b62\u5904\u7406\n            return@intercept\n        }\n    }\n\n    // \u4e3a PreInvoke \u9636\u6bb5\u6ce8\u518c\u62e6\u622a\u5668\n    bot.update.pipeline.intercept(ProcessingPipePhase.PreInvoke) { context -&gt;\n        val startTime = System.currentTimeMillis()\n        // \u5b58\u50a8\u5f00\u59cb\u65f6\u95f4\n    }\n\n    // \u4e3a PostInvoke \u9636\u6bb5\u6ce8\u518c\u62e6\u622a\u5668\n    bot.update.pipeline.intercept(ProcessingPipePhase.PostInvoke) { context -&gt;\n        val startTime = // \u83b7\u53d6\u5f00\u59cb\u65f6\u95f4\n        if (startTime != null) {\n            val duration = System.currentTimeMillis() - startTime\n            println(\"\u5904\u7406\u7a0b\u5e8f\u8017\u65f6 ${duration}ms\")\n        }\n    }\n\n    bot.handleUpdates()\n}\n</code></pre>"},{"location":"zh/Interceptors-%28middleware%29/#_6","title":"\u5b9e\u9645\u793a\u4f8b\uff1a\u8ba4\u8bc1\u548c\u6307\u6807","text":"<p>\u793a\u4f8b\uff1a\u9700\u8981\u8ba4\u8bc1\u7684\u673a\u5668\u4eba\uff0c\u7528\u4e8e\u7279\u5b9a\u547d\u4ee4\uff0c\u6d4b\u91cf\u5904\u7406\u7a0b\u5e8f\u6267\u884c\u65f6\u95f4\uff0c\u5e76\u8bb0\u5f55\u6240\u6709\u547d\u4ee4\u3002</p> <pre><code>suspend fun main() {\n    val bot = TelegramBot(\"BOT_TOKEN\")\n\n    // Setup \u9636\u6bb5\uff1a\u68c0\u67e5\u7528\u6237\u662f\u5426\u5df2\u8ba4\u8bc1\n    bot.update.pipeline.intercept(ProcessingPipePhase.Setup) { context -&gt;\n        val user = context.update.userOrNull ?: return@intercept\n\n        if (!isAuthenticated(user.id)) {\n            message { \"\u8bf7\u5148\u4f7f\u7528 /login \u8fdb\u884c\u8ba4\u8bc1\" }\n                .send(user, context.bot)\n            context.finish()\n        }\n    }\n\n    // PreInvoke \u9636\u6bb5\uff1a\u542f\u52a8\u8ba1\u65f6\u5668\u5e76\u68c0\u67e5\u6743\u9650\n    bot.update.pipeline.intercept(ProcessingPipePhase.PreInvoke) { context -&gt;\n        val activity = context.activity ?: return@intercept\n        val user = context.update.userOrNull ?: return@intercept\n\n        // \u68c0\u67e5\u7528\u6237\u662f\u5426\u5177\u6709\u6b64\u7279\u5b9a\u5904\u7406\u7a0b\u5e8f\u7684\u6743\u9650\n        if (!hasPermission(user.id, activity)) {\n            message { \"\u4f60\u6ca1\u6709\u6743\u9650\u4f7f\u7528\u6b64\u547d\u4ee4\u3002\" }\n                .send(user, context.bot)\n            context.finish()\n            return@intercept\n        }\n\n        // \u542f\u52a8\u8ba1\u65f6\u5668\n        // \u5b58\u50a8\u5f00\u59cb\u65f6\u95f4\n    }\n\n    // PostInvoke \u9636\u6bb5\uff1a\u8bb0\u5f55\u548c\u6e05\u7406\n    bot.update.pipeline.intercept(ProcessingPipePhase.PostInvoke) { context -&gt;\n        val activity = context.activity ?: return@intercept\n        val startTime = // \u83b7\u53d6\u5f00\u59cb\u65f6\u95f4\n\n        if (startTime != null) {\n            val duration = System.currentTimeMillis() - startTime\n            val logger = context.bot.config.loggerFactory.get(\"Metrics\")\n            logger.info(\n                \"\u5904\u7406\u7a0b\u5e8f ${activity::class.simpleName} \u8017\u65f6 ${duration}ms \" +\n                \"\u7528\u6237 ${context.update.userOrNull?.id}\"\n            )\n        }\n    }\n\n    bot.handleUpdates()\n}\n</code></pre>"},{"location":"zh/Interceptors-%28middleware%29/#processingcontext","title":"ProcessingContext","text":"<p><code>ProcessingContext</code> \u63d0\u4f9b\u4ee5\u4e0b\u8bbf\u95ee\uff1a</p> <ul> <li><code>update: ProcessedUpdate</code> - \u5f53\u524d\u6b63\u5728\u5904\u7406\u7684\u66f4\u65b0</li> <li><code>bot: TelegramBot</code> - \u673a\u5668\u4eba\u5b9e\u4f8b</li> <li><code>registry: ActivityRegistry</code> - \u6d3b\u52a8\u6ce8\u518c\u8868</li> <li><code>parsedInput: String</code> - \u89e3\u6790\u7684\u547d\u4ee4/\u8f93\u5165\u6587\u672c</li> <li><code>parameters: Map&lt;String, String&gt;</code> - \u89e3\u6790\u7684\u547d\u4ee4\u53c2\u6570</li> <li><code>activity: Activity?</code> - \u5df2\u89e3\u6790\u7684\u5904\u7406\u7a0b\u5e8f\uff08Match \u9636\u6bb5\u4e4b\u524d\u4e3a null\uff09</li> <li><code>shouldProceed: Boolean</code> - \u662f\u5426\u5e94\u7ee7\u7eed\u5904\u7406</li> <li><code>additionalContext: AdditionalContext</code> - \u989d\u5916\u4e0a\u4e0b\u6587\u6570\u636e</li> <li><code>finish()</code> - \u63d0\u524d\u505c\u6b62\u5904\u7406</li> </ul>"},{"location":"zh/Interceptors-%28middleware%29/#_7","title":"\u63d0\u524d\u505c\u6b62\u5904\u7406","text":"<p>\u8c03\u7528 <code>context.finish()</code> \u505c\u6b62\u5904\u7406\uff1a</p> <pre><code>bot.update.pipeline.intercept(ProcessingPipePhase.Validation) { context -&gt;\n    if (someCondition) {\n        context.finish() // \u540e\u7eed\u9636\u6bb5\u4e0d\u4f1a\u6267\u884c\n    }\n}\n</code></pre>"},{"location":"zh/Interceptors-%28middleware%29/#_8","title":"\u5b58\u50a8\u81ea\u5b9a\u4e49\u6570\u636e","text":"<p>\u4f7f\u7528 <code>additionalContext</code> \u5728\u62e6\u622a\u5668\u4e4b\u95f4\u4f20\u9012\u6570\u636e\uff1a</p> <pre><code>// \u5728 PreInvoke \u4e2d\ncontext.additionalContext[\"userId\"] = context.update.userOrNull?.id\n\n// \u5728 PostInvoke \u4e2d\nval userId = context.additionalContext[\"userId\"] as? Long\n</code></pre>"},{"location":"zh/Interceptors-%28middleware%29/#_9","title":"\u591a\u4e2a\u62e6\u622a\u5668","text":"<p>\u53ef\u4ee5\u4e3a\u540c\u4e00\u9636\u6bb5\u6ce8\u518c\u591a\u4e2a\u62e6\u622a\u5668\u3002\u5b83\u4eec\u6309\u6ce8\u518c\u987a\u5e8f\u6267\u884c\uff1a</p> <pre><code>bot.update.pipeline.intercept(ProcessingPipePhase.Setup) { context -&gt;\n    println(\"\u7b2c\u4e00\u4e2a\u62e6\u622a\u5668\")\n}\n\nbot.update.pipeline.intercept(ProcessingPipePhase.Setup) { context -&gt;\n    println(\"\u7b2c\u4e8c\u4e2a\u62e6\u622a\u5668\")\n}\n\n// \u5904\u7406\u66f4\u65b0\u65f6\uff1a\n// \u8f93\u51fa: \"\u7b2c\u4e00\u4e2a\u62e6\u622a\u5668\"\n// \u8f93\u51fa: \"\u7b2c\u4e8c\u4e2a\u62e6\u622a\u5668\"\n</code></pre> <p>\u5982\u679c\u67d0\u4e2a\u62e6\u622a\u5668\u8c03\u7528\u4e86 <code>context.finish()</code>\uff0c\u8be5\u9636\u6bb5\u7684\u540e\u7eed\u62e6\u622a\u5668\u4f1a\u88ab\u8df3\u8fc7\uff0c\u540e\u7eed\u9636\u6bb5\u4e5f\u4e0d\u4f1a\u6267\u884c\u3002</p>"},{"location":"zh/Interceptors-%28middleware%29/#_10","title":"\u6700\u4f73\u5b9e\u8df5","text":""},{"location":"zh/Interceptors-%28middleware%29/#1","title":"1. \u4f7f\u7528\u6b63\u786e\u7684\u9636\u6bb5","text":"<ul> <li>Setup: \u5168\u5c40\u68c0\u67e5\u3001\u8fc7\u6ee4\u3001\u521d\u59cb\u8bbe\u7f6e</li> <li>Parsing: \u81ea\u5b9a\u4e49\u89e3\u6790\u903b\u8f91</li> <li>Match: \u5904\u7406\u7a0b\u5e8f\u9009\u62e9\u903b\u8f91</li> <li>Validation: \u6743\u9650\u3001\u901f\u7387\u9650\u5236\u3001\u4fdd\u62a4\u68c0\u67e5</li> <li>PreInvoke: \u5904\u7406\u7a0b\u5e8f\u7279\u5b9a\u7684\u51c6\u5907</li> <li>Invoke: \u901a\u5e38\u7531\u9ed8\u8ba4\u62e6\u622a\u5668\u5904\u7406</li> <li>PostInvoke: \u6e05\u7406\u3001\u65e5\u5fd7\u8bb0\u5f55\u3001\u9519\u8bef\u5904\u7406</li> </ul>"},{"location":"zh/Interceptors-%28middleware%29/#2","title":"2. \u4fdd\u6301\u62e6\u622a\u5668\u4e13\u6ce8","text":"<p>\u6bcf\u4e2a\u62e6\u622a\u5668\u5e94\u8be5\u53ea\u505a\u4e00\u4ef6\u4e8b\uff1a</p> <pre><code>// \u2705 \u597d - \u4e13\u6ce8\u7684\u62e6\u622a\u5668\nbot.update.pipeline.intercept(ProcessingPipePhase.Setup) { context -&gt;\n    if (isBanned(context.update.userOrNull?.id)) {\n        context.finish()\n    }\n}\n\n// \u274c \u907f\u514d - \u505a\u592a\u591a\u4e8b\nbot.update.pipeline.intercept(ProcessingPipePhase.Setup) { context -&gt;\n    // \u8ba4\u8bc1\n    // \u65e5\u5fd7\u8bb0\u5f55\n    // \u6307\u6807\n    // \u901f\u7387\u9650\u5236\n    // ... \u592a\u591a\u4e86\uff01\n}\n</code></pre>"},{"location":"zh/Interceptors-%28middleware%29/#3","title":"3. \u4f18\u96c5\u5730\u5904\u7406\u9519\u8bef","text":"<p>\u62e6\u622a\u5668\u4e0d\u5e94\u8be5\u4f7f\u673a\u5668\u4eba\u5d29\u6e83\uff1a</p> <pre><code>bot.update.pipeline.intercept(ProcessingPipePhase.PreInvoke) { context -&gt;\n    try {\n        // \u4f60\u7684\u903b\u8f91\n    } catch (e: Exception) {\n        val logger = context.bot.config.loggerFactory.get(\"Interceptor\")\n        logger.error(\"\u62e6\u622a\u5668\u9519\u8bef\", e)\n        // \u9664\u975e\u4f60\u60f3\u505c\u6b62\u5904\u7406\uff0c\u5426\u5219\u4e0d\u8981\u8c03\u7528 context.finish()\n    }\n}\n</code></pre>"},{"location":"zh/Interceptors-%28middleware%29/#4","title":"4. \u6e05\u7406\u8d44\u6e90","text":"<p>\u5982\u679c\u5728 PreInvoke \u4e2d\u6253\u5f00\u8d44\u6e90\uff0c\u5728 PostInvoke \u4e2d\u6e05\u7406\uff1a</p> <pre><code>var timer: Timer? = null\n\nbot.update.pipeline.intercept(ProcessingPipePhase.PreInvoke) { context -&gt;\n    timer = Timer()\n    context.additionalContext[\"timer\"] = timer\n}\n\nbot.update.pipeline.intercept(ProcessingPipePhase.PostInvoke) { context -&gt;\n    val timer = context.additionalContext[\"timer\"] as? Timer\n    timer?.stop()\n}\n</code></pre>"},{"location":"zh/Interceptors-%28middleware%29/#5","title":"5. \u987a\u5e8f\u5f88\u91cd\u8981","text":"<p>\u6309\u4f60\u5e0c\u671b\u5b83\u4eec\u8fd0\u884c\u987a\u5e8f\u6ce8\u518c\u62e6\u622a\u5668\uff1a</p> <pre><code>// \u66f4\u4e00\u822c\u7684\u68c0\u67e5\u5148\u6267\u884c\nbot.update.pipeline.intercept(ProcessingPipePhase.Setup) {\n    // \u5168\u5c40\u7981\u6b62\u68c0\u67e5\n}\n\n// \u66f4\u5177\u4f53\u7684\u68c0\u67e5\u540e\u6267\u884c\nbot.update.pipeline.intercept(ProcessingPipePhase.Validation) {\n    // \u5904\u7406\u7a0b\u5e8f\u7279\u5b9a\u7684\u6743\u9650\u68c0\u67e5\n}\n</code></pre>"},{"location":"zh/Interceptors-%28middleware%29/#6","title":"6. \u5c06\u62e6\u622a\u5668\u7528\u4e8e\u6a2a\u5207\u5173\u6ce8\u70b9","text":"<p>\u62e6\u622a\u5668\u975e\u5e38\u9002\u5408\uff1a - \u2705 \u8ba4\u8bc1/\u6388\u6743 - \u2705 \u65e5\u5fd7\u8bb0\u5f55 - \u2705 \u6307\u6807/\u6027\u80fd\u76d1\u63a7 - \u2705 \u901f\u7387\u9650\u5236 - \u2705 \u9519\u8bef\u5904\u7406 - \u2705 \u8bf7\u6c42/\u54cd\u5e94\u8f6c\u6362</p> <p>\u5bf9\u4e8e\u5904\u7406\u7a0b\u5e8f\u7279\u5b9a\u7684\u903b\u8f91\uff0c\u4fdd\u6301\u5728\u5904\u7406\u7a0b\u5e8f\u4e2d\u3002</p>"},{"location":"zh/Interceptors-%28middleware%29/#_11","title":"\u9ed8\u8ba4\u62e6\u622a\u5668","text":"<p>\u6846\u67b6\u5305\u542b\u6838\u5fc3\u529f\u80fd\u9ed8\u8ba4\u62e6\u622a\u5668\uff1a</p> <ul> <li>DefaultSetupInterceptor: \u5168\u5c40\u901f\u7387\u9650\u5236</li> <li>DefaultParsingInterceptor: \u547d\u4ee4\u89e3\u6790</li> <li>DefaultMatchInterceptor: \u5904\u7406\u7a0b\u5e8f\u5339\u914d\uff08\u547d\u4ee4\u3001\u8f93\u5165\u3001\u901a\u7528\u5339\u914d\u5668\uff09</li> <li>DefaultValidationInterceptor: \u4fdd\u62a4\u68c0\u67e5\u548c\u6bcf\u4e2a\u5904\u7406\u7a0b\u5e8f\u7684\u901f\u7387\u9650\u5236</li> <li>DefaultInvokeInterceptor: \u5904\u7406\u7a0b\u5e8f\u6267\u884c\u548c\u9519\u8bef\u5904\u7406</li> </ul> <p>\u81ea\u5b9a\u4e49\u62e6\u622a\u5668\u4e0e\u8fd9\u4e9b\u9ed8\u8ba4\u62e6\u622a\u5668\u4e00\u8d77\u8fd0\u884c\u3002\u4f60\u53ef\u4ee5\u5728\u9ed8\u8ba4\u62e6\u622a\u5668\u4e4b\u524d\u6216\u4e4b\u540e\u6dfb\u52a0\u903b\u8f91\uff0c\u4f46\u4e0d\u80fd\u79fb\u9664\u9ed8\u8ba4\u62e6\u622a\u5668\u3002</p>"},{"location":"zh/Interceptors-%28middleware%29/#_12","title":"\u9ad8\u7ea7\uff1a\u6761\u4ef6\u62e6\u622a\u5668","text":"<p>\u53ef\u4ee5\u4f7f\u62e6\u622a\u5668\u6709\u6761\u4ef6\uff1a</p> <pre><code>bot.update.pipeline.intercept(ProcessingPipePhase.PreInvoke) { context -&gt;\n    val activity = context.activity ?: return@intercept\n\n    // \u53ea\u5e94\u7528\u4e8e\u7279\u5b9a\u5904\u7406\u7a0b\u5e8f\n    if (activity::class.simpleName?.contains(\"Admin\") == true) {\n        // \u7ba1\u7406\u5458\u7279\u5b9a\u903b\u8f91\n        checkAdminPermissions(context)\n    }\n}\n</code></pre>"},{"location":"zh/Interceptors-%28middleware%29/#_13","title":"\u603b\u7ed3","text":"<p>\u62e6\u622a\u5668\u63d0\u4f9b\u4e86\u4e00\u79cd\u5411\u673a\u5668\u4eba\u6dfb\u52a0\u6a2a\u5207\u903b\u8f91\u7684\u6e05\u6670\u65b9\u5f0f\uff1a</p> <ul> <li>\u2705 \u4e03\u4e2a\u9636\u6bb5 \u7528\u4e8e\u5904\u7406\u7684\u4e0d\u540c\u9636\u6bb5</li> <li>\u2705 \u7b80\u5355\u7684 API: \u53ea\u9700\u5b9e\u73b0 <code>PipelineInterceptor</code></li> <li>\u2705 \u7075\u6d3b: \u6bcf\u4e2a\u9636\u6bb5\u53ef\u6ce8\u518c\u591a\u4e2a\u62e6\u622a\u5668</li> <li>\u2705 \u5f3a\u5927: \u8bbf\u95ee\u5b8c\u6574\u7684\u5904\u7406\u4e0a\u4e0b\u6587</li> <li>\u2705 \u5b89\u5168: \u53ef\u901a\u8fc7 <code>context.finish()</code> \u63d0\u524d\u505c\u6b62\u5904\u7406</li> </ul> <p>\u4f7f\u7528\u62e6\u622a\u5668\u4f7f\u5904\u7406\u7a0b\u5e8f\u4e13\u6ce8\u4e8e\u4e1a\u52a1\u903b\u8f91\uff0c\u540c\u65f6\u96c6\u4e2d\u5904\u7406\u8ba4\u8bc1\u3001\u65e5\u5fd7\u8bb0\u5f55\u548c\u6307\u6807\u7b49\u5171\u4eab\u95ee\u9898\u3002</p>"},{"location":"zh/Interceptors-%28middleware%29/#_14","title":"\u53e6\u8bf7\u53c2\u9605","text":"<ul> <li>\u51fd\u6570\u5f0f\u5904\u7406 DSL - \u51fd\u6570\u5f0f\u66f4\u65b0\u5904\u7406</li> <li>\u4fdd\u62a4\u68c0\u67e5 - \u5904\u7406\u7a0b\u5e8f\u7ea7\u522b\u7684\u6743\u9650\u68c0\u67e5</li> </ul>"},{"location":"zh/Update-parsing/","title":"\u66f4\u65b0\u89e3\u6790","text":""},{"location":"zh/Update-parsing/#_1","title":"\u6587\u672c\u8d1f\u8f7d","text":"<p>\u67d0\u4e9b\u66f4\u65b0\u53ef\u80fd\u5305\u542b\u53ef\u89e3\u6790\u7684\u6587\u672c\u8d1f\u8f7d\uff0c\u4ee5\u4fbf\u8fdb\u4e00\u6b65\u5904\u7406\u3002\u8ba9\u6211\u4eec\u770b\u4e00\u4e0b\u5b83\u4eec\uff1a</p> <ul> <li><code>MessageUpdate</code> -&gt; <code>message.text</code></li> <li><code>EditedMessageUpdate</code> -&gt; <code>editedMessage.text</code></li> <li><code>ChannelPostUpdate</code> -&gt; <code>channelPost.text</code></li> <li><code>EditedChannelPostUpdate</code> -&gt; <code>editedChannelPost.text</code></li> <li><code>InlineQueryUpdate</code> -&gt; <code>inlineQuery.query</code></li> <li><code>ChosenInlineResultUpdate</code> -&gt; <code>chosenInlineResult.query</code></li> <li><code>CallbackQueryUpdate</code> -&gt; <code>callbackQuery.data</code></li> <li><code>ShippingQueryUpdate</code> -&gt; <code>shippingQuery.invoicePayload</code></li> <li><code>PreCheckoutQueryUpdate</code> -&gt; <code>preCheckoutQuery.invoicePayload</code></li> <li><code>PollUpdate</code> -&gt; <code>poll.question</code></li> <li><code>PurchasedPaidMediaUpdate</code> -&gt; <code>purchasedPaidMedia.paidMediaPayload</code></li> </ul> <p>\u4ece\u5217\u51fa\u7684\u66f4\u65b0\u4e2d\uff0c\u9009\u62e9\u67d0\u4e2a\u53c2\u6570\u5e76\u5c06\u5176\u4f5c\u4e3a <code>TextReference</code> \u8fdb\u884c\u8fdb\u4e00\u6b65\u89e3\u6790\u3002</p>"},{"location":"zh/Update-parsing/#_2","title":"\u89e3\u6790","text":"<p>\u4f7f\u7528\u9002\u5f53\u7684\u5df2\u914d\u7f6e\u5206\u9694\u7b26\u5c06\u9009\u5b9a\u7684\u53c2\u6570\u89e3\u6790\u4e3a\u547d\u4ee4\u53ca\u5176\u53c2\u6570\u3002</p> <p>\u67e5\u770b\u914d\u7f6e <code>commandParsing</code> \u5757\u3002</p> <p>\u60a8\u53ef\u4ee5\u5728\u4e0b\u56fe\u4e2d\u770b\u5230\u54ea\u4e9b\u7ec4\u4ef6\u6620\u5c04\u5230\u76ee\u6807\u51fd\u6570\u7684\u54ea\u4e9b\u90e8\u5206\u3002</p> <p> </p>"},{"location":"zh/Update-parsing/#parammapping","title":"@ParamMapping","text":"<p>\u8fd8\u6709\u4e00\u4e2a\u540d\u4e3a <code>@ParamMapping</code> \u7684\u6ce8\u89e3\uff0c\u7528\u4e8e\u65b9\u4fbf\u6216\u7279\u6b8a\u60c5\u51b5\u3002</p> <p>\u5b83\u5141\u8bb8\u60a8\u5c06\u4f20\u5165\u6587\u672c\u4e2d\u7684\u53c2\u6570\u540d\u6620\u5c04\u5230\u4efb\u4f55\u53c2\u6570\u3002</p> <p>\u5f53\u4f20\u5165\u6570\u636e\u6709\u9650\u65f6\uff08\u4f8b\u5982 <code>CallbackData</code> (64 \u4e2a\u5b57\u7b26)\uff09\uff0c\u8fd9\u4e5f\u975e\u5e38\u65b9\u4fbf\u3002</p> <p>\u67e5\u770b\u4f7f\u7528\u793a\u4f8b\uff1a <code>greeting?name=Adam</code></p> <pre><code>@CommandHandler([\"greeting\"])\nsuspend fun greeting(@ParamMapping(\"name\") anyParameterName: String, user: User, bot: TelegramBot) {\n    message { \"Hello, $anyParameterName\" }.send(to = user, via = bot)\n}\n</code></pre> <p>\u5b83\u8fd8\u53ef\u7528\u4e8e\u6355\u83b7\u672a\u547d\u540d\u53c2\u6570\uff0c\u5728\u89e3\u6790\u5668\u8bbe\u7f6e\u4e3a\u8df3\u8fc7\u53c2\u6570\u540d\u6216\u751a\u81f3\u53c2\u6570\u540d\u4e0d\u5b58\u5728\u7684\u60c5\u51b5\u4e0b\uff0c\u8fd9\u4e9b\u53c2\u6570\u6309 'param_n' \u6a21\u5f0f\u4f20\u9012\uff0c\u5176\u4e2d <code>n</code> \u662f\u5176\u5e8f\u53f7\u3002</p> <p>\u4f8b\u5982\uff0c\u8fd9\u6837\u7684\u6587\u672c - <code>myCommand?p1=v1&amp;v2&amp;p3=&amp;p4=v4&amp;p5=</code>\uff0c\u5c06\u88ab\u89e3\u6790\u4e3a\uff1a * \u547d\u4ee4 - <code>myCommand</code> * \u53c2\u6570   * <code>p1</code> = <code>v1</code>   * <code>param_2</code> = <code>v2</code>   * <code>p3</code> = <code>* `p4` = `v4`   * `p5` =</code></p> <p>\u5982\u60a8\u6240\u89c1\uff0c\u7531\u4e8e\u7b2c\u4e8c\u4e2a\u53c2\u6570\u6ca1\u6709\u58f0\u660e\u540d\u79f0\uff0c\u56e0\u6b64\u8868\u793a\u4e3a <code>param_2</code>\u3002</p> <p>\u56e0\u6b64\u60a8\u53ef\u4ee5\u5728\u56de\u8c03\u672c\u8eab\u4e2d\u7f29\u5199\u53d8\u91cf\u540d\uff0c\u5e76\u5728\u4ee3\u7801\u4e2d\u4ec5\u4f7f\u7528\u6e05\u6670\u53ef\u8bfb\u7684\u540d\u79f0\u3002</p>"},{"location":"zh/Update-parsing/#_3","title":"\u6df1\u5c42\u94fe\u63a5","text":"<p>\u8003\u8651\u5230\u4e0a\u8ff0\u4fe1\u606f\uff0c\u5982\u679c\u60a8\u5e0c\u671b\u5728\u542f\u52a8\u547d\u4ee4\u4e2d\u6355\u83b7\u6df1\u5c42\u94fe\u63a5\uff0c\u53ef\u4ee5\u4f7f\u7528\uff1a</p> <pre><code>@CommandHandler([\"/start\"])\nsuspend fun start(@ParamMapping(\"param_1\") deeplink: String?, user: User, bot: TelegramBot) {\n    message { \"deeplink is $deeplink\" }.send(to = user, via = bot)\n}\n</code></pre>"},{"location":"zh/Update-parsing/#_4","title":"\u7fa4\u7ec4\u547d\u4ee4","text":"<p>\u5728 <code>commandParsing</code> \u914d\u7f6e\u4e2d\uff0c\u6211\u4eec\u6709\u53c2\u6570 <code>useIdentifierInGroupCommands</code>\uff0c\u5f53\u5b83\u542f\u7528\u65f6\uff0c\u6211\u4eec\u53ef\u4ee5\u5728\u547d\u4ee4\u5339\u914d\u8fc7\u7a0b\u4e2d\u4f7f\u7528 <code>TelegramBot.identifier</code>\uff08\u5982\u679c\u60a8\u4f7f\u7528\u63cf\u8ff0\u7684\u53c2\u6570\uff0c\u8bf7\u4e0d\u8981\u5fd8\u8bb0\u66f4\u6539\u5b83\uff09\uff0c\u5b83\u6709\u52a9\u4e8e\u5728\u591a\u4e2a\u673a\u5668\u4eba\u4e4b\u95f4\u5206\u79bb\u76f8\u4f3c\u7684\u547d\u4ee4\uff0c\u5426\u5219 <code>@MyBot</code> \u90e8\u5206\u5c06\u88ab\u7b80\u5355\u5730\u8df3\u8fc7\u3002</p>"},{"location":"zh/Update-parsing/#_5","title":"\u53e6\u8bf7\u53c2\u9605","text":"<ul> <li>\u6d3b\u52a8\u8c03\u7528</li> <li>\u6d3b\u52a8\u548c\u5904\u7406\u5668</li> <li>\u64cd\u4f5c</li> </ul>"},{"location":"zh/Useful-utilities-and-tips/","title":"\u6709\u7528\u7684\u5b9e\u7528\u5de5\u5177\u548c\u63d0\u793a","text":""},{"location":"zh/Useful-utilities-and-tips/#processedupdate","title":"\u5904\u7406 ProcessedUpdate","text":"<p><code>ProcessedUpdate</code> \u662f\u4e00\u4e2a\u6cdb\u578b\u7c7b\uff0c\u7528\u4e8e\u66f4\u65b0\uff0c\u6839\u636e\u539f\u59cb\u6570\u636e\uff0c\u53ef\u4ee5\u4ee5\u4e0d\u540c\u7c7b\u578b\u63d0\u4f9b\uff08<code>MessageUpdate</code>\u3001<code>CallbackQueryUpdate</code> \u7b49\uff09</p> <p>\u56e0\u6b64\uff0c\u60a8\u53ef\u4ee5\u68c0\u67e5\u4f20\u5165\u6570\u636e\u7684\u7c7b\u578b\uff0c\u5e76\u4f7f\u7528\u667a\u80fd\u8f6c\u6362\u8fdb\u4e00\u6b65\u64cd\u4f5c\u7279\u5b9a\u6570\u636e\uff0c\u4f8b\u5982\uff1a</p> <pre><code>// ...\nif (update !is MessageUpdate) {\n    message { \"Only messages are allowed\" }.send(user, bot)\n    return\n}\n// \u8fdb\u4e00\u6b65\uff0cProcessedUpdate \u5c06\u88ab\u89c6\u4e3a MessageUpdate\u3002\n</code></pre> <p>\u5185\u90e8\u8fd8\u6709\u4e00\u4e2a <code>UserReference</code> \u63a5\u53e3\uff0c\u5141\u8bb8\u60a8\u786e\u5b9a\u5185\u90e8\u662f\u5426\u6709\u7528\u6237\u5f15\u7528\uff0c\u4f7f\u7528\u6848\u4f8b\u793a\u4f8b\uff1a</p> <pre><code>val user = if(update is UserReference) update.user else null\n</code></pre> <p>\u5982\u679c\u9700\u8981\uff0c\u66f4\u65b0\u53c2\u6570\u4e2d\u59cb\u7ec8\u6709\u539f\u59cb\u7684 <code>update</code>\u3002</p>"},{"location":"zh/Useful-utilities-and-tips/#_1","title":"\u4f9d\u8d56\u6ce8\u5165","text":"<p>\u8be5\u5e93\u4f7f\u7528\u7b80\u5355\u7684\u673a\u5236\u6765\u521d\u59cb\u5316\u7c7b\uff0c\u5176\u4e2d\u66f4\u65b0\u5904\u7406\u65b9\u6cd5\u4f7f\u7528\u63d0\u4f9b\u7684\u6ce8\u89e3\u8fdb\u884c\u6ce8\u89e3\u3002</p> <p>\u9ed8\u8ba4\u60c5\u51b5\u4e0b\u4f7f\u7528 <code>ClassManagerImpl</code> \u6765\u8c03\u7528\u6ce8\u89e3\u65b9\u6cd5\u3002</p> <p>\u4f46\u5982\u679c\u60a8\u60f3\u4f7f\u7528\u5176\u4ed6\u5e93\u6765\u5b9e\u73b0\uff0c\u53ef\u4ee5\u91cd\u65b0\u5b9a\u4e49 <code>ClassManager</code> \u63a5\u53e3\uff0c\u4f7f\u7528\u60a8\u504f\u597d\u7684\u673a\u5236\uff0c\u5e76\u5728\u521d\u59cb\u5316\u673a\u5668\u4eba\u65f6\u4f20\u5165\u3002</p> <pre><code>fun main() = runBlocking {\n    val bot = TelegramBot(\"BOT_TOKEN\", \"com.example.controllers\") {\n        classManager = ClassManagerImpl()\n    }\n\n    bot.handleUpdates()\n}\n</code></pre>"},{"location":"zh/Useful-utilities-and-tips/#_2","title":"\u8fc7\u6ee4\u66f4\u65b0","text":"<p>\u5982\u679c\u6ca1\u6709\u590d\u6742\u7684\u6761\u4ef6\uff0c\u60a8\u53ef\u4ee5\u7b80\u5355\u5730\u8fc7\u6ee4\u67d0\u4e9b\u66f4\u65b0\u8fdb\u884c\u5904\u7406\uff1a</p> <pre><code>// \u5b9a\u4e49\u66f4\u65b0\u8fc7\u6ee4\u6761\u4ef6\u7684\u51fd\u6570\nfun filteringFun(update: Update): Boolean = update.message?.text.isNullOrBlank()\n\nfun main() = runBlocking {\n  val bot = TelegramBot(\"BOT_TOKEN\")\n\n  // \u4e3a\u66f4\u65b0\u8bbe\u7f6e\u66f4\u5177\u4f53\u7684\u5904\u7406\u6d41\u7a0b\n  bot.update.setListener {\n    if(filteringFun(it)) return@setListener\n\n    // \u56e0\u6b64\uff0c\u5982\u679c\u4fa6\u542c\u5668\u5728\u5230\u8fbe\u5904\u7406\u7a0b\u5e8f\u51fd\u6570\u4e4b\u524d\u79bb\u5f00\u4e86\u4f5c\u7528\u57df\uff0c\u5219\u8868\u793a\u5b83\u5728\u8fc7\u6ee4\u3002\n    // \u5b9e\u9645\u4e0a\uff0c\u60a8\u751a\u81f3\u53ef\u4ee5\u76f4\u63a5\u5728\u90a3\u91cc\u7f16\u5199 if \u6761\u4ef6\uff0c\u4f7f\u7528 return@setListener\uff0c\u6216\u5c06\u8fc7\u6ee4\u6269\u5c55\u5230\u5355\u72ec\u7684\u7c7b\u3002\n\n    handle(it) // \u6216\u4f7f\u7528\u5757\u8fdb\u884c\u624b\u52a8\u5904\u7406\n  }\n}\n</code></pre> <p>\u8981\u5728\u547d\u4ee4\u5339\u914d\u6216\u6392\u9664\u8fc7\u7a0b\u4e2d\u5305\u542b\u8fc7\u6ee4\uff0c\u8bf7\u67e5\u770b guards \u6216 <code>@CommonHandler</code>\u3002</p>"},{"location":"zh/Useful-utilities-and-tips/#_3","title":"\u4e3a\u4e0d\u540c\u65b9\u6cd5\u901a\u7528\u5316\u9009\u9879","text":"<p>\u5982\u679c\u60a8\u5fc5\u987b\u7ecf\u5e38\u5e94\u7528\u76f8\u540c\u7684\u53ef\u9009\u53c2\u6570\uff0c\u60a8\u53ef\u4ee5\u7f16\u5199\u7c7b\u4f3c\u7684\u51fd\u6570\u6765\u6ee1\u8db3\u60a8\u7684\u9700\u6c42\uff0c\u5e76\u51cf\u8f7b\u6837\u677f\u4ee3\u7801 :)</p> <p>\u4e00\u4e9b\u901a\u7528\u5c5e\u6027\u88ab\u5206\u79bb\u5230\u4e0d\u540c\u7684\u63a5\u53e3\u4e2d\u3002</p> <pre><code>@Suppress(\"NOTHING_TO_INLINE\")\ninline fun &lt;T, R, O&gt; T.markdownMode(crossinline block: O.() -&gt; Unit = {}): T\n        where               T : TgAction&lt;R&gt;,\n                            T : OptionsFeature&lt;T, O&gt;,\n                            O : Options,\n                            O : OptionsParseMode =\n    options {\n        parseMode = ParseMode.Markdown\n        block()\n    }\n\n\n// ... \u5728\u60a8\u7684\u4ee3\u7801\u4e2d\n\nmessage { \"test\" }.markdownMode().send(to, via)\n</code></pre>"},{"location":"zh/Web-starters-%28Spring-and-Ktor%29/#spring-starter","title":"Spring starter","text":"<p>Spring Starter\u6a21\u5757\u662f\u4e00\u4e2a\u81ea\u52a8\u914d\u7f6e\u6a21\u5757\uff0c\u7528\u4e8e\u5c06Telegram bot\u529f\u80fd\u96c6\u6210\u5230Spring Boot\u5e94\u7528\u7a0b\u5e8f\u4e2d\u3002\u5b83\u5229\u7528\u4e86Spring Boot\u7684\u4f9d\u8d56\u6ce8\u5165\u548c\u914d\u7f6e\u5c5e\u6027\u529f\u80fd\uff0c\u6839\u636e\u63d0\u4f9b\u7684\u914d\u7f6e\u81ea\u52a8\u914d\u7f6eTelegram bot\u3002\u8fd9\u4e2a\u5e93\u5bf9\u4e8e\u5e0c\u671b\u4f7f\u7528Kotlin\u548cSpring Boot\u6784\u5efaTelegram bot\u7684\u5f00\u53d1\u8005\u7279\u522b\u6709\u7528\uff0c\u63d0\u4f9b\u4e86\u4e00\u79cd\u6d41\u7545\u7684bot\u5f00\u53d1\u548c\u7ba1\u7406\u65b9\u6cd5\u3002</p>"},{"location":"zh/Web-starters-%28Spring-and-Ktor%29/#_1","title":"\u4e3b\u8981\u7279\u6027","text":"<ul> <li>\u81ea\u52a8\u914d\u7f6e: \u5e93\u6839\u636e\u63d0\u4f9b\u7684\u914d\u7f6e\u5c5e\u6027\u81ea\u52a8\u914d\u7f6eTelegram bot\uff0c\u65e0\u9700\u624b\u52a8\u8bbe\u7f6e\u3002</li> <li>\u914d\u7f6e\u5c5e\u6027: \u652f\u6301\u914d\u7f6e\u5c5e\u6027\u4ee5\u4fbf\u8f7b\u677e\u81ea\u5b9a\u4e49bot\u8bbe\u7f6e\uff0c\u4f8b\u5982bot\u4ee4\u724c\u3001\u5305\u540d\u548c\u6807\u8bc6\u7b26\u3002</li> <li>Spring\u96c6\u6210: \u4e0eSpring\u751f\u6001\u7cfb\u7edf\u65e0\u7f1d\u96c6\u6210\uff0c\u5229\u7528Spring\u7684\u4f9d\u8d56\u6ce8\u5165\u548c\u5e94\u7528\u4e0a\u4e0b\u6587\u7ba1\u7406bot\u5b9e\u4f8b\u3002</li> <li>\u534f\u7a0b\u652f\u6301: \u5229\u7528Kotlin\u534f\u7a0b\u8fdb\u884c\u5f02\u6b65bot\u64cd\u4f5c\uff0c\u786e\u4fdd\u9ad8\u6548\u4e14\u975e\u963b\u585e\u7684\u6267\u884c\u3002</li> </ul>"},{"location":"zh/Web-starters-%28Spring-and-Ktor%29/#_2","title":"\u5165\u95e8\u6307\u5357","text":"<p>\u8981\u4f7f\u7528Spring Starter Library for Telegram Bots\uff0c\u60a8\u9700\u8981\u5728Spring Boot\u9879\u76ee\u4e2d\u5c06\u5176\u4f5c\u4e3a\u4f9d\u8d56\u9879\u5305\u542b\u3002\u8be5\u5e93\u8bbe\u8ba1\u4e3a\u4e0eSpring Boot\u5e94\u7528\u7a0b\u5e8f\u4e00\u8d77\u5de5\u4f5c\uff0c\u9700\u8981Spring Boot\u6846\u67b6\u624d\u80fd\u6b63\u5e38\u8fd0\u884c\u3002</p>"},{"location":"zh/Web-starters-%28Spring-and-Ktor%29/#_3","title":"\u4f9d\u8d56\u9879","text":"<p>\u5c06\u4ee5\u4e0b\u4f9d\u8d56\u9879\u6dfb\u52a0\u5230\u60a8\u7684 <code>build.gradle</code> \u6216 <code>pom.xml</code> \u6587\u4ef6\u4e2d\uff1a</p> <pre><code>dependencies {\n    implementation 'eu.vendeli:spring-starter:&lt;version&gt;'\n}\n</code></pre> <p>\u5c06 <code>&lt;version&gt;</code> \u66ff\u6362\u4e3a\u5e93\u7684\u6700\u65b0\u7248\u672c\u3002</p>"},{"location":"zh/Web-starters-%28Spring-and-Ktor%29/#_4","title":"\u914d\u7f6e","text":"<p>\u8be5\u5e93\u4f7f\u7528Spring Boot\u7684 <code>@ConfigurationProperties</code> \u6765\u7ed1\u5b9a\u914d\u7f6e\u5c5e\u6027\u3002\u60a8\u53ef\u4ee5\u5728Spring Boot\u5e94\u7528\u7a0b\u5e8f\u7684 <code>application.properties</code> \u6216 <code>application.yml</code> \u6587\u4ef6\u4e2d\u5b9a\u4e49bot\u914d\u7f6e\u3002</p> <pre><code>ktgram:\n autoStartPolling: true\n shareHttpClient: true\n bot:\n    - token: YOUR_BOT_TOKEN\n      pckg: com.example.bot\n      identifier: MyBot\n</code></pre>"},{"location":"zh/Web-starters-%28Spring-and-Ktor%29/#_5","title":"\u4f7f\u7528\u65b9\u6cd5","text":"<p>\u5305\u542b\u5e76\u914d\u7f6e\u5e93\u540e\uff0c\u5b83\u4f1a\u6839\u636e\u63d0\u4f9b\u7684\u914d\u7f6e\u81ea\u52a8\u521b\u5efa\u548c\u914d\u7f6eTelegram bot\u5b9e\u4f8b\u3002</p> <p>\u5b83\u8fd8\u652f\u6301\u591a\u4e2abot\u5b9e\u4f8b\uff0c\u8981\u521d\u59cb\u5316\u591a\u4e2a\u5b9e\u4f8b\uff0c\u53ea\u9700\u5728bot\u90e8\u5206\u58f0\u660e\u65b0\u7684\u6761\u76ee\uff1a</p> <pre><code>ktgram:\n bot:\n    - token: YOUR_BOT_TOKEN\n    - token: SECOND_BOT_TOKEN\n</code></pre>"},{"location":"zh/Web-starters-%28Spring-and-Ktor%29/#_6","title":"\u9ad8\u7ea7\u914d\u7f6e","text":"<p>\u5bf9\u4e8e\u66f4\u9ad8\u7ea7\u7684\u914d\u7f6e\uff0c\u5982\u81ea\u5b9a\u4e49bot\u884c\u4e3a\u6216\u4e0e\u5176\u4ed6Spring\u7ec4\u4ef6\u96c6\u6210\uff0c\u60a8\u53ef\u4ee5\u6269\u5c55 <code>BotConfiguration</code> \u7c7b\u5e76\u901a\u8fc7\u5176 <code>applyCfg</code> \u65b9\u6cd5\u66f4\u6539bot\u914d\u7f6e\uff0c\u60a8\u53ef\u4ee5\u5728\u8fd9\u91cc\u770b\u5230\u793a\u4f8b\u3002</p> <p>Tip</p> <p>\u8981\u4f7f\u7528\u81ea\u5b9a\u4e49\u914d\u7f6e\u914d\u7f6e\u6bcf\u4e2a\u521d\u59cb\u5316\u7684\u5b9e\u4f8b\uff0c\u901a\u8fc7\u5176\u6807\u8bc6\u7b26\u533a\u5206\u5b83\u4eec\uff08BotConfiguration\u7c7b\u4e5f\u6709\u6807\u8bc6\u7b26\uff09\u3002</p>"},{"location":"zh/Web-starters-%28Spring-and-Ktor%29/#ktor","title":"Ktor","text":"<p>\u8be5\u6a21\u5757\u65e8\u5728\u4fc3\u8fdb\u4e3aTelegram bot\u521b\u5efawebhook\u670d\u52a1\u5668\u3002\u5b83\u5141\u8bb8\u5f00\u53d1\u8005\u914d\u7f6e\u670d\u52a1\u5668\uff0c\u5305\u62ecSSL/TLS\u8bbe\u7f6e\uff0c\u5e76\u58f0\u660e\u5177\u6709\u81ea\u5b9a\u4e49\u914d\u7f6e\u7684\u591a\u4e2aTelegram bot\u3002\u8bbe\u7f6e\u8fc7\u7a0b\u7075\u6d3b\uff0c\u4f7f\u5f00\u53d1\u8005\u80fd\u591f\u6839\u636e\u5177\u4f53\u9700\u6c42\u5b9a\u5236\u670d\u52a1\u5668\u3002</p>"},{"location":"zh/Web-starters-%28Spring-and-Ktor%29/#_7","title":"\u5b89\u88c5","text":"<p>\u8981\u5b89\u88c5ktor starter\uff0c\u8bf7\u5728\u4e3b\u4f9d\u8d56\u9879\u4e2d\u6dfb\u52a0\uff1a</p> <pre><code>dependencies {\n    implementation(\"eu.vendeli:ktor-starter:x.y.z\") // there\n    // \u5c06x.y.z\u66f4\u6539\u4e3a\u5f53\u524d\u5e93\u7248\u672c\n}\n</code></pre>"},{"location":"zh/Web-starters-%28Spring-and-Ktor%29/#_8","title":"\u5173\u952e\u7ec4\u4ef6","text":"<p><code>serveWebhook</code> \u51fd\u6570</p> <p>serveWebhook\u51fd\u6570\u662f\u5e93\u7684\u6838\u5fc3\u3002\u5b83\u4e3aTelegram bot\u8bbe\u7f6e\u548c\u542f\u52a8webhook\u670d\u52a1\u5668\u3002\u5b83\u63a5\u53d7\u4e24\u4e2a\u53c2\u6570\uff1a</p> <ul> <li><code>wait</code>: \u4e00\u4e2a\u5e03\u5c14\u503c\uff0c\u6307\u793a\u670d\u52a1\u5668\u662f\u5426\u5e94\u8be5\u5728\u5173\u95ed\u4e4b\u524d\u7b49\u5f85\u5e94\u7528\u7a0b\u5e8f\u505c\u6b62\u3002\u9ed8\u8ba4\u4e3atrue\u3002</li> <li><code>serverBuilder</code>: \u4e00\u4e2alambda\u51fd\u6570\uff0c\u7528\u4e8e\u914d\u7f6e\u670d\u52a1\u5668\u3002\u9ed8\u8ba4\u4e3a\u4e00\u4e2a\u7a7alambda\u3002</li> </ul>"},{"location":"zh/Web-starters-%28Spring-and-Ktor%29/#_9","title":"\u914d\u7f6e","text":"<ul> <li><code>WEBHOOK_PREFIX</code>: \u5b83\u662f\u4e00\u4e2a\u53c2\u6570\uff0c\u5c06\u7528\u4e8ewebhook\u76d1\u542c\u5668\u8def\u7531\u7684\u5730\u5740\u524d\u7f00\u3002(\u9ed8\u8ba4\u4e3a \"/\")</li> </ul>"},{"location":"zh/Web-starters-%28Spring-and-Ktor%29/#_10","title":"\u670d\u52a1\u5668\u8bbe\u7f6e","text":"<ul> <li><code>server</code>: \u4e00\u79cd\u4f7f\u7528EnvConfiguration\u6216ManualConfiguration\u8bbe\u7f6e\u670d\u52a1\u5668\u914d\u7f6e\u7684\u65b9\u6cd5\u3002</li> <li><code>engine</code>: \u4e00\u79cd\u914d\u7f6eNetty\u5e94\u7528\u5f15\u64ce\u7684\u65b9\u6cd5\u3002</li> <li><code>ktorModule</code>: \u4e00\u79cd\u5c06Ktor\u6a21\u5757\u6dfb\u52a0\u5230\u5e94\u7528\u7a0b\u5e8f\u7684\u65b9\u6cd5\u3002</li> </ul> <p>\u8be5\u5e93\u4e3a\u670d\u52a1\u5668\u63d0\u4f9b\u4e86\u5e7f\u6cdb\u7684\u53ef\u914d\u7f6e\u53c2\u6570\uff0c\u5305\u62ec\u4e3b\u673a\u3001\u7aef\u53e3\u3001SSL\u8bbe\u7f6e\u7b49\u3002\u6709\u4e24\u79cd\u5177\u4f53\u7684\u914d\u7f6e\u9009\u9879\uff1a</p> <ul> <li><code>EnvConfiguration</code>: \u4ece\u5e26\u6709 <code>KTGRAM_</code> \u524d\u7f00\u7684\u73af\u5883\u4e2d\u8bfb\u53d6\u914d\u7f6e\u503c\u3002</li> <li><code>ManualConfiguration</code>: \u5141\u8bb8\u624b\u52a8\u8bbe\u7f6e\u914d\u7f6e\u503c\uff0c\u5728 <code>server {}</code> \u51fd\u6570\u4e2d\u8bbe\u7f6e\u53c2\u6570\u3002</li> </ul> <p>\u4ee5\u4e0b\u662f\u53ef\u4ee5\u8bbe\u7f6e\u7684\u53c2\u6570\u5217\u8868\uff1a</p> <ul> <li><code>HOST</code>: \u670d\u52a1\u5668\u7684\u4e3b\u673a\u540d\u6216IP\u5730\u5740\u3002</li> <li><code>PORT</code>: \u670d\u52a1\u5668\u7684\u7aef\u53e3\u53f7\u3002</li> <li><code>SSL_PORT</code>: SSL/TLS\u8fde\u63a5\u7684\u7aef\u53e3\u53f7\u3002</li> <li><code>PEM_PRIVATE_KEY_PATH</code>: PEM\u79c1\u94a5\u6587\u4ef6\u8def\u5f84\u3002</li> <li><code>PEM_CHAIN_PATH</code>: PEM\u8bc1\u4e66\u94fe\u6587\u4ef6\u8def\u5f84\u3002</li> <li><code>PEM_PRIVATE_KEY</code>: \u4ee5\u5b57\u7b26\u6570\u7ec4\u5f62\u5f0f\u8868\u793a\u7684PEM\u79c1\u94a5\u5bc6\u7801\u3002</li> <li><code>KEYSTORE_PATH</code>: Java\u5bc6\u94a5\u5e93\u6587\u4ef6\u8def\u5f84\u3002</li> <li><code>KEYSTORE_PASSWORD</code>: \u5bc6\u94a5\u5e93\u5bc6\u7801\u3002</li> <li><code>KEY_ALIAS</code>: \u5bc6\u94a5\u5e93\u4e2d\u5bc6\u94a5\u7684\u522b\u540d\u3002</li> <li><code>SSL_ON</code>: \u4e00\u4e2a\u5e03\u5c14\u503c\uff0c\u6307\u793a\u662f\u5426\u5e94\u542f\u7528SSL/TLS\u3002\u9ed8\u8ba4\u4e3atrue\u3002</li> </ul> <p>Tip</p> <p>\u5982\u679c\u5b58\u5728pem\u8bc1\u4e66\uff0c\u6a21\u5757\u672c\u8eab\u5c06\u5728\u6307\u5b9a\u8def\u5f84\u521b\u5efajks\u5b58\u50a8\u3002</p>"},{"location":"zh/Web-starters-%28Spring-and-Ktor%29/#bot","title":"Bot\u914d\u7f6e\uff1a","text":"<p>\u8981\u914d\u7f6ebot\uff0c\u8c03\u7528 <code>declareBot {}</code>\uff0c\u5b83\u6709\u4ee5\u4e0b\u53c2\u6570\uff1a</p> <ul> <li><code>token</code>: Bot\u4ee4\u724c\u3002</li> <li><code>pckg</code>: Bot\u7684\u5305\u540d\u3002</li> <li><code>configuration</code>: \u7528\u4e8e\u914d\u7f6ebot\u7684lambda\u51fd\u6570\u3002</li> <li><code>handlingBehaviour</code>: \u7528\u4e8e\u8bbe\u7f6ebot\u5904\u7406\u884c\u4e3a\u7684lambda\u51fd\u6570\u3002</li> <li><code>onInit</code>: bot\u521d\u59cb\u5316\u65f6\u6267\u884c\u7684lambda\u51fd\u6570\u3002</li> </ul>"},{"location":"zh/Web-starters-%28Spring-and-Ktor%29/#_11","title":"\u793a\u4f8b\u7528\u6cd5","text":"<p>\u8981\u4f7f\u7528\u6b64\u6a21\u5757\uff0c\u8c03\u7528 <code>serveWebhook</code> \u51fd\u6570\uff0c\u4f7f\u7528\u6240\u9700\u8bbe\u7f6e\u8fdb\u884c\u914d\u7f6e\uff0c\u58f0\u660e\u60a8\u7684bot\u3002\u8fd9\u662f\u4e00\u4e2a\u7b80\u5316\u7684\u793a\u4f8b\uff1a</p> <pre><code>fun main() = runBlocking {\n    serveWebhook {\n        server {\n            HOST = \"0.0.0.0\"\n            PORT = 8080\n            SSL_PORT = 8443\n\n            PEM_PRIVATE_KEY_PATH = \"/etc/letsencrypt/live/example.com/privkey.pem\"\n            PEM_CHAIN_PATH = \"/etc/letsencrypt/live/example.com/fullchain.pem\"\n            PEM_PRIVATE_KEY = \"pem_changeit\".toCharArray()\n\n            KEYSTORE_PATH = \"/etc/ssl/certs/java/cacerts/bot_keystore.jks\"\n            KEYSTORE_PASSWORD = \"changeit\".toCharArray()\n            // \u6839\u636e\u9700\u8981\u8bbe\u7f6e\u5176\u4ed6\u914d\u7f6e\u53c2\u6570\n        }\n        declareBot {\n            token = \"YOUR_BOT_TOKEN\"\n            // \u914d\u7f6e\u5176\u4ed6bot\u8bbe\u7f6e\n        }\n        // \u5982\u6709\u9700\u8981\uff0c\u6dfb\u52a0\u66f4\u591abot\u6216\u8bbe\u7f6e\u5176\u4ed6\u53c2\u6570\n    }\n}\n</code></pre> <p>Caution</p> <p>\u522b\u5fd8\u4e86\u8bbe\u7f6ewebhook\u4ee5\u4f7f\u4e00\u5207\u6b63\u5e38\u5de5\u4f5c\u3002 :)</p> <p>\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u6a21\u5757\u5c06webhook\u76d1\u542c\u7aef\u70b9\u4f5c\u4e3a <code>host/BOT_TOKEN</code> \u63d0\u4f9b</p>"},{"location":"hi/#intro","title":"Intro","text":"<p>\u0906\u0907\u090f \u0926\u0947\u0916\u0947\u0902 \u0915\u093f \u0932\u093e\u0907\u092c\u094d\u0930\u0947\u0930\u0940 \u0938\u093e\u092e\u093e\u0928\u094d\u092f \u0930\u0942\u092a \u0938\u0947 \u0905\u092a\u0921\u0947\u091f \u0915\u094b \u0915\u0948\u0938\u0947 \u0938\u0902\u092d\u093e\u0932\u0924\u0940 \u0939\u0948:</p> <p> </p> <p>\u0905\u092a\u0921\u0947\u091f \u092a\u094d\u0930\u093e\u092a\u094d\u0924 \u0915\u0930\u0928\u0947 \u0915\u0947 \u092c\u093e\u0926, \u0932\u093e\u0907\u092c\u094d\u0930\u0947\u0930\u0940 \u0924\u0940\u0928 \u092e\u0941\u0916\u094d\u092f \u091a\u0930\u0923 \u0915\u0930\u0924\u0940 \u0939\u0948, \u091c\u0948\u0938\u093e \u0915\u093f \u0939\u092e \u0926\u0947\u0916 \u0938\u0915\u0924\u0947 \u0939\u0948\u0902\u0964</p>"},{"location":"hi/#processing","title":"Processing","text":"<p>\u092a\u094d\u0930\u094b\u0938\u0947\u0938\u093f\u0902\u0917 \u092a\u094d\u0930\u093e\u092a\u094d\u0924 \u0905\u092a\u0921\u0947\u091f \u0915\u094b <code>ProcessedUpdate</code> \u0915\u0940 \u0909\u092a\u092f\u0941\u0915\u094d\u0924 \u0938\u092c\u0915\u094d\u0932\u093e\u0938 \u092e\u0947\u0902 \u092a\u0941\u0928\u0903 \u092a\u0948\u0915\u0947\u091c \u0915\u0930\u0928\u093e \u0939\u0948, \u091c\u094b \u0932\u0947 \u091c\u093e\u090f \u0917\u090f \u092a\u0947\u0932\u094b\u0921 \u092a\u0930 \u0928\u093f\u0930\u094d\u092d\u0930 \u0915\u0930\u0924\u093e \u0939\u0948\u0964</p> <p>\u092f\u0939 \u091a\u0930\u0923 \u0905\u092a\u0921\u0947\u091f \u0915\u094b \u0938\u0902\u091a\u093e\u0932\u093f\u0924 \u0915\u0930\u0928\u093e \u0906\u0938\u093e\u0928 \u092c\u0928\u093e\u0928\u0947 \u0914\u0930 \u092a\u094d\u0930\u094b\u0938\u0947\u0938\u093f\u0902\u0917 \u0915\u094d\u0937\u092e\u0924\u093e\u0913\u0902 \u0915\u093e \u0935\u093f\u0938\u094d\u0924\u093e\u0930 \u0915\u0930\u0928\u0947 \u0915\u0947 \u0932\u093f\u090f \u0906\u0935\u0936\u094d\u092f\u0915 \u0939\u0948\u0964</p>"},{"location":"hi/#handling","title":"Handling","text":"<p>\u0905\u0917\u0932\u093e \u092e\u0941\u0916\u094d\u092f \u091a\u0930\u0923 \u0906\u0924\u093e \u0939\u0948, \u092f\u0939\u093e\u0901 \u0939\u092e \u0938\u094d\u0935\u092f\u0902 \u0939\u0948\u0902\u0921\u0932\u093f\u0902\u0917 \u092a\u0930 \u092a\u0939\u0941\u0901\u091a\u0924\u0947 \u0939\u0948\u0902\u0964</p>"},{"location":"hi/#global-ratelimiter","title":"Global RateLimiter","text":"<p>\u092f\u0926\u093f \u0905\u092a\u0921\u0947\u091f \u092e\u0947\u0902 \u0915\u094b\u0908 \u0909\u092a\u092f\u094b\u0917\u0915\u0930\u094d\u0924\u093e \u0939\u0948, \u0924\u094b \u0939\u092e \u0935\u0948\u0936\u094d\u0935\u093f\u0915 \u0926\u0930 \u0938\u0940\u092e\u093f\u0924\u0915\u0930\u094d\u0924\u093e \u0915\u094b \u092a\u093e\u0930 \u0915\u0930\u0928\u0947 \u0915\u0940 \u091c\u093e\u0901\u091a \u0915\u0930\u0924\u0947 \u0939\u0948\u0902\u0964</p>"},{"location":"hi/#parse-text","title":"Parse text","text":"<p>\u0905\u0917\u0932\u093e, \u092a\u0947\u0932\u094b\u0921 \u0915\u0947 \u0906\u0927\u093e\u0930 \u092a\u0930, \u0939\u092e \u0909\u0938 \u0935\u093f\u0936\u0947\u0937 \u0905\u092a\u0921\u0947\u091f \u0918\u091f\u0915 \u0915\u094b \u0932\u0947\u0924\u0947 \u0939\u0948\u0902 \u091c\u093f\u0938\u092e\u0947\u0902 \u092a\u093e\u0920 \u0939\u0948 \u0914\u0930 \u0907\u0938\u0947 \u0915\u0949\u0928\u094d\u092b\u093c\u093f\u0917\u0930\u0947\u0936\u0928 \u0915\u0947 \u0905\u0928\u0941\u0938\u093e\u0930 \u092a\u093e\u0930\u094d\u0938 \u0915\u0930\u0924\u0947 \u0939\u0948\u0902\u0964</p> <p>\u0905\u0927\u093f\u0915 \u0935\u093f\u0938\u094d\u0924\u0943\u0924 \u091c\u093e\u0928\u0915\u093e\u0930\u0940 \u0915\u0947 \u0932\u093f\u090f update parsing article \u0926\u0947\u0916\u0947\u0902\u0964</p>"},{"location":"hi/#find-activity","title":"Find Activity","text":"<p>\u0905\u0917\u0932\u093e, \u092a\u094d\u0930\u094b\u0938\u0947\u0938\u093f\u0902\u0917 \u092a\u094d\u0930\u093e\u0925\u092e\u093f\u0915\u0924\u093e \u0915\u0947 \u0905\u0928\u0941\u0938\u093e\u0930:</p> <p> </p> <p>\u0939\u092e \u092a\u093e\u0930\u094d\u0938 \u0915\u093f\u090f \u0917\u090f \u0921\u0947\u091f\u093e \u0914\u0930 \u0939\u092e \u091c\u093f\u0928 \u0917\u0924\u093f\u0935\u093f\u0927\u093f\u092f\u094b\u0902 \u092a\u0930 \u0915\u093e\u092e \u0915\u0930 \u0930\u0939\u0947 \u0939\u0948\u0902, \u0915\u0947 \u092c\u0940\u091a \u092e\u0947\u0932 \u0915\u0940 \u0916\u094b\u091c \u0915\u0930 \u0930\u0939\u0947 \u0939\u0948\u0902\u0964 \u091c\u0948\u0938\u093e \u0915\u093f \u0939\u092e \u092a\u094d\u0930\u093e\u0925\u092e\u093f\u0915\u0924\u093e \u0906\u0930\u0947\u0916 \u092e\u0947\u0902 \u0926\u0947\u0916 \u0938\u0915\u0924\u0947 \u0939\u0948\u0902, <code>Commands</code> \u0939\u092e\u0947\u0936\u093e \u092a\u0939\u0932\u0947 \u0906\u0924\u0947 \u0939\u0948\u0902\u0964</p> <p>\u0905\u0930\u094d\u0925\u093e\u0924 \u092f\u0926\u093f \u0905\u092a\u0921\u0947\u091f \u092e\u0947\u0902 \u092a\u093e\u0920 \u0932\u094b\u0921 \u0915\u093f\u0938\u0940 \u0915\u092e\u093e\u0902\u0921 \u0938\u0947 \u092e\u0947\u0932 \u0916\u093e\u0924\u093e \u0939\u0948, \u0924\u094b \u0906\u0917\u0947 <code>Inputs</code>, <code>Common</code> \u0915\u0940 \u0916\u094b\u091c \u0914\u0930 \u0928\u093f\u0936\u094d\u091a\u093f\u0924 \u0930\u0942\u092a \u0938\u0947 <code>Unprocessed</code> \u0915\u094d\u0930\u093f\u092f\u093e \u0915\u0947 \u0928\u093f\u0937\u094d\u092a\u093e\u0926\u0928 \u0928\u0939\u0940\u0902 \u0915\u093f\u090f \u091c\u093e\u090f\u0902\u0917\u0947\u0964</p> <p>\u090f\u0915\u092e\u093e\u0924\u094d\u0930 \u092c\u093e\u0924 \u092f\u0939 \u0939\u0948 \u0915\u093f \u092f\u0926\u093f \u0915\u094b\u0908 <code>UpdateHandlers</code> \u0939\u0948 \u0924\u094b \u0909\u0938\u0947 \u0938\u092e\u093e\u0928\u093e\u0902\u0924\u0930 \u092e\u0947\u0902 \u091f\u094d\u0930\u093f\u0917\u0930 \u0915\u093f\u092f\u093e \u091c\u093e\u090f\u0917\u093e\u0964</p>"},{"location":"hi/#commands","title":"Commands","text":"<p>\u0906\u0907\u090f \u0915\u092e\u093e\u0902\u0921\u094b\u0902 \u0914\u0930 \u0909\u0928\u0915\u0940 \u092a\u094d\u0930\u094b\u0938\u0947\u0938\u093f\u0902\u0917 \u092a\u0930 \u0905\u0927\u093f\u0915 \u0935\u093f\u0938\u094d\u0924\u093e\u0930 \u0938\u0947 \u0926\u0947\u0916\u0947\u0902\u0964</p> <p>\u091c\u0948\u0938\u093e \u0915\u093f \u0906\u092a\u0928\u0947 \u0926\u0947\u0916\u093e \u0939\u094b\u0917\u093e, \u0939\u093e\u0932\u093e\u0902\u0915\u093f \u0915\u092e\u093e\u0902\u0921\u094b\u0902 \u0915\u094b \u092a\u094d\u0930\u094b\u0938\u0947\u0938 \u0915\u0930\u0928\u0947 \u0915\u0947 \u0932\u093f\u090f \u090f\u0928\u094b\u091f\u0947\u0936\u0928 <code>CommandHandler</code> \u0915\u0939\u0932\u093e\u0924\u093e \u0939\u0948, \u092f\u0939 \u091f\u0947\u0932\u0940\u0917\u094d\u0930\u093e\u092e \u092c\u0949\u091f\u094d\u0938 \u092e\u0947\u0902 \u0915\u094d\u0932\u093e\u0938\u093f\u0915 \u0905\u0935\u0927\u093e\u0930\u0923\u093e \u0938\u0947 \u0905\u0927\u093f\u0915 \u092c\u0939\u0941\u092e\u0941\u0916\u0940 \u0939\u0948\u0964</p>"},{"location":"hi/#scopes","title":"Scopes","text":"<p>\u0910\u0938\u093e \u0907\u0938\u0932\u093f\u090f \u0939\u0948 \u0915\u094d\u092f\u094b\u0902\u0915\u093f \u0907\u0938\u092e\u0947\u0902 \u092a\u094d\u0930\u094b\u0938\u0947\u0938\u093f\u0902\u0917 \u0938\u0902\u092d\u093e\u0935\u0928\u093e\u0913\u0902 \u0915\u0940 \u0935\u094d\u092f\u093e\u092a\u0915 \u0938\u0940\u092e\u093e \u0939\u0948, \u0905\u0930\u094d\u0925\u093e\u0924 \u0932\u0915\u094d\u0937\u094d\u092f \u092b\u093c\u0902\u0915\u094d\u0936\u0928 \u0915\u094b \u0928 \u0915\u0947\u0935\u0932 \u092a\u093e\u0920 \u092e\u093f\u0932\u093e\u0928 \u092a\u0930 \u092c\u0932\u094d\u0915\u093f \u0909\u092a\u092f\u0941\u0915\u094d\u0924 \u0905\u092a\u0921\u0947\u091f \u0915\u0947 \u092a\u094d\u0930\u0915\u093e\u0930 \u092a\u0930 \u092d\u0940 \u092a\u0930\u093f\u092d\u093e\u0937\u093f\u0924 \u0915\u093f\u092f\u093e \u091c\u093e \u0938\u0915\u0924\u093e \u0939\u0948, \u092f\u0939 \u0938\u094d\u0915\u094b\u092a \u0915\u0940 \u0905\u0935\u0927\u093e\u0930\u0923\u093e \u0939\u0948\u0964</p> <p>\u0924\u0926\u0928\u0941\u0938\u093e\u0930, \u092a\u094d\u0930\u0924\u094d\u092f\u0947\u0915 \u0915\u092e\u093e\u0902\u0921 \u0915\u0947 \u092a\u093e\u0938 \u0938\u094d\u0915\u094b\u092a \u0915\u0940 \u0905\u0932\u0917-\u0905\u0932\u0917 \u0938\u0942\u091a\u0940 \u0915\u0947 \u0932\u093f\u090f \u0905\u0932\u0917-\u0905\u0932\u0917 \u0939\u0948\u0902\u0921\u0932\u0930 \u0939\u094b \u0938\u0915\u0924\u0947 \u0939\u0948\u0902, \u092f\u093e \u0907\u0938\u0915\u0947 \u0935\u093f\u092a\u0930\u0940\u0924, \u0915\u0908 \u0915\u0947 \u0932\u093f\u090f \u090f\u0915 \u0915\u092e\u093e\u0902\u0921 \u0939\u094b \u0938\u0915\u0924\u093e \u0939\u0948\u0964</p> <p>\u0928\u0940\u091a\u0947 \u0906\u092a \u0926\u0947\u0916 \u0938\u0915\u0924\u0947 \u0939\u0948\u0902 \u0915\u093f \u092a\u093e\u0920 \u092a\u0947\u0932\u094b\u0921 \u0914\u0930 \u0938\u094d\u0915\u094b\u092a \u0926\u094d\u0935\u093e\u0930\u093e \u092e\u0948\u092a\u093f\u0902\u0917 \u0915\u0948\u0938\u0947 \u0915\u0940 \u091c\u093e\u0924\u0940 \u0939\u0948:</p> <p> </p>"},{"location":"hi/#inputs","title":"Inputs","text":"<p>\u0905\u0917\u0932\u093e, \u092f\u0926\u093f \u092a\u093e\u0920 \u092a\u0947\u0932\u094b\u0921 \u0915\u093f\u0938\u0940 \u0915\u092e\u093e\u0902\u0921 \u0938\u0947 \u092e\u0947\u0932 \u0928\u0939\u0940\u0902 \u0916\u093e\u0924\u093e \u0939\u0948 \u0924\u094b \u0907\u0928\u092a\u0941\u091f \u092a\u0949\u0907\u0902\u091f\u094d\u0938 \u0915\u0940 \u0916\u094b\u091c \u0915\u0940 \u091c\u093e\u0924\u0940 \u0939\u0948\u0964</p> <p>\u0905\u0935\u0927\u093e\u0930\u0923\u093e \u0915\u092e\u093e\u0902\u0921\u0932\u093e\u0907\u0928 \u090f\u092a\u094d\u0932\u093f\u0915\u0947\u0936\u0928 \u092e\u0947\u0902 \u0907\u0928\u092a\u0941\u091f \u092a\u094d\u0930\u0924\u0940\u0915\u094d\u0937\u093e \u0915\u0947 \u0938\u092e\u093e\u0928 \u0939\u0948, \u0906\u092a \u092c\u0949\u091f \u0938\u0902\u0926\u0930\u094d\u092d \u092e\u0947\u0902 \u0915\u093f\u0938\u0940 \u0935\u093f\u0936\u0947\u0937 \u0909\u092a\u092f\u094b\u0917\u0915\u0930\u094d\u0924\u093e \u0915\u0947 \u0932\u093f\u090f \u090f\u0915 \u092a\u0949\u0907\u0902\u091f \u0930\u0916\u0924\u0947 \u0939\u0948\u0902 \u091c\u094b \u0909\u0938\u0915\u0947 \u0905\u0917\u0932\u0947 \u0907\u0928\u092a\u0941\u091f \u0915\u094b \u0938\u0902\u092d\u093e\u0932\u0947\u0917\u093e, \u0907\u0938\u092e\u0947\u0902 \u0915\u094d\u092f\u093e \u0939\u0948, \u0907\u0938\u0938\u0947 \u0915\u094b\u0908 \u092b\u0930\u094d\u0915 \u0928\u0939\u0940\u0902 \u092a\u0921\u093c\u0924\u093e, \u092e\u0941\u0916\u094d\u092f \u092c\u093e\u0924 \u092f\u0939 \u0939\u0948 \u0915\u093f \u0905\u0917\u0932\u093e \u0905\u092a\u0921\u0947\u091f \u092e\u0947\u0902 <code>User</code> \u0939\u094b\u0928\u093e \u091a\u093e\u0939\u093f\u090f \u0924\u093e\u0915\u093f \u0907\u0938\u0947 \u0938\u0947\u091f \u0907\u0928\u092a\u0941\u091f \u092a\u094d\u0930\u0924\u0940\u0915\u094d\u0937\u093e \u092a\u0949\u0907\u0902\u091f \u0938\u0947 \u0938\u0902\u092c\u0902\u0927\u093f\u0924 \u0915\u093f\u092f\u093e \u091c\u093e \u0938\u0915\u0947\u0964</p> <p>\u0928\u0940\u091a\u0947 \u0906\u092a \u0926\u0947\u0916 \u0938\u0915\u0924\u0947 \u0939\u0948\u0902 \u0915\u093f \u091c\u092c <code>Commands</code> \u092a\u0930 \u0915\u094b\u0908 \u092e\u0948\u091a \u0928\u0939\u0940\u0902 \u0939\u094b\u0924\u093e \u0939\u0948 \u0924\u094b \u0905\u092a\u0921\u0947\u091f \u0915\u094b \u092a\u094d\u0930\u094b\u0938\u0947\u0938 \u0915\u0930\u0928\u0947 \u0915\u093e \u0909\u0926\u093e\u0939\u0930\u0923:</p> <p> </p>"},{"location":"hi/#commons","title":"Commons","text":"<p>\u092f\u0926\u093f \u0939\u0948\u0902\u0921\u0932\u0930 \u0915\u094b\u0908 <code>commands</code> \u092f\u093e <code>inputs</code> \u0928\u0939\u0940\u0902 \u092a\u093e\u0924\u093e \u0939\u0948, \u0924\u094b \u092f\u0939 \u092a\u093e\u0920 \u0932\u094b\u0921 \u0915\u094b <code>common</code> \u0939\u0948\u0902\u0921\u0932\u0930\u094d\u0938 \u0915\u0947 \u0916\u093f\u0932\u093e\u092b \u091c\u093e\u0901\u091a\u0924\u093e \u0939\u0948\u0964</p> <p>\u0939\u092e \u0907\u0938\u0915\u093e \u0926\u0941\u0930\u0941\u092a\u092f\u094b\u0917 \u0915\u093f\u090f \u092c\u093f\u0928\u093e \u0909\u092a\u092f\u094b\u0917 \u0915\u0930\u0928\u0947 \u0915\u0940 \u0938\u0932\u093e\u0939 \u0926\u0947\u0924\u0947 \u0939\u0948\u0902, \u0915\u094d\u092f\u094b\u0902\u0915\u093f \u092f\u0939 \u0938\u092d\u0940 \u092a\u094d\u0930\u0935\u093f\u0937\u094d\u091f\u093f\u092f\u094b\u0902 \u092a\u0930 \u092a\u0941\u0928\u0930\u093e\u0935\u0943\u0924\u094d\u0924\u093f \u0915\u0930\u0924\u0947 \u0939\u0941\u090f \u091c\u093e\u0901\u091a \u0915\u0930\u0924\u093e \u0939\u0948\u0964</p>"},{"location":"hi/#unprocessed","title":"Unprocessed","text":"<p>\u0914\u0930 \u0905\u0902\u0924\u093f\u092e \u091a\u0930\u0923, \u092f\u0926\u093f \u0939\u0948\u0902\u0921\u0932\u0930 \u0915\u094b\u0908 \u092e\u093f\u0932\u093e\u0928 \u0917\u0924\u093f\u0935\u093f\u0927\u093f \u0928\u0939\u0940\u0902 \u092a\u093e\u0924\u093e \u0939\u0948 (<code>UpdateHandler</code> \u092a\u0942\u0930\u0940 \u0924\u0930\u0939 \u0938\u0947 \u0938\u092e\u093e\u0928\u093e\u0902\u0924\u0930 \u092e\u0947\u0902 \u0915\u093e\u092e \u0915\u0930\u0924\u093e \u0939\u0948 \u0914\u0930 \u0938\u093e\u092e\u093e\u0928\u094d\u092f \u0917\u0924\u093f\u0935\u093f\u0927\u093f \u0915\u0947 \u0930\u0942\u092a \u092e\u0947\u0902 \u0928\u0939\u0940\u0902 \u0917\u093f\u0928\u093e \u091c\u093e\u0924\u093e \u0939\u0948), \u0924\u094b <code>UnprocessedHandler</code> \u0938\u0915\u094d\u0930\u093f\u092f \u0939\u094b \u091c\u093e\u0924\u093e \u0939\u0948, \u092f\u0926\u093f \u092f\u0939 \u0938\u0947\u091f \u0939\u0948, \u0924\u094b \u092f\u0939 \u0907\u0938 \u092e\u093e\u092e\u0932\u0947 \u0915\u094b \u0938\u0902\u092d\u093e\u0932\u0947\u0917\u093e, \u092f\u0939 \u0909\u092a\u092f\u094b\u0917\u0915\u0930\u094d\u0924\u093e \u0915\u094b \u091a\u0947\u0924\u093e\u0935\u0928\u0940 \u0926\u0947\u0928\u0947 \u0915\u0947 \u0932\u093f\u090f \u0909\u092a\u092f\u094b\u0917\u0940 \u0939\u094b \u0938\u0915\u0924\u093e \u0939\u0948 \u0915\u093f \u0915\u0941\u091b \u0917\u0932\u0924 \u0939\u094b \u0917\u092f\u093e \u0939\u0948\u0964</p> <p>\u0905\u0927\u093f\u0915 \u0935\u093f\u0938\u094d\u0924\u0943\u0924 \u091c\u093e\u0928\u0915\u093e\u0930\u0940 \u0915\u0947 \u0932\u093f\u090f Handlers article \u092a\u0922\u093c\u0947\u0902\u0964</p>"},{"location":"hi/#activity-ratelimiter","title":"Activity RateLimiter","text":"<p>\u0917\u0924\u093f\u0935\u093f\u0927\u093f \u0916\u094b\u091c\u0928\u0947 \u0915\u0947 \u092c\u093e\u0926, \u092f\u0939 \u0917\u0924\u093f\u0935\u093f\u0927\u093f \u092a\u0948\u0930\u093e\u092e\u0940\u091f\u0930 \u092e\u0947\u0902 \u0928\u093f\u0930\u094d\u0926\u093f\u0937\u094d\u091f \u092a\u0948\u0930\u093e\u092e\u0940\u091f\u0930 \u0915\u0947 \u0905\u0928\u0941\u0938\u093e\u0930 \u0909\u092a\u092f\u094b\u0917\u0915\u0930\u094d\u0924\u093e \u0915\u0940 \u0926\u0930 \u0938\u0940\u092e\u093e\u0913\u0902 \u0915\u0940 \u092d\u0940 \u091c\u093e\u0901\u091a \u0915\u0930\u0924\u093e \u0939\u0948\u0964</p>"},{"location":"hi/#activity","title":"Activity","text":"<p>Activity \u091f\u0947\u0932\u0940\u0917\u094d\u0930\u093e\u092e \u092c\u0949\u091f \u0932\u093e\u0907\u092c\u094d\u0930\u0947\u0930\u0940 \u0926\u094d\u0935\u093e\u0930\u093e \u0938\u0902\u092d\u093e\u0932\u0940 \u091c\u093e \u0938\u0915\u0928\u0947 \u0935\u093e\u0932\u0940 \u0935\u093f\u092d\u093f\u0928\u094d\u0928 \u092a\u094d\u0930\u0915\u093e\u0930 \u0915\u0947 \u0939\u0948\u0902\u0921\u0932\u0930\u094d\u0938 \u0915\u094b \u0938\u0902\u0926\u0930\u094d\u092d\u093f\u0924 \u0915\u0930\u0924\u093e \u0939\u0948, \u091c\u093f\u0938\u092e\u0947\u0902 Commands, Inputs, Regexes \u0914\u0930 Unprocessed handler \u0936\u093e\u092e\u093f\u0932 \u0939\u0948\u0902\u0964</p>"},{"location":"hi/#invocation","title":"Invocation","text":"<p>\u0905\u0902\u0924\u093f\u092e \u092a\u094d\u0930\u094b\u0938\u0947\u0938\u093f\u0902\u0917 \u091a\u0930\u0923 \u092a\u093e\u0908 \u0917\u0908 \u0917\u0924\u093f\u0935\u093f\u0927\u093f \u0915\u093e \u0906\u0939\u094d\u0935\u093e\u0928 \u0939\u0948\u0964</p> <p>\u0905\u0927\u093f\u0915 \u0935\u093f\u0935\u0930\u0923 invocation article \u092e\u0947\u0902 \u092a\u093e\u090f \u091c\u093e \u0938\u0915\u0924\u0947 \u0939\u0948\u0902\u0964</p>"},{"location":"hi/Actions/#all-requests-is-actions","title":"All requests is Actions","text":"<p>\u0938\u092d\u0940 \u091f\u0947\u0932\u0940\u0917\u094d\u0930\u093e\u092e API \u0905\u0928\u0941\u0930\u094b\u0927 \u0935\u093f\u092d\u093f\u0928\u094d\u0928 \u092a\u094d\u0930\u0915\u093e\u0930 \u0915\u0947 <code>TgAction</code> \u0907\u0902\u091f\u0930\u092b\u0947\u0938 \u0939\u0948\u0902 \u091c\u094b \u0935\u093f\u092d\u093f\u0928\u094d\u0928 \u0935\u093f\u0927\u093f\u092f\u094b\u0902 \u0915\u094b \u0932\u093e\u0917\u0942 \u0915\u0930\u0924\u0947 \u0939\u0948\u0902 \u091c\u0948\u0938\u0947 <code>SendMessageAction</code>, \u091c\u093f\u0928\u094d\u0939\u0947\u0902 \u0938\u0941\u0935\u093f\u0927\u093e \u0915\u0947 \u0932\u093f\u090f <code>message()</code> \u092a\u094d\u0930\u0915\u093e\u0930 \u0915\u0947 \u092b\u093c\u0902\u0915\u094d\u0936\u0928\u094b\u0902 \u0915\u0947 \u0930\u0942\u092a \u092e\u0947\u0902 \u0932\u092a\u0947\u091f\u093e \u0917\u092f\u093e \u0939\u0948\u0964</p> <p> </p> <p>\u092a\u094d\u0930\u0924\u094d\u092f\u0947\u0915 <code>Action</code> \u0915\u0947 \u092a\u093e\u0938 \u0905\u092a\u0928\u0940 \u0938\u0902\u092d\u093e\u0935\u093f\u0924 \u0935\u093f\u0927\u093f\u092f\u093e\u0901 \u0939\u094b \u0938\u0915\u0924\u0940 \u0939\u0948\u0902, \u0909\u092a\u0932\u092c\u094d\u0927 <code>Feature</code> \u0915\u0947 \u0906\u0927\u093e\u0930 \u092a\u0930\u0964</p>"},{"location":"hi/Actions/#features","title":"Features","text":"<p>\u0935\u093f\u092d\u093f\u0928\u094d\u0928 \u0915\u094d\u0930\u093f\u092f\u093e\u0913\u0902 \u092e\u0947\u0902 \u091f\u0947\u0932\u0940\u0917\u094d\u0930\u093e\u092e \u092c\u0949\u091f API \u0915\u0947 \u0906\u0927\u093e\u0930 \u092a\u0930 \u0935\u093f\u092d\u093f\u0928\u094d\u0928 <code>Features</code> \u0939\u094b \u0938\u0915\u0924\u0947 \u0939\u0948\u0902, \u091c\u0948\u0938\u0947: <code>OptionsFeature</code>, <code>MarkupFeature</code> <code>EntitiesFeature</code> <code>CaptionFeature</code>.</p> <p>\u0906\u0907\u090f \u0909\u0928\u094d\u0939\u0947\u0902 \u092c\u093e\u0930\u0940\u0915\u0940 \u0938\u0947 \u0926\u0947\u0916\u0947\u0902:</p>"},{"location":"hi/Actions/#options","title":"Options","text":"<p>\u0909\u0926\u093e\u0939\u0930\u0923 \u0915\u0947 \u0932\u093f\u090f, <code>OptionsFeature</code> \u0935\u0948\u0915\u0932\u094d\u092a\u093f\u0915 \u092a\u0948\u0930\u093e\u092e\u0940\u091f\u0930 \u092a\u093e\u0938 \u0915\u0930\u0928\u0947 \u0915\u0947 \u0932\u093f\u090f \u0909\u092a\u092f\u094b\u0917 \u0915\u093f\u092f\u093e \u091c\u093e\u0924\u093e \u0939\u0948\u0964</p> <p>\u092a\u094d\u0930\u0924\u094d\u092f\u0947\u0915 \u0915\u094d\u0930\u093f\u092f\u093e \u0915\u0947 \u092a\u093e\u0938 \u0905\u092a\u0928\u0947 \u092a\u094d\u0930\u0915\u093e\u0930 \u0915\u0947 \u0935\u093f\u0915\u0932\u094d\u092a \u0939\u094b\u0924\u0947 \u0939\u0948\u0902, \u091c\u093f\u0928\u094d\u0939\u0947\u0902 \u0906\u092a <code>Action</code> \u092e\u0947\u0902 \u0938\u094d\u0935\u092f\u0902 <code>options</code> \u092a\u0948\u0930\u093e\u092e\u0940\u091f\u0930 \u092e\u0947\u0902, \u0917\u0941\u0923 \u0905\u0928\u0941\u092d\u093e\u0917 \u092e\u0947\u0902 \u0926\u0947\u0916 \u0938\u0915\u0924\u0947 \u0939\u0948\u0902\u0964 \u0909\u0926\u093e\u0939\u0930\u0923 \u0915\u0947 \u0932\u093f\u090f, <code>sendMessage</code> \u091c\u093f\u0938\u092e\u0947\u0902 \u0935\u093f\u092d\u093f\u0928\u094d\u0928 \u092a\u0948\u0930\u093e\u092e\u0940\u091f\u0930\u094b\u0902 \u0915\u0947 \u0938\u093e\u0925 \u0935\u093f\u0915\u0932\u094d\u092a\u094b\u0902 \u0915\u0947 \u0930\u0942\u092a \u092e\u0947\u0902 <code>MessageOptions</code> \u0921\u0947\u091f\u093e \u0915\u094d\u0932\u093e\u0938 \u0939\u094b\u0924\u093e \u0939\u0948\u0964</p> <p>\u0909\u0926\u093e\u0939\u0930\u0923 \u0909\u092a\u092f\u094b\u0917:</p> <pre><code>message{ \"*Test*\" }.options {\n    parseMode = ParseMode.Markdown\n}.send(user, bot)\n</code></pre>"},{"location":"hi/Actions/#markup","title":"Markup","text":"<p>\u0915\u0940\u092c\u094b\u0930\u094d\u0921 \u0915\u0947 \u0938\u092d\u0940 \u092a\u094d\u0930\u0915\u093e\u0930\u094b\u0902 \u0915\u093e \u0938\u092e\u0930\u094d\u0925\u0928 \u0915\u0930\u0928\u0947 \u0935\u093e\u0932\u0947 \u092e\u093e\u0930\u094d\u0915\u0905\u092a \u092d\u0947\u091c\u0928\u0947 \u0915\u0947 \u0932\u093f\u090f \u090f\u0915 \u0935\u093f\u0927\u093f \u092d\u0940 \u0939\u0948: <code>ReplyKeyboardMarkup</code>, <code>InlineKeyboardMarkup</code>, <code>ForceReply</code>, <code>ReplyKeyboardRemove</code>\u0964</p>"},{"location":"hi/Actions/#inline-keyboard-markup","title":"Inline Keyboard Markup","text":"<p>\u092f\u0939 \u092c\u093f\u0932\u094d\u0921\u0930 \u0906\u092a\u0915\u094b \u0915\u093f\u0938\u0940 \u092d\u0940 \u092a\u0948\u0930\u093e\u092e\u0940\u091f\u0930 \u0938\u0902\u092f\u094b\u091c\u0928 \u0915\u0947 \u0938\u093e\u0925 \u0907\u0928\u0932\u093e\u0907\u0928 \u092c\u091f\u0928 \u092c\u0928\u093e\u0928\u0947 \u0915\u0940 \u0905\u0928\u0941\u092e\u0924\u093f \u0926\u0947\u0924\u093e \u0939\u0948\u0964</p> <pre><code>message{ \"Test\" }.inlineKeyboardMarkup {\n    \"name\" callback \"callbackData\"         //\n    \"buttonName\" url \"https://google.com\"  //--- \u092f\u0947 \u0926\u094b\u0928\u094b\u0902 \u092c\u091f\u0928 \u090f\u0915 \u0939\u0940 \u092a\u0902\u0915\u094d\u0924\u093f \u092e\u0947\u0902 \u0939\u094b\u0902\u0917\u0947\u0964\n    newLine() // or br()\n    \"otherButton\" webAppInfo \"data\"       // \u092f\u0939 \u0905\u0928\u094d\u092f \u092a\u0902\u0915\u094d\u0924\u093f \u092e\u0947\u0902 \u0939\u094b\u0917\u093e\n\n    // \u0906\u092a \u092c\u093f\u0932\u094d\u0921\u0930 \u0915\u0947 \u092d\u0940\u0924\u0930 \u0935\u093f\u092d\u093f\u0928\u094d\u0928 \u0936\u0948\u0932\u093f\u092f\u094b\u0902 \u0915\u093e \u092d\u0940 \u0909\u092a\u092f\u094b\u0917 \u0915\u0930 \u0938\u0915\u0924\u0947 \u0939\u0948\u0902:\n    callbackData(\"buttonName\") { \"callbackData\" }\n}.send(user, bot)\n</code></pre> <p>\u0905\u0927\u093f\u0915 \u0935\u093f\u0935\u0930\u0923 \u092c\u093f\u0932\u094d\u0921\u0930 \u0926\u0938\u094d\u0924\u093e\u0935\u0947\u091c\u093c\u0940\u0915\u0930\u0923 \u092e\u0947\u0902 \u0926\u0947\u0916\u0947 \u091c\u093e \u0938\u0915\u0924\u0947 \u0939\u0948\u0902\u0964</p>"},{"location":"hi/Actions/#reply-keyboard-markup","title":"Reply Keyboard Markup","text":"<p>\u092f\u0939 \u092c\u093f\u0932\u094d\u0921\u0930 \u092e\u0947\u0928\u0942 \u092c\u091f\u0928 \u092c\u0928\u093e\u0928\u0947 \u0915\u0940 \u0905\u0928\u0941\u092e\u0924\u093f \u0926\u0947\u0924\u093e \u0939\u0948\u0964</p> <pre><code>message{ \"Test\" }.replyKeyboardMarkup {\n  + \"Menu button\"     // \u0906\u092a \u092f\u0942\u0928\u0930\u0940 \u092a\u094d\u0932\u0938 \u0911\u092a\u0930\u0947\u091f\u0930 \u0915\u093e \u0909\u092a\u092f\u094b\u0917 \u0915\u0930\u0915\u0947 \u092c\u091f\u0928 \u091c\u094b\u0921\u093c \u0938\u0915\u0924\u0947 \u0939\u0948\u0902\n  + \"Menu button 2\"\n  br() // \u0926\u0942\u0938\u0930\u0940 \u092a\u0902\u0915\u094d\u0924\u093f \u092a\u0930 \u091c\u093e\u090f\u0902\n  \"Send polls \ud83d\udc40\" requestPoll true   // \u092a\u0948\u0930\u093e\u092e\u0940\u091f\u0930 \u0915\u0947 \u0938\u093e\u0925 \u092c\u091f\u0928\n\n  options {\n    resizeKeyboard = true\n  }\n}.send(user, bot)\n</code></pre> <p>\u0915\u0940\u092c\u094b\u0930\u094d\u0921 \u092a\u0930 \u0932\u093e\u0917\u0942 \u0939\u094b\u0928\u0947 \u0935\u093e\u0932\u0947 \u0905\u0924\u093f\u0930\u093f\u0915\u094d\u0924 \u0935\u093f\u0915\u0932\u094d\u092a <code>ReplyKeyboardMarkupOptions</code> \u092e\u0947\u0902 \u0926\u0947\u0916\u0947 \u091c\u093e \u0938\u0915\u0924\u0947 \u0939\u0948\u0902\u0964</p> <p>\u0935\u093f\u0927\u093f\u092f\u094b\u0902 \u0915\u0947 \u092c\u093e\u0930\u0947 \u092e\u0947\u0902 \u0905\u0927\u093f\u0915 \u0935\u093f\u0935\u0930\u0923 \u0915\u0947 \u0932\u093f\u090f \u092c\u093f\u0932\u094d\u0921\u0930 \u0926\u0938\u094d\u0924\u093e\u0935\u0947\u091c\u093c\u0940\u0915\u0930\u0923 \u0926\u0947\u0916\u0947\u0902\u0964</p> <p>\u0915\u0940\u092c\u094b\u0930\u094d\u0921 \u092e\u093e\u0930\u094d\u0915\u0905\u092a \u090f\u0915\u0924\u094d\u0930 \u0915\u0930\u0928\u0947 \u0915\u0947 \u0932\u093f\u090f \u0921\u0940\u090f\u0938\u090f\u0932 \u0915\u093e \u0909\u092a\u092f\u094b\u0917 \u0915\u0930\u0928\u093e \u0905\u0927\u093f\u0915\u093e\u0902\u0936\u0924\u0903 \u0938\u0941\u0935\u093f\u0927\u093e\u091c\u0928\u0915 \u0939\u0948, \u0932\u0947\u0915\u093f\u0928 \u092f\u0926\u093f \u0906\u0935\u0936\u094d\u092f\u0915 \u0939\u094b, \u0924\u094b \u0906\u092a \u092e\u093e\u0930\u094d\u0915\u0905\u092a \u0915\u094b \u092e\u0948\u0928\u094d\u092f\u0941\u0905\u0932 \u0930\u0942\u092a \u0938\u0947 \u092d\u0940 \u091c\u094b\u0921\u093c \u0938\u0915\u0924\u0947 \u0939\u0948\u0902\u0964</p> <pre><code>message{ \"*Test*\" }.markup {\n    InlineKeyboardMarkup(\n        InlineKeyboardButton(\"test\", callbackData = \"testCallback\")\n    )\n}.send(user, bot)\n</code></pre> <pre><code>message{ \"*Test*\" }.markup {\n    ReplyKeyboardMarkup(\n        KeyboardButton(\"Test menu button\")\n    )\n}.send(user, bot)\n</code></pre>"},{"location":"hi/Actions/#entities","title":"Entities","text":"<p><code>MessageEntity</code> \u092d\u0947\u091c\u0928\u0947 \u0915\u0947 \u0932\u093f\u090f \u090f\u0915 \u0935\u093f\u0927\u093f \u092d\u0940 \u0939\u0948\u0964</p> <p>\u0909\u0926\u093e\u0939\u0930\u0923 \u0909\u092a\u092f\u094b\u0917:</p> <pre><code>message{ \"Test \\$hello\" }.replyKeyboardMarkup {\n    +\"Test menu button\"\n}.entities {\n    5 to 15 url \"https://google.com\" // TextLink \u091c\u094b\u0921\u093c\u0947\u0902\n    entity(EntityType.Bold, 0, 4)\n    entity(EntityType.Cashtag, 5, 5) // \u092c\u0948\u0915\u0938\u094d\u0932\u0948\u0936 \u0915\u0940 \u0917\u093f\u0928\u0924\u0940 \u0928\u0939\u0940\u0902 \u0939\u094b\u0924\u0940 (\u0915\u094d\u092f\u094b\u0902\u0915\u093f \u0907\u0938\u0915\u093e \u0909\u092a\u092f\u094b\u0917 \u0915\u0902\u092a\u093e\u0907\u0932\u0930 \u0915\u0947 \u0932\u093f\u090f \u0915\u093f\u092f\u093e \u091c\u093e\u0924\u093e \u0939\u0948)\n}.send(user, bot)\n</code></pre>"},{"location":"hi/Actions/#contextual-entities","title":"Contextual entities.","text":"<p>\u090f\u0902\u091f\u093f\u091f\u0940\u091c \u0915\u094b \u0915\u0941\u091b \u0928\u093f\u0930\u094d\u092e\u093e\u0923\u094b\u0902 \u0915\u0947 \u0938\u0902\u0926\u0930\u094d\u092d \u0915\u0947 \u092e\u093e\u0927\u094d\u092f\u092e \u0938\u0947 \u092d\u0940 \u091c\u094b\u0921\u093c\u093e \u091c\u093e \u0938\u0915\u0924\u093e \u0939\u0948, \u0909\u0928\u094d\u0939\u0947\u0902 \u0935\u093f\u0936\u093f\u0937\u094d\u091f EntitiesContextBuilder \u0907\u0902\u091f\u0930\u092b\u0947\u0938 \u0915\u0947 \u0938\u093e\u0925 \u0932\u0947\u092c\u0932 \u0915\u093f\u092f\u093e \u091c\u093e\u0924\u093e \u0939\u0948, \u092f\u0939 \u0915\u0948\u092a\u094d\u0936\u0928 \u0938\u0941\u0935\u093f\u0927\u093e \u092e\u0947\u0902 \u092d\u0940 \u092e\u094c\u091c\u0942\u0926 \u0939\u0948\u0964</p> <p>\u0909\u0926\u093e\u0939\u0930\u0923 \u0909\u092a\u092f\u094b\u0917:</p> <pre><code>message { \"usual text \" - bold { \"this is bold text\" } - \" continue usual\" }.send(user, bot)\n</code></pre> <p>\u0938\u092d\u0940 \u092a\u094d\u0930\u0915\u093e\u0930 \u0915\u0947 \u090f\u0902\u091f\u093f\u091f\u0940 \u092a\u094d\u0930\u0915\u093e\u0930 \u0938\u092e\u0930\u094d\u0925\u093f\u0924 \u0939\u0948\u0902\u0964</p>"},{"location":"hi/Actions/#caption","title":"Caption","text":"<p>\u0938\u093e\u0925 \u0939\u0940, \u092e\u0940\u0921\u093f\u092f\u093e \u092b\u093c\u093e\u0907\u0932\u094b\u0902 \u092e\u0947\u0902 \u0915\u0948\u092a\u094d\u0936\u0928 \u091c\u094b\u0921\u093c\u0928\u0947 \u0915\u0947 \u0932\u093f\u090f <code>caption</code> \u0935\u093f\u0927\u093f \u0915\u093e \u0909\u092a\u092f\u094b\u0917 \u0915\u093f\u092f\u093e \u091c\u093e \u0938\u0915\u0924\u093e \u0939\u0948\u0964</p> <p>\u0909\u0926\u093e\u0939\u0930\u0923 \u0909\u092a\u092f\u094b\u0917:</p> <pre><code>photo { \"FILE_ID\" }.caption { \"Test caption\" }.send(user, bot)\n</code></pre>"},{"location":"hi/Activites-and-Processors/#_1","title":"\u092a\u0930\u093f\u091a\u092f","text":"<p>\u0907\u0938 \u0932\u093e\u0907\u092c\u094d\u0930\u0947\u0930\u0940 \u0915\u0947 \u0938\u0902\u0926\u0930\u094d\u092d \u092e\u0947\u0902 <code>Activity</code> \u0935\u0939 \u0905\u092e\u0942\u0930\u094d\u0924 \u0907\u0915\u093e\u0908 \u0939\u0948 \u091c\u094b <code>@CommandHandler</code>, <code>@InputHandler</code>, <code>@UnprocessedHandler</code>, \u0914\u0930 <code>@CommonHandler</code> \u091c\u0948\u0938\u0940 \u0907\u0915\u093e\u0907\u092f\u094b\u0902 \u0915\u093e \u0938\u093e\u092e\u093e\u0928\u094d\u092f\u0940\u0915\u0930\u0923 \u0939\u0948\u0964</p> <p>handlers article \u0932\u0947\u0916 \u092d\u0940 \u0926\u0947\u0916\u0947\u0902\u0964</p>"},{"location":"hi/Activites-and-Processors/#_2","title":"\u0917\u0924\u093f\u0935\u093f\u0927\u093f\u092f\u094b\u0902 \u0915\u093e \u0938\u0902\u0915\u0932\u0928","text":"<p>\u0917\u0924\u093f\u0935\u093f\u0927\u093f\u092f\u094b\u0902 \u0915\u094b \u0938\u0902\u0915\u0932\u0928 \u0938\u092e\u092f \u092e\u0947\u0902 \u0938\u092d\u0940 \u0938\u0902\u0926\u0930\u094d\u092d\u094b\u0902 \u0915\u0947 \u0938\u093e\u0925 \u090f\u0915\u0924\u094d\u0930\u093f\u0924 \u0914\u0930 \u0924\u0948\u092f\u093e\u0930 \u0915\u093f\u092f\u093e \u091c\u093e\u0924\u093e \u0939\u0948 (\u0915\u093e\u0930\u094d\u092f\u093e\u0924\u094d\u092e\u0915 \u0921\u0940\u090f\u0938\u090f\u0932 \u0915\u0947 \u092e\u093e\u0927\u094d\u092f\u092e \u0938\u0947 \u092a\u0930\u093f\u092d\u093e\u0937\u093f\u0924 \u0915\u094b \u091b\u094b\u0921\u093c\u0915\u0930)\u0964</p> <p>\u092f\u0926\u093f \u0906\u092a \u0909\u0938 \u0915\u094d\u0937\u0947\u0924\u094d\u0930 \u0915\u094b \u0938\u0940\u092e\u093f\u0924 \u0915\u0930\u0928\u093e \u091a\u093e\u0939\u0924\u0947 \u0939\u0948\u0902 \u091c\u093f\u0938\u092e\u0947\u0902 \u092a\u0948\u0915\u0947\u091c \u0915\u0940 \u0916\u094b\u091c \u0915\u0940 \u091c\u093e\u090f\u0917\u0940, \u0924\u094b \u0906\u092a \u092a\u094d\u0932\u0917\u0907\u0928 \u092e\u0947\u0902 \u092a\u0948\u0930\u093e\u092e\u0940\u091f\u0930 \u092a\u093e\u0938 \u0915\u0930 \u0938\u0915\u0924\u0947 \u0939\u0948\u0902:</p> <pre><code>ktGram {\n    packages = listOf(\"com.example.mybot\")\n}\n</code></pre> <p>\u092f\u093e \u092a\u094d\u0932\u0917\u0907\u0928 \u0915\u0947 \u092c\u093f\u0928\u093e ksp \u0915\u0947 \u092e\u093e\u0927\u094d\u092f\u092e \u0938\u0947:</p> <pre><code>ksp {\n    arg(\"package\", \"com.example.mybot\")\n}\n</code></pre> <p>\u0927\u094d\u092f\u093e\u0928 \u0926\u0947\u0902 \u0915\u093f \u0910\u0938\u0947 \u092e\u093e\u092e\u0932\u0947 \u092e\u0947\u0902, \u090f\u0915\u0924\u094d\u0930\u093f\u0924 \u0915\u094d\u0930\u093f\u092f\u093e\u0913\u0902 \u0915\u094b \u0938\u0939\u0940 \u0922\u0902\u0917 \u0938\u0947 \u0938\u0902\u0938\u093e\u0927\u093f\u0924 \u0915\u0930\u0928\u0947 \u0915\u0947 \u0932\u093f\u090f, \u0906\u092a\u0915\u094b \u0938\u094d\u0935\u092f\u0902 \u0909\u0926\u093e\u0939\u0930\u0923 \u092e\u0947\u0902 \u092d\u0940 \u092a\u0948\u0915\u0947\u091c \u0928\u093f\u0930\u094d\u0926\u093f\u0937\u094d\u091f \u0915\u0930\u0928\u093e \u0939\u094b\u0917\u093e\u0964</p> <pre><code>fun main() = runBlocking {\n    val bot = TelegramBot(\"BOT_TOKEN\", \"com.example.mybot\")\n\n    bot.handleUpdates()\n    // long-polling listener \u0936\u0941\u0930\u0942 \u0915\u0930\u0947\u0902\n}\n</code></pre> <p>\u092f\u0939 \u0935\u093f\u0915\u0932\u094d\u092a \u0907\u0938\u0932\u093f\u090f \u091c\u094b\u0921\u093c\u093e \u0917\u092f\u093e \u0939\u0948 \u0924\u093e\u0915\u093f \u090f\u0915\u093e\u0927\u093f\u0915 \u092c\u0949\u091f \u0909\u0926\u093e\u0939\u0930\u0923 \u091a\u0932\u093e\u090f \u091c\u093e \u0938\u0915\u0947\u0902:</p> <pre><code>ktGram {\n    packages = listOf(\"com.example.mybot\", \"com.example.mybot2\")\n}\n</code></pre> <p>\u092f\u093e \u092f\u0926\u093f \u0906\u092a \u092a\u094d\u0932\u0917\u0907\u0928 \u0915\u093e \u0909\u092a\u092f\u094b\u0917 \u0928\u0939\u0940\u0902 \u0915\u0930 \u0930\u0939\u0947 \u0939\u0948\u0902 \u0924\u094b \u0935\u093f\u092d\u093f\u0928\u094d\u0928 \u092a\u0948\u0915\u0947\u091c \u0928\u093f\u0930\u094d\u0926\u093f\u0937\u094d\u091f \u0915\u0930\u0928\u0947 \u0915\u0947 \u0932\u093f\u090f \u0906\u092a\u0915\u094b \u0909\u0928\u094d\u0939\u0947\u0902 <code>;</code> \u0905\u0932\u0917 \u0915\u0930\u0928\u0947 \u0935\u093e\u0932\u0947 \u0915\u0947 \u0938\u093e\u0925 \u0928\u093f\u0930\u094d\u0926\u093f\u0937\u094d\u091f \u0915\u0930\u0928\u093e \u0939\u094b\u0917\u093e:</p> <pre><code>ksp {\n    arg(\"package\", \"com.example.mybot;com.example.mybot2\")\n}\n</code></pre>"},{"location":"hi/Activites-and-Processors/#_3","title":"\u092a\u094d\u0930\u0938\u0902\u0938\u094d\u0915\u0930\u0923","text":""},{"location":"hi/Activites-and-Processors/#_4","title":"\u0935\u0947\u092c\u0939\u0941\u0915","text":"<p>\u0905\u092a\u0928\u0947 \u0928\u093f\u092f\u0902\u0924\u094d\u0930\u0915 (\u092f\u093e \u0915\u093f\u0938\u0940 \u0905\u0928\u094d\u092f \u0938\u094d\u0925\u093e\u0928 \u092a\u0930 \u091c\u0939\u093e\u0902 <code>webhook</code> \u0938\u0902\u0938\u093e\u0927\u093f\u0924 \u0915\u093f\u092f\u093e \u091c\u093e\u0924\u093e \u0939\u0948) \u092e\u0947\u0902, \u0906\u092a \u0915\u0949\u0932 \u0915\u0930\u0947\u0902: <code>bot.update.parseAndHandle(webhookString)</code></p>"},{"location":"hi/Activites-and-Processors/#_5","title":"\u0932\u0902\u092c\u093e \u092a\u094b\u0932\u093f\u0902\u0917","text":"<p>\u0915\u0949\u0932 \u0915\u0930\u0947\u0902: <code>bot.handleUpdates()</code> \u092f\u093e <code>bot.update.setListener { handle(it) }</code> \u0915\u0947 \u092e\u093e\u0927\u094d\u092f\u092e \u0938\u0947</p>"},{"location":"hi/Activites-and-Processors/#_6","title":"\u0926\u0947\u0916\u0947\u0902 \u092d\u0940","text":"<ul> <li>Update parsing</li> <li>Activity invocation</li> <li>Actions</li> </ul>"},{"location":"hi/Activity-invocation/","title":"Activity Invocation","text":"<p>Activity invocation \u0915\u0947 \u0926\u094c\u0930\u093e\u0928, \u092c\u0949\u091f \u0915\u0902\u091f\u0947\u0915\u094d\u0938\u094d\u091f \u0915\u094b \u092a\u093e\u0938 \u0915\u0930\u0928\u093e \u0938\u0902\u092d\u0935 \u0939\u0948, \u0915\u094d\u092f\u094b\u0902\u0915\u093f \u0907\u0938\u0947 \u0932\u0915\u094d\u0937\u094d\u092f \u092b\u093c\u0902\u0915\u094d\u0936\u0928\u094d\u0938 \u092e\u0947\u0902 \u092a\u0948\u0930\u093e\u092e\u0940\u091f\u0930 \u0915\u0947 \u0930\u0942\u092a \u092e\u0947\u0902 \u0918\u094b\u0937\u093f\u0924 \u0915\u093f\u092f\u093e \u0917\u092f\u093e \u0939\u0948\u0964</p> <p>\u091c\u094b \u092a\u0948\u0930\u093e\u092e\u0940\u091f\u0930 \u092a\u093e\u0938 \u0915\u093f\u090f \u091c\u093e \u0938\u0915\u0924\u0947 \u0939\u0948\u0902:</p> <ul> <li><code>ProcessedUpdate</code> (\u0914\u0930 \u0907\u0938\u0915\u0940 \u0938\u092d\u0940 \u0938\u092c\u0915\u094d\u0932\u093e\u0938\u0947\u0938) - \u0935\u0930\u094d\u0924\u092e\u093e\u0928 \u092a\u094d\u0930\u094b\u0938\u0947\u0938\u093f\u0902\u0917 \u0905\u092a\u0921\u0947\u091f\u0964</li> <li><code>ProcessingContext</code> - \u090f\u0915\u094d\u091f\u093f\u0935\u093f\u091f\u0940 \u0939\u0948\u0902\u0921\u0932\u093f\u0902\u0917 \u0915\u093e \u0928\u093f\u092e\u094d\u0928 \u0938\u094d\u0924\u0930\u0940\u092f \u0915\u0902\u091f\u0947\u0915\u094d\u0938\u094d\u091f\u0964</li> <li><code>User</code> - \u092f\u0926\u093f \u092e\u094c\u091c\u0942\u0926 \u0939\u0948\u0964</li> <li><code>Chat</code> - \u092f\u0926\u093f \u092e\u094c\u091c\u0942\u0926 \u0939\u0948\u0964</li> <li><code>TelegramBot</code> - \u0935\u0930\u094d\u0924\u092e\u093e\u0928 \u092c\u0949\u091f \u0907\u0902\u0938\u094d\u091f\u0947\u0902\u0938\u0964</li> </ul> <p>\u0915\u0938\u094d\u091f\u092e \u092a\u094d\u0930\u0915\u093e\u0930 \u091c\u094b\u0921\u093c\u0928\u093e \u092d\u0940 \u0938\u0902\u092d\u0935 \u0939\u0948 \u092a\u093e\u0938 \u0915\u0930\u0928\u0947 \u0915\u0947 \u0932\u093f\u090f\u0964</p> <p>\u0910\u0938\u093e \u0915\u0930\u0928\u0947 \u0915\u0947 \u0932\u093f\u090f, \u090f\u0915 \u0915\u094d\u0932\u093e\u0938 \u091c\u094b\u0921\u093c\u0947\u0902 \u091c\u094b <code>Autowiring&lt;T&gt;</code> \u0915\u094b implement \u0915\u0930\u0924\u0940 \u0939\u0948 \u0914\u0930 \u0907\u0938\u0947 <code>@Injectable</code> \u090f\u0928\u094b\u091f\u0947\u0936\u0928 \u0938\u0947 \u091a\u093f\u0939\u094d\u0928\u093f\u0924 \u0915\u0930\u0947\u0902\u0964</p> <p><code>Autowiring</code> \u0907\u0902\u091f\u0930\u092b\u093c\u0947\u0938 \u0915\u094b implement \u0915\u0930\u0928\u0947 \u0915\u0947 \u092c\u093e\u0926 - <code>T</code> \u0932\u0915\u094d\u0937\u094d\u092f \u092b\u093c\u0902\u0915\u094d\u0936\u0928\u094d\u0938 \u092e\u0947\u0902 \u092a\u093e\u0938 \u0915\u0930\u0928\u0947 \u0915\u0947 \u0932\u093f\u090f \u0909\u092a\u0932\u092c\u094d\u0927 \u0939\u094b\u0917\u093e \u0914\u0930 \u0907\u0902\u091f\u0930\u092b\u093c\u0947\u0938 \u092e\u0947\u0902 \u0935\u0930\u094d\u0923\u093f\u0924 \u0935\u093f\u0927\u093f \u0915\u0947 \u092e\u093e\u0927\u094d\u092f\u092e \u0938\u0947 \u092a\u094d\u0930\u093e\u092a\u094d\u0924 \u0915\u093f\u092f\u093e \u091c\u093e\u090f\u0917\u093e\u0964</p> <pre><code>@Injectable\nobject UserResolver : Autowiring&lt;UserRecord&gt; {\n    override suspend fun get(update: ProcessedUpdate, bot: TelegramBot): UserRecord? {\n        return userRepository.getUserByTgId(update.user.id)\n    }\n}\n</code></pre> <p>\u092b\u093c\u0902\u0915\u094d\u0936\u0928\u094d\u0938 \u092e\u0947\u0902 \u0918\u094b\u0937\u093f\u0924 \u0905\u0928\u094d\u092f \u092a\u0948\u0930\u093e\u092e\u0940\u091f\u0930 parsed \u092a\u0948\u0930\u093e\u092e\u0940\u091f\u0930 \u092e\u0947\u0902 \u0916\u094b\u091c\u0947 \u091c\u093e\u090f\u0902\u0917\u0947\u0964</p> <p>\u0907\u0938\u0915\u0947 \u0905\u0924\u093f\u0930\u093f\u0915\u094d\u0924, \u092a\u093e\u0938 \u0915\u0930\u0924\u0947 \u0938\u092e\u092f parsed \u092a\u0948\u0930\u093e\u092e\u0940\u091f\u0930 \u0915\u094b \u0928\u093f\u0936\u094d\u091a\u093f\u0924 \u092a\u094d\u0930\u0915\u093e\u0930\u094b\u0902 \u092e\u0947\u0902 \u0915\u093e\u0938\u094d\u091f \u0915\u093f\u092f\u093e \u091c\u093e \u0938\u0915\u0924\u093e \u0939\u0948, \u092f\u0939\u093e\u0901 \u0909\u0928\u0915\u0940 \u0938\u0942\u091a\u0940 \u0939\u0948:</p> <ul> <li><code>String</code></li> <li><code>Integer</code></li> <li><code>Long</code></li> <li><code>Short</code></li> <li><code>Float</code></li> <li><code>Double</code></li> </ul> <p>\u0907\u0938\u0915\u0947 \u0905\u0932\u093e\u0935\u093e, \u0927\u094d\u092f\u093e\u0928 \u0926\u0947\u0902 \u0915\u093f \u092f\u0926\u093f \u092a\u0948\u0930\u093e\u092e\u0940\u091f\u0930 \u0918\u094b\u0937\u093f\u0924 \u0939\u0948\u0902 \u0914\u0930 \u0917\u093e\u092f\u092c \u0939\u0948\u0902 (\u092f\u093e parsed \u092a\u0948\u0930\u093e\u092e\u0940\u091f\u0930 \u092e\u0947\u0902 \u092f\u093e \u0909\u0926\u093e\u0939\u0930\u0923 \u0915\u0947 \u0932\u093f\u090f <code>Update</code> \u092e\u0947\u0902 <code>User</code> \u0917\u093e\u092f\u092c \u0939\u0948) \u092f\u093e \u0918\u094b\u0937\u093f\u0924 \u092a\u094d\u0930\u0915\u093e\u0930 \u092b\u093c\u0902\u0915\u094d\u0936\u0928 \u092e\u0947\u0902 \u092a\u094d\u0930\u093e\u092a\u094d\u0924 \u092a\u0948\u0930\u093e\u092e\u0940\u091f\u0930 \u0938\u0947 \u092e\u0947\u0932 \u0928\u0939\u0940\u0902 \u0916\u093e\u0924\u093e, <code>null</code> \u092a\u093e\u0938 \u0915\u093f\u092f\u093e \u091c\u093e\u090f\u0917\u093e \u0907\u0938\u0932\u093f\u090f \u0938\u093e\u0935\u0927\u093e\u0928 \u0930\u0939\u0947\u0902\u0964</p> <p>\u0938\u092c \u0915\u0941\u091b \u0938\u0902\u0915\u094d\u0937\u0947\u092a \u092e\u0947\u0902, \u092f\u0939\u093e\u0901 \u0928\u0940\u091a\u0947 \u090f\u0915 \u0909\u0926\u093e\u0939\u0930\u0923 \u0939\u0948 \u0915\u093f \u092b\u093c\u0902\u0915\u094d\u0936\u0928 \u092a\u0948\u0930\u093e\u092e\u0940\u091f\u0930 \u0906\u092e\u0924\u094c\u0930 \u092a\u0930 \u0915\u0948\u0938\u0947 \u092c\u0928\u093e\u090f \u091c\u093e\u0924\u0947 \u0939\u0948\u0902:</p> <p> </p>"},{"location":"hi/Bot-Context/","title":"\u092c\u0949\u091f \u0938\u0902\u0926\u0930\u094d\u092d","text":"<p>\u092c\u0949\u091f <code>UserData</code> \u0914\u0930 <code>ClassData</code> \u0907\u0902\u091f\u0930\u092b\u0947\u0938 \u0915\u0947 \u092e\u093e\u0927\u094d\u092f\u092e \u0938\u0947 \u0915\u0941\u091b \u0921\u0947\u091f\u093e \u092f\u093e\u0926 \u0930\u0916\u0928\u0947 \u0915\u0940 \u0915\u094d\u0937\u092e\u0924\u093e \u092d\u0940 \u092a\u094d\u0930\u0926\u093e\u0928 \u0915\u0930 \u0938\u0915\u0924\u093e \u0939\u0948\u0964</p> <ul> <li><code>userData</code> \u0909\u092a\u092f\u094b\u0917\u0915\u0930\u094d\u0924\u093e-\u0938\u094d\u0924\u0930\u0940\u092f \u0921\u0947\u091f\u093e \u0939\u0948\u0964</li> <li><code>classData</code> \u0915\u094d\u0932\u093e\u0938-\u0938\u094d\u0924\u0930\u0940\u092f \u0921\u0947\u091f\u093e \u0939\u0948, \u0905\u0930\u094d\u0925\u093e\u0924 \u0921\u0947\u091f\u093e \u0924\u092c \u0924\u0915 \u0938\u0902\u0917\u094d\u0930\u0939\u0940\u0924 \u0930\u0939\u0947\u0917\u093e \u091c\u092c \u0924\u0915 \u0909\u092a\u092f\u094b\u0917\u0915\u0930\u094d\u0924\u093e \u090f\u0915 \u0905\u0932\u0917 \u0915\u094d\u0932\u093e\u0938 \u092e\u0947\u0902 \u0915\u092e\u093e\u0902\u0921 \u092f\u093e \u0907\u0928\u092a\u0941\u091f \u092a\u0930 \u0928\u0939\u0940\u0902 \u091c\u093e\u0924\u093e\u0964 (\u092b\u093c\u0902\u0915\u094d\u0936\u0928 \u092e\u094b\u0921 \u092e\u0947\u0902 \u092f\u0939 \u0909\u092a\u092f\u094b\u0917\u0915\u0930\u094d\u0924\u093e \u0921\u0947\u091f\u093e \u0915\u0940 \u0924\u0930\u0939 \u0915\u093e\u092e \u0915\u0930\u0947\u0917\u093e)</li> </ul> <p>\u0921\u093f\u092b\u093c\u0949\u0932\u094d\u091f \u0930\u0942\u092a \u0938\u0947, \u0915\u093e\u0930\u094d\u092f\u093e\u0928\u094d\u0935\u092f\u0928 <code>ConcurrentHashMap</code> \u0915\u0947 \u092e\u093e\u0927\u094d\u092f\u092e \u0938\u0947 \u092a\u094d\u0930\u0926\u093e\u0928 \u0915\u093f\u092f\u093e \u091c\u093e\u0924\u093e \u0939\u0948 \u0932\u0947\u0915\u093f\u0928 \u0907\u0938\u0947 \u0906\u092a\u0915\u0947 \u0926\u094d\u0935\u093e\u0930\u093e \u091a\u0941\u0928\u0947 \u0917\u090f \u0921\u0947\u091f\u093e \u0938\u094d\u091f\u094b\u0930\u0947\u091c \u091f\u0942\u0932\u094d\u0938 \u0915\u093e \u0909\u092a\u092f\u094b\u0917 \u0915\u0930\u0915\u0947 <code>UserData</code> \u0914\u0930 <code>ClassData</code> \u0907\u0902\u091f\u0930\u092b\u0947\u0938 \u0915\u0947 \u092e\u093e\u0927\u094d\u092f\u092e \u0938\u0947 \u092c\u0926\u0932\u093e \u091c\u093e \u0938\u0915\u0924\u093e \u0939\u0948\u0964</p> <p>Caution</p> <p>\u0906\u0935\u0936\u094d\u092f\u0915 \u0915\u094b\u0921\u091c\u0947\u0928 \u092c\u093e\u0907\u0902\u0921\u093f\u0902\u0917 \u0909\u092a\u0932\u092c\u094d\u0927 \u0915\u0930\u093e\u0928\u0947 \u0915\u0947 \u0932\u093f\u090f \u0917\u094d\u0930\u0947\u0921\u0932 <code>kspKotlin</code>/\u092f\u093e \u0915\u094b\u0908 \u092a\u094d\u0930\u093e\u0938\u0902\u0917\u093f\u0915 ksp \u091f\u093e\u0938\u094d\u0915 \u091a\u0932\u093e\u0928\u093e \u0928 \u092d\u0942\u0932\u0947\u0902\u0964</p> <p>\u0907\u0938\u0947 \u092c\u0926\u0932\u0928\u0947 \u0915\u0947 \u0932\u093f\u090f, \u0906\u092a\u0915\u094b \u092c\u0938 \u0905\u092a\u0928\u0947 \u0915\u093e\u0930\u094d\u092f\u093e\u0928\u094d\u0935\u092f\u0928 \u092a\u0930 <code>@CtxProvider</code> \u090f\u0928\u094b\u091f\u0947\u0936\u0928 \u0932\u0917\u093e\u0928\u093e \u0939\u0948 \u0914\u0930 \u0917\u094d\u0930\u0947\u0921\u0932 ksp \u091f\u093e\u0938\u094d\u0915 (\u092f\u093e \u092c\u093f\u0932\u094d\u0921) \u091a\u0932\u093e\u0928\u093e \u0939\u0948\u0964</p> <pre><code>@CtxProvider\nclass MyRedis : UserData&lt;String&gt; {\n    // ...\n}\n</code></pre>"},{"location":"hi/Bot-Context/#_1","title":"\u0926\u0947\u0916\u0947\u0902 \u092d\u0940","text":"<ul> <li>\u0939\u094b\u092e</li> <li>\u0905\u092a\u0921\u0947\u091f \u092a\u093e\u0930\u094d\u0938\u093f\u0902\u0917</li> </ul>"},{"location":"hi/Bot-configuration/","title":"\u092c\u0949\u091f \u0915\u0949\u0928\u094d\u092b\u093c\u093f\u0917\u0930\u0947\u0936\u0928","text":"<p>\u0932\u093e\u0907\u092c\u094d\u0930\u0947\u0930\u0940 \u0915\u0908 \u0915\u0949\u0928\u094d\u092b\u093c\u093f\u0917\u0930\u0947\u0936\u0928 \u0935\u093f\u0915\u0932\u094d\u092a \u092a\u094d\u0930\u0926\u093e\u0928 \u0915\u0930\u0924\u0940 \u0939\u0948, \u0906\u092a <code>BotConfiguration</code> \u0915\u094d\u0932\u093e\u0938 \u0935\u093f\u0935\u0930\u0923 \u092e\u0947\u0902 API \u0938\u0902\u0926\u0930\u094d\u092d \u0926\u0947\u0916 \u0938\u0915\u0924\u0947 \u0939\u0948\u0902\u0964</p> <p>\u092c\u0949\u091f \u0915\u094b \u0915\u0949\u0928\u094d\u092b\u093c\u093f\u0917\u0930 \u0915\u0930\u0928\u0947 \u0915\u0947 \u0926\u094b \u0924\u0930\u0940\u0915\u0947 \u092d\u0940 \u0939\u0948\u0902:</p>"},{"location":"hi/Bot-configuration/#_1","title":"\u0915\u0949\u0928\u094d\u092b\u093c\u093f\u0917\u0930\u0947\u091f\u0930 \u0932\u0948\u092e\u094d\u092c\u094d\u0921\u093e","text":"<pre><code>// ...\nval bot = TelegramBot(\"BOT_TOKEN\") {\n  inputListener = RedisInputListenerImpl()\n  classManager = KoinClassManagerImpl()\n  logging {\n      botLogLevel = LogLvl.DEBUG\n  }\n}\n// ...\n</code></pre>"},{"location":"hi/Bot-configuration/#configloader","title":"ConfigLoader \u0907\u0902\u091f\u0930\u092b\u093c\u0947\u0938","text":"<p>\u090f\u0915 \u0935\u093f\u0936\u0947\u0937 <code>ConfigLoader</code> \u0907\u0902\u091f\u0930\u092b\u093c\u0947\u0938 \u0915\u0947 \u092e\u093e\u0927\u094d\u092f\u092e \u0938\u0947 \u0915\u0949\u0928\u094d\u092b\u093c\u093f\u0917\u0930 \u0915\u0930\u0928\u0947 \u0915\u0940 \u092d\u0940 \u0915\u094d\u0937\u092e\u0924\u093e \u0939\u0948, \u091c\u093f\u0938\u0915\u093e \u0909\u092a\u092f\u094b\u0917 \u0906\u092a \u092c\u093e\u0939\u0930\u0940 \u0938\u094d\u0930\u094b\u0924\u094b\u0902 (<code>properties</code>, <code>command line args</code>, \u0906\u0926\u093f) \u0938\u0947 \u0938\u0947\u091f\u093f\u0902\u0917\u094d\u0938 \u0932\u094b\u0921 \u0915\u0930\u0928\u0947 \u0915\u0947 \u0932\u093f\u090f \u0915\u0930 \u0938\u0915\u0924\u0947 \u0939\u0948\u0902\u0964</p> <p>\u0907\u0938 \u0907\u0902\u091f\u0930\u092b\u093c\u0947\u0938 \u0915\u0947 \u0915\u093e\u0930\u094d\u092f\u093e\u0928\u094d\u0935\u092f\u0928 \u0915\u094b \u0938\u0947\u0915\u0947\u0902\u0921\u0930\u0940 \u0915\u0902\u0938\u094d\u091f\u094d\u0930\u0915\u094d\u091f\u0930 \u0915\u0947 \u092e\u093e\u0927\u094d\u092f\u092e \u0938\u0947 \u092a\u093e\u0938 \u0915\u093f\u092f\u093e \u091c\u093e \u0938\u0915\u0924\u093e \u0939\u0948 \u0914\u0930 \u0909\u0926\u093e\u0939\u0930\u0923 \u0907\u0938\u0915\u0947 \u0905\u0928\u0941\u0938\u093e\u0930 \u0915\u0949\u0928\u094d\u092b\u093c\u093f\u0917\u0930 \u0915\u093f\u092f\u093e \u091c\u093e\u090f\u0917\u093e\u0964</p> <pre><code>val bot = TelegramBot(ConfigLoaderImpl)\n</code></pre> <p>\u0935\u0930\u094d\u0924\u092e\u093e\u0928 \u092e\u0947\u0902 \u0915\u0908 \u092e\u0949\u0921\u094d\u092f\u0942\u0932 \u092a\u094d\u0930\u0926\u093e\u0928 \u0915\u093f\u090f \u0917\u090f \u0939\u0948\u0902 \u091c\u094b \u0907\u0938 \u0907\u0902\u091f\u0930\u092b\u093c\u0947\u0938 \u0915\u094b \u0932\u093e\u0917\u0942 \u0915\u0930\u0924\u0947 \u0939\u0948\u0902 \u091c\u0948\u0938\u0947 <code>ktgram-config-env</code>, <code>ktgram-config-toml</code>\u0964</p>"},{"location":"hi/Bot-configuration/#botconfiguration","title":"BotConfiguration \u0905\u0935\u0932\u094b\u0915\u0928","text":""},{"location":"hi/Bot-configuration/#botconfiguration_1","title":"BotConfiguration","text":"<p><code>BotConfiguration</code> \u0915\u094d\u0932\u093e\u0938 \u092c\u0949\u091f \u0915\u094b \u0915\u0949\u0928\u094d\u092b\u093c\u093f\u0917\u0930 \u0915\u0930\u0928\u0947 \u0915\u0947 \u0932\u093f\u090f \u0915\u0947\u0902\u0926\u094d\u0930\u0940\u092f \u0939\u092c \u0939\u0948\u0964 \u0907\u0938\u092e\u0947\u0902 \u092c\u0949\u091f \u0915\u0940 \u092a\u0939\u091a\u093e\u0928 \u0915\u0930\u0928\u0947, API \u0939\u094b\u0938\u094d\u091f \u0938\u0947\u091f \u0915\u0930\u0928\u0947, \u092f\u0939 \u0928\u093f\u0930\u094d\u0927\u093e\u0930\u093f\u0924 \u0915\u0930\u0928\u0947 \u0915\u0947 \u0932\u093f\u090f \u0917\u0941\u0923 \u0939\u0948\u0902 \u0915\u093f \u0915\u094d\u092f\u093e \u092c\u0949\u091f \u092a\u0930\u0940\u0915\u094d\u0937\u0923 \u0935\u093e\u0924\u093e\u0935\u0930\u0923 \u092e\u0947\u0902 \u0915\u093e\u092e \u0915\u0930\u0924\u093e \u0939\u0948, \u0907\u0928\u092a\u0941\u091f \u0915\u094b \u0938\u0902\u092d\u093e\u0932\u0928\u093e, \u0915\u094d\u0932\u093e\u0938\u094b\u0902 \u0915\u093e \u092a\u094d\u0930\u092c\u0902\u0927\u0928 \u0915\u0930\u0928\u093e, \u0914\u0930 \u0907\u0928\u092a\u0941\u091f \u0911\u091f\u094b-\u0939\u091f\u093e\u0928\u0947 \u0915\u094b \u0928\u093f\u092f\u0902\u0924\u094d\u0930\u093f\u0924 \u0915\u0930\u0928\u093e\u0964 \u0907\u0938\u0915\u0947 \u0905\u0932\u093e\u0935\u093e, \u092f\u0939 \u0926\u0930 \u0938\u0940\u092e\u093f\u0924 \u0915\u0930\u0928\u0947, HTTP \u0915\u094d\u0932\u093e\u0907\u0902\u091f \u0915\u0949\u0928\u094d\u092b\u093c\u093f\u0917\u0930\u0947\u0936\u0928, \u0932\u0949\u0917\u093f\u0902\u0917, \u0905\u092a\u0921\u0947\u091f \u0938\u0941\u0928\u0928\u0947 \u0914\u0930 \u0915\u092e\u093e\u0902\u0921 \u092a\u093e\u0930\u094d\u0938\u093f\u0902\u0917 \u0915\u0947 \u0932\u093f\u090f \u0906\u0902\u0924\u0930\u093f\u0915 \u0917\u0941\u0923 \u092a\u094d\u0930\u0926\u093e\u0928 \u0915\u0930\u0924\u093e \u0939\u0948\u0964</p>"},{"location":"hi/Bot-configuration/#_2","title":"\u0917\u0941\u0923","text":"<ul> <li><code>identifier</code>: \u092e\u0932\u094d\u091f\u0940-\u092c\u0949\u091f \u092a\u094d\u0930\u094b\u0938\u0947\u0938\u093f\u0902\u0917 \u0915\u0947 \u0926\u094c\u0930\u093e\u0928 \u0935\u093f\u092d\u093f\u0928\u094d\u0928 \u092c\u0949\u091f \u0909\u0926\u093e\u0939\u0930\u0923\u094b\u0902 \u0915\u0940 \u092a\u0939\u091a\u093e\u0928 \u0915\u0930\u0924\u093e \u0939\u0948\u0964</li> <li><code>apiHost</code>: Telegram API \u0915\u093e \u0939\u094b\u0938\u094d\u091f\u0964</li> <li><code>isTestEnv</code>: \u092f\u0939 \u0926\u0930\u094d\u0936\u093e\u0924\u093e \u0939\u0948 \u0915\u093f \u0915\u094d\u092f\u093e \u092c\u0949\u091f \u092a\u0930\u0940\u0915\u094d\u0937\u0923 \u0935\u093e\u0924\u093e\u0935\u0930\u0923 \u092e\u0947\u0902 \u0915\u093e\u092e \u0915\u0930\u0924\u093e \u0939\u0948\u0964</li> <li><code>inputListener</code>: \u0907\u0928\u092a\u0941\u091f \u0939\u0948\u0902\u0921\u0932\u093f\u0902\u0917 \u0915\u094d\u0932\u093e\u0938 \u0915\u093e \u0909\u0926\u093e\u0939\u0930\u0923\u0964</li> <li><code>classManager</code>: \u0915\u094d\u0932\u093e\u0938 \u092a\u094d\u0930\u093e\u092a\u094d\u0924 \u0915\u0930\u0928\u0947 \u0915\u0947 \u0932\u093f\u090f \u0909\u092a\u092f\u094b\u0917 \u0915\u093f\u092f\u093e \u091c\u093e\u0928\u0947 \u0935\u093e\u0932\u093e \u092a\u094d\u0930\u092c\u0902\u0927\u0915\u0964</li> <li><code>inputAutoRemoval</code>: \u092a\u094d\u0930\u094b\u0938\u0947\u0938\u093f\u0902\u0917 \u0915\u0947 \u0926\u094c\u0930\u093e\u0928 \u0907\u0928\u092a\u0941\u091f \u092a\u0949\u0907\u0902\u091f \u0915\u0947 \u0911\u091f\u094b-\u0939\u091f\u093e\u0928\u0947 \u0915\u094b \u0928\u093f\u092f\u0902\u0924\u094d\u0930\u093f\u0924 \u0915\u0930\u0928\u0947 \u0935\u093e\u0932\u093e \u092b\u093c\u094d\u0932\u0948\u0917\u0964</li> <li><code>exceptionHandlingStrategy</code>: \u0905\u092a\u0935\u093e\u0926\u094b\u0902 \u0915\u094b \u0938\u0902\u092d\u093e\u0932\u0928\u0947 \u0915\u0947 \u0932\u093f\u090f \u0930\u0923\u0928\u0940\u0924\u093f \u0915\u094b \u092a\u0930\u093f\u092d\u093e\u0937\u093f\u0924 \u0915\u0930\u0924\u093e \u0939\u0948\u0964<ul> <li><code>CollectToChannel</code> - <code>TgUpdateHandler.caughtExceptions</code> \u092e\u0947\u0902 \u090f\u0915\u0924\u094d\u0930 \u0915\u0930\u0947\u0902\u0964</li> <li><code>Throw</code> - <code>TgException</code> \u0915\u0947 \u0938\u093e\u0925 \u092b\u093f\u0930 \u0938\u0947 \u092b\u0947\u0902\u0915\u0947\u0902\u0964</li> <li><code>DoNothing</code> - \u0915\u0941\u091b \u0928 \u0915\u0930\u0947\u0902 :)</li> <li><code>Handle</code> - \u0915\u0938\u094d\u091f\u092e \u0939\u0948\u0902\u0921\u0932\u0930 \u0938\u0947\u091f \u0915\u0930\u0947\u0902\u0964</li> </ul> </li> <li><code>throwExOnActionsFailure</code>: \u0915\u093f\u0938\u0940 \u092d\u0940 \u092c\u0949\u091f \u0905\u0928\u0941\u0930\u094b\u0927 \u0915\u0947 \u0935\u093f\u092b\u0932 \u0939\u094b\u0928\u0947 \u092a\u0930 \u0905\u092a\u0935\u093e\u0926 \u092b\u0947\u0902\u0915\u0924\u093e \u0939\u0948\u0964</li> </ul>"},{"location":"hi/Bot-configuration/#_3","title":"\u0915\u0949\u0928\u094d\u092b\u093c\u093f\u0917\u0930\u0947\u0936\u0928 \u092c\u094d\u0932\u0949\u0915","text":"<p><code>BotConfiguration</code> \u0905\u092a\u0928\u0947 \u0906\u0902\u0924\u0930\u093f\u0915 \u0918\u091f\u0915\u094b\u0902 \u0915\u094b \u0915\u0949\u0928\u094d\u092b\u093c\u093f\u0917\u0930 \u0915\u0930\u0928\u0947 \u0915\u0947 \u0932\u093f\u090f \u092b\u093c\u0902\u0915\u094d\u0936\u0928 \u092d\u0940 \u092a\u094d\u0930\u0926\u093e\u0928 \u0915\u0930\u0924\u093e \u0939\u0948:</p> <ul> <li><code>httpClient(block: HttpConfiguration.() -&gt; Unit)</code>: HTTP \u0915\u094d\u0932\u093e\u0907\u0902\u091f \u0915\u094b \u0915\u0949\u0928\u094d\u092b\u093c\u093f\u0917\u0930 \u0915\u0930\u0924\u093e \u0939\u0948\u0964</li> <li><code>logging(block: LoggingConfiguration.() -&gt; Unit)</code>: \u0932\u0949\u0917\u093f\u0902\u0917 \u0915\u094b \u0915\u0949\u0928\u094d\u092b\u093c\u093f\u0917\u0930 \u0915\u0930\u0924\u093e \u0939\u0948\u0964</li> <li><code>rateLimiter(block: RateLimiterConfiguration.() -&gt; Unit)</code>: \u0905\u0928\u0941\u0930\u094b\u0927 \u0938\u0940\u092e\u093f\u0924 \u0915\u0930\u0928\u0947 \u0915\u094b \u0915\u0949\u0928\u094d\u092b\u093c\u093f\u0917\u0930 \u0915\u0930\u0924\u093e \u0939\u0948\u0964</li> <li><code>updatesListener(block: UpdatesListenerConfiguration.() -&gt; Unit)</code>: \u0905\u092a\u0921\u0947\u091f \u0938\u0941\u0928\u0928\u0947 \u0935\u093e\u0932\u0947 \u0915\u094b \u0915\u0949\u0928\u094d\u092b\u093c\u093f\u0917\u0930 \u0915\u0930\u0924\u093e \u0939\u0948\u0964</li> <li><code>commandParsing(block: CommandParsingConfiguration.() -&gt; Unit)</code>: \u0915\u092e\u093e\u0902\u0921 \u092a\u093e\u0930\u094d\u0938\u093f\u0902\u0917 \u092a\u0948\u091f\u0930\u094d\u0928 \u0915\u094b \u0928\u093f\u0930\u094d\u0926\u093f\u0937\u094d\u091f \u0915\u0930\u0924\u093e \u0939\u0948\u0964</li> </ul>"},{"location":"hi/Bot-configuration/#_4","title":"\u0938\u0902\u092c\u0926\u094d\u0927 \u0915\u0949\u0928\u094d\u092b\u093c\u093f\u0917\u0930\u0947\u0936\u0928 \u0915\u094d\u0932\u093e\u0938\u0947\u0938","text":""},{"location":"hi/Bot-configuration/#ratelimiterconfiguration","title":"RateLimiterConfiguration","text":"<p>\u0935\u0948\u0936\u094d\u0935\u093f\u0915 \u0926\u0930 \u0938\u0940\u092e\u093f\u0924 \u0915\u0930\u0928\u0947 \u0915\u094b \u0915\u0949\u0928\u094d\u092b\u093c\u093f\u0917\u0930 \u0915\u0930\u0924\u093e \u0939\u0948\u0964</p> <ul> <li><code>limits</code>: \u0935\u0948\u0936\u094d\u0935\u093f\u0915 \u0926\u0930 \u0938\u0940\u092e\u093e\u090f\u0901\u0964</li> <li><code>mechanism</code>: \u0926\u0930 \u0938\u0940\u092e\u093f\u0924 \u0915\u0930\u0928\u0947 \u0915\u0947 \u0932\u093f\u090f \u0909\u092a\u092f\u094b\u0917 \u0915\u093f\u092f\u093e \u091c\u093e\u0928\u0947 \u0935\u093e\u0932\u093e \u0924\u0902\u0924\u094d\u0930, \u0921\u093f\u092b\u093c\u0949\u0932\u094d\u091f TokenBucket \u090f\u0932\u094d\u0917\u094b\u0930\u093f\u0926\u092e \u0939\u0948\u0964</li> <li><code>exceededAction</code>: \u0938\u0940\u092e\u093e \u092a\u093e\u0930 \u0939\u094b\u0928\u0947 \u092a\u0930 \u0932\u093e\u0917\u0942 \u0915\u0940 \u091c\u093e\u0928\u0947 \u0935\u093e\u0932\u0940 \u0915\u094d\u0930\u093f\u092f\u093e\u0964</li> </ul>"},{"location":"hi/Bot-configuration/#httpconfiguration","title":"HttpConfiguration","text":"<p>\u092c\u0949\u091f \u0915\u0947 HTTP \u0915\u094d\u0932\u093e\u0907\u0902\u091f \u0915\u0947 \u0932\u093f\u090f \u0915\u0949\u0928\u094d\u092b\u093c\u093f\u0917\u0930\u0947\u0936\u0928 \u0938\u092e\u094d\u092e\u093f\u0932\u093f\u0924 \u0915\u0930\u0924\u093e \u0939\u0948\u0964</p> <ul> <li><code>requestTimeoutMillis</code>: \u0905\u0928\u0941\u0930\u094b\u0927 \u091f\u093e\u0907\u092e\u0906\u0909\u091f \u092e\u093f\u0932\u0940\u0938\u0947\u0915\u0902\u0921 \u092e\u0947\u0902\u0964</li> <li><code>connectTimeoutMillis</code>: \u0915\u0928\u0947\u0915\u094d\u0936\u0928 \u091f\u093e\u0907\u092e\u0906\u0909\u091f \u092e\u093f\u0932\u0940\u0938\u0947\u0915\u0902\u0921 \u092e\u0947\u0902\u0964</li> <li><code>socketTimeoutMillis</code>: \u0938\u0949\u0915\u0947\u091f \u091f\u093e\u0907\u092e\u0906\u0909\u091f \u092e\u093f\u0932\u0940\u0938\u0947\u0915\u0902\u0921 \u092e\u0947\u0902\u0964</li> <li><code>maxRequestRetry</code>: HTTP \u0905\u0928\u0941\u0930\u094b\u0927\u094b\u0902 \u0915\u0947 \u0932\u093f\u090f \u0905\u0927\u093f\u0915\u0924\u092e \u0930\u0940\u091f\u094d\u0930\u093e\u0908\u0964</li> <li><code>retryStrategy</code>: \u0930\u0940\u091f\u094d\u0930\u093e\u0908 \u0915\u0947 \u0932\u093f\u090f \u0930\u0923\u0928\u0940\u0924\u093f, \u0905\u0928\u0941\u0915\u0942\u0932\u0928 \u092f\u094b\u0917\u094d\u092f\u0964</li> <li><code>retryDelay</code>: \u092a\u094d\u0930\u0924\u094d\u092f\u0947\u0915 \u0930\u0940\u091f\u094d\u0930\u093e\u0908 \u092a\u0930 \u091f\u093e\u0907\u092e\u0906\u0909\u091f \u0915\u0947 \u0932\u093f\u090f \u0917\u0941\u0923\u0915\u0964</li> <li><code>proxy</code>: HTTP \u0915\u0949\u0932 \u0915\u0947 \u0932\u093f\u090f \u092a\u094d\u0930\u0949\u0915\u094d\u0938\u0940 \u0938\u0947\u091f\u093f\u0902\u0917\u094d\u0938\u0964</li> <li><code>additionalHeaders</code>: \u0939\u0930 \u0905\u0928\u0941\u0930\u094b\u0927 \u092a\u0930 \u0932\u093e\u0917\u0942 \u0939\u094b\u0928\u0947 \u0935\u093e\u0932\u0947 \u0939\u0947\u0921\u0930\u0964</li> </ul>"},{"location":"hi/Bot-configuration/#loggingconfiguration","title":"LoggingConfiguration","text":"<p>\u092c\u0949\u091f \u0915\u094d\u0930\u093f\u092f\u093e\u0913\u0902 \u0914\u0930 HTTP \u0905\u0928\u0941\u0930\u094b\u0927\u094b\u0902 \u0915\u0947 \u0932\u093f\u090f \u0932\u0949\u0917\u093f\u0902\u0917 \u0938\u094d\u0924\u0930\u094b\u0902 \u0915\u093e \u092a\u094d\u0930\u092c\u0902\u0927\u0928 \u0915\u0930\u0924\u093e \u0939\u0948\u0964</p> <ul> <li><code>botLogLevel</code>: \u092c\u0949\u091f \u0915\u094d\u0930\u093f\u092f\u093e\u0913\u0902 \u0915\u0947 \u0932\u093f\u090f \u0932\u0949\u0917 \u0915\u093e \u0938\u094d\u0924\u0930\u0964</li> <li><code>httpLogLevel</code>: HTTP \u0905\u0928\u0941\u0930\u094b\u0927\u094b\u0902 \u0915\u0947 \u0932\u093f\u090f \u0932\u0949\u0917 \u0915\u093e \u0938\u094d\u0924\u0930\u0964</li> </ul>"},{"location":"hi/Bot-configuration/#updateslistenerconfiguration","title":"UpdatesListenerConfiguration","text":"<p>\u0905\u092a\u0921\u0947\u091f \u0916\u0940\u0902\u091a\u0928\u0947 \u0938\u0947 \u0938\u0902\u092c\u0902\u0927\u093f\u0924 \u092a\u0948\u0930\u093e\u092e\u0940\u091f\u0930 \u0915\u094b \u0915\u0949\u0928\u094d\u092b\u093c\u093f\u0917\u0930 \u0915\u0930\u0924\u093e \u0939\u0948\u0964</p> <ul> <li><code>dispatcher</code>: \u0906\u0928\u0947 \u0935\u093e\u0932\u0947 \u0905\u092a\u0921\u0947\u091f \u090f\u0915\u0924\u094d\u0930 \u0915\u0930\u0928\u0947 \u0915\u0947 \u0932\u093f\u090f \u0921\u093f\u0938\u094d\u092a\u0948\u091a\u0930\u0964</li> <li><code>processingDispatcher</code>: \u0905\u092a\u0921\u0947\u091f \u0915\u094b \u092a\u094d\u0930\u094b\u0938\u0947\u0938 \u0915\u0930\u0928\u0947 \u0915\u0947 \u0932\u093f\u090f \u0921\u093f\u0938\u094d\u092a\u0948\u091a\u0930\u0964</li> <li><code>pullingDelay</code>: \u092a\u094d\u0930\u0924\u094d\u092f\u0947\u0915 \u0916\u0940\u0902\u091a\u0928\u0947 \u0915\u0947 \u0905\u0928\u0941\u0930\u094b\u0927 \u0915\u0947 \u092c\u093e\u0926 \u0926\u0947\u0930\u0940\u0964</li> <li><code>updatesPollingTimeout</code>: \u0932\u0902\u092c\u0947-\u092a\u094b\u0932\u093f\u0902\u0917 \u0924\u0902\u0924\u094d\u0930 \u0915\u0947 \u0932\u093f\u090f \u091f\u093e\u0907\u092e\u0906\u0909\u091f \u0935\u093f\u0915\u0932\u094d\u092a\u0964</li> </ul>"},{"location":"hi/Bot-configuration/#commandparsingconfiguration","title":"CommandParsingConfiguration","text":"<p>\u0915\u092e\u093e\u0902\u0921 \u092a\u093e\u0930\u094d\u0938\u093f\u0902\u0917 \u0915\u0947 \u0932\u093f\u090f \u092a\u0948\u0930\u093e\u092e\u0940\u091f\u0930 \u0915\u094b \u0928\u093f\u0930\u094d\u0926\u093f\u0937\u094d\u091f \u0915\u0930\u0924\u093e \u0939\u0948\u0964</p> <ul> <li><code>commandDelimiter</code>: \u0915\u092e\u093e\u0902\u0921 \u0914\u0930 \u092a\u0948\u0930\u093e\u092e\u0940\u091f\u0930 \u0915\u0947 \u092c\u0940\u091a \u0905\u0932\u0917 \u0915\u0930\u0928\u0947 \u0935\u093e\u0932\u093e\u0964</li> <li><code>parametersDelimiter</code>: \u092a\u0948\u0930\u093e\u092e\u0940\u091f\u0930 \u0915\u0947 \u092c\u0940\u091a \u0905\u0932\u0917 \u0915\u0930\u0928\u0947 \u0935\u093e\u0932\u093e\u0964</li> <li><code>parameterValueDelimiter</code>: \u092a\u0948\u0930\u093e\u092e\u0940\u091f\u0930 \u0915\u0947 \u0915\u0940 \u0914\u0930 \u092e\u093e\u0928 \u0915\u0947 \u092c\u0940\u091a \u0905\u0932\u0917 \u0915\u0930\u0928\u0947 \u0935\u093e\u0932\u093e\u0964</li> <li><code>restrictSpacesInCommands</code>: \u092f\u0939 \u0926\u0930\u094d\u0936\u093e\u0924\u093e \u0939\u0948 \u0915\u093f \u0915\u094d\u092f\u093e \u0915\u092e\u093e\u0902\u0921 \u092e\u0947\u0902 \u0938\u094d\u0925\u093e\u0928\u094b\u0902 \u0915\u094b \u0915\u092e\u093e\u0902\u0921 \u0915\u0947 \u0905\u0902\u0924 \u0915\u0947 \u0930\u0942\u092a \u092e\u0947\u0902 \u092e\u093e\u0928\u093e \u091c\u093e\u0928\u093e \u091a\u093e\u0939\u093f\u090f\u0964</li> <li><code>useIdentifierInGroupCommands</code>: \u0938\u092e\u0942\u0939 \u0915\u092e\u093e\u0902\u0921 \u092e\u0947\u0902 @ \u0938\u092e\u094d\u092e\u093f\u0932\u093f\u0924 \u0915\u0930\u0928\u0947 \u0935\u093e\u0932\u0947 \u0915\u092e\u093e\u0902\u0921 \u0938\u0947 \u092e\u0947\u0932 \u0916\u093e\u0928\u0947 \u0915\u0947 \u0932\u093f\u090f \u092c\u0949\u091f \u0915\u0947 \u092a\u0939\u091a\u093e\u0928\u0915\u0930\u094d\u0924\u093e \u0915\u093e \u0909\u092a\u092f\u094b\u0917 \u0915\u0930\u0924\u093e \u0939\u0948\u0964</li> </ul>"},{"location":"hi/Bot-configuration/#_5","title":"\u0909\u0926\u093e\u0939\u0930\u0923 \u0915\u0949\u0928\u094d\u092b\u093c\u093f\u0917\u0930\u0947\u0936\u0928","text":"<p>\u092f\u0939\u093e\u0901 \u0907\u0928 \u0915\u094d\u0932\u093e\u0938\u094b\u0902 \u0915\u093e \u0909\u092a\u092f\u094b\u0917 \u0915\u0930\u0915\u0947 \u092c\u0949\u091f \u0915\u094b \u0915\u0949\u0928\u094d\u092b\u093c\u093f\u0917\u0930 \u0915\u0930\u0928\u0947 \u0915\u093e \u090f\u0915 \u0909\u0926\u093e\u0939\u0930\u0923 \u0939\u0948:</p> <pre><code>val bot = TelegramBot(\"TOKEN\") {\n    identifier = \"MyBot\",\n    apiHost = \"https://api.telegram.org\",\n    isTestEnv = true,\n    inputListener = InputListenerMapImpl(),\n    classManager = ClassManagerImpl(),\n\n    httpClient {\n        requestTimeoutMillis = 5000L\n        connectTimeoutMillis = 3000L\n        socketTimeoutMillis = 2000L\n    }\n    logging {\n        botLogLevel = LogLvl.DEBUG\n        httpLogLevel = HttpLogLevel.BODY\n    }\n    updatesListener {\n        dispatcher = Dispatchers.IO\n        processingDispatcher = Dispatchers.Unconfined\n        pullingDelay = 1000L\n    }\n    commandParsing {\n        commandDelimiter = '*'\n        parametersDelimiter = '&amp;'\n        restrictSpacesInCommands = true\n    }\n}\n</code></pre> <p>\u092f\u0939 \u0915\u0949\u0928\u094d\u092b\u093c\u093f\u0917\u0930\u0947\u0936\u0928 \u0935\u093f\u0936\u093f\u0937\u094d\u091f \u092a\u0939\u091a\u093e\u0928\u0915\u0930\u094d\u0924\u093e\u0913\u0902 \u0915\u0947 \u0938\u093e\u0925 \u090f\u0915 \u092c\u0949\u091f \u0938\u0947\u091f \u0915\u0930\u0924\u093e \u0939\u0948, \u092a\u0930\u0940\u0915\u094d\u0937\u0923 \u0935\u093e\u0924\u093e\u0935\u0930\u0923 \u092e\u094b\u0921 \u0915\u094b \u0938\u0915\u094d\u0937\u092e \u0915\u0930\u0924\u093e \u0939\u0948, \u0926\u0930 \u0938\u0940\u092e\u093f\u0924 \u0915\u0930\u0928\u0947, HTTP \u0915\u094d\u0932\u093e\u0907\u0902\u091f \u0938\u0947\u091f\u093f\u0902\u0917\u094d\u0938, \u0932\u0949\u0917\u093f\u0902\u0917 \u0938\u094d\u0924\u0930\u094b\u0902, \u0905\u092a\u0921\u0947\u091f \u0938\u0941\u0928\u0928\u0947 \u0935\u093e\u0932\u0947 \u092a\u0948\u0930\u093e\u092e\u0940\u091f\u0930 \u0914\u0930 \u0915\u092e\u093e\u0902\u0921 \u092a\u093e\u0930\u094d\u0938\u093f\u0902\u0917 \u0928\u093f\u092f\u092e\u094b\u0902 \u0915\u094b \u0915\u0949\u0928\u094d\u092b\u093c\u093f\u0917\u0930 \u0915\u0930\u0924\u093e \u0939\u0948\u0964</p>"},{"location":"hi/Bot-configuration/#_6","title":"\u0907\u0928 \u0915\u0949\u0928\u094d\u092b\u093c\u093f\u0917\u0930\u0947\u0936\u0928 \u0935\u093f\u0915\u0932\u094d\u092a\u094b\u0902 \u0915\u093e \u0932\u093e\u092d \u0909\u0920\u093e\u0915\u0930, \u0921\u0947\u0935\u0932\u092a\u0930\u094d\u0938 \u0905\u092a\u0928\u0947 \u092c\u0949\u091f \u0915\u094b \u0935\u093f\u0936\u093f\u0937\u094d\u091f \u0906\u0935\u0936\u094d\u092f\u0915\u0924\u093e\u0913\u0902 \u0915\u094b \u092a\u0942\u0930\u093e \u0915\u0930\u0928\u0947 \u0914\u0930 \u0935\u093f\u092d\u093f\u0928\u094d\u0928 \u092a\u0930\u093f\u091a\u093e\u0932\u0928 \u092a\u0930\u093f\u0926\u0943\u0936\u094d\u092f\u094b\u0902 \u092e\u0947\u0902 \u092a\u094d\u0930\u0926\u0930\u094d\u0936\u0928 \u0915\u094b \u0905\u0928\u0941\u0915\u0942\u0932\u093f\u0924 \u0915\u0930\u0928\u0947 \u0915\u0947 \u0932\u093f\u090f \u092c\u093e\u0930\u0940\u0915\u0940 \u0938\u0947 \u0938\u092e\u093e\u092f\u094b\u091c\u093f\u0924 \u0915\u0930 \u0938\u0915\u0924\u0947 \u0939\u0948\u0902\u0964","text":""},{"location":"hi/F.A.Q/#abstractmethoderror","title":"<code>AbstractMethodError</code> \u0905\u092a\u0935\u093e\u0926","text":"<p>\u092f\u0926\u093f \u0906\u092a\u0915\u0947 \u090f\u092a\u094d\u0932\u093f\u0915\u0947\u0936\u0928 \u0915\u0947 \u0938\u094d\u091f\u093e\u0930\u094d\u091f\u0905\u092a \u092a\u0930 \u0910\u0938\u093e \u0905\u092a\u0935\u093e\u0926 \u092a\u094d\u0930\u093e\u092a\u094d\u0924 \u0939\u094b\u0924\u093e \u0939\u0948:</p> <pre><code>Exception in thread \"DefaultDispatcher-worker-1\" java.lang.AbstractMethodError: 'kotlinx.serialization.KSerializer[] kotlinx.serialization.internal.GeneratedSerializer.typeParametersSerializers()'\n    at eu.vendeli.tgbot.types.options.GetUpdatesOptions$$serializer.typeParametersSerializers(GetUpdatesOptions.kt:6)\n</code></pre> <p>\u092f\u0939 \u0907\u0938\u0932\u093f\u090f \u0939\u094b\u0924\u093e \u0939\u0948 \u0915\u094d\u092f\u094b\u0902\u0915\u093f \u0906\u092a\u0915\u093e \u092c\u093f\u0932\u094d\u0921 \u0938\u093f\u0938\u094d\u091f\u092e \u092a\u0941\u0930\u093e\u0928\u0947 \u0938\u0940\u0930\u093f\u092f\u0932\u093e\u0907\u091c\u093c\u0947\u0936\u0928 \u0932\u093e\u0907\u092c\u094d\u0930\u0947\u0930\u0940 \u0915\u094b \u0930\u093f\u091c\u093c\u0949\u0932\u094d\u0935 \u0915\u0930 \u0930\u0939\u093e \u0939\u0948 \u091c\u093f\u0938\u0915\u0940 \u0906\u0902\u0924\u0930\u093f\u0915 \u092e\u0948\u0915\u0947\u0928\u093f\u0915\u094d\u0938 \u0905\u0932\u0917 \u0939\u0948\u0964 \u0907\u0938\u0947 \u0939\u0932 \u0915\u0930\u0928\u0947 \u0915\u0947 \u0932\u093f\u090f \u0906\u092a\u0915\u094b \u0907\u0938\u0947 \u0928\u090f \u0938\u0902\u0938\u094d\u0915\u0930\u0923 \u0915\u093e \u0909\u092a\u092f\u094b\u0917 \u0915\u0930\u0928\u0947 \u0915\u0947 \u0932\u093f\u090f \u092e\u091c\u092c\u0942\u0930 \u0915\u0930\u0928\u093e \u091a\u093e\u0939\u093f\u090f, \u0909\u0926\u093e\u0939\u0930\u0923 \u0915\u0947 \u0932\u093f\u090f \u0905\u092a\u0928\u0947 \u092c\u093f\u0932\u094d\u0921\u0938\u094d\u0915\u094d\u0930\u093f\u092a\u094d\u091f \u092e\u0947\u0902 \u092f\u0939 \u091c\u094b\u0921\u093c\u0915\u0930:</p> <pre><code>configurations.all {\n    resolutionStrategy.eachDependency {\n        val serdeVer = \"x.x.x\" // should be &gt;= 1.8.0\n        when(requested.module.toString()) {\n            // json serialiazaton\n            \"org.jetbrains.kotlinx:kotlinx-serialization-json\" -&gt; useVersion(serdeVer)\n            \"org.jetbrains.kotlinx:kotlinx-serialization-json-jvm\" -&gt; useVersion(serdeVer)\n            \"org.jetbrains.kotlinx:kotlinx-serialization-core\" -&gt; useVersion(serdeVer)\n            \"org.jetbrains.kotlinx:kotlinx-serialization-core-jvm\" -&gt; useVersion(serdeVer)\n            \"org.jetbrains.kotlinx:kotlinx-serialization-bom\" -&gt; useVersion(serdeVer)\n        }\n    }\n}\n</code></pre> <p>(\u0905\u0917\u0930 \u0907\u0938\u0947 \u091a\u0947\u0902\u091c\u0932\u0949\u0917 \u092e\u0947\u0902 \u0905\u091a\u094d\u091b\u0940 \u0924\u0930\u0939 \u0938\u0947 \u0935\u0930\u094d\u0923\u093f\u0924 \u0915\u093f\u092f\u093e \u0917\u092f\u093e \u0939\u094b\u0924\u093e \u0924\u094b \u092e\u0948\u0902\u0928\u0947 \u0915\u092d\u0940 \u0907\u0938\u0915\u093e \u0905\u092a\u0917\u094d\u0930\u0947\u0921 \u0928\u0939\u0940\u0902 \u0915\u093f\u092f\u093e \u0939\u094b\u0924\u093e \u0915\u094d\u092f\u094b\u0902\u0915\u093f \u092e\u0941\u091d\u0947 \u0907\u0938 \u092e\u0941\u0926\u094d\u0926\u0947 \u092a\u0930 \u0907\u0924\u0928\u0940 \u0905\u0927\u093f\u0915 \u0930\u093f\u092a\u094b\u0930\u094d\u091f \u092e\u093f\u0932 \u0930\u0939\u0940 \u0939\u0948\u0902)</p>"},{"location":"hi/F.A.Q/#_1","title":"\u092e\u0948\u0902 \u0935\u093f\u0927\u093f \u0915\u0940 \u092a\u094d\u0930\u0924\u093f\u0915\u094d\u0930\u093f\u092f\u093e \u0915\u0948\u0938\u0947 \u092a\u094d\u0930\u093e\u092a\u094d\u0924 \u0915\u0930\u0942\u0902?","text":"<p>\u092a\u094d\u0930\u0924\u093f\u0915\u094d\u0930\u093f\u092f\u093e \u092a\u094d\u0930\u093e\u092a\u094d\u0924 \u0915\u0930\u0928\u0947 \u0914\u0930 \u0909\u0938 \u092a\u0930 \u0915\u093e\u092e \u0915\u0930\u0928\u0947 \u092e\u0947\u0902 \u0938\u0915\u094d\u0937\u092e \u0939\u094b\u0928\u0947 \u0915\u0947 \u0932\u093f\u090f, \u0906\u092a\u0915\u094b <code>send</code> \u0915\u0947 \u092c\u091c\u093e\u092f \u0935\u093f\u0927\u093f \u0915\u0947 \u0905\u0902\u0924 \u092e\u0947\u0902 <code>sendReturning</code> \u0915\u093e \u0909\u092a\u092f\u094b\u0917 \u0915\u0930\u0928\u0947 \u0915\u0940 \u0906\u0935\u0936\u094d\u092f\u0915\u0924\u093e \u0939\u0948\u0964</p> <p>\u0907\u0938 \u092e\u093e\u092e\u0932\u0947 \u092e\u0947\u0902 <code>Response</code> \u0915\u094d\u0932\u093e\u0938 \u0932\u094c\u091f\u093e\u0908 \u091c\u093e\u0924\u0940 \u0939\u0948, \u091c\u093f\u0938\u092e\u0947\u0902 \u092a\u094d\u0930\u0924\u093f\u0915\u094d\u0930\u093f\u092f\u093e, \u0938\u092b\u0932\u0924\u093e \u092f\u093e \u0935\u093f\u092b\u0932\u0924\u093e \u0939\u094b\u0924\u0940 \u0939\u0948, \u0906\u0917\u0947 \u0906\u092a\u0915\u094b \u092f\u093e \u0924\u094b \u0935\u093f\u092b\u0932\u0924\u093e \u0915\u094b \u0938\u0902\u092d\u093e\u0932\u0928\u093e \u0939\u094b\u0917\u093e \u092f\u093e \u092c\u0938 <code>getOrNull()</code> \u0915\u0949\u0932 \u0915\u0930\u0928\u093e \u0939\u094b\u0917\u093e\u0964</p> <p>\u0907\u0938\u0915\u0947 \u092c\u093e\u0930\u0947 \u092e\u0947\u0902 \u090f\u0915 \u0905\u0928\u0941\u092d\u093e\u0917 \u0939\u0948: \u092a\u094d\u0930\u0924\u093f\u0915\u094d\u0930\u093f\u092f\u093e\u0913\u0902 \u0915\u094b \u0938\u0902\u0938\u093e\u0927\u093f\u0924 \u0915\u0930\u0928\u093e\u0964</p>"},{"location":"hi/F.A.Q/#spring-boot-devtools","title":"\u092e\u0948\u0902 <code>spring-boot-devtools</code> \u0915\u093e \u0909\u092a\u092f\u094b\u0917 \u0915\u0930\u0924\u0947 \u0938\u092e\u092f \u0924\u094d\u0930\u0941\u091f\u093f \u092a\u094d\u0930\u093e\u092a\u094d\u0924 \u0915\u0930 \u0930\u0939\u093e \u0939\u0942\u0901","text":"<p>\u092f\u0939 \u0907\u0938\u0932\u093f\u090f \u0939\u094b\u0924\u093e \u0939\u0948 \u0915\u094d\u092f\u094b\u0902\u0915\u093f <code>spring-boot-devtools</code> \u0915\u093e \u0905\u092a\u0928\u093e <code>classloader</code> \u0939\u094b\u0924\u093e \u0939\u0948 \u0914\u0930 \u092f\u0939 \u0935\u093f\u0927\u093f\u092f\u093e\u0901 \u0928\u0939\u0940\u0902 \u0922\u0942\u0902\u0922 \u092a\u093e\u0924\u093e\u0964</p> <p>\u0906\u092a\u0915\u094b <code>resources/META-INF/spring-devtools.properties</code> \u092e\u0947\u0902 \u091c\u094b\u0921\u093c\u0928\u0947 \u0915\u0940 \u0906\u0935\u0936\u094d\u092f\u0915\u0924\u093e \u0939\u0948:</p> <pre><code>restart.include.generated=/eu.vendeli\n</code></pre>"},{"location":"hi/F.A.Q/#ktor","title":"Ktor \u0907\u0902\u091c\u0928 \u0915\u0948\u0938\u0947 \u092c\u0926\u0932\u0947\u0902","text":"<p>\u092f\u0926\u093f \u0906\u092a \u0915\u094d\u0932\u093e\u0907\u0902\u091f \u0926\u094d\u0935\u093e\u0930\u093e \u0909\u092a\u092f\u094b\u0917 \u0915\u093f\u090f \u091c\u093e\u0928\u0947 \u0935\u093e\u0932\u0947 \u0907\u0902\u091c\u0928 \u0915\u094b \u092c\u0926\u0932\u0928\u093e \u091a\u093e\u0939\u0924\u0947 \u0939\u0948\u0902 \u0924\u094b \u0906\u092a \u0906\u0938\u093e\u0928\u0940 \u0938\u0947 \u092a\u0948\u0930\u093e\u092e\u0940\u091f\u0930 \u0915\u094b \u092a\u094d\u0932\u0917\u0907\u0928 \u0938\u0947\u091f\u093f\u0902\u0917\u094d\u0938 \u092e\u0947\u0902 \u092c\u0926\u0932 \u0938\u0915\u0924\u0947 \u0939\u0948\u0902\u0964</p>"},{"location":"hi/F.A.Q/#_2","title":"\u092e\u0947\u0930\u0947 \u092a\u0938\u0902\u0926\u0940\u0926\u093e \u0932\u0949\u0917\u093f\u0902\u0917 \u092a\u094d\u0930\u0926\u093e\u0924\u093e \u0915\u093e \u0909\u092a\u092f\u094b\u0917 \u0915\u0948\u0938\u0947 \u0915\u0930\u0947\u0902","text":"<p>\u0932\u093e\u0907\u092c\u094d\u0930\u0947\u0930\u0940 <code>slf4j-api</code> \u0915\u093e \u0909\u092a\u092f\u094b\u0917 \u0915\u0930\u0924\u0940 \u0939\u0948 \u0914\u0930 \u092a\u094d\u0930\u0926\u093e\u0924\u093e \u0915\u093e \u0909\u092a\u092f\u094b\u0917 \u0915\u0930\u0928\u0947 \u0915\u0947 \u0932\u093f\u090f \u0906\u092a\u0915\u094b \u092c\u0938 \u0907\u0938\u0947 \u0928\u093f\u0930\u094d\u092d\u0930\u0924\u093e\u0913\u0902 \u092e\u0947\u0902 \u091c\u094b\u0921\u093c\u0928\u0947 \u0915\u0940 \u0906\u0935\u0936\u094d\u092f\u0915\u0924\u093e \u0939\u0948\u0964</p> <p>\u0932\u093e\u0907\u092c\u094d\u0930\u0947\u0930\u0940 \u092a\u094d\u0932\u0917\u0907\u0928 \u0938\u094d\u0935\u091a\u093e\u0932\u093f\u0924 \u0930\u0942\u092a \u0938\u0947 \u092a\u094d\u0930\u0926\u093e\u0924\u093e \u0915\u0947 \u0909\u092a\u092f\u094b\u0917 \u0915\u093e \u092a\u0924\u093e \u0932\u0917\u093e\u0924\u093e \u0939\u0948, \u092f\u0926\u093f \u092a\u094d\u0930\u0926\u093e\u0924\u093e \u0917\u093e\u092f\u092c \u0939\u0948, \u0924\u094b \u0921\u093f\u092b\u093c\u0949\u0932\u094d\u091f \u0930\u0942\u092a \u0938\u0947 <code>logback</code> \u0915\u093e \u0909\u092a\u092f\u094b\u0917 \u0915\u093f\u092f\u093e \u091c\u093e\u090f\u0917\u093e\u0964</p>"},{"location":"hi/F.A.Q/#-","title":"\u0932\u0949\u0928\u094d\u0917-\u092a\u094b\u0932\u093f\u0902\u0917 \u0939\u0948\u0902\u0921\u0932\u0930 \u0915\u0947 \u092d\u0940\u0924\u0930 \u0928\u0947\u091f\u0935\u0930\u094d\u0915 \u0905\u092a\u0935\u093e\u0926 \u092a\u0915\u0921\u093c\u0947\u0902","text":"<p>\u0909\u0926\u093e\u0939\u0930\u0923 \u0915\u0947 \u0932\u093f\u090f \u092f\u0926\u093f \u0906\u092a\u0915\u0947 \u092a\u093e\u0938 \u0905\u0938\u094d\u0925\u093f\u0930 \u0915\u0928\u0947\u0915\u094d\u0936\u0928 \u0939\u0948 \u0914\u0930 \u0907\u0938\u0915\u0947 \u0915\u093e\u0930\u0923 \u0924\u094d\u0930\u0941\u091f\u093f \u092a\u0915\u0921\u093c\u0928\u0947 \u0915\u0940 \u0906\u0935\u0936\u094d\u092f\u0915\u0924\u093e \u0939\u0948, \u0924\u094b \u0936\u093e\u092f\u0926 \u092f\u0939 \u0926\u0943\u0937\u094d\u091f\u093f\u0915\u094b\u0923 \u0906\u092a\u0915\u0940 \u092e\u0926\u0926 \u0915\u0930\u0947\u0917\u093e:</p> <pre><code>fun main() {\n    val bot = TelegramBot(\"TOKEN\")\n\n    try {\n        bot.handleUpdates()\n    } catch (e: Exception) {\n        // handle if needed\n\n        bot.update.stopListener()\n        bot.handleUpdates()\n    }\n}\n</code></pre> <p>\u0906\u092a \u0926\u0947\u0916 \u0938\u0915\u0924\u0947 \u0939\u0948\u0902 \u0915\u093f spring-starter \u092e\u0947\u0902 \u092f\u0939 \u0915\u0948\u0938\u0947 \u0915\u093f\u092f\u093e \u0917\u092f\u093e \u0939\u0948\u0964</p>"},{"location":"hi/FSM-and-Conversation-handling/","title":"\u090f\u092b\u090f\u0938\u090f\u092e \u0914\u0930 \u0938\u0902\u0935\u093e\u0926 \u0939\u0948\u0902\u0921\u0932\u093f\u0902\u0917","text":"<p>\u0932\u093e\u0907\u092c\u094d\u0930\u0947\u0930\u0940 \u090f\u092b\u090f\u0938\u090f\u092e \u092e\u0948\u0915\u0947\u0928\u093f\u091c\u094d\u092e \u0915\u093e \u092d\u0940 \u0938\u092e\u0930\u094d\u0925\u0928 \u0915\u0930\u0924\u0940 \u0939\u0948, \u091c\u094b \u0909\u092a\u092f\u094b\u0917\u0915\u0930\u094d\u0924\u093e \u0907\u0928\u092a\u0941\u091f \u0915\u0947 \u092a\u094d\u0930\u0917\u0924\u093f\u0936\u0940\u0932 \u092a\u094d\u0930\u0938\u0902\u0938\u094d\u0915\u0930\u0923 \u0915\u0947 \u0932\u093f\u090f \u090f\u0915 \u0924\u0902\u0924\u094d\u0930 \u0939\u0948 \u091c\u093f\u0938\u092e\u0947\u0902 \u0917\u0932\u0924 \u0907\u0928\u092a\u0941\u091f \u0939\u0948\u0902\u0921\u0932\u093f\u0902\u0917 \u0936\u093e\u092e\u093f\u0932 \u0939\u0948\u0964</p> <p>Note</p> <p>TL;DR: \u0909\u0926\u093e\u0939\u0930\u0923 \u0935\u0939\u093e\u0902 \u0926\u0947\u0916\u0947\u0902\u0964</p>"},{"location":"hi/FSM-and-Conversation-handling/#_1","title":"\u0938\u093f\u0926\u094d\u0927\u093e\u0902\u0924 \u092e\u0947\u0902","text":"<p>\u0906\u0907\u090f \u0915\u0932\u094d\u092a\u0928\u093e \u0915\u0930\u0947\u0902 \u0915\u093f \u0906\u092a\u0915\u094b \u0909\u092a\u092f\u094b\u0917\u0915\u0930\u094d\u0924\u093e \u0938\u0930\u094d\u0935\u0947\u0915\u094d\u0937\u0923 \u090f\u0915\u0924\u094d\u0930 \u0915\u0930\u0928\u0947 \u0915\u0940 \u0906\u0935\u0936\u094d\u092f\u0915\u0924\u093e \u0939\u0948, \u0906\u092a \u090f\u0915 \u091a\u0930\u0923 \u092e\u0947\u0902 \u0935\u094d\u092f\u0915\u094d\u0924\u093f \u0915\u0947 \u0938\u092d\u0940 \u0921\u0947\u091f\u093e \u0915\u0947 \u0932\u093f\u090f \u092a\u0942\u091b \u0938\u0915\u0924\u0947 \u0939\u0948\u0902, \u0932\u0947\u0915\u093f\u0928 \u092a\u0948\u0930\u093e\u092e\u0940\u091f\u0930 \u092e\u0947\u0902 \u0938\u0947 \u090f\u0915 \u0915\u0947 \u0917\u0932\u0924 \u0907\u0928\u092a\u0941\u091f \u0915\u0947 \u0938\u093e\u0925, \u0909\u092a\u092f\u094b\u0917\u0915\u0930\u094d\u0924\u093e \u0914\u0930 \u0939\u092e \u0926\u094b\u0928\u094b\u0902 \u0915\u0947 \u0932\u093f\u090f \u0907\u0938\u0947 \u092e\u0941\u0936\u094d\u0915\u093f\u0932 \u0939\u094b\u0917\u093e, \u0914\u0930 \u092a\u094d\u0930\u0924\u094d\u092f\u0947\u0915 \u091a\u0930\u0923 \u0915\u0941\u091b \u0907\u0928\u092a\u0941\u091f \u0921\u0947\u091f\u093e \u0915\u0947 \u0906\u0927\u093e\u0930 \u092a\u0930 \u0905\u0932\u0917 \u0939\u094b \u0938\u0915\u0924\u093e \u0939\u0948\u0964</p> <p>\u0905\u092c \u091a\u0930\u0923-\u0926\u0930-\u091a\u0930\u0923 \u0921\u0947\u091f\u093e \u0907\u0928\u092a\u0941\u091f \u0915\u0940 \u0915\u0932\u094d\u092a\u0928\u093e \u0915\u0930\u0947\u0902, \u091c\u0939\u093e\u0902 \u092c\u0949\u091f \u0909\u092a\u092f\u094b\u0917\u0915\u0930\u094d\u0924\u093e \u0915\u0947 \u0938\u093e\u0925 \u0938\u0902\u0935\u093e\u0926 \u092e\u094b\u0921 \u092e\u0947\u0902 \u092a\u094d\u0930\u0935\u0947\u0936 \u0915\u0930\u0924\u093e \u0939\u0948\u0964</p> <p> </p> <p>\u0939\u0930\u0947 \u0924\u0940\u0930 \u092c\u093f\u0928\u093e \u0915\u093f\u0938\u0940 \u0924\u094d\u0930\u0941\u091f\u093f \u0915\u0947 \u091a\u0930\u0923\u094b\u0902 \u0915\u0947 \u092e\u093e\u0927\u094d\u092f\u092e \u0938\u0947 \u0938\u0902\u0915\u094d\u0930\u092e\u0923 \u0915\u0940 \u092a\u094d\u0930\u0915\u094d\u0930\u093f\u092f\u093e \u0915\u094b \u0907\u0902\u0917\u093f\u0924 \u0915\u0930\u0924\u0947 \u0939\u0948\u0902, \u0928\u0940\u0932\u0947 \u0924\u0940\u0930 \u0935\u0930\u094d\u0924\u092e\u093e\u0928 \u0938\u094d\u0925\u093f\u0924\u093f \u0915\u094b \u092c\u091a\u093e\u0928\u0947 \u0914\u0930 \u092a\u0941\u0928: \u0907\u0928\u092a\u0941\u091f \u0915\u0940 \u092a\u094d\u0930\u0924\u0940\u0915\u094d\u0937\u093e \u0915\u0930\u0928\u0947 \u0915\u093e \u092e\u0924\u0932\u092c \u0939\u0948 (\u0909\u0926\u093e\u0939\u0930\u0923 \u0915\u0947 \u0932\u093f\u090f, \u092f\u0926\u093f \u0909\u092a\u092f\u094b\u0917\u0915\u0930\u094d\u0924\u093e \u0928\u0947 \u0907\u0902\u0917\u093f\u0924 \u0915\u093f\u092f\u093e \u0915\u093f \u0935\u0939 -100 \u0935\u0930\u094d\u0937 \u0915\u093e \u0939\u0948, \u0924\u094b \u0907\u0938\u0947 \u0906\u092f\u0941 \u0915\u0947 \u0932\u093f\u090f \u092b\u093f\u0930 \u0938\u0947 \u092a\u0942\u091b\u0928\u093e \u091a\u093e\u0939\u093f\u090f), \u0914\u0930 \u0932\u093e\u0932 \u0930\u0902\u0917 \u092a\u0942\u0930\u0940 \u092a\u094d\u0930\u0915\u094d\u0930\u093f\u092f\u093e \u0938\u0947 \u092c\u093e\u0939\u0930 \u0928\u093f\u0915\u0932\u0928\u093e \u0926\u093f\u0916\u093e\u0924\u0947 \u0939\u0948\u0902 \u0915\u093f\u0938\u0940 \u092d\u0940 \u0915\u092e\u093e\u0902\u0921 \u092f\u093e \u0915\u093f\u0938\u0940 \u0905\u0928\u094d\u092f \u0905\u0930\u094d\u0925 \u0930\u0926\u094d\u0926\u0940\u0915\u0930\u0923 \u0915\u0947 \u0915\u093e\u0930\u0923\u0964</p>"},{"location":"hi/FSM-and-Conversation-handling/#_2","title":"\u0935\u094d\u092f\u0935\u0939\u093e\u0930 \u092e\u0947\u0902","text":"<p>\u0935\u093f\u091c\u093c\u093e\u0930\u094d\u0921 \u0938\u093f\u0938\u094d\u091f\u092e \u091f\u0947\u0932\u0940\u0917\u094d\u0930\u093e\u092e \u092c\u0949\u091f\u094d\u0938 \u092e\u0947\u0902 \u092e\u0932\u094d\u091f\u0940-\u0938\u094d\u091f\u0947\u092a \u0909\u092a\u092f\u094b\u0917\u0915\u0930\u094d\u0924\u093e \u0907\u0902\u091f\u0930\u0948\u0915\u094d\u0936\u0928 \u0915\u094b \u0938\u0915\u094d\u0937\u092e \u092c\u0928\u093e\u0924\u093e \u0939\u0948\u0964 \u092f\u0939 \u0909\u092a\u092f\u094b\u0917\u0915\u0930\u094d\u0924\u093e\u0913\u0902 \u0915\u094b \u091a\u0930\u0923\u094b\u0902 \u0915\u0940 \u090f\u0915 \u0936\u094d\u0930\u0943\u0902\u0916\u0932\u093e \u0915\u0947 \u092e\u093e\u0927\u094d\u092f\u092e \u0938\u0947 \u092e\u093e\u0930\u094d\u0917\u0926\u0930\u094d\u0936\u0928 \u0915\u0930\u0924\u093e \u0939\u0948, \u0907\u0928\u092a\u0941\u091f \u0915\u094b \u092e\u093e\u0928\u094d\u092f \u0915\u0930\u0924\u093e \u0939\u0948, \u0938\u094d\u0925\u093f\u0924\u093f \u0915\u094b \u0938\u0902\u0917\u094d\u0930\u0939\u0940\u0924 \u0915\u0930\u0924\u093e \u0939\u0948, \u0914\u0930 \u091a\u0930\u0923\u094b\u0902 \u0915\u0947 \u092c\u0940\u091a \u0938\u0902\u0915\u094d\u0930\u092e\u0923 \u0915\u0930\u0924\u093e \u0939\u0948\u0964</p> <p>\u092e\u0941\u0916\u094d\u092f \u0932\u093e\u092d: - \u091f\u093e\u0907\u092a-\u0938\u0941\u0930\u0915\u094d\u0937\u093f\u0924: \u0938\u094d\u0925\u093f\u0924\u093f \u092a\u0939\u0941\u0902\u091a \u0915\u0947 \u0932\u093f\u090f \u0938\u0902\u0915\u0932\u0928-\u0938\u092e\u092f \u092a\u094d\u0930\u0915\u093e\u0930 \u091c\u093e\u0902\u091a - \u0918\u094b\u0937\u0923\u093e\u0924\u094d\u092e\u0915: \u0928\u0947\u0938\u094d\u091f\u0947\u0921 \u0915\u094d\u0932\u093e\u0938/\u0911\u092c\u094d\u091c\u0947\u0915\u094d\u091f \u0915\u0947 \u0930\u0942\u092a \u092e\u0947\u0902 \u091a\u0930\u0923\u094b\u0902 \u0915\u094b \u092a\u0930\u093f\u092d\u093e\u0937\u093f\u0924 \u0915\u0930\u0947\u0902 - \u0932\u091a\u0940\u0932\u093e: \u0936\u0930\u094d\u0924\u0940\u092f \u0938\u0902\u0915\u094d\u0930\u092e\u0923, \u0915\u0942\u0926 \u0914\u0930 \u092a\u0941\u0928: \u092a\u094d\u0930\u092f\u093e\u0938\u094b\u0902 \u0915\u0947 \u0932\u093f\u090f \u0938\u092e\u0930\u094d\u0925\u0928 - \u0938\u094d\u091f\u0947\u091f\u092b\u0941\u0932: \u092a\u094d\u0932\u0917 \u0915\u0930\u0928\u0947 \u092f\u094b\u0917\u094d\u092f \u092d\u0902\u0921\u093e\u0930\u0923 \u092c\u0948\u0915\u090f\u0902\u0921 \u0915\u0947 \u0938\u093e\u0925 \u0938\u094d\u0935\u091a\u093e\u0932\u093f\u0924 \u0938\u094d\u0925\u093f\u0924\u093f \u0938\u094d\u0925\u093e\u092f\u093f\u0924\u094d\u0935 - \u090f\u0915\u0940\u0915\u0943\u0924: \u092e\u094c\u091c\u0942\u0926\u093e \u090f\u0915\u094d\u091f\u093f\u0935\u093f\u091f\u0940 \u0938\u093f\u0938\u094d\u091f\u092e \u0915\u0947 \u0938\u093e\u0925 \u0915\u093e\u092e \u0915\u0930\u0924\u093e \u0939\u0948</p>"},{"location":"hi/FSM-and-Conversation-handling/#_3","title":"\u092e\u0942\u0932 \u0905\u0935\u0927\u093e\u0930\u0923\u093e\u090f\u0901","text":""},{"location":"hi/FSM-and-Conversation-handling/#_4","title":"\u0935\u093f\u091c\u093c\u093e\u0930\u094d\u0921\u0938\u094d\u091f\u0947\u092a","text":"<p>\u090f\u0915 <code>\u0935\u093f\u091c\u093c\u093e\u0930\u094d\u0921\u0938\u094d\u091f\u0947\u092a</code> \u0935\u093f\u091c\u093c\u093e\u0930\u094d\u0921 \u092a\u094d\u0930\u0935\u093e\u0939 \u092e\u0947\u0902 \u090f\u0915 \u090f\u0915\u0932 \u091a\u0930\u0923 \u0915\u093e \u092a\u094d\u0930\u0924\u093f\u0928\u093f\u0927\u093f\u0924\u094d\u0935 \u0915\u0930\u0924\u093e \u0939\u0948\u0964 \u092a\u094d\u0930\u0924\u094d\u092f\u0947\u0915 \u091a\u0930\u0923 \u0915\u094b \u0932\u093e\u0917\u0942 \u0915\u0930\u0928\u093e \u091a\u093e\u0939\u093f\u090f:</p> <ul> <li><code>onEntry(ctx: WizardContext)</code>: \u091c\u092c \u0909\u092a\u092f\u094b\u0917\u0915\u0930\u094d\u0924\u093e \u0907\u0938 \u091a\u0930\u0923 \u092e\u0947\u0902 \u092a\u094d\u0930\u0935\u0947\u0936 \u0915\u0930\u0924\u093e \u0939\u0948 \u0924\u094b \u0915\u0939\u093e \u091c\u093e\u0924\u093e \u0939\u0948\u0964 \u0907\u0938\u0915\u093e \u0909\u092a\u092f\u094b\u0917 \u0909\u092a\u092f\u094b\u0917\u0915\u0930\u094d\u0924\u093e \u0938\u0947 \u092a\u0942\u091b\u0928\u0947 \u0915\u0947 \u0932\u093f\u090f \u0915\u0930\u0947\u0902\u0964</li> <li><code>onRetry(ctx: WizardContext)</code>: \u091c\u092c \u0938\u0924\u094d\u092f\u093e\u092a\u0928 \u0935\u093f\u092b\u0932 \u0939\u094b \u091c\u093e\u0924\u093e \u0939\u0948 \u0914\u0930 \u091a\u0930\u0923 \u0915\u094b \u092a\u0941\u0928: \u092a\u094d\u0930\u092f\u093e\u0938 \u0915\u0930\u0928\u093e \u091a\u093e\u0939\u093f\u090f \u0924\u094b \u0915\u0939\u093e \u091c\u093e\u0924\u093e \u0939\u0948\u0964 \u0924\u094d\u0930\u0941\u091f\u093f \u0938\u0902\u0926\u0947\u0936 \u0926\u093f\u0916\u093e\u0928\u0947 \u0915\u0947 \u0932\u093f\u090f \u0907\u0938\u0915\u093e \u0909\u092a\u092f\u094b\u0917 \u0915\u0930\u0947\u0902\u0964</li> <li><code>validate(ctx: WizardContext): Transition</code>: \u0935\u0930\u094d\u0924\u092e\u093e\u0928 \u0907\u0928\u092a\u0941\u091f \u0915\u094b \u092e\u093e\u0928\u094d\u092f \u0915\u0930\u0924\u093e \u0939\u0948 \u0914\u0930 \u0905\u0917\u0932\u093e \u0915\u094d\u092f\u093e \u0939\u094b\u0924\u093e \u0939\u0948 \u092f\u0939 \u0907\u0902\u0917\u093f\u0924 \u0915\u0930\u0924\u0947 \u0939\u0941\u090f \u090f\u0915 <code>Transition</code> \u0932\u094c\u091f\u093e\u0924\u093e \u0939\u0948\u0964</li> <li><code>store(ctx: WizardContext): Any?</code> (\u0935\u0948\u0915\u0932\u094d\u092a\u093f\u0915): \u0907\u0938 \u091a\u0930\u0923 \u0915\u0947 \u0932\u093f\u090f \u092c\u0928\u093e\u090f \u0930\u0916\u0928\u0947 \u0915\u0947 \u0932\u093f\u090f \u092e\u093e\u0928 \u0932\u094c\u091f\u093e\u0924\u093e \u0939\u0948\u0964 <code>null</code> \u0932\u094c\u091f\u093e\u090f\u0902 \u092f\u0926\u093f \u091a\u0930\u0923 \u0938\u094d\u0925\u093f\u0924\u093f \u0915\u094b \u0938\u0902\u0917\u094d\u0930\u0939\u0940\u0924 \u0928\u0939\u0940\u0902 \u0915\u0930\u0924\u093e \u0939\u0948\u0964</li> </ul> <pre><code>object NameStep : WizardStep(isInitial = true) {\n    override suspend fun onEntry(ctx: WizardContext) {\n        message { \"\u0906\u092a\u0915\u093e \u0928\u093e\u092e \u0915\u094d\u092f\u093e \u0939\u0948?\" }.send(ctx.user, ctx.bot)\n    }\n\n    override suspend fun onRetry(ctx: WizardContext) {\n        message { \"\u0928\u093e\u092e \u0916\u093e\u0932\u0940 \u0928\u0939\u0940\u0902 \u0939\u094b \u0938\u0915\u0924\u093e\u0964 \u0915\u0943\u092a\u092f\u093e \u092a\u0941\u0928: \u092a\u094d\u0930\u092f\u093e\u0938 \u0915\u0930\u0947\u0902\u0964\" }.send(ctx.user, ctx.bot)\n    }\n\n    override suspend fun validate(ctx: WizardContext): Transition {\n        return if (ctx.update.text.isNullOrBlank()) {\n            Transition.Retry\n        } else {\n            Transition.Next\n        }\n    }\n\n    override suspend fun store(ctx: WizardContext): String {\n        return ctx.update.text!!\n    }\n}\n</code></pre> <p>Note</p> <p>\u092f\u0926\u093f \u0915\u0941\u091b \u091a\u0930\u0923 \u092a\u094d\u0930\u093e\u0930\u0902\u092d\u093f\u0915 \u0915\u0947 \u0930\u0942\u092a \u092e\u0947\u0902 \u091a\u093f\u0939\u094d\u0928\u093f\u0924 \u0928\u0939\u0940\u0902 \u0939\u0948 -&gt; \u092a\u0939\u0932\u0947 \u0918\u094b\u0937\u093f\u0924 \u091a\u0930\u0923 \u0915\u094b \u092e\u093e\u0928\u093e \u091c\u093e\u0924\u093e \u0939\u0948\u0964</p>"},{"location":"hi/FSM-and-Conversation-handling/#_5","title":"\u0938\u0902\u0915\u094d\u0930\u092e\u0923","text":"<p>\u090f\u0915 <code>\u0938\u0902\u0915\u094d\u0930\u092e\u0923</code> \u0938\u0924\u094d\u092f\u093e\u092a\u0928 \u0915\u0947 \u092c\u093e\u0926 \u0915\u094d\u092f\u093e \u0939\u094b\u0924\u093e \u0939\u0948 \u092f\u0939 \u0928\u093f\u0930\u094d\u0927\u093e\u0930\u093f\u0924 \u0915\u0930\u0924\u093e \u0939\u0948:</p> <ul> <li><code>Transition.Next</code>: \u0905\u0928\u0941\u0915\u094d\u0930\u092e \u092e\u0947\u0902 \u0905\u0917\u0932\u0947 \u091a\u0930\u0923 \u092a\u0930 \u091c\u093e\u090f\u0902</li> <li><code>Transition.JumpTo(step: KClass&lt;out WizardStep&gt;)</code>: \u0915\u093f\u0938\u0940 \u0935\u093f\u0936\u093f\u0937\u094d\u091f \u091a\u0930\u0923 \u092a\u0930 \u0915\u0942\u0926\u0947\u0902</li> <li><code>Transition.Retry</code>: \u0935\u0930\u094d\u0924\u092e\u093e\u0928 \u091a\u0930\u0923 \u0915\u094b \u092a\u0941\u0928: \u092a\u094d\u0930\u092f\u093e\u0938 \u0915\u0930\u0947\u0902 (\u0938\u0924\u094d\u092f\u093e\u092a\u0928 \u0935\u093f\u092b\u0932)</li> <li><code>Transition.Finish</code>: \u0935\u093f\u091c\u093c\u093e\u0930\u094d\u0921 \u0938\u092e\u093e\u092a\u094d\u0924 \u0915\u0930\u0947\u0902</li> </ul> <pre><code>// \u0907\u0928\u092a\u0941\u091f \u0915\u0947 \u0906\u0927\u093e\u0930 \u092a\u0930 \u0936\u0930\u094d\u0924\u0940\u092f \u0915\u0942\u0926\noverride suspend fun validate(ctx: WizardContext): Transition {\n    val age = ctx.update.text?.toIntOrNull()\n    return when {\n        age == null -&gt; Transition.Retry\n        age &lt; 18 -&gt; Transition.JumpTo(UnderageStep::class)\n        else -&gt; Transition.Next\n    }\n}\n</code></pre>"},{"location":"hi/FSM-and-Conversation-handling/#_6","title":"\u0935\u093f\u091c\u093c\u093e\u0930\u094d\u0921\u0915\u0902\u091f\u0947\u0915\u094d\u0938\u094d\u091f","text":"<p><code>\u0935\u093f\u091c\u093c\u093e\u0930\u094d\u0921\u0915\u0902\u091f\u0947\u0915\u094d\u0938\u094d\u091f</code> \u092a\u094d\u0930\u0926\u093e\u0928 \u0915\u0930\u0924\u093e \u0939\u0948: - <code>user: User</code>: \u0935\u0930\u094d\u0924\u092e\u093e\u0928 \u0909\u092a\u092f\u094b\u0917\u0915\u0930\u094d\u0924\u093e - <code>update: ProcessedUpdate</code>: \u0935\u0930\u094d\u0924\u092e\u093e\u0928 \u0905\u092a\u0921\u0947\u091f - <code>bot: TelegramBot</code>: \u092c\u0949\u091f \u0909\u0926\u093e\u0939\u0930\u0923 - <code>userReference: UserChatReference</code>: \u0938\u094d\u0925\u093f\u0924\u093f \u092d\u0902\u0921\u093e\u0930\u0923 \u0915\u0947 \u0932\u093f\u090f \u0909\u092a\u092f\u094b\u0917\u0915\u0930\u094d\u0924\u093e \u0914\u0930 \u091a\u0948\u091f \u0906\u0908\u0921\u0940 \u0938\u0902\u0926\u0930\u094d\u092d</p> <p>\u092a\u094d\u0932\u0938 \u091f\u093e\u0907\u092a-\u0938\u0941\u0930\u0915\u094d\u0937\u093f\u0924 \u0938\u094d\u0925\u093f\u0924\u093f \u092a\u0939\u0941\u0902\u091a \u0935\u093f\u0927\u093f\u092f\u093e\u0901 (KSP \u0926\u094d\u0935\u093e\u0930\u093e \u0909\u0924\u094d\u092a\u0928\u094d\u0928)\u0964</p>"},{"location":"hi/FSM-and-Conversation-handling/#_7","title":"\u0935\u093f\u091c\u093c\u093e\u0930\u094d\u0921 \u0915\u094b \u092a\u0930\u093f\u092d\u093e\u0937\u093f\u0924 \u0915\u0930\u0928\u093e","text":""},{"location":"hi/FSM-and-Conversation-handling/#_8","title":"\u092c\u0941\u0928\u093f\u092f\u093e\u0926\u0940 \u0938\u0902\u0930\u091a\u0928\u093e","text":"<p>\u090f\u0915 \u0935\u093f\u091c\u093c\u093e\u0930\u094d\u0921 \u0915\u094b <code>@WizardHandler</code> \u090f\u0928\u094b\u091f\u0947\u0936\u0928 \u0915\u0947 \u0938\u093e\u0925 \u090f\u0915 \u0915\u094d\u0932\u093e\u0938 \u092f\u093e \u0911\u092c\u094d\u091c\u0947\u0915\u094d\u091f \u0915\u0947 \u0930\u0942\u092a \u092e\u0947\u0902 \u092a\u0930\u093f\u092d\u093e\u0937\u093f\u0924 \u0915\u093f\u092f\u093e \u0917\u092f\u093e \u0939\u0948:</p> <pre><code>@WizardHandler(trigger = [\"/survey\"])\nobject SurveyWizard {\n    object NameStep : WizardStep(isInitial = true) {\n        // ... \u091a\u0930\u0923 \u0915\u093e\u0930\u094d\u092f\u093e\u0928\u094d\u0935\u092f\u0928\n    }\n\n    object AgeStep : WizardStep {\n        // ... \u091a\u0930\u0923 \u0915\u093e\u0930\u094d\u092f\u093e\u0928\u094d\u0935\u092f\u0928\n    }\n\n    object FinishStep : WizardStep {\n        // ... \u091a\u0930\u0923 \u0915\u093e\u0930\u094d\u092f\u093e\u0928\u094d\u0935\u092f\u0928\n    }\n}\n</code></pre>"},{"location":"hi/FSM-and-Conversation-handling/#_9","title":"\u090f\u0928\u094b\u091f\u0947\u0936\u0928 \u092a\u0948\u0930\u093e\u092e\u0940\u091f\u0930","text":"<p><code>@WizardHandler</code> \u0938\u094d\u0935\u0940\u0915\u093e\u0930 \u0915\u0930\u0924\u093e \u0939\u0948: - <code>trigger: Array&lt;String&gt;</code>: \u0935\u093f\u091c\u093c\u093e\u0930\u094d\u0921 \u0936\u0941\u0930\u0942 \u0915\u0930\u0928\u0947 \u0935\u093e\u0932\u0947 \u0915\u092e\u093e\u0902\u0921 (\u091c\u0948\u0938\u0947, <code>[\"/start\", \"/survey\"]</code>) - <code>scope: Array&lt;UpdateType&gt;</code>: \u0938\u0941\u0928\u0928\u0947 \u0915\u0947 \u0932\u093f\u090f \u0905\u092a\u0921\u0947\u091f \u092a\u094d\u0930\u0915\u093e\u0930 (\u0921\u093f\u092b\u093c\u0949\u0932\u094d\u091f: <code>[UpdateType.MESSAGE]</code>) - <code>stateManagers: Array&lt;KClass&lt;out WizardStateManager&lt;*&gt;&gt;&gt;</code>: \u091a\u0930\u0923 \u0921\u0947\u091f\u093e \u0938\u0902\u0917\u094d\u0930\u0939\u0940\u0924 \u0915\u0930\u0928\u0947 \u0915\u0947 \u0932\u093f\u090f \u0930\u093e\u091c\u094d\u092f \u092a\u094d\u0930\u092c\u0902\u0927\u0915 \u0915\u0915\u094d\u0937\u093e\u090f\u0902</p>"},{"location":"hi/FSM-and-Conversation-handling/#_10","title":"\u0938\u094d\u0925\u093f\u0924\u093f \u092a\u094d\u0930\u092c\u0902\u0927\u0928","text":""},{"location":"hi/FSM-and-Conversation-handling/#_11","title":"\u0935\u093f\u091c\u093c\u093e\u0930\u094d\u0921\u0938\u094d\u091f\u0947\u091f\u092e\u0948\u0928\u0947\u091c\u0930","text":"<p>\u0938\u094d\u0925\u093f\u0924\u093f <code>\u0935\u093f\u091c\u093c\u093e\u0930\u094d\u0921\u0938\u094d\u091f\u0947\u091f\u092e\u0948\u0928\u0947\u091c\u0930&lt;T&gt;</code> \u0915\u093e\u0930\u094d\u092f\u093e\u0928\u094d\u0935\u092f\u0928 \u0915\u093e \u0909\u092a\u092f\u094b\u0917 \u0915\u0930\u0915\u0947 \u0938\u0902\u0917\u094d\u0930\u0939\u0940\u0924 \u0915\u0940 \u091c\u093e\u0924\u0940 \u0939\u0948\u0964 \u092a\u094d\u0930\u0924\u094d\u092f\u0947\u0915 \u092a\u094d\u0930\u092c\u0902\u0927\u0915 \u090f\u0915 \u0935\u093f\u0936\u093f\u0937\u094d\u091f \u092a\u094d\u0930\u0915\u093e\u0930 \u0915\u094b \u0938\u0902\u092d\u093e\u0932\u0924\u093e \u0939\u0948:</p> <pre><code>interface WizardStateManager&lt;T : Any&gt; {\n    suspend fun get(key: KClass&lt;out WizardStep&gt;, reference: UserChatReference): T?\n    suspend fun set(key: KClass&lt;out WizardStep&gt;, reference: UserChatReference, value: T)\n    suspend fun del(key: KClass&lt;out WizardStep&gt;, reference: UserChatReference)\n}\n</code></pre> <p>\u092f\u0939 \u092d\u0940 \u0926\u0947\u0916\u0947\u0902: MapStateManager, MapStringStateManager, MapIntStateManager, MapLongStateManager\u0964"},{"location":"hi/FSM-and-Conversation-handling/#_12","title":"\u0938\u094d\u0935\u091a\u093e\u0932\u093f\u0924 \u092e\u093f\u0932\u093e\u0928","text":"<p>KSP <code>store()</code> \u0930\u093f\u091f\u0930\u094d\u0928 \u092a\u094d\u0930\u0915\u093e\u0930 \u0915\u0947 \u0906\u0927\u093e\u0930 \u092a\u0930 \u091a\u0930\u0923\u094b\u0902 \u0915\u094b \u0930\u093e\u091c\u094d\u092f \u092a\u094d\u0930\u092c\u0902\u0927\u0915\u094b\u0902 \u0938\u0947 \u092e\u093f\u0932\u093e\u0924\u093e \u0939\u0948:</p> <pre><code>@WizardHandler(\n    trigger = [\"/survey\"],\n    stateManagers = [StringStateManager::class, IntStateManager::class]\n)\nobject SurveyWizard {\n    object NameStep : WizardStep(isInitial = true) {\n        override suspend fun store(ctx: WizardContext): String {\n            return ctx.update.text!! // StringStateManager \u0938\u0947 \u092e\u0947\u0932 \u0916\u093e\u0924\u093e \u0939\u0948\n        }\n    }\n\n    object AgeStep : WizardStep {\n        override suspend fun store(ctx: WizardContext): Int {\n            return ctx.update.text!!.toInt() // IntStateManager \u0938\u0947 \u092e\u0947\u0932 \u0916\u093e\u0924\u093e \u0939\u0948\n        }\n    }\n}\n</code></pre>"},{"location":"hi/FSM-and-Conversation-handling/#-","title":"\u092a\u094d\u0930\u0924\u093f-\u091a\u0930\u0923 \u0913\u0935\u0930\u0930\u093e\u0907\u0921","text":"<p><code>@WizardHandler.StateManager</code> \u0915\u093e \u0909\u092a\u092f\u094b\u0917 \u0915\u0930\u0915\u0947 \u0915\u093f\u0938\u0940 \u0935\u093f\u0936\u093f\u0937\u094d\u091f \u091a\u0930\u0923 \u0915\u0947 \u0932\u093f\u090f \u0930\u093e\u091c\u094d\u092f \u092a\u094d\u0930\u092c\u0902\u0927\u0915 \u0915\u094b \u0913\u0935\u0930\u0930\u093e\u0907\u0921 \u0915\u0930\u0947\u0902:</p> <pre><code>@WizardHandler(\n    trigger = [\"/survey\"],\n    stateManagers = [DefaultStateManager::class]\n)\nobject SurveyWizard {\n    object NameStep : WizardStep(isInitial = true) {\n        // DefaultStateManager \u0915\u093e \u0909\u092a\u092f\u094b\u0917 \u0915\u0930\u0924\u093e \u0939\u0948\n    }\n\n    @WizardHandler.StateManager(CustomStateManager::class)\n    object AgeStep : WizardStep {\n        // \u0907\u0938\u0915\u0947 \u092c\u091c\u093e\u092f CustomStateManager \u0915\u093e \u0909\u092a\u092f\u094b\u0917 \u0915\u0930\u0924\u093e \u0939\u0948\n    }\n}\n</code></pre>"},{"location":"hi/FSM-and-Conversation-handling/#-_1","title":"\u091f\u093e\u0907\u092a-\u0938\u0941\u0930\u0915\u094d\u0937\u093f\u0924 \u0938\u094d\u0925\u093f\u0924\u093f \u092a\u0939\u0941\u0902\u091a","text":"<p>KSP \u092a\u094d\u0930\u0924\u094d\u092f\u0947\u0915 \u091a\u0930\u0923 \u0915\u0947 \u0932\u093f\u090f \u091f\u093e\u0907\u092a-\u0938\u0941\u0930\u0915\u094d\u0937\u093f\u0924 \u090f\u0915\u094d\u0938\u091f\u0947\u0902\u0936\u0928 \u092b\u093c\u0902\u0915\u094d\u0936\u0902\u0938 \u0909\u0924\u094d\u092a\u0928\u094d\u0928 \u0915\u0930\u0924\u093e \u0939\u0948 \u091c\u094b \u0938\u094d\u0925\u093f\u0924\u093f \u0915\u094b \u0938\u0902\u0917\u094d\u0930\u0939\u0940\u0924 \u0915\u0930\u0924\u093e \u0939\u0948\u0964</p>"},{"location":"hi/FSM-and-Conversation-handling/#_13","title":"\u0909\u0924\u094d\u092a\u0928\u094d\u0928 \u092b\u093c\u0902\u0915\u094d\u0936\u0902\u0938","text":"<p>\u090f\u0915 \u091a\u0930\u0923 \u0915\u0947 \u0932\u093f\u090f \u091c\u094b \u090f\u0915 <code>String</code> \u0938\u0902\u0917\u094d\u0930\u0939\u0940\u0924 \u0915\u0930\u0924\u093e \u0939\u0948:</p> <pre><code>// KSP \u0926\u094d\u0935\u093e\u0930\u093e \u0938\u094d\u0935\u091a\u093e\u0932\u093f\u0924 \u0930\u0942\u092a \u0938\u0947 \u0909\u0924\u094d\u092a\u0928\u094d\u0928\nsuspend inline fun &lt;reified S : WizardStep&gt; WizardContext.getState(): String?\nsuspend inline fun &lt;reified S : WizardStep&gt; WizardContext.setState(value: String)\nsuspend inline fun &lt;reified S : WizardStep&gt; WizardContext.delState()\n</code></pre>"},{"location":"hi/FSM-and-Conversation-handling/#_14","title":"\u0909\u092a\u092f\u094b\u0917","text":"<pre><code>object FinishStep : WizardStep {\n    override suspend fun onEntry(ctx: WizardContext) {\n        // \u091f\u093e\u0907\u092a-\u0938\u0941\u0930\u0915\u094d\u0937\u093f\u0924 \u092a\u0939\u0941\u0902\u091a - String? (\u0928\u0932 \u092f\u094b\u0917\u094d\u092f) \u0932\u094c\u091f\u093e\u0924\u093e \u0939\u0948\n        val name: String? = ctx.getState&lt;NameStep&gt;()\n\n        // \u091f\u093e\u0907\u092a-\u0938\u0941\u0930\u0915\u094d\u0937\u093f\u0924 \u092a\u0939\u0941\u0902\u091a - Int? (\u0928\u0932 \u092f\u094b\u0917\u094d\u092f) \u0932\u094c\u091f\u093e\u0924\u093e \u0939\u0948\n        val age: Int? = ctx.getState&lt;AgeStep&gt;()\n\n        val summary = buildString {\n            appendLine(\"\u0928\u093e\u092e: $name\")\n            appendLine(\"\u0906\u092f\u0941: $age\")\n        }\n\n        message { summary }.send(ctx.user, ctx.bot)\n    }\n\n    override suspend fun onRetry(ctx: WizardContext) = Unit\n\n    override suspend fun validate(ctx: WizardContext): Transition {\n        return Transition.Finish\n    }\n}\n</code></pre>"},{"location":"hi/FSM-and-Conversation-handling/#_15","title":"\u092b\u0949\u0932\u092c\u0948\u0915 \u0935\u093f\u0927\u093f\u092f\u093e\u0901","text":"<p>\u092f\u0926\u093f \u091f\u093e\u0907\u092a-\u0938\u0941\u0930\u0915\u094d\u0937\u093f\u0924 \u0935\u093f\u0927\u093f\u092f\u093e\u0901 \u0909\u092a\u0932\u092c\u094d\u0927 \u0928\u0939\u0940\u0902 \u0939\u0948\u0902, \u0924\u094b \u092b\u0949\u0932\u092c\u0948\u0915 \u0935\u093f\u0927\u093f\u092f\u094b\u0902 \u0915\u093e \u0909\u092a\u092f\u094b\u0917 \u0915\u0930\u0947\u0902:</p> <pre><code>// \u092b\u0949\u0932\u092c\u0948\u0915 - Any? \u0932\u094c\u091f\u093e\u0924\u093e \u0939\u0948\nval name = ctx.getState(NameStep::class)\n\n// \u092b\u0949\u0932\u092c\u0948\u0915 - Any? \u0938\u094d\u0935\u0940\u0915\u093e\u0930 \u0915\u0930\u0924\u093e \u0939\u0948\nctx.setState(NameStep::class, \"John\")\nctx.delState(NameStep::class)\n</code></pre>"},{"location":"hi/FSM-and-Conversation-handling/#_16","title":"\u092a\u0942\u0930\u094d\u0923 \u0909\u0926\u093e\u0939\u0930\u0923","text":""},{"location":"hi/FSM-and-Conversation-handling/#_17","title":"\u0909\u092a\u092f\u094b\u0917\u0915\u0930\u094d\u0924\u093e \u092a\u0902\u091c\u0940\u0915\u0930\u0923 \u0935\u093f\u091c\u093c\u093e\u0930\u094d\u0921","text":"<pre><code>@WizardHandler(\n    trigger = [\"/register\"],\n    stateManagers = [StringStateManager::class, IntStateManager::class]\n)\nobject RegistrationWizard {\n    object NameStep : WizardStep(isInitial = true) {\n        override suspend fun onEntry(ctx: WizardContext) {\n            message { \"\u0906\u092a\u0915\u093e \u0928\u093e\u092e \u0915\u094d\u092f\u093e \u0939\u0948?\" }.send(ctx.user, ctx.bot)\n        }\n\n        override suspend fun onRetry(ctx: WizardContext) {\n            message { \"\u0915\u0943\u092a\u092f\u093e \u090f\u0915 \u0935\u0948\u0927 \u0928\u093e\u092e \u0926\u0930\u094d\u091c \u0915\u0930\u0947\u0902\u0964\" }.send(ctx.user, ctx.bot)\n        }\n\n        override suspend fun validate(ctx: WizardContext): Transition {\n            val name = ctx.update.text?.trim()\n            return if (name.isNullOrBlank() || name.length &lt; 2) {\n                Transition.Retry\n            } else {\n                Transition.Next\n            }\n        }\n\n        override suspend fun store(ctx: WizardContext): String {\n            return ctx.update.text!!.trim()\n        }\n    }\n\n    object AgeStep : WizardStep {\n        override suspend fun onEntry(ctx: WizardContext) {\n            message { \"\u0906\u092a\u0915\u0940 \u0906\u092f\u0941 \u0915\u094d\u092f\u093e \u0939\u0948?\" }.send(ctx.user, ctx.bot)\n        }\n\n        override suspend fun onRetry(ctx: WizardContext) {\n            message { \"\u0915\u0943\u092a\u092f\u093e \u090f\u0915 \u0935\u0948\u0927 \u0906\u092f\u0941 \u0926\u0930\u094d\u091c \u0915\u0930\u0947\u0902 (\u090f\u0915 \u0938\u0902\u0916\u094d\u092f\u093e \u0939\u094b\u0928\u0940 \u091a\u093e\u0939\u093f\u090f).\" }.send(ctx.user, ctx.bot)\n        }\n\n        override suspend fun validate(ctx: WizardContext): Transition {\n            val age = ctx.update.text?.toIntOrNull()\n            return when {\n                age == null -&gt; Transition.Retry\n                age &lt; 0 || age &gt; 150 -&gt; Transition.Retry\n                age &lt; 18 -&gt; Transition.JumpTo(UnderageStep::class)\n                else -&gt; Transition.Next\n            }\n        }\n\n        override suspend fun store(ctx: WizardContext): Int {\n            return ctx.update.text!!.toInt()\n        }\n    }\n\n    object UnderageStep : WizardStep {\n        override suspend fun onEntry(ctx: WizardContext) {\n            message { \n                \"\u0915\u094d\u0937\u092e\u093e \u0915\u0930\u0947\u0902, \u092a\u0902\u091c\u0940\u0915\u0930\u0923 \u0915\u0947 \u0932\u093f\u090f \u0906\u092a\u0915\u0940 \u0906\u092f\u0941 18 \u092f\u093e \u0909\u0938\u0938\u0947 \u0905\u0927\u093f\u0915 \u0939\u094b\u0928\u0940 \u091a\u093e\u0939\u093f\u090f\u0964\" \n            }.send(ctx.user, ctx.bot)\n        }\n\n        override suspend fun onRetry(ctx: WizardContext) = Unit\n\n        override suspend fun validate(ctx: WizardContext): Transition {\n            return Transition.Finish\n        }\n    }\n\n    object ConfirmationStep : WizardStep {\n        override suspend fun onEntry(ctx: WizardContext) {\n            // \u091f\u093e\u0907\u092a-\u0938\u0941\u0930\u0915\u094d\u0937\u093f\u0924 \u0938\u094d\u0925\u093f\u0924\u093f \u092a\u0939\u0941\u0902\u091a\n            val name: String? = ctx.getState&lt;NameStep&gt;()\n            val age: Int? = ctx.getState&lt;AgeStep&gt;()\n\n            val confirmation = buildString {\n                appendLine(\"\u0915\u0943\u092a\u092f\u093e \u0905\u092a\u0928\u0940 \u091c\u093e\u0928\u0915\u093e\u0930\u0940 \u0915\u0940 \u092a\u0941\u0937\u094d\u091f\u093f \u0915\u0930\u0947\u0902:\")\n                appendLine(\"\u0928\u093e\u092e: $name\")\n                appendLine(\"\u0906\u092f\u0941: $age\")\n                appendLine()\n                appendLine(\"\u092a\u0941\u0937\u094d\u091f\u093f \u0915\u0947 \u0932\u093f\u090f '\u0939\u093e\u0901' \u092f\u093e \u092a\u0941\u0928: \u0936\u0941\u0930\u0942 \u0915\u0930\u0928\u0947 \u0915\u0947 \u0932\u093f\u090f '\u0928\u0939\u0940\u0902' \u0915\u093e \u0909\u0924\u094d\u0924\u0930 \u0926\u0947\u0902\u0964\")\n            }\n\n            message { confirmation }.send(ctx.user, ctx.bot)\n        }\n\n        override suspend fun onRetry(ctx: WizardContext) {\n            message { \"\u0915\u0943\u092a\u092f\u093e '\u0939\u093e\u0901' \u092f\u093e '\u0928\u0939\u0940\u0902' \u0915\u093e \u0909\u0924\u094d\u0924\u0930 \u0926\u0947\u0902\u0964\" }.send(ctx.user, ctx.bot)\n        }\n\n        override suspend fun validate(ctx: WizardContext): Transition {\n            val response = ctx.update.text?.lowercase()?.trim()\n            return when (response) {\n                \"\u0939\u093e\u0901\" -&gt; Transition.Finish\n                \"\u0928\u0939\u0940\u0902\" -&gt; Transition.JumpTo(NameStep::class) // \u092a\u0941\u0928: \u0936\u0941\u0930\u0942 \u0915\u0930\u0947\u0902\n                else -&gt; Transition.Retry\n            }\n        }\n    }\n\n    object FinishStep : WizardStep {\n        override suspend fun onEntry(ctx: WizardContext) {\n            val name: String? = ctx.getState&lt;NameStep&gt;()\n            val age: Int? = ctx.getState&lt;AgeStep&gt;()\n\n            // \u0921\u0947\u091f\u093e\u092c\u0947\u0938 \u092e\u0947\u0902 \u0938\u0939\u0947\u091c\u0947\u0902, \u092a\u0941\u0937\u094d\u091f\u093f \u092d\u0947\u091c\u0947\u0902, \u0906\u0926\u093f\u0964\n            message { \n                \"\u092a\u0902\u091c\u0940\u0915\u0930\u0923 \u092a\u0942\u0930\u093e! \u0938\u094d\u0935\u093e\u0917\u0924 \u0939\u0948, $name (\u0906\u092f\u0941 $age).\" \n            }.send(ctx.user, ctx.bot)\n        }\n\n        override suspend fun onRetry(ctx: WizardContext) = Unit\n\n        override suspend fun validate(ctx: WizardContext): Transition {\n            return Transition.Finish\n        }\n    }\n}\n</code></pre>"},{"location":"hi/FSM-and-Conversation-handling/#_18","title":"\u0909\u0928\u094d\u0928\u0924 \u0938\u0941\u0935\u093f\u0927\u093e\u090f\u0901","text":""},{"location":"hi/FSM-and-Conversation-handling/#_19","title":"\u0936\u0930\u094d\u0924\u0940\u092f \u0938\u0902\u0915\u094d\u0930\u092e\u0923","text":"<p>\u0936\u0930\u094d\u0924\u0940\u092f \u092a\u094d\u0930\u0935\u093e\u0939 \u0915\u0947 \u0932\u093f\u090f <code>Transition.JumpTo</code> \u0915\u093e \u0909\u092a\u092f\u094b\u0917 \u0915\u0930\u0947\u0902:</p> <pre><code>override suspend fun validate(ctx: WizardContext): Transition {\n    val choice = ctx.update.text?.lowercase()\n    return when (choice) {\n        \"\u092a\u094d\u0930\u0940\u092e\u093f\u092f\u092e\" -&gt; Transition.JumpTo(PremiumStep::class)\n        \"\u092c\u0947\u0938\u093f\u0915\" -&gt; Transition.JumpTo(BasicStep::class)\n        else -&gt; Transition.Retry\n    }\n}\n</code></pre>"},{"location":"hi/FSM-and-Conversation-handling/#_20","title":"\u0938\u094d\u091f\u0947\u091f\u0932\u0947\u0938 \u091a\u0930\u0923","text":"<p>\u091a\u0930\u0923\u094b\u0902 \u0915\u094b \u0938\u094d\u0925\u093f\u0924\u093f \u0938\u0902\u0917\u094d\u0930\u0939\u0940\u0924 \u0915\u0930\u0928\u0947 \u0915\u0940 \u0906\u0935\u0936\u094d\u092f\u0915\u0924\u093e \u0928\u0939\u0940\u0902 \u0939\u0948\u0964 \u092c\u0938 <code>store()</code> \u0938\u0947 <code>null</code> \u0932\u094c\u091f\u093e\u090f\u0902 (\u092f\u093e \u091c\u0948\u0938\u093e \u0939\u0948 \u091b\u094b\u0921\u093c \u0926\u0947\u0902):</p> <pre><code>object ConfirmationStep : WizardStep {\n    override suspend fun store(ctx: WizardContext): Any? = null\n    // ... \u0936\u0947\u0937 \u0915\u093e\u0930\u094d\u092f\u093e\u0928\u094d\u0935\u092f\u0928\n}\n</code></pre>"},{"location":"hi/FSM-and-Conversation-handling/#_21","title":"\u0915\u0938\u094d\u091f\u092e \u0930\u093e\u091c\u094d\u092f \u092a\u094d\u0930\u092c\u0902\u0927\u0915","text":"<p>\u0915\u0938\u094d\u091f\u092e \u092d\u0902\u0921\u093e\u0930\u0923 (\u0921\u0947\u091f\u093e\u092c\u0947\u0938, Redis, \u0906\u0926\u093f) \u0915\u0947 \u0932\u093f\u090f <code>WizardStateManager&lt;T&gt;</code> \u0932\u093e\u0917\u0942 \u0915\u0930\u0947\u0902:</p> <pre><code>class DatabaseStateManager : WizardStateManager&lt;String&gt; {\n    override suspend fun get(\n        key: KClass&lt;out WizardStep&gt;,\n        reference: UserChatReference\n    ): String? {\n        // \u0921\u0947\u091f\u093e\u092c\u0947\u0938 \u0938\u0947 \u0932\u094b\u0921 \u0915\u0930\u0947\u0902\n        return database.getWizardState(reference.userId, key.qualifiedName)\n    }\n\n    override suspend fun set(\n        key: KClass&lt;out WizardStep&gt;,\n        reference: UserChatReference,\n        value: String\n    ) {\n        // \u0921\u0947\u091f\u093e\u092c\u0947\u0938 \u092e\u0947\u0902 \u0938\u0939\u0947\u091c\u0947\u0902\n        database.saveWizardState(reference.userId, key.qualifiedName, value)\n    }\n\n    override suspend fun del(\n        key: KClass&lt;out WizardStep&gt;,\n        reference: UserChatReference\n    ) {\n        // \u0921\u0947\u091f\u093e\u092c\u0947\u0938 \u0938\u0947 \u0939\u091f\u093e\u090f\u0902\n        database.deleteWizardState(reference.userId, key.qualifiedName)\n    }\n}\n</code></pre>"},{"location":"hi/FSM-and-Conversation-handling/#_22","title":"\u092f\u0939 \u0906\u0902\u0924\u0930\u093f\u0915 \u0930\u0942\u092a \u0938\u0947 \u0915\u0948\u0938\u0947 \u0915\u093e\u092e \u0915\u0930\u0924\u093e \u0939\u0948","text":""},{"location":"hi/FSM-and-Conversation-handling/#_23","title":"\u0915\u094b\u0921 \u0909\u0924\u094d\u092a\u093e\u0926\u0928","text":"<p>KSP \u0909\u0924\u094d\u092a\u0928\u094d\u0928 \u0915\u0930\u0924\u093e \u0939\u0948:</p> <ol> <li>WizardActivity: \u0939\u093e\u0930\u094d\u0921\u0915\u094b\u0921 \u091a\u0930\u0923\u094b\u0902 \u0915\u0947 \u0938\u093e\u0925 <code>WizardActivity</code> \u0915\u093e \u090f\u0915 \u0920\u094b\u0938 \u0915\u093e\u0930\u094d\u092f\u093e\u0928\u094d\u0935\u092f\u0928</li> <li>\u0938\u094d\u091f\u093e\u0930\u094d\u091f \u090f\u0915\u094d\u091f\u093f\u0935\u093f\u091f\u0940: \u0915\u092e\u093e\u0902\u0921 \u091f\u094d\u0930\u093f\u0917\u0930 \u0915\u094b \u0938\u0902\u092d\u093e\u0932\u0924\u093e \u0939\u0948 \u0914\u0930 \u0935\u093f\u091c\u093c\u093e\u0930\u094d\u0921 \u0936\u0941\u0930\u0942 \u0915\u0930\u0924\u093e \u0939\u0948</li> <li>\u0907\u0928\u092a\u0941\u091f \u090f\u0915\u094d\u091f\u093f\u0935\u093f\u091f\u0940: \u0935\u093f\u091c\u093c\u093e\u0930\u094d\u0921 \u092a\u094d\u0930\u0935\u093e\u0939 \u0915\u0947 \u0926\u094c\u0930\u093e\u0928 \u0909\u092a\u092f\u094b\u0917\u0915\u0930\u094d\u0924\u093e \u0907\u0928\u092a\u0941\u091f \u0915\u094b \u0938\u0902\u092d\u093e\u0932\u0924\u093e \u0939\u0948</li> <li>\u0938\u094d\u0925\u093f\u0924\u093f \u090f\u0915\u094d\u0938\u0947\u0938\u0930\u094d\u0938: \u0938\u094d\u0925\u093f\u0924\u093f \u092a\u0939\u0941\u0902\u091a \u0915\u0947 \u0932\u093f\u090f \u091f\u093e\u0907\u092a-\u0938\u0941\u0930\u0915\u094d\u0937\u093f\u0924 \u090f\u0915\u094d\u0938\u091f\u0947\u0902\u0936\u0928 \u092b\u093c\u0902\u0915\u094d\u0936\u0902\u0938</li> </ol>"},{"location":"hi/FSM-and-Conversation-handling/#_24","title":"\u092a\u094d\u0930\u0935\u093e\u0939","text":"<ol> <li>\u0909\u092a\u092f\u094b\u0917\u0915\u0930\u094d\u0924\u093e <code>/register</code> \u092d\u0947\u091c\u0924\u093e \u0939\u0948 \u2192 \u0938\u094d\u091f\u093e\u0930\u094d\u091f \u090f\u0915\u094d\u091f\u093f\u0935\u093f\u091f\u0940 \u092c\u0941\u0932\u093e\u0908 \u091c\u093e\u0924\u0940 \u0939\u0948</li> <li>\u0938\u094d\u091f\u093e\u0930\u094d\u091f \u090f\u0915\u094d\u091f\u093f\u0935\u093f\u091f\u0940 <code>WizardContext</code> \u092c\u0928\u093e\u0924\u093e \u0939\u0948 \u0914\u0930 <code>wizardActivity.start(ctx)</code> \u0915\u0949\u0932 \u0915\u0930\u0924\u093e \u0939\u0948</li> <li><code>start()</code> \u092a\u094d\u0930\u093e\u0930\u0902\u092d\u093f\u0915 \u091a\u0930\u0923 \u092e\u0947\u0902 \u092a\u094d\u0930\u0935\u0947\u0936 \u0915\u0930\u0924\u093e \u0939\u0948 \u0914\u0930 \u0935\u0930\u094d\u0924\u092e\u093e\u0928 \u091a\u0930\u0923 \u0915\u094b \u091f\u094d\u0930\u0948\u0915 \u0915\u0930\u0928\u0947 \u0915\u0947 \u0932\u093f\u090f <code>inputListener</code> \u0938\u0947\u091f \u0915\u0930\u0924\u093e \u0939\u0948</li> <li>\u0909\u092a\u092f\u094b\u0917\u0915\u0930\u094d\u0924\u093e \u0938\u0902\u0926\u0947\u0936 \u092d\u0947\u091c\u0924\u093e \u0939\u0948 \u2192 \u0907\u0928\u092a\u0941\u091f \u090f\u0915\u094d\u091f\u093f\u0935\u093f\u091f\u0940 \u092c\u0941\u0932\u093e\u0908 \u091c\u093e\u0924\u0940 \u0939\u0948</li> <li>\u0907\u0928\u092a\u0941\u091f \u090f\u0915\u094d\u091f\u093f\u0935\u093f\u091f\u0940 <code>wizardActivity.handleInput(ctx)</code> \u0915\u0949\u0932 \u0915\u0930\u0924\u093e \u0939\u0948</li> <li><code>handleInput()</code> \u0907\u0928\u092a\u0941\u091f \u0915\u094b \u092e\u093e\u0928\u094d\u092f \u0915\u0930\u0924\u093e \u0939\u0948, \u0938\u094d\u0925\u093f\u0924\u093f \u0915\u094b \u092c\u0928\u093e\u090f \u0930\u0916\u0924\u093e \u0939\u0948, \u0914\u0930 \u0905\u0917\u0932\u0947 \u091a\u0930\u0923 \u092a\u0930 \u0938\u0902\u0915\u094d\u0930\u092e\u0923 \u0915\u0930\u0924\u093e \u0939\u0948</li> <li>\u092a\u094d\u0930\u0915\u094d\u0930\u093f\u092f\u093e \u0924\u092c \u0924\u0915 \u0926\u094b\u0939\u0930\u093e\u0924\u0940 \u0939\u0948 \u091c\u092c \u0924\u0915 <code>Transition.Finish</code> \u0935\u093e\u092a\u0938 \u0928\u0939\u0940\u0902 \u0906 \u091c\u093e\u0924\u093e</li> </ol>"},{"location":"hi/FSM-and-Conversation-handling/#_25","title":"\u0938\u094d\u0925\u093f\u0924\u093f \u0938\u094d\u0925\u093e\u092f\u093f\u0924\u094d\u0935","text":"<ul> <li>\u0938\u092b\u0932 \u0938\u0924\u094d\u092f\u093e\u092a\u0928 \u0915\u0947 \u092c\u093e\u0926 \u0938\u094d\u0925\u093f\u0924\u093f \u092c\u0928\u093e\u090f \u0930\u0916\u0940 \u091c\u093e\u0924\u0940 \u0939\u0948 (\u0938\u0902\u0915\u094d\u0930\u092e\u0923 \u0938\u0947 \u092a\u0939\u0932\u0947)</li> <li>\u092a\u094d\u0930\u0924\u094d\u092f\u0947\u0915 \u091a\u0930\u0923 \u0915\u093e <code>store()</code> \u0930\u093f\u091f\u0930\u094d\u0928 \u092e\u093e\u0928 \u092e\u093f\u0932\u093e\u0928 <code>WizardStateManager</code> \u0915\u093e \u0909\u092a\u092f\u094b\u0917 \u0915\u0930\u0915\u0947 \u0938\u0939\u0947\u091c\u093e \u091c\u093e\u0924\u093e \u0939\u0948</li> <li>\u0938\u094d\u0925\u093f\u0924\u093f \u092a\u094d\u0930\u0924\u093f \u0909\u092a\u092f\u094b\u0917\u0915\u0930\u094d\u0924\u093e \u0914\u0930 \u091a\u0948\u091f (<code>UserChatReference</code>) \u092a\u0930 \u0938\u094d\u0915\u094b\u092a \u0915\u0940 \u091c\u093e\u0924\u0940 \u0939\u0948</li> </ul>"},{"location":"hi/FSM-and-Conversation-handling/#_26","title":"\u0938\u0930\u094d\u0935\u094b\u0924\u094d\u0924\u092e \u0905\u092d\u094d\u092f\u093e\u0938","text":""},{"location":"hi/FSM-and-Conversation-handling/#1","title":"1. \u0939\u092e\u0947\u0936\u093e \u0938\u094d\u092a\u0937\u094d\u091f \u0938\u0902\u0915\u0947\u0924 \u0926\u0947\u0902","text":"<pre><code>override suspend fun onEntry(ctx: WizardContext) {\n    message { \n        \"\u0915\u0943\u092a\u092f\u093e \u0905\u092a\u0928\u093e \u0908\u092e\u0947\u0932 \u092a\u0924\u093e \u0926\u0930\u094d\u091c \u0915\u0930\u0947\u0902:\\n\" +\n        \"(\u092a\u094d\u0930\u093e\u0930\u0942\u092a: user@example.com)\" \n    }.send(ctx.user, ctx.bot)\n}\n</code></pre>"},{"location":"hi/FSM-and-Conversation-handling/#2","title":"2. \u0938\u0924\u094d\u092f\u093e\u092a\u0928 \u0924\u094d\u0930\u0941\u091f\u093f\u092f\u094b\u0902 \u0915\u094b \u0938\u094c\u092e\u094d\u092f\u0924\u093e \u0938\u0947 \u0938\u0902\u092d\u093e\u0932\u0947\u0902","text":"<pre><code>override suspend fun onRetry(ctx: WizardContext) {\n    message { \n        \"\u0905\u092e\u093e\u0928\u094d\u092f \u0908\u092e\u0947\u0932 \u092a\u094d\u0930\u093e\u0930\u0942\u092a\u0964 \u0915\u0943\u092a\u092f\u093e \u092a\u0941\u0928: \u092a\u094d\u0930\u092f\u093e\u0938 \u0915\u0930\u0947\u0902\u0964\\n\" +\n        \"\u0909\u0926\u093e\u0939\u0930\u0923: user@example.com\" \n    }.send(ctx.user, ctx.bot)\n}\n</code></pre>"},{"location":"hi/FSM-and-Conversation-handling/#3-","title":"3. \u091f\u093e\u0907\u092a-\u0938\u0941\u0930\u0915\u094d\u0937\u093f\u0924 \u0938\u094d\u0925\u093f\u0924\u093f \u092a\u0939\u0941\u0902\u091a \u0915\u093e \u0909\u092a\u092f\u094b\u0917 \u0915\u0930\u0947\u0902","text":"<p>\u0909\u0924\u094d\u092a\u0928\u094d\u0928 \u091f\u093e\u0907\u092a-\u0938\u0941\u0930\u0915\u094d\u0937\u093f\u0924 \u0935\u093f\u0927\u093f\u092f\u094b\u0902 \u0915\u094b \u092a\u094d\u0930\u093e\u0925\u092e\u093f\u0915\u0924\u093e \u0926\u0947\u0902:</p> <pre><code>// \u2705 \u0905\u091a\u094d\u091b\u093e - \u091f\u093e\u0907\u092a-\u0938\u0941\u0930\u0915\u094d\u0937\u093f\u0924\nval name: String? = ctx.getState&lt;NameStep&gt;()\n\n// \u274c \u091f\u093e\u0932\u0947\u0902 - \u091f\u093e\u0907\u092a \u0938\u0941\u0930\u0915\u094d\u0937\u093e \u0916\u094b \u0926\u0947\u0924\u093e \u0939\u0948\nval name = ctx.getState(NameStep::class) as? String\n</code></pre>"},{"location":"hi/FSM-and-Conversation-handling/#4","title":"4. \u091a\u0930\u0923\u094b\u0902 \u0915\u094b \u0915\u0947\u0902\u0926\u094d\u0930\u093f\u0924 \u0930\u0916\u0947\u0902","text":"<p>\u092a\u094d\u0930\u0924\u094d\u092f\u0947\u0915 \u091a\u0930\u0923 \u0915\u0940 \u090f\u0915 \u090f\u0915\u0932 \u091c\u093f\u092e\u094d\u092e\u0947\u0926\u093e\u0930\u0940 \u0939\u094b\u0928\u0940 \u091a\u093e\u0939\u093f\u090f:</p> <pre><code>// \u2705 \u0905\u091a\u094d\u091b\u093e - \u0915\u0947\u0902\u0926\u094d\u0930\u093f\u0924 \u091a\u0930\u0923\nobject EmailStep : WizardStep {\n    // \u0915\u0947\u0935\u0932 \u0908\u092e\u0947\u0932 \u0938\u0902\u0917\u094d\u0930\u0939 \u0915\u094b \u0938\u0902\u092d\u093e\u0932\u0924\u093e \u0939\u0948\n}\n\n// \u274c \u091f\u093e\u0932\u0947\u0902 - \u092c\u0939\u0941\u0924 \u0905\u0927\u093f\u0915 \u0924\u0930\u094d\u0915\nobject PersonalInfoStep : WizardStep {\n    // \u0928\u093e\u092e, \u0908\u092e\u0947\u0932, \u092b\u093c\u094b\u0928, \u092a\u0924\u093e \u0938\u0902\u092d\u093e\u0932\u0924\u093e \u0939\u0948...\n}\n</code></pre>"},{"location":"hi/FSM-and-Conversation-handling/#5","title":"5. \u0938\u093e\u0930\u094d\u0925\u0915 \u091a\u0930\u0923 \u0928\u093e\u092e\u094b\u0902 \u0915\u093e \u0909\u092a\u092f\u094b\u0917 \u0915\u0930\u0947\u0902","text":"<pre><code>// \u2705 \u0905\u091a\u094d\u091b\u093e\nobject EmailVerificationStep : WizardStep\n\n// \u274c \u091f\u093e\u0932\u0947\u0902\nobject Step2 : WizardStep\n</code></pre>"},{"location":"hi/FSM-and-Conversation-handling/#6","title":"6. \u091c\u092c \u0906\u0935\u0936\u094d\u092f\u0915 \u0939\u094b \u0924\u094b \u0938\u094d\u0925\u093f\u0924\u093f \u0938\u093e\u092b\u093c \u0915\u0930\u0947\u0902","text":"<p>\u092f\u0926\u093f \u0906\u092a\u0915\u094b \u092e\u0948\u0928\u094d\u092f\u0941\u0905\u0932 \u0930\u0942\u092a \u0938\u0947 \u0938\u094d\u0925\u093f\u0924\u093f \u0938\u093e\u092b\u093c \u0915\u0930\u0928\u0947 \u0915\u0940 \u0906\u0935\u0936\u094d\u092f\u0915\u0924\u093e \u0939\u0948:</p> <pre><code>object CancelStep : WizardStep {\n    override suspend fun onEntry(ctx: WizardContext) {\n        // \u0938\u092d\u0940 \u0935\u093f\u091c\u093c\u093e\u0930\u094d\u0921 \u0938\u094d\u0925\u093f\u0924\u093f \u0938\u093e\u092b\u093c \u0915\u0930\u0947\u0902\n        ctx.delState&lt;NameStep&gt;()\n        ctx.delState&lt;AgeStep&gt;()\n\n        message { \"\u092a\u0902\u091c\u0940\u0915\u0930\u0923 \u0930\u0926\u094d\u0926 \u0915\u0930 \u0926\u093f\u092f\u093e \u0917\u092f\u093e\u0964\" }.send(ctx.user, ctx.bot)\n    }\n}\n</code></pre>"},{"location":"hi/FSM-and-Conversation-handling/#_27","title":"\u0938\u093e\u0930\u093e\u0902\u0936","text":"<p>\u0935\u093f\u091c\u093c\u093e\u0930\u094d\u0921 \u0938\u093f\u0938\u094d\u091f\u092e \u092a\u094d\u0930\u0926\u093e\u0928 \u0915\u0930\u0924\u093e \u0939\u0948: - \u2705 \u091f\u093e\u0907\u092a-\u0938\u0941\u0930\u0915\u094d\u0937\u093f\u0924 \u0938\u094d\u0925\u093f\u0924\u093f \u092a\u094d\u0930\u092c\u0902\u0927\u0928 \u0938\u0902\u0915\u0932\u0928-\u0938\u092e\u092f \u091c\u093e\u0902\u091a \u0915\u0947 \u0938\u093e\u0925 - \u2705 \u0918\u094b\u0937\u0923\u093e\u0924\u094d\u092e\u0915 \u0928\u0947\u0938\u094d\u091f\u0947\u0921 \u0915\u094d\u0932\u093e\u0938 \u0915\u0947 \u0930\u0942\u092a \u092e\u0947\u0902 \u091a\u0930\u0923 \u092a\u0930\u093f\u092d\u093e\u0937\u093e\u090f\u0901 - \u2705 \u0932\u091a\u0940\u0932\u093e \u0936\u0930\u094d\u0924\u0940\u092f \u0924\u0930\u094d\u0915 \u0915\u0947 \u0938\u093e\u0925 \u0938\u0902\u0915\u094d\u0930\u092e\u0923 - \u2705 \u0938\u094d\u0935\u091a\u093e\u0932\u093f\u0924 KSP \u0915\u0947 \u092e\u093e\u0927\u094d\u092f\u092e \u0938\u0947 \u0915\u094b\u0921 \u0909\u0924\u094d\u092a\u093e\u0926\u0928 - \u2705 \u090f\u0915\u0940\u0915\u0943\u0924 \u092e\u094c\u091c\u0942\u0926\u093e \u090f\u0915\u094d\u091f\u093f\u0935\u093f\u091f\u0940 \u0938\u093f\u0938\u094d\u091f\u092e \u0915\u0947 \u0938\u093e\u0925 - \u2705 \u092a\u094d\u0932\u0917 \u0915\u0930\u0928\u0947 \u092f\u094b\u0917\u094d\u092f \u0930\u093e\u091c\u094d\u092f \u092d\u0902\u0921\u093e\u0930\u0923 \u092c\u0948\u0915\u090f\u0902\u0921</p> <p>\u0935\u093f\u091c\u093c\u093e\u0930\u094d\u0921 \u092c\u0928\u093e\u0928\u093e \u0936\u0941\u0930\u0942 \u0915\u0930\u0947\u0902 <code>@WizardHandler</code> \u090f\u0928\u094b\u091f\u0947\u0936\u0928 \u0915\u0947 \u0938\u093e\u0925 \u090f\u0915 \u0915\u094d\u0932\u093e\u0938 \u0915\u094b \u090f\u0928\u094b\u091f \u0915\u0930\u0915\u0947 \u0914\u0930 \u0905\u092a\u0928\u0947 \u091a\u0930\u0923\u094b\u0902 \u0915\u094b \u0928\u0947\u0938\u094d\u091f\u0947\u0921 <code>WizardStep</code> \u0911\u092c\u094d\u091c\u0947\u0915\u094d\u091f \u0915\u0947 \u0930\u0942\u092a \u092e\u0947\u0902 \u092a\u0930\u093f\u092d\u093e\u0937\u093f\u0924 \u0915\u0930\u0915\u0947! \u092f\u0926\u093f \u0906\u092a\u0915\u0947 \u0915\u094b\u0908 \u092a\u094d\u0930\u0936\u094d\u0928 \u0939\u0948\u0902 \u0924\u094b \u0939\u092e\u0938\u0947 \u091a\u0948\u091f \u092e\u0947\u0902 \u0938\u0902\u092a\u0930\u094d\u0915 \u0915\u0930\u0947\u0902, \u0939\u092e \u092e\u0926\u0926 \u0915\u0930\u0928\u0947 \u0915\u0947 \u0932\u093f\u090f \u0924\u0948\u092f\u093e\u0930 \u0939\u0948\u0902 :)</p>"},{"location":"hi/Functional-DSL/","title":"\u092b\u0902\u0915\u094d\u0936\u0928\u0932 \u0921\u0940\u090f\u0938\u090f\u0932","text":""},{"location":"hi/Functional-DSL/#to-infinity-functional-dsl-and-beyond","title":"To ~~infinity~~ functional dsl and beyond!","text":"<p>\u092c\u0949\u091f \u090f\u0928\u094b\u091f\u0947\u0936\u0928-\u0906\u0927\u093e\u0930\u093f\u0924 \u0914\u0930 \u092b\u0902\u0915\u094d\u0936\u0928\u0932 \u0921\u0940\u090f\u0938\u090f\u0932 \u0926\u094b\u0928\u094b\u0902 \u0938\u0947\u091f\u093f\u0902\u0917 \u0915\u0902\u091f\u0947\u0915\u094d\u0938\u094d\u091f \u0915\u093e \u0938\u092e\u0930\u094d\u0925\u0928 \u0915\u0930\u0924\u093e \u0939\u0948\u0964 \u0906\u092a \u0926\u094b\u0928\u094b\u0902 \u0926\u0943\u0937\u094d\u091f\u093f\u0915\u094b\u0923\u094b\u0902 \u0915\u094b \u092e\u093f\u0932\u093e \u0938\u0915\u0924\u0947 \u0939\u0948\u0902\u0964</p>"},{"location":"hi/Functional-DSL/#_1","title":"\u092b\u0902\u0915\u094d\u0936\u0928\u0932 \u0921\u0940\u090f\u0938\u090f\u0932","text":"<p>\u092b\u0902\u0915\u094d\u0936\u0928\u0932 \u0921\u0940\u090f\u0938\u090f\u0932 \u092c\u0949\u091f \u0915\u0902\u091f\u0947\u0915\u094d\u0938\u094d\u091f \u0915\u094b \u092a\u0930\u093f\u092d\u093e\u0937\u093f\u0924 \u0915\u0930\u0928\u0947 \u0915\u093e \u090f\u0915 \u0905\u0932\u0917 \u0924\u0930\u0940\u0915\u093e \u0939\u0948\u0964</p> <p>\u0909\u0926\u093e\u0939\u0930\u0923:</p> <pre><code>suspend fun main() {\n    val bot = TelegramBot(\"BOT_TOKEN\")\n\n    bot.setFunctionality {\n        onChosenInlineResult {\n            println(\"got a result ${update.chosenInlineResult.resultId} from ${update.user}\")\n        }\n    }\n}\n</code></pre>"},{"location":"hi/Functional-DSL/#_2","title":"\u0915\u092e\u093e\u0902\u0921 \u0914\u0930 \u0907\u0928\u092a\u0941\u091f","text":"<p>\u0906\u092a \u092b\u0902\u0915\u094d\u0936\u0928\u0932 \u0921\u0940\u090f\u0938\u090f\u0932 \u0915\u093e \u0909\u092a\u092f\u094b\u0917 \u0915\u0930\u0915\u0947 <code>commands</code> \u0914\u0930 <code>inputs</code> \u0926\u094b\u0928\u094b\u0902 \u0915\u094b \u0938\u0902\u092d\u093e\u0932 \u0938\u0915\u0924\u0947 \u0939\u0948\u0902\u0964</p>"},{"location":"hi/Functional-DSL/#_3","title":"\u0915\u092e\u093e\u0902\u0921","text":"<pre><code>suspend fun main() {\n    val bot = TelegramBot(\"BOT_TOKEN\")\n\n    bot.setFunctionality {\n        // Regular command\n        onCommand(\"/start\") {\n            message { \"Hello\" }.send(user, bot)\n        }\n\n        // Regex-based command matching\n        onCommand(\"\"\"(red|green|blue)\"\"\".toRegex()) {\n            message { \"you typed ${update.text} color\" }.send(user, bot)\n        }\n    }\n}\n</code></pre> <p><code>onCommand</code> \u092e\u0947\u0902, \u092a\u093e\u0930\u094d\u0938 \u0915\u093f\u090f \u0917\u090f \u092a\u0948\u0930\u093e\u092e\u0940\u091f\u0930 \u0906\u092a\u0915\u0940 \u0915\u0949\u0928\u094d\u092b\u093c\u093f\u0917\u0930\u0947\u0936\u0928 \u0915\u0947 \u0906\u0927\u093e\u0930 \u092a\u0930 <code>Map&lt;String, String&gt;</code> \u0915\u0947 \u0930\u0942\u092a \u092e\u0947\u0902 \u0909\u092a\u0932\u092c\u094d\u0927 \u0939\u0948\u0902\u0964</p>"},{"location":"hi/Functional-DSL/#_4","title":"\u0907\u0928\u092a\u0941\u091f","text":"<p>\u0906\u092a <code>bot.inputListener</code> \u0915\u0947 \u092e\u093e\u0927\u094d\u092f\u092e \u0938\u0947 \u0907\u0928\u092a\u0941\u091f \u0915\u093e \u0909\u092a\u092f\u094b\u0917 \u0915\u0930 \u0938\u0915\u0924\u0947 \u0939\u0948\u0902\u0964</p> <pre><code>suspend fun main() {\n    val bot = TelegramBot(\"BOT_TOKEN\")\n\n    bot.setFunctionality {\n        onCommand(\"/start\") {\n            message { \"Hello, what's your name?\" }.send(user, bot)\n            bot.inputListener[user] = \"testInput\"\n        }\n\n        onInput(\"testInput\") {\n            message { \"Hey, nice to meet you, ${update.text}\" }.send(user, bot)\n        }\n    }\n}\n</code></pre>"},{"location":"hi/Functional-DSL/#_5","title":"\u0907\u0928\u092a\u0941\u091f \u091a\u0947\u0928","text":"<p>\u092e\u0932\u094d\u091f\u0940-\u0938\u094d\u091f\u0947\u092a \u0907\u0928\u092a\u0941\u091f \u092b\u094d\u0932\u094b \u0915\u0947 \u0932\u093f\u090f, <code>inputChain</code> \u0915\u093e \u0909\u092a\u092f\u094b\u0917 \u0915\u0930\u0947\u0902:</p> <pre><code>bot.setFunctionality {\n    inputChain(\"conversation\") {\n        message { \"Nice to meet you, ${update.text}\" }.send(user, bot)\n        message { \"What is your favorite food?\" }.send(user, bot)\n    }.breakIf({ update.text == \"peanut butter\" }) { // chain break condition\n        message { \"Oh, too bad, I'm allergic to it.\" }.send(user, bot)\n        // action that will be applied when condition matches\n    }.andThen {\n        // next input point if break condition doesn't match\n        message { \"Great choice!\" }.send(user, bot)\n    }\n}\n</code></pre> <p>\u091a\u0947\u0928 \u0938\u094d\u0935\u091a\u093e\u0932\u093f\u0924 \u0930\u0942\u092a \u0938\u0947 \u0905\u0917\u0932\u0947 \u091a\u0930\u0923 \u092a\u0930 \u0906\u0917\u0947 \u092c\u0922\u093c\u0924\u0940 \u0939\u0948 \u091c\u092c \u0924\u0915 \u0915\u093f \u0915\u094b\u0908 \u092c\u094d\u0930\u0947\u0915 \u0915\u0902\u0921\u0940\u0936\u0928 \u092a\u0942\u0930\u0940 \u0928 \u0939\u094b\u0964 \u092f\u0926\u093f \u0915\u094b\u0908 \u092c\u094d\u0930\u0947\u0915 \u0915\u0902\u0921\u0940\u0936\u0928 \u092e\u0948\u091a \u0939\u094b\u0924\u0940 \u0939\u0948 \u0914\u0930 <code>repeat</code> <code>true</code> (\u0921\u093f\u092b\u093c\u0949\u0932\u094d\u091f) \u0939\u0948, \u0924\u094b \u0909\u092a\u092f\u094b\u0917\u0915\u0930\u094d\u0924\u093e \u0935\u0930\u094d\u0924\u092e\u093e\u0928 \u091a\u0930\u0923 \u092a\u0930 \u0930\u0939\u0924\u093e \u0939\u0948\u0964</p>"},{"location":"hi/Functional-DSL/#_6","title":"\u0905\u092a\u0921\u0947\u091f \u092a\u094d\u0930\u0915\u093e\u0930 \u0939\u0948\u0902\u0921\u0932\u0930","text":"<p>\u0935\u093f\u0936\u093f\u0937\u094d\u091f \u0905\u092a\u0921\u0947\u091f \u092a\u094d\u0930\u0915\u093e\u0930\u094b\u0902 \u0915\u094b \u0938\u0940\u0927\u0947 \u0938\u0902\u092d\u093e\u0932\u0947\u0902:</p> <pre><code>bot.setFunctionality {\n    onUpdate(UpdateType.MESSAGE, UpdateType.CALLBACK_QUERY) {\n        // Handle both message and callback query updates\n        println(\"Received update: ${update.type}\")\n    }\n}\n</code></pre>"},{"location":"hi/Functional-DSL/#_7","title":"\u0938\u093e\u092e\u093e\u0928\u094d\u092f \u092e\u0948\u091a\u0930","text":"<p><code>common</code> \u0915\u093e \u0909\u092a\u092f\u094b\u0917 \u0915\u0930\u0915\u0947 \u091f\u0947\u0915\u094d\u0938\u094d\u091f \u0915\u0902\u091f\u0947\u0902\u091f (\u0915\u0947\u0935\u0932 \u0915\u092e\u093e\u0902\u0921 \u0928\u0939\u0940\u0902) \u0938\u0947 \u092e\u093f\u0932\u093e\u0928 \u0915\u0930\u0947\u0902:</p> <pre><code>bot.setFunctionality {\n    // String matching\n    common(\"hello\") {\n        message { \"Hi there!\" }.send(user, bot)\n    }\n\n    // Regex matching\n    common(\"\"\"\\d+\"\"\".toRegex()) {\n        message { \"You sent a number!\" }.send(user, bot)\n    }\n}\n</code></pre>"},{"location":"hi/Functional-DSL/#_8","title":"\u092b\u0949\u0932\u092c\u0948\u0915 \u0939\u0948\u0902\u0921\u0932\u0930","text":"<p>\u0909\u0928 \u0905\u092a\u0921\u0947\u091f\u094d\u0938 \u0915\u094b \u0938\u0902\u092d\u093e\u0932\u0947\u0902 \u091c\u093f\u0928\u094d\u0939\u0947\u0902 \u0915\u093f\u0938\u0940 \u0939\u0948\u0902\u0921\u0932\u0930 \u0926\u094d\u0935\u093e\u0930\u093e \u092a\u094d\u0930\u094b\u0938\u0947\u0938 \u0928\u0939\u0940\u0902 \u0915\u093f\u092f\u093e \u0917\u092f\u093e:</p> <pre><code>bot.setFunctionality {\n    whenNotHandled {\n        message { \"I didn't understand that.\" }.send(user, bot)\n    }\n}\n</code></pre>"},{"location":"hi/Functional-DSL/#_9","title":"\u090f\u0921\u0935\u093e\u0902\u0938\u094d\u0921 \u0915\u0949\u0928\u094d\u092b\u093c\u093f\u0917\u0930\u0947\u0936\u0928","text":""},{"location":"hi/Functional-DSL/#_10","title":"\u0930\u0947\u091f \u0932\u093f\u092e\u093f\u091f\u093f\u0902\u0917","text":"<p>\u0915\u093f\u0938\u0940 \u092d\u0940 \u0939\u0948\u0902\u0921\u0932\u0930 \u092a\u0930 \u0930\u0947\u091f \u0932\u093f\u092e\u093f\u091f \u0932\u093e\u0917\u0942 \u0915\u0930\u0947\u0902:</p> <pre><code>bot.setFunctionality {\n    onCommand(\"/expensive\", rateLimits = RateLimits(5, 60)) {\n        // This command can only be called 5 times per 60 seconds\n        message { \"Processing...\" }.send(user, bot)\n    }\n}\n</code></pre>"},{"location":"hi/Functional-DSL/#_11","title":"\u0917\u093e\u0930\u094d\u0921","text":"<p>\u0915\u0938\u094d\u091f\u092e \u0935\u0948\u0932\u093f\u0921\u0947\u0936\u0928 \u0932\u0949\u091c\u093f\u0915 \u091c\u094b\u0921\u093c\u0928\u0947 \u0915\u0947 \u0932\u093f\u090f \u0917\u093e\u0930\u094d\u0921 \u0915\u093e \u0909\u092a\u092f\u094b\u0917 \u0915\u0930\u0947\u0902:</p> <pre><code>bot.setFunctionality {\n    onCommand(\"/admin\", guard = AdminGuard::class) {\n        message { \"Admin command executed\" }.send(user, bot)\n    }\n}\n</code></pre>"},{"location":"hi/Functional-DSL/#_12","title":"\u0906\u0930\u094d\u0917\u094d\u092f\u0941\u092e\u0947\u0902\u091f \u092a\u093e\u0930\u094d\u0938\u093f\u0902\u0917","text":"<p>\u0915\u092e\u093e\u0902\u0921 \u0906\u0930\u094d\u0917\u094d\u092f\u0941\u092e\u0947\u0902\u091f\u094d\u0938 \u0915\u094b \u0915\u0948\u0938\u0947 \u092a\u093e\u0930\u094d\u0938 \u0915\u093f\u092f\u093e \u091c\u093e\u0924\u093e \u0939\u0948, \u0907\u0938\u0947 \u0915\u0938\u094d\u091f\u092e\u093e\u0907\u091c\u093c \u0915\u0930\u0947\u0902:</p> <pre><code>bot.setFunctionality {\n    onCommand(\"/custom\", argParser = CustomArgParser::class) {\n        // parameters will be parsed using CustomArgParser\n        message { \"Parameters: $parameters\" }.send(user, bot)\n    }\n}\n</code></pre>"},{"location":"hi/Functional-DSL/#-","title":"\u092b\u0902\u0915\u094d\u0936\u0928\u0932 \u0914\u0930 \u090f\u0928\u094b\u091f\u0947\u0936\u0928-\u0906\u0927\u093e\u0930\u093f\u0924 \u0938\u0947\u091f\u093f\u0902\u0917 \u0915\u094b \u092e\u093f\u0932\u093e\u0928\u093e","text":"<p>\u0906\u092a \u090f\u0915 \u0939\u0940 \u092c\u0949\u091f \u092e\u0947\u0902 \u0926\u094b\u0928\u094b\u0902 \u0926\u0943\u0937\u094d\u091f\u093f\u0915\u094b\u0923\u094b\u0902 \u0915\u093e \u0909\u092a\u092f\u094b\u0917 \u0915\u0930 \u0938\u0915\u0924\u0947 \u0939\u0948\u0902:</p> <pre><code>// Annotation-based handler\n@CommandHandler([\"/register\"])\nsuspend fun register(ctx: CommandContext) {\n    message { \"Registration started\" }.send(ctx.user, ctx.bot)\n}\n\n// Functional handler\nbot.setFunctionality {\n    onCommand(\"/help\") {\n        message { \"Available commands: /register, /help\" }.send(user, bot)\n    }\n}\n</code></pre> <p>\u0926\u094b\u0928\u094b\u0902 \u0939\u0948\u0902\u0921\u0932\u0930 \u090f\u0915 \u0939\u0940 <code>ActivityRegistry</code> \u092e\u0947\u0902 \u092a\u0902\u091c\u0940\u0915\u0943\u0924 \u0939\u0948\u0902 \u0914\u0930 \u0938\u0939\u091c\u0924\u093e \u0938\u0947 \u0915\u093e\u092e \u0915\u0930\u0924\u0947 \u0939\u0948\u0902\u0964</p>"},{"location":"hi/Functional-DSL/#_13","title":"\u0926\u0947\u0916\u0947\u0902 \u092d\u0940","text":"<ul> <li>Action</li> <li>Useful utilities</li> </ul>"},{"location":"hi/Guards/","title":"\u0917\u093e\u0930\u094d\u0921","text":""},{"location":"hi/Guards/#_1","title":"\u092a\u0930\u093f\u091a\u092f","text":"<p>\u0917\u093e\u0930\u094d\u0921 \u0935\u093f\u0915\u093e\u0938\u0915\u0930\u094d\u0924\u093e\u0913\u0902 \u0915\u0947 \u0932\u093f\u090f \u090f\u0915 \u0906\u0935\u0936\u094d\u092f\u0915 \u0938\u0941\u0935\u093f\u0927\u093e \u0939\u0948 \u091c\u094b \u092c\u0949\u091f \u092c\u0928\u093e \u0930\u0939\u0947 \u0939\u0948\u0902\u0964 \u092f\u0947 \u0917\u093e\u0930\u094d\u0921 \u092a\u094d\u0930\u0940-\u090f\u0915\u094d\u091c\u093c\u0940\u0915\u094d\u092f\u0942\u0936\u0928 \u091a\u0947\u0915 \u0915\u0947 \u0930\u0942\u092a \u092e\u0947\u0902 \u0915\u093e\u0930\u094d\u092f \u0915\u0930\u0924\u0947 \u0939\u0948\u0902 \u091c\u094b \u092f\u0939 \u0928\u093f\u0930\u094d\u0927\u093e\u0930\u093f\u0924 \u0915\u0930\u0924\u0947 \u0939\u0948\u0902 \u0915\u093f \u0915\u094d\u092f\u093e \u0915\u094b\u0908 \u0935\u093f\u0936\u0947\u0937 \u0915\u092e\u093e\u0902\u0921 \u0928\u093f\u0937\u094d\u092a\u093e\u0926\u093f\u0924 \u0915\u093f\u092f\u093e \u091c\u093e\u0928\u093e \u091a\u093e\u0939\u093f\u090f\u0964 \u0907\u0928 \u091a\u0947\u0915 \u0915\u094b \u0932\u093e\u0917\u0942 \u0915\u0930\u0915\u0947, \u0935\u093f\u0915\u093e\u0938\u0915\u0930\u094d\u0924\u093e \u0905\u092a\u0928\u0947 \u092c\u0949\u091f \u0915\u0940 \u0915\u093e\u0930\u094d\u092f\u0915\u094d\u0937\u092e\u0924\u093e, \u0938\u0941\u0930\u0915\u094d\u0937\u093e \u0914\u0930 \u0909\u092a\u092f\u094b\u0917\u0915\u0930\u094d\u0924\u093e \u0905\u0928\u0941\u092d\u0935 \u0915\u094b \u092c\u0922\u093c\u093e \u0938\u0915\u0924\u0947 \u0939\u0948\u0902\u0964</p>"},{"location":"hi/Guards/#_2","title":"\u090f\u0915\u094d\u091f\u093f\u0935\u093f\u091f\u0940 \u0917\u093e\u0930\u094d\u0921 \u0915\u093e \u0909\u0926\u094d\u0926\u0947\u0936\u094d\u092f","text":"<p>\u090f\u0915\u094d\u091f\u093f\u0935\u093f\u091f\u0940 \u0917\u093e\u0930\u094d\u0921 \u0915\u093e \u092a\u094d\u0930\u093e\u0925\u092e\u093f\u0915 \u0909\u0926\u094d\u0926\u0947\u0936\u094d\u092f \u092f\u0939 \u0938\u0941\u0928\u093f\u0936\u094d\u091a\u093f\u0924 \u0915\u0930\u0928\u093e \u0939\u0948 \u0915\u093f \u0915\u0947\u0935\u0932 \u0905\u0927\u093f\u0915\u0943\u0924 \u0909\u092a\u092f\u094b\u0917\u0915\u0930\u094d\u0924\u093e \u092f\u093e \u0935\u093f\u0936\u093f\u0937\u094d\u091f \u0938\u094d\u0925\u093f\u0924\u093f\u092f\u093e\u0901 \u0939\u0940 \u090f\u0915 \u090f\u0915\u094d\u091f\u093f\u0935\u093f\u091f\u0940 \u0915\u094b \u091f\u094d\u0930\u093f\u0917\u0930 \u0915\u0930\u0947\u0902\u0964</p> <p>\u092f\u0939 \u0926\u0941\u0930\u0941\u092a\u092f\u094b\u0917 \u0915\u094b \u0930\u094b\u0915 \u0938\u0915\u0924\u093e \u0939\u0948, \u092c\u0949\u091f \u0915\u0940 \u0905\u0916\u0902\u0921\u0924\u093e \u092c\u0928\u093e\u090f \u0930\u0916 \u0938\u0915\u0924\u093e \u0939\u0948, \u0914\u0930 \u092c\u093e\u0924\u091a\u0940\u0924 \u0915\u094b \u0938\u0941\u0935\u094d\u092f\u0935\u0938\u094d\u0925\u093f\u0924 \u0915\u0930 \u0938\u0915\u0924\u093e \u0939\u0948\u0964</p>"},{"location":"hi/Guards/#_3","title":"\u0938\u093e\u092e\u093e\u0928\u094d\u092f \u0909\u092a\u092f\u094b\u0917 \u0915\u0947 \u092e\u093e\u092e\u0932\u0947","text":"<ol> <li>\u092a\u094d\u0930\u092e\u093e\u0923\u0940\u0915\u0930\u0923 \u0914\u0930 \u092a\u094d\u0930\u093e\u0927\u093f\u0915\u0930\u0923: \u092f\u0939 \u0938\u0941\u0928\u093f\u0936\u094d\u091a\u093f\u0924 \u0915\u0930\u0928\u093e \u0915\u093f \u0915\u0947\u0935\u0932 \u0915\u0941\u091b \u0909\u092a\u092f\u094b\u0917\u0915\u0930\u094d\u0924\u093e \u0935\u093f\u0936\u093f\u0937\u094d\u091f \u0915\u092e\u093e\u0902\u0921 \u0924\u0915 \u092a\u0939\u0941\u0902\u091a \u0938\u0915\u0924\u0947 \u0939\u0948\u0902\u0964</li> <li>\u092a\u0942\u0930\u094d\u0935-\u0938\u094d\u0925\u093f\u0924\u093f \u091c\u093e\u0901\u091a: \u092f\u0939 \u0938\u0924\u094d\u092f\u093e\u092a\u093f\u0924 \u0915\u0930\u0928\u093e \u0915\u093f \u0915\u094b\u0908 \u0915\u092e\u093e\u0902\u0921 \u0928\u093f\u0937\u094d\u092a\u093e\u0926\u093f\u0924 \u0915\u0930\u0928\u0947 \u0938\u0947 \u092a\u0939\u0932\u0947 \u0915\u0941\u091b \u0938\u094d\u0925\u093f\u0924\u093f\u092f\u093e\u0901 \u092a\u0942\u0930\u0940 \u0939\u0941\u0908 \u0939\u0948\u0902 (\u091c\u0948\u0938\u0947, \u092f\u0939 \u0938\u0941\u0928\u093f\u0936\u094d\u091a\u093f\u0924 \u0915\u0930\u0928\u093e \u0915\u093f \u0909\u092a\u092f\u094b\u0917\u0915\u0930\u094d\u0924\u093e \u0915\u093f\u0938\u0940 \u0935\u093f\u0936\u0947\u0937 \u0938\u094d\u0925\u093f\u0924\u093f \u092f\u093e \u0938\u0902\u0926\u0930\u094d\u092d \u092e\u0947\u0902 \u0939\u0948)\u0964</li> <li>\u0938\u0902\u0926\u0930\u094d\u092d\u093e\u0924\u094d\u092e\u0915 \u0917\u093e\u0930\u094d\u0921: \u0935\u0930\u094d\u0924\u092e\u093e\u0928 \u091a\u0948\u091f \u092f\u093e \u0909\u092a\u092f\u094b\u0917\u0915\u0930\u094d\u0924\u093e \u0938\u094d\u0925\u093f\u0924\u093f \u0915\u0947 \u0906\u0927\u093e\u0930 \u092a\u0930 \u0928\u093f\u0930\u094d\u0923\u092f \u0932\u0947\u0928\u093e\u0964</li> </ol>"},{"location":"hi/Guards/#_4","title":"\u0915\u093e\u0930\u094d\u092f\u093e\u0928\u094d\u0935\u092f\u0928 \u0930\u0923\u0928\u0940\u0924\u093f\u092f\u093e\u0901","text":"<p>\u091f\u0947\u0932\u0940\u0917\u094d\u0930\u093e\u092e \u0915\u092e\u093e\u0902\u0921 \u0917\u093e\u0930\u094d\u0921 \u0915\u094b \u0932\u093e\u0917\u0942 \u0915\u0930\u0928\u093e \u0906\u092e\u0924\u094c\u0930 \u092a\u0930 \u092a\u094d\u0930\u0924\u094d\u092f\u0947\u0915 \u0917\u093e\u0930\u094d\u0921 \u0915\u0947 \u0932\u093f\u090f \u0924\u0930\u094d\u0915 \u0915\u094b \u0938\u092e\u093e\u0939\u093f\u0924 \u0915\u0930\u0928\u0947 \u0935\u093e\u0932\u0947 \u092b\u093c\u0902\u0915\u094d\u0936\u0928 \u092f\u093e \u0935\u093f\u0927\u093f\u092f\u093e\u0901 \u0932\u093f\u0916\u0928\u0947 \u092e\u0947\u0902 \u0936\u093e\u092e\u093f\u0932 \u0939\u094b\u0924\u093e \u0939\u0948\u0964 \u0928\u0940\u091a\u0947 \u0938\u093e\u092e\u093e\u0928\u094d\u092f \u0930\u0923\u0928\u0940\u0924\u093f\u092f\u093e\u0901 \u0926\u0940 \u0917\u0908 \u0939\u0948\u0902:</p> <ol> <li>\u0909\u092a\u092f\u094b\u0917\u0915\u0930\u094d\u0924\u093e \u092d\u0942\u092e\u093f\u0915\u093e \u091c\u093e\u0901\u091a:</li> <li> <p>\u092f\u0939 \u0938\u0941\u0928\u093f\u0936\u094d\u091a\u093f\u0924 \u0915\u0930\u0928\u093e \u0915\u093f \u0909\u092a\u092f\u094b\u0917\u0915\u0930\u094d\u0924\u093e \u0915\u0947 \u092a\u093e\u0938 \u0915\u092e\u093e\u0902\u0921 \u0928\u093f\u0937\u094d\u092a\u093e\u0926\u093f\u0924 \u0915\u0930\u0928\u0947 \u0938\u0947 \u092a\u0939\u0932\u0947 \u0906\u0935\u0936\u094d\u092f\u0915 \u092d\u0942\u092e\u093f\u0915\u093e (\u091c\u0948\u0938\u0947, \u0935\u094d\u092f\u0935\u0938\u094d\u0925\u093e\u092a\u0915, \u092e\u0949\u0921\u0930\u0947\u091f\u0930) \u0939\u0948\u0964       <pre><code> override suspend fun condition(user: User?, update: ProcessedUpdate, bot: TelegramBot): Boolean {\n  // Check if the user is an admin in the given chat\n }\n</code></pre></p> </li> <li> <p>\u0938\u094d\u0925\u093f\u0924\u093f \u0938\u0924\u094d\u092f\u093e\u092a\u0928:</p> </li> <li> <p>\u0915\u092e\u093e\u0902\u0921 \u0928\u093f\u0937\u094d\u092a\u093e\u0926\u0928 \u0915\u0940 \u0905\u0928\u0941\u092e\u0924\u093f \u0926\u0947\u0928\u0947 \u0938\u0947 \u092a\u0939\u0932\u0947 \u0909\u092a\u092f\u094b\u0917\u0915\u0930\u094d\u0924\u093e \u0915\u0940 \u0938\u094d\u0925\u093f\u0924\u093f \u0915\u0940 \u091c\u093e\u0901\u091a \u0915\u0930\u0928\u093e\u0964      <pre><code>override suspend fun condition(user: User?, update: ProcessedUpdate, bot: TelegramBot): Boolean {\n   return bot.userData[user.id, \"data\"] == requiredState\n}\n</code></pre></p> </li> <li> <p>\u0915\u0938\u094d\u091f\u092e \u0917\u093e\u0930\u094d\u0921:</p> </li> <li>\u0935\u093f\u0936\u093f\u0937\u094d\u091f \u0906\u0935\u0936\u094d\u092f\u0915\u0924\u093e\u0913\u0902 \u0915\u0947 \u0906\u0927\u093e\u0930 \u092a\u0930 \u0915\u0938\u094d\u091f\u092e \u0924\u0930\u094d\u0915 \u092c\u0928\u093e\u0928\u093e\u0964      <pre><code>override suspend fun condition(user: User?, update: ProcessedUpdate, bot: TelegramBot): Boolean {\n   // Custom logic to determine if the command should be executed\n}\n</code></pre></li> </ol>"},{"location":"hi/Guards/#_5","title":"\u0917\u093e\u0930\u094d\u0921 \u0915\u094b \u090f\u0915\u094d\u091f\u093f\u0935\u093f\u091f\u0940\u091c\u093c \u0915\u0947 \u0938\u093e\u0925 \u090f\u0915\u0940\u0915\u0943\u0924 \u0915\u0930\u0928\u093e","text":"<p>\u0907\u0928 \u0917\u093e\u0930\u094d\u0921 \u0915\u094b \u0905\u092a\u0928\u0947 \u092c\u0949\u091f \u0915\u092e\u093e\u0902\u0921 \u0915\u0947 \u0938\u093e\u0925 \u090f\u0915\u0940\u0915\u0943\u0924 \u0915\u0930\u0928\u0947 \u0915\u0947 \u0932\u093f\u090f, \u0906\u092a \u090f\u0915 \u0917\u093e\u0930\u094d\u0921 \u092c\u0928\u093e \u0938\u0915\u0924\u0947 \u0939\u0948\u0902 \u091c\u094b \u0915\u092e\u093e\u0902\u0921 \u0939\u0948\u0902\u0921\u0932\u0930 \u0915\u094b \u0928\u093f\u0937\u094d\u092a\u093e\u0926\u093f\u0924 \u0915\u0930\u0928\u0947 \u0938\u0947 \u092a\u0939\u0932\u0947 \u0907\u0928 \u0938\u094d\u0925\u093f\u0924\u093f\u092f\u094b\u0902 \u0915\u0940 \u091c\u093e\u0901\u091a \u0915\u0930\u0924\u093e \u0939\u0948\u0964</p>"},{"location":"hi/Guards/#_6","title":"\u0915\u093e\u0930\u094d\u092f\u093e\u0928\u094d\u0935\u092f\u0928 \u0909\u0926\u093e\u0939\u0930\u0923","text":"<pre><code>// define somewhere your guard class that implements Guard interface\nobject YourGuard : Guard {\n    override suspend fun condition(user: User?, update: ProcessedUpdate, bot: TelegramBot): Boolean {\n        // write your condition here\n    }\n}\n\n// ...\n\n@CommandHandler([\"yourCommand\"])\n@Guard(YourGuard::class) // InputHandler also is supported\nfun command(bot: TelegramBot) {\n   // command body\n}\n</code></pre>"},{"location":"hi/Guards/#_7","title":"\u0938\u0930\u094d\u0935\u094b\u0924\u094d\u0924\u092e \u092a\u094d\u0930\u0925\u093e\u090f\u0901","text":"<ul> <li>\u092e\u0949\u0921\u094d\u092f\u0942\u0932\u0930\u0924\u093e: \u0917\u093e\u0930\u094d\u0921 \u0924\u0930\u094d\u0915 \u0915\u094b \u092e\u0949\u0921\u094d\u092f\u0942\u0932\u0930 \u0914\u0930 \u090f\u0915\u094d\u091f\u093f\u0935\u093f\u091f\u0940\u091c\u093c \u0938\u0947 \u0905\u0932\u0917 \u0930\u0916\u0947\u0902\u0964</li> <li>\u092a\u0941\u0928: \u0909\u092a\u092f\u094b\u0917: \u092a\u0941\u0928: \u0909\u092a\u092f\u094b\u0917 \u092f\u094b\u0917\u094d\u092f \u0917\u093e\u0930\u094d\u0921 \u092b\u093c\u0902\u0915\u094d\u0936\u0928 \u0932\u093f\u0916\u0947\u0902 \u091c\u093f\u0928\u094d\u0939\u0947\u0902 \u0935\u093f\u092d\u093f\u0928\u094d\u0928 \u0915\u092e\u093e\u0902\u0921/\u0907\u0928\u092a\u0941\u091f \u092a\u0930 \u0906\u0938\u093e\u0928\u0940 \u0938\u0947 \u0932\u093e\u0917\u0942 \u0915\u093f\u092f\u093e \u091c\u093e \u0938\u0915\u0924\u093e \u0939\u0948\u0964</li> <li>\u0926\u0915\u094d\u0937\u0924\u093e: \u092a\u094d\u0930\u0926\u0930\u094d\u0936\u0928 \u0913\u0935\u0930\u0939\u0947\u0921 \u0915\u094b \u0915\u092e \u0915\u0930\u0928\u0947 \u0915\u0947 \u0932\u093f\u090f \u0917\u093e\u0930\u094d\u0921 \u091a\u0947\u0915 \u0915\u094b \u0905\u0928\u0941\u0915\u0942\u0932\u093f\u0924 \u0915\u0930\u0947\u0902\u0964</li> <li>\u0909\u092a\u092f\u094b\u0917\u0915\u0930\u094d\u0924\u093e \u092a\u094d\u0930\u0924\u093f\u0915\u094d\u0930\u093f\u092f\u093e: \u091c\u092c \u0915\u094b\u0908 \u0915\u092e\u093e\u0902\u0921 \u0917\u093e\u0930\u094d\u0921 \u0926\u094d\u0935\u093e\u0930\u093e \u0905\u0935\u0930\u0941\u0926\u094d\u0927 \u0915\u093f\u092f\u093e \u091c\u093e\u0924\u093e \u0939\u0948 \u0924\u094b \u0909\u092a\u092f\u094b\u0917\u0915\u0930\u094d\u0924\u093e\u0913\u0902 \u0915\u094b \u0938\u094d\u092a\u0937\u094d\u091f \u092a\u094d\u0930\u0924\u093f\u0915\u094d\u0930\u093f\u092f\u093e \u092a\u094d\u0930\u0926\u093e\u0928 \u0915\u0930\u0947\u0902\u0964</li> </ul>"},{"location":"hi/Guards/#_8","title":"\u0928\u093f\u0937\u094d\u0915\u0930\u094d\u0937","text":"<p>\u090f\u0915\u094d\u091f\u093f\u0935\u093f\u091f\u0940 \u0917\u093e\u0930\u094d\u0921 \u0915\u092e\u093e\u0902\u0921/\u0907\u0928\u092a\u0941\u091f \u0928\u093f\u0937\u094d\u092a\u093e\u0926\u0928 \u0915\u094b \u092a\u094d\u0930\u092c\u0902\u0927\u093f\u0924 \u0915\u0930\u0928\u0947 \u0915\u0947 \u0932\u093f\u090f \u090f\u0915 \u0936\u0915\u094d\u0924\u093f\u0936\u093e\u0932\u0940 \u0909\u092a\u0915\u0930\u0923 \u0939\u0948\u0964</p> <p>\u092e\u091c\u092c\u0942\u0924 \u0917\u093e\u0930\u094d\u0921 \u0924\u0902\u0924\u094d\u0930 \u0915\u094b \u0932\u093e\u0917\u0942 \u0915\u0930\u0915\u0947, \u0935\u093f\u0915\u093e\u0938\u0915\u0930\u094d\u0924\u093e \u092f\u0939 \u0938\u0941\u0928\u093f\u0936\u094d\u091a\u093f\u0924 \u0915\u0930 \u0938\u0915\u0924\u0947 \u0939\u0948\u0902 \u0915\u093f \u0909\u0928\u0915\u0947 \u092c\u0949\u091f \u0938\u0941\u0930\u0915\u094d\u0937\u093f\u0924 \u0914\u0930 \u0915\u0941\u0936\u0932\u0924\u093e \u0938\u0947 \u0938\u0902\u091a\u093e\u0932\u093f\u0924 \u0939\u094b\u0902, \u092c\u0947\u0939\u0924\u0930 \u0909\u092a\u092f\u094b\u0917\u0915\u0930\u094d\u0924\u093e \u0905\u0928\u0941\u092d\u0935 \u092a\u094d\u0930\u0926\u093e\u0928 \u0915\u0930\u0947\u0902\u0964</p>"},{"location":"hi/Guards/#_9","title":"\u092d\u0940 \u0926\u0947\u0916\u0947\u0902","text":"<ul> <li>\u090f\u0915\u094d\u091f\u093f\u0935\u093f\u091f\u0940\u091c\u093c \u0914\u0930 \u092a\u094d\u0930\u094b\u0938\u0947\u0938\u0930\u094d\u0938</li> <li>\u0905\u092a\u0921\u0947\u091f \u092a\u093e\u0930\u094d\u0938\u093f\u0902\u0917</li> <li>\u090f\u0915\u094d\u0936\u0928\u094d\u0938</li> <li>\u090f\u0915\u094d\u091f\u093f\u0935\u093f\u091f\u0940 \u0907\u0928\u0935\u094b\u0915\u0947\u0936\u0928</li> </ul>"},{"location":"hi/Handlers/","title":"\u0939\u0948\u0902\u0921\u0932\u0930","text":""},{"location":"hi/Handlers/#_1","title":"\u0939\u0948\u0902\u0921\u0932\u0930 \u0915\u0940 \u0935\u093f\u0935\u093f\u0927\u0924\u093e","text":"<p>\u092c\u0949\u091f \u0935\u093f\u0915\u093e\u0938 \u092e\u0947\u0902, \u0935\u093f\u0936\u0947\u0937 \u0930\u0942\u092a \u0938\u0947 \u0909\u092a\u092f\u094b\u0917\u0915\u0930\u094d\u0924\u093e \u0907\u0902\u091f\u0930\u0948\u0915\u094d\u0936\u0928 \u092e\u0947\u0902 \u0936\u093e\u092e\u093f\u0932 \u0938\u093f\u0938\u094d\u091f\u092e \u092e\u0947\u0902, \u0915\u092e\u093e\u0902\u0921 \u0914\u0930 \u0907\u0935\u0947\u0902\u091f \u0915\u094b \u0915\u0941\u0936\u0932\u0924\u093e\u092a\u0942\u0930\u094d\u0935\u0915 \u092a\u094d\u0930\u092c\u0902\u0927\u093f\u0924 \u0914\u0930 \u0938\u0902\u0938\u093e\u0927\u093f\u0924 \u0915\u0930\u0928\u093e \u092e\u0939\u0924\u094d\u0935\u092a\u0942\u0930\u094d\u0923 \u0939\u0948\u0964</p> <p>\u092f\u0947 \u090f\u0928\u094b\u091f\u0947\u0936\u0928 \u0935\u093f\u0936\u093f\u0937\u094d\u091f \u0915\u092e\u093e\u0902\u0921, \u0907\u0928\u092a\u0941\u091f \u092f\u093e \u0905\u092a\u0921\u0947\u091f \u0915\u094b \u0938\u0902\u0938\u093e\u0927\u093f\u0924 \u0915\u0930\u0928\u0947 \u0915\u0947 \u0932\u093f\u090f \u0921\u093f\u091c\u093c\u093e\u0907\u0928 \u0915\u0940 \u0917\u0908 \u092b\u093c\u0902\u0915\u094d\u0936\u0902\u0938 \u0915\u094b \u091a\u093f\u0939\u094d\u0928\u093f\u0924 \u0915\u0930\u0924\u0947 \u0939\u0948\u0902 \u0914\u0930 \u0915\u092e\u093e\u0902\u0921 \u0915\u0940\u0935\u0930\u094d\u0921, \u0938\u094d\u0915\u094b\u092a \u0914\u0930 \u0917\u093e\u0930\u094d\u0921 \u091c\u0948\u0938\u0947 \u092e\u0947\u091f\u093e\u0921\u0947\u091f\u093e \u092a\u094d\u0930\u0926\u093e\u0928 \u0915\u0930\u0924\u0947 \u0939\u0948\u0902\u0964</p>"},{"location":"hi/Handlers/#_2","title":"\u090f\u0928\u094b\u091f\u0947\u0936\u0928 \u0905\u0935\u0932\u094b\u0915\u0928","text":""},{"location":"hi/Handlers/#commandhandler","title":"CommandHandler","text":"<p><code>CommandHandler</code> \u090f\u0928\u094b\u091f\u0947\u0936\u0928 \u0935\u093f\u0936\u093f\u0937\u094d\u091f \u0915\u092e\u093e\u0902\u0921 \u0915\u094b \u0938\u0902\u0938\u093e\u0927\u093f\u0924 \u0915\u0930\u0928\u0947 \u0935\u093e\u0932\u0940 \u092b\u093c\u0902\u0915\u094d\u0936\u0902\u0938 \u0915\u094b \u091a\u093f\u0939\u094d\u0928\u093f\u0924 \u0915\u0930\u0928\u0947 \u0915\u0947 \u0932\u093f\u090f \u0909\u092a\u092f\u094b\u0917 \u0915\u093f\u092f\u093e \u091c\u093e\u0924\u093e \u0939\u0948\u0964 \u092f\u0939 \u090f\u0928\u094b\u091f\u0947\u0936\u0928 \u0915\u092e\u093e\u0902\u0921 \u0915\u0947 \u0915\u0940\u0935\u0930\u094d\u0921 \u0914\u0930 \u0938\u094d\u0915\u094b\u092a \u0915\u094b \u092a\u0930\u093f\u092d\u093e\u0937\u093f\u0924 \u0915\u0930\u0928\u0947 \u0935\u093e\u0932\u0947 \u0917\u0941\u0923\u094b\u0902 \u0915\u094b \u0936\u093e\u092e\u093f\u0932 \u0915\u0930\u0924\u093e \u0939\u0948\u0964</p> <ul> <li>value: \u0915\u092e\u093e\u0902\u0921 \u0938\u0947 \u0938\u0902\u092c\u0902\u0927\u093f\u0924 \u0915\u0940\u0935\u0930\u094d\u0921 \u0928\u093f\u0930\u094d\u0926\u093f\u0937\u094d\u091f \u0915\u0930\u0924\u093e \u0939\u0948\u0964</li> <li>scope: \u0935\u0939 \u0938\u0902\u0926\u0930\u094d\u092d \u092f\u093e \u0938\u094d\u0915\u094b\u092a \u0928\u093f\u0930\u094d\u0927\u093e\u0930\u093f\u0924 \u0915\u0930\u0924\u093e \u0939\u0948 \u091c\u093f\u0938\u092e\u0947\u0902 \u0915\u092e\u093e\u0902\u0921 \u0915\u0940 \u091c\u093e\u0901\u091a \u0915\u0940 \u091c\u093e\u090f\u0917\u0940\u0964</li> </ul> <pre><code>@CommandHandler([\"text\"])\nsuspend fun test(user: User, bot: TelegramBot) {\n    //...\n}\n</code></pre>"},{"location":"hi/Handlers/#commandhandlercallbackquery","title":"CommandHandler.CallbackQuery","text":"<p><code>CommandHandler</code> \u090f\u0928\u094b\u091f\u0947\u0936\u0928 \u0915\u093e \u090f\u0915 \u0935\u093f\u0936\u0947\u0937\u0940\u0915\u0943\u0924 \u0938\u0902\u0938\u094d\u0915\u0930\u0923 \u091c\u094b \u0935\u093f\u0936\u0947\u0937 \u0930\u0942\u092a \u0938\u0947 \u0915\u0949\u0932\u092c\u0948\u0915 \u0915\u094d\u0935\u0947\u0930\u0940 \u0915\u094b \u0938\u0902\u092d\u093e\u0932\u0928\u0947 \u0915\u0947 \u0932\u093f\u090f \u0921\u093f\u091c\u093c\u093e\u0907\u0928 \u0915\u093f\u092f\u093e \u0917\u092f\u093e \u0939\u0948\u0964 \u0907\u0938\u092e\u0947\u0902 <code>CommandHandler</code> \u0915\u0947 \u0938\u092e\u093e\u0928 \u0917\u0941\u0923 \u0936\u093e\u092e\u093f\u0932 \u0939\u0948\u0902, \u091c\u094b \u0915\u0949\u0932\u092c\u0948\u0915 \u0938\u0947 \u0938\u0902\u092c\u0902\u0927\u093f\u0924 \u0915\u092e\u093e\u0902\u0921 \u092a\u0930 \u0927\u094d\u092f\u093e\u0928 \u0915\u0947\u0902\u0926\u094d\u0930\u093f\u0924 \u0915\u0930\u0924\u0947 \u0939\u0948\u0902\u0964</p> <p>\u092f\u0939 \u0935\u093e\u0938\u094d\u0924\u0935 \u092e\u0947\u0902 \u092c\u0938 <code>@CommandHandler</code> \u0915\u0947 \u0938\u092e\u093e\u0928 \u0939\u0948 \u091c\u093f\u0938\u092e\u0947\u0902 \u092a\u0942\u0930\u094d\u0935\u0928\u093f\u0930\u094d\u0927\u093e\u0930\u093f\u0924 <code>UpdateType.CALLBACK_QUERY</code> \u0938\u094d\u0915\u094b\u092a \u0939\u0948\u0964</p> <ul> <li>value: \u0915\u092e\u093e\u0902\u0921 \u0938\u0947 \u0938\u0902\u092c\u0902\u0927\u093f\u0924 \u0915\u0940\u0935\u0930\u094d\u0921 \u0928\u093f\u0930\u094d\u0926\u093f\u0937\u094d\u091f \u0915\u0930\u0924\u093e \u0939\u0948\u0964</li> <li>autoAnswer: <code>callbackQuery</code> \u0915\u093e \u0938\u094d\u0935\u091a\u093e\u0932\u093f\u0924 \u0930\u0942\u092a \u0938\u0947 \u0909\u0924\u094d\u0924\u0930 \u0926\u0947\u0902 (\u0938\u0902\u092d\u093e\u0932\u0928\u0947 \u0938\u0947 \u092a\u0939\u0932\u0947 <code>answerCallbackQuery</code> \u0915\u0949\u0932 \u0915\u0930\u0947\u0902)\u0964</li> </ul> <pre><code>@CommandHandler.CallbackQuery([\"text\"])\nsuspend fun test(user: User, bot: TelegramBot) {\n    //...\n}\n</code></pre>"},{"location":"hi/Handlers/#commonhandler","title":"CommonHandler","text":"<p><code>CommonHandler</code> \u090f\u0928\u094b\u091f\u0947\u0936\u0928 <code>CommandHandler</code> \u0914\u0930 <code>InputHandler</code> \u0915\u0940 \u0924\u0941\u0932\u0928\u093e \u092e\u0947\u0902 \u0915\u092e \u092a\u094d\u0930\u093e\u0925\u092e\u093f\u0915\u0924\u093e \u0935\u093e\u0932\u0947 \u0915\u092e\u093e\u0902\u0921 \u0915\u094b \u0938\u0902\u0938\u093e\u0927\u093f\u0924 \u0915\u0930\u0928\u0947 \u0935\u093e\u0932\u0940 \u092b\u093c\u0902\u0915\u094d\u0936\u0902\u0938 \u0915\u0947 \u0932\u093f\u090f \u0905\u092d\u093f\u092a\u094d\u0930\u0947\u0924 \u0939\u0948\u0964 \u0907\u0938\u0915\u093e \u0909\u092a\u092f\u094b\u0917 \u0938\u094d\u0930\u094b\u0924 \u0938\u094d\u0924\u0930 \u092a\u0930 \u0915\u093f\u092f\u093e \u091c\u093e\u0924\u093e \u0939\u0948 \u0914\u0930 \u0938\u093e\u092e\u093e\u0928\u094d\u092f \u0915\u092e\u093e\u0902\u0921 \u0939\u0948\u0902\u0921\u0932\u0930 \u0915\u094b \u092a\u0930\u093f\u092d\u093e\u0937\u093f\u0924 \u0915\u0930\u0928\u0947 \u0915\u093e \u090f\u0915 \u0932\u091a\u0940\u0932\u093e \u0924\u0930\u0940\u0915\u093e \u092a\u094d\u0930\u0926\u093e\u0928 \u0915\u0930\u0924\u093e \u0939\u0948\u0964</p> <p>\u0927\u094d\u092f\u093e\u0928 \u0926\u0947\u0902, \u092a\u094d\u0930\u093e\u0925\u092e\u093f\u0915\u0924\u093e \u0915\u0947\u0935\u0932 <code>@CommonHandler</code> \u0915\u0947 \u092d\u0940\u0924\u0930 \u0939\u0940 \u0915\u093e\u092e \u0915\u0930\u0924\u0940 \u0939\u0948 (\u0905\u0930\u094d\u0925\u093e\u0924 \u0905\u0928\u094d\u092f \u0939\u0948\u0902\u0921\u0932\u0930 \u0915\u094b \u092a\u094d\u0930\u092d\u093e\u0935\u093f\u0924 \u0928\u0939\u0940\u0902 \u0915\u0930\u0924\u0940)\u0964</p>"},{"location":"hi/Handlers/#commonhandlertext","title":"CommonHandler.Text","text":"<p>\u092f\u0939 \u090f\u0928\u094b\u091f\u0947\u0936\u0928 \u0905\u092a\u0921\u0947\u091f \u0915\u0947 \u0916\u093f\u0932\u093e\u092b \u092a\u093e\u0920 \u092e\u093f\u0932\u093e\u0928 \u0915\u094b \u0928\u093f\u0930\u094d\u0926\u093f\u0937\u094d\u091f \u0915\u0930\u0924\u093e \u0939\u0948\u0964 \u0907\u0938\u092e\u0947\u0902 \u092e\u093f\u0932\u093e\u0928 \u092a\u093e\u0920, \u092b\u093c\u093f\u0932\u094d\u091f\u0930\u093f\u0902\u0917 \u0938\u094d\u0925\u093f\u0924\u093f\u092f\u093e\u0901, \u092a\u094d\u0930\u093e\u0925\u092e\u093f\u0915\u0924\u093e \u0914\u0930 \u0938\u094d\u0915\u094b\u092a \u0915\u094b \u092a\u0930\u093f\u092d\u093e\u0937\u093f\u0924 \u0915\u0930\u0928\u0947 \u0915\u0947 \u0932\u093f\u090f \u0917\u0941\u0923 \u0936\u093e\u092e\u093f\u0932 \u0939\u0948\u0902\u0964</p> <ul> <li>value: \u0906\u0928\u0947 \u0935\u093e\u0932\u0947 \u0905\u092a\u0921\u0947\u091f \u0915\u0947 \u0916\u093f\u0932\u093e\u092b \u092e\u093f\u0932\u093e\u0928 \u0915\u0930\u0928\u0947 \u0915\u0947 \u0932\u093f\u090f \u092a\u093e\u0920\u0964</li> <li>filter: \u092e\u093f\u0932\u093e\u0928 \u092a\u094d\u0930\u0915\u094d\u0930\u093f\u092f\u093e \u092e\u0947\u0902 \u0909\u092a\u092f\u094b\u0917 \u0915\u0940 \u091c\u093e\u0928\u0947 \u0935\u093e\u0932\u0940 \u0938\u094d\u0925\u093f\u0924\u093f\u092f\u094b\u0902 \u0915\u094b \u092a\u0930\u093f\u092d\u093e\u0937\u093f\u0924 \u0915\u0930\u0928\u0947 \u0935\u093e\u0932\u0940 \u0915\u0915\u094d\u0937\u093e\u0964</li> <li>priority: \u0939\u0948\u0902\u0921\u0932\u0930 \u0915\u093e \u092a\u094d\u0930\u093e\u0925\u092e\u093f\u0915\u0924\u093e \u0938\u094d\u0924\u0930, \u091c\u0939\u093e\u0901 0 \u0938\u092c\u0938\u0947 \u0909\u091a\u094d\u091a \u092a\u094d\u0930\u093e\u0925\u092e\u093f\u0915\u0924\u093e \u0939\u0948\u0964</li> <li>scope: \u0935\u0939 \u0938\u0902\u0926\u0930\u094d\u092d \u092f\u093e \u0938\u094d\u0915\u094b\u092a \u091c\u093f\u0938\u092e\u0947\u0902 \u092a\u093e\u0920 \u092e\u093f\u0932\u093e\u0928 \u0915\u0940 \u091c\u093e\u0901\u091a \u0915\u0940 \u091c\u093e\u090f\u0917\u0940\u0964</li> </ul> <pre><code>@CommonHandler.Text([\"text\"], filter = isNewUserFilter::class, priority = 10)\nsuspend fun test(user: User, bot: TelegramBot) {\n    //...\n}\n</code></pre>"},{"location":"hi/Handlers/#commonhandlerregex","title":"CommonHandler.Regex","text":"<p><code>CommonHandler.Text</code> \u0915\u0947 \u0938\u092e\u093e\u0928, \u092f\u0939 \u090f\u0928\u094b\u091f\u0947\u0936\u0928 \u0928\u093f\u092f\u092e\u093f\u0924 \u0905\u092d\u093f\u0935\u094d\u092f\u0915\u094d\u0924\u093f\u092f\u094b\u0902 \u0915\u0947 \u0906\u0927\u093e\u0930 \u092a\u0930 \u0905\u092a\u0921\u0947\u091f \u0938\u0947 \u092e\u093f\u0932\u093e\u0928 \u0915\u0930\u0928\u0947 \u0915\u0947 \u0932\u093f\u090f \u0909\u092a\u092f\u094b\u0917 \u0915\u093f\u092f\u093e \u091c\u093e\u0924\u093e \u0939\u0948\u0964 \u0907\u0938\u092e\u0947\u0902 \u0930\u0947\u0917\u0947\u0915\u094d\u0938 \u092a\u0948\u091f\u0930\u094d\u0928, \u0935\u093f\u0915\u0932\u094d\u092a, \u092b\u093c\u093f\u0932\u094d\u091f\u0930\u093f\u0902\u0917 \u0938\u094d\u0925\u093f\u0924\u093f\u092f\u093e\u0901, \u092a\u094d\u0930\u093e\u0925\u092e\u093f\u0915\u0924\u093e \u0914\u0930 \u0938\u094d\u0915\u094b\u092a \u0915\u094b \u092a\u0930\u093f\u092d\u093e\u0937\u093f\u0924 \u0915\u0930\u0928\u0947 \u0915\u0947 \u0932\u093f\u090f \u0917\u0941\u0923 \u0936\u093e\u092e\u093f\u0932 \u0939\u0948\u0902\u0964</p> <ul> <li>value: \u092e\u093f\u0932\u093e\u0928 \u0915\u0947 \u0932\u093f\u090f \u0909\u092a\u092f\u094b\u0917 \u0915\u093f\u092f\u093e \u091c\u093e\u0928\u0947 \u0935\u093e\u0932\u093e \u0930\u0947\u0917\u0947\u0915\u094d\u0938 \u092a\u0948\u091f\u0930\u094d\u0928\u0964</li> <li>options: \u0930\u0947\u0917\u0947\u0915\u094d\u0938 \u092a\u0948\u091f\u0930\u094d\u0928 \u0915\u0947 \u0935\u094d\u092f\u0935\u0939\u093e\u0930 \u0915\u094b \u0938\u0902\u0936\u094b\u0927\u093f\u0924 \u0915\u0930\u0928\u0947 \u0935\u093e\u0932\u0947 \u0930\u0947\u0917\u0947\u0915\u094d\u0938 \u0935\u093f\u0915\u0932\u094d\u092a\u0964</li> <li>filter: \u092e\u093f\u0932\u093e\u0928 \u092a\u094d\u0930\u0915\u094d\u0930\u093f\u092f\u093e \u092e\u0947\u0902 \u0909\u092a\u092f\u094b\u0917 \u0915\u0940 \u091c\u093e\u0928\u0947 \u0935\u093e\u0932\u0940 \u0938\u094d\u0925\u093f\u0924\u093f\u092f\u094b\u0902 \u0915\u094b \u092a\u0930\u093f\u092d\u093e\u0937\u093f\u0924 \u0915\u0930\u0928\u0947 \u0935\u093e\u0932\u0940 \u0915\u0915\u094d\u0937\u093e\u0964</li> <li>priority: \u0939\u0948\u0902\u0921\u0932\u0930 \u0915\u093e \u092a\u094d\u0930\u093e\u0925\u092e\u093f\u0915\u0924\u093e \u0938\u094d\u0924\u0930, \u091c\u0939\u093e\u0901 0 \u0938\u092c\u0938\u0947 \u0909\u091a\u094d\u091a \u092a\u094d\u0930\u093e\u0925\u092e\u093f\u0915\u0924\u093e \u0939\u0948\u0964</li> <li>scope: \u0935\u0939 \u0938\u0902\u0926\u0930\u094d\u092d \u092f\u093e \u0938\u094d\u0915\u094b\u092a \u091c\u093f\u0938\u092e\u0947\u0902 \u0930\u0947\u0917\u0947\u0915\u094d\u0938 \u092e\u093f\u0932\u093e\u0928 \u0915\u0940 \u091c\u093e\u0901\u091a \u0915\u0940 \u091c\u093e\u090f\u0917\u0940\u0964</li> </ul> <pre><code>@CommonHandler.Regex(\"^\\d+$\", scope = [UpdateType.EDITED_MESSAGE])\nsuspend fun test(update: EditedMessageUpdate, user: User, bot: TelegramBot) {\n    //...\n}\n</code></pre>"},{"location":"hi/Handlers/#inputhandler","title":"InputHandler","text":"<p><code>InputHandler</code> \u090f\u0928\u094b\u091f\u0947\u0936\u0928 \u0935\u093f\u0936\u093f\u0937\u094d\u091f \u0907\u0928\u092a\u0941\u091f \u0907\u0935\u0947\u0902\u091f \u0915\u094b \u0938\u0902\u0938\u093e\u0927\u093f\u0924 \u0915\u0930\u0928\u0947 \u0935\u093e\u0932\u0940 \u092b\u093c\u0902\u0915\u094d\u0936\u0902\u0938 \u0915\u094b \u091a\u093f\u0939\u094d\u0928\u093f\u0924 \u0915\u0930\u0924\u093e \u0939\u0948\u0964 \u0907\u0938\u0915\u093e \u0909\u092a\u092f\u094b\u0917 \u0930\u0928\u091f\u093e\u0907\u092e \u092a\u0930 \u0907\u0928\u092a\u0941\u091f \u0915\u094b \u0938\u0902\u092d\u093e\u0932\u0928\u0947 \u0935\u093e\u0932\u0940 \u092b\u093c\u0902\u0915\u094d\u0936\u0902\u0938 \u0915\u0947 \u0932\u093f\u090f \u0905\u092d\u093f\u092a\u094d\u0930\u0947\u0924 \u0939\u0948 \u0914\u0930 \u0907\u0928\u092a\u0941\u091f \u0915\u0940\u0935\u0930\u094d\u0921 \u0914\u0930 \u0938\u094d\u0915\u094b\u092a \u0915\u094b \u092a\u0930\u093f\u092d\u093e\u0937\u093f\u0924 \u0915\u0930\u0928\u0947 \u0915\u0947 \u0932\u093f\u090f \u0917\u0941\u0923 \u0936\u093e\u092e\u093f\u0932 \u0939\u0948\u0902\u0964</p> <ul> <li>value: \u0907\u0928\u092a\u0941\u091f \u0907\u0935\u0947\u0902\u091f \u0938\u0947 \u0938\u0902\u092c\u0902\u0927\u093f\u0924 \u0915\u0940\u0935\u0930\u094d\u0921 \u0928\u093f\u0930\u094d\u0926\u093f\u0937\u094d\u091f \u0915\u0930\u0924\u093e \u0939\u0948\u0964</li> </ul> <pre><code>@InputHandler(\"text\")\nsuspend fun test(update: ProcessedUpdate, user: User, bot: TelegramBot) {\n    //...\n}\n</code></pre>"},{"location":"hi/Handlers/#unprocessedhandler","title":"UnprocessedHandler","text":"<p><code>UnprocessedHandler</code> \u090f\u0928\u094b\u091f\u0947\u0936\u0928 \u0905\u0928\u094d\u092f \u0939\u0948\u0902\u0921\u0932\u0930 \u0926\u094d\u0935\u093e\u0930\u093e \u0938\u0902\u0938\u093e\u0927\u093f\u0924 \u0928\u0939\u0940\u0902 \u0915\u093f\u090f \u0917\u090f \u0905\u092a\u0921\u0947\u091f \u0915\u094b \u0938\u0902\u092d\u093e\u0932\u0928\u0947 \u0935\u093e\u0932\u0940 \u092b\u093c\u0902\u0915\u094d\u0936\u0902\u0938 \u0915\u094b \u091a\u093f\u0939\u094d\u0928\u093f\u0924 \u0915\u0930\u0928\u0947 \u0915\u0947 \u0932\u093f\u090f \u0909\u092a\u092f\u094b\u0917 \u0915\u093f\u092f\u093e \u091c\u093e\u0924\u093e \u0939\u0948\u0964 \u092f\u0939 \u0938\u0941\u0928\u093f\u0936\u094d\u091a\u093f\u0924 \u0915\u0930\u0924\u093e \u0939\u0948 \u0915\u093f \u0915\u094b\u0908 \u092d\u0940 \u0905\u0938\u0902\u0938\u093e\u0927\u093f\u0924 \u0905\u092a\u0921\u0947\u091f \u0909\u091a\u093f\u0924 \u0930\u0942\u092a \u0938\u0947 \u092a\u094d\u0930\u092c\u0902\u0927\u093f\u0924 \u0915\u093f\u090f \u091c\u093e\u090f\u0902, \u0907\u0938 \u0939\u0948\u0902\u0921\u0932\u0930 \u092a\u094d\u0930\u0915\u093e\u0930 \u0915\u0947 \u0932\u093f\u090f \u0915\u0947\u0935\u0932 \u090f\u0915 \u092a\u094d\u0930\u0938\u0902\u0938\u094d\u0915\u0930\u0923 \u092c\u093f\u0902\u0926\u0941 \u0938\u0902\u092d\u0935 \u0939\u0948\u0964</p> <pre><code>@UnprocessedHandler\nsuspend fun test(update: ProcessedUpdate, user: User, bot: TelegramBot) {\n    //...\n}\n</code></pre>"},{"location":"hi/Handlers/#updatehandler","title":"UpdateHandler","text":"<p><code>UpdateHandler</code> \u090f\u0928\u094b\u091f\u0947\u0936\u0928 \u0935\u093f\u0936\u093f\u0937\u094d\u091f \u092a\u094d\u0930\u0915\u093e\u0930 \u0915\u0947 \u0906\u0928\u0947 \u0935\u093e\u0932\u0947 \u0905\u092a\u0921\u0947\u091f \u0915\u094b \u0938\u0902\u092d\u093e\u0932\u0928\u0947 \u0935\u093e\u0932\u0940 \u092b\u093c\u0902\u0915\u094d\u0936\u0902\u0938 \u0915\u094b \u091a\u093f\u0939\u094d\u0928\u093f\u0924 \u0915\u0930\u0924\u093e \u0939\u0948\u0964 \u092f\u0939 \u0935\u093f\u092d\u093f\u0928\u094d\u0928 \u0905\u092a\u0921\u0947\u091f \u092a\u094d\u0930\u0915\u093e\u0930\u094b\u0902 \u0915\u094b \u0935\u094d\u092f\u0935\u0938\u094d\u0925\u093f\u0924 \u0930\u0942\u092a \u0938\u0947 \u0935\u0930\u094d\u0917\u0940\u0915\u0943\u0924 \u0914\u0930 \u0938\u0902\u0938\u093e\u0927\u093f\u0924 \u0915\u0930\u0928\u0947 \u0915\u093e \u090f\u0915 \u0924\u0930\u0940\u0915\u093e \u092a\u094d\u0930\u0926\u093e\u0928 \u0915\u0930\u0924\u093e \u0939\u0948\u0964</p> <ul> <li>type: \u0935\u0939 \u0905\u092a\u0921\u0947\u091f \u092a\u094d\u0930\u0915\u093e\u0930 \u0928\u093f\u0930\u094d\u0926\u093f\u0937\u094d\u091f \u0915\u0930\u0924\u093e \u0939\u0948 \u091c\u093f\u0938\u0947 \u0939\u0948\u0902\u0921\u0932\u0930 \u092b\u093c\u0902\u0915\u094d\u0936\u0928 \u0938\u0902\u0938\u093e\u0927\u093f\u0924 \u0915\u0930\u0947\u0917\u093e\u0964</li> </ul> <pre><code>@UpdateHandler([UpdateType.PRE_CHECKOUT_QUERY])\nsuspend fun test(update: PreCheckoutQueryUpdate, user: User, bot: TelegramBot) {\n    //...\n}\n</code></pre>"},{"location":"hi/Handlers/#_3","title":"\u0939\u0948\u0902\u0921\u0932\u0930 \u0938\u093e\u0925\u0940 \u090f\u0928\u094b\u091f\u0947\u0936\u0928","text":"<p>\u0910\u0938\u0947 \u0905\u0924\u093f\u0930\u093f\u0915\u094d\u0924 \u090f\u0928\u094b\u091f\u0947\u0936\u0928 \u092d\u0940 \u0939\u0948\u0902 \u091c\u094b \u0939\u0948\u0902\u0921\u0932\u0930 \u0915\u0947 \u0932\u093f\u090f \u0935\u0948\u0915\u0932\u094d\u092a\u093f\u0915 \u0939\u0948\u0902, \u091c\u094b \u0939\u0948\u0902\u0921\u0932\u0930 \u0915\u0947 \u0935\u0948\u0915\u0932\u094d\u092a\u093f\u0915 \u0935\u094d\u092f\u0935\u0939\u093e\u0930 \u0915\u094b \u092a\u0942\u0930\u0915 \u0915\u0930\u0924\u0947 \u0939\u0948\u0902\u0964</p> <p>\u0909\u0928\u094d\u0939\u0947\u0902 \u0909\u0938 \u092b\u093c\u0902\u0915\u094d\u0936\u0928 \u092a\u0930 \u0930\u0916\u093e \u091c\u093e \u0938\u0915\u0924\u093e \u0939\u0948 \u091c\u093f\u0938 \u092a\u0930 \u0939\u0948\u0902\u0921\u0932\u0930 \u0932\u093e\u0917\u0942 \u0915\u093f\u092f\u093e \u0917\u092f\u093e \u0939\u0948 \u0914\u0930 \u0915\u0915\u094d\u0937\u093e\u0913\u0902 \u092a\u0930, \u092c\u093e\u0926 \u0935\u093e\u0932\u0947 \u092e\u093e\u092e\u0932\u0947 \u092e\u0947\u0902 \u0935\u0947 \u0909\u0938 \u0915\u0915\u094d\u0937\u093e \u092e\u0947\u0902 \u0938\u092d\u0940 \u0939\u0948\u0902\u0921\u0932\u0930 \u092a\u0930 \u0938\u094d\u0935\u091a\u093e\u0932\u093f\u0924 \u0930\u0942\u092a \u0938\u0947 \u0932\u093e\u0917\u0942 \u0939\u094b\u0902\u0917\u0947, \u0932\u0947\u0915\u093f\u0928 \u092f\u0926\u093f \u0906\u0935\u0936\u094d\u092f\u0915\u0924\u093e \u0939\u094b \u0924\u094b \u0915\u0941\u091b \u092b\u093c\u0902\u0915\u094d\u0936\u0902\u0938 \u0915\u0947 \u0932\u093f\u090f \u0905\u0932\u0917 \u0935\u094d\u092f\u0935\u0939\u093e\u0930 \u0939\u094b\u0928\u093e \u0938\u0902\u092d\u0935 \u0939\u0948\u0964</p> <p>\u0905\u0930\u094d\u0925\u093e\u0924, \u0906\u0935\u0947\u0926\u0928 \u0915\u0940 \u0910\u0938\u0940 \u092a\u094d\u0930\u093e\u0925\u092e\u093f\u0915\u0924\u093e \u0939\u0948, <code>Function</code> &gt; <code>Class</code>, \u091c\u0939\u093e\u0901 \u092b\u093c\u0902\u0915\u094d\u0936\u0928 \u0915\u0940 \u0909\u091a\u094d\u091a \u092a\u094d\u0930\u093e\u0925\u092e\u093f\u0915\u0924\u093e \u0939\u0948\u0964</p>"},{"location":"hi/Handlers/#_4","title":"\u0926\u0930 \u0938\u0940\u092e\u093f\u0924 \u0915\u0930\u0928\u093e","text":"<p>\u0907\u0938\u0915\u0947 \u0905\u0932\u093e\u0935\u093e, \u0906\u0907\u090f \u090f\u0928\u094b\u091f\u0947\u0936\u0928 \u092e\u0947\u0902 \u0935\u0930\u094d\u0923\u093f\u0924 \u0926\u0930 \u0938\u0940\u092e\u093f\u0924 \u0915\u0930\u0928\u0947 \u0915\u0940 \u0924\u0902\u0924\u094d\u0930 \u0915\u094b \u092d\u0940 \u092a\u094d\u0930\u0915\u091f \u0915\u0930\u0947\u0902\u0964</p> <p>\u0906\u092a \u092a\u094d\u0930\u0924\u094d\u092f\u0947\u0915 \u0909\u092a\u092f\u094b\u0917\u0915\u0930\u094d\u0924\u093e \u0915\u0947 \u0932\u093f\u090f \u0938\u093e\u092e\u093e\u0928\u094d\u092f \u0938\u0940\u092e\u093e\u090f\u0901 \u0928\u093f\u0930\u094d\u0927\u093e\u0930\u093f\u0924 \u0915\u0930 \u0938\u0915\u0924\u0947 \u0939\u0948\u0902:</p> <pre><code>// ...\nval bot = TelegramBot(\"BOT_TOKEN\") {\n    rateLimiter { // \u0938\u093e\u092e\u093e\u0928\u094d\u092f \u0938\u0940\u092e\u093e\u090f\u0901\n        limits = RateLimits(period = 10000, rate = 5)\n    }\n}\n</code></pre>"},{"location":"hi/Handlers/#_5","title":"\u0939\u0948\u0902\u0921\u0932\u0930 \u0935\u093f\u0936\u093f\u0937\u094d\u091f","text":"<p><code>RateLimits</code> \u090f\u0928\u094b\u091f\u0947\u0936\u0928 \u0915\u093e \u0909\u092a\u092f\u094b\u0917 \u0915\u0930\u0915\u0947 \u0915\u0941\u091b \u0915\u094d\u0930\u093f\u092f\u093e\u0913\u0902 \u092a\u0930 \u0938\u0940\u092e\u093e\u090f\u0901 \u092a\u0930\u093f\u092d\u093e\u0937\u093f\u0924 \u0915\u0940 \u091c\u093e \u0938\u0915\u0924\u0940 \u0939\u0948\u0902, \u091c\u094b <code>@CommandHandler</code>, <code>@CommandHandler.CallbackQuery</code>, <code>@InputHandler</code>, <code>@CommonHandler</code> \u0915\u093e \u0938\u092e\u0930\u094d\u0925\u0928 \u0915\u0930\u0924\u093e \u0939\u0948\u0964</p> <pre><code>@CommandHandler([\"/start\"])\n@RateLimits(period = 1000L, rate = 1L)\nsuspend fun start(user: User, bot: TelegramBot) {\n    // ...\n}\n</code></pre>"},{"location":"hi/Handlers/#_6","title":"\u0917\u093e\u0930\u094d\u0921","text":"<p>\u0906\u092a \u0939\u0948\u0902\u0921\u0932\u0930 \u0924\u0915 \u092a\u0939\u0941\u0901\u091a \u0915\u094b \u0928\u093f\u092f\u0902\u0924\u094d\u0930\u093f\u0924 \u0915\u0930\u0928\u0947 \u0915\u0947 \u0932\u093f\u090f \u0905\u0932\u0917 \u0938\u0947 \u0917\u093e\u0930\u094d\u0921 \u092a\u0930\u093f\u092d\u093e\u0937\u093f\u0924 \u0915\u0930 \u0938\u0915\u0924\u0947 \u0939\u0948\u0902, \u091c\u094b <code>@CommandHandler</code>, <code>@CommandHandler.CallbackQuery</code>, <code>@InputHandler</code> \u0915\u093e \u0938\u092e\u0930\u094d\u0925\u0928 \u0915\u0930\u0924\u093e \u0939\u0948:</p> <pre><code>@CommandHandler([\"text\"])\n@Guard(isAdminGuard::class)\nsuspend fun test(user: User, bot: TelegramBot) {\n    //...\n}\n</code></pre>"},{"location":"hi/Handlers/#argparser","title":"ArgParser","text":"<p>\u0906\u092a \u0939\u0948\u0902\u0921\u0932\u0930 \u0915\u0947 \u0932\u093f\u090f \u092a\u0948\u0930\u093e\u092e\u0940\u091f\u0930 \u092a\u093e\u0930\u094d\u0938\u093f\u0902\u0917 \u0935\u094d\u092f\u0935\u0939\u093e\u0930 \u0915\u094b \u092c\u0926\u0932\u0928\u0947 \u0915\u0947 \u0932\u093f\u090f \u0905\u0932\u0917 \u0938\u0947 \u0915\u0938\u094d\u091f\u092e \u0924\u0930\u094d\u0915 \u092a\u093e\u0930\u094d\u0938\u0930 \u092a\u0930\u093f\u092d\u093e\u0937\u093f\u0924 \u0915\u0930 \u0938\u0915\u0924\u0947 \u0939\u0948\u0902, \u091c\u094b <code>@CommandHandler</code>, <code>@CommandHandler.CallbackQuery</code>, <code>@CommonHandler</code> \u0915\u093e \u0938\u092e\u0930\u094d\u0925\u0928 \u0915\u0930\u0924\u093e \u0939\u0948:</p> <pre><code>@CommandHandler([\"text\"])\n@ArgParser(SpaceArgParser::class)\nsuspend fun test(user: User, bot: TelegramBot) {\n    //...\n}\n</code></pre> <p><code>defaultArgParser</code> \u092d\u0940 \u0926\u0947\u0916\u0947\u0902</p>"},{"location":"hi/Handlers/#_7","title":"\u0928\u093f\u0937\u094d\u0915\u0930\u094d\u0937","text":"<p>\u092f\u0947 \u090f\u0928\u094b\u091f\u0947\u0936\u0928 \u0915\u092e\u093e\u0902\u0921, \u0907\u0928\u092a\u0941\u091f \u0914\u0930 \u0907\u0935\u0947\u0902\u091f \u0915\u094b \u0938\u0902\u092d\u093e\u0932\u0928\u0947 \u0915\u0947 \u0932\u093f\u090f \u092e\u091c\u092c\u0942\u0924 \u0914\u0930 \u0932\u091a\u0940\u0932\u0947 \u0909\u092a\u0915\u0930\u0923 \u092a\u094d\u0930\u0926\u093e\u0928 \u0915\u0930\u0924\u0947 \u0939\u0948\u0902, \u091c\u092c\u0915\u093f \u0926\u0930 \u0938\u0940\u092e\u093e\u0913\u0902 \u0914\u0930 \u0917\u093e\u0930\u094d\u0921 \u0915\u0940 \u0905\u0932\u0917-\u0905\u0932\u0917 \u0915\u0949\u0928\u094d\u092b\u093c\u093f\u0917\u0930\u0947\u0936\u0928 \u0915\u0940 \u0905\u0928\u0941\u092e\u0924\u093f \u0926\u0947\u0924\u0947 \u0939\u0948\u0902, \u091c\u093f\u0938\u0938\u0947 \u092c\u0949\u091f \u0935\u093f\u0915\u093e\u0938 \u0915\u0940 \u0938\u092e\u0917\u094d\u0930 \u0938\u0902\u0930\u091a\u0928\u093e \u0914\u0930 \u092c\u0928\u093e\u090f \u0930\u0916\u0928\u0947 \u0915\u0940 \u0915\u094d\u0937\u092e\u0924\u093e \u092c\u0922\u093c\u0924\u0940 \u0939\u0948\u0964</p>"},{"location":"hi/Handlers/#_8","title":"\u092d\u0940 \u0926\u0947\u0916\u0947\u0902","text":"<ul> <li>\u0917\u0924\u093f\u0935\u093f\u0927\u093f\u092f\u093e\u0901 \u0914\u0930 \u092a\u094d\u0930\u094b\u0938\u0947\u0938\u0930</li> <li>\u0917\u0924\u093f\u0935\u093f\u0927\u093f \u0906\u0939\u094d\u0935\u093e\u0928</li> <li>\u090f\u092b\u090f\u0938\u090f\u092e \u0914\u0930 \u0938\u0902\u0935\u093e\u0926 \u0939\u0948\u0902\u0921\u0932\u093f\u0902\u0917</li> <li>\u0905\u092a\u0921\u0947\u091f \u092a\u093e\u0930\u094d\u0938\u093f\u0902\u0917</li> <li>\u0938\u0939\u093e\u092f\u0915</li> </ul> <p>STRUCTURAL INTEGRITY MODE:</p> <p>\u0906\u092a\u0915\u094b \u0907\u0928\u092a\u0941\u091f \u092e\u093e\u0930\u094d\u0915\u0921\u093e\u0909\u0928 \u0915\u0947 \u0938\u093e\u0925 \u0938\u0902\u0930\u091a\u0928\u093e\u0924\u094d\u092e\u0915 \u0930\u0942\u092a \u0938\u0947 \u0938\u0902\u0917\u0924 \u0906\u0909\u091f\u092a\u0941\u091f \u0909\u0924\u094d\u092a\u0928\u094d\u0928 \u0915\u0930\u0928\u093e \u091a\u093e\u0939\u093f\u090f\u0964</p> <p>\u0928\u093f\u092f\u092e: - \u0915\u094b\u0921 \u092c\u094d\u0932\u0949\u0915\u094b\u0902 \u0915\u0940 \u0938\u0902\u0916\u094d\u092f\u093e \u0920\u0940\u0915 \u092e\u0947\u0932 \u0916\u093e\u0928\u0940 \u091a\u093e\u0939\u093f\u090f\u0964 - \u0936\u0940\u0930\u094d\u0937\u0915\u094b\u0902 \u0915\u0940 \u0938\u0902\u0916\u094d\u092f\u093e \u0920\u0940\u0915 \u092e\u0947\u0932 \u0916\u093e\u0928\u0940 \u091a\u093e\u0939\u093f\u090f\u0964 - \u0938\u092d\u0940 \u092b\u0947\u0902\u0938 \u0915\u093f\u090f \u0917\u090f \u0915\u094b\u0921 \u092c\u094d\u0932\u0949\u0915 \u0905\u092a\u0930\u093f\u0935\u0930\u094d\u0924\u093f\u0924 \u0930\u0939\u0928\u0947 \u091a\u093e\u0939\u093f\u090f\u0964 - \u0938\u092d\u0940 URLs \u0938\u092e\u093e\u0928 \u0930\u0939\u0928\u0947 \u091a\u093e\u0939\u093f\u090f\u0964 - \u0938\u092d\u0940 \u0907\u0928\u0932\u093e\u0907\u0928 \u0915\u094b\u0921 \u0938\u094d\u092a\u0948\u0928 \u0938\u092e\u093e\u0928 \u0930\u0939\u0928\u0947 \u091a\u093e\u0939\u093f\u090f\u0964 - \u0905\u0928\u0941\u091a\u094d\u091b\u0947\u0926\u094b\u0902 \u0915\u094b \u092e\u0930\u094d\u091c \u092f\u093e \u0935\u093f\u092d\u093e\u091c\u093f\u0924 \u0928 \u0915\u0930\u0947\u0902\u0964 - \u0938\u094d\u0925\u093e\u0928 \u0915\u094b \u0938\u093e\u092e\u093e\u0928\u094d\u092f \u0928 \u0915\u0930\u0947\u0902\u0964</p>"},{"location":"hi/Interceptors-%28middleware%29/","title":"\u0907\u0902\u091f\u0930\u0938\u0947\u092a\u094d\u091f\u0930 (\u092e\u093f\u0921\u0932\u0935\u0947\u092f\u0930)","text":""},{"location":"hi/Interceptors-%28middleware%29/#-","title":"\u0907\u0902\u091f\u0930\u0938\u0947\u092a\u094d\u091f\u0930: \u0906\u092a\u0915\u0947 \u092c\u0949\u091f \u0915\u0947 \u0932\u093f\u090f \u0915\u094d\u0930\u0949\u0938-\u0915\u091f\u093f\u0902\u0917 \u0932\u0949\u091c\u093f\u0915","text":"<p>\u091f\u0947\u0932\u0940\u0917\u094d\u0930\u093e\u092e \u092c\u0949\u091f \u092c\u0928\u093e\u0924\u0947 \u0938\u092e\u092f, \u0906\u092a \u0905\u0915\u094d\u0938\u0930 \u0939\u0948\u0902\u0921\u0932\u0930\u094d\u0938 \u0915\u0947 \u092c\u0940\u091a \u0938\u0947\u091f\u0905\u092a, \u091a\u0947\u0915 \u092f\u093e \u0915\u094d\u0932\u0940\u0928\u0905\u092a \u0915\u094b \u0926\u094b\u0939\u0930\u093e\u0924\u0947 \u0939\u0948\u0902\u0964 \u0907\u0902\u091f\u0930\u0938\u0947\u092a\u094d\u091f\u0930 \u0906\u092a\u0915\u094b \u0939\u0948\u0902\u0921\u0932\u0930\u094d\u0938 \u0915\u0947 \u0906\u0938\u092a\u093e\u0938 \u0938\u093e\u091d\u093e \u0932\u0949\u091c\u093f\u0915 \u092a\u094d\u0932\u0917 \u0915\u0930\u0928\u0947 \u0926\u0947\u0924\u0947 \u0939\u0948\u0902, \u091c\u093f\u0938\u0938\u0947 \u0939\u0948\u0902\u0921\u0932\u0930\u094d\u0938 \u0915\u0947\u0902\u0926\u094d\u0930\u093f\u0924 \u0914\u0930 \u092c\u0928\u093e\u090f \u0930\u0916\u0928\u0947 \u092f\u094b\u0917\u094d\u092f \u092c\u0928\u0947 \u0930\u0939\u0924\u0947 \u0939\u0948\u0902\u0964</p> <p>\u092f\u0939\u093e\u0902 telegram-bot \u092e\u0947\u0902 \u0907\u0902\u091f\u0930\u0938\u0947\u092a\u094d\u091f\u0930 \u0915\u0948\u0938\u0947 \u0915\u093e\u092e \u0915\u0930\u0924\u0947 \u0939\u0948\u0902 \u0914\u0930 \u0909\u0928\u0915\u093e \u0909\u092a\u092f\u094b\u0917 \u0915\u0948\u0938\u0947 \u0915\u0930\u0947\u0902\u0964</p>"},{"location":"hi/Interceptors-%28middleware%29/#_1","title":"\u0907\u0902\u091f\u0930\u0938\u0947\u092a\u094d\u091f\u0930 \u0915\u094d\u092f\u093e \u0939\u0948\u0902? (\u0938\u0930\u0932 \u0935\u094d\u092f\u093e\u0916\u094d\u092f\u093e)","text":"<p>\u0907\u0902\u091f\u0930\u0938\u0947\u092a\u094d\u091f\u0930 \u092b\u093c\u0902\u0915\u094d\u0936\u0928 \u0939\u0948\u0902 \u091c\u094b \u0905\u092a\u0921\u0947\u091f \u092a\u094d\u0930\u094b\u0938\u0947\u0938\u093f\u0902\u0917 \u092a\u093e\u0907\u092a\u0932\u093e\u0907\u0928 \u092e\u0947\u0902 \u0935\u093f\u0936\u093f\u0937\u094d\u091f \u092c\u093f\u0902\u0926\u0941\u0913\u0902 \u092a\u0930 \u091a\u0932\u0924\u0947 \u0939\u0948\u0902\u0964 \u0935\u0947 \u0906\u092a\u0915\u094b \u0905\u0928\u0941\u092e\u0924\u093f \u0926\u0947\u0924\u0947 \u0939\u0948\u0902: - \u092a\u094d\u0930\u094b\u0938\u0947\u0938\u093f\u0902\u0917 \u0938\u0902\u0926\u0930\u094d\u092d \u0915\u093e \u0928\u093f\u0930\u0940\u0915\u094d\u0937\u0923 \u0914\u0930 \u0938\u0902\u0936\u094b\u0927\u0928 - \u0915\u094d\u0930\u0949\u0938-\u0915\u091f\u093f\u0902\u0917 \u0932\u0949\u091c\u093f\u0915 \u091c\u094b\u0921\u093c\u0928\u093e (\u0932\u0949\u0917\u093f\u0902\u0917, \u092a\u094d\u0930\u092e\u093e\u0923\u0940\u0915\u0930\u0923, \u092e\u0947\u091f\u094d\u0930\u093f\u0915\u094d\u0938) - \u092f\u0926\u093f \u0906\u0935\u0936\u094d\u092f\u0915 \u0939\u094b \u0924\u094b \u092a\u094d\u0930\u094b\u0938\u0947\u0938\u093f\u0902\u0917 \u0915\u094b \u091c\u0932\u094d\u0926\u0940 \u0930\u094b\u0915\u0928\u093e - \u092a\u094d\u0930\u094b\u0938\u0947\u0938\u093f\u0902\u0917 \u0915\u0947 \u092c\u093e\u0926 \u0938\u0902\u0938\u093e\u0927\u0928\u094b\u0902 \u0915\u0940 \u0938\u092b\u093e\u0908 \u0915\u0930\u0928\u093e</p> <p>\u0907\u0902\u091f\u0930\u0938\u0947\u092a\u094d\u091f\u0930 \u0915\u094b \u091a\u0947\u0915\u092a\u0949\u0907\u0902\u091f \u0915\u0947 \u0930\u0942\u092a \u092e\u0947\u0902 \u0938\u094b\u091a\u0947\u0902 \u091c\u093f\u0938\u0938\u0947 \u0939\u0930 \u0905\u092a\u0921\u0947\u091f \u0939\u0948\u0902\u0921\u0932\u0930 \u0928\u093f\u0937\u094d\u092a\u093e\u0926\u0928 \u0938\u0947 \u092a\u0939\u0932\u0947, \u0926\u094c\u0930\u093e\u0928 \u0914\u0930 \u092c\u093e\u0926 \u092e\u0947\u0902 \u0917\u0941\u091c\u0930\u0924\u093e \u0939\u0948\u0964</p>"},{"location":"hi/Interceptors-%28middleware%29/#_2","title":"\u092a\u094d\u0930\u094b\u0938\u0947\u0938\u093f\u0902\u0917 \u092a\u093e\u0907\u092a\u0932\u093e\u0907\u0928","text":"<p>\u092c\u0949\u091f \u0905\u092a\u0921\u0947\u091f \u0915\u094b \u0938\u093e\u0924 \u091a\u0930\u0923\u094b\u0902 \u0935\u093e\u0932\u0940 \u092a\u093e\u0907\u092a\u0932\u093e\u0907\u0928 \u0915\u0947 \u092e\u093e\u0927\u094d\u092f\u092e \u0938\u0947 \u092a\u094d\u0930\u094b\u0938\u0947\u0938 \u0915\u0930\u0924\u093e \u0939\u0948:</p> \u091a\u0930\u0923 \u0915\u092c \u091a\u0932\u0924\u093e \u0939\u0948 \u0906\u092a \u0907\u0938\u0915\u093e \u0909\u092a\u092f\u094b\u0917 \u0915\u093f\u0938 \u0932\u093f\u090f \u0915\u0930 \u0938\u0915\u0924\u0947 \u0939\u0948\u0902 \u0938\u0947\u091f\u0905\u092a \u091c\u0948\u0938\u0947 \u0939\u0940 \u0905\u092a\u0921\u0947\u091f \u0906\u0924\u093e \u0939\u0948, \u092a\u094d\u0930\u094b\u0938\u0947\u0938\u093f\u0902\u0917 \u0938\u0947 \u092a\u0939\u0932\u0947 \u2714 \u0935\u0948\u0936\u094d\u0935\u093f\u0915 \u0926\u0930 \u0938\u0940\u092e\u093f\u0924 \u0915\u0930\u0928\u093e\u2714 \u0938\u094d\u092a\u0948\u092e \u092f\u093e \u0926\u0942\u0937\u093f\u0924 \u0905\u092a\u0921\u0947\u091f \u0915\u094b \u092b\u093c\u093f\u0932\u094d\u091f\u0930 \u0915\u0930\u0928\u093e\u2714 \u092a\u094d\u0930\u093e\u0930\u0902\u092d\u093f\u0915 \u0932\u0949\u0917\u093f\u0902\u0917\u2714 \u0938\u093e\u091d\u093e \u0938\u0902\u0926\u0930\u094d\u092d \u0938\u0947\u091f\u0905\u092a \u092a\u093e\u0930\u094d\u0938\u093f\u0902\u0917 \u0938\u0947\u091f\u0905\u092a \u0915\u0947 \u092c\u093e\u0926, \u0915\u092e\u093e\u0902\u0921 \u0914\u0930 \u092a\u0948\u0930\u093e\u092e\u0940\u091f\u0930 \u0928\u093f\u0915\u093e\u0932\u0924\u093e \u0939\u0948 \u2714 \u0915\u0938\u094d\u091f\u092e \u0915\u092e\u093e\u0902\u0921 \u092a\u093e\u0930\u094d\u0938\u093f\u0902\u0917\u2714 \u092a\u093e\u0930\u094d\u0938 \u0915\u093f\u090f \u0917\u090f \u0921\u0947\u091f\u093e \u0915\u0947 \u0938\u093e\u0925 \u0938\u0902\u0926\u0930\u094d\u092d \u0915\u094b \u0938\u092e\u0943\u0926\u094d\u0927 \u0915\u0930\u0928\u093e\u2714 \u0905\u092a\u0921\u0947\u091f \u0938\u0902\u0930\u091a\u0928\u093e \u0915\u094b \u092e\u093e\u0928\u094d\u092f \u0915\u0930\u0928\u093e \u092e\u0948\u091a \u0909\u092a\u092f\u0941\u0915\u094d\u0924 \u0939\u0948\u0902\u0921\u0932\u0930 (\u0915\u092e\u093e\u0902\u0921/\u0907\u0928\u092a\u0941\u091f/\u0915\u0949\u092e\u0928) \u0916\u094b\u091c\u0924\u093e \u0939\u0948 \u2714 \u0939\u0948\u0902\u0921\u0932\u0930 \u091a\u092f\u0928 \u0915\u094b \u0913\u0935\u0930\u0930\u093e\u0907\u0921 \u0915\u0930\u0928\u093e\u2714 \u0915\u0938\u094d\u091f\u092e \u0907\u0928\u092a\u0941\u091f \u0939\u0948\u0902\u0921\u0932\u093f\u0902\u0917 \u0932\u0949\u091c\u093f\u0915\u2714 \u092e\u093f\u0932\u093e\u0928 \u0915\u093f\u090f \u0917\u090f \u0939\u0948\u0902\u0921\u0932\u0930\u094d\u0938 \u0915\u094b \u0932\u0949\u0917 \u0915\u0930\u0928\u093e \u092e\u093e\u0928\u094d\u092f\u0915\u0930\u0923 \u0939\u0948\u0902\u0921\u0932\u0930 \u092e\u093f\u0932\u0928\u0947 \u0915\u0947 \u092c\u093e\u0926, \u0928\u093f\u0937\u094d\u092a\u093e\u0926\u0928 \u0938\u0947 \u092a\u0939\u0932\u0947 \u2714 \u0939\u0948\u0902\u0921\u0932\u0930-\u0935\u093f\u0936\u093f\u0937\u094d\u091f \u0905\u0928\u0941\u092e\u0924\u093f\u092f\u093e\u0901\u2714 \u092a\u094d\u0930\u0924\u093f \u0939\u0948\u0902\u0921\u0932\u0930 \u0926\u0930 \u0938\u0940\u092e\u093f\u0924 \u0915\u0930\u0928\u093e\u2714 \u0917\u093e\u0930\u094d\u0921 \u091a\u0947\u0915\u2714 \u092f\u0926\u093f \u0936\u0930\u094d\u0924\u0947\u0902 \u092a\u0942\u0930\u0940 \u0928\u0939\u0940\u0902 \u0939\u094b\u0924\u0940 \u0939\u0948\u0902 \u0924\u094b \u092a\u094d\u0930\u094b\u0938\u0947\u0938\u093f\u0902\u0917 \u0930\u0926\u094d\u0926 \u0915\u0930\u0928\u093e \u092a\u094d\u0930\u0940\u0907\u0928\u0935\u094b\u0915 \u0939\u0948\u0902\u0921\u0932\u0930 \u091a\u0932\u0928\u0947 \u0938\u0947 \u0924\u0941\u0930\u0902\u0924 \u092a\u0939\u0932\u0947 \u2714 \u0905\u0902\u0924\u093f\u092e-\u092e\u093f\u0928\u091f \u091a\u0947\u0915\u2714 \u091f\u093e\u0907\u092e\u0930/\u092e\u0947\u091f\u094d\u0930\u093f\u0915\u094d\u0938 \u0936\u0941\u0930\u0942 \u0915\u0930\u0928\u093e\u2714 \u0939\u0948\u0902\u0921\u0932\u0930 \u0915\u0947 \u0932\u093f\u090f \u0938\u0902\u0926\u0930\u094d\u092d \u0915\u094b \u0938\u092e\u0943\u0926\u094d\u0927 \u0915\u0930\u0928\u093e\u2714 \u0939\u0948\u0902\u0921\u0932\u0930 \u0935\u094d\u092f\u0935\u0939\u093e\u0930 \u0915\u094b \u0938\u0902\u0936\u094b\u0927\u093f\u0924 \u0915\u0930\u0928\u093e \u0907\u0928\u0935\u094b\u0915 \u0939\u0948\u0902\u0921\u0932\u0930 \u092f\u0939\u093e\u0901 \u0928\u093f\u0937\u094d\u092a\u093e\u0926\u093f\u0924 \u0939\u094b\u0924\u093e \u0939\u0948 \u2714 \u0939\u0948\u0902\u0921\u0932\u0930 \u0928\u093f\u0937\u094d\u092a\u093e\u0926\u0928 \u0915\u094b \u0932\u092a\u0947\u091f\u0928\u093e\u2714 \u0924\u094d\u0930\u0941\u091f\u093f \u0939\u0948\u0902\u0921\u0932\u093f\u0902\u0917\u2714 \u0939\u0948\u0902\u0921\u0932\u0930 \u092a\u0930\u093f\u0923\u093e\u092e\u094b\u0902 \u0915\u094b \u0932\u0949\u0917 \u0915\u0930\u0928\u093e \u092a\u094b\u0938\u094d\u091f\u0907\u0928\u0935\u094b\u0915 \u0939\u0948\u0902\u0921\u0932\u0930 \u092a\u0942\u0930\u093e \u0939\u094b\u0928\u0947 \u0915\u0947 \u092c\u093e\u0926 (\u0938\u092b\u0932\u0924\u093e \u092f\u093e \u0935\u093f\u092b\u0932\u0924\u093e) \u2714 \u0938\u0902\u0938\u093e\u0927\u0928\u094b\u0902 \u0915\u0940 \u0938\u092b\u093e\u0908\u2714 \u092a\u0930\u093f\u0923\u093e\u092e\u094b\u0902 \u0915\u094b \u0932\u0949\u0917 \u0915\u0930\u0928\u093e\u2714 \u0924\u094d\u0930\u0941\u091f\u093f\u092f\u094b\u0902 \u092a\u0930 \u092b\u093c\u0949\u0932\u092c\u0948\u0915 \u0938\u0902\u0926\u0947\u0936 \u092d\u0947\u091c\u0928\u093e\u2714 \u0932\u094c\u091f\u0928\u0947 \u0938\u0947 \u092a\u0939\u0932\u0947 \u092a\u0930\u093f\u0923\u093e\u092e\u094b\u0902 \u0915\u094b \u0938\u0902\u0936\u094b\u0927\u093f\u0924 \u0915\u0930\u0928\u093e"},{"location":"hi/Interceptors-%28middleware%29/#_3","title":"\u0907\u0902\u091f\u0930\u0938\u0947\u092a\u094d\u091f\u0930 \u092c\u0928\u093e\u0928\u093e","text":"<p>\u090f\u0915 \u0907\u0902\u091f\u0930\u0938\u0947\u092a\u094d\u091f\u0930 \u090f\u0915 \u0938\u093e\u0927\u093e\u0930\u0923 \u092b\u093c\u0902\u0915\u094d\u0936\u0928 \u0939\u0948 \u091c\u094b <code>ProcessingContext</code> \u092a\u094d\u0930\u093e\u092a\u094d\u0924 \u0915\u0930\u0924\u093e \u0939\u0948:</p> <pre><code>import eu.vendeli.tgbot.core.PipelineInterceptor\nimport eu.vendeli.tgbot.types.component.ProcessingContext\n\nval myInterceptor: PipelineInterceptor = { context -&gt;\n    // \u0906\u092a\u0915\u093e \u0932\u0949\u091c\u093f\u0915 \u092f\u0939\u093e\u0901\n    println(\"Processing update: ${context.update.updateId}\")\n}\n</code></pre> <p>\u092f\u093e \u0932\u0948\u092e\u094d\u092c\u094d\u0921\u093e \u0915\u093e \u0909\u092a\u092f\u094b\u0917 \u0915\u0930\u0915\u0947:</p> <pre><code>val loggingInterceptor = PipelineInterceptor { context -&gt;\n    val logger = context.bot.config.loggerFactory.get(\"MyInterceptor\")\n    logger.info(\"Processing update #${context.update.updateId}\")\n}\n</code></pre>"},{"location":"hi/Interceptors-%28middleware%29/#_4","title":"\u0907\u0902\u091f\u0930\u0938\u0947\u092a\u094d\u091f\u0930 \u0930\u091c\u093f\u0938\u094d\u091f\u0930 \u0915\u0930\u0928\u093e","text":"<p>\u092a\u094d\u0930\u094b\u0938\u0947\u0938\u093f\u0902\u0917 \u092a\u093e\u0907\u092a\u0932\u093e\u0907\u0928 \u092a\u0930 \u0907\u0902\u091f\u0930\u0938\u0947\u092a\u094d\u091f\u0930 \u0930\u091c\u093f\u0938\u094d\u091f\u0930 \u0915\u0930\u0947\u0902:</p> <pre><code>suspend fun main() {\n    val bot = TelegramBot(\"BOT_TOKEN\")\n\n    // \u0938\u0947\u091f\u0905\u092a \u091a\u0930\u0923 \u0915\u0947 \u0932\u093f\u090f \u0907\u0902\u091f\u0930\u0938\u0947\u092a\u094d\u091f\u0930 \u0930\u091c\u093f\u0938\u094d\u091f\u0930 \u0915\u0930\u0947\u0902\n    bot.update.pipeline.intercept(ProcessingPipePhase.Setup) { context -&gt;\n        // \u091c\u093e\u0902\u091a\u0947\u0902 \u0915\u093f \u0909\u092a\u092f\u094b\u0917\u0915\u0930\u094d\u0924\u093e \u092a\u094d\u0930\u0924\u093f\u092c\u0902\u0927\u093f\u0924 \u0939\u0948 \u092f\u093e \u0928\u0939\u0940\u0902\n        val user = context.update.userOrNull\n        if (user != null &amp;&amp; isBanned(user.id)) {\n            context.finish() // \u092a\u094d\u0930\u094b\u0938\u0947\u0938\u093f\u0902\u0917 \u0930\u094b\u0915\u0947\u0902\n            return@intercept\n        }\n    }\n\n    // \u092a\u094d\u0930\u0940\u0907\u0928\u0935\u094b\u0915 \u091a\u0930\u0923 \u0915\u0947 \u0932\u093f\u090f \u0907\u0902\u091f\u0930\u0938\u0947\u092a\u094d\u091f\u0930 \u0930\u091c\u093f\u0938\u094d\u091f\u0930 \u0915\u0930\u0947\u0902\n    bot.update.pipeline.intercept(ProcessingPipePhase.PreInvoke) { context -&gt;\n        val startTime = System.currentTimeMillis()\n        // \u0938\u094d\u091f\u093e\u0930\u094d\u091f \u0938\u092e\u092f \u0938\u094d\u091f\u094b\u0930 \u0915\u0930\u0947\u0902\n    }\n\n    // \u092a\u094b\u0938\u094d\u091f\u0907\u0928\u0935\u094b\u0915 \u091a\u0930\u0923 \u0915\u0947 \u0932\u093f\u090f \u0907\u0902\u091f\u0930\u0938\u0947\u092a\u094d\u091f\u0930 \u0930\u091c\u093f\u0938\u094d\u091f\u0930 \u0915\u0930\u0947\u0902\n    bot.update.pipeline.intercept(ProcessingPipePhase.PostInvoke) { context -&gt;\n        val startTime = // \u0938\u094d\u091f\u093e\u0930\u094d\u091f \u0938\u092e\u092f \u092a\u094d\u0930\u093e\u092a\u094d\u0924 \u0915\u0930\u0947\u0902\n        if (startTime != null) {\n            val duration = System.currentTimeMillis() - startTime\n            println(\"Handler took ${duration}ms\")\n        }\n    }\n\n    bot.handleUpdates()\n}\n</code></pre>"},{"location":"hi/Interceptors-%28middleware%29/#_5","title":"\u0935\u093e\u0938\u094d\u0924\u0935\u093f\u0915 \u0909\u0926\u093e\u0939\u0930\u0923: \u092a\u094d\u0930\u092e\u093e\u0923\u0940\u0915\u0930\u0923 \u0914\u0930 \u092e\u0947\u091f\u094d\u0930\u093f\u0915\u094d\u0938","text":"<p>\u0909\u0926\u093e\u0939\u0930\u0923: \u090f\u0915 \u092c\u0949\u091f \u091c\u093f\u0938\u092e\u0947\u0902 \u0915\u0941\u091b \u0915\u092e\u093e\u0902\u0921 \u0915\u0947 \u0932\u093f\u090f \u092a\u094d\u0930\u092e\u093e\u0923\u0940\u0915\u0930\u0923 \u0915\u0940 \u0906\u0935\u0936\u094d\u092f\u0915\u0924\u093e \u0939\u094b\u0924\u0940 \u0939\u0948, \u0939\u0948\u0902\u0921\u0932\u0930 \u0928\u093f\u0937\u094d\u092a\u093e\u0926\u0928 \u0938\u092e\u092f \u092e\u093e\u092a\u0924\u093e \u0939\u0948, \u0914\u0930 \u0938\u092d\u0940 \u0915\u092e\u093e\u0902\u0921 \u0915\u094b \u0932\u0949\u0917 \u0915\u0930\u0924\u093e \u0939\u0948\u0964</p> <pre><code>suspend fun main() {\n    val bot = TelegramBot(\"BOT_TOKEN\")\n\n    // \u0938\u0947\u091f\u0905\u092a \u091a\u0930\u0923: \u091c\u093e\u0902\u091a\u0947\u0902 \u0915\u093f \u0909\u092a\u092f\u094b\u0917\u0915\u0930\u094d\u0924\u093e \u092a\u094d\u0930\u092e\u093e\u0923\u093f\u0924 \u0939\u0948 \u092f\u093e \u0928\u0939\u0940\u0902\n    bot.update.pipeline.intercept(ProcessingPipePhase.Setup) { context -&gt;\n        val user = context.update.userOrNull ?: return@intercept\n\n        if (!isAuthenticated(user.id)) {\n            message { \"Please authenticate first using /login\" }\n                .send(user, context.bot)\n            context.finish()\n        }\n    }\n\n    // \u092a\u094d\u0930\u0940\u0907\u0928\u0935\u094b\u0915 \u091a\u0930\u0923: \u091f\u093e\u0907\u092e\u0930 \u0936\u0941\u0930\u0942 \u0915\u0930\u0947\u0902 \u0914\u0930 \u0905\u0928\u0941\u092e\u0924\u093f\u092f\u093e\u0901 \u091c\u093e\u0902\u091a\u0947\u0902\n    bot.update.pipeline.intercept(ProcessingPipePhase.PreInvoke) { context -&gt;\n        val activity = context.activity ?: return@intercept\n        val user = context.update.userOrNull ?: return@intercept\n\n        // \u091c\u093e\u0902\u091a\u0947\u0902 \u0915\u093f \u0909\u092a\u092f\u094b\u0917\u0915\u0930\u094d\u0924\u093e \u0915\u0947 \u092a\u093e\u0938 \u092f\u0939 \u0935\u093f\u0936\u093f\u0937\u094d\u091f \u0939\u0948\u0902\u0921\u0932\u0930 \u0909\u092a\u092f\u094b\u0917 \u0915\u0930\u0928\u0947 \u0915\u0940 \u0905\u0928\u0941\u092e\u0924\u093f \u0939\u0948 \u092f\u093e \u0928\u0939\u0940\u0902\n        if (!hasPermission(user.id, activity)) {\n            message { \"You don't have permission to use this command.\" }\n                .send(user, context.bot)\n            context.finish()\n            return@intercept\n        }\n\n        // \u091f\u093e\u0907\u092e\u0930 \u0936\u0941\u0930\u0942 \u0915\u0930\u0947\u0902\n        // \u0938\u094d\u091f\u093e\u0930\u094d\u091f \u0938\u092e\u092f \u0938\u094d\u091f\u094b\u0930 \u0915\u0930\u0947\u0902\n    }\n\n    // \u092a\u094b\u0938\u094d\u091f\u0907\u0928\u0935\u094b\u0915 \u091a\u0930\u0923: \u0932\u0949\u0917 \u0914\u0930 \u0938\u092b\u093e\u0908\n    bot.update.pipeline.intercept(ProcessingPipePhase.PostInvoke) { context -&gt;\n        val activity = context.activity ?: return@intercept\n        val startTime = // \u0938\u094d\u091f\u093e\u0930\u094d\u091f \u0938\u092e\u092f \u092a\u094d\u0930\u093e\u092a\u094d\u0924 \u0915\u0930\u0947\u0902\n\n        if (startTime != null) {\n            val duration = System.currentTimeMillis() - startTime\n            val logger = context.bot.config.loggerFactory.get(\"Metrics\")\n            logger.info(\n                \"Handler ${activity::class.simpleName} took ${duration}ms \" +\n                \"for user ${context.update.userOrNull?.id}\"\n            )\n        }\n    }\n\n    bot.handleUpdates()\n}\n</code></pre>"},{"location":"hi/Interceptors-%28middleware%29/#processingcontext","title":"ProcessingContext","text":"<p><code>ProcessingContext</code> \u0928\u093f\u092e\u094d\u0928\u0932\u093f\u0916\u093f\u0924 \u0924\u0915 \u092a\u0939\u0941\u0902\u091a \u092a\u094d\u0930\u0926\u093e\u0928 \u0915\u0930\u0924\u093e \u0939\u0948:</p> <ul> <li><code>update: ProcessedUpdate</code> - \u092a\u094d\u0930\u094b\u0938\u0947\u0938 \u0915\u093f\u092f\u093e \u091c\u093e \u0930\u0939\u093e \u0935\u0930\u094d\u0924\u092e\u093e\u0928 \u0905\u092a\u0921\u0947\u091f</li> <li><code>bot: TelegramBot</code> - \u092c\u0949\u091f \u0907\u0902\u0938\u094d\u091f\u0947\u0902\u0938</li> <li><code>registry: ActivityRegistry</code> - \u090f\u0915\u094d\u091f\u093f\u0935\u093f\u091f\u0940 \u0930\u091c\u093f\u0938\u094d\u091f\u094d\u0930\u0940</li> <li><code>parsedInput: String</code> - \u092a\u093e\u0930\u094d\u0938 \u0915\u093f\u092f\u093e \u0917\u092f\u093e \u0915\u092e\u093e\u0902\u0921/\u0907\u0928\u092a\u0941\u091f \u091f\u0947\u0915\u094d\u0938\u094d\u091f</li> <li><code>parameters: Map&lt;String, String&gt;</code> - \u092a\u093e\u0930\u094d\u0938 \u0915\u093f\u090f \u0917\u090f \u0915\u092e\u093e\u0902\u0921 \u092a\u0948\u0930\u093e\u092e\u0940\u091f\u0930</li> <li><code>activity: Activity?</code> - \u0930\u093f\u091c\u093c\u0949\u0932\u094d\u0935 \u0915\u093f\u092f\u093e \u0917\u092f\u093e \u0939\u0948\u0902\u0921\u0932\u0930 (\u092e\u0948\u091a \u091a\u0930\u0923 \u0924\u0915 null)</li> <li><code>shouldProceed: Boolean</code> - \u0915\u094d\u092f\u093e \u092a\u094d\u0930\u094b\u0938\u0947\u0938\u093f\u0902\u0917 \u091c\u093e\u0930\u0940 \u0930\u0939\u0928\u0940 \u091a\u093e\u0939\u093f\u090f</li> <li><code>additionalContext: AdditionalContext</code> - \u0905\u0924\u093f\u0930\u093f\u0915\u094d\u0924 \u0938\u0902\u0926\u0930\u094d\u092d \u0921\u0947\u091f\u093e</li> <li><code>finish()</code> - \u092a\u094d\u0930\u094b\u0938\u0947\u0938\u093f\u0902\u0917 \u0915\u094b \u091c\u0932\u094d\u0926\u0940 \u0930\u094b\u0915\u0947\u0902</li> </ul>"},{"location":"hi/Interceptors-%28middleware%29/#_6","title":"\u092a\u094d\u0930\u094b\u0938\u0947\u0938\u093f\u0902\u0917 \u0915\u094b \u091c\u0932\u094d\u0926\u0940 \u0930\u094b\u0915\u0928\u093e","text":"<p><code>context.finish()</code> \u0915\u0949\u0932 \u0915\u0930\u0915\u0947 \u092a\u094d\u0930\u094b\u0938\u0947\u0938\u093f\u0902\u0917 \u0930\u094b\u0915\u0947\u0902:</p> <pre><code>bot.update.pipeline.intercept(ProcessingPipePhase.Validation) { context -&gt;\n    if (someCondition) {\n        context.finish() // \u0906\u0917\u0947 \u0915\u0947 \u091a\u0930\u0923 \u0928\u0939\u0940\u0902 \u091a\u0932\u0947\u0902\u0917\u0947\n    }\n}\n</code></pre>"},{"location":"hi/Interceptors-%28middleware%29/#_7","title":"\u0915\u0938\u094d\u091f\u092e \u0921\u0947\u091f\u093e \u0938\u094d\u091f\u094b\u0930 \u0915\u0930\u0928\u093e","text":"<p>\u0907\u0902\u091f\u0930\u0938\u0947\u092a\u094d\u091f\u0930\u094d\u0938 \u0915\u0947 \u092c\u0940\u091a \u0921\u0947\u091f\u093e \u092a\u093e\u0938 \u0915\u0930\u0928\u0947 \u0915\u0947 \u0932\u093f\u090f <code>additionalContext</code> \u0915\u093e \u0909\u092a\u092f\u094b\u0917 \u0915\u0930\u0947\u0902:</p> <pre><code>// \u092a\u094d\u0930\u0940\u0907\u0928\u0935\u094b\u0915 \u092e\u0947\u0902\ncontext.additionalContext[\"userId\"] = context.update.userOrNull?.id\n\n// \u092a\u094b\u0938\u094d\u091f\u0907\u0928\u0935\u094b\u0915 \u092e\u0947\u0902\nval userId = context.additionalContext[\"userId\"] as? Long\n</code></pre>"},{"location":"hi/Interceptors-%28middleware%29/#_8","title":"\u0915\u0908 \u0907\u0902\u091f\u0930\u0938\u0947\u092a\u094d\u091f\u0930","text":"<p>\u0906\u092a \u090f\u0915 \u0939\u0940 \u091a\u0930\u0923 \u0915\u0947 \u0932\u093f\u090f \u0915\u0908 \u0907\u0902\u091f\u0930\u0938\u0947\u092a\u094d\u091f\u0930 \u0930\u091c\u093f\u0938\u094d\u091f\u0930 \u0915\u0930 \u0938\u0915\u0924\u0947 \u0939\u0948\u0902\u0964 \u0935\u0947 \u0930\u091c\u093f\u0938\u094d\u091f\u094d\u0930\u0947\u0936\u0928 \u0915\u094d\u0930\u092e \u092e\u0947\u0902 \u0928\u093f\u0937\u094d\u092a\u093e\u0926\u093f\u0924 \u0939\u094b\u0924\u0947 \u0939\u0948\u0902:</p> <pre><code>bot.update.pipeline.intercept(ProcessingPipePhase.Setup) { context -&gt;\n    println(\"First interceptor\")\n}\n\nbot.update.pipeline.intercept(ProcessingPipePhase.Setup) { context -&gt;\n    println(\"Second interceptor\")\n}\n\n// \u091c\u092c \u0915\u094b\u0908 \u0905\u092a\u0921\u0947\u091f \u092a\u094d\u0930\u094b\u0938\u0947\u0938 \u0939\u094b\u0924\u093e \u0939\u0948:\n// Output: \"First interceptor\"\n// Output: \"Second interceptor\"\n</code></pre> <p>\u092f\u0926\u093f \u0915\u094b\u0908 \u0907\u0902\u091f\u0930\u0938\u0947\u092a\u094d\u091f\u0930 <code>context.finish()</code> \u0915\u0949\u0932 \u0915\u0930\u0924\u093e \u0939\u0948, \u0924\u094b \u0909\u0938 \u091a\u0930\u0923 \u0915\u0947 \u092c\u093e\u0926 \u0915\u0947 \u0907\u0902\u091f\u0930\u0938\u0947\u092a\u094d\u091f\u0930 \u091b\u094b\u0921\u093c \u0926\u093f\u090f \u091c\u093e\u0924\u0947 \u0939\u0948\u0902, \u0914\u0930 \u092c\u093e\u0926 \u0915\u0947 \u091a\u0930\u0923 \u0928\u0939\u0940\u0902 \u091a\u0932\u0947\u0902\u0917\u0947\u0964</p>"},{"location":"hi/Interceptors-%28middleware%29/#_9","title":"\u092c\u0947\u0938\u094d\u091f \u092a\u094d\u0930\u0948\u0915\u094d\u091f\u093f\u0938\u0947\u0938","text":""},{"location":"hi/Interceptors-%28middleware%29/#1","title":"1. \u0938\u0939\u0940 \u091a\u0930\u0923 \u0915\u093e \u0909\u092a\u092f\u094b\u0917 \u0915\u0930\u0947\u0902","text":"<ul> <li>\u0938\u0947\u091f\u0905\u092a: \u0935\u0948\u0936\u094d\u0935\u093f\u0915 \u091a\u0947\u0915, \u092b\u093c\u093f\u0932\u094d\u091f\u0930\u093f\u0902\u0917, \u092a\u094d\u0930\u093e\u0930\u0902\u092d\u093f\u0915 \u0938\u0947\u091f\u0905\u092a</li> <li>\u092a\u093e\u0930\u094d\u0938\u093f\u0902\u0917: \u0915\u0938\u094d\u091f\u092e \u092a\u093e\u0930\u094d\u0938\u093f\u0902\u0917 \u0932\u0949\u091c\u093f\u0915</li> <li>\u092e\u0948\u091a: \u0939\u0948\u0902\u0921\u0932\u0930 \u091a\u092f\u0928 \u0932\u0949\u091c\u093f\u0915</li> <li>\u092e\u093e\u0928\u094d\u092f\u0915\u0930\u0923: \u0905\u0928\u0941\u092e\u0924\u093f\u092f\u093e\u0901, \u0926\u0930 \u0938\u0940\u092e\u093e\u090f\u0901, \u0917\u093e\u0930\u094d\u0921</li> <li>\u092a\u094d\u0930\u0940\u0907\u0928\u0935\u094b\u0915: \u0939\u0948\u0902\u0921\u0932\u0930-\u0935\u093f\u0936\u093f\u0937\u094d\u091f \u0924\u0948\u092f\u093e\u0930\u0940</li> <li>\u0907\u0928\u0935\u094b\u0915: \u0906\u092e\u0924\u094c\u0930 \u092a\u0930 \u0921\u093f\u092b\u093c\u0949\u0932\u094d\u091f \u0907\u0902\u091f\u0930\u0938\u0947\u092a\u094d\u091f\u0930 \u0926\u094d\u0935\u093e\u0930\u093e \u0939\u0948\u0902\u0921\u0932 \u0915\u093f\u092f\u093e \u091c\u093e\u0924\u093e \u0939\u0948</li> <li>\u092a\u094b\u0938\u094d\u091f\u0907\u0928\u0935\u094b\u0915: \u0938\u092b\u093e\u0908, \u0932\u0949\u0917\u093f\u0902\u0917, \u0924\u094d\u0930\u0941\u091f\u093f \u0939\u0948\u0902\u0921\u0932\u093f\u0902\u0917</li> </ul>"},{"location":"hi/Interceptors-%28middleware%29/#2","title":"2. \u0907\u0902\u091f\u0930\u0938\u0947\u092a\u094d\u091f\u0930\u094d\u0938 \u0915\u094b \u0915\u0947\u0902\u0926\u094d\u0930\u093f\u0924 \u0930\u0916\u0947\u0902","text":"<p>\u092a\u094d\u0930\u0924\u094d\u092f\u0947\u0915 \u0907\u0902\u091f\u0930\u0938\u0947\u092a\u094d\u091f\u0930 \u0915\u094b \u090f\u0915 \u0939\u0940 \u091a\u0940\u091c\u093c \u0915\u0930\u0928\u0940 \u091a\u093e\u0939\u093f\u090f:</p> <pre><code>// \u2705 \u0905\u091a\u094d\u091b\u093e - \u0915\u0947\u0902\u0926\u094d\u0930\u093f\u0924 \u0907\u0902\u091f\u0930\u0938\u0947\u092a\u094d\u091f\u0930\nbot.update.pipeline.intercept(ProcessingPipePhase.Setup) { context -&gt;\n    if (isBanned(context.update.userOrNull?.id)) {\n        context.finish()\n    }\n}\n\n// \u274c \u091f\u093e\u0932\u0947\u0902 - \u092c\u0939\u0941\u0924 \u0915\u0941\u091b \u0915\u0930 \u0930\u0939\u093e \u0939\u0948\nbot.update.pipeline.intercept(ProcessingPipePhase.Setup) { context -&gt;\n    // \u092a\u094d\u0930\u092e\u093e\u0923\u0940\u0915\u0930\u0923\n    // \u0932\u0949\u0917\u093f\u0902\u0917\n    // \u092e\u0947\u091f\u094d\u0930\u093f\u0915\u094d\u0938\n    // \u0926\u0930 \u0938\u0940\u092e\u093f\u0924 \u0915\u0930\u0928\u093e\n    // ... \u092c\u0939\u0941\u0924 \u0915\u0941\u091b!\n}\n</code></pre>"},{"location":"hi/Interceptors-%28middleware%29/#3","title":"3. \u0924\u094d\u0930\u0941\u091f\u093f\u092f\u094b\u0902 \u0915\u094b \u0938\u094c\u092e\u094d\u092f\u0924\u093e \u0938\u0947 \u0939\u0948\u0902\u0921\u0932 \u0915\u0930\u0947\u0902","text":"<p>\u0907\u0902\u091f\u0930\u0938\u0947\u092a\u094d\u091f\u0930\u094d\u0938 \u0915\u094b \u092c\u0949\u091f \u0915\u094b \u0915\u094d\u0930\u0948\u0936 \u0928\u0939\u0940\u0902 \u0915\u0930\u0928\u093e \u091a\u093e\u0939\u093f\u090f:</p> <pre><code>bot.update.pipeline.intercept(ProcessingPipePhase.PreInvoke) { context -&gt;\n    try {\n        // \u0906\u092a\u0915\u093e \u0932\u0949\u091c\u093f\u0915\n    } catch (e: Exception) {\n        val logger = context.bot.config.loggerFactory.get(\"Interceptor\")\n        logger.error(\"Interceptor error\", e)\n        // \u091c\u092c \u0924\u0915 \u0906\u092a \u092a\u094d\u0930\u094b\u0938\u0947\u0938\u093f\u0902\u0917 \u0930\u094b\u0915\u0928\u093e \u0928\u0939\u0940\u0902 \u091a\u093e\u0939\u0924\u0947 \u0924\u092c \u0924\u0915 context.finish() \u0928 \u0915\u0949\u0932 \u0915\u0930\u0947\u0902\n    }\n}\n</code></pre>"},{"location":"hi/Interceptors-%28middleware%29/#4","title":"4. \u0938\u0902\u0938\u093e\u0927\u0928\u094b\u0902 \u0915\u0940 \u0938\u092b\u093e\u0908 \u0915\u0930\u0947\u0902","text":"<p>\u092f\u0926\u093f \u0906\u092a <code>\u092a\u094d\u0930\u0940\u0907\u0928\u0935\u094b\u0915</code> \u092e\u0947\u0902 \u0938\u0902\u0938\u093e\u0927\u0928 \u0916\u094b\u0932\u0924\u0947 \u0939\u0948\u0902, \u0924\u094b <code>\u092a\u094b\u0938\u094d\u091f\u0907\u0928\u0935\u094b\u0915</code> \u092e\u0947\u0902 \u0909\u0928\u0915\u0940 \u0938\u092b\u093e\u0908 \u0915\u0930\u0947\u0902:</p> <pre><code>var timer: Timer? = null\n\nbot.update.pipeline.intercept(ProcessingPipePhase.PreInvoke) { context -&gt;\n    timer = Timer()\n    context.additionalContext[\"timer\"] = timer\n}\n\nbot.update.pipeline.intercept(ProcessingPipePhase.PostInvoke) { context -&gt;\n    val timer = context.additionalContext[\"timer\"] as? Timer\n    timer?.stop()\n}\n</code></pre>"},{"location":"hi/Interceptors-%28middleware%29/#5","title":"5. \u0915\u094d\u0930\u092e \u092e\u093e\u092f\u0928\u0947 \u0930\u0916\u0924\u093e \u0939\u0948","text":"<p>\u091c\u093f\u0938 \u0915\u094d\u0930\u092e \u092e\u0947\u0902 \u0906\u092a \u091a\u093e\u0939\u0924\u0947 \u0939\u0948\u0902 \u0909\u0938 \u0915\u094d\u0930\u092e \u092e\u0947\u0902 \u0907\u0902\u091f\u0930\u0938\u0947\u092a\u094d\u091f\u0930 \u0930\u091c\u093f\u0938\u094d\u091f\u0930 \u0915\u0930\u0947\u0902:</p> <pre><code>// \u092a\u0939\u0932\u0947 \u0905\u0927\u093f\u0915 \u0938\u093e\u092e\u093e\u0928\u094d\u092f \u091a\u0947\u0915\nbot.update.pipeline.intercept(ProcessingPipePhase.Setup) { \n    // \u0935\u0948\u0936\u094d\u0935\u093f\u0915 \u092a\u094d\u0930\u0924\u093f\u092c\u0902\u0927 \u091a\u0947\u0915\n}\n\n// \u092c\u093e\u0926 \u092e\u0947\u0902 \u0905\u0927\u093f\u0915 \u0935\u093f\u0936\u093f\u0937\u094d\u091f \u091a\u0947\u0915\nbot.update.pipeline.intercept(ProcessingPipePhase.Validation) { \n    // \u0939\u0948\u0902\u0921\u0932\u0930-\u0935\u093f\u0936\u093f\u0937\u094d\u091f \u0905\u0928\u0941\u092e\u0924\u093f \u091a\u0947\u0915\n}\n</code></pre>"},{"location":"hi/Interceptors-%28middleware%29/#6-","title":"6. \u0907\u0902\u091f\u0930\u0938\u0947\u092a\u094d\u091f\u0930\u094d\u0938 \u0915\u093e \u0909\u092a\u092f\u094b\u0917 \u0915\u094d\u0930\u0949\u0938-\u0915\u091f\u093f\u0902\u0917 \u0915\u0949\u0928\u094d\u0938\u0930\u094d\u0928 \u0915\u0947 \u0932\u093f\u090f \u0915\u0930\u0947\u0902","text":"<p>\u0907\u0902\u091f\u0930\u0938\u0947\u092a\u094d\u091f\u0930\u094d\u0938 \u0906\u0926\u0930\u094d\u0936 \u0939\u0948\u0902: - \u2705 \u092a\u094d\u0930\u092e\u093e\u0923\u0940\u0915\u0930\u0923/\u0905\u0928\u0941\u092e\u0924\u093f - \u2705 \u0932\u0949\u0917\u093f\u0902\u0917 - \u2705 \u092e\u0947\u091f\u094d\u0930\u093f\u0915\u094d\u0938/\u092a\u094d\u0930\u0926\u0930\u094d\u0936\u0928 \u092e\u0949\u0928\u093f\u091f\u0930\u093f\u0902\u0917 - \u2705 \u0926\u0930 \u0938\u0940\u092e\u093f\u0924 \u0915\u0930\u0928\u093e - \u2705 \u0924\u094d\u0930\u0941\u091f\u093f \u0939\u0948\u0902\u0921\u0932\u093f\u0902\u0917 - \u2705 \u0930\u093f\u0915\u094d\u0935\u0947\u0938\u094d\u091f/\u0930\u093f\u0938\u094d\u092a\u0949\u0928\u094d\u0938 \u091f\u094d\u0930\u093e\u0902\u0938\u092b\u0949\u0930\u094d\u092e\u0947\u0936\u0928</p> <p>\u0939\u0948\u0902\u0921\u0932\u0930-\u0935\u093f\u0936\u093f\u0937\u094d\u091f \u0932\u0949\u091c\u093f\u0915 \u0915\u0947 \u0932\u093f\u090f, \u0909\u0938\u0947 \u0939\u0948\u0902\u0921\u0932\u0930 \u092e\u0947\u0902 \u0939\u0940 \u0930\u0916\u0947\u0902\u0964</p>"},{"location":"hi/Interceptors-%28middleware%29/#_10","title":"\u0921\u093f\u092b\u093c\u0949\u0932\u094d\u091f \u0907\u0902\u091f\u0930\u0938\u0947\u092a\u094d\u091f\u0930","text":"<p>\u092b\u094d\u0930\u0947\u092e\u0935\u0930\u094d\u0915 \u092e\u0947\u0902 \u0915\u094b\u0930 \u092b\u093c\u0902\u0915\u094d\u0936\u0928\u0948\u0932\u093f\u091f\u0940 \u0915\u0947 \u0932\u093f\u090f \u0921\u093f\u092b\u093c\u0949\u0932\u094d\u091f \u0907\u0902\u091f\u0930\u0938\u0947\u092a\u094d\u091f\u0930 \u0936\u093e\u092e\u093f\u0932 \u0939\u0948\u0902:</p> <ul> <li>DefaultSetupInterceptor: \u0935\u0948\u0936\u094d\u0935\u093f\u0915 \u0926\u0930 \u0938\u0940\u092e\u093f\u0924 \u0915\u0930\u0928\u093e</li> <li>DefaultParsingInterceptor: \u0915\u092e\u093e\u0902\u0921 \u092a\u093e\u0930\u094d\u0938\u093f\u0902\u0917</li> <li>DefaultMatchInterceptor: \u0939\u0948\u0902\u0921\u0932\u0930 \u092e\u0948\u091a\u093f\u0902\u0917 (\u0915\u092e\u093e\u0902\u0921, \u0907\u0928\u092a\u0941\u091f, \u0915\u0949\u092e\u0928 \u092e\u0948\u091a\u0930)</li> <li>DefaultValidationInterceptor: \u0917\u093e\u0930\u094d\u0921 \u091a\u0947\u0915 \u0914\u0930 \u092a\u094d\u0930\u0924\u093f-\u0939\u0948\u0902\u0921\u0932\u0930 \u0926\u0930 \u0938\u0940\u092e\u093f\u0924 \u0915\u0930\u0928\u093e</li> <li>DefaultInvokeInterceptor: \u0939\u0948\u0902\u0921\u0932\u0930 \u0928\u093f\u0937\u094d\u092a\u093e\u0926\u0928 \u0914\u0930 \u0924\u094d\u0930\u0941\u091f\u093f \u0939\u0948\u0902\u0921\u0932\u093f\u0902\u0917</li> </ul> <p>\u0906\u092a\u0915\u0947 \u0915\u0938\u094d\u091f\u092e \u0907\u0902\u091f\u0930\u0938\u0947\u092a\u094d\u091f\u0930 \u0907\u0928 \u0921\u093f\u092b\u093c\u0949\u0932\u094d\u091f \u0915\u0947 \u0938\u093e\u0925-\u0938\u093e\u0925 \u091a\u0932\u0924\u0947 \u0939\u0948\u0902\u0964 \u0906\u092a \u0921\u093f\u092b\u093c\u0949\u0932\u094d\u091f \u0938\u0947 \u092a\u0939\u0932\u0947 \u092f\u093e \u092c\u093e\u0926 \u092e\u0947\u0902 \u0932\u0949\u091c\u093f\u0915 \u091c\u094b\u0921\u093c \u0938\u0915\u0924\u0947 \u0939\u0948\u0902, \u0932\u0947\u0915\u093f\u0928 \u0906\u092a \u0921\u093f\u092b\u093c\u0949\u0932\u094d\u091f \u0907\u0902\u091f\u0930\u0938\u0947\u092a\u094d\u091f\u0930 \u0928\u0939\u0940\u0902 \u0939\u091f\u093e \u0938\u0915\u0924\u0947\u0964</p>"},{"location":"hi/Interceptors-%28middleware%29/#_11","title":"\u0909\u0928\u094d\u0928\u0924: \u0936\u0930\u094d\u0924\u0940\u092f \u0907\u0902\u091f\u0930\u0938\u0947\u092a\u094d\u091f\u0930","text":"<p>\u0906\u092a \u0907\u0902\u091f\u0930\u0938\u0947\u092a\u094d\u091f\u0930\u094d\u0938 \u0915\u094b \u0936\u0930\u094d\u0924\u0940\u092f \u092c\u0928\u093e \u0938\u0915\u0924\u0947 \u0939\u0948\u0902:</p> <pre><code>bot.update.pipeline.intercept(ProcessingPipePhase.PreInvoke) { context -&gt;\n    val activity = context.activity ?: return@intercept\n\n    // \u0915\u0947\u0935\u0932 \u0935\u093f\u0936\u093f\u0937\u094d\u091f \u0939\u0948\u0902\u0921\u0932\u0930\u094d\u0938 \u092a\u0930 \u0932\u093e\u0917\u0942 \u0915\u0930\u0947\u0902\n    if (activity::class.simpleName?.contains(\"Admin\") == true) {\n        // \u090f\u0921\u092e\u093f\u0928-\u0935\u093f\u0936\u093f\u0937\u094d\u091f \u0932\u0949\u091c\u093f\u0915\n        checkAdminPermissions(context)\n    }\n}\n</code></pre>"},{"location":"hi/Interceptors-%28middleware%29/#_12","title":"\u0938\u093e\u0930\u093e\u0902\u0936","text":"<p>\u0907\u0902\u091f\u0930\u0938\u0947\u092a\u094d\u091f\u0930 \u0906\u092a\u0915\u0947 \u092c\u0949\u091f \u092e\u0947\u0902 \u0915\u094d\u0930\u0949\u0938-\u0915\u091f\u093f\u0902\u0917 \u0932\u0949\u091c\u093f\u0915 \u091c\u094b\u0921\u093c\u0928\u0947 \u0915\u093e \u0938\u093e\u092b\u093c \u0924\u0930\u0940\u0915\u093e \u092a\u094d\u0930\u0926\u093e\u0928 \u0915\u0930\u0924\u0947 \u0939\u0948\u0902:</p> <ul> <li>\u2705 \u0938\u093e\u0924 \u091a\u0930\u0923 \u092a\u094d\u0930\u094b\u0938\u0947\u0938\u093f\u0902\u0917 \u0915\u0947 \u0935\u093f\u092d\u093f\u0928\u094d\u0928 \u091a\u0930\u0923\u094b\u0902 \u0915\u0947 \u0932\u093f\u090f</li> <li>\u2705 \u0938\u0930\u0932 API: \u092c\u0938 <code>PipelineInterceptor</code> \u0932\u093e\u0917\u0942 \u0915\u0930\u0947\u0902</li> <li>\u2705 \u0932\u091a\u0940\u0932\u093e: \u092a\u094d\u0930\u0924\u093f \u091a\u0930\u0923 \u0915\u0908 \u0907\u0902\u091f\u0930\u0938\u0947\u092a\u094d\u091f\u0930 \u0930\u091c\u093f\u0938\u094d\u091f\u0930 \u0915\u0930\u0947\u0902</li> <li>\u2705 \u0936\u0915\u094d\u0924\u093f\u0936\u093e\u0932\u0940: \u092a\u0942\u0930\u094d\u0923 \u092a\u094d\u0930\u094b\u0938\u0947\u0938\u093f\u0902\u0917 \u0938\u0902\u0926\u0930\u094d\u092d \u0924\u0915 \u092a\u0939\u0941\u0902\u091a</li> <li>\u2705 \u0938\u0941\u0930\u0915\u094d\u0937\u093f\u0924: <code>context.finish()</code> \u0915\u0947 \u0938\u093e\u0925 \u092a\u094d\u0930\u094b\u0938\u0947\u0938\u093f\u0902\u0917 \u0915\u094b \u091c\u0932\u094d\u0926\u0940 \u0930\u094b\u0915 \u0938\u0915\u0924\u0947 \u0939\u0948\u0902</li> </ul> <p>\u0907\u0902\u091f\u0930\u0938\u0947\u092a\u094d\u091f\u0930\u094d\u0938 \u0915\u093e \u0909\u092a\u092f\u094b\u0917 \u0905\u092a\u0928\u0947 \u0939\u0948\u0902\u0921\u0932\u0930\u094d\u0938 \u0915\u094b \u0935\u094d\u092f\u093e\u0935\u0938\u093e\u092f\u093f\u0915 \u0932\u0949\u091c\u093f\u0915 \u092a\u0930 \u0915\u0947\u0902\u0926\u094d\u0930\u093f\u0924 \u0930\u0916\u0928\u0947 \u0915\u0947 \u0932\u093f\u090f \u0915\u0930\u0947\u0902 \u091c\u092c\u0915\u093f \u092a\u094d\u0930\u092e\u093e\u0923\u0940\u0915\u0930\u0923, \u0932\u0949\u0917\u093f\u0902\u0917 \u0914\u0930 \u092e\u0947\u091f\u094d\u0930\u093f\u0915\u094d\u0938 \u091c\u0948\u0938\u0947 \u0938\u093e\u091d\u093e \u0915\u0949\u0928\u094d\u0938\u0930\u094d\u0928 \u0915\u094b \u0915\u0947\u0902\u0926\u094d\u0930\u0940\u0915\u0943\u0924 \u0924\u0930\u0940\u0915\u0947 \u0938\u0947 \u0939\u0948\u0902\u0921\u0932 \u0915\u0930\u0947\u0902\u0964</p>"},{"location":"hi/Interceptors-%28middleware%29/#_13","title":"\u0907\u0938\u0947 \u092d\u0940 \u0926\u0947\u0916\u0947\u0902","text":"<ul> <li>Functional handling DSL - \u092b\u093c\u0902\u0915\u094d\u0936\u0928\u0932 \u0905\u092a\u0921\u0947\u091f \u092a\u094d\u0930\u094b\u0938\u0947\u0938\u093f\u0902\u0917</li> <li>Guards - \u0939\u0948\u0902\u0921\u0932\u0930-\u0938\u094d\u0924\u0930\u0940\u092f \u0905\u0928\u0941\u092e\u0924\u093f \u091a\u0947\u0915</li> </ul>"},{"location":"hi/Update-parsing/","title":"\u0905\u092a\u0921\u0947\u091f \u092a\u093e\u0930\u094d\u0938\u093f\u0902\u0917","text":""},{"location":"hi/Update-parsing/#_1","title":"\u091f\u0947\u0915\u094d\u0938\u094d\u091f \u092a\u0947\u0932\u094b\u0921","text":"<p>\u0915\u0941\u091b \u0905\u092a\u0921\u0947\u091f \u092e\u0947\u0902 \u091f\u0947\u0915\u094d\u0938\u094d\u091f \u092a\u0947\u0932\u094b\u0921 \u0939\u094b \u0938\u0915\u0924\u093e \u0939\u0948 \u091c\u093f\u0938\u0947 \u0906\u0917\u0947 \u092a\u094d\u0930\u094b\u0938\u0947\u0938\u093f\u0902\u0917 \u0915\u0947 \u0932\u093f\u090f \u092a\u093e\u0930\u094d\u0938 \u0915\u093f\u092f\u093e \u091c\u093e \u0938\u0915\u0924\u093e \u0939\u0948\u0964 \u0906\u0907\u090f \u0909\u0928\u094d\u0939\u0947\u0902 \u0926\u0947\u0916\u0947\u0902:</p> <ul> <li><code>MessageUpdate</code> -&gt; <code>message.text</code></li> <li><code>EditedMessageUpdate</code> -&gt; <code>editedMessage.text</code></li> <li><code>ChannelPostUpdate</code> -&gt; <code>channelPost.text</code></li> <li><code>EditedChannelPostUpdate</code> -&gt; <code>editedChannelPost.text</code></li> <li><code>InlineQueryUpdate</code> -&gt; <code>inlineQuery.query</code></li> <li><code>ChosenInlineResultUpdate</code> -&gt; <code>chosenInlineResult.query</code></li> <li><code>CallbackQueryUpdate</code> -&gt; <code>callbackQuery.data</code></li> <li><code>ShippingQueryUpdate</code> -&gt; <code>shippingQuery.invoicePayload</code></li> <li><code>PreCheckoutQueryUpdate</code> -&gt; <code>preCheckoutQuery.invoicePayload</code></li> <li><code>PollUpdate</code> -&gt; <code>poll.question</code></li> <li><code>PurchasedPaidMediaUpdate</code> -&gt; <code>purchasedPaidMedia.paidMediaPayload</code></li> </ul> <p>\u0938\u0942\u091a\u0940\u092c\u0926\u094d\u0927 \u0905\u092a\u0921\u0947\u091f\u094d\u0938 \u0938\u0947, \u090f\u0915 \u0935\u093f\u0936\u093f\u0937\u094d\u091f \u092a\u0948\u0930\u093e\u092e\u0940\u091f\u0930 \u091a\u0941\u0928\u093e \u091c\u093e\u0924\u093e \u0939\u0948 \u0914\u0930 <code>TextReference</code> \u0915\u0947 \u0930\u0942\u092a \u092e\u0947\u0902 \u0906\u0917\u0947 \u092a\u093e\u0930\u094d\u0938\u093f\u0902\u0917 \u0915\u0947 \u0932\u093f\u090f \u0932\u093f\u092f\u093e \u091c\u093e\u0924\u093e \u0939\u0948\u0964</p>"},{"location":"hi/Update-parsing/#_2","title":"\u092a\u093e\u0930\u094d\u0938\u093f\u0902\u0917","text":"<p>\u091a\u092f\u0928\u093f\u0924 \u092a\u0948\u0930\u093e\u092e\u0940\u091f\u0930\u094d\u0938 \u0915\u094b \u0909\u092a\u092f\u0941\u0915\u094d\u0924 \u0915\u0949\u0928\u094d\u092b\u093c\u093f\u0917\u0930 \u0915\u093f\u090f \u0917\u090f \u0921\u093f\u0932\u0940\u092e\u093f\u091f\u0930\u094d\u0938 \u0915\u0947 \u0938\u093e\u0925 \u0915\u092e\u093e\u0902\u0921 \u0914\u0930 \u0909\u0938\u0915\u0947 \u092a\u0948\u0930\u093e\u092e\u0940\u091f\u0930\u094d\u0938 \u092e\u0947\u0902 \u092a\u093e\u0930\u094d\u0938 \u0915\u093f\u092f\u093e \u091c\u093e\u0924\u093e \u0939\u0948\u0964</p> <p>\u0915\u0949\u0928\u094d\u092b\u093c\u093f\u0917\u0930\u0947\u0936\u0928 <code>commandParsing</code> \u092c\u094d\u0932\u0949\u0915 \u0926\u0947\u0916\u0947\u0902\u0964</p> <p>\u0906\u092a \u0928\u0940\u091a\u0947 \u0926\u093f\u090f \u0917\u090f \u0921\u093e\u092f\u0917\u094d\u0930\u093e\u092e \u092e\u0947\u0902 \u0926\u0947\u0916 \u0938\u0915\u0924\u0947 \u0939\u0948\u0902 \u0915\u093f \u0915\u094c\u0928 \u0938\u0947 \u0915\u0902\u092a\u094b\u0928\u0947\u0902\u091f\u094d\u0938 \u091f\u093e\u0930\u0917\u0947\u091f \u092b\u093c\u0902\u0915\u094d\u0936\u0928 \u0915\u0947 \u0915\u093f\u0928 \u0939\u093f\u0938\u094d\u0938\u094b\u0902 \u0938\u0947 \u092e\u0948\u092a \u0915\u093f\u090f \u0917\u090f \u0939\u0948\u0902\u0964</p> <p> </p>"},{"location":"hi/Update-parsing/#parammapping","title":"@ParamMapping","text":"<p>\u0938\u0941\u0935\u093f\u0927\u093e \u0915\u0947 \u0932\u093f\u090f \u092f\u093e \u0915\u093f\u0938\u0940 \u0935\u093f\u0936\u0947\u0937 \u092e\u093e\u092e\u0932\u0947 \u0915\u0947 \u0932\u093f\u090f <code>@ParamMapping</code> \u0928\u093e\u092e\u0915 \u090f\u0915 \u090f\u0928\u094b\u091f\u0947\u0936\u0928 \u092d\u0940 \u0939\u0948\u0964</p> <p>\u092f\u0939 \u0906\u092a\u0915\u094b \u0906\u0928\u0947 \u0935\u093e\u0932\u0947 \u091f\u0947\u0915\u094d\u0938\u094d\u091f \u0938\u0947 \u0915\u093f\u0938\u0940 \u092d\u0940 \u092a\u0948\u0930\u093e\u092e\u0940\u091f\u0930 \u092e\u0947\u0902 \u092a\u0948\u0930\u093e\u092e\u0940\u091f\u0930 \u0915\u0947 \u0928\u093e\u092e \u0915\u094b \u092e\u0948\u092a \u0915\u0930\u0928\u0947 \u0915\u0940 \u0905\u0928\u0941\u092e\u0924\u093f \u0926\u0947\u0924\u093e \u0939\u0948\u0964</p> <p>\u092f\u0939 \u0924\u092c \u092d\u0940 \u0938\u0941\u0935\u093f\u0927\u093e\u091c\u0928\u0915 \u0939\u0948 \u091c\u092c \u0906\u092a\u0915\u093e \u0906\u0928\u0947 \u0935\u093e\u0932\u093e \u0921\u0947\u091f\u093e \u0938\u0940\u092e\u093f\u0924 \u0939\u094b, \u0909\u0926\u093e\u0939\u0930\u0923 \u0915\u0947 \u0932\u093f\u090f, <code>CallbackData</code> (64 \u0915\u0948\u0930\u0947\u0915\u094d\u091f\u0930)\u0964</p> <p>\u0909\u092a\u092f\u094b\u0917 \u0915\u093e \u0909\u0926\u093e\u0939\u0930\u0923 \u0926\u0947\u0916\u0947\u0902: <code>greeting?name=Adam</code></p> <pre><code>@CommandHandler([\"greeting\"])\nsuspend fun greeting(@ParamMapping(\"name\") anyParameterName: String, user: User, bot: TelegramBot) {\n    message { \"Hello, $anyParameterName\" }.send(to = user, via = bot)\n}\n</code></pre> <p>\u0914\u0930 \u092f\u0939 \u0928\u093e\u092e\u093f\u0924 \u0928\u0939\u0940\u0902 \u0915\u093f\u090f \u0917\u090f \u092a\u0948\u0930\u093e\u092e\u0940\u091f\u0930\u094d\u0938 \u0915\u094b \u092a\u0915\u0921\u093c\u0928\u0947 \u0915\u0947 \u0932\u093f\u090f \u092d\u0940 \u0909\u092a\u092f\u094b\u0917 \u0915\u093f\u092f\u093e \u091c\u093e \u0938\u0915\u0924\u093e \u0939\u0948, \u0909\u0928 \u092e\u093e\u092e\u0932\u094b\u0902 \u092e\u0947\u0902 \u091c\u0939\u093e\u0902 \u092a\u093e\u0930\u094d\u0938\u0930 \u0907\u0938 \u0924\u0930\u0939 \u0938\u0947 \u0938\u0947\u091f\u0905\u092a \u0915\u093f\u092f\u093e \u0917\u092f\u093e \u0939\u0948 \u0915\u093f \u092a\u0948\u0930\u093e\u092e\u0940\u091f\u0930 \u0928\u093e\u092e \u091b\u094b\u0921\u093c \u0926\u093f\u090f \u091c\u093e\u0924\u0947 \u0939\u0948\u0902 \u092f\u093e \u0935\u0947 \u0905\u0928\u0941\u092a\u0938\u094d\u0925\u093f\u0924 \u092d\u0940 \u0939\u094b \u0938\u0915\u0924\u0947 \u0939\u0948\u0902, \u091c\u094b 'param_n' \u092a\u0948\u091f\u0930\u094d\u0928 \u0938\u0947 \u0917\u0941\u091c\u0930\u0924\u093e \u0939\u0948, \u091c\u0939\u093e\u0902 <code>n</code> \u0907\u0938\u0915\u093e \u0911\u0930\u094d\u0921\u093f\u0928\u0932 \u0939\u0948\u0964</p> <p>\u0909\u0926\u093e\u0939\u0930\u0923 \u0915\u0947 \u0932\u093f\u090f \u0910\u0938\u093e \u091f\u0947\u0915\u094d\u0938\u094d\u091f - <code>myCommand?p1=v1&amp;v2&amp;p3=&amp;p4=v4&amp;p5=</code>, \u092a\u093e\u0930\u094d\u0938 \u0915\u093f\u092f\u093e \u091c\u093e\u090f\u0917\u093e: * \u0915\u092e\u093e\u0902\u0921 - <code>myCommand</code> * \u092a\u0948\u0930\u093e\u092e\u0940\u091f\u0930\u094d\u0938   * <code>p1</code> = <code>v1</code>   * <code>param_2</code> = <code>v2</code>   * <code>p3</code> = <code>* `p4` = `v4`   * `p5` =</code></p> <p>\u091c\u0948\u0938\u093e \u0915\u093f \u0906\u092a \u0926\u0947\u0916 \u0938\u0915\u0924\u0947 \u0939\u0948\u0902 \u0915\u094d\u092f\u094b\u0902\u0915\u093f \u0926\u0942\u0938\u0930\u093e \u092a\u0948\u0930\u093e\u092e\u0940\u091f\u0930 \u0918\u094b\u0937\u093f\u0924 \u0928\u093e\u092e \u0928\u0939\u0940\u0902 \u0930\u0916\u0924\u093e \u0939\u0948 \u0907\u0938\u0947 <code>param_2</code> \u0915\u0947 \u0930\u0942\u092a \u092e\u0947\u0902 \u092a\u094d\u0930\u0938\u094d\u0924\u0941\u0924 \u0915\u093f\u092f\u093e \u0917\u092f\u093e \u0939\u0948\u0964</p> <p>\u0924\u094b \u0906\u092a \u0915\u0949\u0932\u092c\u0948\u0915 \u092e\u0947\u0902 \u0916\u0941\u0926 \u0935\u0947\u0930\u093f\u090f\u092c\u0932 \u0928\u093e\u092e\u094b\u0902 \u0915\u094b \u0938\u0902\u0915\u094d\u0937\u093f\u092a\u094d\u0924 \u0915\u0930 \u0938\u0915\u0924\u0947 \u0939\u0948\u0902 \u0914\u0930 \u0915\u094b\u0921 \u092e\u0947\u0902 \u0938\u094d\u092a\u0937\u094d\u091f \u092a\u0920\u0928\u0940\u092f \u0928\u093e\u092e\u094b\u0902 \u0915\u093e \u0909\u092a\u092f\u094b\u0917 \u0915\u0930 \u0938\u0915\u0924\u0947 \u0939\u0948\u0902\u0964</p>"},{"location":"hi/Update-parsing/#deeplink","title":"Deeplink","text":"<p>\u090a\u092a\u0930 \u0926\u0940 \u0917\u0908 \u091c\u093e\u0928\u0915\u093e\u0930\u0940 \u0915\u094b \u0927\u094d\u092f\u093e\u0928 \u092e\u0947\u0902 \u0930\u0916\u0924\u0947 \u0939\u0941\u090f \u092f\u0926\u093f \u0906\u092a \u0905\u092a\u0928\u0947 \u0938\u094d\u091f\u093e\u0930\u094d\u091f \u0915\u092e\u093e\u0902\u0921 \u092e\u0947\u0902 \u0921\u0940\u092a\u0932\u093f\u0902\u0915 \u0915\u0940 \u0905\u092a\u0947\u0915\u094d\u0937\u093e \u0915\u0930\u0924\u0947 \u0939\u0948\u0902 \u0924\u094b \u0906\u092a \u0907\u0938\u0947 \u0907\u0938\u0915\u0947 \u0938\u093e\u0925 \u092a\u0915\u0921\u093c \u0938\u0915\u0924\u0947 \u0939\u0948\u0902:</p> <pre><code>@CommandHandler([\"/start\"])\nsuspend fun start(@ParamMapping(\"param_1\") deeplink: String?, user: User, bot: TelegramBot) {\n    message { \"deeplink is $deeplink\" }.send(to = user, via = bot)\n}\n</code></pre>"},{"location":"hi/Update-parsing/#_3","title":"\u0917\u094d\u0930\u0941\u092a \u0915\u092e\u093e\u0902\u0921\u094d\u0938","text":"<p><code>commandParsing</code> \u0915\u0949\u0928\u094d\u092b\u093c\u093f\u0917\u0930\u0947\u0936\u0928 \u092e\u0947\u0902 \u0939\u092e\u093e\u0930\u0947 \u092a\u093e\u0938 <code>useIdentifierInGroupCommands</code> \u092a\u0948\u0930\u093e\u092e\u0940\u091f\u0930 \u0939\u0948 \u091c\u092c \u092f\u0939 \u091a\u093e\u0932\u0942 \u0939\u094b\u0924\u093e \u0939\u0948, \u0924\u094b \u0939\u092e <code>TelegramBot.identifier</code> \u0915\u093e \u0909\u092a\u092f\u094b\u0917 \u0915\u0930 \u0938\u0915\u0924\u0947 \u0939\u0948\u0902 (\u092f\u0926\u093f \u0906\u092a \u0935\u0930\u094d\u0923\u093f\u0924 \u092a\u0948\u0930\u093e\u092e\u0940\u091f\u0930 \u0915\u093e \u0909\u092a\u092f\u094b\u0917 \u0915\u0930 \u0930\u0939\u0947 \u0939\u0948\u0902 \u0924\u094b \u0907\u0938\u0947 \u092c\u0926\u0932\u0928\u093e \u0928 \u092d\u0942\u0932\u0947\u0902) \u0915\u092e\u093e\u0902\u0921 \u092e\u093f\u0932\u093e\u0928 \u092a\u094d\u0930\u0915\u094d\u0930\u093f\u092f\u093e \u092e\u0947\u0902, \u092f\u0939 \u0915\u0908 \u092c\u0949\u091f\u094d\u0938 \u0915\u0947 \u092c\u0940\u091a \u0938\u092e\u093e\u0928 \u0915\u092e\u093e\u0902\u0921\u094d\u0938 \u0915\u094b \u0905\u0932\u0917 \u0915\u0930\u0928\u0947 \u092e\u0947\u0902 \u092e\u0926\u0926 \u0915\u0930\u0924\u093e \u0939\u0948, \u0905\u0928\u094d\u092f\u0925\u093e <code>@MyBot</code> \u0939\u093f\u0938\u094d\u0938\u093e \u092c\u0938 \u091b\u094b\u0921\u093c \u0926\u093f\u092f\u093e \u091c\u093e\u090f\u0917\u093e\u0964</p>"},{"location":"hi/Update-parsing/#_4","title":"\u0926\u0947\u0916\u0947\u0902 \u092d\u0940","text":"<ul> <li>Activity invocation</li> <li>Activities &amp; Processors</li> <li>Actions</li> </ul>"},{"location":"hi/Useful-utilities-and-tips/","title":"\u0909\u092a\u092f\u094b\u0917\u0940 \u0909\u092a\u092f\u094b\u0917\u093f\u0924\u093e\u090f\u0901 \u0914\u0930 \u091f\u093f\u092a\u094d\u0938","text":""},{"location":"hi/Useful-utilities-and-tips/#processedupdate","title":"ProcessedUpdate \u0915\u0947 \u0938\u093e\u0925 \u0938\u0902\u091a\u093e\u0932\u0928","text":"<p><code>ProcessedUpdate</code> \u0905\u092a\u0921\u0947\u091f \u0915\u0947 \u0932\u093f\u090f \u090f\u0915 \u0938\u093e\u092e\u093e\u0928\u094d\u092f \u0915\u094d\u0932\u093e\u0938 \u0939\u0948 \u091c\u094b \u092e\u0942\u0932 \u0921\u0947\u091f\u093e \u0915\u0947 \u0906\u0927\u093e\u0930 \u092a\u0930 \u0935\u093f\u092d\u093f\u0928\u094d\u0928 \u092a\u094d\u0930\u0915\u093e\u0930\u094b\u0902 (<code>MessageUpdate</code>, <code>CallbackQueryUpdate</code>, \u0906\u0926\u093f) \u092e\u0947\u0902 \u092a\u094d\u0930\u0926\u093e\u0928 \u0915\u093f\u092f\u093e \u091c\u093e \u0938\u0915\u0924\u093e \u0939\u0948\u0964</p> <p>\u0907\u0938\u0932\u093f\u090f \u0906\u092a \u0906\u0928\u0947 \u0935\u093e\u0932\u0947 \u0921\u0947\u091f\u093e \u0915\u0947 \u092a\u094d\u0930\u0915\u093e\u0930 \u0915\u0940 \u091c\u093e\u0901\u091a \u0915\u0930 \u0938\u0915\u0924\u0947 \u0939\u0948\u0902 \u0914\u0930 \u0938\u094d\u092e\u093e\u0930\u094d\u091f\u0915\u093e\u0938\u094d\u091f \u0915\u0947 \u0938\u093e\u0925 \u0906\u0917\u0947 \u0935\u093f\u0936\u093f\u0937\u094d\u091f \u0921\u0947\u091f\u093e \u0915\u094b \u0938\u0902\u091a\u093e\u0932\u093f\u0924 \u0915\u0930 \u0938\u0915\u0924\u0947 \u0939\u0948\u0902, \u0909\u0926\u093e\u0939\u0930\u0923 \u0915\u0947 \u0932\u093f\u090f:</p> <pre><code>// ...\nif (update !is MessageUpdate) {\n    message { \"Only messages are allowed\" }.send(user, bot)\n    return\n}\n// \u0906\u0917\u0947, ProcessedUpdate \u0915\u094b MessageUpdate \u0915\u0947 \u0930\u0942\u092a \u092e\u0947\u0902 \u0926\u0947\u0916\u093e \u091c\u093e\u090f\u0917\u093e\u0964\n</code></pre> <p>\u0909\u0938\u0915\u0947 \u0905\u0902\u0926\u0930 \u090f\u0915 <code>UserReference</code> \u0907\u0902\u091f\u0930\u092b\u093c\u0947\u0938 \u092d\u0940 \u0939\u0948 \u091c\u094b \u0906\u092a\u0915\u094b \u092f\u0939 \u0928\u093f\u0930\u094d\u0927\u093e\u0930\u093f\u0924 \u0915\u0930\u0928\u0947 \u0926\u0947\u0924\u093e \u0939\u0948 \u0915\u093f \u0915\u094d\u092f\u093e \u0909\u0938\u0915\u0947 \u0905\u0902\u0926\u0930 \u0909\u092a\u092f\u094b\u0917\u0915\u0930\u094d\u0924\u093e \u0938\u0902\u0926\u0930\u094d\u092d \u0939\u0948, \u0909\u0926\u093e\u0939\u0930\u0923 \u0909\u092a\u092f\u094b\u0917 \u092e\u093e\u092e\u0932\u093e:</p> <pre><code>val user = if(update is UserReference) update.user else null\n</code></pre> <p>\u092f\u0926\u093f \u0906\u0935\u0936\u094d\u092f\u0915 \u0939\u094b \u0924\u094b \u0905\u092a\u0921\u0947\u091f \u092a\u0948\u0930\u093e\u092e\u0940\u091f\u0930 \u092e\u0947\u0902 \u0939\u092e\u0947\u0936\u093e \u092e\u0942\u0932 <code>update</code> \u0939\u094b\u0924\u093e \u0939\u0948\u0964</p>"},{"location":"hi/Useful-utilities-and-tips/#_1","title":"\u0928\u093f\u0930\u094d\u092d\u0930\u0924\u093e \u0907\u0902\u091c\u0947\u0915\u094d\u0936\u0928","text":"<p>\u0932\u093e\u0907\u092c\u094d\u0930\u0947\u0930\u0940 \u090f\u0915 \u0938\u0930\u0932 \u0924\u0902\u0924\u094d\u0930 \u0915\u093e \u0909\u092a\u092f\u094b\u0917 \u0915\u0930\u0924\u0940 \u0939\u0948 \u091c\u0939\u093e\u0901 \u0906\u092a\u0915\u0947 \u0905\u092a\u0921\u0947\u091f \u092a\u094d\u0930\u094b\u0938\u0947\u0938\u093f\u0902\u0917 \u0924\u0930\u0940\u0915\u094b\u0902 \u0915\u094b \u092a\u094d\u0930\u0926\u093e\u0928 \u0915\u093f\u090f \u0917\u090f \u090f\u0928\u094b\u091f\u0947\u0936\u0928 \u0915\u0947 \u0938\u093e\u0925 \u091a\u093f\u0939\u094d\u0928\u093f\u0924 \u0915\u093f\u092f\u093e \u091c\u093e\u0924\u093e \u0939\u0948\u0964</p> <p><code>ClassManagerImpl</code> \u0921\u093f\u092b\u093c\u0949\u0932\u094d\u091f \u0930\u0942\u092a \u0938\u0947 \u090f\u0928\u094b\u091f\u0947\u091f\u0947\u0921 \u0924\u0930\u0940\u0915\u094b\u0902 \u0915\u094b \u0906\u0939\u094d\u0935\u093e\u0928 \u0915\u0930\u0928\u0947 \u0915\u0947 \u0932\u093f\u090f \u0909\u092a\u092f\u094b\u0917 \u0915\u093f\u092f\u093e \u091c\u093e\u0924\u093e \u0939\u0948\u0964</p> <p>\u0932\u0947\u0915\u093f\u0928 \u092f\u0926\u093f \u0906\u092a \u0909\u0938\u0915\u0947 \u0932\u093f\u090f \u0915\u0941\u091b \u0905\u0928\u094d\u092f \u0932\u093e\u0907\u092c\u094d\u0930\u0947\u0930\u0940\u091c\u093c \u0915\u093e \u0909\u092a\u092f\u094b\u0917 \u0915\u0930\u0928\u093e \u091a\u093e\u0939\u0924\u0947 \u0939\u0948\u0902 \u0924\u094b \u0906\u092a <code>ClassManager</code> \u0907\u0902\u091f\u0930\u092b\u093c\u0947\u0938 \u0915\u094b \u092a\u0941\u0928: \u092a\u0930\u093f\u092d\u093e\u0937\u093f\u0924 \u0915\u0930 \u0938\u0915\u0924\u0947 \u0939\u0948\u0902, \u0905\u092a\u0928\u0940 \u092a\u0938\u0902\u0926\u0940\u0926\u093e \u0924\u0902\u0924\u094d\u0930 \u0915\u093e \u0909\u092a\u092f\u094b\u0917 \u0915\u0930\u0915\u0947 \u0914\u0930 \u092c\u0949\u091f \u0915\u094b \u092a\u094d\u0930\u093e\u0930\u0902\u092d \u0915\u0930\u0924\u0947 \u0938\u092e\u092f \u0907\u0938\u0947 \u092a\u093e\u0938 \u0915\u0930 \u0938\u0915\u0924\u0947 \u0939\u0948\u0902\u0964</p> <pre><code>fun main() = runBlocking {\n    val bot = TelegramBot(\"BOT_TOKEN\", \"com.example.controllers\") {\n        classManager = ClassManagerImpl()\n    }\n\n    bot.handleUpdates()\n}\n</code></pre>"},{"location":"hi/Useful-utilities-and-tips/#_2","title":"\u0905\u092a\u0921\u0947\u091f \u0915\u094b \u092b\u093c\u093f\u0932\u094d\u091f\u0930 \u0915\u0930\u0928\u093e","text":"<p>\u092f\u0926\u093f \u0915\u094b\u0908 \u091c\u091f\u093f\u0932 \u0938\u094d\u0925\u093f\u0924\u093f\u092f\u093e\u0901 \u0928\u0939\u0940\u0902 \u0939\u0948\u0902 \u0924\u094b \u0906\u092a \u0938\u093f\u0930\u094d\u092b\u093c \u0915\u0941\u091b \u0905\u092a\u0921\u0947\u091f \u0915\u094b \u092a\u094d\u0930\u094b\u0938\u0947\u0938 \u0915\u093f\u090f \u091c\u093e\u0928\u0947 \u0915\u0947 \u0932\u093f\u090f \u0938\u0930\u0932\u0924\u093e \u0938\u0947 \u092b\u093c\u093f\u0932\u094d\u091f\u0930 \u0915\u0930 \u0938\u0915\u0924\u0947 \u0939\u0948\u0902:</p> <pre><code>// \u0905\u092a\u0921\u0947\u091f \u092b\u093c\u093f\u0932\u094d\u091f\u0930\u093f\u0902\u0917 \u0938\u094d\u0925\u093f\u0924\u093f \u0915\u094b \u092a\u0930\u093f\u092d\u093e\u0937\u093f\u0924 \u0915\u0930\u0928\u0947 \u0935\u093e\u0932\u093e \u092b\u093c\u0902\u0915\u094d\u0936\u0928\nfun filteringFun(update: Update): Boolean = update.message?.text.isNullOrBlank()\n\nfun main() = runBlocking {\n  val bot = TelegramBot(\"BOT_TOKEN\")\n\n  // \u0905\u092a\u0921\u0947\u091f \u0915\u0947 \u0932\u093f\u090f \u0905\u0927\u093f\u0915 \u0935\u093f\u0936\u093f\u0937\u094d\u091f \u092a\u094d\u0930\u094b\u0938\u0947\u0938\u093f\u0902\u0917 \u092a\u094d\u0930\u0935\u093e\u0939 \u0938\u0947\u091f \u0915\u0930\u0928\u093e\n  bot.update.setListener {\n    if(filteringFun(it)) return@setListener\n\n    // \u0907\u0938\u0932\u093f\u090f \u0938\u0930\u0932\u0924\u093e \u0938\u0947, \u092f\u0926\u093f \u0932\u093f\u0938\u0928\u0930 \u0939\u0948\u0902\u0921\u0932\u0930 \u092b\u093c\u0902\u0915\u094d\u0936\u0928 \u0924\u0915 \u092a\u0939\u0941\u0901\u091a\u0928\u0947 \u0938\u0947 \u092a\u0939\u0932\u0947 \u0938\u094d\u0915\u094b\u092a \u0938\u0947 \u092c\u093e\u0939\u0930 \u0928\u093f\u0915\u0932 \u091c\u093e\u0924\u093e \u0939\u0948, \u0924\u094b \u0935\u0939 \u092b\u093c\u093f\u0932\u094d\u091f\u0930\u093f\u0902\u0917 \u0915\u0930 \u0930\u0939\u093e \u0939\u0948\u0964\n    // \u0935\u093e\u0938\u094d\u0924\u0935 \u092e\u0947\u0902 \u0906\u092a \u0935\u0939\u093e\u0901 \u0938\u0940\u0927\u0947 \u092f\u0926\u093f-\u0938\u094d\u0925\u093f\u0924\u093f \u0932\u093f\u0916 \u0938\u0915\u0924\u0947 \u0939\u0948\u0902 return@setListener \u0915\u0947 \u0938\u093e\u0925 \u092f\u093e \u092b\u093c\u093f\u0932\u094d\u091f\u0930\u093f\u0902\u0917 \u0915\u094b \u0905\u0932\u0917 \u0915\u094d\u0932\u093e\u0938 \u092e\u0947\u0902 \u0935\u093f\u0938\u094d\u0924\u093e\u0930\u093f\u0924 \u0915\u0930 \u0938\u0915\u0924\u0947 \u0939\u0948\u0902\u0964\n\n    handle(it) // \u092f\u093e \u092c\u094d\u0932\u0949\u0915 \u0915\u0947 \u0938\u093e\u0925 \u092e\u0948\u0928\u0941\u0905\u0932 \u0939\u0948\u0902\u0921\u0932\u093f\u0902\u0917 \u0924\u0930\u0940\u0915\u093e\n  }\n}\n</code></pre> <p>\u0905\u092a\u0928\u0947 \u0915\u092e\u093e\u0902\u0921 \u092e\u093f\u0932\u093e\u0928 \u092f\u093e \u092c\u0939\u093f\u0937\u094d\u0915\u0930\u0923 \u092a\u094d\u0930\u0915\u094d\u0930\u093f\u092f\u093e \u092e\u0947\u0902 \u092b\u093c\u093f\u0932\u094d\u091f\u0930\u093f\u0902\u0917 \u0915\u094b \u0936\u093e\u092e\u093f\u0932 \u0915\u0930\u0928\u0947 \u0915\u0947 \u0932\u093f\u090f \u0917\u093e\u0930\u094d\u0921 \u092f\u093e <code>@CommonHandler</code> \u0926\u0947\u0916\u0947\u0902\u0964</p>"},{"location":"hi/Useful-utilities-and-tips/#_3","title":"\u0935\u093f\u092d\u093f\u0928\u094d\u0928 \u0924\u0930\u0940\u0915\u094b\u0902 \u0915\u0947 \u0932\u093f\u090f \u0935\u093f\u0915\u0932\u094d\u092a\u094b\u0902 \u0915\u094b \u0938\u093e\u092e\u093e\u0928\u094d\u092f\u0940\u0915\u0943\u0924 \u0915\u0930\u0928\u093e","text":"<p>\u092f\u0926\u093f \u0906\u092a\u0915\u094b \u0905\u0915\u094d\u0938\u0930 \u0938\u092e\u093e\u0928 \u0935\u0948\u0915\u0932\u094d\u092a\u093f\u0915 \u092a\u0948\u0930\u093e\u092e\u0940\u091f\u0930 \u0932\u093e\u0917\u0942 \u0915\u0930\u0928\u0947 \u0939\u094b\u0924\u0947 \u0939\u0948\u0902, \u0924\u094b \u0906\u092a \u0905\u092a\u0928\u0947 \u0932\u093f\u090f \u0909\u092a\u092f\u0941\u0915\u094d\u0924 \u0938\u092e\u093e\u0928 \u092b\u093c\u0902\u0915\u094d\u0936\u0928 \u0932\u093f\u0916 \u0938\u0915\u0924\u0947 \u0939\u0948\u0902 \u0914\u0930 \u092c\u0949\u092f\u0932\u0930\u092a\u094d\u0932\u0947\u091f \u0915\u094b\u0921 \u0915\u094b \u0939\u0932\u094d\u0915\u093e \u0915\u0930 \u0938\u0915\u0924\u0947 \u0939\u0948\u0902 :)</p> <p>\u0915\u0941\u091b \u0938\u093e\u092e\u093e\u0928\u094d\u092f \u0917\u0941\u0923\u094b\u0902 \u0915\u094b \u0935\u093f\u092d\u093f\u0928\u094d\u0928 \u0907\u0902\u091f\u0930\u092b\u093c\u0947\u0938 \u092e\u0947\u0902 \u0905\u0932\u0917 \u0915\u093f\u092f\u093e \u0917\u092f\u093e \u0939\u0948\u0964</p> <pre><code>@Suppress(\"NOTHING_TO_INLINE\")\ninline fun &lt;T, R, O&gt; T.markdownMode(crossinline block: O.() -&gt; Unit = {}): T\n        where               T : TgAction&lt;R&gt;,\n                            T : OptionsFeature&lt;T, O&gt;,\n                            O : Options,\n                            O : OptionsParseMode =\n    options {\n        parseMode = ParseMode.Markdown\n        block()\n    }\n\n\n// ... \u0914\u0930 \u0906\u092a\u0915\u0947 \u0915\u094b\u0921 \u092e\u0947\u0902\n\nmessage { \"test\" }.markdownMode().send(to, via)\n</code></pre>"},{"location":"hi/Web-starters-%28Spring-and-Ktor%29/#spring-starter","title":"Spring starter","text":"<p>\u0932\u093e\u0907\u092c\u094d\u0930\u0947\u0930\u0940 \u0915\u0947 \u0932\u093f\u090f Spring Starter \u092e\u0949\u0921\u094d\u092f\u0942\u0932 \u090f\u0915 \u0911\u091f\u094b-\u0915\u0949\u0928\u094d\u092b\u093c\u093f\u0917\u0930\u0947\u0936\u0928 \u092e\u0949\u0921\u094d\u092f\u0942\u0932 \u0939\u0948 \u091c\u094b Spring Boot \u090f\u092a\u094d\u0932\u093f\u0915\u0947\u0936\u0928 \u092e\u0947\u0902 Telegram \u092c\u0949\u091f \u0915\u093e\u0930\u094d\u092f\u0915\u094d\u0937\u092e\u0924\u093e\u0913\u0902 \u0915\u094b \u090f\u0915\u0940\u0915\u0943\u0924 \u0915\u0930\u0924\u093e \u0939\u0948\u0964 \u092f\u0939 Spring Boot \u0915\u0947 \u0928\u093f\u0930\u094d\u092d\u0930\u0924\u093e \u0907\u0902\u091c\u0947\u0915\u094d\u0936\u0928 \u0914\u0930 \u0915\u0949\u0928\u094d\u092b\u093c\u093f\u0917\u0930\u0947\u0936\u0928 \u0917\u0941\u0923\u094b\u0902 \u0915\u0940 \u0936\u0915\u094d\u0924\u093f \u0915\u093e \u0932\u093e\u092d \u0909\u0920\u093e\u0924\u093e \u0939\u0948 \u0924\u093e\u0915\u093f \u092a\u094d\u0930\u0926\u093e\u0928 \u0915\u093f\u090f \u0917\u090f \u0915\u0949\u0928\u094d\u092b\u093c\u093f\u0917\u0930\u0947\u0936\u0928 \u0915\u0947 \u0906\u0927\u093e\u0930 \u092a\u0930 \u0938\u094d\u0935\u091a\u093e\u0932\u093f\u0924 \u0930\u0942\u092a \u0938\u0947 Telegram \u092c\u0949\u091f\u094d\u0938 \u0915\u094b \u0915\u0949\u0928\u094d\u092b\u093c\u093f\u0917\u0930 \u0915\u093f\u092f\u093e \u091c\u093e \u0938\u0915\u0947\u0964 \u092f\u0939 \u0932\u093e\u0907\u092c\u094d\u0930\u0947\u0930\u0940 \u0935\u093f\u0936\u0947\u0937 \u0930\u0942\u092a \u0938\u0947 Kotlin \u0914\u0930 Spring Boot \u0915\u093e \u0909\u092a\u092f\u094b\u0917 \u0915\u0930\u0915\u0947 Telegram \u092c\u0949\u091f\u094d\u0938 \u092c\u0928\u093e\u0928\u0947 \u0915\u0940 \u0924\u0932\u093e\u0936 \u0915\u0930 \u0930\u0939\u0947 \u0921\u0947\u0935\u0932\u092a\u0930\u094d\u0938 \u0915\u0947 \u0932\u093f\u090f \u0909\u092a\u092f\u094b\u0917\u0940 \u0939\u0948, \u092c\u0949\u091f \u0935\u093f\u0915\u093e\u0938 \u0914\u0930 \u092a\u094d\u0930\u092c\u0902\u0927\u0928 \u0915\u0947 \u0932\u093f\u090f \u090f\u0915 \u0938\u0941\u0935\u094d\u092f\u0935\u0938\u094d\u0925\u093f\u0924 \u0926\u0943\u0937\u094d\u091f\u093f\u0915\u094b\u0923 \u092a\u094d\u0930\u0926\u093e\u0928 \u0915\u0930\u0924\u093e \u0939\u0948\u0964</p>"},{"location":"hi/Web-starters-%28Spring-and-Ktor%29/#_1","title":"\u092a\u094d\u0930\u092e\u0941\u0916 \u0935\u093f\u0936\u0947\u0937\u0924\u093e\u090f\u0901","text":"<ul> <li>\u0911\u091f\u094b-\u0915\u0949\u0928\u094d\u092b\u093c\u093f\u0917\u0930\u0947\u0936\u0928: \u0932\u093e\u0907\u092c\u094d\u0930\u0947\u0930\u0940 \u0938\u094d\u0935\u091a\u093e\u0932\u093f\u0924 \u0930\u0942\u092a \u0938\u0947 \u092a\u094d\u0930\u0926\u093e\u0928 \u0915\u093f\u090f \u0917\u090f \u0915\u0949\u0928\u094d\u092b\u093c\u093f\u0917\u0930\u0947\u0936\u0928 \u0917\u0941\u0923\u094b\u0902 \u0915\u0947 \u0906\u0927\u093e\u0930 \u092a\u0930 Telegram \u092c\u0949\u091f\u094d\u0938 \u0915\u094b \u0915\u0949\u0928\u094d\u092b\u093c\u093f\u0917\u0930 \u0915\u0930\u0924\u0940 \u0939\u0948, \u092e\u0948\u0928\u0941\u0905\u0932 \u0938\u0947\u091f\u0905\u092a \u0915\u0940 \u0906\u0935\u0936\u094d\u092f\u0915\u0924\u093e \u0915\u094b \u0938\u092e\u093e\u092a\u094d\u0924 \u0915\u0930\u0924\u0940 \u0939\u0948\u0964</li> <li>\u0915\u0949\u0928\u094d\u092b\u093c\u093f\u0917\u0930\u0947\u0936\u0928 \u0917\u0941\u0923: \u092f\u0939 \u092c\u0949\u091f \u0938\u0947\u091f\u093f\u0902\u0917\u094d\u0938 \u0915\u0947 \u0906\u0938\u093e\u0928 \u0905\u0928\u0941\u0915\u0942\u0932\u0928 \u0915\u0947 \u0932\u093f\u090f \u0915\u0949\u0928\u094d\u092b\u093c\u093f\u0917\u0930\u0947\u0936\u0928 \u0917\u0941\u0923\u094b\u0902 \u0915\u093e \u0938\u092e\u0930\u094d\u0925\u0928 \u0915\u0930\u0924\u093e \u0939\u0948, \u091c\u0948\u0938\u0947 \u092c\u0949\u091f \u091f\u094b\u0915\u0928, \u092a\u0948\u0915\u0947\u091c \u0928\u093e\u092e \u0914\u0930 \u092a\u0939\u091a\u093e\u0928\u0915\u0930\u094d\u0924\u093e\u0964</li> <li>Spring \u090f\u0915\u0940\u0915\u0930\u0923: Spring \u0907\u0915\u094b\u0938\u093f\u0938\u094d\u091f\u092e \u0915\u0947 \u0938\u093e\u0925 \u0938\u0939\u091c\u0924\u093e \u0938\u0947 \u090f\u0915\u0940\u0915\u0943\u0924 \u0939\u094b\u0924\u093e \u0939\u0948, \u092c\u0949\u091f \u0909\u0926\u093e\u0939\u0930\u0923\u094b\u0902 \u0915\u0947 \u092a\u094d\u0930\u092c\u0902\u0927\u0928 \u0915\u0947 \u0932\u093f\u090f Spring \u0915\u0947 \u0928\u093f\u0930\u094d\u092d\u0930\u0924\u093e \u0907\u0902\u091c\u0947\u0915\u094d\u0936\u0928 \u0914\u0930 \u090f\u092a\u094d\u0932\u093f\u0915\u0947\u0936\u0928 \u0938\u0902\u0926\u0930\u094d\u092d \u0915\u093e \u0909\u092a\u092f\u094b\u0917 \u0915\u0930\u0924\u093e \u0939\u0948\u0964</li> <li>\u0915\u094b\u0930\u0941\u091f\u0940\u0928 \u0938\u092e\u0930\u094d\u0925\u0928: \u0905\u0924\u0941\u0932\u094d\u092f\u0915\u093e\u0932\u093f\u0915 \u092c\u0949\u091f \u0938\u0902\u091a\u093e\u0932\u0928 \u0915\u0947 \u0932\u093f\u090f Kotlin \u0915\u094b\u0930\u0941\u091f\u0940\u0928 \u0915\u093e \u0932\u093e\u092d \u0909\u0920\u093e\u0924\u093e \u0939\u0948, \u0915\u0941\u0936\u0932 \u0914\u0930 \u0917\u0948\u0930-\u0905\u0935\u0930\u094b\u0927\u0915 \u0928\u093f\u0937\u094d\u092a\u093e\u0926\u0928 \u0938\u0941\u0928\u093f\u0936\u094d\u091a\u093f\u0924 \u0915\u0930\u0924\u093e \u0939\u0948\u0964</li> </ul>"},{"location":"hi/Web-starters-%28Spring-and-Ktor%29/#_2","title":"\u0906\u0930\u0902\u092d \u0915\u0930\u0928\u093e","text":"<p>Spring Starter \u0932\u093e\u0907\u092c\u094d\u0930\u0947\u0930\u0940 \u0915\u093e \u0909\u092a\u092f\u094b\u0917 \u0915\u0930\u0928\u0947 \u0915\u0947 \u0932\u093f\u090f, \u0906\u092a\u0915\u094b \u0907\u0938\u0947 \u0905\u092a\u0928\u0947 Spring Boot \u092a\u094d\u0930\u094b\u091c\u0947\u0915\u094d\u091f \u092e\u0947\u0902 \u0928\u093f\u0930\u094d\u092d\u0930\u0924\u093e \u0915\u0947 \u0930\u0942\u092a \u092e\u0947\u0902 \u0936\u093e\u092e\u093f\u0932 \u0915\u0930\u0928\u093e \u0939\u094b\u0917\u093e\u0964 \u0932\u093e\u0907\u092c\u094d\u0930\u0947\u0930\u0940 Spring Boot \u090f\u092a\u094d\u0932\u093f\u0915\u0947\u0936\u0928 \u0915\u0947 \u0938\u093e\u0925 \u0915\u093e\u092e \u0915\u0930\u0928\u0947 \u0915\u0947 \u0932\u093f\u090f \u0921\u093f\u091c\u093c\u093e\u0907\u0928 \u0915\u0940 \u0917\u0908 \u0939\u0948 \u0914\u0930 \u0915\u093e\u0930\u094d\u092f \u0915\u0930\u0928\u0947 \u0915\u0947 \u0932\u093f\u090f Spring Boot \u092b\u094d\u0930\u0947\u092e\u0935\u0930\u094d\u0915 \u0915\u0940 \u0906\u0935\u0936\u094d\u092f\u0915\u0924\u093e \u0939\u094b\u0924\u0940 \u0939\u0948\u0964</p>"},{"location":"hi/Web-starters-%28Spring-and-Ktor%29/#_3","title":"\u0928\u093f\u0930\u094d\u092d\u0930\u0924\u093e","text":"<p>\u0905\u092a\u0928\u0947 <code>build.gradle</code> \u092f\u093e <code>pom.xml</code> \u092b\u093c\u093e\u0907\u0932 \u092e\u0947\u0902 \u0928\u093f\u092e\u094d\u0928\u0932\u093f\u0916\u093f\u0924 \u0928\u093f\u0930\u094d\u092d\u0930\u0924\u093e \u091c\u094b\u0921\u093c\u0947\u0902:</p> <pre><code>dependencies {\n    implementation 'eu.vendeli:spring-starter:&lt;version&gt;'\n}\n</code></pre> <p><code>&lt;version&gt;</code> \u0915\u094b \u0932\u093e\u0907\u092c\u094d\u0930\u0947\u0930\u0940 \u0915\u0947 \u0928\u0935\u0940\u0928\u0924\u092e \u0938\u0902\u0938\u094d\u0915\u0930\u0923 \u0938\u0947 \u092c\u0926\u0932\u0947\u0902\u0964</p>"},{"location":"hi/Web-starters-%28Spring-and-Ktor%29/#_4","title":"\u0915\u0949\u0928\u094d\u092b\u093c\u093f\u0917\u0930\u0947\u0936\u0928","text":"<p>\u0932\u093e\u0907\u092c\u094d\u0930\u0947\u0930\u0940 Spring Boot \u0915\u0947 <code>@ConfigurationProperties</code> \u0915\u093e \u0909\u092a\u092f\u094b\u0917 \u0915\u0930\u0915\u0947 \u0915\u0949\u0928\u094d\u092b\u093c\u093f\u0917\u0930\u0947\u0936\u0928 \u0917\u0941\u0923\u094b\u0902 \u0915\u094b \u092c\u093e\u0927\u094d\u092f \u0915\u0930\u0924\u0940 \u0939\u0948\u0964 \u0906\u092a \u0905\u092a\u0928\u0947 Spring Boot \u090f\u092a\u094d\u0932\u093f\u0915\u0947\u0936\u0928 \u0915\u0947 <code>application.properties</code> \u092f\u093e <code>application.yml</code> \u092b\u093c\u093e\u0907\u0932 \u092e\u0947\u0902 \u0905\u092a\u0928\u0940 \u092c\u0949\u091f \u0915\u0949\u0928\u094d\u092b\u093c\u093f\u0917\u0930\u0947\u0936\u0928 \u0915\u094b \u092a\u0930\u093f\u092d\u093e\u0937\u093f\u0924 \u0915\u0930 \u0938\u0915\u0924\u0947 \u0939\u0948\u0902\u0964</p> <pre><code>ktgram:\n autoStartPolling: true\n shareHttpClient: true\n bot:\n    - token: YOUR_BOT_TOKEN\n      pckg: com.example.bot\n      identifier: MyBot\n</code></pre>"},{"location":"hi/Web-starters-%28Spring-and-Ktor%29/#_5","title":"\u0909\u092a\u092f\u094b\u0917","text":"<p>\u090f\u0915 \u092c\u093e\u0930 \u0932\u093e\u0907\u092c\u094d\u0930\u0947\u0930\u0940 \u0936\u093e\u092e\u093f\u0932 \u0914\u0930 \u0915\u0949\u0928\u094d\u092b\u093c\u093f\u0917\u0930 \u0939\u094b \u091c\u093e\u0928\u0947 \u0915\u0947 \u092c\u093e\u0926, \u092f\u0939 \u092a\u094d\u0930\u0926\u093e\u0928 \u0915\u093f\u090f \u0917\u090f \u0915\u0949\u0928\u094d\u092b\u093c\u093f\u0917\u0930\u0947\u0936\u0928 \u0915\u0947 \u0906\u0927\u093e\u0930 \u092a\u0930 \u0938\u094d\u0935\u091a\u093e\u0932\u093f\u0924 \u0930\u0942\u092a \u0938\u0947 Telegram \u092c\u0949\u091f \u0909\u0926\u093e\u0939\u0930\u0923 \u092c\u0928\u093e\u0924\u093e \u0914\u0930 \u0915\u0949\u0928\u094d\u092b\u093c\u093f\u0917\u0930 \u0915\u0930\u0924\u093e \u0939\u0948\u0964</p> <p>\u092f\u0939 \u0915\u0908 \u092c\u0949\u091f \u0909\u0926\u093e\u0939\u0930\u0923\u094b\u0902 \u0915\u093e \u092d\u0940 \u0938\u092e\u0930\u094d\u0925\u0928 \u0915\u0930\u0924\u093e \u0939\u0948, \u0915\u0908 \u0915\u094b \u092a\u094d\u0930\u093e\u0930\u0902\u092d \u0915\u0930\u0928\u0947 \u0915\u0947 \u0932\u093f\u090f \u092c\u0938 \u092c\u0949\u091f \u0905\u0928\u0941\u092d\u093e\u0917 \u092e\u0947\u0902 \u0907\u0938\u0947 \u0928\u090f \u092a\u094d\u0930\u0935\u093f\u0937\u094d\u091f\u093f \u0915\u0947 \u0930\u0942\u092a \u092e\u0947\u0902 \u0918\u094b\u0937\u093f\u0924 \u0915\u0930\u0947\u0902:</p> <pre><code>ktgram:\n bot:\n    - token: YOUR_BOT_TOKEN\n    - token: SECOND_BOT_TOKEN\n</code></pre>"},{"location":"hi/Web-starters-%28Spring-and-Ktor%29/#_6","title":"\u0909\u0928\u094d\u0928\u0924 \u0915\u0949\u0928\u094d\u092b\u093c\u093f\u0917\u0930\u0947\u0936\u0928","text":"<p>\u0905\u0927\u093f\u0915 \u0909\u0928\u094d\u0928\u0924 \u0915\u0949\u0928\u094d\u092b\u093c\u093f\u0917\u0930\u0947\u0936\u0928 \u0915\u0947 \u0932\u093f\u090f, \u091c\u0948\u0938\u0947 \u092c\u0949\u091f \u0935\u094d\u092f\u0935\u0939\u093e\u0930 \u0915\u094b \u0905\u0928\u0941\u0915\u0942\u0932\u093f\u0924 \u0915\u0930\u0928\u093e \u092f\u093e \u0905\u0928\u094d\u092f Spring \u0918\u091f\u0915\u094b\u0902 \u0915\u0947 \u0938\u093e\u0925 \u090f\u0915\u0940\u0915\u0930\u0923, \u0906\u092a <code>BotConfiguration</code> \u0915\u0915\u094d\u0937\u093e \u0915\u093e \u0935\u093f\u0938\u094d\u0924\u093e\u0930 \u0915\u0930 \u0938\u0915\u0924\u0947 \u0939\u0948\u0902 \u0914\u0930 \u0907\u0938\u0915\u0947 <code>applyCfg</code> \u0935\u093f\u0927\u093f \u0915\u0947 \u092e\u093e\u0927\u094d\u092f\u092e \u0938\u0947 \u092c\u0949\u091f \u0915\u0949\u0928\u094d\u092b\u093c\u093f\u0917\u0930\u0947\u0936\u0928 \u0915\u094b \u092c\u0926\u0932 \u0938\u0915\u0924\u0947 \u0939\u0948\u0902, \u0906\u092a \u0935\u0939\u093e\u0902 \u0909\u0926\u093e\u0939\u0930\u0923 \u0926\u0947\u0916 \u0938\u0915\u0924\u0947 \u0939\u0948\u0902\u0964</p> <p>Tip</p> <p>\u092a\u094d\u0930\u0924\u094d\u092f\u0947\u0915 \u092a\u094d\u0930\u093e\u0930\u0902\u092d\u093f\u0924 \u0909\u0926\u093e\u0939\u0930\u0923 \u0915\u094b \u0915\u0938\u094d\u091f\u092e \u0915\u0949\u0928\u094d\u092b\u093c\u093f\u0917\u0930\u0947\u0936\u0928 \u0915\u0947 \u0938\u093e\u0925 \u0915\u0949\u0928\u094d\u092b\u093c\u093f\u0917\u0930 \u0915\u0930\u0928\u0947 \u0915\u0947 \u0932\u093f\u090f, \u0909\u0928\u094d\u0939\u0947\u0902 \u0909\u0928\u0915\u0940 \u092a\u0939\u091a\u093e\u0928\u0915\u0930\u094d\u0924\u093e \u0926\u094d\u0935\u093e\u0930\u093e \u0905\u0932\u0917 \u0915\u0930\u0947\u0902 (BotConfiguration \u0915\u0915\u094d\u0937\u093e \u092e\u0947\u0902 \u092d\u0940 \u090f\u0915 \u092a\u0939\u091a\u093e\u0928\u0915\u0930\u094d\u0924\u093e \u0939\u0948)\u0964</p>"},{"location":"hi/Web-starters-%28Spring-and-Ktor%29/#ktor","title":"Ktor","text":"<p>\u092f\u0939 \u092e\u0949\u0921\u094d\u092f\u0942\u0932 Telegram \u092c\u0949\u091f\u094d\u0938 \u0915\u0947 \u0932\u093f\u090f \u090f\u0915 webhook \u0938\u0930\u094d\u0935\u0930 \u092c\u0928\u093e\u0928\u0947 \u0915\u0940 \u0938\u0941\u0935\u093f\u0927\u093e \u092a\u094d\u0930\u0926\u093e\u0928 \u0915\u0930\u0928\u0947 \u0915\u0947 \u0932\u093f\u090f \u0921\u093f\u091c\u093c\u093e\u0907\u0928 \u0915\u093f\u092f\u093e \u0917\u092f\u093e \u0939\u0948\u0964 \u092f\u0939 \u0921\u0947\u0935\u0932\u092a\u0930\u094d\u0938 \u0915\u094b \u0938\u0930\u094d\u0935\u0930 \u0915\u094b \u0915\u0949\u0928\u094d\u092b\u093c\u093f\u0917\u0930 \u0915\u0930\u0928\u0947 \u0915\u0940 \u0905\u0928\u0941\u092e\u0924\u093f \u0926\u0947\u0924\u093e \u0939\u0948, \u091c\u093f\u0938\u092e\u0947\u0902 SSL/TLS \u0938\u0947\u091f\u093f\u0902\u0917\u094d\u0938 \u0936\u093e\u092e\u093f\u0932 \u0939\u0948\u0902, \u0914\u0930 \u0915\u0938\u094d\u091f\u092e \u0915\u0949\u0928\u094d\u092b\u093c\u093f\u0917\u0930\u0947\u0936\u0928 \u0915\u0947 \u0938\u093e\u0925 \u0915\u0908 Telegram \u092c\u0949\u091f\u094d\u0938 \u0918\u094b\u0937\u093f\u0924 \u0915\u0930\u0924\u093e \u0939\u0948\u0964 \u0938\u0947\u091f\u0905\u092a \u092a\u094d\u0930\u0915\u094d\u0930\u093f\u092f\u093e \u0932\u091a\u0940\u0932\u0940 \u0939\u0948, \u091c\u093f\u0938\u0938\u0947 \u0921\u0947\u0935\u0932\u092a\u0930\u094d\u0938 \u0938\u0930\u094d\u0935\u0930 \u0915\u094b \u0905\u092a\u0928\u0940 \u0935\u093f\u0936\u093f\u0937\u094d\u091f \u0906\u0935\u0936\u094d\u092f\u0915\u0924\u093e\u0913\u0902 \u0915\u0947 \u0905\u0928\u0941\u0938\u093e\u0930 \u0905\u0928\u0941\u0915\u0942\u0932\u093f\u0924 \u0915\u0930 \u0938\u0915\u0924\u0947 \u0939\u0948\u0902\u0964</p>"},{"location":"hi/Web-starters-%28Spring-and-Ktor%29/#_7","title":"\u0938\u094d\u0925\u093e\u092a\u0928\u093e","text":"<p>ktor starter \u0938\u094d\u0925\u093e\u092a\u093f\u0924 \u0915\u0930\u0928\u0947 \u0915\u0947 \u0932\u093f\u090f \u092e\u0941\u0916\u094d\u092f \u0928\u093f\u0930\u094d\u092d\u0930\u0924\u093e \u092e\u0947\u0902 \u0905\u0924\u093f\u0930\u093f\u0915\u094d\u0924 \u091c\u094b\u0921\u093c\u0947\u0902:</p> <pre><code>dependencies {\n    implementation(\"eu.vendeli:ktor-starter:x.y.z\") // there\n    // change x.y.z to current library version\n}\n</code></pre>"},{"location":"hi/Web-starters-%28Spring-and-Ktor%29/#_8","title":"\u092a\u094d\u0930\u092e\u0941\u0916 \u0918\u091f\u0915","text":"<p><code>serveWebhook</code> \u092b\u093c\u0902\u0915\u094d\u0936\u0928</p> <p>serveWebhook \u092b\u093c\u0902\u0915\u094d\u0936\u0928 \u0932\u093e\u0907\u092c\u094d\u0930\u0947\u0930\u0940 \u0915\u093e \u092e\u0942\u0932 \u0939\u0948\u0964 \u092f\u0939 Telegram \u092c\u0949\u091f\u094d\u0938 \u0915\u0947 \u0932\u093f\u090f webhook \u0938\u0930\u094d\u0935\u0930 \u0915\u094b \u0938\u0947\u091f\u0905\u092a \u0914\u0930 \u0938\u094d\u091f\u093e\u0930\u094d\u091f \u0915\u0930\u0924\u093e \u0939\u0948\u0964 \u092f\u0939 \u0926\u094b \u092a\u0948\u0930\u093e\u092e\u0940\u091f\u0930 \u0938\u094d\u0935\u0940\u0915\u093e\u0930 \u0915\u0930\u0924\u093e \u0939\u0948:</p> <ul> <li><code>wait</code>: \u090f\u0915 \u092c\u0942\u0932\u093f\u092f\u0928 \u091c\u094b \u0907\u0902\u0917\u093f\u0924 \u0915\u0930\u0924\u093e \u0939\u0948 \u0915\u093f \u0915\u094d\u092f\u093e \u0938\u0930\u094d\u0935\u0930 \u0915\u094b \u092c\u0902\u0926 \u0939\u094b\u0928\u0947 \u0938\u0947 \u092a\u0939\u0932\u0947 \u090f\u092a\u094d\u0932\u093f\u0915\u0947\u0936\u0928 \u0915\u0947 \u0930\u0941\u0915\u0928\u0947 \u0915\u0940 \u092a\u094d\u0930\u0924\u0940\u0915\u094d\u0937\u093e \u0915\u0930\u0928\u0940 \u091a\u093e\u0939\u093f\u090f\u0964 \u0921\u093f\u092b\u093c\u0949\u0932\u094d\u091f \u0930\u0942\u092a \u0938\u0947 \u0938\u0924\u094d\u092f\u0964</li> <li><code>serverBuilder</code>: \u0938\u0930\u094d\u0935\u0930 \u0915\u094b \u0915\u0949\u0928\u094d\u092b\u093c\u093f\u0917\u0930 \u0915\u0930\u0928\u0947 \u0935\u093e\u0932\u093e \u090f\u0915 \u0932\u0948\u092e\u094d\u092c\u094d\u0921\u093e \u092b\u093c\u0902\u0915\u094d\u0936\u0928\u0964 \u0921\u093f\u092b\u093c\u0949\u0932\u094d\u091f \u0930\u0942\u092a \u0938\u0947 \u090f\u0915 \u0916\u093e\u0932\u0940 \u0932\u0948\u092e\u094d\u092c\u094d\u0921\u093e\u0964</li> </ul>"},{"location":"hi/Web-starters-%28Spring-and-Ktor%29/#_9","title":"\u0915\u0949\u0928\u094d\u092b\u093c\u093f\u0917\u0930\u0947\u0936\u0928","text":"<ul> <li><code>WEBHOOK_PREFIX</code>: \u092f\u0939 \u092a\u0948\u0930\u093e\u092e\u0940\u091f\u0930 webhook \u0932\u093f\u0938\u0928\u0930 \u0930\u0942\u091f \u0915\u0947 \u0932\u093f\u090f \u092a\u0924\u0947 \u0915\u0947 \u0909\u092a\u0938\u0930\u094d\u0917 \u0915\u0947 \u0930\u0942\u092a \u092e\u0947\u0902 \u0909\u092a\u092f\u094b\u0917 \u0915\u093f\u092f\u093e \u091c\u093e\u090f\u0917\u093e\u0964 (\u0921\u093f\u092b\u093c\u0949\u0932\u094d\u091f \u0930\u0942\u092a \u0938\u0947 \"/\" \u0939\u0948)</li> </ul>"},{"location":"hi/Web-starters-%28Spring-and-Ktor%29/#_10","title":"\u0938\u0930\u094d\u0935\u0930 \u0938\u0947\u091f\u0905\u092a","text":"<ul> <li><code>server</code>: EnvConfiguration \u092f\u093e ManualConfiguration \u0915\u093e \u0909\u092a\u092f\u094b\u0917 \u0915\u0930\u0915\u0947 \u0938\u0930\u094d\u0935\u0930 \u0915\u0949\u0928\u094d\u092b\u093c\u093f\u0917\u0930\u0947\u0936\u0928 \u0938\u0947\u091f \u0915\u0930\u0928\u0947 \u0915\u0940 \u090f\u0915 \u0935\u093f\u0927\u093f\u0964</li> <li><code>engine</code>: Netty \u090f\u092a\u094d\u0932\u093f\u0915\u0947\u0936\u0928 \u0907\u0902\u091c\u0928 \u0915\u094b \u0915\u0949\u0928\u094d\u092b\u093c\u093f\u0917\u0930 \u0915\u0930\u0928\u0947 \u0915\u0940 \u090f\u0915 \u0935\u093f\u0927\u093f\u0964</li> <li><code>ktorModule</code>: \u090f\u092a\u094d\u0932\u093f\u0915\u0947\u0936\u0928 \u092e\u0947\u0902 Ktor \u092e\u0949\u0921\u094d\u092f\u0942\u0932 \u091c\u094b\u0921\u093c\u0928\u0947 \u0915\u0940 \u090f\u0915 \u0935\u093f\u0927\u093f\u0964</li> </ul> <p>\u0932\u093e\u0907\u092c\u094d\u0930\u0947\u0930\u0940 \u0938\u0930\u094d\u0935\u0930 \u0915\u0947 \u0932\u093f\u090f \u0915\u0949\u0928\u094d\u092b\u093c\u093f\u0917\u0930 \u0915\u0930\u0928\u0947 \u092f\u094b\u0917\u094d\u092f \u092a\u0948\u0930\u093e\u092e\u0940\u091f\u0930 \u0915\u0940 \u090f\u0915 \u0935\u093f\u0938\u094d\u0924\u0943\u0924 \u0936\u094d\u0930\u0943\u0902\u0916\u0932\u093e \u092a\u094d\u0930\u0926\u093e\u0928 \u0915\u0930\u0924\u0940 \u0939\u0948, \u091c\u093f\u0938\u092e\u0947\u0902 \u0939\u094b\u0938\u094d\u091f, \u092a\u094b\u0930\u094d\u091f, SSL \u0938\u0947\u091f\u093f\u0902\u0917\u094d\u0938 \u0914\u0930 \u092c\u0939\u0941\u0924 \u0915\u0941\u091b \u0936\u093e\u092e\u093f\u0932 \u0939\u0948\u0902\u0964 \u0907\u0938\u0915\u0947 \u0915\u0949\u0928\u094d\u092b\u093c\u093f\u0917\u0930 \u0915\u0930\u0928\u0947 \u0915\u0947 \u0932\u093f\u090f \u0926\u094b \u0920\u094b\u0938 \u0935\u093f\u0915\u0932\u094d\u092a \u0939\u0948\u0902:</p> <ul> <li><code>EnvConfiguration</code>: <code>KTGRAM_</code> \u0909\u092a\u0938\u0930\u094d\u0917 \u0915\u0947 \u0938\u093e\u0925 \u0935\u093e\u0924\u093e\u0935\u0930\u0923 \u0938\u0947 \u0915\u0949\u0928\u094d\u092b\u093c\u093f\u0917\u0930\u0947\u0936\u0928 \u092e\u093e\u0928 \u092a\u0922\u093c\u0924\u093e \u0939\u0948\u0964</li> <li><code>ManualConfiguration</code>: \u0915\u0949\u0928\u094d\u092b\u093c\u093f\u0917\u0930\u0947\u0936\u0928 \u092e\u093e\u0928\u094b\u0902 \u0915\u094b \u092e\u0948\u0928\u094d\u092f\u0941\u0905\u0932 \u0930\u0942\u092a \u0938\u0947 \u0938\u0947\u091f \u0915\u0930\u0928\u0947 \u0915\u0940 \u0905\u0928\u0941\u092e\u0924\u093f \u0926\u0947\u0924\u093e \u0939\u0948, \u0905\u092a\u0928\u0947 \u092a\u0948\u0930\u093e\u092e\u0940\u091f\u0930 \u0915\u094b <code>server {}</code> \u092b\u093c\u0902\u0915\u094d\u0936\u0928 \u092e\u0947\u0902 \u0938\u0947\u091f \u0915\u0930\u0947\u0902\u0964</li> </ul> <p>\u0938\u0947\u091f \u0915\u093f\u090f \u091c\u093e \u0938\u0915\u0928\u0947 \u0935\u093e\u0932\u0947 \u092a\u0948\u0930\u093e\u092e\u0940\u091f\u0930 \u0915\u0940 \u0938\u0942\u091a\u0940 \u0939\u0948:</p> <ul> <li><code>HOST</code>: \u0938\u0930\u094d\u0935\u0930 \u0915\u093e \u0939\u094b\u0938\u094d\u091f\u0928\u093e\u092e \u092f\u093e IP \u092a\u0924\u093e\u0964</li> <li><code>PORT</code>: \u0938\u0930\u094d\u0935\u0930 \u0915\u0947 \u0932\u093f\u090f \u092a\u094b\u0930\u094d\u091f \u0928\u0902\u092c\u0930\u0964</li> <li><code>SSL_PORT</code>: SSL/TLS \u0915\u0928\u0947\u0915\u094d\u0936\u0928 \u0915\u0947 \u0932\u093f\u090f \u092a\u094b\u0930\u094d\u091f \u0928\u0902\u092c\u0930\u0964</li> <li><code>PEM_PRIVATE_KEY_PATH</code>: PEM \u0928\u093f\u091c\u0940 \u0915\u0941\u0902\u091c\u0940 \u092b\u093c\u093e\u0907\u0932 \u0915\u093e \u092a\u0925\u0964</li> <li><code>PEM_CHAIN_PATH</code>: PEM \u092a\u094d\u0930\u092e\u093e\u0923\u092a\u0924\u094d\u0930 \u0936\u094d\u0930\u0943\u0902\u0916\u0932\u093e \u092b\u093c\u093e\u0907\u0932 \u0915\u093e \u092a\u0925\u0964</li> <li><code>PEM_PRIVATE_KEY</code>: PEM \u0928\u093f\u091c\u0940 \u0915\u0941\u0902\u091c\u0940 \u092a\u093e\u0938\u0935\u0930\u094d\u0921 \u0935\u0930\u094d\u0923 \u0938\u0930\u0923\u093f \u0915\u0947 \u0930\u0942\u092a \u092e\u0947\u0902\u0964</li> <li><code>KEYSTORE_PATH</code>: Java KeyStore \u092b\u093c\u093e\u0907\u0932 \u0915\u093e \u092a\u0925\u0964</li> <li><code>KEYSTORE_PASSWORD</code>: KeyStore \u0915\u0947 \u0932\u093f\u090f \u092a\u093e\u0938\u0935\u0930\u094d\u0921\u0964</li> <li><code>KEY_ALIAS</code>: KeyStore \u092e\u0947\u0902 \u0915\u0941\u0902\u091c\u0940 \u0915\u0947 \u0932\u093f\u090f \u0909\u092a\u0928\u093e\u092e\u0964</li> <li><code>SSL_ON</code>: \u090f\u0915 \u092c\u0942\u0932\u093f\u092f\u0928 \u091c\u094b \u0907\u0902\u0917\u093f\u0924 \u0915\u0930\u0924\u093e \u0939\u0948 \u0915\u093f \u0915\u094d\u092f\u093e SSL/TLS \u0938\u0915\u094d\u0937\u092e \u0939\u094b\u0928\u093e \u091a\u093e\u0939\u093f\u090f\u0964 \u0921\u093f\u092b\u093c\u0949\u0932\u094d\u091f \u0930\u0942\u092a \u0938\u0947 \u0938\u0924\u094d\u092f\u0964</li> </ul> <p>Tip</p> <p>\u092f\u0926\u093f pem \u092a\u094d\u0930\u092e\u093e\u0923\u092a\u0924\u094d\u0930 \u092e\u094c\u091c\u0942\u0926 \u0939\u0948\u0902, \u0924\u094b \u092e\u0949\u0921\u094d\u092f\u0942\u0932 \u0938\u094d\u0935\u092f\u0902 \u0909\u0928\u094d\u0939\u0947\u0902 \u0928\u093f\u0930\u094d\u0926\u093f\u0937\u094d\u091f \u092a\u0925 \u092a\u0930 jks \u0938\u0902\u0917\u094d\u0930\u0939\u0923 \u0938\u0947 \u092c\u0928\u093e\u090f\u0917\u093e\u0964</p>"},{"location":"hi/Web-starters-%28Spring-and-Ktor%29/#_11","title":"\u092c\u0949\u091f \u0915\u0949\u0928\u094d\u092b\u093c\u093f\u0917\u0930\u0947\u0936\u0928:","text":"<p>\u092c\u0949\u091f \u0915\u094b \u0915\u0949\u0928\u094d\u092b\u093c\u093f\u0917\u0930 \u0915\u0930\u0928\u0947 \u0915\u0947 \u0932\u093f\u090f <code>declareBot {}</code> \u0915\u0949\u0932 \u0915\u0930\u0947\u0902 \u091c\u093f\u0938\u092e\u0947\u0902 \u0910\u0938\u0947 \u092a\u0948\u0930\u093e\u092e\u0940\u091f\u0930 \u0939\u0948\u0902:</p> <ul> <li><code>token</code>: \u092c\u0949\u091f \u091f\u094b\u0915\u0928\u0964</li> <li><code>pckg</code>: \u092c\u0949\u091f \u0915\u0947 \u0932\u093f\u090f \u092a\u0948\u0915\u0947\u091c \u0928\u093e\u092e\u0964</li> <li><code>configuration</code>: \u092c\u0949\u091f \u0915\u094b \u0915\u0949\u0928\u094d\u092b\u093c\u093f\u0917\u0930 \u0915\u0930\u0928\u0947 \u0915\u0947 \u0932\u093f\u090f \u090f\u0915 \u0932\u0948\u092e\u094d\u092c\u094d\u0921\u093e \u092b\u093c\u0902\u0915\u094d\u0936\u0928\u0964</li> <li><code>handlingBehaviour</code>: \u092c\u0949\u091f \u0915\u0947 \u0939\u0948\u0902\u0921\u0932\u093f\u0902\u0917 \u0935\u094d\u092f\u0935\u0939\u093e\u0930 \u0915\u094b \u0938\u0947\u091f \u0915\u0930\u0928\u0947 \u0915\u0947 \u0932\u093f\u090f \u090f\u0915 \u0932\u0948\u092e\u094d\u092c\u094d\u0921\u093e \u092b\u093c\u0902\u0915\u094d\u0936\u0928\u0964</li> <li><code>onInit</code>: \u092c\u0949\u091f \u092a\u094d\u0930\u093e\u0930\u0902\u092d \u0939\u094b\u0928\u0947 \u092a\u0930 \u0928\u093f\u0937\u094d\u092a\u093e\u0926\u093f\u0924 \u0915\u093f\u090f \u091c\u093e\u0928\u0947 \u0935\u093e\u0932\u0947 \u0932\u0948\u092e\u094d\u092c\u094d\u0921\u093e \u092b\u093c\u0902\u0915\u094d\u0936\u0928\u0964</li> </ul>"},{"location":"hi/Web-starters-%28Spring-and-Ktor%29/#_12","title":"\u0909\u0926\u093e\u0939\u0930\u0923 \u0909\u092a\u092f\u094b\u0917","text":"<p>\u0907\u0938 \u092e\u0949\u0921\u094d\u092f\u0942\u0932 \u0915\u093e \u0909\u092a\u092f\u094b\u0917 \u0915\u0930\u0928\u0947 \u0915\u0947 \u0932\u093f\u090f, <code>serveWebhook</code> \u092b\u093c\u0902\u0915\u094d\u0936\u0928 \u0915\u0949\u0932 \u0915\u0930\u0947\u0902, \u0905\u092a\u0928\u0940 \u0935\u093e\u0902\u091b\u093f\u0924 \u0938\u0947\u091f\u093f\u0902\u0917\u094d\u0938 \u0915\u0947 \u0938\u093e\u0925 \u0907\u0938\u0947 \u0915\u0949\u0928\u094d\u092b\u093c\u093f\u0917\u0930 \u0915\u0930\u0947\u0902, \u0905\u092a\u0928\u0947 \u092c\u0949\u091f\u094d\u0938 \u0915\u094b \u0918\u094b\u0937\u093f\u0924 \u0915\u0930\u0947\u0902\u0964 \u092f\u0939\u093e\u0902 \u090f\u0915 \u0938\u0930\u0932\u0940\u0915\u0943\u0924 \u0909\u0926\u093e\u0939\u0930\u0923 \u0939\u0948:</p> <pre><code>fun main() = runBlocking {\n    serveWebhook {\n        server {\n            HOST = \"0.0.0.0\"\n            PORT = 8080\n            SSL_PORT = 8443\n\n            PEM_PRIVATE_KEY_PATH = \"/etc/letsencrypt/live/example.com/privkey.pem\"\n            PEM_CHAIN_PATH = \"/etc/letsencrypt/live/example.com/fullchain.pem\"\n            PEM_PRIVATE_KEY = \"pem_changeit\".toCharArray()\n\n            KEYSTORE_PATH = \"/etc/ssl/certs/java/cacerts/bot_keystore.jks\"\n            KEYSTORE_PASSWORD = \"changeit\".toCharArray()\n            // Set other configuration parameters as needed\n        }\n        declareBot {\n            token = \"YOUR_BOT_TOKEN\"\n            // Configure other bot settings\n        }\n        // Add more bots or set other parameters if needed\n    }\n}\n</code></pre> <p>Caution</p> <p>\u0938\u092c \u0915\u0941\u091b \u0915\u093e\u092e \u0915\u0930\u0928\u0947 \u0915\u0947 \u0932\u093f\u090f webhook \u0938\u0947\u091f \u0915\u0930\u0928\u093e \u0928 \u092d\u0942\u0932\u0947\u0902\u0964 :)</p> <p>\u0921\u093f\u092b\u093c\u0949\u0932\u094d\u091f \u0930\u0942\u092a \u0938\u0947 \u092e\u0949\u0921\u094d\u092f\u0942\u0932 webhook \u0938\u0941\u0928\u0928\u0947 \u0935\u093e\u0932\u0947 \u090f\u0902\u0921\u092a\u0949\u0907\u0902\u091f\u094d\u0938 \u0915\u094b <code>host/BOT_TOKEN</code> \u0915\u0947 \u0930\u0942\u092a \u092e\u0947\u0902 \u092a\u0930\u094b\u0938\u0947\u0917\u093e</p>"},{"location":"ru/","title":"\u0414\u043e\u043c\u0430\u0448\u043d\u044f\u044f \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0430","text":""},{"location":"ru/#_1","title":"\u0412\u0432\u0435\u0434\u0435\u043d\u0438\u0435","text":"<p>\u0414\u0430\u0432\u0430\u0439\u0442\u0435 \u043f\u0440\u0435\u0434\u0441\u0442\u0430\u0432\u0438\u043c, \u043a\u0430\u043a \u0431\u0438\u0431\u043b\u0438\u043e\u0442\u0435\u043a\u0430 \u043e\u0431\u0440\u0430\u0431\u0430\u0442\u044b\u0432\u0430\u0435\u0442 \u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u044f \u0432 \u0446\u0435\u043b\u043e\u043c:</p> <p> </p> <p>\u041f\u043e\u0441\u043b\u0435 \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u044f \u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u044f \u0431\u0438\u0431\u043b\u0438\u043e\u0442\u0435\u043a\u0430 \u0432\u044b\u043f\u043e\u043b\u043d\u044f\u0435\u0442 \u0442\u0440\u0438 \u043e\u0441\u043d\u043e\u0432\u043d\u044b\u0445 \u0448\u0430\u0433\u0430, \u043a\u0430\u043a \u043c\u044b \u0432\u0438\u0434\u0438\u043c.</p>"},{"location":"ru/#_2","title":"\u041e\u0431\u0440\u0430\u0431\u043e\u0442\u043a\u0430","text":"<p>\u041e\u0431\u0440\u0430\u0431\u043e\u0442\u043a\u0430 \u0437\u0430\u043a\u043b\u044e\u0447\u0430\u0435\u0442\u0441\u044f \u0432 \u043f\u0435\u0440\u0435\u0443\u043f\u0430\u043a\u043e\u0432\u043a\u0435 \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u043d\u043e\u0433\u043e \u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u044f \u0432 \u0441\u043e\u043e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0443\u044e\u0449\u0438\u0439 \u043f\u043e\u0434\u043a\u043b\u0430\u0441\u0441 <code>ProcessedUpdate</code> \u0432 \u0437\u0430\u0432\u0438\u0441\u0438\u043c\u043e\u0441\u0442\u0438 \u043e\u0442 \u043f\u0435\u0440\u0435\u043d\u043e\u0441\u0438\u043c\u043e\u0439 \u043d\u0430\u0433\u0440\u0443\u0437\u043a\u0438.</p> <p>\u042d\u0442\u043e\u0442 \u0448\u0430\u0433 \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c \u0434\u043b\u044f \u043e\u0431\u043b\u0435\u0433\u0447\u0435\u043d\u0438\u044f \u0440\u0430\u0431\u043e\u0442\u044b \u0441 \u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0435\u043c \u0438 \u0440\u0430\u0441\u0448\u0438\u0440\u0435\u043d\u0438\u044f \u0432\u043e\u0437\u043c\u043e\u0436\u043d\u043e\u0441\u0442\u0435\u0439 \u043e\u0431\u0440\u0430\u0431\u043e\u0442\u043a\u0438.</p>"},{"location":"ru/#_3","title":"\u041e\u0431\u0440\u0430\u0431\u043e\u0442\u043a\u0430","text":"<p>\u0414\u0430\u043b\u0435\u0435 \u0438\u0434\u0435\u0442 \u043e\u0441\u043d\u043e\u0432\u043d\u043e\u0439 \u0448\u0430\u0433 \u2014 \u0441\u043e\u0431\u0441\u0442\u0432\u0435\u043d\u043d\u043e \u043e\u0431\u0440\u0430\u0431\u043e\u0442\u043a\u0430.</p>"},{"location":"ru/#ratelimiter","title":"\u0413\u043b\u043e\u0431\u0430\u043b\u044c\u043d\u044b\u0439 RateLimiter","text":"<p>\u0415\u0441\u043b\u0438 \u0432 \u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0438 \u0435\u0441\u0442\u044c \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c, \u043c\u044b \u043f\u0440\u043e\u0432\u0435\u0440\u044f\u0435\u043c \u043f\u0440\u0435\u0432\u044b\u0448\u0435\u043d\u0438\u0435 \u0433\u043b\u043e\u0431\u0430\u043b\u044c\u043d\u043e\u0433\u043e rate limiter.</p>"},{"location":"ru/#_4","title":"\u0420\u0430\u0437\u0431\u043e\u0440 \u0442\u0435\u043a\u0441\u0442\u0430","text":"<p>\u0414\u0430\u043b\u0435\u0435, \u0432 \u0437\u0430\u0432\u0438\u0441\u0438\u043c\u043e\u0441\u0442\u0438 \u043e\u0442 \u043d\u0430\u0433\u0440\u0443\u0437\u043a\u0438, \u043c\u044b \u0431\u0435\u0440\u0435\u043c \u043a\u043e\u043d\u043a\u0440\u0435\u0442\u043d\u044b\u0439 \u043a\u043e\u043c\u043f\u043e\u043d\u0435\u043d\u0442 \u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u044f, \u0441\u043e\u0434\u0435\u0440\u0436\u0430\u0449\u0438\u0439 \u0442\u0435\u043a\u0441\u0442, \u0438 \u0440\u0430\u0437\u0431\u0438\u0440\u0430\u0435\u043c \u0435\u0433\u043e \u0441\u043e\u0433\u043b\u0430\u0441\u043d\u043e \u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u0438.</p> <p>\u0411\u043e\u043b\u0435\u0435 \u043f\u043e\u0434\u0440\u043e\u0431\u043d\u043e \u043c\u043e\u0436\u043d\u043e \u0443\u0432\u0438\u0434\u0435\u0442\u044c \u0432 \u0441\u0442\u0430\u0442\u044c\u0435 \u043e \u0440\u0430\u0437\u0431\u043e\u0440\u0435 \u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0439.</p>"},{"location":"ru/#_5","title":"\u041f\u043e\u0438\u0441\u043a \u0430\u043a\u0442\u0438\u0432\u043d\u043e\u0441\u0442\u0438","text":"<p>\u0414\u0430\u043b\u0435\u0435, \u0441\u043e\u0433\u043b\u0430\u0441\u043d\u043e \u043f\u0440\u0438\u043e\u0440\u0438\u0442\u0435\u0442\u0443 \u043e\u0431\u0440\u0430\u0431\u043e\u0442\u043a\u0438:</p> <p> </p> <p>\u041c\u044b \u0438\u0449\u0435\u043c \u0441\u043e\u043e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0438\u0435 \u043c\u0435\u0436\u0434\u0443 \u0440\u0430\u0437\u043e\u0431\u0440\u0430\u043d\u043d\u044b\u043c\u0438 \u0434\u0430\u043d\u043d\u044b\u043c\u0438 \u0438 \u0430\u043a\u0442\u0438\u0432\u043d\u043e\u0441\u0442\u044f\u043c\u0438, \u0441 \u043a\u043e\u0442\u043e\u0440\u044b\u043c\u0438 \u043c\u044b \u0440\u0430\u0431\u043e\u0442\u0430\u0435\u043c. \u041a\u0430\u043a \u0432\u0438\u0434\u043d\u043e \u043d\u0430 \u0441\u0445\u0435\u043c\u0435 \u043f\u0440\u0438\u043e\u0440\u0438\u0442\u0435\u0442\u0430, <code>\u041a\u043e\u043c\u0430\u043d\u0434\u044b</code> \u0432\u0441\u0435\u0433\u0434\u0430 \u0438\u0434\u0443\u0442 \u043f\u0435\u0440\u0432\u044b\u043c\u0438.</p> <p>\u0422\u043e \u0435\u0441\u0442\u044c, \u0435\u0441\u043b\u0438 \u0442\u0435\u043a\u0441\u0442\u043e\u0432\u0430\u044f \u043d\u0430\u0433\u0440\u0443\u0437\u043a\u0430 \u0432 \u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0438 \u0441\u043e\u043e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0443\u0435\u0442 \u043a\u0430\u043a\u043e\u0439-\u043b\u0438\u0431\u043e \u043a\u043e\u043c\u0430\u043d\u0434\u0435, \u0434\u0430\u043b\u044c\u043d\u0435\u0439\u0448\u0438\u0439 \u043f\u043e\u0438\u0441\u043a <code>\u0412\u0432\u043e\u0434\u043e\u0432</code>, <code>\u041e\u0431\u0449\u0438\u0445</code> \u0438, \u043a\u043e\u043d\u0435\u0447\u043d\u043e, \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u0435 \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u044f <code>\u041d\u0435\u043e\u0431\u0440\u0430\u0431\u043e\u0442\u0430\u043d\u043d\u044b\u0445</code> \u043d\u0435 \u0431\u0443\u0434\u0435\u0442 \u0432\u044b\u043f\u043e\u043b\u043d\u044f\u0442\u044c\u0441\u044f.</p> <p>\u0415\u0434\u0438\u043d\u0441\u0442\u0432\u0435\u043d\u043d\u043e\u0435 \u2014 \u0435\u0441\u043b\u0438 \u0435\u0441\u0442\u044c <code>UpdateHandlers</code>, \u043e\u043d\u0438 \u0431\u0443\u0434\u0443\u0442 \u0437\u0430\u043f\u0443\u0441\u043a\u0430\u0442\u044c\u0441\u044f \u043f\u0430\u0440\u0430\u043b\u043b\u0435\u043b\u044c\u043d\u043e \u043d\u0435\u0437\u0430\u0432\u0438\u0441\u0438\u043c\u043e.</p>"},{"location":"ru/#_6","title":"\u041a\u043e\u043c\u0430\u043d\u0434\u044b","text":"<p>\u0414\u0430\u0432\u0430\u0439\u0442\u0435 \u043f\u043e\u0434\u0440\u043e\u0431\u043d\u0435\u0435 \u0440\u0430\u0441\u0441\u043c\u043e\u0442\u0440\u0438\u043c \u043a\u043e\u043c\u0430\u043d\u0434\u044b \u0438 \u0438\u0445 \u043e\u0431\u0440\u0430\u0431\u043e\u0442\u043a\u0443.</p> <p>\u041a\u0430\u043a \u0432\u044b \u043c\u043e\u0433\u043b\u0438 \u0437\u0430\u043c\u0435\u0442\u0438\u0442\u044c, \u0445\u043e\u0442\u044f \u0430\u043d\u043d\u043e\u0442\u0430\u0446\u0438\u044f \u0434\u043b\u044f \u043e\u0431\u0440\u0430\u0431\u043e\u0442\u043a\u0438 \u043a\u043e\u043c\u0430\u043d\u0434 \u043d\u0430\u0437\u044b\u0432\u0430\u0435\u0442\u0441\u044f <code>CommandHandler</code>, \u043e\u043d\u0430 \u0431\u043e\u043b\u0435\u0435 \u0443\u043d\u0438\u0432\u0435\u0440\u0441\u0430\u043b\u044c\u043d\u0430, \u0447\u0435\u043c \u043a\u043b\u0430\u0441\u0441\u0438\u0447\u0435\u0441\u043a\u0430\u044f \u043a\u043e\u043d\u0446\u0435\u043f\u0446\u0438\u044f \u0432 Telegram Bots.</p>"},{"location":"ru/#_7","title":"\u041e\u0431\u043b\u0430\u0441\u0442\u0438","text":"<p>\u042d\u0442\u043e \u0441\u0432\u044f\u0437\u0430\u043d\u043e \u0441 \u0442\u0435\u043c, \u0447\u0442\u043e \u0443 \u043d\u0435\u0435 \u0431\u043e\u043b\u0435\u0435 \u0448\u0438\u0440\u043e\u043a\u0438\u0439 \u0441\u043f\u0435\u043a\u0442\u0440 \u0432\u043e\u0437\u043c\u043e\u0436\u043d\u043e\u0441\u0442\u0435\u0439 \u043e\u0431\u0440\u0430\u0431\u043e\u0442\u043a\u0438, \u0442\u043e \u0435\u0441\u0442\u044c \u0446\u0435\u043b\u0435\u0432\u0430\u044f \u0444\u0443\u043d\u043a\u0446\u0438\u044f \u043c\u043e\u0436\u0435\u0442 \u0431\u044b\u0442\u044c \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u0435\u043d\u0430 \u043d\u0435 \u0442\u043e\u043b\u044c\u043a\u043e \u0432 \u0437\u0430\u0432\u0438\u0441\u0438\u043c\u043e\u0441\u0442\u0438 \u043e\u0442 \u0441\u043e\u0432\u043f\u0430\u0434\u0435\u043d\u0438\u044f \u0442\u0435\u043a\u0441\u0442\u0430, \u043d\u043e \u0438 \u043e\u0442 \u0442\u0438\u043f\u0430 \u043f\u043e\u0434\u0445\u043e\u0434\u044f\u0449\u0435\u0433\u043e \u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u044f \u2014 \u044d\u0442\u043e \u043a\u043e\u043d\u0446\u0435\u043f\u0446\u0438\u044f \u043e\u0431\u043b\u0430\u0441\u0442\u0435\u0439.</p> <p>\u0421\u043e\u043e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0435\u043d\u043d\u043e, \u043a\u0430\u0436\u0434\u0430\u044f \u043a\u043e\u043c\u0430\u043d\u0434\u0430 \u043c\u043e\u0436\u0435\u0442 \u0438\u043c\u0435\u0442\u044c \u0440\u0430\u0437\u043d\u044b\u0435 \u043e\u0431\u0440\u0430\u0431\u043e\u0442\u0447\u0438\u043a\u0438 \u0434\u043b\u044f \u0440\u0430\u0437\u043d\u044b\u0445 \u0441\u043f\u0438\u0441\u043a\u043e\u0432 \u043e\u0431\u043b\u0430\u0441\u0442\u0435\u0439, \u0438\u043b\u0438 \u043d\u0430\u043e\u0431\u043e\u0440\u043e\u0442, \u043e\u0434\u043d\u0430 \u043a\u043e\u043c\u0430\u043d\u0434\u0430 \u0434\u043b\u044f \u043d\u0435\u0441\u043a\u043e\u043b\u044c\u043a\u0438\u0445.</p> <p>\u041d\u0438\u0436\u0435 \u0432\u044b \u043c\u043e\u0436\u0435\u0442\u0435 \u0432\u0438\u0434\u0435\u0442\u044c, \u043a\u0430\u043a \u0432\u044b\u043f\u043e\u043b\u043d\u044f\u0435\u0442\u0441\u044f \u043e\u0442\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u0435 \u043f\u043e \u0442\u0435\u043a\u0441\u0442\u043e\u0432\u043e\u0439 \u043d\u0430\u0433\u0440\u0443\u0437\u043a\u0435 \u0438 \u043e\u0431\u043b\u0430\u0441\u0442\u0438:</p> <p> </p>"},{"location":"ru/#_8","title":"\u0412\u0432\u043e\u0434\u044b","text":"<p>\u0414\u0430\u043b\u0435\u0435, \u0435\u0441\u043b\u0438 \u0442\u0435\u043a\u0441\u0442\u043e\u0432\u0430\u044f \u043d\u0430\u0433\u0440\u0443\u0437\u043a\u0430 \u043d\u0435 \u0441\u043e\u043e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0443\u0435\u0442 \u043d\u0438 \u043e\u0434\u043d\u043e\u0439 \u043a\u043e\u043c\u0430\u043d\u0434\u0435, \u0438\u0449\u0443\u0442\u0441\u044f \u0442\u043e\u0447\u043a\u0438 \u0432\u0432\u043e\u0434\u0430.</p> <p>\u041a\u043e\u043d\u0446\u0435\u043f\u0446\u0438\u044f \u043e\u0447\u0435\u043d\u044c \u043f\u043e\u0445\u043e\u0436\u0430 \u043d\u0430 \u043e\u0436\u0438\u0434\u0430\u043d\u0438\u0435 \u0432\u0432\u043e\u0434\u0430 \u0432 \u043a\u043e\u043c\u0430\u043d\u0434\u043d\u044b\u0445 \u0441\u0442\u0440\u043e\u043a\u043e\u0432\u044b\u0445 \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u044f\u0445 \u2014 \u0432\u044b \u043f\u043e\u043c\u0435\u0449\u0430\u0435\u0442\u0435 \u0432 \u043a\u043e\u043d\u0442\u0435\u043a\u0441\u0442 \u0431\u043e\u0442\u0430 \u0434\u043b\u044f \u043a\u043e\u043d\u043a\u0440\u0435\u0442\u043d\u043e\u0433\u043e \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f \u0442\u043e\u0447\u043a\u0443, \u043a\u043e\u0442\u043e\u0440\u0430\u044f \u0431\u0443\u0434\u0435\u0442 \u043e\u0431\u0440\u0430\u0431\u0430\u0442\u044b\u0432\u0430\u0442\u044c \u0435\u0433\u043e \u0441\u043b\u0435\u0434\u0443\u044e\u0449\u0438\u0439 \u0432\u0432\u043e\u0434, \u043d\u0435\u0432\u0430\u0436\u043d\u043e \u0447\u0442\u043e \u043e\u043d \u0441\u043e\u0434\u0435\u0440\u0436\u0438\u0442, \u0433\u043b\u0430\u0432\u043d\u043e\u0435, \u0447\u0442\u043e\u0431\u044b \u0441\u043b\u0435\u0434\u0443\u044e\u0449\u0435\u0435 \u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0435 \u0438\u043c\u0435\u043b\u043e <code>\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f</code>, \u0447\u0442\u043e\u0431\u044b \u043c\u043e\u0436\u043d\u043e \u0431\u044b\u043b\u043e \u0441\u043e\u043e\u0442\u043d\u0435\u0441\u0442\u0438 \u0435\u0433\u043e \u0441 \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d\u043d\u043e\u0439 \u0442\u043e\u0447\u043a\u043e\u0439 \u043e\u0436\u0438\u0434\u0430\u043d\u0438\u044f \u0432\u0432\u043e\u0434\u0430.</p> <p>\u041d\u0438\u0436\u0435 \u0432\u044b \u043c\u043e\u0436\u0435\u0442\u0435 \u0432\u0438\u0434\u0435\u0442\u044c \u043f\u0440\u0438\u043c\u0435\u0440 \u043e\u0431\u0440\u0430\u0431\u043e\u0442\u043a\u0438 \u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u044f, \u043a\u043e\u0433\u0434\u0430 \u043d\u0435\u0442 \u0441\u043e\u0432\u043f\u0430\u0434\u0435\u043d\u0438\u044f \u043d\u0430 <code>\u041a\u043e\u043c\u0430\u043d\u0434\u044b</code>.</p> <p> </p>"},{"location":"ru/#_9","title":"\u041e\u0431\u0449\u0438\u0435","text":"<p>\u0415\u0441\u043b\u0438 \u043e\u0431\u0440\u0430\u0431\u043e\u0442\u0447\u0438\u043a \u043d\u0435 \u043d\u0430\u0445\u043e\u0434\u0438\u0442 <code>\u043a\u043e\u043c\u0430\u043d\u0434\u044b</code> \u0438\u043b\u0438 <code>\u0432\u0432\u043e\u0434\u044b</code>, \u043e\u043d \u043f\u0440\u043e\u0432\u0435\u0440\u044f\u0435\u0442 \u0442\u0435\u043a\u0441\u0442\u043e\u0432\u0443\u044e \u043d\u0430\u0433\u0440\u0443\u0437\u043a\u0443 \u043d\u0430 \u0441\u043e\u043e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0438\u0435 <code>\u043e\u0431\u0449\u0438\u043c</code> \u043e\u0431\u0440\u0430\u0431\u043e\u0442\u0447\u0438\u043a\u0430\u043c.</p> <p>\u041c\u044b \u0441\u043e\u0432\u0435\u0442\u0443\u0435\u043c \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c \u044d\u0442\u043e \u0431\u0435\u0437 \u0437\u043b\u043e\u0443\u043f\u043e\u0442\u0440\u0435\u0431\u043b\u0435\u043d\u0438\u0439, \u0442\u0430\u043a \u043a\u0430\u043a \u043f\u0440\u043e\u0432\u0435\u0440\u043a\u0430 \u0432\u044b\u043f\u043e\u043b\u043d\u044f\u0435\u0442\u0441\u044f \u0438\u0442\u0435\u0440\u0430\u0446\u0438\u0435\u0439 \u043f\u043e \u0432\u0441\u0435\u043c \u0437\u0430\u043f\u0438\u0441\u044f\u043c.</p>"},{"location":"ru/#_10","title":"\u041d\u0435\u043e\u0431\u0440\u0430\u0431\u043e\u0442\u0430\u043d\u043d\u044b\u0435","text":"<p>\u0418 \u0444\u0438\u043d\u0430\u043b\u044c\u043d\u044b\u0439 \u0448\u0430\u0433 \u2014 \u0435\u0441\u043b\u0438 \u043e\u0431\u0440\u0430\u0431\u043e\u0442\u0447\u0438\u043a \u043d\u0435 \u043d\u0430\u0445\u043e\u0434\u0438\u0442 \u043d\u0438\u043a\u0430\u043a\u043e\u0439 \u043f\u043e\u0434\u0445\u043e\u0434\u044f\u0449\u0435\u0439 \u0430\u043a\u0442\u0438\u0432\u043d\u043e\u0441\u0442\u0438 (<code>UpdateHandler</code> \u0440\u0430\u0431\u043e\u0442\u0430\u0435\u0442 \u043f\u043e\u043b\u043d\u043e\u0441\u0442\u044c\u044e \u043f\u0430\u0440\u0430\u043b\u043b\u0435\u043b\u044c\u043d\u043e \u0438 \u043d\u0435 \u0441\u0447\u0438\u0442\u0430\u0435\u0442\u0441\u044f \u043e\u0431\u044b\u0447\u043d\u043e\u0439 \u0430\u043a\u0442\u0438\u0432\u043d\u043e\u0441\u0442\u044c\u044e), \u0442\u043e\u0433\u0434\u0430 \u0432\u0441\u0442\u0443\u043f\u0430\u0435\u0442 \u0432 \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u0435 <code>UnprocessedHandler</code>, \u0435\u0441\u043b\u0438 \u043e\u043d \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d, \u043e\u043d \u043e\u0431\u0440\u0430\u0431\u043e\u0442\u0430\u0435\u0442 \u044d\u0442\u043e\u0442 \u0441\u043b\u0443\u0447\u0430\u0439, \u044d\u0442\u043e \u043c\u043e\u0436\u0435\u0442 \u0431\u044b\u0442\u044c \u043f\u043e\u043b\u0435\u0437\u043d\u043e \u0434\u043b\u044f \u043f\u0440\u0435\u0434\u0443\u043f\u0440\u0435\u0436\u0434\u0435\u043d\u0438\u044f \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f \u043e \u0442\u043e\u043c, \u0447\u0442\u043e \u0447\u0442\u043e-\u0442\u043e \u043f\u043e\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a.</p> <p>\u0411\u043e\u043b\u0435\u0435 \u043f\u043e\u0434\u0440\u043e\u0431\u043d\u043e \u0447\u0438\u0442\u0430\u0439\u0442\u0435 \u0432 \u0441\u0442\u0430\u0442\u044c\u0435 \u041e\u0431\u0440\u0430\u0431\u043e\u0442\u0447\u0438\u043a\u0438.</p>"},{"location":"ru/#ratelimiter_1","title":"RateLimiter \u0430\u043a\u0442\u0438\u0432\u043d\u043e\u0441\u0442\u0438","text":"<p>\u041f\u043e\u0441\u043b\u0435 \u043d\u0430\u0445\u043e\u0436\u0434\u0435\u043d\u0438\u044f \u0430\u043a\u0442\u0438\u0432\u043d\u043e\u0441\u0442\u0438 \u0442\u0430\u043a\u0436\u0435 \u043f\u0440\u043e\u0432\u0435\u0440\u044f\u044e\u0442\u0441\u044f \u043b\u0438\u043c\u0438\u0442\u044b \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f \u043d\u0430 \u043d\u0435\u0435, \u0441\u043e\u0433\u043b\u0430\u0441\u043d\u043e \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u0430\u043c, \u0443\u043a\u0430\u0437\u0430\u043d\u043d\u044b\u043c \u0432 \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u0430\u0445 \u0430\u043a\u0442\u0438\u0432\u043d\u043e\u0441\u0442\u0438.</p>"},{"location":"ru/#_11","title":"\u0410\u043a\u0442\u0438\u0432\u043d\u043e\u0441\u0442\u044c","text":"<p>\u0410\u043a\u0442\u0438\u0432\u043d\u043e\u0441\u0442\u044c \u043e\u0442\u043d\u043e\u0441\u0438\u0442\u0441\u044f \u043a \u0440\u0430\u0437\u043b\u0438\u0447\u043d\u044b\u043c \u0442\u0438\u043f\u0430\u043c \u043e\u0431\u0440\u0430\u0431\u043e\u0442\u0447\u0438\u043a\u043e\u0432, \u043a\u043e\u0442\u043e\u0440\u044b\u0435 \u043c\u043e\u0436\u0435\u0442 \u043e\u0431\u0440\u0430\u0431\u0430\u0442\u044b\u0432\u0430\u0442\u044c \u0431\u0438\u0431\u043b\u0438\u043e\u0442\u0435\u043a\u0430 \u0442\u0435\u043b\u0435\u0433\u0440\u0430\u043c-\u0431\u043e\u0442\u043e\u0432, \u0432\u043a\u043b\u044e\u0447\u0430\u044f \u041a\u043e\u043c\u0430\u043d\u0434\u044b, \u0412\u0432\u043e\u0434\u044b, \u0420\u0435\u0433\u0443\u043b\u044f\u0440\u043d\u044b\u0435 \u0432\u044b\u0440\u0430\u0436\u0435\u043d\u0438\u044f \u0438 \u043e\u0431\u0440\u0430\u0431\u043e\u0442\u0447\u0438\u043a \u041d\u0435\u043e\u0431\u0440\u0430\u0431\u043e\u0442\u0430\u043d\u043d\u044b\u0445.</p>"},{"location":"ru/#_12","title":"\u0412\u044b\u0437\u043e\u0432","text":"<p>\u0424\u0438\u043d\u0430\u043b\u044c\u043d\u044b\u0439 \u0448\u0430\u0433 \u043e\u0431\u0440\u0430\u0431\u043e\u0442\u043a\u0438 \u2014 \u0432\u044b\u0437\u043e\u0432 \u043d\u0430\u0439\u0434\u0435\u043d\u043d\u043e\u0439 \u0430\u043a\u0442\u0438\u0432\u043d\u043e\u0441\u0442\u0438.</p> <p>\u0411\u043e\u043b\u0435\u0435 \u043f\u043e\u0434\u0440\u043e\u0431\u043d\u043e \u043c\u043e\u0436\u043d\u043e \u043d\u0430\u0439\u0442\u0438 \u0432 \u0441\u0442\u0430\u0442\u044c\u0435 \u043e \u0432\u044b\u0437\u043e\u0432\u0435.</p>"},{"location":"ru/#_13","title":"\u0421\u043c. \u0442\u0430\u043a\u0436\u0435","text":"<ul> <li>\u0420\u0430\u0437\u0431\u043e\u0440 \u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0439</li> <li>\u0412\u044b\u0437\u043e\u0432 \u0430\u043a\u0442\u0438\u0432\u043d\u043e\u0441\u0442\u0438</li> <li>\u041e\u0431\u0440\u0430\u0431\u043e\u0442\u0447\u0438\u043a\u0438</li> <li>\u041a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u044f \u0431\u043e\u0442\u0430</li> <li>\u0412\u0435\u0431-\u0441\u0442\u0430\u0440\u0442\u0435\u0440\u044b (Spring, Ktor)</li> </ul>"},{"location":"ru/Actions/#-actions","title":"\u0412\u0441\u0435 \u0437\u0430\u043f\u0440\u043e\u0441\u044b - \u044d\u0442\u043e Actions","text":"<p>\u0412\u0441\u0435 \u0437\u0430\u043f\u0440\u043e\u0441\u044b Telegram API \u044f\u0432\u043b\u044f\u044e\u0442\u0441\u044f \u0440\u0430\u0437\u043b\u0438\u0447\u043d\u044b\u043c\u0438 \u0432\u0438\u0434\u0430\u043c\u0438 \u0438\u043d\u0442\u0435\u0440\u0444\u0435\u0439\u0441\u043e\u0432 <code>TgAction</code>, \u0440\u0435\u0430\u043b\u0438\u0437\u0443\u044e\u0449\u0438\u0445 \u0440\u0430\u0437\u043b\u0438\u0447\u043d\u044b\u0435 \u043c\u0435\u0442\u043e\u0434\u044b, \u0442\u0430\u043a\u0438\u0435 \u043a\u0430\u043a <code>SendMessageAction</code>, \u043a\u043e\u0442\u043e\u0440\u044b\u0435 \u043e\u0431\u0435\u0440\u043d\u0443\u0442\u044b \u0432 \u0432\u0438\u0434\u0435 \u0444\u0443\u043d\u043a\u0446\u0438\u0439 \u0442\u0438\u043f\u0430 <code>message()</code> \u0434\u043b\u044f \u0443\u0434\u043e\u0431\u0441\u0442\u0432\u0430 \u0438\u043d\u0442\u0435\u0440\u0444\u0435\u0439\u0441\u0430 \u0431\u0438\u0431\u043b\u0438\u043e\u0442\u0435\u043a\u0438.</p> <p> </p> <p>\u041a\u0430\u0436\u0434\u044b\u0439 <code>Action</code> \u043c\u043e\u0436\u0435\u0442 \u0438\u043c\u0435\u0442\u044c \u0441\u0432\u043e\u0438 \u0441\u043e\u0431\u0441\u0442\u0432\u0435\u043d\u043d\u044b\u0435 \u0432\u043e\u0437\u043c\u043e\u0436\u043d\u044b\u0435 \u043c\u0435\u0442\u043e\u0434\u044b, \u0432 \u0437\u0430\u0432\u0438\u0441\u0438\u043c\u043e\u0441\u0442\u0438 \u043e\u0442 \u0434\u043e\u0441\u0442\u0443\u043f\u043d\u044b\u0445 <code>Feature</code>.</p>"},{"location":"ru/Actions/#features","title":"Features","text":"<p>\u0420\u0430\u0437\u043b\u0438\u0447\u043d\u044b\u0435 \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u044f \u043c\u043e\u0433\u0443\u0442 \u0438\u043c\u0435\u0442\u044c \u0440\u0430\u0437\u043b\u0438\u0447\u043d\u044b\u0435 <code>Features</code> \u0432 \u0437\u0430\u0432\u0438\u0441\u0438\u043c\u043e\u0441\u0442\u0438 \u043e\u0442 Telegram Bot Api, \u0442\u0430\u043a\u0438\u0435 \u043a\u0430\u043a: <code>OptionsFeature</code>, <code>MarkupFeature</code> <code>EntitiesFeature</code> <code>CaptionFeature</code>.</p> <p>\u0414\u0430\u0432\u0430\u0439\u0442\u0435 \u0440\u0430\u0441\u0441\u043c\u043e\u0442\u0440\u0438\u043c \u0438\u0445 \u043f\u043e\u0434\u0440\u043e\u0431\u043d\u0435\u0435:</p>"},{"location":"ru/Actions/#options","title":"Options","text":"<p>\u041d\u0430\u043f\u0440\u0438\u043c\u0435\u0440, <code>OptionsFeature</code> \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u0442\u0441\u044f \u0434\u043b\u044f \u043f\u0435\u0440\u0435\u0434\u0430\u0447\u0438 \u0434\u043e\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044c\u043d\u044b\u0445 \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u043e\u0432.</p> <p>\u0423 \u043a\u0430\u0436\u0434\u043e\u0433\u043e \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u044f \u0441\u0432\u043e\u0439 \u0442\u0438\u043f \u043e\u043f\u0446\u0438\u0439, \u0441\u043e\u043e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0443\u044e\u0449\u0438\u0439 \u043c\u043e\u0436\u043d\u043e \u0443\u0432\u0438\u0434\u0435\u0442\u044c \u0432 \u0441\u0430\u043c\u043e\u043c <code>Action</code> \u0432 \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u0435 <code>options</code>, \u0432 \u0440\u0430\u0437\u0434\u0435\u043b\u0435 \u0441\u0432\u043e\u0439\u0441\u0442\u0432. \u041d\u0430\u043f\u0440\u0438\u043c\u0435\u0440, <code>sendMessage</code> \u0441\u043e\u0434\u0435\u0440\u0436\u0438\u0442 data class <code>MessageOptions</code> \u0441 \u0440\u0430\u0437\u043b\u0438\u0447\u043d\u044b\u043c\u0438 \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u0430\u043c\u0438 \u0432 \u043a\u0430\u0447\u0435\u0441\u0442\u0432\u0435 \u043e\u043f\u0446\u0438\u0439.</p> <p>\u041f\u0440\u0438\u043c\u0435\u0440 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u044f:</p> <pre><code>message{ \"*Test*\" }.options {\n    parseMode = ParseMode.Markdown\n}.send(user, bot)\n</code></pre>"},{"location":"ru/Actions/#markup","title":"Markup","text":"<p>\u0422\u0430\u043a\u0436\u0435 \u0441\u0443\u0449\u0435\u0441\u0442\u0432\u0443\u0435\u0442 \u043c\u0435\u0442\u043e\u0434 \u0434\u043b\u044f \u043e\u0442\u043f\u0440\u0430\u0432\u043a\u0438 \u0440\u0430\u0437\u043c\u0435\u0442\u043a\u0438, \u043a\u043e\u0442\u043e\u0440\u044b\u0439 \u043f\u043e\u0434\u0434\u0435\u0440\u0436\u0438\u0432\u0430\u0435\u0442 \u0432\u0441\u0435 \u0432\u0438\u0434\u044b \u043a\u043b\u0430\u0432\u0438\u0430\u0442\u0443\u0440: <code>ReplyKeyboardMarkup</code>, <code>InlineKeyboardMarkup</code>, <code>ForceReply</code>, <code>ReplyKeyboardRemove</code>.</p>"},{"location":"ru/Actions/#inline-keyboard-markup","title":"Inline Keyboard Markup","text":"<p>\u042d\u0442\u043e\u0442 \u0431\u0438\u043b\u0434\u0435\u0440 \u043f\u043e\u0437\u0432\u043e\u043b\u044f\u0435\u0442 \u0441\u043e\u0437\u0434\u0430\u0432\u0430\u0442\u044c inline \u043a\u043d\u043e\u043f\u043a\u0438 \u0441 \u043b\u044e\u0431\u043e\u0439 \u043a\u043e\u043c\u0431\u0438\u043d\u0430\u0446\u0438\u0435\u0439 \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u043e\u0432.</p> <pre><code>message{ \"Test\" }.inlineKeyboardMarkup {\n    \"name\" callback \"callbackData\"         //\n    \"buttonName\" url \"https://google.com\"  //--- \u044d\u0442\u0438 \u0434\u0432\u0435 \u043a\u043d\u043e\u043f\u043a\u0438 \u0431\u0443\u0434\u0443\u0442 \u0432 \u043e\u0434\u043d\u043e\u0439 \u0441\u0442\u0440\u043e\u043a\u0435.\n    newLine() // \u0438\u043b\u0438 br()\n    \"otherButton\" webAppInfo \"data\"       // \u044d\u0442\u043e \u0431\u0443\u0434\u0435\u0442 \u0432 \u0434\u0440\u0443\u0433\u043e\u0439 \u0441\u0442\u0440\u043e\u043a\u0435\n\n    // \u0432\u044b \u0442\u0430\u043a\u0436\u0435 \u043c\u043e\u0436\u0435\u0442\u0435 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c \u0434\u0440\u0443\u0433\u043e\u0439 \u0441\u0442\u0438\u043b\u044c \u0432\u043d\u0443\u0442\u0440\u0438 \u0431\u0438\u043b\u0434\u0435\u0440\u0430:\n    callbackData(\"buttonName\") { \"callbackData\" }\n}.send(user, bot)\n</code></pre> <p>\u0411\u043e\u043b\u0435\u0435 \u043f\u043e\u0434\u0440\u043e\u0431\u043d\u0443\u044e \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044e \u043c\u043e\u0436\u043d\u043e \u043d\u0430\u0439\u0442\u0438 \u0432 \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u0430\u0446\u0438\u0438 \u0431\u0438\u043b\u0434\u0435\u0440\u0430 documentation.</p>"},{"location":"ru/Actions/#reply-keyboard-markup","title":"Reply Keyboard Markup","text":"<p>\u042d\u0442\u043e\u0442 \u0431\u0438\u043b\u0434\u0435\u0440 \u043f\u043e\u0437\u0432\u043e\u043b\u044f\u0435\u0442 \u0441\u043e\u0437\u0434\u0430\u0432\u0430\u0442\u044c \u043a\u043d\u043e\u043f\u043a\u0438 \u043c\u0435\u043d\u044e.</p> <pre><code>message{ \"Test\" }.replyKeyboardMarkup {\n  + \"Menu button\"     // \u0432\u044b \u043c\u043e\u0436\u0435\u0442\u0435 \u0434\u043e\u0431\u0430\u0432\u043b\u044f\u0442\u044c \u043a\u043d\u043e\u043f\u043a\u0438 \u0441 \u043f\u043e\u043c\u043e\u0449\u044c\u044e \u0443\u043d\u0430\u0440\u043d\u043e\u0433\u043e \u043e\u043f\u0435\u0440\u0430\u0442\u043e\u0440\u0430 \u043f\u043b\u044e\u0441\n  + \"Menu button 2\"\n  br() // \u043f\u0435\u0440\u0435\u0445\u043e\u0434 \u043d\u0430 \u0432\u0442\u043e\u0440\u0443\u044e \u0441\u0442\u0440\u043e\u043a\u0443\n  \"Send polls \ud83d\udc40\" requestPoll true   // \u043a\u043d\u043e\u043f\u043a\u0430 \u0441 \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u043e\u043c\n\n  options {\n    resizeKeyboard = true\n  }\n}.send(user, bot)\n</code></pre> <p>\u0414\u043e\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044c\u043d\u044b\u0435 \u043e\u043f\u0446\u0438\u0438, \u043f\u0440\u0438\u043c\u0435\u043d\u0438\u043c\u044b\u0435 \u043a \u043a\u043b\u0430\u0432\u0438\u0430\u0442\u0443\u0440\u0435, \u043c\u043e\u0436\u043d\u043e \u043d\u0430\u0439\u0442\u0438 \u0432 <code>ReplyKeyboardMarkupOptions</code>.</p> <p>\u0411\u043e\u043b\u0435\u0435 \u043f\u043e\u0434\u0440\u043e\u0431\u043d\u0443\u044e \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044e \u043e \u043c\u0435\u0442\u043e\u0434\u0430\u0445 \u043c\u043e\u0436\u043d\u043e \u043d\u0430\u0439\u0442\u0438 \u0432 \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u0430\u0446\u0438\u0438.</p> <p>\u0412 \u043e\u0441\u043d\u043e\u0432\u043d\u043e\u043c \u0443\u0434\u043e\u0431\u043d\u043e \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c DSL \u0434\u043b\u044f \u0441\u0431\u043e\u0440\u0430 \u0440\u0430\u0437\u043c\u0435\u0442\u043a\u0438 \u043a\u043b\u0430\u0432\u0438\u0430\u0442\u0443\u0440\u044b, \u043d\u043e \u043f\u0440\u0438 \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e\u0441\u0442\u0438 \u0432\u044b \u0442\u0430\u043a\u0436\u0435 \u043c\u043e\u0436\u0435\u0442\u0435 \u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0440\u0430\u0437\u043c\u0435\u0442\u043a\u0443 \u0432\u0440\u0443\u0447\u043d\u0443\u044e.</p> <pre><code>message{ \"*Test*\" }.markup {\n    InlineKeyboardMarkup(\n        InlineKeyboardButton(\"test\", callbackData = \"testCallback\")\n    )\n}.send(user, bot)\n</code></pre> <pre><code>message{ \"*Test*\" }.markup {\n    ReplyKeyboardMarkup(\n        KeyboardButton(\"Test menu button\")\n    )\n}.send(user, bot)\n</code></pre>"},{"location":"ru/Actions/#entities","title":"Entities","text":"<p>\u0422\u0430\u043a\u0436\u0435 \u0441\u0443\u0449\u0435\u0441\u0442\u0432\u0443\u0435\u0442 \u043c\u0435\u0442\u043e\u0434 \u0434\u043b\u044f \u043e\u0442\u043f\u0440\u0430\u0432\u043a\u0438 <code>MessageEntity</code>.</p> <p>\u041f\u0440\u0438\u043c\u0435\u0440 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u044f:</p> <pre><code>message{ \"Test \\$hello\" }.replyKeyboardMarkup {\n    +\"Test menu button\"\n}.entities {\n    5 to 15 url \"https://google.com\" // \u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c TextLink\n    entity(EntityType.Bold, 0, 4)\n    entity(EntityType.Cashtag, 5, 5) // \u043e\u0431\u0440\u0430\u0442\u043d\u044b\u0439 \u0441\u043b\u0435\u0448 \u043d\u0435 \u0441\u0447\u0438\u0442\u0430\u0435\u0442\u0441\u044f (\u043f\u043e\u0442\u043e\u043c\u0443 \u0447\u0442\u043e \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u0442\u0441\u044f \u0434\u043b\u044f \u043a\u043e\u043c\u043f\u0438\u043b\u044f\u0442\u043e\u0440\u0430)\n}.send(user, bot)\n</code></pre>"},{"location":"ru/Actions/#entities_1","title":"\u041a\u043e\u043d\u0442\u0435\u043a\u0441\u0442\u043d\u044b\u0435 entities.","text":"<p>Entities \u0442\u0430\u043a\u0436\u0435 \u043c\u043e\u0433\u0443\u0442 \u0431\u044b\u0442\u044c \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u044b \u0447\u0435\u0440\u0435\u0437 \u043a\u043e\u043d\u0442\u0435\u043a\u0441\u0442 \u043d\u0435\u043a\u043e\u0442\u043e\u0440\u044b\u0445 \u043a\u043e\u043d\u0441\u0442\u0440\u0443\u043a\u0446\u0438\u0439, \u043e\u043d\u0438 \u043f\u043e\u043c\u0435\u0447\u0435\u043d\u044b \u0441\u043f\u0435\u0446\u0438\u0430\u043b\u044c\u043d\u044b\u043c \u0438\u043d\u0442\u0435\u0440\u0444\u0435\u0439\u0441\u043e\u043c EntitiesContextBuilder, \u043a\u043e\u0442\u043e\u0440\u044b\u0439 \u0442\u0430\u043a\u0436\u0435 \u043f\u0440\u0438\u0441\u0443\u0442\u0441\u0442\u0432\u0443\u0435\u0442 \u0432 feature caption.</p> <p>\u041f\u0440\u0438\u043c\u0435\u0440 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u044f:</p> <pre><code>message { \"usual text \" - bold { \"this is bold text\" } - \" continue usual\" }.send(user, bot)\n</code></pre> <p>\u041f\u043e\u0434\u0434\u0435\u0440\u0436\u0438\u0432\u0430\u044e\u0442\u0441\u044f \u0432\u0441\u0435 \u0432\u0438\u0434\u044b entity types.</p>"},{"location":"ru/Actions/#caption","title":"Caption","text":"<p>\u0422\u0430\u043a\u0436\u0435 \u043c\u0435\u0442\u043e\u0434 <code>caption</code> \u043c\u043e\u0436\u0435\u0442 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c\u0441\u044f \u0434\u043b\u044f \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0438\u044f \u043f\u043e\u0434\u043f\u0438\u0441\u0435\u0439 \u043a \u043c\u0435\u0434\u0438\u0430\u0444\u0430\u0439\u043b\u0430\u043c.</p> <p>\u041f\u0440\u0438\u043c\u0435\u0440 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u044f:</p> <pre><code>photo { \"FILE_ID\" }.caption { \"Test caption\" }.send(user, bot)\n</code></pre>"},{"location":"ru/Actions/#_1","title":"\u0421\u043c. \u0442\u0430\u043a\u0436\u0435","text":"<ul> <li>Bot context</li> <li>FSM | Conversation handling</li> </ul>"},{"location":"ru/Activites-and-Processors/","title":"\u0410\u043a\u0442\u0438\u0432\u043d\u043e\u0441\u0442\u0438 \u0438 \u043f\u0440\u043e\u0446\u0435\u0441\u0441\u043e\u0440\u044b","text":""},{"location":"ru/Activites-and-Processors/#_1","title":"\u0412\u0432\u0435\u0434\u0435\u043d\u0438\u0435","text":"<p><code>Activity</code> \u0432 \u0442\u0435\u0440\u043c\u0438\u043d\u0430\u0445 \u044d\u0442\u043e\u0439 \u0431\u0438\u0431\u043b\u0438\u043e\u0442\u0435\u043a\u0438 - \u044d\u0442\u043e \u0430\u0431\u0441\u0442\u0440\u0430\u043a\u0442\u043d\u0430\u044f \u0441\u0443\u0449\u043d\u043e\u0441\u0442\u044c, \u043a\u043e\u0442\u043e\u0440\u0430\u044f \u044f\u0432\u043b\u044f\u0435\u0442\u0441\u044f \u043e\u0431\u043e\u0431\u0449\u0435\u043d\u0438\u0435\u043c \u0442\u0430\u043a\u0438\u0445 \u0441\u0443\u0449\u043d\u043e\u0441\u0442\u0435\u0439, \u043a\u0430\u043a <code>@CommandHandler</code>, <code>@InputHandler</code>, <code>@UnprocessedHandler</code> \u0438 <code>@CommonHandler</code>.</p> <p>\u0422\u0430\u043a\u0436\u0435 \u043e\u0437\u043d\u0430\u043a\u043e\u043c\u044c\u0442\u0435\u0441\u044c \u0441\u043e \u0441\u0442\u0430\u0442\u044c\u0435\u0439 \u043e\u0431 \u043e\u0431\u0440\u0430\u0431\u043e\u0442\u0447\u0438\u043a\u0430\u0445.</p>"},{"location":"ru/Activites-and-Processors/#_2","title":"\u0421\u0431\u043e\u0440 \u0430\u043a\u0442\u0438\u0432\u043d\u043e\u0441\u0442\u0435\u0439","text":"<p>\u0410\u043a\u0442\u0438\u0432\u043d\u043e\u0441\u0442\u0438 \u0441\u043e\u0431\u0438\u0440\u0430\u044e\u0442\u0441\u044f \u0438 \u0433\u043e\u0442\u043e\u0432\u044f\u0442 \u0432\u0435\u0441\u044c \u043a\u043e\u043d\u0442\u0435\u043a\u0441\u0442 \u0432\u043e \u0432\u0440\u0435\u043c\u044f \u043a\u043e\u043c\u043f\u0438\u043b\u044f\u0446\u0438\u0438 (\u0437\u0430 \u0438\u0441\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u0435\u043c \u0442\u0435\u0445, \u043a\u043e\u0442\u043e\u0440\u044b\u0435 \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u0435\u043d\u044b \u0447\u0435\u0440\u0435\u0437 \u0444\u0443\u043d\u043a\u0446\u0438\u043e\u043d\u0430\u043b\u044c\u043d\u044b\u0439 dsl).</p> <p>\u0415\u0441\u043b\u0438 \u0432\u044b \u0445\u043e\u0442\u0438\u0442\u0435 \u043e\u0433\u0440\u0430\u043d\u0438\u0447\u0438\u0442\u044c \u043e\u0431\u043b\u0430\u0441\u0442\u044c, \u0432 \u043a\u043e\u0442\u043e\u0440\u043e\u0439 \u0431\u0443\u0434\u0435\u0442 \u0432\u044b\u043f\u043e\u043b\u043d\u044f\u0442\u044c\u0441\u044f \u043f\u043e\u0438\u0441\u043a \u043f\u0430\u043a\u0435\u0442\u0430, \u0432\u044b \u043c\u043e\u0436\u0435\u0442\u0435 \u043f\u0435\u0440\u0435\u0434\u0430\u0442\u044c \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440 \u0432 \u043f\u043b\u0430\u0433\u0438\u043d:</p> <pre><code>ktGram {\n    packages = listOf(\"com.example.mybot\")\n}\n</code></pre> <p>\u0438\u043b\u0438 \u0431\u0435\u0437 \u043f\u043b\u0430\u0433\u0438\u043d\u0430 \u0447\u0435\u0440\u0435\u0437 ksp:</p> <pre><code>ksp {\n    arg(\"package\", \"com.example.mybot\")\n}\n</code></pre> <p>\u043e\u0431\u0440\u0430\u0442\u0438\u0442\u0435 \u0432\u043d\u0438\u043c\u0430\u043d\u0438\u0435, \u0447\u0442\u043e \u0432 \u0442\u0430\u043a\u043e\u043c \u0441\u043b\u0443\u0447\u0430\u0435, \u0447\u0442\u043e\u0431\u044b \u0441\u043e\u0431\u0440\u0430\u043d\u043d\u044b\u0435 \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u044f \u043e\u0431\u0440\u0430\u0431\u0430\u0442\u044b\u0432\u0430\u043b\u0438\u0441\u044c \u043a\u043e\u0440\u0440\u0435\u043a\u0442\u043d\u043e, \u0432\u044b \u0442\u0430\u043a\u0436\u0435 \u0434\u043e\u043b\u0436\u043d\u044b \u0443\u043a\u0430\u0437\u0430\u0442\u044c \u043f\u0430\u043a\u0435\u0442 \u0432 \u0441\u0430\u043c\u043e\u043c \u044d\u043a\u0437\u0435\u043c\u043f\u043b\u044f\u0440\u0435.</p> <pre><code>fun main() = runBlocking {\n    val bot = TelegramBot(\"BOT_TOKEN\", \"com.example.mybot\")\n\n    bot.handleUpdates()\n    // \u0437\u0430\u043f\u0443\u0441\u043a \u0441\u043b\u0443\u0448\u0430\u0442\u0435\u043b\u044f long-polling\n}\n</code></pre> <p>\u044d\u0442\u0430 \u043e\u043f\u0446\u0438\u044f \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0430 \u0434\u043b\u044f \u0432\u043e\u0437\u043c\u043e\u0436\u043d\u043e\u0441\u0442\u0438 \u0437\u0430\u043f\u0443\u0441\u043a\u0430 \u043d\u0435\u0441\u043a\u043e\u043b\u044c\u043a\u0438\u0445 \u044d\u043a\u0437\u0435\u043c\u043f\u043b\u044f\u0440\u043e\u0432 \u0431\u043e\u0442\u0430:</p> <pre><code>ktGram {\n    packages = listOf(\"com.example.mybot\", \"com.example.mybot2\")\n}\n</code></pre> <p>\u0438\u043b\u0438 \u0435\u0441\u043b\u0438 \u0432\u044b \u043d\u0435 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u0442\u0435 \u043f\u043b\u0430\u0433\u0438\u043d \u0434\u043b\u044f \u0443\u043a\u0430\u0437\u0430\u043d\u0438\u044f \u0440\u0430\u0437\u043d\u044b\u0445 \u043f\u0430\u043a\u0435\u0442\u043e\u0432, \u0432\u0430\u043c \u043d\u0443\u0436\u043d\u043e \u0443\u043a\u0430\u0437\u0430\u0442\u044c \u0438\u0445 \u0447\u0435\u0440\u0435\u0437 \u0440\u0430\u0437\u0434\u0435\u043b\u0438\u0442\u0435\u043b\u044c <code>;</code>:</p> <pre><code>ksp {\n    arg(\"package\", \"com.example.mybot;com.example.mybot2\")\n}\n</code></pre>"},{"location":"ru/Activites-and-Processors/#_3","title":"\u041e\u0431\u0440\u0430\u0431\u043e\u0442\u043a\u0430","text":""},{"location":"ru/Activites-and-Processors/#_4","title":"\u0412\u0435\u0431\u0445\u0443\u043a\u0438","text":"<p>\u0412 \u0432\u0430\u0448\u0435\u043c \u043a\u043e\u043d\u0442\u0440\u043e\u043b\u043b\u0435\u0440\u0435 (\u0438\u043b\u0438 \u0434\u0440\u0443\u0433\u043e\u043c \u043c\u0435\u0441\u0442\u0435, \u0433\u0434\u0435 \u043e\u0431\u0440\u0430\u0431\u0430\u0442\u044b\u0432\u0430\u0435\u0442\u0441\u044f <code>webhook</code>), \u0432\u044b \u0432\u044b\u0437\u044b\u0432\u0430\u0435\u0442\u0435: <code>bot.update.parseAndHandle(webhookString)</code></p>"},{"location":"ru/Activites-and-Processors/#long-polling","title":"Long polling","text":"<p>\u0412\u044b\u0437\u043e\u0432\u0438\u0442\u0435: <code>bot.handleUpdates()</code> \u0438\u043b\u0438 \u0447\u0435\u0440\u0435\u0437 <code>bot.update.setListener { handle(it) }</code></p>"},{"location":"ru/Activites-and-Processors/#_5","title":"\u0421\u043c. \u0442\u0430\u043a\u0436\u0435","text":"<ul> <li>\u0420\u0430\u0437\u0431\u043e\u0440 \u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0439</li> <li>\u0412\u044b\u0437\u043e\u0432 \u0430\u043a\u0442\u0438\u0432\u043d\u043e\u0441\u0442\u0438</li> <li>\u0414\u0435\u0439\u0441\u0442\u0432\u0438\u044f</li> </ul>"},{"location":"ru/Activity-invocation/","title":"Activity Invocation","text":"<p>During activity invocation, it is possible to pass the bot context, as it is declared as a parameter in target functions.</p> <p>The parameters that can be passed are:</p> <ul> <li><code>ProcessedUpdate</code> (and all its subclasses) - current processing update.</li> <li><code>ProcessingContext</code> - low level context of handling activity.</li> <li><code>User</code> - if present.</li> <li><code>Chat</code> - if present.</li> <li><code>TelegramBot</code> - current bot instance.</li> </ul> <p>It is also possible to add a custom type for passing.</p> <p>To do this, add a class that implements <code>Autowiring&lt;T&gt;</code> and mark it with the <code>@Injectable</code> annotation.</p> <p>After implementing the <code>Autowiring</code> interface - <code>T</code> will be available for passing in target functions and will be obtained through the method described in the interface.</p> <pre><code>@Injectable\nobject UserResolver : Autowiring&lt;UserRecord&gt; {\n    override suspend fun get(update: ProcessedUpdate, bot: TelegramBot): UserRecord? {\n        return userRepository.getUserByTgId(update.user.id)\n    }\n}\n</code></pre> <p>Other parameters declared in functions will be searched in parsed parameters.</p> <p>Additionally, parsed parameters during passing can be cast to certain types, here is their list:</p> <ul> <li><code>String</code></li> <li><code>Integer</code></li> <li><code>Long</code></li> <li><code>Short</code></li> <li><code>Float</code></li> <li><code>Double</code></li> </ul> <p>Moreover, note that if parameters are declared and missing (or in parsed parameters or for example <code>User</code> is missing in <code>Update</code>) or the declared type does not fit the received parameter in the function, <code>null</code> will be passed so be careful.</p> <p>Summarizing everything, below here is an example of how function parameters are usually formed:</p> <p> </p>"},{"location":"ru/Bot-Context/","title":"\u041a\u043e\u043d\u0442\u0435\u043a\u0441\u0442 \u0431\u043e\u0442\u0430","text":"<p>\u0411\u043e\u0442 \u0442\u0430\u043a\u0436\u0435 \u043c\u043e\u0436\u0435\u0442 \u043f\u0440\u0435\u0434\u043e\u0441\u0442\u0430\u0432\u043b\u044f\u0442\u044c \u0432\u043e\u0437\u043c\u043e\u0436\u043d\u043e\u0441\u0442\u044c \u0437\u0430\u043f\u043e\u043c\u0438\u043d\u0430\u0442\u044c \u043d\u0435\u043a\u043e\u0442\u043e\u0440\u044b\u0435 \u0434\u0430\u043d\u043d\u044b\u0435 \u0447\u0435\u0440\u0435\u0437 \u0438\u043d\u0442\u0435\u0440\u0444\u0435\u0439\u0441\u044b <code>UserData</code> \u0438 <code>ClassData</code>.</p> <ul> <li><code>userData</code> - \u044d\u0442\u043e \u0434\u0430\u043d\u043d\u044b\u0435 \u0443\u0440\u043e\u0432\u043d\u044f \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f.</li> <li><code>classData</code> - \u044d\u0442\u043e \u0434\u0430\u043d\u043d\u044b\u0435 \u0443\u0440\u043e\u0432\u043d\u044f \u043a\u043b\u0430\u0441\u0441\u0430, \u0442.\u0435. \u0434\u0430\u043d\u043d\u044b\u0435 \u0431\u0443\u0434\u0443\u0442 \u0445\u0440\u0430\u043d\u0438\u0442\u044c\u0441\u044f \u0434\u043e \u0442\u0435\u0445 \u043f\u043e\u0440, \u043f\u043e\u043a\u0430 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c \u043d\u0435 \u043f\u0435\u0440\u0435\u0439\u0434\u0435\u0442 \u043a \u043a\u043e\u043c\u0430\u043d\u0434\u0435 \u0438\u043b\u0438 \u0432\u0432\u043e\u0434\u0443, \u043a\u043e\u0442\u043e\u0440\u044b\u0435 \u043d\u0430\u0445\u043e\u0434\u044f\u0442\u0441\u044f \u0432   \u0434\u0440\u0443\u0433\u043e\u043c \u043a\u043b\u0430\u0441\u0441\u0435. (\u0432 \u0440\u0435\u0436\u0438\u043c\u0435 \u0444\u0443\u043d\u043a\u0446\u0438\u0439 \u043e\u043d \u0431\u0443\u0434\u0435\u0442 \u0440\u0430\u0431\u043e\u0442\u0430\u0442\u044c \u043a\u0430\u043a \u0434\u0430\u043d\u043d\u044b\u0435 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f)</li> </ul> <p>\u041f\u043e \u0443\u043c\u043e\u043b\u0447\u0430\u043d\u0438\u044e \u0440\u0435\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u044f \u043f\u0440\u0435\u0434\u043e\u0441\u0442\u0430\u0432\u043b\u044f\u0435\u0442\u0441\u044f \u0447\u0435\u0440\u0435\u0437 <code>ConcurrentHashMap</code>, \u043d\u043e \u043c\u043e\u0436\u0435\u0442 \u0431\u044b\u0442\u044c \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0430 \u043d\u0430 \u0432\u0430\u0448\u0443 \u0441\u043e\u0431\u0441\u0442\u0432\u0435\u043d\u043d\u0443\u044e \u0447\u0435\u0440\u0435\u0437 \u0438\u043d\u0442\u0435\u0440\u0444\u0435\u0439\u0441\u044b <code>UserData</code> \u0438 <code>ClassData</code> \u0441 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u0435\u043c \u0438\u043d\u0441\u0442\u0440\u0443\u043c\u0435\u043d\u0442\u043e\u0432 \u0445\u0440\u0430\u043d\u0435\u043d\u0438\u044f \u0434\u0430\u043d\u043d\u044b\u0445 \u043f\u043e \u0432\u0430\u0448\u0435\u043c\u0443 \u0432\u044b\u0431\u043e\u0440\u0443.</p> <p>Caution</p> <p>\u041d\u0435 \u0437\u0430\u0431\u0443\u0434\u044c\u0442\u0435 \u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u044c gradle <code>kspKotlin</code>/\u0438\u043b\u0438 \u043b\u044e\u0431\u0443\u044e \u0441\u043e\u043e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0443\u044e\u0449\u0443\u044e \u0437\u0430\u0434\u0430\u0447\u0443 ksp, \u0447\u0442\u043e\u0431\u044b \u0441\u0434\u0435\u043b\u0430\u0442\u044c \u0434\u043e\u0441\u0442\u0443\u043f\u043d\u044b\u043c\u0438 \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u044b\u0435 \u043f\u0440\u0438\u0432\u044f\u0437\u043a\u0438 codegen.</p> <p>\u0427\u0442\u043e\u0431\u044b \u0438\u0437\u043c\u0435\u043d\u0438\u0442\u044c, \u0432\u0441\u0435 \u0447\u0442\u043e \u0432\u0430\u043c \u043d\u0443\u0436\u043d\u043e \u0441\u0434\u0435\u043b\u0430\u0442\u044c - \u044d\u0442\u043e \u043f\u043e\u043c\u0435\u0441\u0442\u0438\u0442\u044c \u043f\u043e\u0434 \u0432\u0430\u0448\u0435\u0439 \u0440\u0435\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u0435\u0439 \u0430\u043d\u043d\u043e\u0442\u0430\u0446\u0438\u044e <code>@CtxProvider</code> \u0438 \u0437\u0430\u043f\u0443\u0441\u0442\u0438\u0442\u044c \u0437\u0430\u0434\u0430\u0447\u0443 gradle ksp (\u0438\u043b\u0438 \u0441\u0431\u043e\u0440\u043a\u0443).</p> <pre><code>@CtxProvider\nclass MyRedis : UserData&lt;String&gt; {\n    // ...\n}\n</code></pre>"},{"location":"ru/Bot-Context/#_1","title":"\u0421\u043c. \u0442\u0430\u043a\u0436\u0435","text":"<ul> <li>\u0414\u043e\u043c\u043e\u0439</li> <li>\u0420\u0430\u0437\u0431\u043e\u0440 \u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0439</li> </ul>"},{"location":"ru/Bot-configuration/","title":"\u041a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u044f \u0431\u043e\u0442\u0430","text":"<p>\u0411\u0438\u0431\u043b\u0438\u043e\u0442\u0435\u043a\u0430 \u043f\u0440\u0435\u0434\u043e\u0441\u0442\u0430\u0432\u043b\u044f\u0435\u0442 \u043c\u043d\u043e\u0436\u0435\u0441\u0442\u0432\u043e \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u043e\u0432 \u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u0438, \u0432\u044b \u043c\u043e\u0436\u0435\u0442\u0435 \u043e\u0437\u043d\u0430\u043a\u043e\u043c\u0438\u0442\u044c\u0441\u044f \u0441 API \u0432 \u043e\u043f\u0438\u0441\u0430\u043d\u0438\u0438 \u043a\u043b\u0430\u0441\u0441\u0430 <code>BotConfiguration</code>.</p> <p>\u0421\u0443\u0449\u0435\u0441\u0442\u0432\u0443\u0435\u0442 \u0442\u0430\u043a\u0436\u0435 \u0434\u0432\u0430 \u043f\u043e\u0434\u0445\u043e\u0434\u0430 \u043a \u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u0438 \u0431\u043e\u0442\u0430:</p>"},{"location":"ru/Bot-configuration/#-","title":"\u041b\u044f\u043c\u0431\u0434\u0430-\u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0442\u043e\u0440","text":"<pre><code>// ...\nval bot = TelegramBot(\"BOT_TOKEN\") {\n  inputListener = RedisInputListenerImpl()\n  classManager = KoinClassManagerImpl()\n  logging {\n      botLogLevel = LogLvl.DEBUG\n  }\n}\n// ...\n</code></pre>"},{"location":"ru/Bot-configuration/#configloader","title":"\u0418\u043d\u0442\u0435\u0440\u0444\u0435\u0439\u0441 ConfigLoader","text":"<p>\u0422\u0430\u043a\u0436\u0435 \u0441\u0443\u0449\u0435\u0441\u0442\u0432\u0443\u0435\u0442 \u0432\u043e\u0437\u043c\u043e\u0436\u043d\u043e\u0441\u0442\u044c \u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u0438 \u0447\u0435\u0440\u0435\u0437 \u0441\u043f\u0435\u0446\u0438\u0430\u043b\u044c\u043d\u044b\u0439 \u0438\u043d\u0442\u0435\u0440\u0444\u0435\u0439\u0441 <code>ConfigLoader</code>, \u043a\u043e\u0442\u043e\u0440\u044b\u0439 \u0432\u044b \u043c\u043e\u0436\u0435\u0442\u0435 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c \u0434\u043b\u044f \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0438 \u043d\u0430\u0441\u0442\u0440\u043e\u0435\u043a \u0438\u0437 \u0432\u043d\u0435\u0448\u043d\u0438\u0445 \u0438\u0441\u0442\u043e\u0447\u043d\u0438\u043a\u043e\u0432 (<code>properties</code>, <code>command line args</code> \u0438 \u0442.\u0434.).</p> <p>\u0420\u0435\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u044f \u044d\u0442\u043e\u0433\u043e \u0438\u043d\u0442\u0435\u0440\u0444\u0435\u0439\u0441\u0430 \u043c\u043e\u0436\u0435\u0442 \u0431\u044b\u0442\u044c \u043f\u0435\u0440\u0435\u0434\u0430\u043d\u0430 \u0447\u0435\u0440\u0435\u0437 \u0432\u0442\u043e\u0440\u0438\u0447\u043d\u044b\u0439 \u043a\u043e\u043d\u0441\u0442\u0440\u0443\u043a\u0442\u043e\u0440, \u0438 \u044d\u043a\u0437\u0435\u043c\u043f\u043b\u044f\u0440 \u0431\u0443\u0434\u0435\u0442 \u0441\u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0438\u0440\u043e\u0432\u0430\u043d \u0441\u043e\u043e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0443\u044e\u0449\u0438\u043c \u043e\u0431\u0440\u0430\u0437\u043e\u043c.</p> <pre><code>val bot = TelegramBot(ConfigLoaderImpl)\n</code></pre> <p>\u0412 \u043d\u0430\u0441\u0442\u043e\u044f\u0449\u0435\u0435 \u0432\u0440\u0435\u043c\u044f \u043f\u0440\u0435\u0434\u043e\u0441\u0442\u0430\u0432\u043b\u044f\u0435\u0442\u0441\u044f \u043d\u0435\u0441\u043a\u043e\u043b\u044c\u043a\u043e \u043c\u043e\u0434\u0443\u043b\u0435\u0439, \u0440\u0435\u0430\u043b\u0438\u0437\u0443\u044e\u0449\u0438\u0445 \u044d\u0442\u043e\u0442 \u0438\u043d\u0442\u0435\u0440\u0444\u0435\u0439\u0441, \u0442\u0430\u043a\u0438\u0445 \u043a\u0430\u043a <code>ktgram-config-env</code>, <code>ktgram-config-toml</code>.</p>"},{"location":"ru/Bot-configuration/#botconfiguration","title":"\u041e\u0431\u0437\u043e\u0440 BotConfiguration","text":""},{"location":"ru/Bot-configuration/#botconfiguration_1","title":"BotConfiguration","text":"<p>\u041a\u043b\u0430\u0441\u0441 <code>BotConfiguration</code> \u044f\u0432\u043b\u044f\u0435\u0442\u0441\u044f \u0446\u0435\u043d\u0442\u0440\u0430\u043b\u044c\u043d\u044b\u043c \u0443\u0437\u043b\u043e\u043c \u0434\u043b\u044f \u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u0438 \u0431\u043e\u0442\u0430. \u041e\u043d \u0432\u043a\u043b\u044e\u0447\u0430\u0435\u0442 \u0441\u0432\u043e\u0439\u0441\u0442\u0432\u0430 \u0434\u043b\u044f \u0438\u0434\u0435\u043d\u0442\u0438\u0444\u0438\u043a\u0430\u0446\u0438\u0438 \u0431\u043e\u0442\u0430, \u043d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438 \u0445\u043e\u0441\u0442\u0430 API, \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u0435\u043d\u0438\u044f \u0440\u0430\u0431\u043e\u0442\u044b \u0431\u043e\u0442\u0430 \u0432 \u0442\u0435\u0441\u0442\u043e\u0432\u043e\u0439 \u0441\u0440\u0435\u0434\u0435, \u043e\u0431\u0440\u0430\u0431\u043e\u0442\u043a\u0438 \u0432\u0445\u043e\u0434\u044f\u0449\u0438\u0445 \u0434\u0430\u043d\u043d\u044b\u0445, \u0443\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u0438\u044f \u043a\u043b\u0430\u0441\u0441\u0430\u043c\u0438 \u0438 \u043a\u043e\u043d\u0442\u0440\u043e\u043b\u044f \u0430\u0432\u0442\u043e\u0443\u0434\u0430\u043b\u0435\u043d\u0438\u044f \u0432\u0445\u043e\u0434\u044f\u0449\u0438\u0445 \u0434\u0430\u043d\u043d\u044b\u0445. \u041a\u0440\u043e\u043c\u0435 \u0442\u043e\u0433\u043e, \u043e\u043d \u043f\u0440\u0435\u0434\u043e\u0441\u0442\u0430\u0432\u043b\u044f\u0435\u0442 \u0432\u043d\u0443\u0442\u0440\u0435\u043d\u043d\u0438\u0435 \u0441\u0432\u043e\u0439\u0441\u0442\u0432\u0430 \u0434\u043b\u044f \u043e\u0433\u0440\u0430\u043d\u0438\u0447\u0435\u043d\u0438\u044f \u0447\u0430\u0441\u0442\u043e\u0442\u044b \u0437\u0430\u043f\u0440\u043e\u0441\u043e\u0432, \u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u0438 HTTP-\u043a\u043b\u0438\u0435\u043d\u0442\u0430, \u043b\u043e\u0433\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u044f, \u043f\u0440\u043e\u0441\u043b\u0443\u0448\u0438\u0432\u0430\u043d\u0438\u044f \u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0439 \u0438 \u043f\u0430\u0440\u0441\u0438\u043d\u0433\u0430 \u043a\u043e\u043c\u0430\u043d\u0434.</p>"},{"location":"ru/Bot-configuration/#_1","title":"\u0421\u0432\u043e\u0439\u0441\u0442\u0432\u0430","text":"<ul> <li><code>identifier</code>: \u0418\u0434\u0435\u043d\u0442\u0438\u0444\u0438\u0446\u0438\u0440\u0443\u0435\u0442 \u0440\u0430\u0437\u043b\u0438\u0447\u043d\u044b\u0435 \u044d\u043a\u0437\u0435\u043c\u043f\u043b\u044f\u0440\u044b \u0431\u043e\u0442\u0430 \u0432\u043e \u0432\u0440\u0435\u043c\u044f \u043c\u043d\u043e\u0433\u043e\u0431\u043e\u0442\u043d\u043e\u0439 \u043e\u0431\u0440\u0430\u0431\u043e\u0442\u043a\u0438.</li> <li><code>apiHost</code>: \u0425\u043e\u0441\u0442 Telegram API.</li> <li><code>isTestEnv</code>: \u0424\u043b\u0430\u0433, \u0443\u043a\u0430\u0437\u044b\u0432\u0430\u044e\u0449\u0438\u0439 \u0440\u0430\u0431\u043e\u0442\u0430\u0435\u0442 \u043b\u0438 \u0431\u043e\u0442 \u0432 \u0442\u0435\u0441\u0442\u043e\u0432\u043e\u0439 \u0441\u0440\u0435\u0434\u0435.</li> <li><code>inputListener</code>: \u042d\u043a\u0437\u0435\u043c\u043f\u043b\u044f\u0440 \u043a\u043b\u0430\u0441\u0441\u0430 \u0434\u043b\u044f \u043e\u0431\u0440\u0430\u0431\u043e\u0442\u043a\u0438 \u0432\u0445\u043e\u0434\u044f\u0449\u0438\u0445 \u0434\u0430\u043d\u043d\u044b\u0445.</li> <li><code>classManager</code>: \u041c\u0435\u043d\u0435\u0434\u0436\u0435\u0440, \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u043c\u044b\u0439 \u0434\u043b\u044f \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u044f \u043a\u043b\u0430\u0441\u0441\u043e\u0432.</li> <li><code>inputAutoRemoval</code>: \u0424\u043b\u0430\u0433, \u0440\u0435\u0433\u0443\u043b\u0438\u0440\u0443\u044e\u0449\u0438\u0439 \u0430\u0432\u0442\u043e\u0443\u0434\u0430\u043b\u0435\u043d\u0438\u0435 \u0442\u043e\u0447\u043a\u0438 \u0432\u0445\u043e\u0434\u0430 \u0432\u043e \u0432\u0440\u0435\u043c\u044f \u043e\u0431\u0440\u0430\u0431\u043e\u0442\u043a\u0438.</li> <li><code>exceptionHandlingStrategy</code>: \u041e\u043f\u0440\u0435\u0434\u0435\u043b\u044f\u0435\u0442 \u0441\u0442\u0440\u0430\u0442\u0435\u0433\u0438\u044e \u043e\u0431\u0440\u0430\u0431\u043e\u0442\u043a\u0438 \u0438\u0441\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u0439.<ul> <li><code>CollectToChannel</code> - \u0421\u043e\u0431\u0438\u0440\u0430\u0442\u044c \u0432 <code>TgUpdateHandler.caughtExceptions</code>.</li> <li><code>Throw</code> - \u0411\u0440\u043e\u0441\u0438\u0442\u044c \u0441\u043d\u043e\u0432\u0430, \u043e\u0431\u0435\u0440\u043d\u0443\u0442\u044b\u0439 \u0432 <code>TgException</code>.</li> <li><code>DoNothing</code> - \u041d\u0438\u0447\u0435\u0433\u043e \u043d\u0435 \u0434\u0435\u043b\u0430\u0442\u044c :)</li> <li><code>Handle</code> - \u0423\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c\u0441\u043a\u0438\u0439 \u043e\u0431\u0440\u0430\u0431\u043e\u0442\u0447\u0438\u043a.</li> </ul> </li> <li><code>throwExOnActionsFailure</code>: \u0411\u0440\u043e\u0441\u0438\u0442\u044c \u0438\u0441\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u0435, \u043a\u043e\u0433\u0434\u0430 \u043b\u044e\u0431\u043e\u0439 \u0437\u0430\u043f\u0440\u043e\u0441 \u0431\u043e\u0442\u0430 \u0437\u0430\u0432\u0435\u0440\u0448\u0430\u0435\u0442\u0441\u044f \u0441 \u043e\u0448\u0438\u0431\u043a\u043e\u0439.</li> </ul>"},{"location":"ru/Bot-configuration/#_2","title":"\u0411\u043b\u043e\u043a\u0438 \u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u0438","text":"<p><code>BotConfiguration</code> \u0442\u0430\u043a\u0436\u0435 \u043f\u0440\u0435\u0434\u043b\u0430\u0433\u0430\u0435\u0442 \u0444\u0443\u043d\u043a\u0446\u0438\u0438 \u0434\u043b\u044f \u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u0438 \u0441\u0432\u043e\u0438\u0445 \u0432\u043d\u0443\u0442\u0440\u0435\u043d\u043d\u0438\u0445 \u043a\u043e\u043c\u043f\u043e\u043d\u0435\u043d\u0442\u043e\u0432:</p> <ul> <li><code>httpClient(block: HttpConfiguration.() -&gt; Unit)</code>: \u041a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0438\u0440\u0443\u0435\u0442 HTTP-\u043a\u043b\u0438\u0435\u043d\u0442.</li> <li><code>logging(block: LoggingConfiguration.() -&gt; Unit)</code>: \u041a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0438\u0440\u0443\u0435\u0442 \u043b\u043e\u0433\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435.</li> <li><code>rateLimiter(block: RateLimiterConfiguration.() -&gt; Unit)</code>: \u041a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0438\u0440\u0443\u0435\u0442 \u043e\u0433\u0440\u0430\u043d\u0438\u0447\u0435\u043d\u0438\u0435 \u0447\u0430\u0441\u0442\u043e\u0442\u044b \u0437\u0430\u043f\u0440\u043e\u0441\u043e\u0432.</li> <li><code>updatesListener(block: UpdatesListenerConfiguration.() -&gt; Unit)</code>: \u041a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0438\u0440\u0443\u0435\u0442 \u043f\u0440\u043e\u0441\u043b\u0443\u0448\u0438\u0432\u0430\u0442\u0435\u043b\u044c \u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0439.</li> <li><code>commandParsing(block: CommandParsingConfiguration.() -&gt; Unit)</code>: \u0417\u0430\u0434\u0430\u0435\u0442 \u0448\u0430\u0431\u043b\u043e\u043d \u043f\u0430\u0440\u0441\u0438\u043d\u0433\u0430 \u043a\u043e\u043c\u0430\u043d\u0434.</li> </ul>"},{"location":"ru/Bot-configuration/#_3","title":"\u0421\u0432\u044f\u0437\u0430\u043d\u043d\u044b\u0435 \u043a\u043b\u0430\u0441\u0441\u044b \u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u0438","text":""},{"location":"ru/Bot-configuration/#ratelimiterconfiguration","title":"RateLimiterConfiguration","text":"<p>\u041a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0438\u0440\u0443\u0435\u0442 \u0433\u043b\u043e\u0431\u0430\u043b\u044c\u043d\u043e\u0435 \u043e\u0433\u0440\u0430\u043d\u0438\u0447\u0435\u043d\u0438\u0435 \u0447\u0430\u0441\u0442\u043e\u0442\u044b \u0437\u0430\u043f\u0440\u043e\u0441\u043e\u0432.</p> <ul> <li><code>limits</code>: \u0413\u043b\u043e\u0431\u0430\u043b\u044c\u043d\u044b\u0435 \u043e\u0433\u0440\u0430\u043d\u0438\u0447\u0435\u043d\u0438\u044f \u0447\u0430\u0441\u0442\u043e\u0442\u044b \u0437\u0430\u043f\u0440\u043e\u0441\u043e\u0432.</li> <li><code>mechanism</code>: \u041c\u0435\u0445\u0430\u043d\u0438\u0437\u043c, \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u043c\u044b\u0439 \u0434\u043b\u044f \u043e\u0433\u0440\u0430\u043d\u0438\u0447\u0435\u043d\u0438\u044f \u0447\u0430\u0441\u0442\u043e\u0442\u044b \u0437\u0430\u043f\u0440\u043e\u0441\u043e\u0432, \u043f\u043e \u0443\u043c\u043e\u043b\u0447\u0430\u043d\u0438\u044e \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u0442\u0441\u044f \u0430\u043b\u0433\u043e\u0440\u0438\u0442\u043c TokenBucket.</li> <li><code>exceededAction</code>: \u0414\u0435\u0439\u0441\u0442\u0432\u0438\u0435, \u043f\u0440\u0438\u043c\u0435\u043d\u044f\u0435\u043c\u043e\u0435 \u043f\u0440\u0438 \u043f\u0440\u0435\u0432\u044b\u0448\u0435\u043d\u0438\u0438 \u043b\u0438\u043c\u0438\u0442\u0430.</li> </ul>"},{"location":"ru/Bot-configuration/#httpconfiguration","title":"HttpConfiguration","text":"<p>\u0421\u043e\u0434\u0435\u0440\u0436\u0438\u0442 \u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u044e \u0434\u043b\u044f HTTP-\u043a\u043b\u0438\u0435\u043d\u0442\u0430 \u0431\u043e\u0442\u0430.</p> <ul> <li><code>requestTimeoutMillis</code>: \u0422\u0430\u0439\u043c\u0430\u0443\u0442 \u0437\u0430\u043f\u0440\u043e\u0441\u0430 \u0432 \u043c\u0438\u043b\u043b\u0438\u0441\u0435\u043a\u0443\u043d\u0434\u0430\u0445.</li> <li><code>connectTimeoutMillis</code>: \u0422\u0430\u0439\u043c\u0430\u0443\u0442 \u043f\u043e\u0434\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u044f \u0432 \u043c\u0438\u043b\u043b\u0438\u0441\u0435\u043a\u0443\u043d\u0434\u0430\u0445.</li> <li><code>socketTimeoutMillis</code>: \u0422\u0430\u0439\u043c\u0430\u0443\u0442 \u0441\u043e\u043a\u0435\u0442\u0430 \u0432 \u043c\u0438\u043b\u043b\u0438\u0441\u0435\u043a\u0443\u043d\u0434\u0430\u0445.</li> <li><code>maxRequestRetry</code>: \u041c\u0430\u043a\u0441\u0438\u043c\u0430\u043b\u044c\u043d\u043e\u0435 \u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u043f\u043e\u0432\u0442\u043e\u0440\u043e\u0432 HTTP-\u0437\u0430\u043f\u0440\u043e\u0441\u043e\u0432.</li> <li><code>retryStrategy</code>: \u0421\u0442\u0440\u0430\u0442\u0435\u0433\u0438\u044f \u0434\u043b\u044f \u043f\u043e\u0432\u0442\u043e\u0440\u043e\u0432, \u043d\u0430\u0441\u0442\u0440\u0430\u0438\u0432\u0430\u0435\u043c\u0430\u044f.</li> <li><code>retryDelay</code>: \u041c\u043d\u043e\u0436\u0438\u0442\u0435\u043b\u044c \u0434\u043b\u044f \u0442\u0430\u0439\u043c\u0430\u0443\u0442\u0430 \u043f\u0440\u0438 \u043a\u0430\u0436\u0434\u043e\u043c \u043f\u043e\u0432\u0442\u043e\u0440\u0435.</li> <li><code>proxy</code>: \u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438 \u043f\u0440\u043e\u043a\u0441\u0438 \u0434\u043b\u044f HTTP-\u0432\u044b\u0437\u043e\u0432\u043e\u0432.</li> <li><code>additionalHeaders</code>: \u0417\u0430\u0433\u043e\u043b\u043e\u0432\u043a\u0438, \u043f\u0440\u0438\u043c\u0435\u043d\u044f\u0435\u043c\u044b\u0435 \u043a \u043a\u0430\u0436\u0434\u043e\u043c\u0443 \u0437\u0430\u043f\u0440\u043e\u0441\u0443.</li> </ul>"},{"location":"ru/Bot-configuration/#loggingconfiguration","title":"LoggingConfiguration","text":"<p>\u0423\u043f\u0440\u0430\u0432\u043b\u044f\u0435\u0442 \u0443\u0440\u043e\u0432\u043d\u044f\u043c\u0438 \u043b\u043e\u0433\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u044f \u0434\u043b\u044f \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u0439 \u0431\u043e\u0442\u0430 \u0438 HTTP-\u0437\u0430\u043f\u0440\u043e\u0441\u043e\u0432.</p> <ul> <li><code>botLogLevel</code>: \u0423\u0440\u043e\u0432\u0435\u043d\u044c \u043b\u043e\u0433\u043e\u0432 \u0434\u043b\u044f \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u0439 \u0431\u043e\u0442\u0430.</li> <li><code>httpLogLevel</code>: \u0423\u0440\u043e\u0432\u0435\u043d\u044c \u043b\u043e\u0433\u043e\u0432 \u0434\u043b\u044f HTTP-\u0437\u0430\u043f\u0440\u043e\u0441\u043e\u0432.</li> </ul>"},{"location":"ru/Bot-configuration/#updateslistenerconfiguration","title":"UpdatesListenerConfiguration","text":"<p>\u041a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0438\u0440\u0443\u0435\u0442 \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b, \u0441\u0432\u044f\u0437\u0430\u043d\u043d\u044b\u0435 \u0441 \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u0435\u043c \u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0439.</p> <ul> <li><code>dispatcher</code>: \u0414\u0438\u0441\u043f\u0435\u0442\u0447\u0435\u0440 \u0434\u043b\u044f \u0441\u0431\u043e\u0440\u0430 \u0432\u0445\u043e\u0434\u044f\u0449\u0438\u0445 \u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0439.</li> <li><code>processingDispatcher</code>: \u0414\u0438\u0441\u043f\u0435\u0442\u0447\u0435\u0440 \u0434\u043b\u044f \u043e\u0431\u0440\u0430\u0431\u043e\u0442\u043a\u0438 \u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0439.</li> <li><code>pullingDelay</code>: \u0417\u0430\u0434\u0435\u0440\u0436\u043a\u0430 \u043f\u043e\u0441\u043b\u0435 \u043a\u0430\u0436\u0434\u043e\u0433\u043e \u0437\u0430\u043f\u0440\u043e\u0441\u0430 \u043d\u0430 \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u0435.</li> <li><code>updatesPollingTimeout</code>: \u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440 \u0442\u0430\u0439\u043c\u0430\u0443\u0442\u0430 \u0434\u043b\u044f \u043c\u0435\u0445\u0430\u043d\u0438\u0437\u043c\u0430 long-polling.</li> </ul>"},{"location":"ru/Bot-configuration/#commandparsingconfiguration","title":"CommandParsingConfiguration","text":"<p>\u0417\u0430\u0434\u0430\u0435\u0442 \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b \u0434\u043b\u044f \u043f\u0430\u0440\u0441\u0438\u043d\u0433\u0430 \u043a\u043e\u043c\u0430\u043d\u0434.</p> <ul> <li><code>commandDelimiter</code>: \u0420\u0430\u0437\u0434\u0435\u043b\u0438\u0442\u0435\u043b\u044c \u043c\u0435\u0436\u0434\u0443 \u043a\u043e\u043c\u0430\u043d\u0434\u043e\u0439 \u0438 \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u0430\u043c\u0438.</li> <li><code>parametersDelimiter</code>: \u0420\u0430\u0437\u0434\u0435\u043b\u0438\u0442\u0435\u043b\u044c \u043c\u0435\u0436\u0434\u0443 \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u0430\u043c\u0438.</li> <li><code>parameterValueDelimiter</code>: \u0420\u0430\u0437\u0434\u0435\u043b\u0438\u0442\u0435\u043b\u044c \u043c\u0435\u0436\u0434\u0443 \u043a\u043b\u044e\u0447\u043e\u043c \u0438 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435\u043c \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u0430.</li> <li><code>restrictSpacesInCommands</code>: \u0424\u043b\u0430\u0433, \u0443\u043a\u0430\u0437\u044b\u0432\u0430\u044e\u0449\u0438\u0439 \u0441\u043b\u0435\u0434\u0443\u0435\u0442 \u043b\u0438 \u0440\u0430\u0441\u0441\u043c\u0430\u0442\u0440\u0438\u0432\u0430\u0442\u044c \u043f\u0440\u043e\u0431\u0435\u043b\u044b \u0432 \u043a\u043e\u043c\u0430\u043d\u0434\u0430\u0445 \u043a\u0430\u043a \u043a\u043e\u043d\u0435\u0446 \u043a\u043e\u043c\u0430\u043d\u0434\u044b.</li> <li><code>useIdentifierInGroupCommands</code>: \u0418\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u0442 \u0438\u0434\u0435\u043d\u0442\u0438\u0444\u0438\u043a\u0430\u0442\u043e\u0440 \u0431\u043e\u0442\u0430 \u0434\u043b\u044f \u0441\u043e\u043f\u043e\u0441\u0442\u0430\u0432\u043b\u0435\u043d\u0438\u044f \u043a\u043e\u043c\u0430\u043d\u0434, \u0441\u043e\u0434\u0435\u0440\u0436\u0430\u0449\u0438\u0445 @.</li> </ul>"},{"location":"ru/Bot-configuration/#_4","title":"\u041f\u0440\u0438\u043c\u0435\u0440 \u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u0438","text":"<p>\u0412\u043e\u0442 \u043f\u0440\u0438\u043c\u0435\u0440 \u0442\u043e\u0433\u043e, \u043a\u0430\u043a \u043d\u0430\u0441\u0442\u0440\u043e\u0438\u0442\u044c \u0431\u043e\u0442\u0430 \u0441 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u0435\u043c \u044d\u0442\u0438\u0445 \u043a\u043b\u0430\u0441\u0441\u043e\u0432:</p> <pre><code>val bot = TelegramBot(\"TOKEN\") {\n    identifier = \"MyBot\",\n    apiHost = \"https://api.telegram.org\",\n    isTestEnv = true,\n    inputListener = InputListenerMapImpl(),\n    classManager = ClassManagerImpl(),\n\n    httpClient {\n        requestTimeoutMillis = 5000L\n        connectTimeoutMillis = 3000L\n        socketTimeoutMillis = 2000L\n    }\n    logging {\n        botLogLevel = LogLvl.DEBUG\n        httpLogLevel = HttpLogLevel.BODY\n    }\n    updatesListener {\n        dispatcher = Dispatchers.IO\n        processingDispatcher = Dispatchers.Unconfined\n        pullingDelay = 1000L\n    }\n    commandParsing {\n        commandDelimiter = '*'\n        parametersDelimiter = '&amp;'\n        restrictSpacesInCommands = true\n    }\n}\n</code></pre> <p>\u042d\u0442\u0430 \u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u044f \u0443\u0441\u0442\u0430\u043d\u0430\u0432\u043b\u0438\u0432\u0430\u0435\u0442 \u0431\u043e\u0442\u0430 \u0441 \u043a\u043e\u043d\u043a\u0440\u0435\u0442\u043d\u044b\u043c\u0438 \u0438\u0434\u0435\u043d\u0442\u0438\u0444\u0438\u043a\u0430\u0442\u043e\u0440\u0430\u043c\u0438, \u0432\u043a\u043b\u044e\u0447\u0430\u0435\u0442 \u0440\u0435\u0436\u0438\u043c \u0442\u0435\u0441\u0442\u043e\u0432\u043e\u0439 \u0441\u0440\u0435\u0434\u044b, \u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0438\u0440\u0443\u0435\u0442 \u043e\u0433\u0440\u0430\u043d\u0438\u0447\u0435\u043d\u0438\u0435 \u0447\u0430\u0441\u0442\u043e\u0442\u044b \u0437\u0430\u043f\u0440\u043e\u0441\u043e\u0432, \u043d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438 HTTP-\u043a\u043b\u0438\u0435\u043d\u0442\u0430, \u0443\u0440\u043e\u0432\u043d\u0438 \u043b\u043e\u0433\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u044f, \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b \u043f\u0440\u043e\u0441\u043b\u0443\u0448\u0438\u0432\u0430\u0442\u0435\u043b\u044f \u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0439 \u0438 \u043f\u0440\u0430\u0432\u0438\u043b\u0430 \u043f\u0430\u0440\u0441\u0438\u043d\u0433\u0430 \u043a\u043e\u043c\u0430\u043d\u0434.</p>"},{"location":"ru/Bot-configuration/#_5","title":"\u0418\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u044f \u044d\u0442\u0438 \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b \u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u0438, \u0440\u0430\u0437\u0440\u0430\u0431\u043e\u0442\u0447\u0438\u043a\u0438 \u043c\u043e\u0433\u0443\u0442 \u0442\u043e\u0447\u043d\u043e \u043d\u0430\u0441\u0442\u0440\u043e\u0438\u0442\u044c \u0441\u0432\u043e\u0438 \u0431\u043e\u0442\u044b \u0434\u043b\u044f \u0443\u0434\u043e\u0432\u043b\u0435\u0442\u0432\u043e\u0440\u0435\u043d\u0438\u044f \u043a\u043e\u043d\u043a\u0440\u0435\u0442\u043d\u044b\u0445 \u0442\u0440\u0435\u0431\u043e\u0432\u0430\u043d\u0438\u0439 \u0438 \u043e\u043f\u0442\u0438\u043c\u0438\u0437\u0430\u0446\u0438\u0438 \u043f\u0440\u043e\u0438\u0437\u0432\u043e\u0434\u0438\u0442\u0435\u043b\u044c\u043d\u043e\u0441\u0442\u0438 \u0432 \u0440\u0430\u0437\u043b\u0438\u0447\u043d\u044b\u0445 \u0441\u0446\u0435\u043d\u0430\u0440\u0438\u044f\u0445 \u044d\u043a\u0441\u043f\u043b\u0443\u0430\u0442\u0430\u0446\u0438\u0438.","text":""},{"location":"ru/F.A.Q/","title":"\u0412\u043e\u043f\u0440\u043e\u0441\u044b \u0438 \u043e\u0442\u0432\u0435\u0442\u044b","text":""},{"location":"ru/F.A.Q/#abstractmethoderror","title":"\u0418\u0441\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u0435 <code>AbstractMethodError</code>","text":"<p>\u0415\u0441\u043b\u0438 \u043f\u0440\u0438 \u0437\u0430\u043f\u0443\u0441\u043a\u0435 \u0432\u0430\u0448\u0435\u0433\u043e \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u044f \u0432\u043e\u0437\u043d\u0438\u043a\u0430\u0435\u0442 \u0442\u0430\u043a\u043e\u0435 \u0438\u0441\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u0435:</p> <pre><code>Exception in thread \"DefaultDispatcher-worker-1\" java.lang.AbstractMethodError: 'kotlinx.serialization.KSerializer[] kotlinx.serialization.internal.GeneratedSerializer.typeParametersSerializers()'\n    at eu.vendeli.tgbot.types.options.GetUpdatesOptions$$serializer.typeParametersSerializers(GetUpdatesOptions.kt:6)\n</code></pre> <p>\u042d\u0442\u043e \u043f\u0440\u043e\u0438\u0441\u0445\u043e\u0434\u0438\u0442 \u043f\u043e\u0442\u043e\u043c\u0443 \u0447\u0442\u043e \u0432\u0430\u0448\u0430 \u0441\u0438\u0441\u0442\u0435\u043c\u0430 \u0441\u0431\u043e\u0440\u043a\u0438 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u0442 \u0441\u0442\u0430\u0440\u0443\u044e \u0431\u0438\u0431\u043b\u0438\u043e\u0442\u0435\u043a\u0443 \u0441\u0435\u0440\u0438\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u0438, \u0447\u044c\u044f \u0432\u043d\u0443\u0442\u0440\u0435\u043d\u043d\u044f\u044f \u043c\u0435\u0445\u0430\u043d\u0438\u043a\u0430 \u043e\u0442\u043b\u0438\u0447\u0430\u0435\u0442\u0441\u044f. \u0427\u0442\u043e\u0431\u044b \u0440\u0435\u0448\u0438\u0442\u044c \u044d\u0442\u043e, \u043d\u0443\u0436\u043d\u043e \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c \u0431\u043e\u043b\u0435\u0435 \u043d\u043e\u0432\u0443\u044e \u0432\u0435\u0440\u0441\u0438\u044e, \u043d\u0430\u043f\u0440\u0438\u043c\u0435\u0440 \u0434\u043e\u0431\u0430\u0432\u0438\u0432 \u044d\u0442\u043e \u0432 buildscript:</p> <pre><code>configurations.all {\n    resolutionStrategy.eachDependency {\n        val serdeVer = \"x.x.x\" // \u0434\u043e\u043b\u0436\u043d\u0430 \u0431\u044b\u0442\u044c &gt;= 1.8.0\n        when(requested.module.toString()) {\n            // json serialiazation\n            \"org.jetbrains.kotlinx:kotlinx-serialization-json\" -&gt; useVersion(serdeVer)\n            \"org.jetbrains.kotlinx:kotlinx-serialization-json-jvm\" -&gt; useVersion(serdeVer)\n            \"org.jetbrains.kotlinx:kotlinx-serialization-core\" -&gt; useVersion(serdeVer)\n            \"org.jetbrains.kotlinx:kotlinx-serialization-core-jvm\" -&gt; useVersion(serdeVer)\n            \"org.jetbrains.kotlinx:kotlinx-serialization-bom\" -&gt; useVersion(serdeVer)\n        }\n    }\n}\n</code></pre> <p>(\u0415\u0441\u043b\u0438 \u0431\u044b \u044d\u0442\u043e \u0431\u044b\u043b\u043e \u0445\u043e\u0440\u043e\u0448\u043e \u043e\u043f\u0438\u0441\u0430\u043d\u043e \u0432 changelog, \u044f \u0431\u044b \u043d\u0438\u043a\u043e\u0433\u0434\u0430 \u043d\u0435 \u043e\u0431\u043d\u043e\u0432\u0438\u043b, \u043f\u043e\u0442\u043e\u043c\u0443 \u0447\u0442\u043e \u043f\u043e\u043b\u0443\u0447\u0430\u044e \u0442\u0430\u043a \u043c\u043d\u043e\u0433\u043e \u043e\u0442\u0447\u0435\u0442\u043e\u0432 \u043e\u0431 \u044d\u0442\u043e\u0439 \u043f\u0440\u043e\u0431\u043b\u0435\u043c\u0435)</p>"},{"location":"ru/F.A.Q/#_1","title":"\u041a\u0430\u043a \u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c \u043e\u0442\u0432\u0435\u0442 \u043e\u0442 \u043c\u0435\u0442\u043e\u0434\u0430?","text":"<p>\u0427\u0442\u043e\u0431\u044b \u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c \u043e\u0442\u0432\u0435\u0442 \u0438 \u0438\u043c\u0435\u0442\u044c \u0432\u043e\u0437\u043c\u043e\u0436\u043d\u043e\u0441\u0442\u044c \u0440\u0430\u0431\u043e\u0442\u0430\u0442\u044c \u0441 \u043d\u0438\u043c, \u043d\u0443\u0436\u043d\u043e \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c <code>sendReturning</code> \u0432 \u043a\u043e\u043d\u0446\u0435 \u043c\u0435\u0442\u043e\u0434\u0430 \u0432\u043c\u0435\u0441\u0442\u043e <code>send</code>.</p> <p>\u0412 \u044d\u0442\u043e\u043c \u0441\u043b\u0443\u0447\u0430\u0435 \u0432\u043e\u0437\u0432\u0440\u0430\u0449\u0430\u0435\u0442\u0441\u044f \u043a\u043b\u0430\u0441\u0441 <code>Response</code>, \u043a\u043e\u0442\u043e\u0440\u044b\u0439 \u0441\u043e\u0434\u0435\u0440\u0436\u0438\u0442 \u043e\u0442\u0432\u0435\u0442, \u0443\u0441\u043f\u0435\u0445 \u0438\u043b\u0438 \u043d\u0435\u0443\u0434\u0430\u0447\u0443, \u0434\u0430\u043b\u0435\u0435 \u043d\u0443\u0436\u043d\u043e \u043b\u0438\u0431\u043e \u043e\u0431\u0440\u0430\u0431\u043e\u0442\u0430\u0442\u044c \u043d\u0435\u0443\u0434\u0430\u0447\u0443, \u043b\u0438\u0431\u043e \u043f\u0440\u043e\u0441\u0442\u043e \u0432\u044b\u0437\u0432\u0430\u0442\u044c <code>getOrNull()</code>.</p> <p>\u0415\u0441\u0442\u044c \u0440\u0430\u0437\u0434\u0435\u043b \u043e\u0431 \u044d\u0442\u043e\u043c: \u041e\u0431\u0440\u0430\u0431\u043e\u0442\u043a\u0430 \u043e\u0442\u0432\u0435\u0442\u043e\u0432.</p>"},{"location":"ru/F.A.Q/#spring-boot-devtools","title":"\u0423 \u043c\u0435\u043d\u044f \u0432\u043e\u0437\u043d\u0438\u043a\u0430\u0435\u0442 \u043e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u0438 <code>spring-boot-devtools</code>","text":"<p>\u042d\u0442\u043e \u043f\u0440\u043e\u0438\u0441\u0445\u043e\u0434\u0438\u0442 \u043f\u043e\u0442\u043e\u043c\u0443 \u0447\u0442\u043e <code>spring-boot-devtools</code> \u0438\u043c\u0435\u0435\u0442 \u0441\u0432\u043e\u0439 \u0441\u043e\u0431\u0441\u0442\u0432\u0435\u043d\u043d\u044b\u0439 <code>classloader</code> \u0438 \u043d\u0435 \u043d\u0430\u0445\u043e\u0434\u0438\u0442 \u043c\u0435\u0442\u043e\u0434\u044b.</p> <p>\u041d\u0443\u0436\u043d\u043e \u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0432 <code>resources/META-INF/spring-devtools.properties</code>:</p> <pre><code>restart.include.generated=/eu.vendeli\n</code></pre>"},{"location":"ru/F.A.Q/#ktor","title":"\u041a\u0430\u043a \u0438\u0437\u043c\u0435\u043d\u0438\u0442\u044c \u0434\u0432\u0438\u0436\u043e\u043a ktor","text":"<p>\u0415\u0441\u043b\u0438 \u0432\u044b \u0445\u043e\u0442\u0438\u0442\u0435 \u0438\u0437\u043c\u0435\u043d\u0438\u0442\u044c \u0434\u0432\u0438\u0436\u043e\u043a, \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u043c\u044b\u0439 \u043a\u043b\u0438\u0435\u043d\u0442\u043e\u043c, \u0432\u044b \u043c\u043e\u0436\u0435\u0442\u0435 \u043f\u0440\u043e\u0441\u0442\u043e \u0438\u0437\u043c\u0435\u043d\u0438\u0442\u044c \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440 \u0432 \u043d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0430\u0445 \u043f\u043b\u0430\u0433\u0438\u043d\u0430.</p>"},{"location":"ru/F.A.Q/#_2","title":"\u041a\u0430\u043a \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c \u043c\u043e\u0439 \u043b\u044e\u0431\u0438\u043c\u044b\u0439 \u043f\u0440\u043e\u0432\u0430\u0439\u0434\u0435\u0440 \u043b\u043e\u0433\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u044f","text":"<p>\u0411\u0438\u0431\u043b\u0438\u043e\u0442\u0435\u043a\u0430 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u0442 <code>slf4j-api</code> \u0438 \u0434\u043b\u044f \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u044f \u043f\u0440\u043e\u0432\u0430\u0439\u0434\u0435\u0440\u0430 \u043d\u0443\u0436\u043d\u043e \u043f\u0440\u043e\u0441\u0442\u043e \u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0435\u0433\u043e \u0432 \u0437\u0430\u0432\u0438\u0441\u0438\u043c\u043e\u0441\u0442\u0438.</p> <p>\u041f\u043b\u0430\u0433\u0438\u043d \u0431\u0438\u0431\u043b\u0438\u043e\u0442\u0435\u043a\u0438 \u0430\u0432\u0442\u043e\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u0438 \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u044f\u0435\u0442 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u0435 \u043f\u0440\u043e\u0432\u0430\u0439\u0434\u0435\u0440\u0430, \u0435\u0441\u043b\u0438 \u043f\u0440\u043e\u0432\u0430\u0439\u0434\u0435\u0440 \u043e\u0442\u0441\u0443\u0442\u0441\u0442\u0432\u0443\u0435\u0442, \u043f\u043e \u0443\u043c\u043e\u043b\u0447\u0430\u043d\u0438\u044e \u0431\u0443\u0434\u0435\u0442 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c\u0441\u044f <code>logback</code>.</p>"},{"location":"ru/F.A.Q/#long-polling","title":"\u041f\u0435\u0440\u0435\u0445\u0432\u0430\u0442 \u0441\u0435\u0442\u0435\u0432\u044b\u0445 \u0438\u0441\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u0439 \u0432 \u043e\u0431\u0440\u0430\u0431\u043e\u0442\u0447\u0438\u043a\u0435 long-polling","text":"<p>\u041d\u0430\u043f\u0440\u0438\u043c\u0435\u0440, \u0435\u0441\u043b\u0438 \u0443 \u0432\u0430\u0441 \u043d\u0435\u0441\u0442\u0430\u0431\u0438\u043b\u044c\u043d\u043e\u0435 \u0441\u043e\u0435\u0434\u0438\u043d\u0435\u043d\u0438\u0435 \u0438 \u043d\u0443\u0436\u043d\u043e \u043f\u0435\u0440\u0435\u0445\u0432\u0430\u0442\u0438\u0442\u044c \u043e\u0448\u0438\u0431\u043a\u0443 \u0438\u0437-\u0437\u0430 \u044d\u0442\u043e\u0433\u043e, \u0432\u043e\u0437\u043c\u043e\u0436\u043d\u043e \u044d\u0442\u043e\u0442 \u043f\u043e\u0434\u0445\u043e\u0434 \u0432\u0430\u043c \u043f\u043e\u043c\u043e\u0436\u0435\u0442:</p> <pre><code>fun main() {\n    val bot = TelegramBot(\"TOKEN\")\n\n    try {\n        bot.handleUpdates()\n    } catch (e: Exception) {\n        // \u043e\u0431\u0440\u0430\u0431\u043e\u0442\u043a\u0430 \u043f\u0440\u0438 \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e\u0441\u0442\u0438\n\n        bot.update.stopListener()\n        bot.handleUpdates()\n    }\n}\n</code></pre> <p>\u0422\u0430\u043a\u0436\u0435 \u0432\u044b \u043c\u043e\u0436\u0435\u0442\u0435 \u043f\u043e\u0441\u043c\u043e\u0442\u0440\u0435\u0442\u044c \u043a\u0430\u043a \u044d\u0442\u043e \u0441\u0434\u0435\u043b\u0430\u043d\u043e \u0432 spring-starter.</p>"},{"location":"ru/FSM-and-Conversation-handling/","title":"FSM \u0438 \u041e\u0431\u0440\u0430\u0431\u043e\u0442\u043a\u0430 \u0414\u0438\u0430\u043b\u043e\u0433\u043e\u0432","text":"<p>\u0411\u0438\u0431\u043b\u0438\u043e\u0442\u0435\u043a\u0430 \u0442\u0430\u043a\u0436\u0435 \u043f\u043e\u0434\u0434\u0435\u0440\u0436\u0438\u0432\u0430\u0435\u0442 \u043c\u0435\u0445\u0430\u043d\u0438\u0437\u043c FSM, \u043a\u043e\u0442\u043e\u0440\u044b\u0439 \u043f\u0440\u0435\u0434\u0441\u0442\u0430\u0432\u043b\u044f\u0435\u0442 \u0441\u043e\u0431\u043e\u0439 \u043c\u0435\u0445\u0430\u043d\u0438\u0437\u043c \u043f\u0440\u043e\u0433\u0440\u0435\u0441\u0441\u0438\u0432\u043d\u043e\u0439 \u043e\u0431\u0440\u0430\u0431\u043e\u0442\u043a\u0438 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c\u0441\u043a\u043e\u0433\u043e \u0432\u0432\u043e\u0434\u0430 \u0441 \u043e\u0431\u0440\u0430\u0431\u043e\u0442\u043a\u043e\u0439 \u043d\u0435\u043a\u043e\u0440\u0440\u0435\u043a\u0442\u043d\u043e\u0433\u043e \u0432\u0432\u043e\u0434\u0430.</p> <p>Note</p> <p>TL;DR: \u0421\u043c\u043e\u0442\u0440\u0438\u0442\u0435 \u043f\u0440\u0438\u043c\u0435\u0440 \u0442\u0443\u0442.</p>"},{"location":"ru/FSM-and-Conversation-handling/#_1","title":"\u0412 \u0442\u0435\u043e\u0440\u0438\u0438","text":"<p>\u041f\u0440\u0435\u0434\u0441\u0442\u0430\u0432\u0438\u043c \u0441\u0438\u0442\u0443\u0430\u0446\u0438\u044e, \u043a\u043e\u0433\u0434\u0430 \u0432\u0430\u043c \u043d\u0443\u0436\u043d\u043e \u0441\u043e\u0431\u0440\u0430\u0442\u044c \u043e\u043f\u0440\u043e\u0441 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f, \u0432\u044b \u043c\u043e\u0436\u0435\u0442\u0435 \u0437\u0430\u043f\u0440\u043e\u0441\u0438\u0442\u044c \u0432\u0441\u0435 \u0434\u0430\u043d\u043d\u044b\u0435 \u0447\u0435\u043b\u043e\u0432\u0435\u043a\u0430 \u0437\u0430 \u043e\u0434\u0438\u043d \u0448\u0430\u0433, \u043d\u043e \u043f\u0440\u0438 \u043d\u0435\u043a\u043e\u0440\u0440\u0435\u043a\u0442\u043d\u043e\u043c \u0432\u0432\u043e\u0434\u0435 \u043e\u0434\u043d\u043e\u0433\u043e \u0438\u0437 \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u043e\u0432, \u044d\u0442\u043e \u0431\u0443\u0434\u0435\u0442 \u0441\u043b\u043e\u0436\u043d\u043e \u0438 \u0434\u043b\u044f \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f, \u0438 \u0434\u043b\u044f \u043d\u0430\u0441, \u0438 \u043a\u0430\u0436\u0434\u044b\u0439 \u0448\u0430\u0433 \u043c\u043e\u0436\u0435\u0442 \u043e\u0442\u043b\u0438\u0447\u0430\u0442\u044c\u0441\u044f \u0432 \u0437\u0430\u0432\u0438\u0441\u0438\u043c\u043e\u0441\u0442\u0438 \u043e\u0442 \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u0435\u043d\u043d\u044b\u0445 \u0432\u0445\u043e\u0434\u043d\u044b\u0445 \u0434\u0430\u043d\u043d\u044b\u0445.</p> <p>\u0422\u0435\u043f\u0435\u0440\u044c \u043f\u0440\u0435\u0434\u0441\u0442\u0430\u0432\u0438\u043c \u043f\u043e\u0448\u0430\u0433\u043e\u0432\u044b\u0439 \u0432\u0432\u043e\u0434 \u0434\u0430\u043d\u043d\u044b\u0445, \u0433\u0434\u0435 \u0431\u043e\u0442 \u0432\u0445\u043e\u0434\u0438\u0442 \u0432 \u0440\u0435\u0436\u0438\u043c \u0434\u0438\u0430\u043b\u043e\u0433\u0430 \u0441 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u0435\u043c.</p> <p> </p> <p>\u0417\u0435\u043b\u0435\u043d\u044b\u0435 \u0441\u0442\u0440\u0435\u043b\u043a\u0438 \u0443\u043a\u0430\u0437\u044b\u0432\u0430\u044e\u0442 \u043f\u0440\u043e\u0446\u0435\u0441\u0441 \u043f\u0435\u0440\u0435\u0445\u043e\u0434\u0430 \u0447\u0435\u0440\u0435\u0437 \u0448\u0430\u0433\u0438 \u0431\u0435\u0437 \u043e\u0448\u0438\u0431\u043e\u043a, \u0441\u0438\u043d\u0438\u0435 \u0441\u0442\u0440\u0435\u043b\u043a\u0438 \u043e\u0437\u043d\u0430\u0447\u0430\u044e\u0442 \u0441\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u0438\u0435 \u0442\u0435\u043a\u0443\u0449\u0435\u0433\u043e \u0441\u043e\u0441\u0442\u043e\u044f\u043d\u0438\u044f \u0438 \u043e\u0436\u0438\u0434\u0430\u043d\u0438\u0435 \u043f\u043e\u0432\u0442\u043e\u0440\u043d\u043e\u0433\u043e \u0432\u0432\u043e\u0434\u0430 (\u043d\u0430\u043f\u0440\u0438\u043c\u0435\u0440, \u0435\u0441\u043b\u0438 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c \u0443\u043a\u0430\u0437\u0430\u043b, \u0447\u0442\u043e \u0435\u043c\u0443 -100 \u043b\u0435\u0442, \u043d\u0443\u0436\u043d\u043e \u0441\u043f\u0440\u043e\u0441\u0438\u0442\u044c \u0432\u043e\u0437\u0440\u0430\u0441\u0442 \u0435\u0449\u0435 \u0440\u0430\u0437), \u0430 \u043a\u0440\u0430\u0441\u043d\u044b\u0435 \u043f\u043e\u043a\u0430\u0437\u044b\u0432\u0430\u044e\u0442 \u0432\u044b\u0445\u043e\u0434 \u0438\u0437 \u0432\u0441\u0435\u0433\u043e \u043f\u0440\u043e\u0446\u0435\u0441\u0441\u0430 \u0438\u0437-\u0437\u0430 \u043b\u044e\u0431\u043e\u0439 \u043a\u043e\u043c\u0430\u043d\u0434\u044b \u0438\u043b\u0438 \u043b\u044e\u0431\u043e\u0433\u043e \u0434\u0440\u0443\u0433\u043e\u0433\u043e \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u044f \u043e\u0442\u043c\u0435\u043d\u044b.</p>"},{"location":"ru/FSM-and-Conversation-handling/#_2","title":"\u041d\u0430 \u043f\u0440\u0430\u043a\u0442\u0438\u043a\u0435","text":"<p>\u0421\u0438\u0441\u0442\u0435\u043c\u0430 Wizard \u043e\u0431\u0435\u0441\u043f\u0435\u0447\u0438\u0432\u0430\u0435\u0442 \u043c\u043d\u043e\u0433\u043e\u0448\u0430\u0433\u043e\u0432\u044b\u0435 \u0432\u0437\u0430\u0438\u043c\u043e\u0434\u0435\u0439\u0441\u0442\u0432\u0438\u044f \u0441 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u0435\u043c \u0432 \u0431\u043e\u0442\u0430\u0445 Telegram. \u041e\u043d\u0430 \u043d\u0430\u043f\u0440\u0430\u0432\u043b\u044f\u0435\u0442 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u0435\u0439 \u0447\u0435\u0440\u0435\u0437 \u043f\u043e\u0441\u043b\u0435\u0434\u043e\u0432\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0441\u0442\u044c \u0448\u0430\u0433\u043e\u0432, \u043f\u0440\u043e\u0432\u0435\u0440\u044f\u0435\u0442 \u0432\u0432\u043e\u0434, \u0441\u043e\u0445\u0440\u0430\u043d\u044f\u0435\u0442 \u0441\u043e\u0441\u0442\u043e\u044f\u043d\u0438\u0435 \u0438 \u043f\u0435\u0440\u0435\u0445\u043e\u0434\u0438\u0442 \u043c\u0435\u0436\u0434\u0443 \u0448\u0430\u0433\u0430\u043c\u0438.</p> <p>\u041a\u043b\u044e\u0447\u0435\u0432\u044b\u0435 \u041f\u0440\u0435\u0438\u043c\u0443\u0449\u0435\u0441\u0442\u0432\u0430: - Type-safe: \u041f\u0440\u043e\u0432\u0435\u0440\u043a\u0430 \u0442\u0438\u043f\u043e\u0432 \u043d\u0430 \u044d\u0442\u0430\u043f\u0435 \u043a\u043e\u043c\u043f\u0438\u043b\u044f\u0446\u0438\u0438 \u0434\u043b\u044f \u0434\u043e\u0441\u0442\u0443\u043f\u0430 \u043a \u0441\u043e\u0441\u0442\u043e\u044f\u043d\u0438\u044e - \u0414\u0435\u043a\u043b\u0430\u0440\u0430\u0442\u0438\u0432\u043d\u044b\u0439: \u041e\u043f\u0440\u0435\u0434\u0435\u043b\u044f\u0439\u0442\u0435 \u0448\u0430\u0433\u0438 \u043a\u0430\u043a \u0432\u043b\u043e\u0436\u0435\u043d\u043d\u044b\u0435 \u043a\u043b\u0430\u0441\u0441\u044b/\u043e\u0431\u044a\u0435\u043a\u0442\u044b - \u0413\u0438\u0431\u043a\u0438\u0439: \u041f\u043e\u0434\u0434\u0435\u0440\u0436\u043a\u0430 \u0443\u0441\u043b\u043e\u0432\u043d\u044b\u0445 \u043f\u0435\u0440\u0435\u0445\u043e\u0434\u043e\u0432, \u043f\u0440\u044b\u0436\u043a\u043e\u0432 \u0438 \u043f\u043e\u0432\u0442\u043e\u0440\u043d\u044b\u0445 \u043f\u043e\u043f\u044b\u0442\u043e\u043a - \u0421\u043e\u0445\u0440\u0430\u043d\u044f\u044e\u0449\u0438\u0439 \u0441\u043e\u0441\u0442\u043e\u044f\u043d\u0438\u0435: \u0410\u0432\u0442\u043e\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u043e\u0435 \u0441\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u0438\u0435 \u0441\u043e\u0441\u0442\u043e\u044f\u043d\u0438\u044f \u0441 \u043f\u043e\u0434\u043a\u043b\u044e\u0447\u0430\u0435\u043c\u044b\u043c\u0438 \u0431\u044d\u043a\u0435\u043d\u0434\u0430\u043c\u0438 \u0445\u0440\u0430\u043d\u0435\u043d\u0438\u044f - \u0418\u043d\u0442\u0435\u0433\u0440\u0438\u0440\u043e\u0432\u0430\u043d\u043d\u044b\u0439: \u0420\u0430\u0431\u043e\u0442\u0430\u0435\u0442 \u0441 \u0441\u0443\u0449\u0435\u0441\u0442\u0432\u0443\u044e\u0449\u0435\u0439 \u0441\u0438\u0441\u0442\u0435\u043c\u043e\u0439 Activity</p>"},{"location":"ru/FSM-and-Conversation-handling/#_3","title":"\u041e\u0441\u043d\u043e\u0432\u043d\u044b\u0435 \u041a\u043e\u043d\u0446\u0435\u043f\u0446\u0438\u0438","text":""},{"location":"ru/FSM-and-Conversation-handling/#wizardstep","title":"WizardStep","text":"<p><code>WizardStep</code> \u043f\u0440\u0435\u0434\u0441\u0442\u0430\u0432\u043b\u044f\u0435\u0442 \u0441\u043e\u0431\u043e\u0439 \u043e\u0442\u0434\u0435\u043b\u044c\u043d\u044b\u0439 \u0448\u0430\u0433 \u0432 \u043f\u043e\u0442\u043e\u043a\u0435 \u043c\u0430\u0441\u0442\u0435\u0440\u0430. \u041a\u0430\u0436\u0434\u044b\u0439 \u0448\u0430\u0433 \u0434\u043e\u043b\u0436\u0435\u043d \u0440\u0435\u0430\u043b\u0438\u0437\u043e\u0432\u0430\u0442\u044c:</p> <ul> <li><code>onEntry(ctx: WizardContext)</code>: \u0412\u044b\u0437\u044b\u0432\u0430\u0435\u0442\u0441\u044f, \u043a\u043e\u0433\u0434\u0430 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c \u0432\u0445\u043e\u0434\u0438\u0442 \u043d\u0430 \u044d\u0442\u043e\u0442 \u0448\u0430\u0433. \u0418\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0439\u0442\u0435 \u044d\u0442\u043e \u0434\u043b\u044f \u0437\u0430\u043f\u0440\u043e\u0441\u0430 \u0443 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f.</li> <li><code>onRetry(ctx: WizardContext)</code>: \u0412\u044b\u0437\u044b\u0432\u0430\u0435\u0442\u0441\u044f \u043f\u0440\u0438 \u0441\u0431\u043e\u0435 \u043f\u0440\u043e\u0432\u0435\u0440\u043a\u0438 \u0438 \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e\u0441\u0442\u0438 \u043f\u043e\u0432\u0442\u043e\u0440\u043d\u043e\u0439 \u043f\u043e\u043f\u044b\u0442\u043a\u0438. \u0418\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0439\u0442\u0435 \u044d\u0442\u043e \u0434\u043b\u044f \u043f\u043e\u043a\u0430\u0437\u0430 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0439 \u043e\u0431 \u043e\u0448\u0438\u0431\u043a\u0430\u0445.</li> <li><code>validate(ctx: WizardContext): Transition</code>: \u041f\u0440\u043e\u0432\u0435\u0440\u044f\u0435\u0442 \u0442\u0435\u043a\u0443\u0449\u0438\u0439 \u0432\u0432\u043e\u0434 \u0438 \u0432\u043e\u0437\u0432\u0440\u0430\u0449\u0430\u0435\u0442 <code>Transition</code>, \u0443\u043a\u0430\u0437\u044b\u0432\u0430\u044e\u0449\u0438\u0439, \u0447\u0442\u043e \u043f\u0440\u043e\u0438\u0441\u0445\u043e\u0434\u0438\u0442 \u0434\u0430\u043b\u044c\u0448\u0435.</li> <li><code>store(ctx: WizardContext): Any?</code> (\u043d\u0435\u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e): \u0412\u043e\u0437\u0432\u0440\u0430\u0449\u0430\u0435\u0442 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435 \u0434\u043b\u044f \u0441\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u0438\u044f \u0434\u043b\u044f \u044d\u0442\u043e\u0433\u043e \u0448\u0430\u0433\u0430. \u0412\u0435\u0440\u043d\u0438\u0442\u0435 <code>null</code>, \u0435\u0441\u043b\u0438 \u0448\u0430\u0433 \u043d\u0435 \u0441\u043e\u0445\u0440\u0430\u043d\u044f\u0435\u0442 \u0441\u043e\u0441\u0442\u043e\u044f\u043d\u0438\u0435.</li> </ul> <pre><code>object NameStep : WizardStep(isInitial = true) {\n    override suspend fun onEntry(ctx: WizardContext) {\n        message { \"\u041a\u0430\u043a \u0432\u0430\u0441 \u0437\u043e\u0432\u0443\u0442?\" }.send(ctx.user, ctx.bot)\n    }\n\n    override suspend fun onRetry(ctx: WizardContext) {\n        message { \"\u0418\u043c\u044f \u043d\u0435 \u043c\u043e\u0436\u0435\u0442 \u0431\u044b\u0442\u044c \u043f\u0443\u0441\u0442\u044b\u043c. \u041f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430, \u043f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u0435\u0449\u0435 \u0440\u0430\u0437.\" }.send(ctx.user, ctx.bot)\n    }\n\n    override suspend fun validate(ctx: WizardContext): Transition {\n        return if (ctx.update.text.isNullOrBlank()) {\n            Transition.Retry\n        } else {\n            Transition.Next\n        }\n    }\n\n    override suspend fun store(ctx: WizardContext): String {\n        return ctx.update.text!!\n    }\n}\n</code></pre> <p>Note</p> <p>\u0415\u0441\u043b\u0438 \u043a\u0430\u043a\u043e\u0439-\u0442\u043e \u0448\u0430\u0433 \u043d\u0435 \u043f\u043e\u043c\u0435\u0447\u0435\u043d \u043a\u0430\u043a \u043d\u0430\u0447\u0430\u043b\u044c\u043d\u044b\u0439 -&gt; \u043f\u0435\u0440\u0432\u044b\u0439 \u043e\u0431\u044a\u044f\u0432\u043b\u0435\u043d\u043d\u044b\u0439 \u0448\u0430\u0433 \u0441\u0447\u0438\u0442\u0430\u0435\u0442\u0441\u044f \u0442\u0430\u043a\u043e\u0432\u044b\u043c.</p>"},{"location":"ru/FSM-and-Conversation-handling/#transition","title":"Transition","text":"<p><code>Transition</code> \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u044f\u0435\u0442, \u0447\u0442\u043e \u043f\u0440\u043e\u0438\u0441\u0445\u043e\u0434\u0438\u0442 \u043f\u043e\u0441\u043b\u0435 \u043f\u0440\u043e\u0432\u0435\u0440\u043a\u0438:</p> <ul> <li><code>Transition.Next</code>: \u041f\u0435\u0440\u0435\u0439\u0442\u0438 \u043a \u0441\u043b\u0435\u0434\u0443\u044e\u0449\u0435\u043c\u0443 \u0448\u0430\u0433\u0443 \u0432 \u043f\u043e\u0441\u043b\u0435\u0434\u043e\u0432\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0441\u0442\u0438</li> <li><code>Transition.JumpTo(step: KClass&lt;out WizardStep&gt;)</code>: \u041f\u0435\u0440\u0435\u0439\u0442\u0438 \u043a \u043a\u043e\u043d\u043a\u0440\u0435\u0442\u043d\u043e\u043c\u0443 \u0448\u0430\u0433\u0443</li> <li><code>Transition.Retry</code>: \u041f\u043e\u0432\u0442\u043e\u0440\u0438\u0442\u044c \u0442\u0435\u043a\u0443\u0449\u0438\u0439 \u0448\u0430\u0433 (\u043f\u0440\u043e\u0432\u0435\u0440\u043a\u0430 \u043d\u0435 \u0443\u0434\u0430\u043b\u0430\u0441\u044c)</li> <li><code>Transition.Finish</code>: \u0417\u0430\u0432\u0435\u0440\u0448\u0438\u0442\u044c \u043c\u0430\u0441\u0442\u0435\u0440\u0430</li> </ul> <pre><code>// \u0423\u0441\u043b\u043e\u0432\u043d\u044b\u0439 \u043f\u0435\u0440\u0435\u0445\u043e\u0434 \u043d\u0430 \u043e\u0441\u043d\u043e\u0432\u0435 \u0432\u0432\u043e\u0434\u0430\noverride suspend fun validate(ctx: WizardContext): Transition {\n    val age = ctx.update.text?.toIntOrNull()\n    return when {\n        age == null -&gt; Transition.Retry\n        age &lt; 18 -&gt; Transition.JumpTo(UnderageStep::class)\n        else -&gt; Transition.Next\n    }\n}\n</code></pre>"},{"location":"ru/FSM-and-Conversation-handling/#wizardcontext","title":"WizardContext","text":"<p><code>WizardContext</code> \u043f\u0440\u0435\u0434\u043e\u0441\u0442\u0430\u0432\u043b\u044f\u0435\u0442 \u0434\u043e\u0441\u0442\u0443\u043f \u043a: - <code>user: User</code>: \u0422\u0435\u043a\u0443\u0449\u0438\u0439 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c - <code>update: ProcessedUpdate</code>: \u0422\u0435\u043a\u0443\u0449\u0435\u0435 \u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0435 - <code>bot: TelegramBot</code>: \u042d\u043a\u0437\u0435\u043c\u043f\u043b\u044f\u0440 \u0431\u043e\u0442\u0430 - <code>userReference: UserChatReference</code>: \u0421\u0441\u044b\u043b\u043a\u0430 \u043d\u0430 ID \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f \u0438 \u0447\u0430\u0442\u0430 \u0434\u043b\u044f \u0445\u0440\u0430\u043d\u0435\u043d\u0438\u044f \u0441\u043e\u0441\u0442\u043e\u044f\u043d\u0438\u044f</p> <p>\u041f\u043b\u044e\u0441 \u043c\u0435\u0442\u043e\u0434\u044b \u0434\u043e\u0441\u0442\u0443\u043f\u0430 \u043a \u0441\u043e\u0441\u0442\u043e\u044f\u043d\u0438\u044e \u0441 \u043f\u0440\u043e\u0432\u0435\u0440\u043a\u043e\u0439 \u0442\u0438\u043f\u043e\u0432 (\u0441\u0433\u0435\u043d\u0435\u0440\u0438\u0440\u043e\u0432\u0430\u043d\u044b KSP).</p>"},{"location":"ru/FSM-and-Conversation-handling/#_4","title":"\u041e\u043f\u0440\u0435\u0434\u0435\u043b\u0435\u043d\u0438\u0435 \u041c\u0430\u0441\u0442\u0435\u0440\u0430","text":""},{"location":"ru/FSM-and-Conversation-handling/#_5","title":"\u0411\u0430\u0437\u043e\u0432\u0430\u044f \u0421\u0442\u0440\u0443\u043a\u0442\u0443\u0440\u0430","text":"<p>\u041c\u0430\u0441\u0442\u0435\u0440 \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u044f\u0435\u0442\u0441\u044f \u043a\u0430\u043a \u043a\u043b\u0430\u0441\u0441 \u0438\u043b\u0438 \u043e\u0431\u044a\u0435\u043a\u0442, \u0430\u043d\u043d\u043e\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u043d\u044b\u0439 <code>@WizardHandler</code>:</p> <pre><code>@WizardHandler(trigger = [\"/survey\"])\nobject SurveyWizard {\n    object NameStep : WizardStep(isInitial = true) {\n        // ... \u0440\u0435\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u044f \u0448\u0430\u0433\u0430\n    }\n\n    object AgeStep : WizardStep {\n        // ... \u0440\u0435\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u044f \u0448\u0430\u0433\u0430\n    }\n\n    object FinishStep : WizardStep {\n        // ... \u0440\u0435\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u044f \u0448\u0430\u0433\u0430\n    }\n}\n</code></pre>"},{"location":"ru/FSM-and-Conversation-handling/#_6","title":"\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b \u0410\u043d\u043d\u043e\u0442\u0430\u0446\u0438\u0438","text":"<p><code>@WizardHandler</code> \u043f\u0440\u0438\u043d\u0438\u043c\u0430\u0435\u0442: - <code>trigger: Array&lt;String&gt;</code>: \u041a\u043e\u043c\u0430\u043d\u0434\u044b, \u043a\u043e\u0442\u043e\u0440\u044b\u0435 \u0437\u0430\u043f\u0443\u0441\u043a\u0430\u044e\u0442 \u043c\u0430\u0441\u0442\u0435\u0440\u0430 (\u043d\u0430\u043f\u0440\u0438\u043c\u0435\u0440, <code>[\"/start\", \"/survey\"]</code>) - <code>scope: Array&lt;UpdateType&gt;</code>: \u0422\u0438\u043f\u044b \u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0439 \u0434\u043b\u044f \u043f\u0440\u043e\u0441\u043b\u0443\u0448\u0438\u0432\u0430\u043d\u0438\u044f (\u043f\u043e \u0443\u043c\u043e\u043b\u0447\u0430\u043d\u0438\u044e: <code>[UpdateType.MESSAGE]</code>) - <code>stateManagers: Array&lt;KClass&lt;out WizardStateManager&lt;*&gt;&gt;&gt;</code>: \u041a\u043b\u0430\u0441\u0441\u044b \u043c\u0435\u043d\u0435\u0434\u0436\u0435\u0440\u043e\u0432 \u0441\u043e\u0441\u0442\u043e\u044f\u043d\u0438\u044f \u0434\u043b\u044f \u0445\u0440\u0430\u043d\u0435\u043d\u0438\u044f \u0434\u0430\u043d\u043d\u044b\u0445 \u0448\u0430\u0433\u043e\u0432</p>"},{"location":"ru/FSM-and-Conversation-handling/#_7","title":"\u0423\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u0438\u0435 \u0421\u043e\u0441\u0442\u043e\u044f\u043d\u0438\u0435\u043c","text":""},{"location":"ru/FSM-and-Conversation-handling/#wizardstatemanager","title":"WizardStateManager","text":"<p>\u0421\u043e\u0441\u0442\u043e\u044f\u043d\u0438\u0435 \u0445\u0440\u0430\u043d\u0438\u0442\u0441\u044f \u0441 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u0435\u043c \u0440\u0435\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u0439 <code>WizardStateManager&lt;T&gt;</code>. \u041a\u0430\u0436\u0434\u044b\u0439 \u043c\u0435\u043d\u0435\u0434\u0436\u0435\u0440 \u043e\u0431\u0440\u0430\u0431\u0430\u0442\u044b\u0432\u0430\u0435\u0442 \u043a\u043e\u043d\u043a\u0440\u0435\u0442\u043d\u044b\u0439 \u0442\u0438\u043f:</p> <pre><code>interface WizardStateManager&lt;T : Any&gt; {\n    suspend fun get(key: KClass&lt;out WizardStep&gt;, reference: UserChatReference): T?\n    suspend fun set(key: KClass&lt;out WizardStep&gt;, reference: UserChatReference, value: T)\n    suspend fun del(key: KClass&lt;out WizardStep&gt;, reference: UserChatReference)\n}\n</code></pre> <p>\u0421\u043c. \u0442\u0430\u043a\u0436\u0435: MapStateManager, MapStringStateManager, MapIntStateManager, MapLongStateManager."},{"location":"ru/FSM-and-Conversation-handling/#_8","title":"\u0410\u0432\u0442\u043e\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u043e\u0435 \u0421\u043e\u043f\u043e\u0441\u0442\u0430\u0432\u043b\u0435\u043d\u0438\u0435","text":"<p>KSP \u0441\u043e\u043f\u043e\u0441\u0442\u0430\u0432\u043b\u044f\u0435\u0442 \u0448\u0430\u0433\u0438 \u0441 \u043c\u0435\u043d\u0435\u0434\u0436\u0435\u0440\u0430\u043c\u0438 \u0441\u043e\u0441\u0442\u043e\u044f\u043d\u0438\u044f \u043d\u0430 \u043e\u0441\u043d\u043e\u0432\u0435 \u0432\u043e\u0437\u0432\u0440\u0430\u0449\u0430\u0435\u043c\u043e\u0433\u043e \u0442\u0438\u043f\u0430 <code>store()</code>:</p> <pre><code>@WizardHandler(\n    trigger = [\"/survey\"],\n    stateManagers = [StringStateManager::class, IntStateManager::class]\n)\nobject SurveyWizard {\n    object NameStep : WizardStep(isInitial = true) {\n        override suspend fun store(ctx: WizardContext): String {\n            return ctx.update.text!! // \u0421\u043e\u043e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0443\u0435\u0442 StringStateManager\n        }\n    }\n\n    object AgeStep : WizardStep {\n        override suspend fun store(ctx: WizardContext): Int {\n            return ctx.update.text!!.toInt() // \u0421\u043e\u043e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0443\u0435\u0442 IntStateManager\n        }\n    }\n}\n</code></pre>"},{"location":"ru/FSM-and-Conversation-handling/#_9","title":"\u041f\u0435\u0440\u0435\u043e\u043f\u0440\u0435\u0434\u0435\u043b\u0435\u043d\u0438\u0435 \u041d\u0430 \u0423\u0440\u043e\u0432\u043d\u0435 \u0428\u0430\u0433\u0430","text":"<p>\u041f\u0435\u0440\u0435\u043e\u043f\u0440\u0435\u0434\u0435\u043b\u0438\u0442\u0435 \u043c\u0435\u043d\u0435\u0434\u0436\u0435\u0440 \u0441\u043e\u0441\u0442\u043e\u044f\u043d\u0438\u044f \u0434\u043b\u044f \u043a\u043e\u043d\u043a\u0440\u0435\u0442\u043d\u043e\u0433\u043e \u0448\u0430\u0433\u0430 \u0441 \u043f\u043e\u043c\u043e\u0449\u044c\u044e <code>@WizardHandler.StateManager</code>:</p> <pre><code>@WizardHandler(\n    trigger = [\"/survey\"],\n    stateManagers = [DefaultStateManager::class]\n)\nobject SurveyWizard {\n    object NameStep : WizardStep(isInitial = true) {\n        // \u0418\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u0442 DefaultStateManager\n    }\n\n    @WizardHandler.StateManager(CustomStateManager::class)\n    object AgeStep : WizardStep {\n        // \u0418\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u0442 CustomStateManager \u0432\u043c\u0435\u0441\u0442\u043e\n    }\n}\n</code></pre>"},{"location":"ru/FSM-and-Conversation-handling/#type-safe","title":"Type-Safe \u0414\u043e\u0441\u0442\u0443\u043f \u043a \u0421\u043e\u0441\u0442\u043e\u044f\u043d\u0438\u044e","text":"<p>KSP \u0433\u0435\u043d\u0435\u0440\u0438\u0440\u0443\u0435\u0442 type-safe \u0444\u0443\u043d\u043a\u0446\u0438\u0438-\u0440\u0430\u0441\u0448\u0438\u0440\u0435\u043d\u0438\u044f \u0434\u043b\u044f <code>WizardContext</code> \u0434\u043b\u044f \u043a\u0430\u0436\u0434\u043e\u0433\u043e \u0448\u0430\u0433\u0430, \u043a\u043e\u0442\u043e\u0440\u044b\u0439 \u0441\u043e\u0445\u0440\u0430\u043d\u044f\u0435\u0442 \u0441\u043e\u0441\u0442\u043e\u044f\u043d\u0438\u0435.</p>"},{"location":"ru/FSM-and-Conversation-handling/#_10","title":"\u0421\u0433\u0435\u043d\u0435\u0440\u0438\u0440\u043e\u0432\u0430\u043d\u043d\u044b\u0435 \u0424\u0443\u043d\u043a\u0446\u0438\u0438","text":"<p>\u0414\u043b\u044f \u0448\u0430\u0433\u0430, \u043a\u043e\u0442\u043e\u0440\u044b\u0439 \u0441\u043e\u0445\u0440\u0430\u043d\u044f\u0435\u0442 <code>String</code>:</p> <pre><code>// \u0421\u0433\u0435\u043d\u0435\u0440\u0438\u0440\u043e\u0432\u0430\u043d\u043e \u0430\u0432\u0442\u043e\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u0438 KSP\nsuspend inline fun &lt;reified S : WizardStep&gt; WizardContext.getState(): String?\nsuspend inline fun &lt;reified S : WizardStep&gt; WizardContext.setState(value: String)\nsuspend inline fun &lt;reified S : WizardStep&gt; WizardContext.delState()\n</code></pre>"},{"location":"ru/FSM-and-Conversation-handling/#_11","title":"\u0418\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u0435","text":"<pre><code>object FinishStep : WizardStep {\n    override suspend fun onEntry(ctx: WizardContext) {\n        // Type-safe \u0434\u043e\u0441\u0442\u0443\u043f - \u0432\u043e\u0437\u0432\u0440\u0430\u0449\u0430\u0435\u0442 String? (nullable)\n        val name: String? = ctx.getState&lt;NameStep&gt;()\n\n        // Type-safe \u0434\u043e\u0441\u0442\u0443\u043f - \u0432\u043e\u0437\u0432\u0440\u0430\u0449\u0430\u0435\u0442 Int? (nullable)\n        val age: Int? = ctx.getState&lt;AgeStep&gt;()\n\n        val summary = buildString {\n            appendLine(\"\u0418\u043c\u044f: $name\")\n            appendLine(\"\u0412\u043e\u0437\u0440\u0430\u0441\u0442: $age\")\n        }\n\n        message { summary }.send(ctx.user, ctx.bot)\n    }\n\n    override suspend fun onRetry(ctx: WizardContext) = Unit\n\n    override suspend fun validate(ctx: WizardContext): Transition {\n        return Transition.Finish\n    }\n}\n</code></pre>"},{"location":"ru/FSM-and-Conversation-handling/#fallback","title":"\u041c\u0435\u0442\u043e\u0434\u044b Fallback","text":"<p>\u0415\u0441\u043b\u0438 type-safe \u043c\u0435\u0442\u043e\u0434\u044b \u043d\u0435\u0434\u043e\u0441\u0442\u0443\u043f\u043d\u044b, \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0439\u0442\u0435 \u043c\u0435\u0442\u043e\u0434\u044b fallback:</p> <pre><code>// Fallback - \u0432\u043e\u0437\u0432\u0440\u0430\u0449\u0430\u0435\u0442 Any?\nval name = ctx.getState(NameStep::class)\n\n// Fallback - \u043f\u0440\u0438\u043d\u0438\u043c\u0430\u0435\u0442 Any?\nctx.setState(NameStep::class, \"John\")\nctx.delState(NameStep::class)\n</code></pre>"},{"location":"ru/FSM-and-Conversation-handling/#_12","title":"\u041f\u043e\u043b\u043d\u044b\u0439 \u041f\u0440\u0438\u043c\u0435\u0440","text":""},{"location":"ru/FSM-and-Conversation-handling/#_13","title":"\u041c\u0430\u0441\u0442\u0435\u0440 \u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u0438 \u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f","text":"<pre><code>@WizardHandler(\n    trigger = [\"/register\"],\n    stateManagers = [StringStateManager::class, IntStateManager::class]\n)\nobject RegistrationWizard {\n    object NameStep : WizardStep(isInitial = true) {\n        override suspend fun onEntry(ctx: WizardContext) {\n            message { \"\u041a\u0430\u043a \u0432\u0430\u0441 \u0437\u043e\u0432\u0443\u0442?\" }.send(ctx.user, ctx.bot)\n        }\n\n        override suspend fun onRetry(ctx: WizardContext) {\n            message { \"\u041f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430, \u0432\u0432\u0435\u0434\u0438\u0442\u0435 \u043a\u043e\u0440\u0440\u0435\u043a\u0442\u043d\u043e\u0435 \u0438\u043c\u044f.\" }.send(ctx.user, ctx.bot)\n        }\n\n        override suspend fun validate(ctx: WizardContext): Transition {\n            val name = ctx.update.text?.trim()\n            return if (name.isNullOrBlank() || name.length &lt; 2) {\n                Transition.Retry\n            } else {\n                Transition.Next\n            }\n        }\n\n        override suspend fun store(ctx: WizardContext): String {\n            return ctx.update.text!!.trim()\n        }\n    }\n\n    object AgeStep : WizardStep {\n        override suspend fun onEntry(ctx: WizardContext) {\n            message { \"\u0421\u043a\u043e\u043b\u044c\u043a\u043e \u0432\u0430\u043c \u043b\u0435\u0442?\" }.send(ctx.user, ctx.bot)\n        }\n\n        override suspend fun onRetry(ctx: WizardContext) {\n            message { \"\u041f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430, \u0432\u0432\u0435\u0434\u0438\u0442\u0435 \u043a\u043e\u0440\u0440\u0435\u043a\u0442\u043d\u044b\u0439 \u0432\u043e\u0437\u0440\u0430\u0441\u0442 (\u0434\u043e\u043b\u0436\u043d\u043e \u0431\u044b\u0442\u044c \u0447\u0438\u0441\u043b\u043e\u043c).\" }.send(ctx.user, ctx.bot)\n        }\n\n        override suspend fun validate(ctx: WizardContext): Transition {\n            val age = ctx.update.text?.toIntOrNull()\n            return when {\n                age == null -&gt; Transition.Retry\n                age &lt; 0 || age &gt; 150 -&gt; Transition.Retry\n                age &lt; 18 -&gt; Transition.JumpTo(UnderageStep::class)\n                else -&gt; Transition.Next\n            }\n        }\n\n        override suspend fun store(ctx: WizardContext): Int {\n            return ctx.update.text!!.toInt()\n        }\n    }\n\n    object UnderageStep : WizardStep {\n        override suspend fun onEntry(ctx: WizardContext) {\n            message { \n                \"\u0418\u0437\u0432\u0438\u043d\u0438\u0442\u0435, \u0432\u0430\u043c \u0434\u043e\u043b\u0436\u043d\u043e \u0431\u044b\u0442\u044c 18 \u043b\u0435\u0442 \u0438\u043b\u0438 \u0431\u043e\u043b\u044c\u0448\u0435 \u0434\u043b\u044f \u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u0438.\" \n            }.send(ctx.user, ctx.bot)\n        }\n\n        override suspend fun onRetry(ctx: WizardContext) = Unit\n\n        override suspend fun validate(ctx: WizardContext): Transition {\n            return Transition.Finish\n        }\n    }\n\n    object ConfirmationStep : WizardStep {\n        override suspend fun onEntry(ctx: WizardContext) {\n            // Type-safe \u0434\u043e\u0441\u0442\u0443\u043f \u043a \u0441\u043e\u0441\u0442\u043e\u044f\u043d\u0438\u044e\n            val name: String? = ctx.getState&lt;NameStep&gt;()\n            val age: Int? = ctx.getState&lt;AgeStep&gt;()\n\n            val confirmation = buildString {\n                appendLine(\"\u041f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430, \u043f\u043e\u0434\u0442\u0432\u0435\u0440\u0434\u0438\u0442\u0435 \u0432\u0430\u0448\u0443 \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044e:\")\n                appendLine(\"\u0418\u043c\u044f: $name\")\n                appendLine(\"\u0412\u043e\u0437\u0440\u0430\u0441\u0442: $age\")\n                appendLine()\n                appendLine(\"\u041e\u0442\u0432\u0435\u0442\u044c\u0442\u0435 '\u0434\u0430' \u0434\u043b\u044f \u043f\u043e\u0434\u0442\u0432\u0435\u0440\u0436\u0434\u0435\u043d\u0438\u044f \u0438\u043b\u0438 '\u043d\u0435\u0442' \u0434\u043b\u044f \u043d\u0430\u0447\u0430\u043b\u0430 \u0437\u0430\u043d\u043e\u0432\u043e.\")\n            }\n\n            message { confirmation }.send(ctx.user, ctx.bot)\n        }\n\n        override suspend fun onRetry(ctx: WizardContext) {\n            message { \"\u041f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430, \u043e\u0442\u0432\u0435\u0442\u044c\u0442\u0435 '\u0434\u0430' \u0438\u043b\u0438 '\u043d\u0435\u0442'.\" }.send(ctx.user, ctx.bot)\n        }\n\n        override suspend fun validate(ctx: WizardContext): Transition {\n            val response = ctx.update.text?.lowercase()?.trim()\n            return when (response) {\n                \"\u0434\u0430\" -&gt; Transition.Finish\n                \"\u043d\u0435\u0442\" -&gt; Transition.JumpTo(NameStep::class) // \u041d\u0430\u0447\u0430\u0442\u044c \u0437\u0430\u043d\u043e\u0432\u043e\n                else -&gt; Transition.Retry\n            }\n        }\n    }\n\n    object FinishStep : WizardStep {\n        override suspend fun onEntry(ctx: WizardContext) {\n            val name: String? = ctx.getState&lt;NameStep&gt;()\n            val age: Int? = ctx.getState&lt;AgeStep&gt;()\n\n            // \u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c \u0432 \u0431\u0430\u0437\u0443 \u0434\u0430\u043d\u043d\u044b\u0445, \u043e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c \u043f\u043e\u0434\u0442\u0432\u0435\u0440\u0436\u0434\u0435\u043d\u0438\u0435 \u0438 \u0442.\u0434.\n            message { \n                \"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f \u0437\u0430\u0432\u0435\u0440\u0448\u0435\u043d\u0430! \u0414\u043e\u0431\u0440\u043e \u043f\u043e\u0436\u0430\u043b\u043e\u0432\u0430\u0442\u044c, $name (\u0432\u043e\u0437\u0440\u0430\u0441\u0442 $age).\" \n            }.send(ctx.user, ctx.bot)\n        }\n\n        override suspend fun onRetry(ctx: WizardContext) = Unit\n\n        override suspend fun validate(ctx: WizardContext): Transition {\n            return Transition.Finish\n        }\n    }\n}\n</code></pre>"},{"location":"ru/FSM-and-Conversation-handling/#_14","title":"\u041f\u0440\u043e\u0434\u0432\u0438\u043d\u0443\u0442\u044b\u0435 \u0424\u0443\u043d\u043a\u0446\u0438\u0438","text":""},{"location":"ru/FSM-and-Conversation-handling/#_15","title":"\u0423\u0441\u043b\u043e\u0432\u043d\u044b\u0435 \u041f\u0435\u0440\u0435\u0445\u043e\u0434\u044b","text":"<p>\u0418\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0439\u0442\u0435 <code>Transition.JumpTo</code> \u0434\u043b\u044f \u0443\u0441\u043b\u043e\u0432\u043d\u044b\u0445 \u043f\u043e\u0442\u043e\u043a\u043e\u0432:</p> <pre><code>override suspend fun validate(ctx: WizardContext): Transition {\n    val choice = ctx.update.text?.lowercase()\n    return when (choice) {\n        \"\u043f\u0440\u0435\u043c\u0438\u0443\u043c\" -&gt; Transition.JumpTo(PremiumStep::class)\n        \"\u0431\u0430\u0437\u043e\u0432\u044b\u0439\" -&gt; Transition.JumpTo(BasicStep::class)\n        else -&gt; Transition.Retry\n    }\n}\n</code></pre>"},{"location":"ru/FSM-and-Conversation-handling/#_16","title":"\u0428\u0430\u0433\u0438 \u0411\u0435\u0437 \u0421\u043e\u0441\u0442\u043e\u044f\u043d\u0438\u044f","text":"<p>\u0428\u0430\u0433\u0438 \u043d\u0435 \u043e\u0431\u044f\u0437\u0430\u043d\u044b \u0441\u043e\u0445\u0440\u0430\u043d\u044f\u0442\u044c \u0441\u043e\u0441\u0442\u043e\u044f\u043d\u0438\u0435. \u041f\u0440\u043e\u0441\u0442\u043e \u0432\u0435\u0440\u043d\u0438\u0442\u0435 <code>null</code> \u0438\u0437 <code>store()</code> (\u0438\u043b\u0438 \u043e\u0441\u0442\u0430\u0432\u044c\u0442\u0435 \u043a\u0430\u043a \u0435\u0441\u0442\u044c):</p> <pre><code>object ConfirmationStep : WizardStep {\n    override suspend fun store(ctx: WizardContext): Any? = null\n    // ... \u043e\u0441\u0442\u0430\u043b\u044c\u043d\u0430\u044f \u0440\u0435\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u044f\n}\n</code></pre>"},{"location":"ru/FSM-and-Conversation-handling/#_17","title":"\u041a\u0430\u0441\u0442\u043e\u043c\u043d\u044b\u0435 \u041c\u0435\u043d\u0435\u0434\u0436\u0435\u0440\u044b \u0421\u043e\u0441\u0442\u043e\u044f\u043d\u0438\u044f","text":"<p>\u0420\u0435\u0430\u043b\u0438\u0437\u0443\u0439\u0442\u0435 <code>WizardStateManager&lt;T&gt;</code> \u0434\u043b\u044f \u043a\u0430\u0441\u0442\u043e\u043c\u043d\u043e\u0433\u043e \u0445\u0440\u0430\u043d\u0435\u043d\u0438\u044f (\u0431\u0430\u0437\u0430 \u0434\u0430\u043d\u043d\u044b\u0445, Redis \u0438 \u0442.\u0434.):</p> <pre><code>class DatabaseStateManager : WizardStateManager&lt;String&gt; {\n    override suspend fun get(\n        key: KClass&lt;out WizardStep&gt;,\n        reference: UserChatReference\n    ): String? {\n        // \u0417\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c \u0438\u0437 \u0431\u0430\u0437\u044b \u0434\u0430\u043d\u043d\u044b\u0445\n        return database.getWizardState(reference.userId, key.qualifiedName)\n    }\n\n    override suspend fun set(\n        key: KClass&lt;out WizardStep&gt;,\n        reference: UserChatReference,\n        value: String\n    ) {\n        // \u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c \u0432 \u0431\u0430\u0437\u0443 \u0434\u0430\u043d\u043d\u044b\u0445\n        database.saveWizardState(reference.userId, key.qualifiedName, value)\n    }\n\n    override suspend fun del(\n        key: KClass&lt;out WizardStep&gt;,\n        reference: UserChatReference\n    ) {\n        // \u0423\u0434\u0430\u043b\u0438\u0442\u044c \u0438\u0437 \u0431\u0430\u0437\u044b \u0434\u0430\u043d\u043d\u044b\u0445\n        database.deleteWizardState(reference.userId, key.qualifiedName)\n    }\n}\n</code></pre>"},{"location":"ru/FSM-and-Conversation-handling/#_18","title":"\u041a\u0430\u043a \u042d\u0442\u043e \u0420\u0430\u0431\u043e\u0442\u0430\u0435\u0442 \u0412\u043d\u0443\u0442\u0440\u0438","text":""},{"location":"ru/FSM-and-Conversation-handling/#_19","title":"\u0413\u0435\u043d\u0435\u0440\u0430\u0446\u0438\u044f \u041a\u043e\u0434\u0430","text":"<p>KSP \u0433\u0435\u043d\u0435\u0440\u0438\u0440\u0443\u0435\u0442:</p> <ol> <li>WizardActivity: \u041a\u043e\u043d\u043a\u0440\u0435\u0442\u043d\u0430\u044f \u0440\u0435\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u044f, \u0440\u0430\u0441\u0448\u0438\u0440\u044f\u044e\u0449\u0430\u044f <code>WizardActivity</code> \u0441 \u0437\u0430\u0445\u0430\u0440\u0434\u043a\u043e\u0436\u0435\u043d\u043d\u044b\u043c\u0438 \u0448\u0430\u0433\u0430\u043c\u0438</li> <li>Start Activity: \u041e\u0431\u0440\u0430\u0431\u0430\u0442\u044b\u0432\u0430\u0435\u0442 \u043a\u043e\u043c\u0430\u043d\u0434\u0443-\u0442\u0440\u0438\u0433\u0433\u0435\u0440 \u0438 \u0437\u0430\u043f\u0443\u0441\u043a\u0430\u0435\u0442 \u043c\u0430\u0441\u0442\u0435\u0440\u0430</li> <li>Input Activity: \u041e\u0431\u0440\u0430\u0431\u0430\u0442\u044b\u0432\u0430\u0435\u0442 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c\u0441\u043a\u0438\u0439 \u0432\u0432\u043e\u0434 \u0432\u043e \u0432\u0440\u0435\u043c\u044f \u043f\u043e\u0442\u043e\u043a\u0430 \u043c\u0430\u0441\u0442\u0435\u0440\u0430</li> <li>State Accessors: Type-safe \u0444\u0443\u043d\u043a\u0446\u0438\u0438-\u0440\u0430\u0441\u0448\u0438\u0440\u0435\u043d\u0438\u044f \u0434\u043b\u044f \u0434\u043e\u0441\u0442\u0443\u043f\u0430 \u043a \u0441\u043e\u0441\u0442\u043e\u044f\u043d\u0438\u044e</li> </ol>"},{"location":"ru/FSM-and-Conversation-handling/#_20","title":"\u041f\u043e\u0442\u043e\u043a","text":"<ol> <li>\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c \u043e\u0442\u043f\u0440\u0430\u0432\u043b\u044f\u0435\u0442 <code>/register</code> \u2192 \u0412\u044b\u0437\u044b\u0432\u0430\u0435\u0442\u0441\u044f Start Activity</li> <li>Start Activity \u0441\u043e\u0437\u0434\u0430\u0435\u0442 <code>WizardContext</code> \u0438 \u0432\u044b\u0437\u044b\u0432\u0430\u0435\u0442 <code>wizardActivity.start(ctx)</code></li> <li><code>start()</code> \u0432\u0445\u043e\u0434\u0438\u0442 \u0432 \u043d\u0430\u0447\u0430\u043b\u044c\u043d\u044b\u0439 \u0448\u0430\u0433 \u0438 \u0443\u0441\u0442\u0430\u043d\u0430\u0432\u043b\u0438\u0432\u0430\u0435\u0442 <code>inputListener</code> \u0434\u043b\u044f \u043e\u0442\u0441\u043b\u0435\u0436\u0438\u0432\u0430\u043d\u0438\u044f \u0442\u0435\u043a\u0443\u0449\u0435\u0433\u043e \u0448\u0430\u0433\u0430</li> <li>\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c \u043e\u0442\u043f\u0440\u0430\u0432\u043b\u044f\u0435\u0442 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435 \u2192 \u0412\u044b\u0437\u044b\u0432\u0430\u0435\u0442\u0441\u044f Input Activity</li> <li>Input Activity \u0432\u044b\u0437\u044b\u0432\u0430\u0435\u0442 <code>wizardActivity.handleInput(ctx)</code></li> <li><code>handleInput()</code> \u043f\u0440\u043e\u0432\u0435\u0440\u044f\u0435\u0442 \u0432\u0432\u043e\u0434, \u0441\u043e\u0445\u0440\u0430\u043d\u044f\u0435\u0442 \u0441\u043e\u0441\u0442\u043e\u044f\u043d\u0438\u0435 \u0438 \u043f\u0435\u0440\u0435\u0445\u043e\u0434\u0438\u0442 \u043a \u0441\u043b\u0435\u0434\u0443\u044e\u0449\u0435\u043c\u0443 \u0448\u0430\u0433\u0443</li> <li>\u041f\u0440\u043e\u0446\u0435\u0441\u0441 \u043f\u043e\u0432\u0442\u043e\u0440\u044f\u0435\u0442\u0441\u044f \u0434\u043e \u0442\u0435\u0445 \u043f\u043e\u0440, \u043f\u043e\u043a\u0430 \u043d\u0435 \u0431\u0443\u0434\u0435\u0442 \u0432\u043e\u0437\u0432\u0440\u0430\u0449\u0435\u043d <code>Transition.Finish</code></li> </ol>"},{"location":"ru/FSM-and-Conversation-handling/#_21","title":"\u0421\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u0438\u0435 \u0421\u043e\u0441\u0442\u043e\u044f\u043d\u0438\u044f","text":"<ul> <li>\u0421\u043e\u0441\u0442\u043e\u044f\u043d\u0438\u0435 \u0441\u043e\u0445\u0440\u0430\u043d\u044f\u0435\u0442\u0441\u044f \u043f\u043e\u0441\u043b\u0435 \u0443\u0441\u043f\u0435\u0448\u043d\u043e\u0439 \u043f\u0440\u043e\u0432\u0435\u0440\u043a\u0438 (\u043f\u0435\u0440\u0435\u0434 \u043f\u0435\u0440\u0435\u0445\u043e\u0434\u043e\u043c)</li> <li>\u0412\u043e\u0437\u0432\u0440\u0430\u0449\u0430\u0435\u043c\u043e\u0435 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435 <code>store()</code> \u043a\u0430\u0436\u0434\u043e\u0433\u043e \u0448\u0430\u0433\u0430 \u0441\u043e\u0445\u0440\u0430\u043d\u044f\u0435\u0442\u0441\u044f \u0441 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u0435\u043c \u0441\u043e\u043e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0443\u044e\u0449\u0435\u0433\u043e <code>WizardStateManager</code></li> <li>\u0421\u043e\u0441\u0442\u043e\u044f\u043d\u0438\u0435 \u043e\u0433\u0440\u0430\u043d\u0438\u0447\u0435\u043d\u043e \u043f\u043e \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044e \u0438 \u0447\u0430\u0442\u0443 (<code>UserChatReference</code>)</li> </ul>"},{"location":"ru/FSM-and-Conversation-handling/#1","title":"1. \u0412\u0441\u0435\u0433\u0434\u0430 \u041f\u0440\u0435\u0434\u043e\u0441\u0442\u0430\u0432\u043b\u044f\u0439\u0442\u0435 \u042f\u0441\u043d\u044b\u0435 \u041f\u043e\u0434\u0441\u043a\u0430\u0437\u043a\u0438","text":"<pre><code>override suspend fun onEntry(ctx: WizardContext) {\n    message { \n        \"\u041f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430, \u0432\u0432\u0435\u0434\u0438\u0442\u0435 \u0432\u0430\u0448 \u0430\u0434\u0440\u0435\u0441 \u044d\u043b\u0435\u043a\u0442\u0440\u043e\u043d\u043d\u043e\u0439 \u043f\u043e\u0447\u0442\u044b:\\n\" +\n        \"(\u0424\u043e\u0440\u043c\u0430\u0442: user@example.com)\" \n    }.send(ctx.user, ctx.bot)\n}\n</code></pre>"},{"location":"ru/FSM-and-Conversation-handling/#2","title":"2. \u0413\u0440\u0430\u0446\u0438\u043e\u0437\u043d\u043e \u041e\u0431\u0440\u0430\u0431\u0430\u0442\u044b\u0432\u0430\u0439\u0442\u0435 \u041e\u0448\u0438\u0431\u043a\u0438 \u041f\u0440\u043e\u0432\u0435\u0440\u043a\u0438","text":"<pre><code>override suspend fun onRetry(ctx: WizardContext) {\n    message { \n        \"\u041d\u0435\u043a\u043e\u0440\u0440\u0435\u043a\u0442\u043d\u044b\u0439 \u0444\u043e\u0440\u043c\u0430\u0442 \u044d\u043b\u0435\u043a\u0442\u0440\u043e\u043d\u043d\u043e\u0439 \u043f\u043e\u0447\u0442\u044b. \u041f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430, \u043f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u0435\u0449\u0435 \u0440\u0430\u0437.\\n\" +\n        \"\u041f\u0440\u0438\u043c\u0435\u0440: user@example.com\" \n    }.send(ctx.user, ctx.bot)\n}\n</code></pre>"},{"location":"ru/FSM-and-Conversation-handling/#3-type-safe","title":"3. \u0418\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0439\u0442\u0435 Type-Safe \u0414\u043e\u0441\u0442\u0443\u043f \u043a \u0421\u043e\u0441\u0442\u043e\u044f\u043d\u0438\u044e","text":"<p>\u041f\u0440\u0435\u0434\u043f\u043e\u0447\u0438\u0442\u0430\u0439\u0442\u0435 \u0441\u0433\u0435\u043d\u0435\u0440\u0438\u0440\u043e\u0432\u0430\u043d\u043d\u044b\u0435 type-safe \u043c\u0435\u0442\u043e\u0434\u044b:</p> <pre><code>// \u2705 \u0425\u043e\u0440\u043e\u0448\u043e - type-safe\nval name: String? = ctx.getState&lt;NameStep&gt;()\n\n// \u274c \u0418\u0437\u0431\u0435\u0433\u0430\u0439\u0442\u0435 - \u0442\u0435\u0440\u044f\u0435\u0442\u0441\u044f type safety\nval name = ctx.getState(NameStep::class) as? String\n</code></pre>"},{"location":"ru/FSM-and-Conversation-handling/#4","title":"4. \u0414\u0435\u0440\u0436\u0438\u0442\u0435 \u0428\u0430\u0433\u0438 \u0421\u043e\u0441\u0440\u0435\u0434\u043e\u0442\u043e\u0447\u0435\u043d\u043d\u044b\u043c\u0438","text":"<p>\u041a\u0430\u0436\u0434\u044b\u0439 \u0448\u0430\u0433 \u0434\u043e\u043b\u0436\u0435\u043d \u0438\u043c\u0435\u0442\u044c \u0435\u0434\u0438\u043d\u0441\u0442\u0432\u0435\u043d\u043d\u0443\u044e \u043e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0435\u043d\u043d\u043e\u0441\u0442\u044c:</p> <pre><code>// \u2705 \u0425\u043e\u0440\u043e\u0448\u043e - \u0441\u043e\u0441\u0440\u0435\u0434\u043e\u0442\u043e\u0447\u0435\u043d\u043d\u044b\u0439 \u0448\u0430\u0433\nobject EmailStep : WizardStep {\n    // \u0422\u043e\u043b\u044c\u043a\u043e \u043e\u0431\u0440\u0430\u0431\u0430\u0442\u044b\u0432\u0430\u0435\u0442 \u0441\u0431\u043e\u0440 \u044d\u043b\u0435\u043a\u0442\u0440\u043e\u043d\u043d\u043e\u0439 \u043f\u043e\u0447\u0442\u044b\n}\n\n// \u274c \u0418\u0437\u0431\u0435\u0433\u0430\u0439\u0442\u0435 - \u0441\u043b\u0438\u0448\u043a\u043e\u043c \u043c\u043d\u043e\u0433\u043e \u043b\u043e\u0433\u0438\u043a\u0438\nobject PersonalInfoStep : WizardStep {\n    // \u041e\u0431\u0440\u0430\u0431\u0430\u0442\u044b\u0432\u0430\u0435\u0442 \u0438\u043c\u044f, \u044d\u043b\u0435\u043a\u0442\u0440\u043e\u043d\u043d\u0443\u044e \u043f\u043e\u0447\u0442\u0443, \u0442\u0435\u043b\u0435\u0444\u043e\u043d, \u0430\u0434\u0440\u0435\u0441...\n}\n</code></pre>"},{"location":"ru/FSM-and-Conversation-handling/#5","title":"5. \u0418\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0439\u0442\u0435 \u0417\u043d\u0430\u0447\u0438\u043c\u044b\u0435 \u0418\u043c\u0435\u043d\u0430 \u0428\u0430\u0433\u043e\u0432","text":"<pre><code>// \u2705 \u0425\u043e\u0440\u043e\u0448\u043e\nobject EmailVerificationStep : WizardStep\n\n// \u274c \u0418\u0437\u0431\u0435\u0433\u0430\u0439\u0442\u0435\nobject Step2 : WizardStep\n</code></pre>"},{"location":"ru/FSM-and-Conversation-handling/#6","title":"6. \u041e\u0447\u0438\u0449\u0430\u0439\u0442\u0435 \u0421\u043e\u0441\u0442\u043e\u044f\u043d\u0438\u0435 \u041f\u0440\u0438 \u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e\u0441\u0442\u0438","text":"<p>\u0415\u0441\u043b\u0438 \u0432\u0430\u043c \u043d\u0443\u0436\u043d\u043e \u0432\u0440\u0443\u0447\u043d\u0443\u044e \u043e\u0447\u0438\u0441\u0442\u0438\u0442\u044c \u0441\u043e\u0441\u0442\u043e\u044f\u043d\u0438\u0435:</p> <pre><code>object CancelStep : WizardStep {\n    override suspend fun onEntry(ctx: WizardContext) {\n        // \u041e\u0447\u0438\u0441\u0442\u0438\u0442\u044c \u0432\u0441\u0435 \u0441\u043e\u0441\u0442\u043e\u044f\u043d\u0438\u0435 \u043c\u0430\u0441\u0442\u0435\u0440\u0430\n        ctx.delState&lt;NameStep&gt;()\n        ctx.delState&lt;AgeStep&gt;()\n\n        message { \"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f \u043e\u0442\u043c\u0435\u043d\u0435\u043d\u0430.\" }.send(ctx.user, ctx.bot)\n    }\n}\n</code></pre>"},{"location":"ru/FSM-and-Conversation-handling/#summary","title":"Summary","text":"<p>\u0421\u0438\u0441\u0442\u0435\u043c\u0430 Wizard \u043f\u0440\u0435\u0434\u043e\u0441\u0442\u0430\u0432\u043b\u044f\u0435\u0442: - \u2705 Type-safe \u0443\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u0438\u0435 \u0441\u043e\u0441\u0442\u043e\u044f\u043d\u0438\u0435\u043c \u0441 \u043f\u0440\u043e\u0432\u0435\u0440\u043a\u043e\u0439 \u043d\u0430 \u044d\u0442\u0430\u043f\u0435 \u043a\u043e\u043c\u043f\u0438\u043b\u044f\u0446\u0438\u0438 - \u2705 \u0414\u0435\u043a\u043b\u0430\u0440\u0430\u0442\u0438\u0432\u043d\u043e\u0435 \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u0435\u043d\u0438\u0435 \u0448\u0430\u0433\u043e\u0432 \u043a\u0430\u043a \u0432\u043b\u043e\u0436\u0435\u043d\u043d\u044b\u0435 \u043a\u043b\u0430\u0441\u0441\u044b - \u2705 \u0413\u0438\u0431\u043a\u0438\u0435 \u043f\u0435\u0440\u0435\u0445\u043e\u0434\u044b \u0441 \u0443\u0441\u043b\u043e\u0432\u043d\u043e\u0439 \u043b\u043e\u0433\u0438\u043a\u043e\u0439 - \u2705 \u0410\u0432\u0442\u043e\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u0443\u044e \u0433\u0435\u043d\u0435\u0440\u0430\u0446\u0438\u044e \u043a\u043e\u0434\u0430 \u0447\u0435\u0440\u0435\u0437 KSP - \u2705 \u0418\u043d\u0442\u0435\u0433\u0440\u0438\u0440\u043e\u0432\u0430\u043d\u043d\u0443\u044e \u0441 \u0441\u0443\u0449\u0435\u0441\u0442\u0432\u0443\u044e\u0449\u0435\u0439 \u0441\u0438\u0441\u0442\u0435\u043c\u043e\u0439 Activity - \u2705 \u041f\u043e\u0434\u043a\u043b\u044e\u0447\u0430\u0435\u043c\u044b\u0435 \u0431\u044d\u043a\u0435\u043d\u0434\u044b \u0445\u0440\u0430\u043d\u0435\u043d\u0438\u044f \u0441\u043e\u0441\u0442\u043e\u044f\u043d\u0438\u044f</p> <p>\u041d\u0430\u0447\u043d\u0438\u0442\u0435 \u0441\u043e\u0437\u0434\u0430\u0432\u0430\u0442\u044c \u043c\u0430\u0441\u0442\u0435\u0440\u0430, \u0430\u043d\u043d\u043e\u0442\u0438\u0440\u0443\u044f \u043a\u043b\u0430\u0441\u0441 \u0441 <code>@WizardHandler</code> \u0438 \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u044f\u044f \u0432\u0430\u0448\u0438 \u0448\u0430\u0433\u0438 \u043a\u0430\u043a \u0432\u043b\u043e\u0436\u0435\u043d\u043d\u044b\u0435 \u043e\u0431\u044a\u0435\u043a\u0442\u044b <code>WizardStep</code>!</p>"},{"location":"ru/Functional-DSL/#to-infinity-functional-dsl-and-beyond","title":"To ~~infinity~~ functional dsl and beyond!","text":"<p>\u0411\u043e\u0442 \u043f\u043e\u0434\u0434\u0435\u0440\u0436\u0438\u0432\u0430\u0435\u0442 \u043a\u0430\u043a \u0430\u043d\u043d\u043e\u0442\u0430\u0446\u0438\u043e\u043d\u043d\u044b\u0439, \u0442\u0430\u043a \u0438 \u0444\u0443\u043d\u043a\u0446\u0438\u043e\u043d\u0430\u043b\u044c\u043d\u044b\u0439 \u043f\u043e\u0434\u0445\u043e\u0434 \u043a \u043d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0435 \u043a\u043e\u043d\u0442\u0435\u043a\u0441\u0442\u0430. \u0412\u044b \u043c\u043e\u0436\u0435\u0442\u0435 \u043a\u043e\u043c\u0431\u0438\u043d\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u043e\u0431\u0430 \u043f\u043e\u0434\u0445\u043e\u0434\u0430.</p>"},{"location":"ru/Functional-DSL/#functional-dsl","title":"Functional DSL","text":"<p>Functional DSL \u2014 \u044d\u0442\u043e \u043f\u0440\u043e\u0441\u0442\u043e \u0434\u0440\u0443\u0433\u043e\u0439 \u0441\u043f\u043e\u0441\u043e\u0431 \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u0435\u043d\u0438\u044f \u043a\u043e\u043d\u0442\u0435\u043a\u0441\u0442\u0430 \u0431\u043e\u0442\u0430.</p> <p>\u041f\u0440\u0438\u043c\u0435\u0440:</p> <pre><code>suspend fun main() {\n    val bot = TelegramBot(\"BOT_TOKEN\")\n\n    bot.setFunctionality {\n        onChosenInlineResult {\n            println(\"got a result ${update.chosenInlineResult.resultId} from ${update.user}\")\n        }\n    }\n}\n</code></pre>"},{"location":"ru/Functional-DSL/#commands-and-inputs","title":"Commands and Inputs","text":"<p>\u0412\u044b \u043c\u043e\u0436\u0435\u0442\u0435 \u043e\u0431\u0440\u0430\u0431\u0430\u0442\u044b\u0432\u0430\u0442\u044c \u043a\u0430\u043a <code>commands</code>, \u0442\u0430\u043a \u0438 <code>inputs</code> \u0441 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u0435\u043c \u0444\u0443\u043d\u043a\u0446\u0438\u043e\u043d\u0430\u043b\u044c\u043d\u043e\u0433\u043e DSL.</p>"},{"location":"ru/Functional-DSL/#commands","title":"Commands","text":"<pre><code>suspend fun main() {\n    val bot = TelegramBot(\"BOT_TOKEN\")\n\n    bot.setFunctionality {\n        // Regular command\n        onCommand(\"/start\") {\n            message { \"Hello\" }.send(user, bot)\n        }\n\n        // Regex-based command matching\n        onCommand(\"\"\"(red|green|blue)\"\"\".toRegex()) {\n            message { \"you typed ${update.text} color\" }.send(user, bot)\n        }\n    }\n}\n</code></pre> <p>\u0412 <code>onCommand</code>, \u0440\u0430\u0437\u043e\u0431\u0440\u0430\u043d\u043d\u044b\u0435 \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b \u0434\u043e\u0441\u0442\u0443\u043f\u043d\u044b \u043a\u0430\u043a <code>Map&lt;String, String&gt;</code> \u0432 \u0437\u0430\u0432\u0438\u0441\u0438\u043c\u043e\u0441\u0442\u0438 \u043e\u0442 \u0432\u0430\u0448\u0435\u0439 \u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u0438.</p>"},{"location":"ru/Functional-DSL/#inputs","title":"Inputs","text":"<p>\u0412\u044b \u043c\u043e\u0436\u0435\u0442\u0435 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c inputs \u0447\u0435\u0440\u0435\u0437 <code>bot.inputListener</code>.</p> <pre><code>suspend fun main() {\n    val bot = TelegramBot(\"BOT_TOKEN\")\n\n    bot.setFunctionality {\n        onCommand(\"/start\") {\n            message { \"Hello, what's your name?\" }.send(user, bot)\n            bot.inputListener[user] = \"testInput\"\n        }\n\n        onInput(\"testInput\") {\n            message { \"Hey, nice to meet you, ${update.text}\" }.send(user, bot)\n        }\n    }\n}\n</code></pre>"},{"location":"ru/Functional-DSL/#input-chains","title":"Input Chains","text":"<p>\u0414\u043b\u044f \u043c\u043d\u043e\u0433\u043e\u0448\u0430\u0433\u043e\u0432\u044b\u0445 \u043f\u043e\u0442\u043e\u043a\u043e\u0432 \u0432\u0432\u043e\u0434\u0430 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0439\u0442\u0435 <code>inputChain</code>:</p> <pre><code>bot.setFunctionality {\n    inputChain(\"conversation\") {\n        message { \"Nice to meet you, ${update.text}\" }.send(user, bot)\n        message { \"What is your favorite food?\" }.send(user, bot)\n    }.breakIf({ update.text == \"peanut butter\" }) { // chain break condition\n        message { \"Oh, too bad, I'm allergic to it.\" }.send(user, bot)\n        // action that will be applied when condition matches\n    }.andThen {\n        // next input point if break condition doesn't match\n        message { \"Great choice!\" }.send(user, bot)\n    }\n}\n</code></pre> <p>\u0426\u0435\u043f\u043e\u0447\u043a\u0430 \u0430\u0432\u0442\u043e\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u0438 \u043f\u0435\u0440\u0435\u0445\u043e\u0434\u0438\u0442 \u043a \u0441\u043b\u0435\u0434\u0443\u044e\u0449\u0435\u043c\u0443 \u0448\u0430\u0433\u0443, \u0435\u0441\u043b\u0438 \u043d\u0435 \u0441\u0440\u0430\u0431\u043e\u0442\u0430\u043b\u043e \u0443\u0441\u043b\u043e\u0432\u0438\u0435 \u043f\u0440\u0435\u0440\u044b\u0432\u0430\u043d\u0438\u044f. \u0415\u0441\u043b\u0438 \u0443\u0441\u043b\u043e\u0432\u0438\u0435 \u043f\u0440\u0435\u0440\u044b\u0432\u0430\u043d\u0438\u044f \u0441\u0440\u0430\u0431\u0430\u0442\u044b\u0432\u0430\u0435\u0442 \u0438 <code>repeat</code> \u0440\u0430\u0432\u0435\u043d <code>true</code> (\u043f\u043e \u0443\u043c\u043e\u043b\u0447\u0430\u043d\u0438\u044e), \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c \u043e\u0441\u0442\u0430\u0435\u0442\u0441\u044f \u043d\u0430 \u0442\u0435\u043a\u0443\u0449\u0435\u043c \u0448\u0430\u0433\u0435.</p>"},{"location":"ru/Functional-DSL/#update-type-handlers","title":"Update Type Handlers","text":"<p>\u041e\u0431\u0440\u0430\u0431\u0430\u0442\u044b\u0432\u0430\u0439\u0442\u0435 \u043a\u043e\u043d\u043a\u0440\u0435\u0442\u043d\u044b\u0435 \u0442\u0438\u043f\u044b \u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0439 \u043d\u0430\u043f\u0440\u044f\u043c\u0443\u044e:</p> <pre><code>bot.setFunctionality {\n    onUpdate(UpdateType.MESSAGE, UpdateType.CALLBACK_QUERY) {\n        // Handle both message and callback query updates\n        println(\"Received update: ${update.type}\")\n    }\n}\n</code></pre>"},{"location":"ru/Functional-DSL/#common-matchers","title":"Common Matchers","text":"<p>\u0421\u043e\u0432\u043f\u0430\u0434\u0435\u043d\u0438\u0435 \u0441 \u0442\u0435\u043a\u0441\u0442\u043e\u0432\u044b\u043c \u0441\u043e\u0434\u0435\u0440\u0436\u0438\u043c\u044b\u043c (\u043d\u0435 \u0442\u043e\u043b\u044c\u043a\u043e \u043a\u043e\u043c\u0430\u043d\u0434\u0430\u043c\u0438) \u0441 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u0435\u043c <code>common</code>:</p> <pre><code>bot.setFunctionality {\n    // String matching\n    common(\"hello\") {\n        message { \"Hi there!\" }.send(user, bot)\n    }\n\n    // Regex matching\n    common(\"\"\"\\d+\"\"\".toRegex()) {\n        message { \"You sent a number!\" }.send(user, bot)\n    }\n}\n</code></pre>"},{"location":"ru/Functional-DSL/#fallback-handler","title":"Fallback Handler","text":"<p>\u041e\u0431\u0440\u0430\u0431\u0430\u0442\u044b\u0432\u0430\u0439\u0442\u0435 \u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u044f, \u043a\u043e\u0442\u043e\u0440\u044b\u0435 \u043d\u0435 \u0431\u044b\u043b\u0438 \u043e\u0431\u0440\u0430\u0431\u043e\u0442\u0430\u043d\u044b \u043d\u0438 \u043e\u0434\u043d\u0438\u043c \u043e\u0431\u0440\u0430\u0431\u043e\u0442\u0447\u0438\u043a\u043e\u043c:</p> <pre><code>bot.setFunctionality {\n    whenNotHandled {\n        message { \"I didn't understand that.\" }.send(user, bot)\n    }\n}\n</code></pre>"},{"location":"ru/Functional-DSL/#rate-limiting","title":"Rate Limiting","text":"<p>\u041f\u0440\u0438\u043c\u0435\u043d\u044f\u0439\u0442\u0435 \u043e\u0433\u0440\u0430\u043d\u0438\u0447\u0435\u043d\u0438\u044f \u0447\u0430\u0441\u0442\u043e\u0442\u044b \u043a \u043b\u044e\u0431\u043e\u043c\u0443 \u043e\u0431\u0440\u0430\u0431\u043e\u0442\u0447\u0438\u043a\u0443:</p> <pre><code>bot.setFunctionality {\n    onCommand(\"/expensive\", rateLimits = RateLimits(5, 60)) {\n        // This command can only be called 5 times per 60 seconds\n        message { \"Processing...\" }.send(user, bot)\n    }\n}\n</code></pre>"},{"location":"ru/Functional-DSL/#guards","title":"Guards","text":"<p>\u0418\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0439\u0442\u0435 guards \u0434\u043b\u044f \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0438\u044f \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c\u0441\u043a\u043e\u0439 \u043b\u043e\u0433\u0438\u043a\u0438 \u0432\u0430\u043b\u0438\u0434\u0430\u0446\u0438\u0438:</p> <pre><code>bot.setFunctionality {\n    onCommand(\"/admin\", guard = AdminGuard::class) {\n        message { \"Admin command executed\" }.send(user, bot)\n    }\n}\n</code></pre>"},{"location":"ru/Functional-DSL/#argument-parsing","title":"Argument Parsing","text":"<p>\u041d\u0430\u0441\u0442\u0440\u0430\u0438\u0432\u0430\u0439\u0442\u0435 \u0441\u043f\u043e\u0441\u043e\u0431 \u0440\u0430\u0437\u0431\u043e\u0440\u0430 \u0430\u0440\u0433\u0443\u043c\u0435\u043d\u0442\u043e\u0432 \u043a\u043e\u043c\u0430\u043d\u0434:</p> <pre><code>bot.setFunctionality {\n    onCommand(\"/custom\", argParser = CustomArgParser::class) {\n        // parameters will be parsed using CustomArgParser\n        message { \"Parameters: $parameters\" }.send(user, bot)\n    }\n}\n</code></pre>"},{"location":"ru/Functional-DSL/#combining-functional-and-annotation-based-setting","title":"Combining Functional and Annotation-Based setting","text":"<p>\u0412\u044b \u043c\u043e\u0436\u0435\u0442\u0435 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c \u043e\u0431\u0430 \u043f\u043e\u0434\u0445\u043e\u0434\u0430 \u0432 \u043e\u0434\u043d\u043e\u043c \u0431\u043e\u0442\u0435:</p> <pre><code>// Annotation-based handler\n@CommandHandler([\"/register\"])\nsuspend fun register(ctx: CommandContext) {\n    message { \"Registration started\" }.send(ctx.user, ctx.bot)\n}\n\n// Functional handler\nbot.setFunctionality {\n    onCommand(\"/help\") {\n        message { \"Available commands: /register, /help\" }.send(user, bot)\n    }\n}\n</code></pre> <p>\u041e\u0431\u0430 \u043e\u0431\u0440\u0430\u0431\u043e\u0442\u0447\u0438\u043a\u0430 \u0437\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u043d\u044b \u0432 \u043e\u0434\u043d\u043e\u043c <code>ActivityRegistry</code> \u0438 \u0440\u0430\u0431\u043e\u0442\u0430\u044e\u0442 \u0432\u043c\u0435\u0441\u0442\u0435 \u0431\u0435\u0437 \u043f\u0440\u043e\u0431\u043b\u0435\u043c.</p>"},{"location":"ru/Guards/#_1","title":"\u0412\u0432\u0435\u0434\u0435\u043d\u0438\u0435","text":"<p>Guards - \u044d\u0442\u043e \u0432\u0430\u0436\u043d\u0430\u044f \u0444\u0443\u043d\u043a\u0446\u0438\u044f \u0434\u043b\u044f \u0440\u0430\u0437\u0440\u0430\u0431\u043e\u0442\u0447\u0438\u043a\u043e\u0432, \u0441\u043e\u0437\u0434\u0430\u044e\u0449\u0438\u0445 \u0431\u043e\u0442\u043e\u0432. \u042d\u0442\u0438 guards \u0434\u0435\u0439\u0441\u0442\u0432\u0443\u044e\u0442 \u043a\u0430\u043a \u043f\u0440\u0435\u0434\u0432\u0430\u0440\u0438\u0442\u0435\u043b\u044c\u043d\u044b\u0435 \u043f\u0440\u043e\u0432\u0435\u0440\u043a\u0438 \u043f\u0435\u0440\u0435\u0434 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u0435\u043c, \u043a\u043e\u0442\u043e\u0440\u044b\u0435 \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u044f\u044e\u0442, \u0434\u043e\u043b\u0436\u0435\u043d \u043b\u0438 \u0431\u044b\u0442\u044c \u0432\u044b\u0437\u0432\u0430\u043d \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u0435\u043d\u043d\u044b\u0439 \u043a\u043e\u043c\u0430\u043d\u0434\u043d\u044b\u0439 \u043e\u0431\u0440\u0430\u0431\u043e\u0442\u0447\u0438\u043a. \u0420\u0435\u0430\u043b\u0438\u0437\u0443\u044f \u044d\u0442\u0438 \u043f\u0440\u043e\u0432\u0435\u0440\u043a\u0438, \u0440\u0430\u0437\u0440\u0430\u0431\u043e\u0442\u0447\u0438\u043a\u0438 \u043c\u043e\u0433\u0443\u0442 \u0443\u043b\u0443\u0447\u0448\u0438\u0442\u044c \u0444\u0443\u043d\u043a\u0446\u0438\u043e\u043d\u0430\u043b\u044c\u043d\u043e\u0441\u0442\u044c, \u0431\u0435\u0437\u043e\u043f\u0430\u0441\u043d\u043e\u0441\u0442\u044c \u0438 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c\u0441\u043a\u0438\u0439 \u043e\u043f\u044b\u0442 \u0441\u0432\u043e\u0438\u0445 \u0431\u043e\u0442\u043e\u0432.</p>"},{"location":"ru/Guards/#guards","title":"\u041d\u0430\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435 Guards \u0430\u043a\u0442\u0438\u0432\u043d\u043e\u0441\u0442\u0438","text":"<p>\u041e\u0441\u043d\u043e\u0432\u043d\u043e\u0435 \u043d\u0430\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435 guards \u0430\u043a\u0442\u0438\u0432\u043d\u043e\u0441\u0442\u0438 - \u043e\u0431\u0435\u0441\u043f\u0435\u0447\u0438\u0442\u044c, \u0447\u0442\u043e\u0431\u044b \u0442\u043e\u043b\u044c\u043a\u043e \u0430\u0432\u0442\u043e\u0440\u0438\u0437\u043e\u0432\u0430\u043d\u043d\u044b\u0435 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u0438 \u0438\u043b\u0438 \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u0435\u043d\u043d\u044b\u0435 \u0443\u0441\u043b\u043e\u0432\u0438\u044f \u0437\u0430\u043f\u0443\u0441\u043a\u0430\u043b\u0438 \u0430\u043a\u0442\u0438\u0432\u043d\u043e\u0441\u0442\u044c.</p> <p>\u042d\u0442\u043e \u043c\u043e\u0436\u0435\u0442 \u043f\u0440\u0435\u0434\u043e\u0442\u0432\u0440\u0430\u0442\u0438\u0442\u044c \u043d\u0435\u043f\u0440\u0430\u0432\u0438\u043b\u044c\u043d\u043e\u0435 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u0435, \u043f\u043e\u0434\u0434\u0435\u0440\u0436\u0438\u0432\u0430\u0442\u044c \u0446\u0435\u043b\u043e\u0441\u0442\u043d\u043e\u0441\u0442\u044c \u0431\u043e\u0442\u0430 \u0438 \u043e\u043f\u0442\u0438\u043c\u0438\u0437\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u0432\u0437\u0430\u0438\u043c\u043e\u0434\u0435\u0439\u0441\u0442\u0432\u0438\u044f.</p>"},{"location":"ru/Guards/#_2","title":"\u0420\u0430\u0441\u043f\u0440\u043e\u0441\u0442\u0440\u0430\u043d\u0435\u043d\u043d\u044b\u0435 \u0441\u0446\u0435\u043d\u0430\u0440\u0438\u0438 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u044f","text":"<ol> <li>\u0410\u0443\u0442\u0435\u043d\u0442\u0438\u0444\u0438\u043a\u0430\u0446\u0438\u044f \u0438 \u0430\u0432\u0442\u043e\u0440\u0438\u0437\u0430\u0446\u0438\u044f: \u041e\u0431\u0435\u0441\u043f\u0435\u0447\u0435\u043d\u0438\u0435 \u0434\u043e\u0441\u0442\u0443\u043f\u0430 \u0442\u043e\u043b\u044c\u043a\u043e \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u0435\u043d\u043d\u044b\u0445 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u0435\u0439 \u043a \u043a\u043e\u043d\u043a\u0440\u0435\u0442\u043d\u044b\u043c \u043a\u043e\u043c\u0430\u043d\u0434\u0430\u043c.</li> <li>\u041f\u0440\u043e\u0432\u0435\u0440\u043a\u0438 \u043f\u0440\u0435\u0434\u0432\u0430\u0440\u0438\u0442\u0435\u043b\u044c\u043d\u044b\u0445 \u0443\u0441\u043b\u043e\u0432\u0438\u0439: \u041f\u0440\u043e\u0432\u0435\u0440\u043a\u0430 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u0435\u043d\u043d\u044b\u0445 \u0443\u0441\u043b\u043e\u0432\u0438\u0439 \u043f\u0435\u0440\u0435\u0434 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u0435\u043c \u0430\u043a\u0442\u0438\u0432\u043d\u043e\u0441\u0442\u0438 (\u043d\u0430\u043f\u0440\u0438\u043c\u0435\u0440, \u043f\u0440\u043e\u0432\u0435\u0440\u043a\u0430 \u043d\u0430\u0445\u043e\u0436\u0434\u0435\u043d\u0438\u044f \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f \u0432 \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u0435\u043d\u043d\u043e\u043c \u0441\u043e\u0441\u0442\u043e\u044f\u043d\u0438\u0438 \u0438\u043b\u0438 \u043a\u043e\u043d\u0442\u0435\u043a\u0441\u0442\u0435).</li> <li>\u041a\u043e\u043d\u0442\u0435\u043a\u0441\u0442\u043d\u044b\u0435 guards: \u041f\u0440\u0438\u043d\u044f\u0442\u0438\u0435 \u0440\u0435\u0448\u0435\u043d\u0438\u0439 \u043d\u0430 \u043e\u0441\u043d\u043e\u0432\u0435 \u0442\u0435\u043a\u0443\u0449\u0435\u0433\u043e \u0441\u043e\u0441\u0442\u043e\u044f\u043d\u0438\u044f \u0447\u0430\u0442\u0430 \u0438\u043b\u0438 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f.</li> </ol>"},{"location":"ru/Guards/#_3","title":"\u0421\u0442\u0440\u0430\u0442\u0435\u0433\u0438\u0438 \u0440\u0435\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u0438","text":"<p>\u0420\u0435\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u044f Telegram Command Guards \u043e\u0431\u044b\u0447\u043d\u043e \u0432\u043a\u043b\u044e\u0447\u0430\u0435\u0442 \u043d\u0430\u043f\u0438\u0441\u0430\u043d\u0438\u0435 \u0444\u0443\u043d\u043a\u0446\u0438\u0439 \u0438\u043b\u0438 \u043c\u0435\u0442\u043e\u0434\u043e\u0432, \u043a\u043e\u0442\u043e\u0440\u044b\u0435 \u0438\u043d\u043a\u0430\u043f\u0441\u0443\u043b\u0438\u0440\u0443\u044e\u0442 \u043b\u043e\u0433\u0438\u043a\u0443 \u0434\u043b\u044f \u043a\u0430\u0436\u0434\u043e\u0433\u043e guard. \u041d\u0438\u0436\u0435 \u043f\u0440\u0438\u0432\u0435\u0434\u0435\u043d\u044b \u0440\u0430\u0441\u043f\u0440\u043e\u0441\u0442\u0440\u0430\u043d\u0435\u043d\u043d\u044b\u0435 \u0441\u0442\u0440\u0430\u0442\u0435\u0433\u0438\u0438:</p> <ol> <li>\u041f\u0440\u043e\u0432\u0435\u0440\u043a\u0430 \u0440\u043e\u043b\u0438 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f:</li> <li> <p>\u041e\u0431\u0435\u0441\u043f\u0435\u0447\u0435\u043d\u0438\u0435 \u043d\u0430\u043b\u0438\u0447\u0438\u044f \u0443 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e\u0439 \u0440\u043e\u043b\u0438 (\u043d\u0430\u043f\u0440\u0438\u043c\u0435\u0440, \u0430\u0434\u043c\u0438\u043d\u0438\u0441\u0442\u0440\u0430\u0442\u043e\u0440, \u043c\u043e\u0434\u0435\u0440\u0430\u0442\u043e\u0440) \u043f\u0435\u0440\u0435\u0434 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u0435\u043c \u043a\u043e\u043c\u0430\u043d\u0434\u044b.       <pre><code> override suspend fun condition(user: User?, update: ProcessedUpdate, bot: TelegramBot): Boolean {\n  // Check if the user is an admin in the given chat\n }\n</code></pre></p> </li> <li> <p>\u041f\u0440\u043e\u0432\u0435\u0440\u043a\u0430 \u0441\u043e\u0441\u0442\u043e\u044f\u043d\u0438\u044f:</p> </li> <li> <p>\u041f\u0440\u043e\u0432\u0435\u0440\u043a\u0430 \u0441\u043e\u0441\u0442\u043e\u044f\u043d\u0438\u044f \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f \u043f\u0435\u0440\u0435\u0434 \u0440\u0430\u0437\u0440\u0435\u0448\u0435\u043d\u0438\u0435\u043c \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f \u043a\u043e\u043c\u0430\u043d\u0434\u044b.      <pre><code>override suspend fun condition(user: User?, update: ProcessedUpdate, bot: TelegramBot): Boolean {\n   return bot.userData[user.id, \"data\"] == requiredState\n}\n</code></pre></p> </li> <li> <p>\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c\u0441\u043a\u0438\u0435 guards:</p> </li> <li>\u0421\u043e\u0437\u0434\u0430\u043d\u0438\u0435 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c\u0441\u043a\u043e\u0439 \u043b\u043e\u0433\u0438\u043a\u0438 \u043d\u0430 \u043e\u0441\u043d\u043e\u0432\u0435 \u043a\u043e\u043d\u043a\u0440\u0435\u0442\u043d\u044b\u0445 \u0442\u0440\u0435\u0431\u043e\u0432\u0430\u043d\u0438\u0439.      <pre><code>override suspend fun condition(user: User?, update: ProcessedUpdate, bot: TelegramBot): Boolean {\n   // Custom logic to determine if the command should be executed\n}\n</code></pre></li> </ol>"},{"location":"ru/Guards/#guards_1","title":"\u0418\u043d\u0442\u0435\u0433\u0440\u0430\u0446\u0438\u044f guards \u0441 \u0430\u043a\u0442\u0438\u0432\u043d\u043e\u0441\u0442\u044f\u043c\u0438","text":"<p>\u0414\u043b\u044f \u0438\u043d\u0442\u0435\u0433\u0440\u0430\u0446\u0438\u0438 \u044d\u0442\u0438\u0445 guards \u0441 \u0432\u0430\u0448\u0438\u043c\u0438 \u043a\u043e\u043c\u0430\u043d\u0434\u043d\u044b\u043c\u0438 \u043e\u0431\u0440\u0430\u0431\u043e\u0442\u0447\u0438\u043a\u0430\u043c\u0438 \u0431\u043e\u0442\u043e\u0432, \u0432\u044b \u043c\u043e\u0436\u0435\u0442\u0435 \u0441\u043e\u0437\u0434\u0430\u0442\u044c guard, \u043a\u043e\u0442\u043e\u0440\u044b\u0439 \u043f\u0440\u043e\u0432\u0435\u0440\u044f\u0435\u0442 \u044d\u0442\u0438 \u0443\u0441\u043b\u043e\u0432\u0438\u044f \u043f\u0435\u0440\u0435\u0434 \u0432\u044b\u0437\u043e\u0432\u043e\u043c \u043e\u0431\u0440\u0430\u0431\u043e\u0442\u0447\u0438\u043a\u0430 \u043a\u043e\u043c\u0430\u043d\u0434\u044b.</p>"},{"location":"ru/Guards/#_4","title":"\u041f\u0440\u0438\u043c\u0435\u0440 \u0440\u0435\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u0438","text":"<pre><code>// define somewhere your guard class that implements Guard interface\nobject YourGuard : Guard {\n    override suspend fun condition(user: User?, update: ProcessedUpdate, bot: TelegramBot): Boolean {\n        // write your condition here\n    }\n}\n\n// ...\n\n@CommandHandler([\"yourCommand\"])\n@Guard(YourGuard::class) // InputHandler also is supported\nfun command(bot: TelegramBot) {\n   // command body\n}\n</code></pre>"},{"location":"ru/Guards/#_5","title":"\u0420\u0435\u043a\u043e\u043c\u0435\u043d\u0434\u0430\u0446\u0438\u0438","text":"<ul> <li>\u041c\u043e\u0434\u0443\u043b\u044c\u043d\u043e\u0441\u0442\u044c: \u0421\u043e\u0445\u0440\u0430\u043d\u044f\u0439\u0442\u0435 \u043b\u043e\u0433\u0438\u043a\u0443 guard \u043c\u043e\u0434\u0443\u043b\u044c\u043d\u043e\u0439 \u0438 \u043e\u0442\u0434\u0435\u043b\u044c\u043d\u043e\u0439 \u043e\u0442 \u0430\u043a\u0442\u0438\u0432\u043d\u043e\u0441\u0442\u0435\u0439.</li> <li>\u041f\u043e\u0432\u0442\u043e\u0440\u043d\u043e\u0435 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u0435: \u041f\u0438\u0448\u0438\u0442\u0435 \u043f\u043e\u0432\u0442\u043e\u0440\u043d\u043e \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u043c\u044b\u0435 guard \u0444\u0443\u043d\u043a\u0446\u0438\u0438, \u043a\u043e\u0442\u043e\u0440\u044b\u0435 \u043c\u043e\u0436\u043d\u043e \u043b\u0435\u0433\u043a\u043e \u043f\u0440\u0438\u043c\u0435\u043d\u0438\u0442\u044c \u043a \u0440\u0430\u0437\u043b\u0438\u0447\u043d\u044b\u043c \u043a\u043e\u043c\u0430\u043d\u0434\u0430\u043c/\u0432\u0445\u043e\u0434\u043d\u044b\u043c \u0434\u0430\u043d\u043d\u044b\u043c.</li> <li>\u042d\u0444\u0444\u0435\u043a\u0442\u0438\u0432\u043d\u043e\u0441\u0442\u044c: \u041e\u043f\u0442\u0438\u043c\u0438\u0437\u0438\u0440\u0443\u0439\u0442\u0435 \u043f\u0440\u043e\u0432\u0435\u0440\u043a\u0438 guard \u0434\u043b\u044f \u043c\u0438\u043d\u0438\u043c\u0438\u0437\u0430\u0446\u0438\u0438 \u043d\u0430\u043a\u043b\u0430\u0434\u043d\u044b\u0445 \u0440\u0430\u0441\u0445\u043e\u0434\u043e\u0432 \u043d\u0430 \u043f\u0440\u043e\u0438\u0437\u0432\u043e\u0434\u0438\u0442\u0435\u043b\u044c\u043d\u043e\u0441\u0442\u044c.</li> <li>\u041e\u0431\u0440\u0430\u0442\u043d\u0430\u044f \u0441\u0432\u044f\u0437\u044c \u0441 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u0435\u043c: \u041f\u0440\u0435\u0434\u043e\u0441\u0442\u0430\u0432\u043b\u044f\u0439\u0442\u0435 \u0447\u0435\u0442\u043a\u0443\u044e \u043e\u0431\u0440\u0430\u0442\u043d\u0443\u044e \u0441\u0432\u044f\u0437\u044c \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f\u043c, \u043a\u043e\u0433\u0434\u0430 \u043a\u043e\u043c\u0430\u043d\u0434\u0430 \u0431\u043b\u043e\u043a\u0438\u0440\u0443\u0435\u0442\u0441\u044f guard.</li> </ul>"},{"location":"ru/Guards/#_6","title":"\u0417\u0430\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u0435","text":"<p>Activity Guards - \u044d\u0442\u043e \u043c\u043e\u0449\u043d\u044b\u0439 \u0438\u043d\u0441\u0442\u0440\u0443\u043c\u0435\u043d\u0442 \u0434\u043b\u044f \u0443\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u0438\u044f \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u0435\u043c \u043a\u043e\u043c\u0430\u043d\u0434/\u0432\u0445\u043e\u0434\u043d\u044b\u0445 \u0434\u0430\u043d\u043d\u044b\u0445 \u0431\u043e\u0442\u0430.</p> <p>\u0420\u0435\u0430\u043b\u0438\u0437\u0443\u044f \u043d\u0430\u0434\u0435\u0436\u043d\u044b\u0435 \u043c\u0435\u0445\u0430\u043d\u0438\u0437\u043c\u044b guard, \u0440\u0430\u0437\u0440\u0430\u0431\u043e\u0442\u0447\u0438\u043a\u0438 \u043c\u043e\u0433\u0443\u0442 \u043e\u0431\u0435\u0441\u043f\u0435\u0447\u0438\u0442\u044c \u0431\u0435\u0437\u043e\u043f\u0430\u0441\u043d\u0443\u044e \u0438 \u044d\u0444\u0444\u0435\u043a\u0442\u0438\u0432\u043d\u0443\u044e \u0440\u0430\u0431\u043e\u0442\u0443 \u0441\u0432\u043e\u0438\u0445 \u0431\u043e\u0442\u043e\u0432, \u043f\u0440\u0435\u0434\u043e\u0441\u0442\u0430\u0432\u043b\u044f\u044f \u043b\u0443\u0447\u0448\u0438\u0439 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c\u0441\u043a\u0438\u0439 \u043e\u043f\u044b\u0442.</p>"},{"location":"ru/Guards/#_7","title":"\u0421\u043c. \u0442\u0430\u043a\u0436\u0435","text":"<ul> <li>Activities and Proccessors</li> <li>Update parsing</li> <li>Actions</li> <li>Activity invocation</li> </ul>"},{"location":"ru/Handlers/","title":"\u041e\u0431\u0440\u0430\u0431\u043e\u0442\u0447\u0438\u043a\u0438","text":""},{"location":"ru/Handlers/#_1","title":"\u0420\u0430\u0437\u043d\u043e\u043e\u0431\u0440\u0430\u0437\u0438\u0435 \u043e\u0431\u0440\u0430\u0431\u043e\u0442\u0447\u0438\u043a\u043e\u0432","text":"<p>\u0412 \u0440\u0430\u0437\u0440\u0430\u0431\u043e\u0442\u043a\u0435 \u0431\u043e\u0442\u043e\u0432, \u043e\u0441\u043e\u0431\u0435\u043d\u043d\u043e \u0432 \u0441\u0438\u0441\u0442\u0435\u043c\u0430\u0445, \u0432\u043a\u043b\u044e\u0447\u0430\u044e\u0449\u0438\u0445 \u0432\u0437\u0430\u0438\u043c\u043e\u0434\u0435\u0439\u0441\u0442\u0432\u0438\u0435 \u0441 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f\u043c\u0438, \u043a\u0440\u0430\u0439\u043d\u0435 \u0432\u0430\u0436\u043d\u043e \u044d\u0444\u0444\u0435\u043a\u0442\u0438\u0432\u043d\u043e \u0443\u043f\u0440\u0430\u0432\u043b\u044f\u0442\u044c \u0438 \u043e\u0431\u0440\u0430\u0431\u0430\u0442\u044b\u0432\u0430\u0442\u044c \u043a\u043e\u043c\u0430\u043d\u0434\u044b \u0438 \u0441\u043e\u0431\u044b\u0442\u0438\u044f.</p> <p>\u042d\u0442\u0438 \u0430\u043d\u043d\u043e\u0442\u0430\u0446\u0438\u0438 \u043f\u043e\u043c\u0435\u0447\u0430\u044e\u0442 \u0444\u0443\u043d\u043a\u0446\u0438\u0438, \u043f\u0440\u0435\u0434\u043d\u0430\u0437\u043d\u0430\u0447\u0435\u043d\u043d\u044b\u0435 \u0434\u043b\u044f \u043e\u0431\u0440\u0430\u0431\u043e\u0442\u043a\u0438 \u043a\u043e\u043d\u043a\u0440\u0435\u0442\u043d\u044b\u0445 \u043a\u043e\u043c\u0430\u043d\u0434, \u0432\u0445\u043e\u0434\u043d\u044b\u0445 \u0434\u0430\u043d\u043d\u044b\u0445 \u0438\u043b\u0438 \u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0439, \u0438 \u043f\u0440\u0435\u0434\u043e\u0441\u0442\u0430\u0432\u043b\u044f\u044e\u0442 \u043c\u0435\u0442\u0430\u0434\u0430\u043d\u043d\u044b\u0435, \u0442\u0430\u043a\u0438\u0435 \u043a\u0430\u043a \u043a\u043b\u044e\u0447\u0435\u0432\u044b\u0435 \u0441\u043b\u043e\u0432\u0430 \u043a\u043e\u043c\u0430\u043d\u0434, \u043e\u0431\u043b\u0430\u0441\u0442\u0438 \u0432\u0438\u0434\u0438\u043c\u043e\u0441\u0442\u0438 \u0438 \u0441\u0442\u0440\u0430\u0436\u0438.</p>"},{"location":"ru/Handlers/#_2","title":"\u041e\u0431\u0437\u043e\u0440 \u0430\u043d\u043d\u043e\u0442\u0430\u0446\u0438\u0439","text":""},{"location":"ru/Handlers/#commandhandler","title":"CommandHandler","text":"<p>\u0410\u043d\u043d\u043e\u0442\u0430\u0446\u0438\u044f <code>CommandHandler</code> \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u0442\u0441\u044f \u0434\u043b\u044f \u043f\u043e\u043c\u0435\u0442\u043a\u0438 \u0444\u0443\u043d\u043a\u0446\u0438\u0439, \u043a\u043e\u0442\u043e\u0440\u044b\u0435 \u043e\u0431\u0440\u0430\u0431\u0430\u0442\u044b\u0432\u0430\u044e\u0442 \u043a\u043e\u043d\u043a\u0440\u0435\u0442\u043d\u044b\u0435 \u043a\u043e\u043c\u0430\u043d\u0434\u044b. \u042d\u0442\u0430 \u0430\u043d\u043d\u043e\u0442\u0430\u0446\u0438\u044f \u0432\u043a\u043b\u044e\u0447\u0430\u0435\u0442 \u0441\u0432\u043e\u0439\u0441\u0442\u0432\u0430, \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u044f\u044e\u0449\u0438\u0435 \u043a\u043b\u044e\u0447\u0435\u0432\u044b\u0435 \u0441\u043b\u043e\u0432\u0430 \u0438 \u043e\u0431\u043b\u0430\u0441\u0442\u0438 \u0432\u0438\u0434\u0438\u043c\u043e\u0441\u0442\u0438 \u043a\u043e\u043c\u0430\u043d\u0434\u044b.</p> <ul> <li>value: \u0423\u043a\u0430\u0437\u044b\u0432\u0430\u0435\u0442 \u043a\u043b\u044e\u0447\u0435\u0432\u044b\u0435 \u0441\u043b\u043e\u0432\u0430, \u0441\u0432\u044f\u0437\u0430\u043d\u043d\u044b\u0435 \u0441 \u043a\u043e\u043c\u0430\u043d\u0434\u043e\u0439.</li> <li>scope: \u041e\u043f\u0440\u0435\u0434\u0435\u043b\u044f\u0435\u0442 \u043a\u043e\u043d\u0442\u0435\u043a\u0441\u0442 \u0438\u043b\u0438 \u043e\u0431\u043b\u0430\u0441\u0442\u044c \u0432\u0438\u0434\u0438\u043c\u043e\u0441\u0442\u0438, \u0432 \u043a\u043e\u0442\u043e\u0440\u043e\u0439 \u0431\u0443\u0434\u0435\u0442 \u043f\u0440\u043e\u0432\u0435\u0440\u044f\u0442\u044c\u0441\u044f \u043a\u043e\u043c\u0430\u043d\u0434\u0430.</li> </ul> <pre><code>@CommandHandler([\"text\"])\nsuspend fun test(user: User, bot: TelegramBot) {\n    //...\n}\n</code></pre>"},{"location":"ru/Handlers/#commandhandlercallbackquery","title":"CommandHandler.CallbackQuery","text":"<p>\u0421\u043f\u0435\u0446\u0438\u0430\u043b\u0438\u0437\u0438\u0440\u043e\u0432\u0430\u043d\u043d\u0430\u044f \u0432\u0435\u0440\u0441\u0438\u044f \u0430\u043d\u043d\u043e\u0442\u0430\u0446\u0438\u0438 <code>CommandHandler</code>, \u043f\u0440\u0435\u0434\u043d\u0430\u0437\u043d\u0430\u0447\u0435\u043d\u043d\u0430\u044f \u0441\u043f\u0435\u0446\u0438\u0430\u043b\u044c\u043d\u043e \u0434\u043b\u044f \u043e\u0431\u0440\u0430\u0431\u043e\u0442\u043a\u0438 callback-\u0437\u0430\u043f\u0440\u043e\u0441\u043e\u0432. \u041e\u043d\u0430 \u0432\u043a\u043b\u044e\u0447\u0430\u0435\u0442 \u0430\u043d\u0430\u043b\u043e\u0433\u0438\u0447\u043d\u044b\u0435 \u0441\u0432\u043e\u0439\u0441\u0442\u0432\u0430, \u043a\u0430\u043a <code>CommandHandler</code>, \u0441 \u0444\u043e\u043a\u0443\u0441\u043e\u043c \u043d\u0430 \u043a\u043e\u043c\u0430\u043d\u0434\u044b, \u0441\u0432\u044f\u0437\u0430\u043d\u043d\u044b\u0435 \u0441 callback-\u0437\u0430\u043f\u0440\u043e\u0441\u0430\u043c\u0438.</p> <p>\u042d\u0442\u043e \u0444\u0430\u043a\u0442\u0438\u0447\u0435\u0441\u043a\u0438 \u0442\u043e \u0436\u0435 \u0441\u0430\u043c\u043e\u0435, \u0447\u0442\u043e \u0438 \u043f\u0440\u043e\u0441\u0442\u043e <code>@CommandHandler</code> \u0441 \u043f\u0440\u0435\u0434\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d\u043d\u043e\u0439 \u043e\u0431\u043b\u0430\u0441\u0442\u044c\u044e \u0432\u0438\u0434\u0438\u043c\u043e\u0441\u0442\u0438 <code>UpdateType.CALLBACK_QUERY</code>.</p> <ul> <li>value: \u0423\u043a\u0430\u0437\u044b\u0432\u0430\u0435\u0442 \u043a\u043b\u044e\u0447\u0435\u0432\u044b\u0435 \u0441\u043b\u043e\u0432\u0430, \u0441\u0432\u044f\u0437\u0430\u043d\u043d\u044b\u0435 \u0441 \u043a\u043e\u043c\u0430\u043d\u0434\u043e\u0439.</li> <li>autoAnswer: \u0410\u0432\u0442\u043e\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u0438 \u043e\u0442\u0432\u0435\u0447\u0430\u0442\u044c \u043d\u0430 <code>callbackQuery</code> (\u0432\u044b\u0437\u044b\u0432\u0430\u0442\u044c <code>answerCallbackQuery</code> \u043f\u0435\u0440\u0435\u0434 \u043e\u0431\u0440\u0430\u0431\u043e\u0442\u043a\u043e\u0439).</li> </ul> <pre><code>@CommandHandler.CallbackQuery([\"text\"])\nsuspend fun test(user: User, bot: TelegramBot) {\n    //...\n}\n</code></pre>"},{"location":"ru/Handlers/#commonhandler","title":"CommonHandler","text":"<p>\u0410\u043d\u043d\u043e\u0442\u0430\u0446\u0438\u044f <code>CommonHandler</code> \u043f\u0440\u0435\u0434\u043d\u0430\u0437\u043d\u0430\u0447\u0435\u043d\u0430 \u0434\u043b\u044f \u0444\u0443\u043d\u043a\u0446\u0438\u0439, \u043a\u043e\u0442\u043e\u0440\u044b\u0435 \u043e\u0431\u0440\u0430\u0431\u0430\u0442\u044b\u0432\u0430\u044e\u0442 \u043a\u043e\u043c\u0430\u043d\u0434\u044b \u0441 \u0431\u043e\u043b\u0435\u0435 \u043d\u0438\u0437\u043a\u0438\u043c \u043f\u0440\u0438\u043e\u0440\u0438\u0442\u0435\u0442\u043e\u043c \u043f\u043e \u0441\u0440\u0430\u0432\u043d\u0435\u043d\u0438\u044e \u0441 <code>CommandHandler</code> \u0438 <code>InputHandler</code>. \u041e\u043d\u0430 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u0442\u0441\u044f \u043d\u0430 \u0443\u0440\u043e\u0432\u043d\u0435 \u0438\u0441\u0442\u043e\u0447\u043d\u0438\u043a\u0430 \u0438 \u043f\u0440\u0435\u0434\u043e\u0441\u0442\u0430\u0432\u043b\u044f\u0435\u0442 \u0433\u0438\u0431\u043a\u0438\u0439 \u0441\u043f\u043e\u0441\u043e\u0431 \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u0435\u043d\u0438\u044f \u043e\u0431\u0449\u0438\u0445 \u043e\u0431\u0440\u0430\u0431\u043e\u0442\u0447\u0438\u043a\u043e\u0432 \u043a\u043e\u043c\u0430\u043d\u0434.</p> <p>\u041e\u0431\u0440\u0430\u0442\u0438\u0442\u0435 \u0432\u043d\u0438\u043c\u0430\u043d\u0438\u0435, \u0447\u0442\u043e \u043f\u0440\u0438\u043e\u0440\u0438\u0442\u0435\u0442 \u0440\u0430\u0431\u043e\u0442\u0430\u0435\u0442 \u0442\u043e\u043b\u044c\u043a\u043e \u0432\u043d\u0443\u0442\u0440\u0438 <code>@CommonHandler</code> (\u0442.\u0435. \u043d\u0435 \u0432\u043b\u0438\u044f\u0435\u0442 \u043d\u0430 \u0434\u0440\u0443\u0433\u0438\u0435 \u043e\u0431\u0440\u0430\u0431\u043e\u0442\u0447\u0438\u043a\u0438).</p>"},{"location":"ru/Handlers/#commonhandlertext","title":"CommonHandler.Text","text":"<p>\u042d\u0442\u0430 \u0430\u043d\u043d\u043e\u0442\u0430\u0446\u0438\u044f \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u044f\u0435\u0442 \u0441\u043e\u043f\u043e\u0441\u0442\u0430\u0432\u043b\u0435\u043d\u0438\u0435 \u0442\u0435\u043a\u0441\u0442\u0430 \u0441 \u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u044f\u043c\u0438. \u041e\u043d\u0430 \u0432\u043a\u043b\u044e\u0447\u0430\u0435\u0442 \u0441\u0432\u043e\u0439\u0441\u0442\u0432\u0430 \u0434\u043b\u044f \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u0435\u043d\u0438\u044f \u0441\u043e\u043f\u043e\u0441\u0442\u0430\u0432\u043b\u044f\u0435\u043c\u043e\u0433\u043e \u0442\u0435\u043a\u0441\u0442\u0430, \u0443\u0441\u043b\u043e\u0432\u0438\u0439 \u0444\u0438\u043b\u044c\u0442\u0440\u0430\u0446\u0438\u0438, \u043f\u0440\u0438\u043e\u0440\u0438\u0442\u0435\u0442\u0430 \u0438 \u043e\u0431\u043b\u0430\u0441\u0442\u0438 \u0432\u0438\u0434\u0438\u043c\u043e\u0441\u0442\u0438.</p> <ul> <li>value: \u0422\u0435\u043a\u0441\u0442 \u0434\u043b\u044f \u0441\u043e\u043f\u043e\u0441\u0442\u0430\u0432\u043b\u0435\u043d\u0438\u044f \u0441 \u0432\u0445\u043e\u0434\u044f\u0449\u0438\u043c\u0438 \u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u044f\u043c\u0438.</li> <li>filter: \u041a\u043b\u0430\u0441\u0441, \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u044f\u044e\u0449\u0438\u0439 \u0443\u0441\u043b\u043e\u0432\u0438\u044f, \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u043c\u044b\u0435 \u0432 \u043f\u0440\u043e\u0446\u0435\u0441\u0441\u0435 \u0441\u043e\u043f\u043e\u0441\u0442\u0430\u0432\u043b\u0435\u043d\u0438\u044f.</li> <li>priority: \u0423\u0440\u043e\u0432\u0435\u043d\u044c \u043f\u0440\u0438\u043e\u0440\u0438\u0442\u0435\u0442\u0430 \u043e\u0431\u0440\u0430\u0431\u043e\u0442\u0447\u0438\u043a\u0430, \u0433\u0434\u0435 0 - \u043d\u0430\u0438\u0432\u044b\u0441\u0448\u0438\u0439 \u043f\u0440\u0438\u043e\u0440\u0438\u0442\u0435\u0442.</li> <li>scope: \u041a\u043e\u043d\u0442\u0435\u043a\u0441\u0442 \u0438\u043b\u0438 \u043e\u0431\u043b\u0430\u0441\u0442\u044c \u0432\u0438\u0434\u0438\u043c\u043e\u0441\u0442\u0438, \u0432 \u043a\u043e\u0442\u043e\u0440\u043e\u0439 \u0431\u0443\u0434\u0435\u0442 \u043f\u0440\u043e\u0432\u0435\u0440\u044f\u0442\u044c\u0441\u044f \u0441\u043e\u043f\u043e\u0441\u0442\u0430\u0432\u043b\u0435\u043d\u0438\u0435 \u0442\u0435\u043a\u0441\u0442\u0430.</li> </ul> <pre><code>@CommonHandler.Text([\"text\"], filter = isNewUserFilter::class, priority = 10)\nsuspend fun test(user: User, bot: TelegramBot) {\n    //...\n}\n</code></pre>"},{"location":"ru/Handlers/#commonhandlerregex","title":"CommonHandler.Regex","text":"<p>\u041f\u043e\u0434\u043e\u0431\u043d\u043e <code>CommonHandler.Text</code>, \u044d\u0442\u0430 \u0430\u043d\u043d\u043e\u0442\u0430\u0446\u0438\u044f \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u0442\u0441\u044f \u0434\u043b\u044f \u0441\u043e\u043f\u043e\u0441\u0442\u0430\u0432\u043b\u0435\u043d\u0438\u044f \u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0439 \u043d\u0430 \u043e\u0441\u043d\u043e\u0432\u0435 \u0440\u0435\u0433\u0443\u043b\u044f\u0440\u043d\u044b\u0445 \u0432\u044b\u0440\u0430\u0436\u0435\u043d\u0438\u0439. \u041e\u043d\u0430 \u0432\u043a\u043b\u044e\u0447\u0430\u0435\u0442 \u0441\u0432\u043e\u0439\u0441\u0442\u0432\u0430 \u0434\u043b\u044f \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u0435\u043d\u0438\u044f \u0448\u0430\u0431\u043b\u043e\u043d\u0430 \u0440\u0435\u0433\u0443\u043b\u044f\u0440\u043d\u043e\u0433\u043e \u0432\u044b\u0440\u0430\u0436\u0435\u043d\u0438\u044f, \u043e\u043f\u0446\u0438\u0439, \u0443\u0441\u043b\u043e\u0432\u0438\u0439 \u0444\u0438\u043b\u044c\u0442\u0440\u0430\u0446\u0438\u0438, \u043f\u0440\u0438\u043e\u0440\u0438\u0442\u0435\u0442\u0430 \u0438 \u043e\u0431\u043b\u0430\u0441\u0442\u0438 \u0432\u0438\u0434\u0438\u043c\u043e\u0441\u0442\u0438.</p> <ul> <li>value: \u0428\u0430\u0431\u043b\u043e\u043d \u0440\u0435\u0433\u0443\u043b\u044f\u0440\u043d\u043e\u0433\u043e \u0432\u044b\u0440\u0430\u0436\u0435\u043d\u0438\u044f, \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u043c\u044b\u0439 \u0434\u043b\u044f \u0441\u043e\u043f\u043e\u0441\u0442\u0430\u0432\u043b\u0435\u043d\u0438\u044f.</li> <li>options: \u041e\u043f\u0446\u0438\u0438 \u0440\u0435\u0433\u0443\u043b\u044f\u0440\u043d\u043e\u0433\u043e \u0432\u044b\u0440\u0430\u0436\u0435\u043d\u0438\u044f, \u0438\u0437\u043c\u0435\u043d\u044f\u044e\u0449\u0438\u0435 \u043f\u043e\u0432\u0435\u0434\u0435\u043d\u0438\u0435 \u0448\u0430\u0431\u043b\u043e\u043d\u0430.</li> <li>filter: \u041a\u043b\u0430\u0441\u0441, \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u044f\u044e\u0449\u0438\u0439 \u0443\u0441\u043b\u043e\u0432\u0438\u044f, \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u043c\u044b\u0435 \u0432 \u043f\u0440\u043e\u0446\u0435\u0441\u0441\u0435 \u0441\u043e\u043f\u043e\u0441\u0442\u0430\u0432\u043b\u0435\u043d\u0438\u044f.</li> <li>priority: \u0423\u0440\u043e\u0432\u0435\u043d\u044c \u043f\u0440\u0438\u043e\u0440\u0438\u0442\u0435\u0442\u0430 \u043e\u0431\u0440\u0430\u0431\u043e\u0442\u0447\u0438\u043a\u0430, \u0433\u0434\u0435 0 - \u043d\u0430\u0438\u0432\u044b\u0441\u0448\u0438\u0439 \u043f\u0440\u0438\u043e\u0440\u0438\u0442\u0435\u0442.</li> <li>scope: \u041a\u043e\u043d\u0442\u0435\u043a\u0441\u0442 \u0438\u043b\u0438 \u043e\u0431\u043b\u0430\u0441\u0442\u044c \u0432\u0438\u0434\u0438\u043c\u043e\u0441\u0442\u0438, \u0432 \u043a\u043e\u0442\u043e\u0440\u043e\u0439 \u0431\u0443\u0434\u0435\u0442 \u043f\u0440\u043e\u0432\u0435\u0440\u044f\u0442\u044c\u0441\u044f \u0441\u043e\u043f\u043e\u0441\u0442\u0430\u0432\u043b\u0435\u043d\u0438\u0435 \u0440\u0435\u0433\u0443\u043b\u044f\u0440\u043d\u043e\u0433\u043e \u0432\u044b\u0440\u0430\u0436\u0435\u043d\u0438\u044f.</li> </ul> <pre><code>@CommonHandler.Regex(\"^\\d+$\", scope = [UpdateType.EDITED_MESSAGE])\nsuspend fun test(update: EditedMessageUpdate, user: User, bot: TelegramBot) {\n    //...\n}\n</code></pre>"},{"location":"ru/Handlers/#inputhandler","title":"InputHandler","text":"<p>\u0410\u043d\u043d\u043e\u0442\u0430\u0446\u0438\u044f <code>InputHandler</code> \u043f\u043e\u043c\u0435\u0447\u0430\u0435\u0442 \u0444\u0443\u043d\u043a\u0446\u0438\u0438, \u043a\u043e\u0442\u043e\u0440\u044b\u0435 \u043e\u0431\u0440\u0430\u0431\u0430\u0442\u044b\u0432\u0430\u044e\u0442 \u043a\u043e\u043d\u043a\u0440\u0435\u0442\u043d\u044b\u0435 \u0441\u043e\u0431\u044b\u0442\u0438\u044f \u0432\u0432\u043e\u0434\u0430. \u041e\u043d\u0430 \u043f\u0440\u0435\u0434\u043d\u0430\u0437\u043d\u0430\u0447\u0435\u043d\u0430 \u0434\u043b\u044f \u0444\u0443\u043d\u043a\u0446\u0438\u0439, \u043a\u043e\u0442\u043e\u0440\u044b\u0435 \u043e\u0431\u0440\u0430\u0431\u0430\u0442\u044b\u0432\u0430\u044e\u0442 \u0432\u0445\u043e\u0434\u043d\u044b\u0435 \u0434\u0430\u043d\u043d\u044b\u0435 \u0432\u043e \u0432\u0440\u0435\u043c\u044f \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f, \u0438 \u0432\u043a\u043b\u044e\u0447\u0430\u0435\u0442 \u0441\u0432\u043e\u0439\u0441\u0442\u0432\u0430 \u0434\u043b\u044f \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u0435\u043d\u0438\u044f \u043a\u043b\u044e\u0447\u0435\u0432\u044b\u0445 \u0441\u043b\u043e\u0432 \u0432\u0432\u043e\u0434\u0430 \u0438 \u043e\u0431\u043b\u0430\u0441\u0442\u0435\u0439 \u0432\u0438\u0434\u0438\u043c\u043e\u0441\u0442\u0438.</p> <ul> <li>value: \u0423\u043a\u0430\u0437\u044b\u0432\u0430\u0435\u0442 \u043a\u043b\u044e\u0447\u0435\u0432\u044b\u0435 \u0441\u043b\u043e\u0432\u0430, \u0441\u0432\u044f\u0437\u0430\u043d\u043d\u044b\u0435 \u0441 \u0441\u043e\u0431\u044b\u0442\u0438\u0435\u043c \u0432\u0432\u043e\u0434\u0430.</li> </ul> <pre><code>@InputHandler(\"text\")\nsuspend fun test(update: ProcessedUpdate, user: User, bot: TelegramBot) {\n    //...\n}\n</code></pre>"},{"location":"ru/Handlers/#unprocessedhandler","title":"UnprocessedHandler","text":"<p>\u0410\u043d\u043d\u043e\u0442\u0430\u0446\u0438\u044f <code>UnprocessedHandler</code> \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u0442\u0441\u044f \u0434\u043b\u044f \u043f\u043e\u043c\u0435\u0442\u043a\u0438 \u0444\u0443\u043d\u043a\u0446\u0438\u0439, \u043a\u043e\u0442\u043e\u0440\u044b\u0435 \u043e\u0431\u0440\u0430\u0431\u0430\u0442\u044b\u0432\u0430\u044e\u0442 \u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u044f, \u043d\u0435 \u043e\u0431\u0440\u0430\u0431\u043e\u0442\u0430\u043d\u043d\u044b\u0435 \u0434\u0440\u0443\u0433\u0438\u043c\u0438 \u043e\u0431\u0440\u0430\u0431\u043e\u0442\u0447\u0438\u043a\u0430\u043c\u0438. \u041e\u043d\u0430 \u043e\u0431\u0435\u0441\u043f\u0435\u0447\u0438\u0432\u0430\u0435\u0442, \u0447\u0442\u043e\u0431\u044b \u043b\u044e\u0431\u044b\u0435 \u043d\u0435\u043e\u0431\u0440\u0430\u0431\u043e\u0442\u0430\u043d\u043d\u044b\u0435 \u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u044f \u0443\u043f\u0440\u0430\u0432\u043b\u044f\u043b\u0438\u0441\u044c \u0441\u043e\u043e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0443\u044e\u0449\u0438\u043c \u043e\u0431\u0440\u0430\u0437\u043e\u043c, \u0441 \u0432\u043e\u0437\u043c\u043e\u0436\u043d\u043e\u0441\u0442\u044c\u044e \u0442\u043e\u043b\u044c\u043a\u043e \u043e\u0434\u043d\u043e\u0439 \u0442\u043e\u0447\u043a\u0438 \u043e\u0431\u0440\u0430\u0431\u043e\u0442\u043a\u0438 \u0434\u043b\u044f \u044d\u0442\u043e\u0433\u043e \u0442\u0438\u043f\u0430 \u043e\u0431\u0440\u0430\u0431\u043e\u0442\u0447\u0438\u043a\u0430.</p> <pre><code>@UnprocessedHandler\nsuspend fun test(update: ProcessedUpdate, user: User, bot: TelegramBot) {\n    //...\n}\n</code></pre>"},{"location":"ru/Handlers/#updatehandler","title":"UpdateHandler","text":"<p>\u0410\u043d\u043d\u043e\u0442\u0430\u0446\u0438\u044f <code>UpdateHandler</code> \u043f\u043e\u043c\u0435\u0447\u0430\u0435\u0442 \u0444\u0443\u043d\u043a\u0446\u0438\u0438, \u043a\u043e\u0442\u043e\u0440\u044b\u0435 \u043e\u0431\u0440\u0430\u0431\u0430\u0442\u044b\u0432\u0430\u044e\u0442 \u043a\u043e\u043d\u043a\u0440\u0435\u0442\u043d\u044b\u0435 \u0442\u0438\u043f\u044b \u0432\u0445\u043e\u0434\u044f\u0449\u0438\u0445 \u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0439. \u041e\u043d\u0430 \u043f\u0440\u0435\u0434\u043e\u0441\u0442\u0430\u0432\u043b\u044f\u0435\u0442 \u0441\u043f\u043e\u0441\u043e\u0431 \u0441\u0438\u0441\u0442\u0435\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u043e\u0439 \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u0437\u0430\u0446\u0438\u0438 \u0438 \u043e\u0431\u0440\u0430\u0431\u043e\u0442\u043a\u0438 \u0440\u0430\u0437\u043b\u0438\u0447\u043d\u044b\u0445 \u0442\u0438\u043f\u043e\u0432 \u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0439.</p> <ul> <li>type: \u0423\u043a\u0430\u0437\u044b\u0432\u0430\u0435\u0442 \u0442\u0438\u043f\u044b \u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0439, \u043a\u043e\u0442\u043e\u0440\u044b\u0435 \u0431\u0443\u0434\u0435\u0442 \u043e\u0431\u0440\u0430\u0431\u0430\u0442\u044b\u0432\u0430\u0442\u044c \u0444\u0443\u043d\u043a\u0446\u0438\u044f \u043e\u0431\u0440\u0430\u0431\u043e\u0442\u0447\u0438\u043a\u0430.</li> </ul> <pre><code>@UpdateHandler([UpdateType.PRE_CHECKOUT_QUERY])\nsuspend fun test(update: PreCheckoutQueryUpdate, user: User, bot: TelegramBot) {\n    //...\n}\n</code></pre>"},{"location":"ru/Handlers/#_3","title":"\u0421\u043e\u043f\u0443\u0442\u0441\u0442\u0432\u0443\u044e\u0449\u0438\u0435 \u0430\u043d\u043d\u043e\u0442\u0430\u0446\u0438\u0438 \u043e\u0431\u0440\u0430\u0431\u043e\u0442\u0447\u0438\u043a\u043e\u0432","text":"<p>\u0421\u0443\u0449\u0435\u0441\u0442\u0432\u0443\u044e\u0442 \u0442\u0430\u043a\u0436\u0435 \u0434\u043e\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044c\u043d\u044b\u0435 \u0430\u043d\u043d\u043e\u0442\u0430\u0446\u0438\u0438, \u043a\u043e\u0442\u043e\u0440\u044b\u0435 \u044f\u0432\u043b\u044f\u044e\u0442\u0441\u044f \u043d\u0435\u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u044b\u043c\u0438 \u0434\u043b\u044f \u043e\u0431\u0440\u0430\u0431\u043e\u0442\u0447\u0438\u043a\u043e\u0432, \u0434\u043e\u043f\u043e\u043b\u043d\u044f\u044f \u043d\u0435\u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0435 \u043f\u043e\u0432\u0435\u0434\u0435\u043d\u0438\u0435 \u0441\u0430\u043c\u0438\u0445 \u043e\u0431\u0440\u0430\u0431\u043e\u0442\u0447\u0438\u043a\u043e\u0432.</p> <p>\u0418\u0445 \u043c\u043e\u0436\u043d\u043e \u0440\u0430\u0437\u043c\u0435\u0449\u0430\u0442\u044c \u043a\u0430\u043a \u043d\u0430 \u0444\u0443\u043d\u043a\u0446\u0438\u044f\u0445, \u043a \u043a\u043e\u0442\u043e\u0440\u044b\u043c \u043f\u0440\u0438\u043c\u0435\u043d\u044f\u0435\u0442\u0441\u044f \u043e\u0431\u0440\u0430\u0431\u043e\u0442\u0447\u0438\u043a, \u0442\u0430\u043a \u0438 \u043d\u0430 \u043a\u043b\u0430\u0441\u0441\u0430\u0445, \u0432 \u043f\u043e\u0441\u043b\u0435\u0434\u043d\u0435\u043c \u0441\u043b\u0443\u0447\u0430\u0435 \u043e\u043d\u0438 \u0431\u0443\u0434\u0443\u0442 \u0430\u0432\u0442\u043e\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u0438 \u043f\u0440\u0438\u043c\u0435\u043d\u0435\u043d\u044b \u043a\u043e \u0432\u0441\u0435\u043c \u043e\u0431\u0440\u0430\u0431\u043e\u0442\u0447\u0438\u043a\u0430\u043c \u0432 \u044d\u0442\u043e\u043c \u043a\u043b\u0430\u0441\u0441\u0435, \u043d\u043e \u0435\u0441\u043b\u0438 \u0435\u0441\u0442\u044c \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e\u0441\u0442\u044c, \u043c\u043e\u0436\u043d\u043e \u0438\u043c\u0435\u0442\u044c \u043e\u0442\u0434\u0435\u043b\u044c\u043d\u043e\u0435 \u043f\u043e\u0432\u0435\u0434\u0435\u043d\u0438\u0435 \u0434\u043b\u044f \u043d\u0435\u043a\u043e\u0442\u043e\u0440\u044b\u0445 \u0444\u0443\u043d\u043a\u0446\u0438\u0439.</p> <p>\u0422.\u0435. \u043f\u0440\u0438\u043c\u0435\u043d\u0435\u043d\u0438\u0435 \u0438\u043c\u0435\u0435\u0442 \u0442\u0430\u043a\u043e\u0439 \u043f\u0440\u0438\u043e\u0440\u0438\u0442\u0435\u0442: <code>Function</code> &gt; <code>Class</code>, \u0433\u0434\u0435 \u0444\u0443\u043d\u043a\u0446\u0438\u044f \u0438\u043c\u0435\u0435\u0442 \u0431\u043e\u043b\u0435\u0435 \u0432\u044b\u0441\u043e\u043a\u0438\u0439 \u043f\u0440\u0438\u043e\u0440\u0438\u0442\u0435\u0442.</p>"},{"location":"ru/Handlers/#_4","title":"\u041e\u0433\u0440\u0430\u043d\u0438\u0447\u0435\u043d\u0438\u0435 \u0447\u0430\u0441\u0442\u043e\u0442\u044b","text":"<p>\u041a\u0440\u043e\u043c\u0435 \u0442\u043e\u0433\u043e, \u0434\u0430\u0432\u0430\u0439\u0442\u0435 \u0442\u0430\u043a\u0436\u0435 \u0440\u0430\u0441\u043a\u0440\u043e\u0435\u043c \u043c\u0435\u0445\u0430\u043d\u0438\u0437\u043c \u043e\u0433\u0440\u0430\u043d\u0438\u0447\u0435\u043d\u0438\u044f \u0447\u0430\u0441\u0442\u043e\u0442\u044b, \u043e\u043f\u0438\u0441\u0430\u043d\u043d\u044b\u0439 \u0432 \u0430\u043d\u043d\u043e\u0442\u0430\u0446\u0438\u044f\u0445.</p> <p>\u0412\u044b \u043c\u043e\u0436\u0435\u0442\u0435 \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c \u043e\u0431\u0449\u0438\u0435 \u043b\u0438\u043c\u0438\u0442\u044b \u0434\u043b\u044f \u043a\u0430\u0436\u0434\u043e\u0433\u043e \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f:</p> <pre><code>// ...\nval bot = TelegramBot(\"BOT_TOKEN\") {\n    rateLimiter { // \u043e\u0431\u0449\u0438\u0435 \u043b\u0438\u043c\u0438\u0442\u044b\n        limits = RateLimits(period = 10000, rate = 5)\n    }\n}\n</code></pre>"},{"location":"ru/Handlers/#_5","title":"\u0421\u043f\u0435\u0446\u0438\u0444\u0438\u0447\u043d\u044b\u0435 \u0434\u043b\u044f \u043e\u0431\u0440\u0430\u0431\u043e\u0442\u0447\u0438\u043a\u0430","text":"<p>\u041b\u0438\u043c\u0438\u0442\u044b \u043d\u0430 \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u0435\u043d\u043d\u044b\u0435 \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u044f \u043c\u043e\u0433\u0443\u0442 \u0431\u044b\u0442\u044c \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u0435\u043d\u044b \u0441 \u043f\u043e\u043c\u043e\u0449\u044c\u044e \u0430\u043d\u043d\u043e\u0442\u0430\u0446\u0438\u0438 <code>RateLimits</code>, \u043f\u043e\u0434\u0434\u0435\u0440\u0436\u0438\u0432\u0430\u0435\u043c\u043e\u0439 <code>@CommandHandler</code>, <code>@CommandHandler.CallbackQuery</code>, <code>@InputHandler</code>, <code>@CommonHandler</code>.</p> <pre><code>@CommandHandler([\"/start\"])\n@RateLimits(period = 1000L, rate = 1L)\nsuspend fun start(user: User, bot: TelegramBot) {\n    // ...\n}\n</code></pre>"},{"location":"ru/Handlers/#_6","title":"\u0421\u0442\u0440\u0430\u0436\u0430","text":"<p>\u0412\u044b \u043c\u043e\u0436\u0435\u0442\u0435 \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u044f\u0442\u044c \u0441\u0442\u0440\u0430\u0436\u0438 \u043e\u0442\u0434\u0435\u043b\u044c\u043d\u043e \u0434\u043b\u044f \u043a\u043e\u043d\u0442\u0440\u043e\u043b\u044f \u0434\u043e\u0441\u0442\u0443\u043f\u0430 \u043a \u043e\u0431\u0440\u0430\u0431\u043e\u0442\u0447\u0438\u043a\u0430\u043c, \u043f\u043e\u0434\u0434\u0435\u0440\u0436\u0438\u0432\u0430\u0435\u0442\u0441\u044f <code>@CommandHandler</code>, <code>@CommandHandler.CallbackQuery</code>, <code>@InputHandler</code> :</p> <pre><code>@CommandHandler([\"text\"])\n@Guard(isAdminGuard::class)\nsuspend fun test(user: User, bot: TelegramBot) {\n    //...\n}\n</code></pre>"},{"location":"ru/Handlers/#argparser","title":"ArgParser","text":"<p>\u0412\u044b \u043c\u043e\u0436\u0435\u0442\u0435 \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u044f\u0442\u044c \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c\u0441\u043a\u0438\u0439 \u043f\u0430\u0440\u0441\u0435\u0440 \u0430\u0440\u0433\u0443\u043c\u0435\u043d\u0442\u043e\u0432 \u043e\u0442\u0434\u0435\u043b\u044c\u043d\u043e \u0434\u043b\u044f \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u044f \u043f\u043e\u0432\u0435\u0434\u0435\u043d\u0438\u044f \u043f\u0430\u0440\u0441\u0438\u043d\u0433\u0430 \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u043e\u0432 \u0434\u043b\u044f \u043e\u0431\u0440\u0430\u0431\u043e\u0442\u0447\u0438\u043a\u043e\u0432, \u043f\u043e\u0434\u0434\u0435\u0440\u0436\u0438\u0432\u0430\u0435\u0442\u0441\u044f <code>@CommandHandler</code>, <code>@CommandHandler.CallbackQuery</code>, <code>@CommonHandler</code>:</p> <pre><code>@CommandHandler([\"text\"])\n@ArgParser(SpaceArgParser::class)\nsuspend fun test(user: User, bot: TelegramBot) {\n    //...\n}\n</code></pre> <p>\u0441\u043c. \u0442\u0430\u043a\u0436\u0435 <code>defaultArgParser</code></p>"},{"location":"ru/Handlers/#_7","title":"\u0417\u0430\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u0435","text":"<p>\u042d\u0442\u0438 \u0430\u043d\u043d\u043e\u0442\u0430\u0446\u0438\u0438 \u043f\u0440\u0435\u0434\u043e\u0441\u0442\u0430\u0432\u043b\u044f\u044e\u0442 \u043d\u0430\u0434\u0435\u0436\u043d\u044b\u0435 \u0438 \u0433\u0438\u0431\u043a\u0438\u0435 \u0438\u043d\u0441\u0442\u0440\u0443\u043c\u0435\u043d\u0442\u044b \u0434\u043b\u044f \u043e\u0431\u0440\u0430\u0431\u043e\u0442\u043a\u0438 \u043a\u043e\u043c\u0430\u043d\u0434, \u0432\u0445\u043e\u0434\u043d\u044b\u0445 \u0434\u0430\u043d\u043d\u044b\u0445 \u0438 \u0441\u043e\u0431\u044b\u0442\u0438\u0439, \u043f\u043e\u0437\u0432\u043e\u043b\u044f\u044f \u043f\u0440\u0438 \u044d\u0442\u043e\u043c \u043e\u0442\u0434\u0435\u043b\u044c\u043d\u0443\u044e \u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u044e \u043b\u0438\u043c\u0438\u0442\u043e\u0432 \u0447\u0430\u0441\u0442\u043e\u0442\u044b \u0438 \u0441\u0442\u0440\u0430\u0436\u0435\u0439, \u0447\u0442\u043e \u043f\u043e\u0432\u044b\u0448\u0430\u0435\u0442 \u043e\u0431\u0449\u0443\u044e \u0441\u0442\u0440\u0443\u043a\u0442\u0443\u0440\u0443 \u0438 \u043f\u043e\u0434\u0434\u0435\u0440\u0436\u0438\u0432\u0430\u0435\u043c\u043e\u0441\u0442\u044c \u0440\u0430\u0437\u0440\u0430\u0431\u043e\u0442\u043a\u0438 \u0431\u043e\u0442\u043e\u0432.</p>"},{"location":"ru/Handlers/#_8","title":"\u0421\u043c. \u0442\u0430\u043a\u0436\u0435","text":"<ul> <li>\u0414\u0435\u0439\u0441\u0442\u0432\u0438\u044f \u0438 \u043f\u0440\u043e\u0446\u0435\u0441\u0441\u043e\u0440\u044b</li> <li>\u0412\u044b\u0437\u043e\u0432 \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u044f</li> <li>FSM \u0438 \u043e\u0431\u0440\u0430\u0431\u043e\u0442\u043a\u0430 \u0434\u0438\u0430\u043b\u043e\u0433\u043e\u0432</li> <li>\u041f\u0430\u0440\u0441\u0438\u043d\u0433 \u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0439</li> <li>\u041f\u043e\u043c\u043e\u0449\u043d\u0438\u043a</li> </ul>"},{"location":"ru/Interceptors-%28middleware%29/","title":"\u041f\u0435\u0440\u0435\u0445\u0432\u0430\u0442\u0447\u0438\u043a\u0438 (Middleware)","text":""},{"location":"ru/Interceptors-%28middleware%29/#_1","title":"\u041f\u0435\u0440\u0435\u0445\u0432\u0430\u0442\u0447\u0438\u043a\u0438: \u0441\u043a\u0432\u043e\u0437\u043d\u0430\u044f \u043b\u043e\u0433\u0438\u043a\u0430 \u0434\u043b\u044f \u0432\u0430\u0448\u0435\u0433\u043e \u0431\u043e\u0442\u0430","text":"<p>\u041f\u0440\u0438 \u0441\u043e\u0437\u0434\u0430\u043d\u0438\u0438 Telegram-\u0431\u043e\u0442\u0430 \u0432\u044b \u0447\u0430\u0441\u0442\u043e \u043f\u043e\u0432\u0442\u043e\u0440\u044f\u0435\u0442\u0435 \u043d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0443, \u043f\u0440\u043e\u0432\u0435\u0440\u043a\u0438 \u0438\u043b\u0438 \u043e\u0447\u0438\u0441\u0442\u043a\u0443 \u0432 \u043e\u0431\u0440\u0430\u0431\u043e\u0442\u0447\u0438\u043a\u0430\u0445. \u041f\u0435\u0440\u0435\u0445\u0432\u0430\u0442\u0447\u0438\u043a\u0438 \u043f\u043e\u0437\u0432\u043e\u043b\u044f\u044e\u0442 \u043f\u043e\u0434\u043a\u043b\u044e\u0447\u0430\u0442\u044c \u043e\u0431\u0449\u0443\u044e \u043b\u043e\u0433\u0438\u043a\u0443 \u0432\u043e\u043a\u0440\u0443\u0433 \u043e\u0431\u0440\u0430\u0431\u043e\u0442\u0447\u0438\u043a\u043e\u0432, \u0441\u043e\u0445\u0440\u0430\u043d\u044f\u044f \u0438\u0445 \u0441\u0444\u043e\u043a\u0443\u0441\u0438\u0440\u043e\u0432\u0430\u043d\u043d\u044b\u043c\u0438 \u0438 \u043f\u043e\u0434\u0434\u0435\u0440\u0436\u0438\u0432\u0430\u0435\u043c\u044b\u043c\u0438.</p> <p>\u0412\u043e\u0442 \u043a\u0430\u043a \u0440\u0430\u0431\u043e\u0442\u0430\u044e\u0442 \u043f\u0435\u0440\u0435\u0445\u0432\u0430\u0442\u0447\u0438\u043a\u0438 \u0432 telegram-bot \u0438 \u043a\u0430\u043a \u0438\u0445 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c.</p>"},{"location":"ru/Interceptors-%28middleware%29/#_2","title":"\u0427\u0442\u043e \u0442\u0430\u043a\u043e\u0435 \u041f\u0435\u0440\u0435\u0445\u0432\u0430\u0442\u0447\u0438\u043a\u0438? (\u041f\u0440\u043e\u0441\u0442\u043e\u0435 \u043e\u0431\u044a\u044f\u0441\u043d\u0435\u043d\u0438\u0435)","text":"<p>\u041f\u0435\u0440\u0435\u0445\u0432\u0430\u0442\u0447\u0438\u043a\u0438 \u2014 \u044d\u0442\u043e \u0444\u0443\u043d\u043a\u0446\u0438\u0438, \u043a\u043e\u0442\u043e\u0440\u044b\u0435 \u0432\u044b\u043f\u043e\u043b\u043d\u044f\u044e\u0442\u0441\u044f \u043d\u0430 \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u0435\u043d\u043d\u044b\u0445 \u044d\u0442\u0430\u043f\u0430\u0445 \u043a\u043e\u043d\u0432\u0435\u0439\u0435\u0440\u0430 \u043e\u0431\u0440\u0430\u0431\u043e\u0442\u043a\u0438 \u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0439. \u041e\u043d\u0438 \u043f\u043e\u0437\u0432\u043e\u043b\u044f\u044e\u0442 \u0432\u0430\u043c: - \u0418\u043d\u0441\u043f\u0435\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u0438 \u043c\u043e\u0434\u0438\u0444\u0438\u0446\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u043a\u043e\u043d\u0442\u0435\u043a\u0441\u0442 \u043e\u0431\u0440\u0430\u0431\u043e\u0442\u043a\u0438 - \u0414\u043e\u0431\u0430\u0432\u043b\u044f\u0442\u044c \u0441\u043a\u0432\u043e\u0437\u043d\u0443\u044e \u043b\u043e\u0433\u0438\u043a\u0443 (\u043b\u043e\u0433\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435, \u0430\u0443\u0442\u0435\u043d\u0442\u0438\u0444\u0438\u043a\u0430\u0446\u0438\u044f, \u043c\u0435\u0442\u0440\u0438\u043a\u0438) - \u041f\u0440\u0435\u0440\u044b\u0432\u0430\u0442\u044c \u043e\u0431\u0440\u0430\u0431\u043e\u0442\u043a\u0443 \u043f\u0440\u0438 \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e\u0441\u0442\u0438 - \u041e\u0447\u0438\u0449\u0430\u0442\u044c \u0440\u0435\u0441\u0443\u0440\u0441\u044b \u043f\u043e\u0441\u043b\u0435 \u043e\u0431\u0440\u0430\u0431\u043e\u0442\u043a\u0438</p> <p>\u041f\u0440\u0435\u0434\u0441\u0442\u0430\u0432\u044c\u0442\u0435 \u043f\u0435\u0440\u0435\u0445\u0432\u0430\u0442\u0447\u0438\u043a\u0438 \u043a\u0430\u043a \u043a\u043e\u043d\u0442\u0440\u043e\u043b\u044c\u043d\u044b\u0435 \u0442\u043e\u0447\u043a\u0438, \u0447\u0435\u0440\u0435\u0437 \u043a\u043e\u0442\u043e\u0440\u044b\u0435 \u043f\u0440\u043e\u0445\u043e\u0434\u0438\u0442 \u043a\u0430\u0436\u0434\u043e\u0435 \u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0435 \u0434\u043e, \u0432\u043e \u0432\u0440\u0435\u043c\u044f \u0438 \u043f\u043e\u0441\u043b\u0435 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f \u043e\u0431\u0440\u0430\u0431\u043e\u0442\u0447\u0438\u043a\u0430.</p>"},{"location":"ru/Interceptors-%28middleware%29/#_3","title":"\u041a\u043e\u043d\u0432\u0435\u0439\u0435\u0440 \u043e\u0431\u0440\u0430\u0431\u043e\u0442\u043a\u0438","text":"<p>\u0411\u043e\u0442 \u043e\u0431\u0440\u0430\u0431\u0430\u0442\u044b\u0432\u0430\u0435\u0442 \u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u044f \u0447\u0435\u0440\u0435\u0437 \u043a\u043e\u043d\u0432\u0435\u0439\u0435\u0440 \u0441 \u0441\u0435\u043c\u044c\u044e \u044d\u0442\u0430\u043f\u0430\u043c\u0438:</p> \u042d\u0442\u0430\u043f \u041a\u043e\u0433\u0434\u0430 \u0432\u044b\u043f\u043e\u043b\u043d\u044f\u0435\u0442\u0441\u044f \u0414\u043b\u044f \u0447\u0435\u0433\u043e \u043c\u043e\u0436\u043d\u043e \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c Setup \u0421\u0440\u0430\u0437\u0443 \u043f\u043e\u0441\u043b\u0435 \u043f\u043e\u0441\u0442\u0443\u043f\u043b\u0435\u043d\u0438\u044f \u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u044f, \u0434\u043e \u043d\u0430\u0447\u0430\u043b\u0430 \u043e\u0431\u0440\u0430\u0431\u043e\u0442\u043a\u0438 \u2714 \u0413\u043b\u043e\u0431\u0430\u043b\u044c\u043d\u043e\u0435 \u043e\u0433\u0440\u0430\u043d\u0438\u0447\u0435\u043d\u0438\u0435 \u0447\u0430\u0441\u0442\u043e\u0442\u044b\u2714 \u0424\u0438\u043b\u044c\u0442\u0440\u0430\u0446\u0438\u044f \u0441\u043f\u0430\u043c\u0430 \u0438\u043b\u0438 \u043d\u0435\u043a\u043e\u0440\u0440\u0435\u043a\u0442\u043d\u044b\u0445 \u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0439\u2714 \u041d\u0430\u0447\u0430\u043b\u044c\u043d\u043e\u0435 \u043b\u043e\u0433\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435\u2714 \u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0430 \u043e\u0431\u0449\u0435\u0433\u043e \u043a\u043e\u043d\u0442\u0435\u043a\u0441\u0442\u0430 Parsing \u041f\u043e\u0441\u043b\u0435 Setup, \u0438\u0437\u0432\u043b\u0435\u043a\u0430\u0435\u0442 \u043a\u043e\u043c\u0430\u043d\u0434\u0443 \u0438 \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b \u2714 \u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c\u0441\u043a\u0438\u0439 \u0440\u0430\u0437\u0431\u043e\u0440 \u043a\u043e\u043c\u0430\u043d\u0434\u2714 \u041e\u0431\u043e\u0433\u0430\u0449\u0435\u043d\u0438\u0435 \u043a\u043e\u043d\u0442\u0435\u043a\u0441\u0442\u0430 \u0440\u0430\u0441\u043f\u0430\u0440\u0441\u0435\u043d\u043d\u044b\u043c\u0438 \u0434\u0430\u043d\u043d\u044b\u043c\u0438\u2714 \u0412\u0430\u043b\u0438\u0434\u0430\u0446\u0438\u044f \u0441\u0442\u0440\u0443\u043a\u0442\u0443\u0440\u044b \u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u044f Match \u041d\u0430\u0445\u043e\u0434\u0438\u0442 \u043f\u043e\u0434\u0445\u043e\u0434\u044f\u0449\u0438\u0439 \u043e\u0431\u0440\u0430\u0431\u043e\u0442\u0447\u0438\u043a (Command/Input/Common) \u2714 \u041f\u0435\u0440\u0435\u043e\u043f\u0440\u0435\u0434\u0435\u043b\u0435\u043d\u0438\u0435 \u0432\u044b\u0431\u043e\u0440\u0430 \u043e\u0431\u0440\u0430\u0431\u043e\u0442\u0447\u0438\u043a\u0430\u2714 \u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c\u0441\u043a\u0430\u044f \u043b\u043e\u0433\u0438\u043a\u0430 \u043e\u0431\u0440\u0430\u0431\u043e\u0442\u043a\u0438 \u0432\u0432\u043e\u0434\u0430\u2714 \u041b\u043e\u0433\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u043d\u044b\u0445 \u043e\u0431\u0440\u0430\u0431\u043e\u0442\u0447\u0438\u043a\u043e\u0432 Validation \u041f\u043e\u0441\u043b\u0435 \u043d\u0430\u0445\u043e\u0436\u0434\u0435\u043d\u0438\u044f \u043e\u0431\u0440\u0430\u0431\u043e\u0442\u0447\u0438\u043a\u0430, \u043f\u0435\u0440\u0435\u0434 \u0432\u044b\u0437\u043e\u0432\u043e\u043c \u2714 \u041f\u0440\u0430\u0432\u0430 \u043a\u043e\u043d\u043a\u0440\u0435\u0442\u043d\u043e\u0433\u043e \u043e\u0431\u0440\u0430\u0431\u043e\u0442\u0447\u0438\u043a\u0430\u2714 \u041e\u0433\u0440\u0430\u043d\u0438\u0447\u0435\u043d\u0438\u0435 \u0447\u0430\u0441\u0442\u043e\u0442\u044b \u0434\u043b\u044f \u043a\u0430\u0436\u0434\u043e\u0433\u043e \u043e\u0431\u0440\u0430\u0431\u043e\u0442\u0447\u0438\u043a\u0430\u2714 \u041f\u0440\u043e\u0432\u0435\u0440\u043a\u0438\u2714 \u041e\u0442\u043c\u0435\u043d\u0430 \u043e\u0431\u0440\u0430\u0431\u043e\u0442\u043a\u0438 \u0435\u0441\u043b\u0438 \u0443\u0441\u043b\u043e\u0432\u0438\u044f \u043d\u0435 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u044b PreInvoke \u041d\u0435\u043c\u0435\u0434\u043b\u0435\u043d\u043d\u043e \u043f\u0435\u0440\u0435\u0434 \u0437\u0430\u043f\u0443\u0441\u043a\u043e\u043c \u043e\u0431\u0440\u0430\u0431\u043e\u0442\u0447\u0438\u043a\u0430 \u2714 \u041f\u043e\u0441\u043b\u0435\u0434\u043d\u0438\u0435 \u043f\u0440\u043e\u0432\u0435\u0440\u043a\u0438\u2714 \u0417\u0430\u043f\u0443\u0441\u043a \u0442\u0430\u0439\u043c\u0435\u0440\u043e\u0432/\u043c\u0435\u0442\u0440\u0438\u043a\u2714 \u041e\u0431\u043e\u0433\u0430\u0449\u0435\u043d\u0438\u0435 \u043a\u043e\u043d\u0442\u0435\u043a\u0441\u0442\u0430 \u0434\u043b\u044f \u043e\u0431\u0440\u0430\u0431\u043e\u0442\u0447\u0438\u043a\u0430\u2714 \u041c\u043e\u0434\u0438\u0444\u0438\u043a\u0430\u0446\u0438\u044f \u043f\u043e\u0432\u0435\u0434\u0435\u043d\u0438\u044f \u043e\u0431\u0440\u0430\u0431\u043e\u0442\u0447\u0438\u043a\u0430 Invoke \u0417\u0434\u0435\u0441\u044c \u0432\u044b\u043f\u043e\u043b\u043d\u044f\u0435\u0442\u0441\u044f \u043e\u0431\u0440\u0430\u0431\u043e\u0442\u0447\u0438\u043a \u2714 \u041e\u0431\u0435\u0440\u0442\u043a\u0430 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f \u043e\u0431\u0440\u0430\u0431\u043e\u0442\u0447\u0438\u043a\u0430\u2714 \u041e\u0431\u0440\u0430\u0431\u043e\u0442\u043a\u0430 \u043e\u0448\u0438\u0431\u043e\u043a\u2714 \u041b\u043e\u0433\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435 \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442\u043e\u0432 \u043e\u0431\u0440\u0430\u0431\u043e\u0442\u0447\u0438\u043a\u0430 PostInvoke \u041f\u043e\u0441\u043b\u0435 \u0437\u0430\u0432\u0435\u0440\u0448\u0435\u043d\u0438\u044f \u043e\u0431\u0440\u0430\u0431\u043e\u0442\u0447\u0438\u043a\u0430 (\u0443\u0441\u043f\u0435\u0445 \u0438\u043b\u0438 \u043d\u0435\u0443\u0434\u0430\u0447\u0430) \u2714 \u041e\u0447\u0438\u0441\u0442\u043a\u0430 \u0440\u0435\u0441\u0443\u0440\u0441\u043e\u0432\u2714 \u041b\u043e\u0433\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435 \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442\u043e\u0432\u2714 \u041e\u0442\u043f\u0440\u0430\u0432\u043a\u0430 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0439-\u0437\u0430\u0433\u043b\u0443\u0448\u0435\u043a \u043f\u0440\u0438 \u043e\u0448\u0438\u0431\u043a\u0430\u0445\u2714 \u041c\u043e\u0434\u0438\u0444\u0438\u043a\u0430\u0446\u0438\u044f \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442\u043e\u0432 \u043f\u0435\u0440\u0435\u0434 \u0432\u043e\u0437\u0432\u0440\u0430\u0442\u043e\u043c"},{"location":"ru/Interceptors-%28middleware%29/#_4","title":"\u0421\u043e\u0437\u0434\u0430\u043d\u0438\u0435 \u043f\u0435\u0440\u0435\u0445\u0432\u0430\u0442\u0447\u0438\u043a\u0430","text":"<p>\u041f\u0435\u0440\u0435\u0445\u0432\u0430\u0442\u0447\u0438\u043a \u2014 \u044d\u0442\u043e \u043f\u0440\u043e\u0441\u0442\u0430\u044f \u0444\u0443\u043d\u043a\u0446\u0438\u044f, \u043a\u043e\u0442\u043e\u0440\u0430\u044f \u043f\u043e\u043b\u0443\u0447\u0430\u0435\u0442 <code>ProcessingContext</code>:</p> <pre><code>import eu.vendeli.tgbot.core.PipelineInterceptor\nimport eu.vendeli.tgbot.types.component.ProcessingContext\n\nval myInterceptor: PipelineInterceptor = { context -&gt;\n    // \u0412\u0430\u0448\u0430 \u043b\u043e\u0433\u0438\u043a\u0430 \u0437\u0434\u0435\u0441\u044c\n    println(\"\u041e\u0431\u0440\u0430\u0431\u043e\u0442\u043a\u0430 \u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u044f: ${context.update.updateId}\")\n}\n</code></pre> <p>\u0418\u043b\u0438 \u0447\u0435\u0440\u0435\u0437 \u043b\u044f\u043c\u0431\u0434\u0443:</p> <pre><code>val loggingInterceptor = PipelineInterceptor { context -&gt;\n    val logger = context.bot.config.loggerFactory.get(\"MyInterceptor\")\n    logger.info(\"\u041e\u0431\u0440\u0430\u0431\u043e\u0442\u043a\u0430 \u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u044f #${context.update.updateId}\")\n}\n</code></pre>"},{"location":"ru/Interceptors-%28middleware%29/#_5","title":"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f \u043f\u0435\u0440\u0435\u0445\u0432\u0430\u0442\u0447\u0438\u043a\u043e\u0432","text":"<p>\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u0443\u0439\u0442\u0435 \u043f\u0435\u0440\u0435\u0445\u0432\u0430\u0442\u0447\u0438\u043a\u0438 \u0432 \u043a\u043e\u043d\u0432\u0435\u0439\u0435\u0440\u0435 \u043e\u0431\u0440\u0430\u0431\u043e\u0442\u043a\u0438:</p> <pre><code>suspend fun main() {\n    val bot = TelegramBot(\"BOT_TOKEN\")\n\n    // \u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f \u043f\u0435\u0440\u0435\u0445\u0432\u0430\u0442\u0447\u0438\u043a\u0430 \u0434\u043b\u044f \u044d\u0442\u0430\u043f\u0430 Setup\n    bot.update.pipeline.intercept(ProcessingPipePhase.Setup) { context -&gt;\n        // \u041f\u0440\u043e\u0432\u0435\u0440\u043a\u0430 \u0437\u0430\u0431\u0430\u043d\u0435\u043d \u043b\u0438 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c\n        val user = context.update.userOrNull\n        if (user != null &amp;&amp; isBanned(user.id)) {\n            context.finish() // \u041f\u0440\u0435\u0440\u044b\u0432\u0430\u0435\u043c \u043e\u0431\u0440\u0430\u0431\u043e\u0442\u043a\u0443\n            return@intercept\n        }\n    }\n\n    // \u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f \u043f\u0435\u0440\u0435\u0445\u0432\u0430\u0442\u0447\u0438\u043a\u0430 \u0434\u043b\u044f \u044d\u0442\u0430\u043f\u0430 PreInvoke\n    bot.update.pipeline.intercept(ProcessingPipePhase.PreInvoke) { context -&gt;\n        val startTime = System.currentTimeMillis()\n        // \u0441\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c \u0432\u0440\u0435\u043c\u044f \u043d\u0430\u0447\u0430\u043b\u0430\n    }\n\n    // \u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f \u043f\u0435\u0440\u0435\u0445\u0432\u0430\u0442\u0447\u0438\u043a\u0430 \u0434\u043b\u044f \u044d\u0442\u0430\u043f\u0430 PostInvoke\n    bot.update.pipeline.intercept(ProcessingPipePhase.PostInvoke) { context -&gt;\n        val startTime = // \u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c \u0432\u0440\u0435\u043c\u044f \u043d\u0430\u0447\u0430\u043b\u0430\n        if (startTime != null) {\n            val duration = System.currentTimeMillis() - startTime\n            println(\"\u041e\u0431\u0440\u0430\u0431\u043e\u0442\u0447\u0438\u043a \u0437\u0430\u043d\u044f\u043b ${duration}ms\")\n        }\n    }\n\n    bot.handleUpdates()\n}\n</code></pre>"},{"location":"ru/Interceptors-%28middleware%29/#_6","title":"\u0420\u0435\u0430\u043b\u044c\u043d\u044b\u0439 \u043f\u0440\u0438\u043c\u0435\u0440: \u0410\u0443\u0442\u0435\u043d\u0442\u0438\u0444\u0438\u043a\u0430\u0446\u0438\u044f \u0438 \u043c\u0435\u0442\u0440\u0438\u043a\u0438","text":"<p>\u041f\u0440\u0438\u043c\u0435\u0440: \u0431\u043e\u0442, \u0442\u0440\u0435\u0431\u0443\u044e\u0449\u0438\u0439 \u0430\u0443\u0442\u0435\u043d\u0442\u0438\u0444\u0438\u043a\u0430\u0446\u0438\u044e \u0434\u043b\u044f \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u0435\u043d\u043d\u044b\u0445 \u043a\u043e\u043c\u0430\u043d\u0434, \u0438\u0437\u043c\u0435\u0440\u044f\u044e\u0449\u0438\u0439 \u0432\u0440\u0435\u043c\u044f \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f \u043e\u0431\u0440\u0430\u0431\u043e\u0442\u0447\u0438\u043a\u043e\u0432 \u0438 \u043b\u043e\u0433\u0438\u0440\u0443\u044e\u0449\u0438\u0439 \u0432\u0441\u0435 \u043a\u043e\u043c\u0430\u043d\u0434\u044b.</p> <pre><code>suspend fun main() {\n    val bot = TelegramBot(\"BOT_TOKEN\")\n\n    // \u042d\u0442\u0430\u043f Setup: \u041f\u0440\u043e\u0432\u0435\u0440\u043a\u0430 \u0430\u0443\u0442\u0435\u043d\u0442\u0438\u0444\u0438\u043a\u0430\u0446\u0438\u0438 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f\n    bot.update.pipeline.intercept(ProcessingPipePhase.Setup) { context -&gt;\n        val user = context.update.userOrNull ?: return@intercept\n\n        if (!isAuthenticated(user.id)) {\n            message { \"\u041f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430, \u0441\u043d\u0430\u0447\u0430\u043b\u0430 \u043f\u0440\u043e\u0439\u0434\u0438\u0442\u0435 \u0430\u0443\u0442\u0435\u043d\u0442\u0438\u0444\u0438\u043a\u0430\u0446\u0438\u044e \u0447\u0435\u0440\u0435\u0437 /login\" }\n                .send(user, context.bot)\n            context.finish()\n        }\n    }\n\n    // \u042d\u0442\u0430\u043f PreInvoke: \u0417\u0430\u043f\u0443\u0441\u043a \u0442\u0430\u0439\u043c\u0435\u0440\u0430 \u0438 \u043f\u0440\u043e\u0432\u0435\u0440\u043a\u0430 \u043f\u0440\u0430\u0432\n    bot.update.pipeline.intercept(ProcessingPipePhase.PreInvoke) { context -&gt;\n        val activity = context.activity ?: return@intercept\n        val user = context.update.userOrNull ?: return@intercept\n\n        // \u041f\u0440\u043e\u0432\u0435\u0440\u043a\u0430 \u043f\u0440\u0430\u0432 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f \u0434\u043b\u044f \u044d\u0442\u043e\u0433\u043e \u043a\u043e\u043d\u043a\u0440\u0435\u0442\u043d\u043e\u0433\u043e \u043e\u0431\u0440\u0430\u0431\u043e\u0442\u0447\u0438\u043a\u0430\n        if (!hasPermission(user.id, activity)) {\n            message { \"\u0423 \u0432\u0430\u0441 \u043d\u0435\u0442 \u043f\u0440\u0430\u0432 \u0434\u043b\u044f \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u044f \u044d\u0442\u043e\u0439 \u043a\u043e\u043c\u0430\u043d\u0434\u044b.\" }\n                .send(user, context.bot)\n            context.finish()\n            return@intercept\n        }\n\n        // \u0417\u0430\u043f\u0443\u0441\u043a \u0442\u0430\u0439\u043c\u0435\u0440\u0430\n        // \u0441\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c \u0432\u0440\u0435\u043c\u044f \u043d\u0430\u0447\u0430\u043b\u0430\n    }\n\n    // \u042d\u0442\u0430\u043f PostInvoke: \u041b\u043e\u0433\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435 \u0438 \u043e\u0447\u0438\u0441\u0442\u043a\u0430\n    bot.update.pipeline.intercept(ProcessingPipePhase.PostInvoke) { context -&gt;\n        val activity = context.activity ?: return@intercept\n        val startTime = // \u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c \u0432\u0440\u0435\u043c\u044f \u043d\u0430\u0447\u0430\u043b\u0430\n\n        if (startTime != null) {\n            val duration = System.currentTimeMillis() - startTime\n            val logger = context.bot.config.loggerFactory.get(\"Metrics\")\n            logger.info(\n                \"\u041e\u0431\u0440\u0430\u0431\u043e\u0442\u0447\u0438\u043a ${activity::class.simpleName} \u0437\u0430\u043d\u044f\u043b ${duration}ms \" +\n                \"\u0434\u043b\u044f \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f ${context.update.userOrNull?.id}\"\n            )\n        }\n    }\n\n    bot.handleUpdates()\n}\n</code></pre>"},{"location":"ru/Interceptors-%28middleware%29/#processingcontext","title":"ProcessingContext","text":"<p><code>ProcessingContext</code> \u043f\u0440\u0435\u0434\u043e\u0441\u0442\u0430\u0432\u043b\u044f\u0435\u0442 \u0434\u043e\u0441\u0442\u0443\u043f \u043a:</p> <ul> <li><code>update: ProcessedUpdate</code> - \u0422\u0435\u043a\u0443\u0449\u0435\u0435 \u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0435, \u043a\u043e\u0442\u043e\u0440\u043e\u0435 \u043e\u0431\u0440\u0430\u0431\u0430\u0442\u044b\u0432\u0430\u0435\u0442\u0441\u044f</li> <li><code>bot: TelegramBot</code> - \u042d\u043a\u0437\u0435\u043c\u043f\u043b\u044f\u0440 \u0431\u043e\u0442\u0430</li> <li><code>registry: ActivityRegistry</code> - \u0420\u0435\u0435\u0441\u0442\u0440 \u0430\u043a\u0442\u0438\u0432\u043d\u043e\u0441\u0442\u0435\u0439</li> <li><code>parsedInput: String</code> - \u0420\u0430\u0441\u043f\u0430\u0440\u0441\u0435\u043d\u043d\u044b\u0439 \u0442\u0435\u043a\u0441\u0442 \u043a\u043e\u043c\u0430\u043d\u0434\u044b/\u0432\u0432\u043e\u0434\u0430</li> <li><code>parameters: Map&lt;String, String&gt;</code> - \u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b \u043a\u043e\u043c\u0430\u043d\u0434\u044b</li> <li><code>activity: Activity?</code> - \u041d\u0430\u0439\u0434\u0435\u043d\u043d\u044b\u0439 \u043e\u0431\u0440\u0430\u0431\u043e\u0442\u0447\u0438\u043a (null \u0434\u043e \u044d\u0442\u0430\u043f\u0430 Match)</li> <li><code>shouldProceed: Boolean</code> - \u0414\u043e\u043b\u0436\u043d\u0430 \u043b\u0438 \u043f\u0440\u043e\u0434\u043e\u043b\u0436\u0430\u0442\u044c\u0441\u044f \u043e\u0431\u0440\u0430\u0431\u043e\u0442\u043a\u0430</li> <li><code>additionalContext: AdditionalContext</code> - \u0414\u043e\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044c\u043d\u044b\u0435 \u0434\u0430\u043d\u043d\u044b\u0435 \u043a\u043e\u043d\u0442\u0435\u043a\u0441\u0442\u0430</li> <li><code>finish()</code> - \u041f\u0440\u0435\u0440\u0432\u0430\u0442\u044c \u043e\u0431\u0440\u0430\u0431\u043e\u0442\u043a\u0443 \u0440\u0430\u043d\u044c\u0448\u0435</li> </ul>"},{"location":"ru/Interceptors-%28middleware%29/#_7","title":"\u041f\u0440\u0435\u0440\u044b\u0432\u0430\u043d\u0438\u0435 \u043e\u0431\u0440\u0430\u0431\u043e\u0442\u043a\u0438 \u0440\u0430\u043d\u044c\u0448\u0435","text":"<p>\u0412\u044b\u0437\u043e\u0432\u0438\u0442\u0435 <code>context.finish()</code> \u0447\u0442\u043e\u0431\u044b \u043f\u0440\u0435\u0440\u0432\u0430\u0442\u044c \u043e\u0431\u0440\u0430\u0431\u043e\u0442\u043a\u0443:</p> <pre><code>bot.update.pipeline.intercept(ProcessingPipePhase.Validation) { context -&gt;\n    if (someCondition) {\n        context.finish() // \u0414\u0430\u043b\u044c\u043d\u0435\u0439\u0448\u0438\u0435 \u044d\u0442\u0430\u043f\u044b \u0432\u044b\u043f\u043e\u043b\u043d\u044f\u0442\u044c\u0441\u044f \u043d\u0435 \u0431\u0443\u0434\u0443\u0442\n    }\n}\n</code></pre>"},{"location":"ru/Interceptors-%28middleware%29/#_8","title":"\u0425\u0440\u0430\u043d\u0435\u043d\u0438\u0435 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c\u0441\u043a\u0438\u0445 \u0434\u0430\u043d\u043d\u044b\u0445","text":"<p>\u0418\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0439\u0442\u0435 <code>additionalContext</code> \u0434\u043b\u044f \u043f\u0435\u0440\u0435\u0434\u0430\u0447\u0438 \u0434\u0430\u043d\u043d\u044b\u0445 \u043c\u0435\u0436\u0434\u0443 \u043f\u0435\u0440\u0435\u0445\u0432\u0430\u0442\u0447\u0438\u043a\u0430\u043c\u0438:</p> <pre><code>// \u0412 PreInvoke\ncontext.additionalContext[\"userId\"] = context.update.userOrNull?.id\n\n// \u0412 PostInvoke\nval userId = context.additionalContext[\"userId\"] as? Long\n</code></pre>"},{"location":"ru/Interceptors-%28middleware%29/#_9","title":"\u041d\u0435\u0441\u043a\u043e\u043b\u044c\u043a\u043e \u043f\u0435\u0440\u0435\u0445\u0432\u0430\u0442\u0447\u0438\u043a\u043e\u0432","text":"<p>\u0412\u044b \u043c\u043e\u0436\u0435\u0442\u0435 \u0437\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u043d\u0435\u0441\u043a\u043e\u043b\u044c\u043a\u043e \u043f\u0435\u0440\u0435\u0445\u0432\u0430\u0442\u0447\u0438\u043a\u043e\u0432 \u0434\u043b\u044f \u043e\u0434\u043d\u043e\u0433\u043e \u044d\u0442\u0430\u043f\u0430. \u041e\u043d\u0438 \u0432\u044b\u043f\u043e\u043b\u043d\u044f\u044e\u0442\u0441\u044f \u0432 \u043f\u043e\u0440\u044f\u0434\u043a\u0435 \u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u0438:</p> <pre><code>bot.update.pipeline.intercept(ProcessingPipePhase.Setup) { context -&gt;\n    println(\"\u041f\u0435\u0440\u0432\u044b\u0439 \u043f\u0435\u0440\u0435\u0445\u0432\u0430\u0442\u0447\u0438\u043a\")\n}\n\nbot.update.pipeline.intercept(ProcessingPipePhase.Setup) { context -&gt;\n    println(\"\u0412\u0442\u043e\u0440\u043e\u0439 \u043f\u0435\u0440\u0435\u0445\u0432\u0430\u0442\u0447\u0438\u043a\")\n}\n\n// \u041a\u043e\u0433\u0434\u0430 \u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0435 \u043e\u0431\u0440\u0430\u0431\u0430\u0442\u044b\u0432\u0430\u0435\u0442\u0441\u044f:\n// \u0412\u044b\u0432\u043e\u0434: \"\u041f\u0435\u0440\u0432\u044b\u0439 \u043f\u0435\u0440\u0435\u0445\u0432\u0430\u0442\u0447\u0438\u043a\"\n// \u0412\u044b\u0432\u043e\u0434: \"\u0412\u0442\u043e\u0440\u043e\u0439 \u043f\u0435\u0440\u0435\u0445\u0432\u0430\u0442\u0447\u0438\u043a\"\n</code></pre> <p>\u0415\u0441\u043b\u0438 \u043f\u0435\u0440\u0435\u0445\u0432\u0430\u0442\u0447\u0438\u043a \u0432\u044b\u0437\u044b\u0432\u0430\u0435\u0442 <code>context.finish()</code>, \u043f\u043e\u0441\u043b\u0435\u0434\u0443\u044e\u0449\u0438\u0435 \u043f\u0435\u0440\u0435\u0445\u0432\u0430\u0442\u0447\u0438\u043a\u0438 \u043d\u0430 \u044d\u0442\u043e\u043c \u044d\u0442\u0430\u043f\u0435 \u043f\u0440\u043e\u043f\u0443\u0441\u043a\u0430\u044e\u0442\u0441\u044f, \u0438 \u0434\u0430\u043b\u044c\u043d\u0435\u0439\u0448\u0438\u0435 \u044d\u0442\u0430\u043f\u044b \u043d\u0435 \u0432\u044b\u043f\u043e\u043b\u043d\u044f\u044e\u0442\u0441\u044f.</p>"},{"location":"ru/Interceptors-%28middleware%29/#1","title":"1. \u0418\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0439\u0442\u0435 \u043f\u0440\u0430\u0432\u0438\u043b\u044c\u043d\u044b\u0439 \u044d\u0442\u0430\u043f","text":"<ul> <li>Setup: \u0413\u043b\u043e\u0431\u0430\u043b\u044c\u043d\u044b\u0435 \u043f\u0440\u043e\u0432\u0435\u0440\u043a\u0438, \u0444\u0438\u043b\u044c\u0442\u0440\u0430\u0446\u0438\u044f, \u043d\u0430\u0447\u0430\u043b\u044c\u043d\u0430\u044f \u043d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0430</li> <li>Parsing: \u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c\u0441\u043a\u0430\u044f \u043b\u043e\u0433\u0438\u043a\u0430 \u0440\u0430\u0437\u0431\u043e\u0440\u0430</li> <li>Match: \u041b\u043e\u0433\u0438\u043a\u0430 \u0432\u044b\u0431\u043e\u0440\u0430 \u043e\u0431\u0440\u0430\u0431\u043e\u0442\u0447\u0438\u043a\u0430</li> <li>Validation: \u041f\u0440\u0430\u0432\u0430, \u043e\u0433\u0440\u0430\u043d\u0438\u0447\u0435\u043d\u0438\u0435 \u0447\u0430\u0441\u0442\u043e\u0442\u044b, \u043f\u0440\u043e\u0432\u0435\u0440\u043a\u0438</li> <li>PreInvoke: \u041f\u043e\u0434\u0433\u043e\u0442\u043e\u0432\u043a\u0430 \u043a \u0437\u0430\u043f\u0443\u0441\u043a\u0443 \u043e\u0431\u0440\u0430\u0431\u043e\u0442\u0447\u0438\u043a\u0430</li> <li>Invoke: \u041e\u0431\u044b\u0447\u043d\u043e \u043e\u0431\u0440\u0430\u0431\u0430\u0442\u044b\u0432\u0430\u0435\u0442\u0441\u044f \u043f\u0435\u0440\u0435\u0445\u0432\u0430\u0442\u0447\u0438\u043a\u043e\u043c \u043f\u043e \u0443\u043c\u043e\u043b\u0447\u0430\u043d\u0438\u044e</li> <li>PostInvoke: \u041e\u0447\u0438\u0441\u0442\u043a\u0430, \u043b\u043e\u0433\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435, \u043e\u0431\u0440\u0430\u0431\u043e\u0442\u043a\u0430 \u043e\u0448\u0438\u0431\u043e\u043a</li> </ul>"},{"location":"ru/Interceptors-%28middleware%29/#2","title":"2. \u0414\u0435\u0440\u0436\u0438\u0442\u0435 \u043f\u0435\u0440\u0435\u0445\u0432\u0430\u0442\u0447\u0438\u043a\u0438 \u0441\u0444\u043e\u043a\u0443\u0441\u0438\u0440\u043e\u0432\u0430\u043d\u043d\u044b\u043c\u0438","text":"<p>\u041a\u0430\u0436\u0434\u044b\u0439 \u043f\u0435\u0440\u0435\u0445\u0432\u0430\u0442\u0447\u0438\u043a \u0434\u043e\u043b\u0436\u0435\u043d \u0434\u0435\u043b\u0430\u0442\u044c \u043e\u0434\u043d\u0443 \u0432\u0435\u0449\u044c:</p> <pre><code>// \u2705 \u0425\u043e\u0440\u043e\u0448\u043e - \u0441\u0444\u043e\u043a\u0443\u0441\u0438\u0440\u043e\u0432\u0430\u043d\u043d\u044b\u0439 \u043f\u0435\u0440\u0435\u0445\u0432\u0430\u0442\u0447\u0438\u043a\nbot.update.pipeline.intercept(ProcessingPipePhase.Setup) { context -&gt;\n    if (isBanned(context.update.userOrNull?.id)) {\n        context.finish()\n    }\n}\n\n// \u274c \u0418\u0437\u0431\u0435\u0433\u0430\u0439\u0442\u0435 - \u0441\u043b\u0438\u0448\u043a\u043e\u043c \u043c\u043d\u043e\u0433\u043e \u0434\u0435\u043b\nbot.update.pipeline.intercept(ProcessingPipePhase.Setup) { context -&gt;\n    // \u0410\u0443\u0442\u0435\u043d\u0442\u0438\u0444\u0438\u043a\u0430\u0446\u0438\u044f\n    // \u041b\u043e\u0433\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435\n    // \u041c\u0435\u0442\u0440\u0438\u043a\u0438\n    // \u041e\u0433\u0440\u0430\u043d\u0438\u0447\u0435\u043d\u0438\u0435 \u0447\u0430\u0441\u0442\u043e\u0442\u044b\n    // ... \u0441\u043b\u0438\u0448\u043a\u043e\u043c \u043c\u043d\u043e\u0433\u043e!\n}\n</code></pre>"},{"location":"ru/Interceptors-%28middleware%29/#3","title":"3. \u0413\u0440\u0430\u0446\u0438\u043e\u0437\u043d\u043e \u043e\u0431\u0440\u0430\u0431\u0430\u0442\u044b\u0432\u0430\u0439\u0442\u0435 \u043e\u0448\u0438\u0431\u043a\u0438","text":"<p>\u041f\u0435\u0440\u0435\u0445\u0432\u0430\u0442\u0447\u0438\u043a\u0438 \u043d\u0435 \u0434\u043e\u043b\u0436\u043d\u044b \u043a\u0440\u0430\u0448\u0438\u0442\u044c \u0431\u043e\u0442\u0430:</p> <pre><code>bot.update.pipeline.intercept(ProcessingPipePhase.PreInvoke) { context -&gt;\n    try {\n        // \u0412\u0430\u0448\u0430 \u043b\u043e\u0433\u0438\u043a\u0430\n    } catch (e: Exception) {\n        val logger = context.bot.config.loggerFactory.get(\"Interceptor\")\n        logger.error(\"\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0435\u0440\u0435\u0445\u0432\u0430\u0442\u0447\u0438\u043a\u0430\", e)\n        // \u041d\u0435 \u0432\u044b\u0437\u044b\u0432\u0430\u0439\u0442\u0435 context.finish() \u0435\u0441\u043b\u0438 \u043d\u0435 \u0445\u043e\u0442\u0438\u0442\u0435 \u043f\u0440\u0435\u0440\u0432\u0430\u0442\u044c \u043e\u0431\u0440\u0430\u0431\u043e\u0442\u043a\u0443\n    }\n}\n</code></pre>"},{"location":"ru/Interceptors-%28middleware%29/#4","title":"4. \u041e\u0447\u0438\u0449\u0430\u0439\u0442\u0435 \u0440\u0435\u0441\u0443\u0440\u0441\u044b","text":"<p>\u0415\u0441\u043b\u0438 \u0432\u044b \u043e\u0442\u043a\u0440\u044b\u0432\u0430\u0435\u0442\u0435 \u0440\u0435\u0441\u0443\u0440\u0441\u044b \u0432 <code>PreInvoke</code>, \u043e\u0447\u0438\u0449\u0430\u0439\u0442\u0435 \u0438\u0445 \u0432 <code>PostInvoke</code>:</p> <pre><code>var timer: Timer? = null\n\nbot.update.pipeline.intercept(ProcessingPipePhase.PreInvoke) { context -&gt;\n    timer = Timer()\n    context.additionalContext[\"timer\"] = timer\n}\n\nbot.update.pipeline.intercept(ProcessingPipePhase.PostInvoke) { context -&gt;\n    val timer = context.additionalContext[\"timer\"] as? Timer\n    timer?.stop()\n}\n</code></pre>"},{"location":"ru/Interceptors-%28middleware%29/#5","title":"5. \u041f\u043e\u0440\u044f\u0434\u043e\u043a \u0438\u043c\u0435\u0435\u0442 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435","text":"<p>\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u0443\u0439\u0442\u0435 \u043f\u0435\u0440\u0435\u0445\u0432\u0430\u0442\u0447\u0438\u043a\u0438 \u0432 \u0442\u043e\u043c \u043f\u043e\u0440\u044f\u0434\u043a\u0435, \u0432 \u043a\u043e\u0442\u043e\u0440\u043e\u043c \u0445\u043e\u0442\u0438\u0442\u0435 \u0447\u0442\u043e\u0431\u044b \u043e\u043d\u0438 \u0432\u044b\u043f\u043e\u043b\u043d\u044f\u043b\u0438\u0441\u044c:</p> <pre><code>// \u0411\u043e\u043b\u0435\u0435 \u043e\u0431\u0449\u0438\u0435 \u043f\u0440\u043e\u0432\u0435\u0440\u043a\u0438 \u0441\u043d\u0430\u0447\u0430\u043b\u0430\nbot.update.pipeline.intercept(ProcessingPipePhase.Setup) {\n    // \u0413\u043b\u043e\u0431\u0430\u043b\u044c\u043d\u0430\u044f \u043f\u0440\u043e\u0432\u0435\u0440\u043a\u0430 \u0431\u0430\u043d\u0430\n}\n\n// \u0411\u043e\u043b\u0435\u0435 \u0441\u043f\u0435\u0446\u0438\u0444\u0438\u0447\u043d\u044b\u0435 \u043f\u0440\u043e\u0432\u0435\u0440\u043a\u0438 \u043f\u043e\u0437\u0436\u0435\nbot.update.pipeline.intercept(ProcessingPipePhase.Validation) {\n    // \u041f\u0440\u043e\u0432\u0435\u0440\u043a\u0430 \u043f\u0440\u0430\u0432 \u043a\u043e\u043d\u043a\u0440\u0435\u0442\u043d\u043e\u0433\u043e \u043e\u0431\u0440\u0430\u0431\u043e\u0442\u0447\u0438\u043a\u0430\n}\n</code></pre>"},{"location":"ru/Interceptors-%28middleware%29/#6","title":"6. \u0418\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0439\u0442\u0435 \u043f\u0435\u0440\u0435\u0445\u0432\u0430\u0442\u0447\u0438\u043a\u0438 \u0434\u043b\u044f \u0441\u043a\u0432\u043e\u0437\u043d\u044b\u0445 \u0437\u0430\u0434\u0430\u0447","text":"<p>\u041f\u0435\u0440\u0435\u0445\u0432\u0430\u0442\u0447\u0438\u043a\u0438 \u0438\u0434\u0435\u0430\u043b\u044c\u043d\u044b \u0434\u043b\u044f: - \u2705 \u0410\u0443\u0442\u0435\u043d\u0442\u0438\u0444\u0438\u043a\u0430\u0446\u0438\u0438/\u0430\u0432\u0442\u043e\u0440\u0438\u0437\u0430\u0446\u0438\u0438 - \u2705 \u041b\u043e\u0433\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u044f - \u2705 \u041c\u0435\u0442\u0440\u0438\u043a/\u043c\u043e\u043d\u0438\u0442\u043e\u0440\u0438\u043d\u0433\u0430 \u043f\u0440\u043e\u0438\u0437\u0432\u043e\u0434\u0438\u0442\u0435\u043b\u044c\u043d\u043e\u0441\u0442\u0438 - \u2705 \u041e\u0433\u0440\u0430\u043d\u0438\u0447\u0435\u043d\u0438\u044f \u0447\u0430\u0441\u0442\u043e\u0442\u044b - \u2705 \u041e\u0431\u0440\u0430\u0431\u043e\u0442\u043a\u0438 \u043e\u0448\u0438\u0431\u043e\u043a - \u2705 \u0422\u0440\u0430\u043d\u0441\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u0438 \u0437\u0430\u043f\u0440\u043e\u0441\u043e\u0432/\u043e\u0442\u0432\u0435\u0442\u043e\u0432</p> <p>\u0414\u043b\u044f \u043b\u043e\u0433\u0438\u043a\u0438 \u043a\u043e\u043d\u043a\u0440\u0435\u0442\u043d\u043e\u0433\u043e \u043e\u0431\u0440\u0430\u0431\u043e\u0442\u0447\u0438\u043a\u0430 \u043e\u0441\u0442\u0430\u0432\u044c\u0442\u0435 \u044d\u0442\u043e \u0432 \u043e\u0431\u0440\u0430\u0431\u043e\u0442\u0447\u0438\u043a\u0435.</p>"},{"location":"ru/Interceptors-%28middleware%29/#_10","title":"\u041f\u0435\u0440\u0435\u0445\u0432\u0430\u0442\u0447\u0438\u043a\u0438 \u043f\u043e \u0443\u043c\u043e\u043b\u0447\u0430\u043d\u0438\u044e","text":"<p>\u0424\u0440\u0435\u0439\u043c\u0432\u043e\u0440\u043a \u0432\u043a\u043b\u044e\u0447\u0430\u0435\u0442 \u043f\u0435\u0440\u0435\u0445\u0432\u0430\u0442\u0447\u0438\u043a\u0438 \u043f\u043e \u0443\u043c\u043e\u043b\u0447\u0430\u043d\u0438\u044e \u0434\u043b\u044f \u043e\u0441\u043d\u043e\u0432\u043d\u043e\u0439 \u0444\u0443\u043d\u043a\u0446\u0438\u043e\u043d\u0430\u043b\u044c\u043d\u043e\u0441\u0442\u0438:</p> <ul> <li>DefaultSetupInterceptor: \u0413\u043b\u043e\u0431\u0430\u043b\u044c\u043d\u043e\u0435 \u043e\u0433\u0440\u0430\u043d\u0438\u0447\u0435\u043d\u0438\u0435 \u0447\u0430\u0441\u0442\u043e\u0442\u044b</li> <li>DefaultParsingInterceptor: \u0420\u0430\u0437\u0431\u043e\u0440 \u043a\u043e\u043c\u0430\u043d\u0434</li> <li>DefaultMatchInterceptor: \u0421\u043e\u043f\u043e\u0441\u0442\u0430\u0432\u043b\u0435\u043d\u0438\u0435 \u043e\u0431\u0440\u0430\u0431\u043e\u0442\u0447\u0438\u043a\u043e\u0432 (\u043a\u043e\u043c\u0430\u043d\u0434\u044b, \u0432\u0432\u043e\u0434, \u043e\u0431\u0449\u0438\u0435 \u043c\u0430\u0442\u0447\u0435\u0440\u044b)</li> <li>DefaultValidationInterceptor: \u041f\u0440\u043e\u0432\u0435\u0440\u043a\u0438 \u0438 \u043e\u0433\u0440\u0430\u043d\u0438\u0447\u0435\u043d\u0438\u0435 \u0447\u0430\u0441\u0442\u043e\u0442\u044b \u0434\u043b\u044f \u043a\u0430\u0436\u0434\u043e\u0433\u043e \u043e\u0431\u0440\u0430\u0431\u043e\u0442\u0447\u0438\u043a\u0430</li> <li>DefaultInvokeInterceptor: \u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u0435 \u043e\u0431\u0440\u0430\u0431\u043e\u0442\u0447\u0438\u043a\u0430 \u0438 \u043e\u0431\u0440\u0430\u0431\u043e\u0442\u043a\u0430 \u043e\u0448\u0438\u0431\u043e\u043a</li> </ul> <p>\u0412\u0430\u0448\u0438 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c\u0441\u043a\u0438\u0435 \u043f\u0435\u0440\u0435\u0445\u0432\u0430\u0442\u0447\u0438\u043a\u0438 \u0440\u0430\u0431\u043e\u0442\u0430\u044e\u0442 \u0432\u043c\u0435\u0441\u0442\u0435 \u0441 \u044d\u0442\u0438\u043c\u0438 \u043f\u0435\u0440\u0435\u0445\u0432\u0430\u0442\u0447\u0438\u043a\u0430\u043c\u0438 \u043f\u043e \u0443\u043c\u043e\u043b\u0447\u0430\u043d\u0438\u044e. \u0412\u044b \u043c\u043e\u0436\u0435\u0442\u0435 \u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043b\u043e\u0433\u0438\u043a\u0443 \u0434\u043e \u0438\u043b\u0438 \u043f\u043e\u0441\u043b\u0435 \u043f\u0435\u0440\u0435\u0445\u0432\u0430\u0442\u0447\u0438\u043a\u043e\u0432 \u043f\u043e \u0443\u043c\u043e\u043b\u0447\u0430\u043d\u0438\u044e, \u043d\u043e \u0432\u044b \u043d\u0435 \u043c\u043e\u0436\u0435\u0442\u0435 \u0443\u0434\u0430\u043b\u0438\u0442\u044c \u043f\u0435\u0440\u0435\u0445\u0432\u0430\u0442\u0447\u0438\u043a\u0438 \u043f\u043e \u0443\u043c\u043e\u043b\u0447\u0430\u043d\u0438\u044e.</p>"},{"location":"ru/Interceptors-%28middleware%29/#_11","title":"\u041f\u0440\u043e\u0434\u0432\u0438\u043d\u0443\u0442\u044b\u0439: \u0423\u0441\u043b\u043e\u0432\u043d\u044b\u0435 \u043f\u0435\u0440\u0435\u0445\u0432\u0430\u0442\u0447\u0438\u043a\u0438","text":"<p>\u0412\u044b \u043c\u043e\u0436\u0435\u0442\u0435 \u0434\u0435\u043b\u0430\u0442\u044c \u043f\u0435\u0440\u0435\u0445\u0432\u0430\u0442\u0447\u0438\u043a\u0438 \u0443\u0441\u043b\u043e\u0432\u043d\u044b\u043c\u0438:</p> <pre><code>bot.update.pipeline.intercept(ProcessingPipePhase.PreInvoke) { context -&gt;\n    val activity = context.activity ?: return@intercept\n\n    // \u041f\u0440\u0438\u043c\u0435\u043d\u044f\u0442\u044c \u0442\u043e\u043b\u044c\u043a\u043e \u043a \u043a\u043e\u043d\u043a\u0440\u0435\u0442\u043d\u044b\u043c \u043e\u0431\u0440\u0430\u0431\u043e\u0442\u0447\u0438\u043a\u0430\u043c\n    if (activity::class.simpleName?.contains(\"Admin\") == true) {\n        // \u041b\u043e\u0433\u0438\u043a\u0430 \u0434\u043b\u044f \u0430\u0434\u043c\u0438\u043d\u043e\u0432\n        checkAdminPermissions(context)\n    }\n}\n</code></pre>"},{"location":"ru/Interceptors-%28middleware%29/#_12","title":"\u0418\u0442\u043e\u0433","text":"<p>\u041f\u0435\u0440\u0435\u0445\u0432\u0430\u0442\u0447\u0438\u043a\u0438 \u043f\u0440\u0435\u0434\u043e\u0441\u0442\u0430\u0432\u043b\u044f\u044e\u0442 \u0447\u0438\u0441\u0442\u044b\u0439 \u0441\u043f\u043e\u0441\u043e\u0431 \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0438\u044f \u0441\u043a\u0432\u043e\u0437\u043d\u043e\u0439 \u043b\u043e\u0433\u0438\u043a\u0438 \u0432 \u0432\u0430\u0448 \u0431\u043e\u0442:</p> <ul> <li>\u2705 \u0421\u0435\u043c\u044c \u044d\u0442\u0430\u043f\u043e\u0432 \u0434\u043b\u044f \u0440\u0430\u0437\u043d\u044b\u0445 \u0441\u0442\u0430\u0434\u0438\u0439 \u043e\u0431\u0440\u0430\u0431\u043e\u0442\u043a\u0438</li> <li>\u2705 \u041f\u0440\u043e\u0441\u0442\u043e\u0439 API: \u041f\u0440\u043e\u0441\u0442\u043e \u0440\u0435\u0430\u043b\u0438\u0437\u0443\u0439\u0442\u0435 <code>PipelineInterceptor</code></li> <li>\u2705 \u0413\u0438\u0431\u043a\u0438\u0435: \u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u0443\u0439\u0442\u0435 \u043d\u0435\u0441\u043a\u043e\u043b\u044c\u043a\u043e \u043f\u0435\u0440\u0435\u0445\u0432\u0430\u0442\u0447\u0438\u043a\u043e\u0432 \u043d\u0430 \u044d\u0442\u0430\u043f</li> <li>\u2705 \u041c\u043e\u0449\u043d\u044b\u0435: \u0414\u043e\u0441\u0442\u0443\u043f \u043a \u043f\u043e\u043b\u043d\u043e\u043c\u0443 \u043a\u043e\u043d\u0442\u0435\u043a\u0441\u0442\u0443 \u043e\u0431\u0440\u0430\u0431\u043e\u0442\u043a\u0438</li> <li>\u2705 \u0411\u0435\u0437\u043e\u043f\u0430\u0441\u043d\u044b\u0435: \u041c\u043e\u0436\u043d\u043e \u043f\u0440\u0435\u0440\u0432\u0430\u0442\u044c \u043e\u0431\u0440\u0430\u0431\u043e\u0442\u043a\u0443 \u0440\u0430\u043d\u044c\u0448\u0435 \u0441 <code>context.finish()</code></li> </ul> <p>\u0418\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0439\u0442\u0435 \u043f\u0435\u0440\u0435\u0445\u0432\u0430\u0442\u0447\u0438\u043a\u0438 \u0447\u0442\u043e\u0431\u044b \u0434\u0435\u0440\u0436\u0430\u0442\u044c \u0432\u0430\u0448\u0438 \u043e\u0431\u0440\u0430\u0431\u043e\u0442\u0447\u0438\u043a\u0438 \u0441\u0444\u043e\u043a\u0443\u0441\u0438\u0440\u043e\u0432\u0430\u043d\u043d\u044b\u043c\u0438 \u043d\u0430 \u0431\u0438\u0437\u043d\u0435\u0441-\u043b\u043e\u0433\u0438\u043a\u0435, \u0432 \u0442\u043e \u0432\u0440\u0435\u043c\u044f \u043a\u0430\u043a \u0441\u043a\u0432\u043e\u0437\u043d\u044b\u0435 \u0437\u0430\u0434\u0430\u0447\u0438, \u0442\u0430\u043a\u0438\u0435 \u043a\u0430\u043a \u0430\u0443\u0442\u0435\u043d\u0442\u0438\u0444\u0438\u043a\u0430\u0446\u0438\u044f, \u043b\u043e\u0433\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435 \u0438 \u043c\u0435\u0442\u0440\u0438\u043a\u0438, \u043e\u0431\u0440\u0430\u0431\u0430\u0442\u044b\u0432\u0430\u044e\u0442\u0441\u044f \u0446\u0435\u043d\u0442\u0440\u0430\u043b\u0438\u0437\u043e\u0432\u0430\u043d\u043d\u043e.</p>"},{"location":"ru/Interceptors-%28middleware%29/#_13","title":"\u0421\u043c. \u0442\u0430\u043a\u0436\u0435","text":"<ul> <li>Functional Handling DSL - \u0424\u0443\u043d\u043a\u0446\u0438\u043e\u043d\u0430\u043b\u044c\u043d\u0430\u044f \u043e\u0431\u0440\u0430\u0431\u043e\u0442\u043a\u0430 \u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0439</li> <li>Guards - \u041f\u0440\u043e\u0432\u0435\u0440\u043a\u0438 \u043f\u0440\u0430\u0432 \u043d\u0430 \u0443\u0440\u043e\u0432\u043d\u0435 \u043e\u0431\u0440\u0430\u0431\u043e\u0442\u0447\u0438\u043a\u0430</li> </ul>"},{"location":"ru/Update-parsing/","title":"\u0420\u0430\u0437\u0431\u043e\u0440 \u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0439","text":""},{"location":"ru/Update-parsing/#_1","title":"\u0422\u0435\u043a\u0441\u0442\u043e\u0432\u0430\u044f \u043f\u043e\u043b\u0435\u0437\u043d\u0430\u044f \u043d\u0430\u0433\u0440\u0443\u0437\u043a\u0430","text":"<p>\u041d\u0435\u043a\u043e\u0442\u043e\u0440\u044b\u0435 \u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u044f \u043c\u043e\u0433\u0443\u0442 \u0441\u043e\u0434\u0435\u0440\u0436\u0430\u0442\u044c \u0442\u0435\u043a\u0441\u0442\u043e\u0432\u0443\u044e \u043f\u043e\u043b\u0435\u0437\u043d\u0443\u044e \u043d\u0430\u0433\u0440\u0443\u0437\u043a\u0443, \u043a\u043e\u0442\u043e\u0440\u0443\u044e \u043c\u043e\u0436\u043d\u043e \u0440\u0430\u0437\u043e\u0431\u0440\u0430\u0442\u044c \u0434\u043b\u044f \u0434\u0430\u043b\u044c\u043d\u0435\u0439\u0448\u0435\u0439 \u043e\u0431\u0440\u0430\u0431\u043e\u0442\u043a\u0438. \u0414\u0430\u0432\u0430\u0439\u0442\u0435 \u0440\u0430\u0441\u0441\u043c\u043e\u0442\u0440\u0438\u043c \u0438\u0445:</p> <ul> <li><code>MessageUpdate</code> -&gt; <code>message.text</code></li> <li><code>EditedMessageUpdate</code> -&gt; <code>editedMessage.text</code></li> <li><code>ChannelPostUpdate</code> -&gt; <code>channelPost.text</code></li> <li><code>EditedChannelPostUpdate</code> -&gt; <code>editedChannelPost.text</code></li> <li><code>InlineQueryUpdate</code> -&gt; <code>inlineQuery.query</code></li> <li><code>ChosenInlineResultUpdate</code> -&gt; <code>chosenInlineResult.query</code></li> <li><code>CallbackQueryUpdate</code> -&gt; <code>callbackQuery.data</code></li> <li><code>ShippingQueryUpdate</code> -&gt; <code>shippingQuery.invoicePayload</code></li> <li><code>PreCheckoutQueryUpdate</code> -&gt; <code>preCheckoutQuery.invoicePayload</code></li> <li><code>PollUpdate</code> -&gt; <code>poll.question</code></li> <li><code>PurchasedPaidMediaUpdate</code> -&gt; <code>purchasedPaidMedia.paidMediaPayload</code></li> </ul> <p>\u0418\u0437 \u043f\u0435\u0440\u0435\u0447\u0438\u0441\u043b\u0435\u043d\u043d\u044b\u0445 \u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0439 \u0432\u044b\u0431\u0438\u0440\u0430\u0435\u0442\u0441\u044f \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u0435\u043d\u043d\u044b\u0439 \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440 \u0438 \u043f\u0440\u0438\u043d\u0438\u043c\u0430\u0435\u0442\u0441\u044f \u0432 \u043a\u0430\u0447\u0435\u0441\u0442\u0432\u0435 <code>TextReference</code> \u0434\u043b\u044f \u0434\u0430\u043b\u044c\u043d\u0435\u0439\u0448\u0435\u0433\u043e \u0440\u0430\u0437\u0431\u043e\u0440\u0430.</p>"},{"location":"ru/Update-parsing/#_2","title":"\u0420\u0430\u0437\u0431\u043e\u0440","text":"<p>\u0412\u044b\u0431\u0440\u0430\u043d\u043d\u044b\u0435 \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b \u0440\u0430\u0437\u0431\u0438\u0440\u0430\u044e\u0442\u0441\u044f \u0441 \u043f\u043e\u043c\u043e\u0449\u044c\u044e \u0441\u043e\u043e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0443\u044e\u0449\u0438\u0445 \u043d\u0430\u0441\u0442\u0440\u043e\u0435\u043d\u043d\u044b\u0445 \u0440\u0430\u0437\u0434\u0435\u043b\u0438\u0442\u0435\u043b\u0435\u0439 \u043d\u0430 \u043a\u043e\u043c\u0430\u043d\u0434\u0443 \u0438 \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b \u043a \u043d\u0435\u0439.</p> <p>\u0421\u043c. \u0431\u043b\u043e\u043a \u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u0438 <code>commandParsing</code>.</p> <p>\u0412\u044b \u043c\u043e\u0436\u0435\u0442\u0435 \u0443\u0432\u0438\u0434\u0435\u0442\u044c \u043d\u0430 \u0434\u0438\u0430\u0433\u0440\u0430\u043c\u043c\u0435 \u043d\u0438\u0436\u0435, \u043a\u0430\u043a\u0438\u0435 \u043a\u043e\u043c\u043f\u043e\u043d\u0435\u043d\u0442\u044b \u0441\u043e\u043f\u043e\u0441\u0442\u0430\u0432\u043b\u044f\u044e\u0442\u0441\u044f \u0441 \u043a\u0430\u043a\u0438\u043c\u0438 \u0447\u0430\u0441\u0442\u044f\u043c\u0438 \u0446\u0435\u043b\u0435\u0432\u043e\u0439 \u0444\u0443\u043d\u043a\u0446\u0438\u0438.</p> <p> </p>"},{"location":"ru/Update-parsing/#parammapping","title":"@ParamMapping","text":"<p>\u0422\u0430\u043a\u0436\u0435 \u0441\u0443\u0449\u0435\u0441\u0442\u0432\u0443\u0435\u0442 \u0430\u043d\u043d\u043e\u0442\u0430\u0446\u0438\u044f \u043f\u043e\u0434 \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u0435\u043c <code>@ParamMapping</code> \u0434\u043b\u044f \u0443\u0434\u043e\u0431\u0441\u0442\u0432\u0430 \u0438\u043b\u0438 \u0434\u043b\u044f \u043b\u044e\u0431\u043e\u0433\u043e \u0441\u043f\u0435\u0446\u0438\u0430\u043b\u044c\u043d\u043e\u0433\u043e \u0441\u043b\u0443\u0447\u0430\u044f.</p> <p>\u041e\u043d\u0430 \u043f\u043e\u0437\u0432\u043e\u043b\u044f\u0435\u0442 \u0441\u043e\u043f\u043e\u0441\u0442\u0430\u0432\u0438\u0442\u044c \u0438\u043c\u044f \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u0430 \u0438\u0437 \u0432\u0445\u043e\u0434\u044f\u0449\u0435\u0433\u043e \u0442\u0435\u043a\u0441\u0442\u0430 \u0441 \u043b\u044e\u0431\u044b\u043c \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u043e\u043c.</p> <p>\u042d\u0442\u043e \u0442\u0430\u043a\u0436\u0435 \u0443\u0434\u043e\u0431\u043d\u043e, \u043a\u043e\u0433\u0434\u0430 \u0432\u0430\u0448\u0438 \u0432\u0445\u043e\u0434\u044f\u0449\u0438\u0435 \u0434\u0430\u043d\u043d\u044b\u0435 \u043e\u0433\u0440\u0430\u043d\u0438\u0447\u0435\u043d\u044b, \u043d\u0430\u043f\u0440\u0438\u043c\u0435\u0440, <code>CallbackData</code> (64 \u0441\u0438\u043c\u0432\u043e\u043b\u0430).</p> <p>\u0421\u043c. \u043f\u0440\u0438\u043c\u0435\u0440 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u044f: <code>greeting?name=Adam</code></p> <pre><code>@CommandHandler([\"greeting\"])\nsuspend fun greeting(@ParamMapping(\"name\") anyParameterName: String, user: User, bot: TelegramBot) {\n    message { \"Hello, $anyParameterName\" }.send(to = user, via = bot)\n}\n</code></pre> <p>\u0410 \u0442\u0430\u043a\u0436\u0435 \u043e\u043d\u0430 \u043c\u043e\u0436\u0435\u0442 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c\u0441\u044f \u0434\u043b\u044f \u043f\u0435\u0440\u0435\u0445\u0432\u0430\u0442\u0430 \u0431\u0435\u0437\u044b\u043c\u044f\u043d\u043d\u044b\u0445 \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u043e\u0432 \u0432 \u0441\u043b\u0443\u0447\u0430\u044f\u0445, \u043a\u043e\u0433\u0434\u0430 \u043f\u0430\u0440\u0441\u0435\u0440 \u043d\u0430\u0441\u0442\u0440\u043e\u0435\u043d \u0442\u0430\u043a\u0438\u043c \u043e\u0431\u0440\u0430\u0437\u043e\u043c, \u0447\u0442\u043e \u0438\u043c\u0435\u043d\u0430 \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u043e\u0432 \u043f\u0440\u043e\u043f\u0443\u0441\u043a\u0430\u044e\u0442\u0441\u044f \u0438\u043b\u0438 \u0434\u0430\u0436\u0435 \u043e\u0442\u0441\u0443\u0442\u0441\u0442\u0432\u0443\u044e\u0442, \u0447\u0442\u043e \u043f\u0435\u0440\u0435\u0434\u0430\u0435\u0442\u0441\u044f \u043f\u043e \u0448\u0430\u0431\u043b\u043e\u043d\u0443 'param_n', \u0433\u0434\u0435 <code>n</code> \u2014 \u0435\u0433\u043e \u043f\u043e\u0440\u044f\u0434\u043a\u043e\u0432\u044b\u0439 \u043d\u043e\u043c\u0435\u0440.</p> <p>\u041d\u0430\u043f\u0440\u0438\u043c\u0435\u0440, \u0442\u0430\u043a\u043e\u0439 \u0442\u0435\u043a\u0441\u0442 - <code>myCommand?p1=v1&amp;v2&amp;p3=&amp;p4=v4&amp;p5=</code>, \u0431\u0443\u0434\u0435\u0442 \u0440\u0430\u0437\u043e\u0431\u0440\u0430\u043d \u043d\u0430: * \u043a\u043e\u043c\u0430\u043d\u0434\u0430 - <code>myCommand</code> * \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b   * <code>p1</code> = <code>v1</code>   * <code>param_2</code> = <code>v2</code>   * <code>p3</code> = <code>* `p4` = `v4`   * `p5` =</code></p> <p>\u041a\u0430\u043a \u0432\u044b \u043c\u043e\u0436\u0435\u0442\u0435 \u0432\u0438\u0434\u0435\u0442\u044c, \u043f\u043e\u0441\u043a\u043e\u043b\u044c\u043a\u0443 \u0443 \u0432\u0442\u043e\u0440\u043e\u0433\u043e \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u0430 \u043d\u0435\u0442 \u043e\u0431\u044a\u044f\u0432\u043b\u0435\u043d\u043d\u043e\u0433\u043e \u0438\u043c\u0435\u043d\u0438, \u043e\u043d \u043f\u0440\u0435\u0434\u0441\u0442\u0430\u0432\u043b\u0435\u043d \u043a\u0430\u043a <code>param_2</code>.</p> <p>\u0422\u0430\u043a\u0438\u043c \u043e\u0431\u0440\u0430\u0437\u043e\u043c, \u0432\u044b \u043c\u043e\u0436\u0435\u0442\u0435 \u0441\u043e\u043a\u0440\u0430\u0442\u0438\u0442\u044c \u0438\u043c\u0435\u043d\u0430 \u043f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u044b\u0445 \u0432 \u043e\u0431\u0440\u0430\u0442\u043d\u043e\u043c \u0432\u044b\u0437\u043e\u0432\u0435 \u0438 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c \u043f\u043e\u043d\u044f\u0442\u043d\u044b\u0435 \u0447\u0438\u0442\u0430\u0435\u043c\u044b\u0435 \u0438\u043c\u0435\u043d\u0430 \u0432 \u043a\u043e\u0434\u0435.</p>"},{"location":"ru/Update-parsing/#_3","title":"\u0413\u043b\u0443\u0431\u043e\u043a\u0438\u0435 \u0441\u0441\u044b\u043b\u043a\u0438","text":"<p>\u0423\u0447\u0438\u0442\u044b\u0432\u0430\u044f \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044e \u0432\u044b\u0448\u0435, \u0435\u0441\u043b\u0438 \u0432\u044b \u043e\u0436\u0438\u0434\u0430\u0435\u0442\u0435 \u0433\u043b\u0443\u0431\u043e\u043a\u0443\u044e \u0441\u0441\u044b\u043b\u043a\u0443 \u0432 \u0432\u0430\u0448\u0435\u0439 \u043a\u043e\u043c\u0430\u043d\u0434\u0435 start, \u0432\u044b \u043c\u043e\u0436\u0435\u0442\u0435 \u043f\u0435\u0440\u0435\u0445\u0432\u0430\u0442\u0438\u0442\u044c \u0435\u0435 \u0441 \u043f\u043e\u043c\u043e\u0449\u044c\u044e:</p> <pre><code>@CommandHandler([\"/start\"])\nsuspend fun start(@ParamMapping(\"param_1\") deeplink: String?, user: User, bot: TelegramBot) {\n    message { \"deeplink is $deeplink\" }.send(to = user, via = bot)\n}\n</code></pre>"},{"location":"ru/Update-parsing/#_4","title":"\u041a\u043e\u043c\u0430\u043d\u0434\u044b \u0432 \u0433\u0440\u0443\u043f\u043f\u0430\u0445","text":"<p>\u0412 \u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u0438 <code>commandParsing</code> \u0443 \u043d\u0430\u0441 \u0435\u0441\u0442\u044c \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440 <code>useIdentifierInGroupCommands</code>. \u041a\u043e\u0433\u0434\u0430 \u043e\u043d \u0432\u043a\u043b\u044e\u0447\u0435\u043d, \u043c\u044b \u043c\u043e\u0436\u0435\u043c \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c <code>TelegramBot.identifier</code> (\u043d\u0435 \u0437\u0430\u0431\u0443\u0434\u044c\u0442\u0435 \u0438\u0437\u043c\u0435\u043d\u0438\u0442\u044c \u0435\u0433\u043e, \u0435\u0441\u043b\u0438 \u0432\u044b \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u0442\u0435 \u043e\u043f\u0438\u0441\u0430\u043d\u043d\u044b\u0439 \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440) \u0432 \u043f\u0440\u043e\u0446\u0435\u0441\u0441\u0435 \u0441\u043e\u043f\u043e\u0441\u0442\u0430\u0432\u043b\u0435\u043d\u0438\u044f \u043a\u043e\u043c\u0430\u043d\u0434. \u042d\u0442\u043e \u043f\u043e\u043c\u043e\u0433\u0430\u0435\u0442 \u0440\u0430\u0437\u0434\u0435\u043b\u044f\u0442\u044c \u043f\u043e\u0445\u043e\u0436\u0438\u0435 \u043a\u043e\u043c\u0430\u043d\u0434\u044b \u043c\u0435\u0436\u0434\u0443 \u043d\u0435\u0441\u043a\u043e\u043b\u044c\u043a\u0438\u043c\u0438 \u0431\u043e\u0442\u0430\u043c\u0438, \u0432 \u043f\u0440\u043e\u0442\u0438\u0432\u043d\u043e\u043c \u0441\u043b\u0443\u0447\u0430\u0435 \u0447\u0430\u0441\u0442\u044c <code>@MyBot</code> \u043f\u0440\u043e\u0441\u0442\u043e \u0431\u0443\u0434\u0435\u0442 \u043f\u0440\u043e\u043f\u0443\u0449\u0435\u043d\u0430.</p>"},{"location":"ru/Update-parsing/#_5","title":"\u0421\u043c. \u0442\u0430\u043a\u0436\u0435","text":"<ul> <li>\u0412\u044b\u0437\u043e\u0432 \u0430\u043a\u0442\u0438\u0432\u043d\u043e\u0441\u0442\u0438</li> <li>\u0410\u043a\u0442\u0438\u0432\u043d\u043e\u0441\u0442\u0438 \u0438 \u043f\u0440\u043e\u0446\u0435\u0441\u0441\u043e\u0440\u044b</li> <li>\u0414\u0435\u0439\u0441\u0442\u0432\u0438\u044f</li> </ul>"},{"location":"ru/Useful-utilities-and-tips/","title":"\u041f\u043e\u043b\u0435\u0437\u043d\u044b\u0435 \u0443\u0442\u0438\u043b\u0438\u0442\u044b \u0438 \u0441\u043e\u0432\u0435\u0442\u044b","text":""},{"location":"ru/Useful-utilities-and-tips/#processedupdate","title":"\u0420\u0430\u0431\u043e\u0442\u0430 \u0441 ProcessedUpdate","text":"<p><code>ProcessedUpdate</code> \u2014 \u044d\u0442\u043e \u043e\u0431\u043e\u0431\u0449\u0435\u043d\u043d\u044b\u0439 \u043a\u043b\u0430\u0441\u0441 \u0434\u043b\u044f \u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0439, \u043a\u043e\u0442\u043e\u0440\u044b\u0439 \u0432 \u0437\u0430\u0432\u0438\u0441\u0438\u043c\u043e\u0441\u0442\u0438 \u043e\u0442 \u0438\u0441\u0445\u043e\u0434\u043d\u044b\u0445 \u0434\u0430\u043d\u043d\u044b\u0445 \u043c\u043e\u0436\u0435\u0442 \u043f\u0440\u0435\u0434\u043e\u0441\u0442\u0430\u0432\u043b\u044f\u0442\u044c\u0441\u044f \u0432 \u0440\u0430\u0437\u043d\u044b\u0445 \u0442\u0438\u043f\u0430\u0445 (<code>MessageUpdate</code>, <code>CallbackQueryUpdate</code> \u0438 \u0442. \u0434.)</p> <p>\u0422\u0430\u043a\u0438\u043c \u043e\u0431\u0440\u0430\u0437\u043e\u043c \u0432\u044b \u043c\u043e\u0436\u0435\u0442\u0435 \u043f\u0440\u043e\u0432\u0435\u0440\u044f\u0442\u044c \u0442\u0438\u043f \u0432\u0445\u043e\u0434\u044f\u0449\u0438\u0445 \u0434\u0430\u043d\u043d\u044b\u0445 \u0438 \u0434\u0430\u043b\u044c\u0448\u0435 \u043c\u0430\u043d\u0438\u043f\u0443\u043b\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u0435\u043d\u043d\u044b\u043c\u0438 \u0434\u0430\u043d\u043d\u044b\u043c\u0438 \u0441 \u043f\u043e\u043c\u043e\u0449\u044c\u044e smartcasts, \u043d\u0430\u043f\u0440\u0438\u043c\u0435\u0440:</p> <pre><code>// ...\nif (update !is MessageUpdate) {\n    message { \"Only messages are allowed\" }.send(user, bot)\n    return\n}\n// \u0414\u0430\u043b\u0435\u0435 ProcessedUpdate \u0431\u0443\u0434\u0435\u0442 \u0432\u043e\u0441\u043f\u0440\u0438\u043d\u0438\u043c\u0430\u0442\u044c\u0441\u044f \u043a\u0430\u043a MessageUpdate.\n</code></pre> <p>\u0422\u0430\u043a\u0436\u0435 \u0432\u043d\u0443\u0442\u0440\u0438 \u0435\u0441\u0442\u044c \u0438\u043d\u0442\u0435\u0440\u0444\u0435\u0439\u0441 <code>UserReference</code>, \u043a\u043e\u0442\u043e\u0440\u044b\u0439 \u043f\u043e\u0437\u0432\u043e\u043b\u044f\u0435\u0442 \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u0438\u0442\u044c, \u0435\u0441\u0442\u044c \u043b\u0438 \u0432\u043d\u0443\u0442\u0440\u0438 \u0441\u0441\u044b\u043b\u043a\u0430 \u043d\u0430 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f, \u043f\u0440\u0438\u043c\u0435\u0440 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u044f:</p> <pre><code>val user = if(update is UserReference) update.user else null\n</code></pre> <p>\u041f\u0440\u0438 \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e\u0441\u0442\u0438 \u0432\u043d\u0443\u0442\u0440\u0438 \u0432\u0441\u0435\u0433\u0434\u0430 \u0435\u0441\u0442\u044c \u043e\u0440\u0438\u0433\u0438\u043d\u0430\u043b\u044c\u043d\u044b\u0439 <code>update</code> \u0432 \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u0435 update.</p>"},{"location":"ru/Useful-utilities-and-tips/#_1","title":"\u0412\u043d\u0435\u0434\u0440\u0435\u043d\u0438\u0435 \u0437\u0430\u0432\u0438\u0441\u0438\u043c\u043e\u0441\u0442\u0435\u0439","text":"<p>\u0411\u0438\u0431\u043b\u0438\u043e\u0442\u0435\u043a\u0430 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u0442 \u043f\u0440\u043e\u0441\u0442\u043e\u0439 \u043c\u0435\u0445\u0430\u043d\u0438\u0437\u043c \u0434\u043b\u044f \u0438\u043d\u0438\u0446\u0438\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u0438 \u043a\u043b\u0430\u0441\u0441\u043e\u0432, \u0433\u0434\u0435 \u0432\u0430\u0448\u0438 \u043c\u0435\u0442\u043e\u0434\u044b \u043e\u0431\u0440\u0430\u0431\u043e\u0442\u043a\u0438 \u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0439 \u0430\u043d\u043d\u043e\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u044b \u043f\u0440\u0435\u0434\u043e\u0441\u0442\u0430\u0432\u043b\u0435\u043d\u043d\u044b\u043c\u0438 \u0430\u043d\u043d\u043e\u0442\u0430\u0446\u0438\u044f\u043c\u0438.</p> <p><code>ClassManagerImpl</code> \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u0442\u0441\u044f \u043f\u043e \u0443\u043c\u043e\u043b\u0447\u0430\u043d\u0438\u044e \u0434\u043b\u044f \u0432\u044b\u0437\u043e\u0432\u0430 \u0430\u043d\u043d\u043e\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u043d\u044b\u0445 \u043c\u0435\u0442\u043e\u0434\u043e\u0432.</p> <p>\u041d\u043e \u0435\u0441\u043b\u0438 \u0432\u044b \u0445\u043e\u0442\u0438\u0442\u0435 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c \u0434\u0440\u0443\u0433\u0438\u0435 \u0431\u0438\u0431\u043b\u0438\u043e\u0442\u0435\u043a\u0438 \u0434\u043b\u044f \u044d\u0442\u043e\u0433\u043e, \u0432\u044b \u043c\u043e\u0436\u0435\u0442\u0435 \u043f\u0435\u0440\u0435\u043e\u043f\u0440\u0435\u0434\u0435\u043b\u0438\u0442\u044c \u0438\u043d\u0442\u0435\u0440\u0444\u0435\u0439\u0441 <code>ClassManager</code>, \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u044f \u0432\u0430\u0448 \u043f\u0440\u0435\u0434\u043f\u043e\u0447\u0438\u0442\u0430\u0435\u043c\u044b\u0439 \u043c\u0435\u0445\u0430\u043d\u0438\u0437\u043c \u0438 \u043f\u0435\u0440\u0435\u0434\u0430\u0442\u044c \u0435\u0433\u043e \u043f\u0440\u0438 \u0438\u043d\u0438\u0446\u0438\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u0438 \u0431\u043e\u0442\u0430.</p> <pre><code>fun main() = runBlocking {\n    val bot = TelegramBot(\"BOT_TOKEN\", \"com.example.controllers\") {\n        classManager = ClassManagerImpl()\n    }\n\n    bot.handleUpdates()\n}\n</code></pre>"},{"location":"ru/Useful-utilities-and-tips/#_2","title":"\u0424\u0438\u043b\u044c\u0442\u0440\u0430\u0446\u0438\u044f \u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0439","text":"<p>\u0415\u0441\u043b\u0438 \u043d\u0435\u0442 \u0441\u043b\u043e\u0436\u043d\u044b\u0445 \u0443\u0441\u043b\u043e\u0432\u0438\u0439, \u0432\u044b \u043c\u043e\u0436\u0435\u0442\u0435 \u043f\u0440\u043e\u0441\u0442\u043e \u043e\u0442\u0444\u0438\u043b\u044c\u0442\u0440\u043e\u0432\u0430\u0442\u044c \u043d\u0435\u043a\u043e\u0442\u043e\u0440\u044b\u0435 \u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u044f \u0434\u043b\u044f \u043e\u0431\u0440\u0430\u0431\u043e\u0442\u043a\u0438:</p> <pre><code>// \u0444\u0443\u043d\u043a\u0446\u0438\u044f \u0433\u0434\u0435 \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u0435\u043d\u043e \u0443\u0441\u043b\u043e\u0432\u0438\u0435 \u0444\u0438\u043b\u044c\u0442\u0440\u0430\u0446\u0438\u0438 \u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0439\nfun filteringFun(update: Update): Boolean = update.message?.text.isNullOrBlank()\n\nfun main() = runBlocking {\n  val bot = TelegramBot(\"BOT_TOKEN\")\n\n  // \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u043a\u0430 \u0431\u043e\u043b\u0435\u0435 \u0441\u043f\u0435\u0446\u0438\u0444\u0438\u0447\u043d\u043e\u0433\u043e \u043f\u043e\u0442\u043e\u043a\u0430 \u043e\u0431\u0440\u0430\u0431\u043e\u0442\u043a\u0438 \u0434\u043b\u044f \u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0439\n  bot.update.setListener {\n    if(filteringFun(it)) return@setListener\n\n    // \u0442\u0430\u043a \u043f\u0440\u043e\u0441\u0442\u043e, \u0435\u0441\u043b\u0438 \u0441\u043b\u0443\u0448\u0430\u0442\u0435\u043b\u044c \u043f\u043e\u043a\u0438\u043d\u0443\u043b \u043e\u0431\u043b\u0430\u0441\u0442\u044c \u0432\u0438\u0434\u0438\u043c\u043e\u0441\u0442\u0438 \u0434\u043e \u0434\u043e\u0441\u0442\u0438\u0436\u0435\u043d\u0438\u044f \u0444\u0443\u043d\u043a\u0446\u0438\u0438 \u043e\u0431\u0440\u0430\u0431\u043e\u0442\u0447\u0438\u043a\u0430, \u0442\u043e \u044d\u0442\u043e \u0444\u0438\u043b\u044c\u0442\u0440\u0430\u0446\u0438\u044f.\n    // \u043d\u0430 \u0441\u0430\u043c\u043e\u043c \u0434\u0435\u043b\u0435 \u0432\u044b \u043c\u043e\u0436\u0435\u0442\u0435 \u0434\u0430\u0436\u0435 \u043d\u0430\u043f\u0438\u0441\u0430\u0442\u044c \u0443\u0441\u043b\u043e\u0432\u0438\u0435 if \u043f\u0440\u044f\u043c\u043e \u0442\u0430\u043c \u0441 return@setListener \u0438\u043b\u0438 \u0440\u0430\u0441\u0448\u0438\u0440\u0438\u0442\u044c \u0444\u0438\u043b\u044c\u0442\u0440\u0430\u0446\u0438\u044e \u0432 \u043e\u0442\u0434\u0435\u043b\u044c\u043d\u044b\u0439 \u043a\u043b\u0430\u0441\u0441.\n\n    handle(it) // \u0438\u043b\u0438 \u0440\u0443\u0447\u043d\u043e\u0439 \u0441\u043f\u043e\u0441\u043e\u0431 \u043e\u0431\u0440\u0430\u0431\u043e\u0442\u043a\u0438 \u0441 \u0431\u043b\u043e\u043a\u043e\u043c\n  }\n}\n</code></pre> <p>\u0447\u0442\u043e\u0431\u044b \u0432\u043a\u043b\u044e\u0447\u0438\u0442\u044c \u0444\u0438\u043b\u044c\u0442\u0440\u0430\u0446\u0438\u044e \u0432 \u0432\u0430\u0448 \u043f\u0440\u043e\u0446\u0435\u0441\u0441 \u0441\u043e\u043f\u043e\u0441\u0442\u0430\u0432\u043b\u0435\u043d\u0438\u044f \u0438\u043b\u0438 \u0438\u0441\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u044f \u043a\u043e\u043c\u0430\u043d\u0434, \u0432\u0437\u0433\u043b\u044f\u043d\u0438\u0442\u0435 \u043d\u0430 guards \u0438\u043b\u0438 <code>@CommonHandler</code>.</p>"},{"location":"ru/Useful-utilities-and-tips/#_3","title":"\u041e\u0431\u043e\u0431\u0449\u0435\u043d\u0438\u0435 \u043e\u043f\u0446\u0438\u0439 \u0434\u043b\u044f \u0440\u0430\u0437\u043d\u044b\u0445 \u043c\u0435\u0442\u043e\u0434\u043e\u0432","text":"<p>\u0415\u0441\u043b\u0438 \u0432\u0430\u043c \u0447\u0430\u0441\u0442\u043e \u043f\u0440\u0438\u0445\u043e\u0434\u0438\u0442\u0441\u044f \u043f\u0440\u0438\u043c\u0435\u043d\u044f\u0442\u044c \u043e\u0434\u043d\u0438 \u0438 \u0442\u0435 \u0436\u0435 \u043d\u0435\u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u044b\u0435 \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b, \u0432\u044b \u043c\u043e\u0436\u0435\u0442\u0435 \u043d\u0430\u043f\u0438\u0441\u0430\u0442\u044c \u043f\u043e\u0445\u043e\u0436\u0443\u044e \u0444\u0443\u043d\u043a\u0446\u0438\u044e, \u043a\u043e\u0442\u043e\u0440\u0430\u044f \u0432\u0430\u043c \u043f\u043e\u0434\u0445\u043e\u0434\u0438\u0442, \u0438 \u043e\u0431\u043b\u0435\u0433\u0447\u0438\u0442\u044c \u043a\u043e\u0434-\u0431\u043e\u043b\u0435\u0440\u043f\u043b\u0435\u0439\u0442 :)</p> <p>\u041d\u0435\u043a\u043e\u0442\u043e\u0440\u044b\u0435 \u043e\u0431\u0449\u0438\u0435 \u0441\u0432\u043e\u0439\u0441\u0442\u0432\u0430 \u0440\u0430\u0437\u0434\u0435\u043b\u0435\u043d\u044b \u043d\u0430 \u0440\u0430\u0437\u043d\u044b\u0435 \u0438\u043d\u0442\u0435\u0440\u0444\u0435\u0439\u0441\u044b.</p> <pre><code>@Suppress(\"NOTHING_TO_INLINE\")\ninline fun &lt;T, R, O&gt; T.markdownMode(crossinline block: O.() -&gt; Unit = {}): T\n        where               T : TgAction&lt;R&gt;,\n                            T : OptionsFeature&lt;T, O&gt;,\n                            O : Options,\n                            O : OptionsParseMode =\n    options {\n        parseMode = ParseMode.Markdown\n        block()\n    }\n\n\n// ... \u0438 \u0432 \u0432\u0430\u0448\u0435\u043c \u043a\u043e\u0434\u0435\n\nmessage { \"test\" }.markdownMode().send(to, via)\n</code></pre>"},{"location":"ru/Web-starters-%28Spring-and-Ktor%29/","title":"\u0412\u0435\u0431-\u0441\u0442\u0430\u0440\u0442\u0435\u0440\u044b (Spring \u0438 Ktor)","text":""},{"location":"ru/Web-starters-%28Spring-and-Ktor%29/#spring","title":"Spring \u0441\u0442\u0430\u0440\u0442\u0435\u0440","text":"<p>\u041c\u043e\u0434\u0443\u043b\u044c Spring Starter \u0434\u043b\u044f \u0431\u0438\u0431\u043b\u0438\u043e\u0442\u0435\u043a\u0438 \u2014 \u044d\u0442\u043e \u043c\u043e\u0434\u0443\u043b\u044c \u0430\u0432\u0442\u043e\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u043e\u0439 \u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u0438, \u043a\u043e\u0442\u043e\u0440\u044b\u0439 \u0438\u043d\u0442\u0435\u0433\u0440\u0438\u0440\u0443\u0435\u0442 \u0444\u0443\u043d\u043a\u0446\u0438\u043e\u043d\u0430\u043b\u044c\u043d\u043e\u0441\u0442\u044c Telegram \u0431\u043e\u0442\u043e\u0432 \u0432 Spring Boot \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u044f. \u041e\u043d \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u0442 \u043c\u043e\u0449\u044c \u0432\u043d\u0435\u0434\u0440\u0435\u043d\u0438\u044f \u0437\u0430\u0432\u0438\u0441\u0438\u043c\u043e\u0441\u0442\u0435\u0439 Spring Boot \u0438 \u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u043e\u043d\u043d\u044b\u0445 \u0441\u0432\u043e\u0439\u0441\u0442\u0432 \u0434\u043b\u044f \u0430\u0432\u0442\u043e\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u043e\u0439 \u043d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438 Telegram \u0431\u043e\u0442\u043e\u0432 \u043d\u0430 \u043e\u0441\u043d\u043e\u0432\u0435 \u043f\u0440\u0435\u0434\u043e\u0441\u0442\u0430\u0432\u043b\u0435\u043d\u043d\u043e\u0439 \u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u0438. \u042d\u0442\u0430 \u0431\u0438\u0431\u043b\u0438\u043e\u0442\u0435\u043a\u0430 \u043e\u0441\u043e\u0431\u0435\u043d\u043d\u043e \u043f\u043e\u043b\u0435\u0437\u043d\u0430 \u0434\u043b\u044f \u0440\u0430\u0437\u0440\u0430\u0431\u043e\u0442\u0447\u0438\u043a\u043e\u0432, \u043a\u043e\u0442\u043e\u0440\u044b\u0435 \u0445\u043e\u0442\u044f\u0442 \u0441\u043e\u0437\u0434\u0430\u0432\u0430\u0442\u044c Telegram \u0431\u043e\u0442\u043e\u0432 \u0441 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u0435\u043c Kotlin \u0438 Spring Boot, \u043f\u0440\u0435\u0434\u043b\u0430\u0433\u0430\u044f \u0443\u043f\u0440\u043e\u0449\u0435\u043d\u043d\u044b\u0439 \u043f\u043e\u0434\u0445\u043e\u0434 \u043a \u0440\u0430\u0437\u0440\u0430\u0431\u043e\u0442\u043a\u0435 \u0438 \u0443\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u0438\u044e \u0431\u043e\u0442\u0430\u043c\u0438.</p>"},{"location":"ru/Web-starters-%28Spring-and-Ktor%29/#_1","title":"\u041a\u043b\u044e\u0447\u0435\u0432\u044b\u0435 \u0432\u043e\u0437\u043c\u043e\u0436\u043d\u043e\u0441\u0442\u0438","text":"<ul> <li>\u0410\u0432\u0442\u043e-\u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u044f: \u0411\u0438\u0431\u043b\u0438\u043e\u0442\u0435\u043a\u0430 \u0430\u0432\u0442\u043e\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u0438 \u043d\u0430\u0441\u0442\u0440\u0430\u0438\u0432\u0430\u0435\u0442 Telegram \u0431\u043e\u0442\u043e\u0432 \u043d\u0430 \u043e\u0441\u043d\u043e\u0432\u0435 \u043f\u0440\u0435\u0434\u043e\u0441\u0442\u0430\u0432\u043b\u0435\u043d\u043d\u044b\u0445 \u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u043e\u043d\u043d\u044b\u0445 \u0441\u0432\u043e\u0439\u0441\u0442\u0432, \u0443\u0441\u0442\u0440\u0430\u043d\u044f\u044f \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e\u0441\u0442\u044c \u0432 \u0440\u0443\u0447\u043d\u043e\u0439 \u043d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0435.</li> <li>\u041a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u043e\u043d\u043d\u044b\u0435 \u0441\u0432\u043e\u0439\u0441\u0442\u0432\u0430: \u041f\u043e\u0434\u0434\u0435\u0440\u0436\u0438\u0432\u0430\u0435\u0442 \u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u043e\u043d\u043d\u044b\u0435 \u0441\u0432\u043e\u0439\u0441\u0442\u0432\u0430 \u0434\u043b\u044f \u043b\u0435\u0433\u043a\u043e\u0439 \u043d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438 \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u043e\u0432 \u0431\u043e\u0442\u043e\u0432, \u0442\u0430\u043a\u0438\u0445 \u043a\u0430\u043a \u0442\u043e\u043a\u0435\u043d\u044b \u0431\u043e\u0442\u043e\u0432, \u0438\u043c\u0435\u043d\u0430 \u043f\u0430\u043a\u0435\u0442\u043e\u0432 \u0438 \u0438\u0434\u0435\u043d\u0442\u0438\u0444\u0438\u043a\u0430\u0442\u043e\u0440\u044b.</li> <li>\u0418\u043d\u0442\u0435\u0433\u0440\u0430\u0446\u0438\u044f \u0441 Spring: \u0411\u0435\u0441\u0448\u043e\u0432\u043d\u043e \u0438\u043d\u0442\u0435\u0433\u0440\u0438\u0440\u0443\u0435\u0442\u0441\u044f \u0441 \u044d\u043a\u043e\u0441\u0438\u0441\u0442\u0435\u043c\u043e\u0439 Spring, \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u044f \u0432\u043d\u0435\u0434\u0440\u0435\u043d\u0438\u0435 \u0437\u0430\u0432\u0438\u0441\u0438\u043c\u043e\u0441\u0442\u0435\u0439 Spring \u0438 \u043a\u043e\u043d\u0442\u0435\u043a\u0441\u0442 \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u044f \u0434\u043b\u044f \u0443\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u0438\u044f \u044d\u043a\u0437\u0435\u043c\u043f\u043b\u044f\u0440\u0430\u043c\u0438 \u0431\u043e\u0442\u043e\u0432.</li> <li>\u041f\u043e\u0434\u0434\u0435\u0440\u0436\u043a\u0430 \u0441\u043e\u043f\u0440\u043e\u0433\u0440\u0430\u043c\u043c: \u0418\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u0442 Kotlin \u0441\u043e\u043f\u0440\u043e\u0433\u0440\u0430\u043c\u043c\u044b \u0434\u043b\u044f \u0430\u0441\u0438\u043d\u0445\u0440\u043e\u043d\u043d\u044b\u0445 \u043e\u043f\u0435\u0440\u0430\u0446\u0438\u0439 \u0431\u043e\u0442\u043e\u0432, \u043e\u0431\u0435\u0441\u043f\u0435\u0447\u0438\u0432\u0430\u044f \u044d\u0444\u0444\u0435\u043a\u0442\u0438\u0432\u043d\u043e\u0435 \u0438 \u043d\u0435\u0431\u043b\u043e\u043a\u0438\u0440\u0443\u044e\u0449\u0435\u0435 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u0435.</li> </ul>"},{"location":"ru/Web-starters-%28Spring-and-Ktor%29/#_2","title":"\u041d\u0430\u0447\u0430\u043b\u043e \u0440\u0430\u0431\u043e\u0442\u044b","text":"<p>\u0414\u043b\u044f \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u044f \u0431\u0438\u0431\u043b\u0438\u043e\u0442\u0435\u043a\u0438 Spring Starter \u0434\u043b\u044f Telegram \u0431\u043e\u0442\u043e\u0432 \u0432\u0430\u043c \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0435\u0435 \u043a\u0430\u043a \u0437\u0430\u0432\u0438\u0441\u0438\u043c\u043e\u0441\u0442\u044c \u0432 \u0432\u0430\u0448 Spring Boot \u043f\u0440\u043e\u0435\u043a\u0442. \u0411\u0438\u0431\u043b\u0438\u043e\u0442\u0435\u043a\u0430 \u0440\u0430\u0437\u0440\u0430\u0431\u043e\u0442\u0430\u043d\u0430 \u0434\u043b\u044f \u0440\u0430\u0431\u043e\u0442\u044b \u0441 Spring Boot \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u044f\u043c\u0438 \u0438 \u0442\u0440\u0435\u0431\u0443\u0435\u0442 \u043d\u0430\u043b\u0438\u0447\u0438\u044f \u0444\u0440\u0435\u0439\u043c\u0432\u043e\u0440\u043a\u0430 Spring Boot \u0434\u043b\u044f \u0444\u0443\u043d\u043a\u0446\u0438\u043e\u043d\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u044f.</p>"},{"location":"ru/Web-starters-%28Spring-and-Ktor%29/#_3","title":"\u0417\u0430\u0432\u0438\u0441\u0438\u043c\u043e\u0441\u0442\u044c","text":"<p>\u0414\u043e\u0431\u0430\u0432\u044c\u0442\u0435 \u0441\u043b\u0435\u0434\u0443\u044e\u0449\u0443\u044e \u0437\u0430\u0432\u0438\u0441\u0438\u043c\u043e\u0441\u0442\u044c \u0432 \u0444\u0430\u0439\u043b <code>build.gradle</code> \u0438\u043b\u0438 <code>pom.xml</code>:</p> <pre><code>dependencies {\n    implementation 'eu.vendeli:spring-starter:&lt;version&gt;'\n}\n</code></pre> <p>\u0417\u0430\u043c\u0435\u043d\u0438\u0442\u0435 <code>&lt;version&gt;</code> \u043d\u0430 \u043f\u043e\u0441\u043b\u0435\u0434\u043d\u044e\u044e \u0432\u0435\u0440\u0441\u0438\u044e \u0431\u0438\u0431\u043b\u0438\u043e\u0442\u0435\u043a\u0438.</p>"},{"location":"ru/Web-starters-%28Spring-and-Ktor%29/#_4","title":"\u041a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u044f","text":"<p>\u0411\u0438\u0431\u043b\u0438\u043e\u0442\u0435\u043a\u0430 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u0442 <code>@ConfigurationProperties</code> Spring Boot \u0434\u043b\u044f \u043f\u0440\u0438\u0432\u044f\u0437\u043a\u0438 \u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u043e\u043d\u043d\u044b\u0445 \u0441\u0432\u043e\u0439\u0441\u0442\u0432. \u0412\u044b \u043c\u043e\u0436\u0435\u0442\u0435 \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u0438\u0442\u044c \u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u044e \u0441\u0432\u043e\u0438\u0445 \u0431\u043e\u0442\u043e\u0432 \u0432 \u0444\u0430\u0439\u043b\u0435 <code>application.properties</code> \u0438\u043b\u0438 <code>application.yml</code> \u0432\u0430\u0448\u0435\u0433\u043e Spring Boot \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u044f.</p> <pre><code>ktgram:\n autoStartPolling: true\n shareHttpClient: true\n bot:\n    - token: YOUR_BOT_TOKEN\n      pckg: com.example.bot\n      identifier: MyBot\n</code></pre>"},{"location":"ru/Web-starters-%28Spring-and-Ktor%29/#_5","title":"\u0418\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u0435","text":"<p>\u041f\u043e\u0441\u043b\u0435 \u0432\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u044f \u0438 \u043d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438 \u0431\u0438\u0431\u043b\u0438\u043e\u0442\u0435\u043a\u0438 \u043e\u043d\u0430 \u0430\u0432\u0442\u043e\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u0438 \u0441\u043e\u0437\u0434\u0430\u0435\u0442 \u0438 \u043d\u0430\u0441\u0442\u0440\u0430\u0438\u0432\u0430\u0435\u0442 \u044d\u043a\u0437\u0435\u043c\u043f\u043b\u044f\u0440\u044b Telegram \u0431\u043e\u0442\u043e\u0432 \u043d\u0430 \u043e\u0441\u043d\u043e\u0432\u0435 \u043f\u0440\u0435\u0434\u043e\u0441\u0442\u0430\u0432\u043b\u0435\u043d\u043d\u043e\u0439 \u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u0438.</p> <p>\u041e\u043d\u0430 \u0442\u0430\u043a\u0436\u0435 \u043f\u043e\u0434\u0434\u0435\u0440\u0436\u0438\u0432\u0430\u0435\u0442 \u043d\u0435\u0441\u043a\u043e\u043b\u044c\u043a\u043e \u044d\u043a\u0437\u0435\u043c\u043f\u043b\u044f\u0440\u043e\u0432 \u0431\u043e\u0442\u043e\u0432, \u0434\u043b\u044f \u0438\u043d\u0438\u0446\u0438\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u0438 \u043d\u0435\u0441\u043a\u043e\u043b\u044c\u043a\u0438\u0445 \u043f\u0440\u043e\u0441\u0442\u043e \u043e\u0431\u044a\u044f\u0432\u0438\u0442\u0435 \u0438\u0445 \u043a\u0430\u043a \u043d\u043e\u0432\u044b\u0435 \u0437\u0430\u043f\u0438\u0441\u0438 \u0432 \u0440\u0430\u0437\u0434\u0435\u043b\u0435 bot:</p> <pre><code>ktgram:\n bot:\n    - token: YOUR_BOT_TOKEN\n    - token: SECOND_BOT_TOKEN\n</code></pre>"},{"location":"ru/Web-starters-%28Spring-and-Ktor%29/#_6","title":"\u0420\u0430\u0441\u0448\u0438\u0440\u0435\u043d\u043d\u0430\u044f \u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u044f","text":"<p>\u0414\u043b\u044f \u0431\u043e\u043b\u0435\u0435 \u0440\u0430\u0441\u0448\u0438\u0440\u0435\u043d\u043d\u044b\u0445 \u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u0439, \u0442\u0430\u043a\u0438\u0445 \u043a\u0430\u043a \u043d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0430 \u043f\u043e\u0432\u0435\u0434\u0435\u043d\u0438\u044f \u0431\u043e\u0442\u043e\u0432 \u0438\u043b\u0438 \u0438\u043d\u0442\u0435\u0433\u0440\u0430\u0446\u0438\u044f \u0441 \u0434\u0440\u0443\u0433\u0438\u043c\u0438 \u043a\u043e\u043c\u043f\u043e\u043d\u0435\u043d\u0442\u0430\u043c\u0438 Spring, \u0432\u044b \u043c\u043e\u0436\u0435\u0442\u0435 \u0440\u0430\u0441\u0448\u0438\u0440\u0438\u0442\u044c \u043a\u043b\u0430\u0441\u0441 <code>BotConfiguration</code> \u0438 \u0438\u0437\u043c\u0435\u043d\u0438\u0442\u044c \u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u044e \u0431\u043e\u0442\u0430 \u0447\u0435\u0440\u0435\u0437 \u0435\u0433\u043e \u043c\u0435\u0442\u043e\u0434 <code>applyCfg</code>, \u0432\u044b \u043c\u043e\u0436\u0435\u0442\u0435 \u0443\u0432\u0438\u0434\u0435\u0442\u044c \u043f\u0440\u0438\u043c\u0435\u0440 \u0437\u0434\u0435\u0441\u044c.</p> <p>Tip</p> <p>\u0414\u043b\u044f \u043d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438 \u043a\u0430\u0436\u0434\u043e\u0433\u043e \u0438\u043d\u0438\u0446\u0438\u0430\u043b\u0438\u0437\u0438\u0440\u043e\u0432\u0430\u043d\u043d\u043e\u0433\u043e \u044d\u043a\u0437\u0435\u043c\u043f\u043b\u044f\u0440\u0430 \u0441 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c\u0441\u043a\u043e\u0439 \u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u0435\u0439 \u0440\u0430\u0437\u043b\u0438\u0447\u0430\u0439\u0442\u0435 \u0438\u0445 \u043f\u043e \u0438\u0434\u0435\u043d\u0442\u0438\u0444\u0438\u043a\u0430\u0442\u043e\u0440\u0443 (\u043a\u043b\u0430\u0441\u0441 BotConfiguration \u0442\u0430\u043a\u0436\u0435 \u0438\u043c\u0435\u0435\u0442 \u0438\u0434\u0435\u043d\u0442\u0438\u0444\u0438\u043a\u0430\u0442\u043e\u0440).</p>"},{"location":"ru/Web-starters-%28Spring-and-Ktor%29/#ktor","title":"Ktor","text":"<p>\u041c\u043e\u0434\u0443\u043b\u044c \u0440\u0430\u0437\u0440\u0430\u0431\u043e\u0442\u0430\u043d \u0434\u043b\u044f \u043e\u0431\u043b\u0435\u0433\u0447\u0435\u043d\u0438\u044f \u0441\u043e\u0437\u0434\u0430\u043d\u0438\u044f \u0432\u0435\u0431-\u0445\u0443\u043a\u0430 \u0441\u0435\u0440\u0432\u0435\u0440\u0430 \u0434\u043b\u044f Telegram \u0431\u043e\u0442\u043e\u0432. \u041e\u043d \u043f\u043e\u0437\u0432\u043e\u043b\u044f\u0435\u0442 \u0440\u0430\u0437\u0440\u0430\u0431\u043e\u0442\u0447\u0438\u043a\u0430\u043c \u043d\u0430\u0441\u0442\u0440\u0430\u0438\u0432\u0430\u0442\u044c \u0441\u0435\u0440\u0432\u0435\u0440, \u0432\u043a\u043b\u044e\u0447\u0430\u044f \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b SSL/TLS, \u0438 \u043e\u0431\u044a\u044f\u0432\u043b\u044f\u0442\u044c \u043d\u0435\u0441\u043a\u043e\u043b\u044c\u043a\u043e Telegram \u0431\u043e\u0442\u043e\u0432 \u0441 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c\u0441\u043a\u0438\u043c\u0438 \u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u044f\u043c\u0438. \u041f\u0440\u043e\u0446\u0435\u0441\u0441 \u043d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438 \u0433\u0438\u0431\u043a\u0438\u0439, \u043f\u043e\u0437\u0432\u043e\u043b\u044f\u044f \u0440\u0430\u0437\u0440\u0430\u0431\u043e\u0442\u0447\u0438\u043a\u0430\u043c \u0430\u0434\u0430\u043f\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u0441\u0435\u0440\u0432\u0435\u0440 \u043a \u0441\u0432\u043e\u0438\u043c \u043a\u043e\u043d\u043a\u0440\u0435\u0442\u043d\u044b\u043c \u043f\u043e\u0442\u0440\u0435\u0431\u043d\u043e\u0441\u0442\u044f\u043c.</p>"},{"location":"ru/Web-starters-%28Spring-and-Ktor%29/#_7","title":"\u0423\u0441\u0442\u0430\u043d\u043e\u0432\u043a\u0430","text":"<p>\u0414\u043b\u044f \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u043a\u0438 \u0441\u0442\u0430\u0440\u0442\u0435\u0440\u0430 ktor \u0434\u043e\u0431\u0430\u0432\u044c\u0442\u0435 \u0434\u043e\u043f\u043e\u043b\u043d\u0438\u0442\u0435\u043b\u044c\u043d\u043e \u043a \u043e\u0441\u043d\u043e\u0432\u043d\u043e\u0439 \u0437\u0430\u0432\u0438\u0441\u0438\u043c\u043e\u0441\u0442\u0438:</p> <pre><code>dependencies {\n    implementation(\"eu.vendeli:ktor-starter:x.y.z\") // \u0442\u0430\u043c\n    // \u0438\u0437\u043c\u0435\u043d\u0438\u0442\u0435 x.y.z \u043d\u0430 \u0442\u0435\u043a\u0443\u0449\u0443\u044e \u0432\u0435\u0440\u0441\u0438\u044e \u0431\u0438\u0431\u043b\u0438\u043e\u0442\u0435\u043a\u0438\n}\n</code></pre>"},{"location":"ru/Web-starters-%28Spring-and-Ktor%29/#_8","title":"\u041a\u043b\u044e\u0447\u0435\u0432\u044b\u0435 \u043a\u043e\u043c\u043f\u043e\u043d\u0435\u043d\u0442\u044b","text":"<p>\u0424\u0443\u043d\u043a\u0446\u0438\u044f <code>serveWebhook</code></p> <p>\u0424\u0443\u043d\u043a\u0446\u0438\u044f serveWebhook \u044f\u0432\u043b\u044f\u0435\u0442\u0441\u044f \u044f\u0434\u0440\u043e\u043c \u0431\u0438\u0431\u043b\u0438\u043e\u0442\u0435\u043a\u0438. \u041e\u043d\u0430 \u043d\u0430\u0441\u0442\u0440\u0430\u0438\u0432\u0430\u0435\u0442 \u0438 \u0437\u0430\u043f\u0443\u0441\u043a\u0430\u0435\u0442 \u0432\u0435\u0431-\u0445\u0443\u043a \u0441\u0435\u0440\u0432\u0435\u0440 \u0434\u043b\u044f Telegram \u0431\u043e\u0442\u043e\u0432. \u041e\u043d\u0430 \u043f\u0440\u0438\u043d\u0438\u043c\u0430\u0435\u0442 \u0434\u0432\u0430 \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u0430:</p> <ul> <li><code>wait</code>: \u041b\u043e\u0433\u0438\u0447\u0435\u0441\u043a\u043e\u0435 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435, \u0443\u043a\u0430\u0437\u044b\u0432\u0430\u044e\u0449\u0435\u0435, \u0434\u043e\u043b\u0436\u0435\u043d \u043b\u0438 \u0441\u0435\u0440\u0432\u0435\u0440 \u0436\u0434\u0430\u0442\u044c \u043e\u0441\u0442\u0430\u043d\u043e\u0432\u043a\u0438 \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u044f \u043f\u0435\u0440\u0435\u0434 \u0437\u0430\u0432\u0435\u0440\u0448\u0435\u043d\u0438\u0435\u043c \u0440\u0430\u0431\u043e\u0442\u044b. \u041f\u043e \u0443\u043c\u043e\u043b\u0447\u0430\u043d\u0438\u044e true.</li> <li><code>serverBuilder</code>: \u041b\u044f\u043c\u0431\u0434\u0430-\u0444\u0443\u043d\u043a\u0446\u0438\u044f, \u043a\u043e\u0442\u043e\u0440\u0430\u044f \u043d\u0430\u0441\u0442\u0440\u0430\u0438\u0432\u0430\u0435\u0442 \u0441\u0435\u0440\u0432\u0435\u0440. \u041f\u043e \u0443\u043c\u043e\u043b\u0447\u0430\u043d\u0438\u044e \u043f\u0443\u0441\u0442\u0430\u044f \u043b\u044f\u043c\u0431\u0434\u0430.</li> </ul>"},{"location":"ru/Web-starters-%28Spring-and-Ktor%29/#_9","title":"\u041a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u044f","text":"<ul> <li><code>WEBHOOK_PREFIX</code>: \u044d\u0442\u043e \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440, \u043a\u043e\u0442\u043e\u0440\u044b\u0439 \u0431\u0443\u0434\u0435\u0442 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c\u0441\u044f \u0432 \u043a\u0430\u0447\u0435\u0441\u0442\u0432\u0435 \u043f\u0440\u0435\u0444\u0438\u043a\u0441\u0430 \u0430\u0434\u0440\u0435\u0441\u0430 \u0434\u043b\u044f \u043c\u0430\u0440\u0448\u0440\u0443\u0442\u0430 \u043f\u0440\u043e\u0441\u043b\u0443\u0448\u0438\u0432\u0430\u043d\u0438\u044f \u0432\u0435\u0431-\u0445\u0443\u043a\u0430. (\u043f\u043e \u0443\u043c\u043e\u043b\u0447\u0430\u043d\u0438\u044e \"/\")</li> </ul>"},{"location":"ru/Web-starters-%28Spring-and-Ktor%29/#_10","title":"\u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0430 \u0441\u0435\u0440\u0432\u0435\u0440\u0430","text":"<ul> <li><code>server</code>: \u041c\u0435\u0442\u043e\u0434 \u0434\u043b\u044f \u043d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438 \u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u0438 \u0441\u0435\u0440\u0432\u0435\u0440\u0430 \u0441 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u0435\u043c \u043b\u0438\u0431\u043e EnvConfiguration, \u043b\u0438\u0431\u043e ManualConfiguration.</li> <li><code>engine</code>: \u041c\u0435\u0442\u043e\u0434 \u0434\u043b\u044f \u043d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438 Netty \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u044f engine.</li> <li><code>ktorModule</code>: \u041c\u0435\u0442\u043e\u0434 \u0434\u043b\u044f \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0438\u044f Ktor \u043c\u043e\u0434\u0443\u043b\u0435\u0439 \u0432 \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u0435.</li> </ul> <p>\u0411\u0438\u0431\u043b\u0438\u043e\u0442\u0435\u043a\u0430 \u043f\u0440\u0435\u0434\u043e\u0441\u0442\u0430\u0432\u043b\u044f\u0435\u0442 \u0448\u0438\u0440\u043e\u043a\u0438\u0439 \u0441\u043f\u0435\u043a\u0442\u0440 \u043d\u0430\u0441\u0442\u0440\u0430\u0438\u0432\u0430\u0435\u043c\u044b\u0445 \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u043e\u0432 \u0434\u043b\u044f \u0441\u0435\u0440\u0432\u0435\u0440\u0430, \u0432\u043a\u043b\u044e\u0447\u0430\u044f \u0445\u043e\u0441\u0442, \u043f\u043e\u0440\u0442, \u043d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438 SSL \u0438 \u043c\u043d\u043e\u0433\u043e\u0435 \u0434\u0440\u0443\u0433\u043e\u0435. \u0415\u0441\u0442\u044c \u0434\u0432\u0430 \u043a\u043e\u043d\u043a\u0440\u0435\u0442\u043d\u044b\u0445 \u0432\u0430\u0440\u0438\u0430\u043d\u0442\u0430 \u0434\u043b\u044f \u0435\u0433\u043e \u043d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438:</p> <ul> <li><code>EnvConfiguration</code>: \u0421\u0447\u0438\u0442\u044b\u0432\u0430\u0435\u0442 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u044f \u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u0438 \u0438\u0437 \u043e\u043a\u0440\u0443\u0436\u0435\u043d\u0438\u044f \u0441 \u043f\u0440\u0435\u0444\u0438\u043a\u0441\u043e\u043c <code>KTGRAM_</code>.</li> <li><code>ManualConfiguration</code>: \u041f\u043e\u0437\u0432\u043e\u043b\u044f\u0435\u0442 \u0432\u0440\u0443\u0447\u043d\u0443\u044e \u0443\u0441\u0442\u0430\u043d\u0430\u0432\u043b\u0438\u0432\u0430\u0442\u044c \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u044f \u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u0438, \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u0435 \u0432\u0430\u0448\u0438 \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b \u0432 \u0444\u0443\u043d\u043a\u0446\u0438\u0438 <code>server {}</code>.</li> </ul> <p>\u0412\u043e\u0442 \u0441\u043f\u0438\u0441\u043e\u043a \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u043e\u0432, \u043a\u043e\u0442\u043e\u0440\u044b\u0435 \u043c\u043e\u0433\u0443\u0442 \u0431\u044b\u0442\u044c \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d\u044b:</p> <ul> <li><code>HOST</code>: \u0418\u043c\u044f \u0445\u043e\u0441\u0442\u0430 \u0438\u043b\u0438 IP-\u0430\u0434\u0440\u0435\u0441 \u0441\u0435\u0440\u0432\u0435\u0440\u0430.</li> <li><code>PORT</code>: \u041d\u043e\u043c\u0435\u0440 \u043f\u043e\u0440\u0442\u0430 \u0434\u043b\u044f \u0441\u0435\u0440\u0432\u0435\u0440\u0430.</li> <li><code>SSL_PORT</code>: \u041d\u043e\u043c\u0435\u0440 \u043f\u043e\u0440\u0442\u0430 \u0434\u043b\u044f SSL/TLS \u0441\u043e\u0435\u0434\u0438\u043d\u0435\u043d\u0438\u0439.</li> <li><code>PEM_PRIVATE_KEY_PATH</code>: \u041f\u0443\u0442\u044c \u043a \u0444\u0430\u0439\u043b\u0443 PEM \u0437\u0430\u043a\u0440\u044b\u0442\u043e\u0433\u043e \u043a\u043b\u044e\u0447\u0430.</li> <li><code>PEM_CHAIN_PATH</code>: \u041f\u0443\u0442\u044c \u043a \u0444\u0430\u0439\u043b\u0443 PEM \u0446\u0435\u043f\u043e\u0447\u043a\u0438 \u0441\u0435\u0440\u0442\u0438\u0444\u0438\u043a\u0430\u0442\u043e\u0432.</li> <li><code>PEM_PRIVATE_KEY</code>: \u041f\u0410\u0420\u041e\u041b\u042c PEM \u0437\u0430\u043a\u0440\u044b\u0442\u043e\u0433\u043e \u043a\u043b\u044e\u0447\u0430 \u0432 \u0432\u0438\u0434\u0435 \u043c\u0430\u0441\u0441\u0438\u0432\u0430 \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432.</li> <li><code>KEYSTORE_PATH</code>: \u041f\u0443\u0442\u044c \u043a \u0444\u0430\u0439\u043b\u0443 Java KeyStore.</li> <li><code>KEYSTORE_PASSWORD</code>: \u041f\u0430\u0440\u043e\u043b\u044c \u0434\u043b\u044f KeyStore.</li> <li><code>KEY_ALIAS</code>: \u041f\u0441\u0435\u0432\u0434\u043e\u043d\u0438\u043c \u0434\u043b\u044f \u043a\u043b\u044e\u0447\u0430 \u0432 KeyStore.</li> <li><code>SSL_ON</code>: \u041b\u043e\u0433\u0438\u0447\u0435\u0441\u043a\u043e\u0435 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435, \u0443\u043a\u0430\u0437\u044b\u0432\u0430\u044e\u0449\u0435\u0435, \u0434\u043e\u043b\u0436\u0435\u043d \u043b\u0438 \u0431\u044b\u0442\u044c \u0432\u043a\u043b\u044e\u0447\u0435\u043d SSL/TLS. \u041f\u043e \u0443\u043c\u043e\u043b\u0447\u0430\u043d\u0438\u044e true.</li> </ul> <p>Tip</p> <p>\u0415\u0441\u043b\u0438 \u043f\u0440\u0438\u0441\u0443\u0442\u0441\u0442\u0432\u0443\u044e\u0442 PEM \u0441\u0435\u0440\u0442\u0438\u0444\u0438\u043a\u0430\u0442\u044b, \u043c\u043e\u0434\u0443\u043b\u044c \u0441\u0430\u043c \u0441\u043e\u0437\u0434\u0430\u0441\u0442 \u0445\u0440\u0430\u043d\u0438\u043b\u0438\u0449\u0435 JKS \u0438\u0437 \u043d\u0438\u0445 \u043f\u043e \u0443\u043a\u0430\u0437\u0430\u043d\u043d\u043e\u043c\u0443 \u043f\u0443\u0442\u0438.</p>"},{"location":"ru/Web-starters-%28Spring-and-Ktor%29/#_11","title":"\u041a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u044f \u0431\u043e\u0442\u0430:","text":"<p>\u0414\u043b\u044f \u043d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438 \u0431\u043e\u0442\u0430 \u0432\u044b\u0437\u043e\u0432\u0438\u0442\u0435 <code>declareBot {}</code> \u043a\u043e\u0442\u043e\u0440\u044b\u0439 \u0438\u043c\u0435\u0435\u0442 \u0442\u0430\u043a\u0438\u0435 \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b:</p> <ul> <li><code>token</code>: \u0422\u043e\u043a\u0435\u043d \u0431\u043e\u0442\u0430.</li> <li><code>pckg</code>: \u0418\u043c\u044f \u043f\u0430\u043a\u0435\u0442\u0430 \u0434\u043b\u044f \u0431\u043e\u0442\u0430.</li> <li><code>configuration</code>: \u041b\u044f\u043c\u0431\u0434\u0430-\u0444\u0443\u043d\u043a\u0446\u0438\u044f \u0434\u043b\u044f \u043d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438 \u0431\u043e\u0442\u0430.</li> <li><code>handlingBehaviour</code>: \u041b\u044f\u043c\u0431\u0434\u0430-\u0444\u0443\u043d\u043a\u0446\u0438\u044f \u0434\u043b\u044f \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u043a\u0438 \u043f\u043e\u0432\u0435\u0434\u0435\u043d\u0438\u044f \u043e\u0431\u0440\u0430\u0431\u043e\u0442\u043a\u0438 \u0431\u043e\u0442\u0430.</li> <li><code>onInit</code>: \u041b\u044f\u043c\u0431\u0434\u0430-\u0444\u0443\u043d\u043a\u0446\u0438\u044f, \u043a\u043e\u0442\u043e\u0440\u0430\u044f \u0431\u0443\u0434\u0435\u0442 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0430 \u043f\u0440\u0438 \u0438\u043d\u0438\u0446\u0438\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u0438 \u0431\u043e\u0442\u0430.</li> </ul>"},{"location":"ru/Web-starters-%28Spring-and-Ktor%29/#_12","title":"\u041f\u0440\u0438\u043c\u0435\u0440 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u044f","text":"<p>\u0414\u043b\u044f \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u044f \u044d\u0442\u043e\u0433\u043e \u043c\u043e\u0434\u0443\u043b\u044f \u0432\u044b\u0437\u043e\u0432\u0438\u0442\u0435 \u0444\u0443\u043d\u043a\u0446\u0438\u044e <code>serveWebhook</code>, \u043d\u0430\u0441\u0442\u0440\u043e\u0439\u0442\u0435 \u0435\u0433\u043e \u0441 \u0432\u0430\u0448\u0438\u043c\u0438 \u0436\u0435\u043b\u0430\u0435\u043c\u044b\u043c\u0438 \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u0430\u043c\u0438, \u043e\u0431\u044a\u044f\u0432\u0438\u0442\u0435 \u0432\u0430\u0448\u0438\u0445 \u0431\u043e\u0442\u043e\u0432. \u0412\u043e\u0442 \u0443\u043f\u0440\u043e\u0449\u0435\u043d\u043d\u044b\u0439 \u043f\u0440\u0438\u043c\u0435\u0440:</p> <pre><code>fun main() = runBlocking {\n    serveWebhook {\n        server {\n            HOST = \"0.0.0.0\"\n            PORT = 8080\n            SSL_PORT = 8443\n\n            PEM_PRIVATE_KEY_PATH = \"/etc/letsencrypt/live/example.com/privkey.pem\"\n            PEM_CHAIN_PATH = \"/etc/letsencrypt/live/example.com/fullchain.pem\"\n            PEM_PRIVATE_KEY = \"pem_changeit\".toCharArray()\n\n            KEYSTORE_PATH = \"/etc/ssl/certs/java/cacerts/bot_keystore.jks\"\n            KEYSTORE_PASSWORD = \"changeit\".toCharArray()\n            // \u0423\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u0435 \u0434\u0440\u0443\u0433\u0438\u0435 \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b \u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u0438 \u043f\u043e \u043c\u0435\u0440\u0435 \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e\u0441\u0442\u0438\n        }\n        declareBot {\n            token = \"YOUR_BOT_TOKEN\"\n            // \u041d\u0430\u0441\u0442\u0440\u043e\u0439\u0442\u0435 \u0434\u0440\u0443\u0433\u0438\u0435 \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b \u0431\u043e\u0442\u0430\n        }\n        // \u0414\u043e\u0431\u0430\u0432\u044c\u0442\u0435 \u0431\u043e\u043b\u044c\u0448\u0435 \u0431\u043e\u0442\u043e\u0432 \u0438\u043b\u0438 \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u0435 \u0434\u0440\u0443\u0433\u0438\u0435 \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b \u043f\u0440\u0438 \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e\u0441\u0442\u0438\n    }\n}\n</code></pre> <p>Caution</p> <p>\u041d\u0435 \u0437\u0430\u0431\u0443\u0434\u044c\u0442\u0435 \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c \u0432\u0435\u0431-\u0445\u0443\u043a, \u0447\u0442\u043e\u0431\u044b \u0432\u0441\u0435 \u0440\u0430\u0431\u043e\u0442\u0430\u043b\u043e. :)</p> <p>\u041f\u043e \u0443\u043c\u043e\u043b\u0447\u0430\u043d\u0438\u044e \u043c\u043e\u0434\u0443\u043b\u044c \u0431\u0443\u0434\u0435\u0442 \u043e\u0431\u0441\u043b\u0443\u0436\u0438\u0432\u0430\u0442\u044c \u043a\u043e\u043d\u0435\u0447\u043d\u044b\u0435 \u0442\u043e\u0447\u043a\u0438 \u043f\u0440\u043e\u0441\u043b\u0443\u0448\u0438\u0432\u0430\u043d\u0438\u044f \u0432\u0435\u0431-\u0445\u0443\u043a\u0430 \u043a\u0430\u043a <code>host/BOT_TOKEN</code></p>"},{"location":"ko/","title":"\ud648","text":""},{"location":"ko/#_1","title":"\uc18c\uac1c","text":"<p>\ub77c\uc774\ube0c\ub7ec\ub9ac\uac00 \uc77c\ubc18\uc801\uc73c\ub85c \uc5c5\ub370\uc774\ud2b8\ub97c \ucc98\ub9ac\ud558\ub294 \ubc29\ubc95\uc5d0 \ub300\ud55c \uc544\uc774\ub514\uc5b4\ub97c \uc5bb\uc5b4\ubd05\uc2dc\ub2e4:</p> <p> </p> <p>\uc5c5\ub370\uc774\ud2b8\ub97c \uc218\uc2e0\ud55c \ud6c4, \ub77c\uc774\ube0c\ub7ec\ub9ac\ub294 \uc138 \uac00\uc9c0 \uc8fc\uc694 \ub2e8\uacc4\ub97c \uc218\ud589\ud569\ub2c8\ub2e4.</p>"},{"location":"ko/#_2","title":"\ucc98\ub9ac","text":"<p>\ucc98\ub9ac\ub294 \uc218\uc2e0\ub41c \uc5c5\ub370\uc774\ud2b8\ub97c \uc804\ub2ec\ub41c \ud398\uc774\ub85c\ub4dc\uc5d0 \ub530\ub77c <code>ProcessedUpdate</code>\uc758 \uc801\uc808\ud55c \ud558\uc704 \ud074\ub798\uc2a4\ub85c \ub2e4\uc2dc \ud328\ud0a4\uc9d5\ud558\ub294 \uacfc\uc815\uc785\ub2c8\ub2e4.</p> <p>\uc774 \ub2e8\uacc4\ub294 \uc5c5\ub370\uc774\ud2b8\ub97c \ub354 \uc27d\uac8c \ucc98\ub9ac\ud558\uace0 \ucc98\ub9ac \uae30\ub2a5\uc744 \ud655\uc7a5\ud560 \uc218 \uc788\ub3c4\ub85d \ud544\uc694\ud569\ub2c8\ub2e4.</p>"},{"location":"ko/#_3","title":"\ucc98\ub9ac","text":"<p>\ub2e4\uc74c\uc740 \uc8fc\uc694 \ub2e8\uacc4\ub85c, \uc5ec\uae30\uc11c \uc2e4\uc81c \ucc98\ub9ac\uac00 \uc774\ub8e8\uc5b4\uc9d1\ub2c8\ub2e4.</p>"},{"location":"ko/#ratelimiter","title":"\uc804\uc5ed RateLimiter","text":"<p>\uc5c5\ub370\uc774\ud2b8\uc5d0 \uc0ac\uc6a9\uc790\uac00 \uc788\ub294 \uacbd\uc6b0, \uc804\uc5ed RateLimiter\ub97c \ucd08\uacfc\ud588\ub294\uc9c0 \ud655\uc778\ud569\ub2c8\ub2e4.</p>"},{"location":"ko/#_4","title":"\ud14d\uc2a4\ud2b8 \ud30c\uc2f1","text":"<p>\ub2e4\uc74c\uc73c\ub85c, \ud398\uc774\ub85c\ub4dc\uc5d0 \ub530\ub77c \ud14d\uc2a4\ud2b8\ub97c \ud3ec\ud568\ud558\ub294 \ud2b9\uc815 \uc5c5\ub370\uc774\ud2b8 \ucef4\ud3ec\ub10c\ud2b8\ub97c \uac00\uc838\uc640 \uc124\uc815\uc5d0 \ub530\ub77c \ud30c\uc2f1\ud569\ub2c8\ub2e4.</p> <p>\ub354 \uc790\uc138\ud55c \ub0b4\uc6a9\uc740 \uc5c5\ub370\uc774\ud2b8 \ud30c\uc2f1 \ubb38\uc11c\ub97c \ucc38\uc870\ud558\uc138\uc694.</p>"},{"location":"ko/#_5","title":"\uc561\ud2f0\ube44\ud2f0 \ucc3e\uae30","text":"<p>\ucc98\ub9ac \uc6b0\uc120\uc21c\uc704\uc5d0 \ub530\ub77c:</p> <p> </p> <p>\ud30c\uc2f1\ub41c \ub370\uc774\ud130\uc640 \uc6b0\ub9ac\uac00 \ucc98\ub9ac\ud558\ub294 \uc561\ud2f0\ube44\ud2f0 \uac04\uc758 \uc77c\uce58 \ud56d\ubaa9\uc744 \ucc3e\uc2b5\ub2c8\ub2e4. \uc6b0\uc120\uc21c\uc704 \ub2e4\uc774\uc5b4\uadf8\ub7a8\uc5d0\uc11c \ubcfc \uc218 \uc788\ub4ef\uc774, <code>Commands</code>\uac00 \ud56d\uc0c1 \uba3c\uc800 \uc635\ub2c8\ub2e4.</p> <p>\uc989, \uc5c5\ub370\uc774\ud2b8\uc758 \ud14d\uc2a4\ud2b8 \ub85c\ub4dc\uac00 \uc5b4\ub5a4 \uba85\ub839\uacfc \uc77c\uce58\ud558\ub294 \uacbd\uc6b0, \ub354 \uc774\uc0c1 <code>Inputs</code>, <code>Common</code>\uc744 \uac80\uc0c9\ud558\uac70\ub098 \ubb3c\ub860 <code>Unprocessed</code> \uc791\uc5c5\uc744 \uc2e4\ud589\ud558\uc9c0 \uc54a\uc2b5\ub2c8\ub2e4.</p> <p>\uc720\uc77c\ud55c \uc608\uc678\ub294 <code>UpdateHandlers</code>\uac00 \ubcd1\ub82c\ub85c \ud2b8\ub9ac\uac70\ub41c\ub2e4\ub294 \uc810\uc785\ub2c8\ub2e4.</p>"},{"location":"ko/#commands","title":"Commands","text":"<p>\uba85\ub839\uacfc \uadf8 \ucc98\ub9ac\uc5d0 \ub300\ud574 \uc790\uc138\ud788 \uc0b4\ud3b4\ubd05\uc2dc\ub2e4.</p> <p>\ubcf4\uc168\uaca0\uc9c0\ub9cc, \uba85\ub839\uc744 \ucc98\ub9ac\ud558\uae30 \uc704\ud55c \uc5b4\ub178\ud14c\uc774\uc158\uc774 <code>CommandHandler</code>\ub77c\uace0 \ubd88\ub9ac\uc9c0\ub9cc, Telegram \ubd07\uc758 \uace0\uc804\uc801\uc778 \uac1c\ub150\ubcf4\ub2e4 \ub354 \ub2e4\uc7ac\ub2e4\ub2a5\ud569\ub2c8\ub2e4.</p>"},{"location":"ko/#_6","title":"\uc2a4\ucf54\ud504","text":"<p>\uc774\ub294 \ub354 \ub113\uc740 \ubc94\uc704\uc758 \ucc98\ub9ac \uac00\ub2a5\uc131\uc744 \uac00\uc9c0\uae30 \ub54c\ubb38\uc785\ub2c8\ub2e4. \uc989, \ub300\uc0c1 \ud568\uc218\ub294 \ud14d\uc2a4\ud2b8 \uc77c\uce58\ubfd0\ub9cc \uc544\ub2c8\ub77c \uc801\uc808\ud55c \uc5c5\ub370\uc774\ud2b8 \uc720\ud615\uc5d0 \ub530\ub77c \uc815\uc758\ub420 \uc218 \uc788\uc73c\uba70, \uc774\uac83\uc774 \uc2a4\ucf54\ud504\uc758 \uac1c\ub150\uc785\ub2c8\ub2e4.</p> <p>\ub530\ub77c\uc11c \uac01 \uba85\ub839\uc740 \ub2e4\ub978 \uc2a4\ucf54\ud504 \ubaa9\ub85d\uc5d0 \ub300\ud574 \ub2e4\ub978 \ud578\ub4e4\ub7ec\ub97c \uac00\uc9c8 \uc218 \uc788\uace0, \ub610\ub294 \uadf8 \ubc18\ub300\ub85c \uc5ec\ub7ec \uba85\ub839\uc5d0 \ub300\ud574 \ud558\ub098\uc758 \uba85\ub839\uc744 \uac00\uc9c8 \uc218 \uc788\uc2b5\ub2c8\ub2e4.</p> <p>\uc544\ub798\uc5d0\uc11c \ud14d\uc2a4\ud2b8 \ud398\uc774\ub85c\ub4dc\uc640 \uc2a4\ucf54\ud504\ubcc4 \ub9e4\ud551\uc774 \uc5b4\ub5bb\uac8c \uc774\ub8e8\uc5b4\uc9c0\ub294\uc9c0 \ubcfc \uc218 \uc788\uc2b5\ub2c8\ub2e4:</p> <p> </p>"},{"location":"ko/#inputs","title":"Inputs","text":"<p>\ub2e4\uc74c\uc73c\ub85c, \ud14d\uc2a4\ud2b8 \ud398\uc774\ub85c\ub4dc\uac00 \uc5b4\ub5a4 \uba85\ub839\uacfc\ub3c4 \uc77c\uce58\ud558\uc9c0 \uc54a\uc73c\uba74 \uc785\ub825 \ud3ec\uc778\ud2b8\ub97c \uac80\uc0c9\ud569\ub2c8\ub2e4.</p> <p>\uc774 \uac1c\ub150\uc740 \uba85\ub839\uc904 \uc560\ud50c\ub9ac\ucf00\uc774\uc158\uc5d0\uc11c \uc785\ub825\uc744 \uae30\ub2e4\ub9ac\ub294 \uac83\uacfc \ub9e4\uc6b0 \uc720\uc0ac\ud569\ub2c8\ub2e4. \ud2b9\uc815 \uc0ac\uc6a9\uc790\uc5d0 \ub300\ud574 \ubd07 \ucee8\ud14d\uc2a4\ud2b8\uc5d0 \ud3ec\uc778\ud2b8\ub97c \uc124\uc815\ud558\uc5ec \ub2e4\uc74c \uc785\ub825\uc744 \ucc98\ub9ac\ud558\ub3c4\ub85d \ud558\uba70, \ub0b4\uc6a9\uc774 \ubb34\uc5c7\uc774\ub4e0 \uc0c1\uad00\uc5c6\uc2b5\ub2c8\ub2e4. \ub2e4\uc74c \uc5c5\ub370\uc774\ud2b8\uc5d0 <code>User</code>\uac00 \uc788\uc5b4 \uc124\uc815\ub41c \uc785\ub825 \ub300\uae30 \ud3ec\uc778\ud2b8\uc640 \uc5f0\uad00\uc2dc\ud0ac \uc218 \uc788\ub294 \uac83\uc774 \uc911\uc694\ud569\ub2c8\ub2e4.</p> <p>\uc544\ub798\uc5d0\uc11c <code>Commands</code>\uc640 \uc77c\uce58\ud558\uc9c0 \uc54a\ub294 \uc5c5\ub370\uc774\ud2b8 \ucc98\ub9ac \uc608\uc81c\ub97c \ubcfc \uc218 \uc788\uc2b5\ub2c8\ub2e4.</p> <p> </p>"},{"location":"ko/#commons","title":"Commons","text":"<p>\ud578\ub4e4\ub7ec\uac00 <code>commands</code>\ub098 <code>inputs</code>\ub97c \ucc3e\uc9c0 \ubabb\ud558\uba74 \ud14d\uc2a4\ud2b8 \ub85c\ub4dc\ub97c <code>common</code> \ud578\ub4e4\ub7ec\uc640 \ube44\uad50\ud569\ub2c8\ub2e4.</p> <p>\ubc18\ubcf5\ubb38\uc744 \ud1b5\ud574 \ubaa8\ub4e0 \ud56d\ubaa9\uc744 \ud655\uc778\ud558\uae30 \ub54c\ubb38\uc5d0 \uacfc\ub3c4\ud558\uac8c \uc0ac\uc6a9\ud558\uc9c0 \uc54a\ub294 \uac83\uc744 \uad8c\uc7a5\ud569\ub2c8\ub2e4.</p>"},{"location":"ko/#unprocessed","title":"Unprocessed","text":"<p>\ucd5c\uc885 \ub2e8\uacc4\ub85c, \ud578\ub4e4\ub7ec\uac00 \uc77c\uce58\ud558\ub294 \uc561\ud2f0\ube44\ud2f0\ub97c \ucc3e\uc9c0 \ubabb\ud558\uba74(<code>UpdateHandler</code>\ub294 \uc644\uc804\ud788 \ubcd1\ub82c\ub85c \uc791\ub3d9\ud558\uba70 \uc77c\ubc18\uc801\uc778 \uc561\ud2f0\ube44\ud2f0\ub85c \uac04\uc8fc\ub418\uc9c0 \uc54a\uc2b5\ub2c8\ub2e4), <code>UnprocessedHandler</code>\uac00 \uc791\ub3d9\ud569\ub2c8\ub2e4. \uc124\uc815\ub418\uc5b4 \uc788\uc73c\uba74 \uc774 \uacbd\uc6b0\ub97c \ucc98\ub9ac\ud558\uba70, \ubb34\uc5b8\uac00 \uc798\ubabb\ub418\uc5c8\uc74c\uc744 \uc0ac\uc6a9\uc790\uc5d0\uac8c \uacbd\uace0\ud558\ub294 \ub370 \uc720\uc6a9\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4.</p> <p>\ub354 \uc790\uc138\ud55c \ub0b4\uc6a9\uc740 \ud578\ub4e4\ub7ec \ubb38\uc11c\ub97c \ucc38\uc870\ud558\uc138\uc694.</p>"},{"location":"ko/#ratelimiter_1","title":"\uc561\ud2f0\ube44\ud2f0 RateLimiter","text":"<p>\uc561\ud2f0\ube44\ud2f0\ub97c \ucc3e\uc740 \ud6c4, \uc561\ud2f0\ube44\ud2f0 \ud30c\ub77c\ubbf8\ud130\uc5d0\uc11c \uc9c0\uc815\ud55c \ub9e4\uac1c\ubcc0\uc218\uc5d0 \ub530\ub77c \uc0ac\uc6a9\uc790\uc758 RateLimiter\ub97c \ud655\uc778\ud569\ub2c8\ub2e4.</p>"},{"location":"ko/#_7","title":"\uc561\ud2f0\ube44\ud2f0","text":"<p>\uc561\ud2f0\ube44\ud2f0\ub294 Telegram \ubd07 \ub77c\uc774\ube0c\ub7ec\ub9ac\uac00 \ucc98\ub9ac\ud560 \uc218 \uc788\ub294 \ub2e4\uc591\ud55c \uc720\ud615\uc758 \ud578\ub4e4\ub7ec\ub97c \uc758\ubbf8\ud558\uba70, Commands, Inputs, Regexes \ubc0f Unprocessed \ud578\ub4e4\ub7ec\ub97c \ud3ec\ud568\ud569\ub2c8\ub2e4.</p>"},{"location":"ko/#_8","title":"\ud638\ucd9c","text":"<p>\ucd5c\uc885 \ucc98\ub9ac \ub2e8\uacc4\ub294 \ucc3e\uc740 \uc561\ud2f0\ube44\ud2f0\uc758 \ud638\ucd9c\uc785\ub2c8\ub2e4.</p> <p>\ub354 \uc790\uc138\ud55c \ub0b4\uc6a9\uc740 \ud638\ucd9c \ubb38\uc11c\ub97c \ucc38\uc870\ud558\uc138\uc694.</p>"},{"location":"ko/#_9","title":"\ucc38\uace0 \uc790\ub8cc","text":"<ul> <li>\uc5c5\ub370\uc774\ud2b8 \ud30c\uc2f1</li> <li>\uc561\ud2f0\ube44\ud2f0 \ud638\ucd9c</li> <li>\ud578\ub4e4\ub7ec</li> <li>\ubd07 \uc124\uc815</li> <li>\uc6f9 \uc2a4\ud0c0\ud130(Spring, Ktor)</li> </ul>"},{"location":"ko/Actions/#all-requests-is-actions","title":"All requests is Actions","text":"<p>\ubaa8\ub4e0 Telegram API \uc694\uccad\uc740 \ub2e4\uc591\ud55c <code>TgAction</code> \uc778\ud130\ud398\uc774\uc2a4\uc774\uba70, \uc774\ub294 <code>SendMessageAction</code>\uc640 \uac19\uc740 \ub2e4\uc591\ud55c \uba54\uc11c\ub4dc\ub97c \uad6c\ud604\ud558\uba70, \ub77c\uc774\ube0c\ub7ec\ub9ac \uc778\ud130\ud398\uc774\uc2a4\uc758 \ud3b8\uc758\ub97c \uc704\ud574 <code>message()</code> \ud0c0\uc785 \ud568\uc218 \ud615\ud0dc\ub85c \ub798\ud551\ub418\uc5b4 \uc788\uc2b5\ub2c8\ub2e4.</p> <p> </p> <p>\uac01 <code>Action</code>\uc740 \uc0ac\uc6a9 \uac00\ub2a5\ud55c <code>Feature</code>\uc5d0 \ub530\ub77c \uace0\uc720\uc758 \uac00\ub2a5\ud55c \uba54\uc11c\ub4dc\ub97c \uac00\uc9c8 \uc218 \uc788\uc2b5\ub2c8\ub2e4.</p>"},{"location":"ko/Actions/#features","title":"Features","text":"<p>\ub2e4\ub978 \uc791\uc5c5\uc740 Telegram Bot API\uc5d0 \ub530\ub77c \ub2e4\ub978 <code>Features</code>\ub97c \uac00\uc9c8 \uc218 \uc788\uc2b5\ub2c8\ub2e4. \uc608\ub97c \ub4e4\uc5b4: <code>OptionsFeature</code>, <code>MarkupFeature</code> <code>EntitiesFeature</code> <code>CaptionFeature</code>.</p> <p>\ub354 \uc790\uc138\ud788 \uc0b4\ud3b4\ubcf4\uaca0\uc2b5\ub2c8\ub2e4:</p>"},{"location":"ko/Actions/#options","title":"Options","text":"<p>\uc608\ub97c \ub4e4\uc5b4, <code>OptionsFeature</code>\ub294 \uc120\ud0dd\uc801 \ub9e4\uac1c\ubcc0\uc218\ub97c \uc804\ub2ec\ud558\ub294 \ub370 \uc0ac\uc6a9\ub429\ub2c8\ub2e4.</p> <p>\uac01 \uc791\uc5c5\uc740 \uace0\uc720\ud55c \uc635\uc158 \uc720\ud615\uc744 \uac00\uc9c0\uba70, \ud574\ub2f9 \uc635\uc158\uc740 <code>Action</code> \uc790\uccb4\uc758 <code>options</code> \ub9e4\uac1c\ubcc0\uc218\uc5d0\uc11c \uc18d\uc131 \uc139\uc158\uc5d0\uc11c \ud655\uc778\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4.\uc608\ub97c \ub4e4\uc5b4, <code>sendMessage</code>\uc5d0\ub294 \ub2e4\uc591\ud55c \uc635\uc158 \ub9e4\uac1c\ubcc0\uc218\uac00 \uc788\ub294 <code>MessageOptions</code> \ub370\uc774\ud130 \ud074\ub798\uc2a4\uac00 \ud3ec\ud568\ub418\uc5b4 \uc788\uc2b5\ub2c8\ub2e4.</p> <p>\uc0ac\uc6a9 \uc608\uc2dc:</p> <pre><code>message{ \"*Test*\" }.options {\n    parseMode = ParseMode.Markdown\n}.send(user, bot)\n</code></pre>"},{"location":"ko/Actions/#markup","title":"Markup","text":"<p>\ubaa8\ub4e0 \uc885\ub958\uc758 \ud0a4\ubcf4\ub4dc\ub97c \uc9c0\uc6d0\ud558\ub294 \ub9c8\ud06c\uc5c5\uc744 \ubcf4\ub0b4\ub294 \uba54\uc11c\ub4dc\ub3c4 \uc788\uc2b5\ub2c8\ub2e4:<code>ReplyKeyboardMarkup</code>, <code>InlineKeyboardMarkup</code>, <code>ForceReply</code>, <code>ReplyKeyboardRemove</code>.</p>"},{"location":"ko/Actions/#inline-keyboard-markup","title":"Inline Keyboard Markup","text":"<p>\uc774 \ube4c\ub354\ub97c \uc0ac\uc6a9\ud558\uba74 \ubaa8\ub4e0 \uc870\ud569\uc758 \ub9e4\uac1c\ubcc0\uc218\ub85c \uc778\ub77c\uc778 \ubc84\ud2bc\uc744 \uad6c\uc131\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4.</p> <pre><code>message{ \"Test\" }.inlineKeyboardMarkup {\n    \"name\" callback \"callbackData\"         //\n    \"buttonName\" url \"https://google.com\"  //--- \uc774 \ub450 \ubc84\ud2bc\uc740 \ub3d9\uc77c\ud55c \ud589\uc5d0 \uc788\uc2b5\ub2c8\ub2e4.\n    newLine() // or br()\n    \"otherButton\" webAppInfo \"data\"       // \ub2e4\ub978 \ud589\uc5d0 \uc788\uc74c\n\n    // \ube4c\ub354 \ub0b4\uc5d0\uc11c \ub2e4\ub978 \uc2a4\ud0c0\uc77c\ub3c4 \uc0ac\uc6a9\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4:\n    callbackData(\"buttonName\") { \"callbackData\" }\n}.send(user, bot)\n</code></pre> <p>\uc790\uc138\ud55c \ub0b4\uc6a9\uc740 \ube4c\ub354 \ubb38\uc11c\uc5d0\uc11c \ud655\uc778\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4.</p>"},{"location":"ko/Actions/#reply-keyboard-markup","title":"Reply Keyboard Markup","text":"<p>\uc774 \ube4c\ub354\ub97c \uc0ac\uc6a9\ud558\uba74 \uba54\ub274 \ubc84\ud2bc\uc744 \uad6c\uc131\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4.</p> <pre><code>message{ \"Test\" }.replyKeyboardMarkup {\n  + \"Menu button\"     // \ub2e8\ud56d \ub354\ud558\uae30 \uc5f0\uc0b0\uc790\ub97c \uc0ac\uc6a9\ud558\uc5ec \ubc84\ud2bc \ucd94\uac00\n  + \"Menu button 2\"\n  br() // \ub450 \ubc88\uc9f8 \ud589\uc73c\ub85c \uc774\ub3d9\n  \"Send polls \ud83d\udc40\" requestPoll true   // \ub9e4\uac1c\ubcc0\uc218\uac00 \uc788\ub294 \ubc84\ud2bc\n\n  options {\n    resizeKeyboard = true\n  }\n}.send(user, bot)\n</code></pre> <p>\ud0a4\ubcf4\ub4dc\uc5d0 \uc801\uc6a9 \uac00\ub2a5\ud55c \ucd94\uac00 \uc635\uc158\uc740 <code>ReplyKeyboardMarkupOptions</code>\uc5d0\uc11c \ud655\uc778\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4.</p> <p>\uba54\uc11c\ub4dc\uc5d0 \ub300\ud55c \uc790\uc138\ud55c \ub0b4\uc6a9\uc740 \ube4c\ub354 \ubb38\uc11c\ub97c \ucc38\uc870\ud558\uc138\uc694.</p> <p>\ud0a4\ubcf4\ub4dc \ub9c8\ud06c\uc5c5\uc744 \uc218\uc9d1\ud558\uae30 \uc704\ud574 DSL\uc744 \uc0ac\uc6a9\ud558\ub294 \uac83\uc774 \uac00\uc7a5 \ud3b8\ub9ac\ud558\uc9c0\ub9cc, \ud544\uc694\ud558\uba74 \ub9c8\ud06c\uc5c5\uc744 \uc218\ub3d9\uc73c\ub85c \ucd94\uac00\ud560 \uc218\ub3c4 \uc788\uc2b5\ub2c8\ub2e4.</p> <pre><code>message{ \"*Test*\" }.markup {\n    InlineKeyboardMarkup(\n        InlineKeyboardButton(\"test\", callbackData = \"testCallback\")\n    )\n}.send(user, bot)\n</code></pre> <pre><code>message{ \"*Test*\" }.markup {\n    ReplyKeyboardMarkup(\n        KeyboardButton(\"Test menu button\")\n    )\n}.send(user, bot)\n</code></pre>"},{"location":"ko/Actions/#entities","title":"Entities","text":"<p><code>MessageEntity</code>\ub97c \ubcf4\ub0b4\ub294 \uba54\uc11c\ub4dc\ub3c4 \uc788\uc2b5\ub2c8\ub2e4.</p> <p>\uc0ac\uc6a9 \uc608\uc2dc:</p> <pre><code>message{ \"Test \\$hello\" }.replyKeyboardMarkup {\n    +\"Test menu button\"\n}.entities {\n    5 to 15 url \"https://google.com\" // TextLink \ucd94\uac00\n    entity(EntityType.Bold, 0, 4)\n    entity(EntityType.Cashtag, 5, 5) // \ubc31\uc2ac\ub798\uc2dc\ub294 \ucef4\ud30c\uc77c\ub7ec\uc5d0 \uc0ac\uc6a9\ub418\ubbc0\ub85c \uce74\uc6b4\ud2b8\ub418\uc9c0 \uc54a\uc74c\n}.send(user, bot)\n</code></pre>"},{"location":"ko/Actions/#contextual-entities","title":"Contextual entities.","text":"<p>\uc5d4\ud130\ud2f0\ub294 \uc77c\ubd80 \uad6c\ubb38\uc758 \ucee8\ud14d\uc2a4\ud2b8\ub97c \ud1b5\ud574 \ucd94\uac00\ud560 \uc218\ub3c4 \uc788\uc73c\uba70, \uc774\ub4e4\uc740 \ud2b9\uc815 EntitiesContextBuilder \uc778\ud130\ud398\uc774\uc2a4\ub85c \ud45c\uc2dc\ub429\ub2c8\ub2e4. \uc774 \uc778\ud130\ud398\uc774\uc2a4\ub294 \ucea1\uc158 \uae30\ub2a5\uc5d0\ub3c4 \uc874\uc7ac\ud569\ub2c8\ub2e4.</p> <p>\uc0ac\uc6a9 \uc608\uc2dc:</p> <pre><code>message { \"usual text \" - bold { \"this is bold text\" } - \" continue usual\" }.send(user, bot)\n</code></pre> <p>\ubaa8\ub4e0 \uc885\ub958\uc758 \uc5d4\ud130\ud2f0 \uc720\ud615\uc774 \uc9c0\uc6d0\ub429\ub2c8\ub2e4.</p>"},{"location":"ko/Actions/#caption","title":"Caption","text":"<p>\ub610\ud55c <code>caption</code> \uba54\uc11c\ub4dc\ub97c \uc0ac\uc6a9\ud558\uc5ec \ubbf8\ub514\uc5b4 \ud30c\uc77c\uc5d0 \ucea1\uc158\uc744 \ucd94\uac00\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4.</p> <p>\uc0ac\uc6a9 \uc608\uc2dc:</p> <pre><code>photo { \"FILE_ID\" }.caption { \"Test caption\" }.send(user, bot)\n</code></pre>"},{"location":"ko/Activites-and-Processors/#_1","title":"\uc18c\uac1c","text":"<p>\uc774 \ub77c\uc774\ube0c\ub7ec\ub9ac \uc6a9\uc5b4\uc5d0\uc11c <code>Activity</code>\ub294 <code>@CommandHandler</code>, <code>@InputHandler</code>, <code>@UnprocessedHandler</code>, <code>@CommonHandler</code>\uc640 \uac19\uc740 \uc5d4\ud2f0\ud2f0\uc758 \uc77c\ubc18\ud654\ub41c \ucd94\uc0c1 \uc5d4\ud2f0\ud2f0\uc785\ub2c8\ub2e4.</p> <p>handlers \ubb38\uc11c\ub3c4 \ucc38\uc870\ud558\uc138\uc694.</p>"},{"location":"ko/Activites-and-Processors/#activity","title":"Activity \uc218\uc9d1","text":"<p>Activity\ub294 \ucef4\ud30c\uc77c \ud0c0\uc784\uc5d0 \ubaa8\ub4e0 \ucee8\ud14d\uc2a4\ud2b8\ub97c \uc218\uc9d1\ud558\uace0 \uc900\ube44\ud569\ub2c8\ub2e4(\ud568\uc218\ud615 DSL\uc744 \ud1b5\ud574 \uc815\uc758\ub41c \uac83 \uc81c\uc678).</p> <p>\ud328\ud0a4\uc9c0 \uac80\uc0c9 \ubc94\uc704\ub97c \uc81c\ud55c\ud558\ub824\uba74 \ud50c\ub7ec\uadf8\uc778\uc5d0 \ub9e4\uac1c\ubcc0\uc218\ub97c \uc804\ub2ec\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4:</p> <pre><code>ktGram {\n    packages = listOf(\"com.example.mybot\")\n}\n</code></pre> <p>\ub610\ub294 ksp\ub97c \ud1b5\ud574 \ud50c\ub7ec\uadf8\uc778 \uc5c6\uc774:</p> <pre><code>ksp {\n    arg(\"package\", \"com.example.mybot\")\n}\n</code></pre> <p>\uc774 \uacbd\uc6b0 \uc218\uc9d1\ub41c \uc791\uc5c5\ub4e4\uc774 \uc62c\ubc14\ub974\uac8c \ucc98\ub9ac\ub418\ub824\uba74 \uc778\uc2a4\ud134\uc2a4 \uc790\uccb4\uc5d0\uc11c\ub3c4 \ud328\ud0a4\uc9c0\ub97c \uc9c0\uc815\ud574\uc57c \ud569\ub2c8\ub2e4.</p> <pre><code>fun main() = runBlocking {\n    val bot = TelegramBot(\"BOT_TOKEN\", \"com.example.mybot\")\n\n    bot.handleUpdates()\n    // \uc7a5\uae30 \ud3f4\ub9c1 \ub9ac\uc2a4\ub108 \uc2dc\uc791\n}\n</code></pre> <p>\uc774 \uc635\uc158\uc740 \uc5ec\ub7ec \ubd07 \uc778\uc2a4\ud134\uc2a4\ub97c \uc2e4\ud589\ud560 \uc218 \uc788\ub3c4\ub85d \ucd94\uac00\ub418\uc5c8\uc2b5\ub2c8\ub2e4:</p> <pre><code>ktGram {\n    packages = listOf(\"com.example.mybot\", \"com.example.mybot2\")\n}\n</code></pre> <p>\ub610\ub294 \ud50c\ub7ec\uadf8\uc778\uc744 \uc0ac\uc6a9\ud558\uc9c0 \uc54a\uace0 \ub2e4\ub978 \ud328\ud0a4\uc9c0\ub97c \uc9c0\uc815\ud558\ub824\uba74 <code>;</code> \uad6c\ubd84\uc790\ub85c \uc9c0\uc815\ud574\uc57c \ud569\ub2c8\ub2e4:</p> <pre><code>ksp {\n    arg(\"package\", \"com.example.mybot;com.example.mybot2\")\n}\n</code></pre>"},{"location":"ko/Activites-and-Processors/#_2","title":"\ucc98\ub9ac","text":""},{"location":"ko/Activites-and-Processors/#_3","title":"\uc6f9\ud6c5","text":"<p>\ucee8\ud2b8\ub864\ub7ec(\ub610\ub294 \uc6f9\ud6c5\uc774 \ucc98\ub9ac\ub418\ub294 \ub2e4\ub978 \uc7a5\uc18c)\uc5d0\uc11c \ub2e4\uc74c\uc744 \ud638\ucd9c\ud569\ub2c8\ub2e4: <code>bot.update.parseAndHandle(webhookString)</code></p>"},{"location":"ko/Activites-and-Processors/#_4","title":"\uc7a5\uae30 \ud3f4\ub9c1","text":"<p>\ub2e4\uc74c\uc744 \ud638\ucd9c\ud569\ub2c8\ub2e4: <code>bot.handleUpdates()</code> \ub610\ub294 <code>bot.update.setListener { handle(it) }</code>\ub97c \ud1b5\ud574</p>"},{"location":"ko/Activites-and-Processors/#_5","title":"\ucc38\uc870","text":"<ul> <li>\uc5c5\ub370\uc774\ud2b8 \ud30c\uc2f1</li> <li>Activity \ud638\ucd9c</li> <li>\uc791\uc5c5</li> </ul>"},{"location":"ko/Bot-Context/","title":"\ubd07 \ucee8\ud14d\uc2a4\ud2b8","text":"<p>\ubd07\uc740 <code>UserData</code> \ubc0f <code>ClassData</code> \uc778\ud130\ud398\uc774\uc2a4\ub97c \ud1b5\ud574 \uc77c\ubd80 \ub370\uc774\ud130\ub97c \uae30\uc5b5\ud560 \uc218 \uc788\ub294 \uae30\ub2a5\uc744 \uc81c\uacf5\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4.</p> <ul> <li><code>userData</code>\ub294 \uc0ac\uc6a9\uc790 \uc218\uc900 \ub370\uc774\ud130\uc785\ub2c8\ub2e4.</li> <li><code>classData</code>\ub294 \ud074\ub798\uc2a4 \uc218\uc900 \ub370\uc774\ud130\uc785\ub2c8\ub2e4. \uc989, \uc0ac\uc6a9\uc790\uac00 \ub2e4\ub978 \ud074\ub798\uc2a4\uc5d0 \uc788\ub294 \uba85\ub839\uc774\ub098 \uc785\ub825\uc73c\ub85c \uc774\ub3d9\ud560 \ub54c\uae4c\uc9c0 \ub370\uc774\ud130\uac00 \uc800\uc7a5\ub429\ub2c8\ub2e4. (\ud568\uc218 \ubaa8\ub4dc\uc5d0\uc11c\ub294 \uc0ac\uc6a9\uc790 \ub370\uc774\ud130\ucc98\ub7fc \uc791\ub3d9\ud569\ub2c8\ub2e4)</li> </ul> <p>\uae30\ubcf8\uc801\uc73c\ub85c \uad6c\ud604\uc740 <code>ConcurrentHashMap</code>\uc744 \ud1b5\ud574 \uc81c\uacf5\ub418\uc9c0\ub9cc, \uc6d0\ud558\ub294 \ub370\uc774\ud130 \uc800\uc7a5 \ub3c4\uad6c\ub97c \uc0ac\uc6a9\ud558\uc5ec <code>UserData</code> \ubc0f <code>ClassData</code> \uc778\ud130\ud398\uc774\uc2a4\ub97c \ud1b5\ud574 \ubcc0\uacbd\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4.</p> <p>Caution</p> <p>\ud544\uc694\ud55c \ucf54\ub4dc \uc0dd\uc131 \ubc14\uc778\ub529\uc744 \uc0ac\uc6a9\ud560 \uc218 \uc788\ub3c4\ub85d gradle <code>kspKotlin</code> \ub610\ub294 \uad00\ub828 KSP \ud0dc\uc2a4\ud06c\ub97c \uc2e4\ud589\ud558\ub294 \uac83\uc744 \uc78a\uc9c0 \ub9c8\uc138\uc694.</p> <p>\ubcc0\uacbd\ud558\ub824\uba74 \uad6c\ud604 \uc544\ub798\uc5d0 <code>@CtxProvider</code> \uc5b4\ub178\ud14c\uc774\uc158\uc744 \ucd94\uac00\ud558\uace0 gradle KSP \ud0dc\uc2a4\ud06c(\ub610\ub294 \ube4c\ub4dc)\ub97c \uc2e4\ud589\ud558\uae30\ub9cc \ud558\uba74 \ub429\ub2c8\ub2e4.</p> <pre><code>@CtxProvider\nclass MyRedis : UserData&lt;String&gt; {\n    // ...\n}\n</code></pre>"},{"location":"ko/Bot-Context/#_1","title":"\uad00\ub828 \ud56d\ubaa9","text":"<ul> <li>\ud648</li> <li>\uc5c5\ub370\uc774\ud2b8 \ud30c\uc2f1</li> </ul>"},{"location":"ko/Bot-configuration/","title":"\ubd07 \uad6c\uc131","text":"<p>\ub77c\uc774\ube0c\ub7ec\ub9ac\ub294 \ub2e4\uc591\ud55c \uad6c\uc131 \uc635\uc158\uc744 \uc81c\uacf5\ud558\uba70, <code>BotConfiguration</code> \ud074\ub798\uc2a4 \uc124\uba85\uc5d0\uc11c API \ucc38\uc870\ub97c \ud655\uc778\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4.</p> <p>\ubd07\uc744 \uad6c\uc131\ud558\ub294 \ub450 \uac00\uc9c0 \uc811\uadfc \ubc29\uc2dd\ub3c4 \uc788\uc2b5\ub2c8\ub2e4:</p>"},{"location":"ko/Bot-configuration/#configurator","title":"Configurator \ub78c\ub2e4","text":"<pre><code>// ...\nval bot = TelegramBot(\"BOT_TOKEN\") {\n  inputListener = RedisInputListenerImpl()\n  classManager = KoinClassManagerImpl()\n  logging {\n      botLogLevel = LogLvl.DEBUG\n  }\n}\n// ...\n</code></pre>"},{"location":"ko/Bot-configuration/#configloader","title":"ConfigLoader \uc778\ud130\ud398\uc774\uc2a4","text":"<p><code>ConfigLoader</code> \uc778\ud130\ud398\uc774\uc2a4\ub97c \ud1b5\ud574 \uad6c\uc131\ud560 \uc218\ub3c4 \uc788\uc2b5\ub2c8\ub2e4. \uc774\ub97c \uc0ac\uc6a9\ud558\uc5ec <code>properties</code>, <code>command line args</code> \ub4f1\uc758 \uc678\ubd80 \uc18c\uc2a4\uc5d0\uc11c \uc124\uc815\uc744 \ub85c\ub4dc\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4.</p> <p>\uc774 \uc778\ud130\ud398\uc774\uc2a4\uc758 \uad6c\ud604\uc740 \ubcf4\uc870 \uc0dd\uc131\uc790\ub97c \ud1b5\ud574 \uc804\ub2ec\ud560 \uc218 \uc788\uc73c\uba70, \uc778\uc2a4\ud134\uc2a4\ub294 \uc774\uc5d0 \ub530\ub77c \uad6c\uc131\ub429\ub2c8\ub2e4.</p> <pre><code>val bot = TelegramBot(ConfigLoaderImpl)\n</code></pre> <p>\ud604\uc7ac <code>ktgram-config-env</code>, <code>ktgram-config-toml</code>\uacfc \uac19\uc774 \uc774 \uc778\ud130\ud398\uc774\uc2a4\ub97c \uad6c\ud604\ud558\ub294 \uc5ec\ub7ec \ubaa8\ub4c8\uc774 \uc81c\uacf5\ub429\ub2c8\ub2e4.</p>"},{"location":"ko/Bot-configuration/#botconfiguration","title":"BotConfiguration \uac1c\uc694","text":""},{"location":"ko/Bot-configuration/#botconfiguration_1","title":"BotConfiguration","text":"<p><code>BotConfiguration</code> \ud074\ub798\uc2a4\ub294 \ubd07 \uad6c\uc131\uc758 \uc911\uc559 \ud5c8\ube0c\uc785\ub2c8\ub2e4. \ubd07 \uc2dd\ubcc4, API \ud638\uc2a4\ud2b8 \uc124\uc815, \ubd07\uc774 \ud14c\uc2a4\ud2b8 \ud658\uacbd\uc5d0\uc11c \uc791\ub3d9\ud558\ub294\uc9c0 \uc5ec\ubd80 \uacb0\uc815, \uc785\ub825 \ucc98\ub9ac, \ud074\ub798\uc2a4 \uad00\ub9ac, \uc785\ub825 \uc790\ub3d9 \uc81c\uac70 \uc81c\uc5b4 \uc18d\uc131\uc744 \ud3ec\ud568\ud569\ub2c8\ub2e4. \ub610\ud55c \uc18d\ub3c4 \uc81c\ud55c, HTTP \ud074\ub77c\uc774\uc5b8\ud2b8 \uad6c\uc131, \ub85c\uae45, \uc5c5\ub370\uc774\ud2b8 \uc218\uc2e0, \uba85\ub839 \uad6c\ubb38 \ubd84\uc11d\uc744 \uc704\ud55c \ub0b4\ubd80 \uc18d\uc131\uc744 \uc81c\uacf5\ud569\ub2c8\ub2e4.</p>"},{"location":"ko/Bot-configuration/#_1","title":"\uc18d\uc131","text":"<ul> <li><code>identifier</code>: \ub2e4\uc911 \ubd07 \ucc98\ub9ac \uc911 \uc11c\ub85c \ub2e4\ub978 \ubd07 \uc778\uc2a4\ud134\uc2a4\ub97c \uc2dd\ubcc4\ud569\ub2c8\ub2e4.</li> <li><code>apiHost</code>: Telegram API\uc758 \ud638\uc2a4\ud2b8\uc785\ub2c8\ub2e4.</li> <li><code>isTestEnv</code>: \ubd07\uc774 \ud14c\uc2a4\ud2b8 \ud658\uacbd\uc5d0\uc11c \uc791\ub3d9\ud558\ub294\uc9c0 \uc5ec\ubd80\ub97c \ub098\ud0c0\ub0b4\ub294 \ud50c\ub798\uadf8\uc785\ub2c8\ub2e4.</li> <li><code>inputListener</code>: \uc785\ub825 \ucc98\ub9ac \ud074\ub798\uc2a4\uc758 \uc778\uc2a4\ud134\uc2a4\uc785\ub2c8\ub2e4.</li> <li><code>classManager</code>: \ud074\ub798\uc2a4\ub97c \uac00\uc838\uc624\ub294 \ub370 \uc0ac\uc6a9\ub418\ub294 \uad00\ub9ac\uc790\uc785\ub2c8\ub2e4.</li> <li><code>inputAutoRemoval</code>: \ucc98\ub9ac \uc911 \uc785\ub825 \uc9c0\uc810\uc758 \uc790\ub3d9 \uc0ad\uc81c\ub97c \uc870\uc808\ud558\ub294 \ud50c\ub798\uadf8\uc785\ub2c8\ub2e4.</li> <li><code>exceptionHandlingStrategy</code>: \uc608\uc678 \ucc98\ub9ac \uc804\ub7b5\uc744 \uc815\uc758\ud569\ub2c8\ub2e4.<ul> <li><code>CollectToChannel</code> - <code>TgUpdateHandler.caughtExceptions</code>\ub85c \uc218\uc9d1\ud569\ub2c8\ub2e4.</li> <li><code>Throw</code> - <code>TgException</code>\uc73c\ub85c \ub2e4\uc2dc \ub358\uc9d1\ub2c8\ub2e4.</li> <li><code>DoNothing</code> - \uc544\ubb34\uac83\ub3c4 \ud558\uc9c0 \uc54a\uc2b5\ub2c8\ub2e4 :)</li> <li><code>Handle</code> - \uc0ac\uc6a9\uc790 \uc815\uc758 \ud578\ub4e4\ub7ec\ub97c \uc124\uc815\ud569\ub2c8\ub2e4.</li> </ul> </li> <li><code>throwExOnActionsFailure</code>: \ubd07 \uc694\uccad\uc774 \uc2e4\ud328\ud560 \ub54c \uc608\uc678\ub97c \ub358\uc9d1\ub2c8\ub2e4.</li> </ul>"},{"location":"ko/Bot-configuration/#_2","title":"\uad6c\uc131 \ube14\ub85d","text":"<p><code>BotConfiguration</code>\uc740 \ub0b4\ubd80 \uad6c\uc131 \uc694\uc18c\ub97c \uad6c\uc131\ud558\ub294 \uae30\ub2a5\ub3c4 \uc81c\uacf5\ud569\ub2c8\ub2e4:</p> <ul> <li><code>httpClient(block: HttpConfiguration.() -&gt; Unit)</code>: HTTP \ud074\ub77c\uc774\uc5b8\ud2b8\ub97c \uad6c\uc131\ud569\ub2c8\ub2e4.</li> <li><code>logging(block: LoggingConfiguration.() -&gt; Unit)</code>: \ub85c\uae45\uc744 \uad6c\uc131\ud569\ub2c8\ub2e4.</li> <li><code>rateLimiter(block: RateLimiterConfiguration.() -&gt; Unit)</code>: \uc694\uccad \uc81c\ud55c\uc744 \uad6c\uc131\ud569\ub2c8\ub2e4.</li> <li><code>updatesListener(block: UpdatesListenerConfiguration.() -&gt; Unit)</code>: \uc5c5\ub370\uc774\ud2b8 \uc218\uc2e0\uae30\ub97c \uad6c\uc131\ud569\ub2c8\ub2e4.</li> <li><code>commandParsing(block: CommandParsingConfiguration.() -&gt; Unit)</code>: \uba85\ub839 \uad6c\ubb38 \ubd84\uc11d \ud328\ud134\uc744 \uc9c0\uc815\ud569\ub2c8\ub2e4.</li> </ul>"},{"location":"ko/Bot-configuration/#_3","title":"\uad00\ub828 \uad6c\uc131 \ud074\ub798\uc2a4","text":""},{"location":"ko/Bot-configuration/#ratelimiterconfiguration","title":"RateLimiterConfiguration","text":"<p>\uc804\uc5ed \uc18d\ub3c4 \uc81c\ud55c\uc744 \uad6c\uc131\ud569\ub2c8\ub2e4.</p> <ul> <li><code>limits</code>: \uc804\uc5ed \uc18d\ub3c4 \uc81c\ud55c\uc785\ub2c8\ub2e4.</li> <li><code>mechanism</code>: \uc18d\ub3c4 \uc81c\ud55c\uc5d0 \uc0ac\uc6a9\ub418\ub294 \uba54\ucee4\ub2c8\uc998, \uae30\ubcf8\uac12\uc740 TokenBucket \uc54c\uace0\ub9ac\uc998\uc785\ub2c8\ub2e4.</li> <li><code>exceededAction</code>: \uc81c\ud55c\uc744 \ucd08\uacfc\ud560 \ub54c \uc801\uc6a9\ub418\ub294 \uc791\uc5c5\uc785\ub2c8\ub2e4.</li> </ul>"},{"location":"ko/Bot-configuration/#httpconfiguration","title":"HttpConfiguration","text":"<p>\ubd07\uc758 HTTP \ud074\ub77c\uc774\uc5b8\ud2b8 \uad6c\uc131\uc744 \ud3ec\ud568\ud569\ub2c8\ub2e4.</p> <ul> <li><code>requestTimeoutMillis</code>: \uc694\uccad \uc81c\ud55c \uc2dc\uac04(\ubc00\ub9ac\ucd08 \ub2e8\uc704).</li> <li><code>connectTimeoutMillis</code>: \uc5f0\uacb0 \uc81c\ud55c \uc2dc\uac04(\ubc00\ub9ac\ucd08 \ub2e8\uc704).</li> <li><code>socketTimeoutMillis</code>: \uc18c\ucf13 \uc81c\ud55c \uc2dc\uac04(\ubc00\ub9ac\ucd08 \ub2e8\uc704).</li> <li><code>maxRequestRetry</code>: HTTP \uc694\uccad\uc758 \ucd5c\ub300 \uc7ac\uc2dc\ub3c4 \ud69f\uc218\uc785\ub2c8\ub2e4.</li> <li><code>retryStrategy</code>: \uc7ac\uc2dc\ub3c4 \uc804\ub7b5, \uc0ac\uc6a9\uc790 \uc815\uc758 \uac00\ub2a5\ud569\ub2c8\ub2e4.</li> <li><code>retryDelay</code>: \uac01 \uc7ac\uc2dc\ub3c4\uc5d0\uc11c \uc81c\ud55c \uc2dc\uac04\uc758 \uc2b9\uc218\uc785\ub2c8\ub2e4.</li> <li><code>proxy</code>: HTTP \ud638\ucd9c\uc744 \uc704\ud55c \ud504\ub85d\uc2dc \uc124\uc815\uc785\ub2c8\ub2e4.</li> <li><code>additionalHeaders</code>: \ubaa8\ub4e0 \uc694\uccad\uc5d0 \uc801\uc6a9\ub418\ub294 \ud5e4\ub354\uc785\ub2c8\ub2e4.</li> </ul>"},{"location":"ko/Bot-configuration/#loggingconfiguration","title":"LoggingConfiguration","text":"<p>\ubd07 \uc791\uc5c5 \ubc0f HTTP \uc694\uccad\uc5d0 \ub300\ud55c \ub85c\uae45 \uc218\uc900\uc744 \uad00\ub9ac\ud569\ub2c8\ub2e4.</p> <ul> <li><code>botLogLevel</code>: \ubd07 \uc791\uc5c5\uc5d0 \ub300\ud55c \ub85c\uadf8 \uc218\uc900\uc785\ub2c8\ub2e4.</li> <li><code>httpLogLevel</code>: HTTP \uc694\uccad\uc5d0 \ub300\ud55c \ub85c\uadf8 \uc218\uc900\uc785\ub2c8\ub2e4.</li> </ul>"},{"location":"ko/Bot-configuration/#updateslistenerconfiguration","title":"UpdatesListenerConfiguration","text":"<p>\uc5c5\ub370\uc774\ud2b8 \uac00\uc838\uc624\uae30\uc640 \uad00\ub828\ub41c \ub9e4\uac1c\ubcc0\uc218\ub97c \uad6c\uc131\ud569\ub2c8\ub2e4.</p> <ul> <li><code>dispatcher</code>: \ub4e4\uc5b4\uc624\ub294 \uc5c5\ub370\uc774\ud2b8\ub97c \uc218\uc9d1\ud558\ub294 \ub514\uc2a4\ud328\ucc98\uc785\ub2c8\ub2e4.</li> <li><code>processingDispatcher</code>: \uc5c5\ub370\uc774\ud2b8\ub97c \ucc98\ub9ac\ud558\ub294 \ub514\uc2a4\ud328\ucc98\uc785\ub2c8\ub2e4.</li> <li><code>pullingDelay</code>: \uac01 \uac00\uc838\uc624\uae30 \uc694\uccad \ud6c4 \uc9c0\uc5f0 \uc2dc\uac04\uc785\ub2c8\ub2e4.</li> <li><code>updatesPollingTimeout</code>: \uc7a5\uae30 \ud3f4\ub9c1 \uba54\ucee4\ub2c8\uc998\uc5d0 \ub300\ud55c \uc81c\ud55c \uc2dc\uac04 \uc635\uc158\uc785\ub2c8\ub2e4.</li> </ul>"},{"location":"ko/Bot-configuration/#commandparsingconfiguration","title":"CommandParsingConfiguration","text":"<p>\uba85\ub839 \uad6c\ubb38 \ubd84\uc11d\uc5d0 \ub300\ud55c \ub9e4\uac1c\ubcc0\uc218\ub97c \uc9c0\uc815\ud569\ub2c8\ub2e4.</p> <ul> <li><code>commandDelimiter</code>: \uba85\ub839\uacfc \ub9e4\uac1c\ubcc0\uc218 \uc0ac\uc774\uc758 \uad6c\ubd84\uc790\uc785\ub2c8\ub2e4.</li> <li><code>parametersDelimiter</code>: \ub9e4\uac1c\ubcc0\uc218 \uc0ac\uc774\uc758 \uad6c\ubd84\uc790\uc785\ub2c8\ub2e4.</li> <li><code>parameterValueDelimiter</code>: \ub9e4\uac1c\ubcc0\uc218\uc758 \ud0a4\uc640 \uac12 \uc0ac\uc774\uc758 \uad6c\ubd84\uc790\uc785\ub2c8\ub2e4.</li> <li><code>restrictSpacesInCommands</code>: \uba85\ub839\uc758 \uacf5\ubc31\uc744 \uba85\ub839\uc758 \ub05d\uc73c\ub85c \ucc98\ub9ac\ud560\uc9c0 \uc5ec\ubd80\ub97c \ub098\ud0c0\ub0b4\ub294 \ud50c\ub798\uadf8\uc785\ub2c8\ub2e4.</li> <li><code>useIdentifierInGroupCommands</code>: \ubd07 \uc2dd\ubcc4\uc790\ub97c \uc0ac\uc6a9\ud558\uc5ec @\ub97c \ud3ec\ud568\ud558\ub294 \uba85\ub839\uc744 \uc77c\uce58\uc2dc\ud0b5\ub2c8\ub2e4.</li> </ul>"},{"location":"ko/Bot-configuration/#_4","title":"\uad6c\uc131 \uc608\uc2dc","text":"<p>\ub2e4\uc74c\uc740 \uc774\ub7ec\ud55c \ud074\ub798\uc2a4\ub97c \uc0ac\uc6a9\ud558\uc5ec \ubd07\uc744 \uad6c\uc131\ud558\ub294 \uc608\uc2dc\uc785\ub2c8\ub2e4:</p> <pre><code>val bot = TelegramBot(\"TOKEN\") {\n    identifier = \"MyBot\",\n    apiHost = \"https://api.telegram.org\",\n    isTestEnv = true,\n    inputListener = InputListenerMapImpl(),\n    classManager = ClassManagerImpl(),\n\n    httpClient {\n        requestTimeoutMillis = 5000L\n        connectTimeoutMillis = 3000L\n        socketTimeoutMillis = 2000L\n    }\n    logging {\n        botLogLevel = LogLvl.DEBUG\n        httpLogLevel = HttpLogLevel.BODY\n    }\n    updatesListener {\n        dispatcher = Dispatchers.IO\n        processingDispatcher = Dispatchers.Unconfined\n        pullingDelay = 1000L\n    }\n    commandParsing {\n        commandDelimiter = '*'\n        parametersDelimiter = '&amp;'\n        restrictSpacesInCommands = true\n    }\n}\n</code></pre> <p>\uc774 \uad6c\uc131\uc740 \ud2b9\uc815 \uc2dd\ubcc4\uc790\ub97c \uc0ac\uc6a9\ud558\uc5ec \ubd07\uc744 \uc124\uc815\ud558\uace0, \ud14c\uc2a4\ud2b8 \ud658\uacbd \ubaa8\ub4dc\ub97c \ud65c\uc131\ud654\ud558\uba70, \uc18d\ub3c4 \uc81c\ud55c, HTTP \ud074\ub77c\uc774\uc5b8\ud2b8 \uc124\uc815, \ub85c\uae45 \uc218\uc900, \uc5c5\ub370\uc774\ud2b8 \uc218\uc2e0\uae30 \ub9e4\uac1c\ubcc0\uc218, \uba85\ub839 \uad6c\ubb38 \ubd84\uc11d \uaddc\uce59\uc744 \uad6c\uc131\ud569\ub2c8\ub2e4.</p> <p>\uac1c\ubc1c\uc790\ub294 \uc774\ub7ec\ud55c \uad6c\uc131 \uc635\uc158\uc744 \ud65c\uc6a9\ud558\uc5ec \ud2b9\uc815 \uc694\uad6c \uc0ac\ud56d\uc744 \ucda9\uc871\ud558\uace0 \ub2e4\uc591\ud55c \uc6b4\uc601 \uc2dc\ub098\ub9ac\uc624\uc5d0\uc11c \uc131\ub2a5\uc744 \ucd5c\uc801\ud654\ud558\ub3c4\ub85d \ubd07\uc744 \uc138\ubc00\ud558\uac8c \uc870\uc815\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4.</p>"},{"location":"ko/F.A.Q/#abstractmethoderror","title":"<code>AbstractMethodError</code> \uc608\uc678","text":"<p>\uc560\ud50c\ub9ac\ucf00\uc774\uc158 \uc2dc\uc791 \uc2dc \ub2e4\uc74c\uacfc \uac19\uc740 \uc608\uc678\uac00 \ubc1c\uc0dd\ud558\ub294 \uacbd\uc6b0:</p> <pre><code>Exception in thread \"DefaultDispatcher-worker-1\" java.lang.AbstractMethodError: 'kotlinx.serialization.KSerializer[] kotlinx.serialization.internal.GeneratedSerializer.typeParametersSerializers()'\n    at eu.vendeli.tgbot.types.options.GetUpdatesOptions$$serializer.typeParametersSerializers(GetUpdatesOptions.kt:6)\n</code></pre> <p>\uc774\ub294 \ube4c\ub4dc \uc2dc\uc2a4\ud15c\uc774 \ub0b4\ubd80 \uba54\ucee4\ub2c8\uc998\uc774 \ub2e4\ub978 \uc774\uc804 \ubc84\uc804\uc758 serialization \ub77c\uc774\ube0c\ub7ec\ub9ac\ub97c \ud574\uacb0\ud558\uae30 \ub54c\ubb38\uc785\ub2c8\ub2e4. \uc774\ub97c \ud574\uacb0\ud558\ub824\uba74 \ub354 \ucd5c\uc2e0 \ubc84\uc804\uc744 \uc0ac\uc6a9\ud558\ub3c4\ub85d \uc124\uc815\ud574\uc57c \ud569\ub2c8\ub2e4. \uc608\ub97c \ub4e4\uc5b4 \ube4c\ub4dc\uc2a4\ud06c\ub9bd\ud2b8\uc5d0 \ub2e4\uc74c\uc744 \ucd94\uac00\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4:</p> <pre><code>configurations.all {\n    resolutionStrategy.eachDependency {\n        val serdeVer = \"x.x.x\" // 1.8.0 \uc774\uc0c1\uc774\uc5b4\uc57c \ud568\n        when(requested.module.toString()) {\n            // json serialiazation\n            \"org.jetbrains.kotlinx:kotlinx-serialization-json\" -&gt; useVersion(serdeVer)\n            \"org.jetbrains.kotlinx:kotlinx-serialization-json-jvm\" -&gt; useVersion(serdeVer)\n            \"org.jetbrains.kotlinx:kotlinx-serialization-core\" -&gt; useVersion(serdeVer)\n            \"org.jetbrains.kotlinx:kotlinx-serialization-core-jvm\" -&gt; useVersion(serdeVer)\n            \"org.jetbrains.kotlinx:kotlinx-serialization-bom\" -&gt; useVersion(serdeVer)\n        }\n    }\n}\n</code></pre> <p>(\ubcc0\uacbd \ub85c\uadf8\uc5d0 \uc798 \uc124\uba85\ub418\uc5b4 \uc788\uc5c8\ub2e4\uba74 \uc774 \ubb38\uc81c\ub85c \uc778\ud574 \ub9ce\uc740 \ubcf4\uace0\uc11c\ub97c \ubc1b\uc9c0 \uc54a\uc558\uc744 \uac83\uc785\ub2c8\ub2e4)</p>"},{"location":"ko/F.A.Q/#_1","title":"\uba54\uc11c\ub4dc\uc758 \uc751\ub2f5\uc744 \uc5b4\ub5bb\uac8c \uc5bb\ub098\uc694?","text":"<p>\uc751\ub2f5\uc744 \ubc1b\uace0 \uc791\uc5c5\ud560 \uc218 \uc788\uc73c\ub824\uba74 <code>send</code> \ub300\uc2e0 \uba54\uc11c\ub4dc \ub05d\uc5d0 <code>sendReturning</code>\uc744 \uc0ac\uc6a9\ud574\uc57c \ud569\ub2c8\ub2e4.</p> <p>\uc774 \uacbd\uc6b0 <code>Response</code> \ud074\ub798\uc2a4\uac00 \ubc18\ud658\ub418\uba70, \uc774\ub294 \uc751\ub2f5, \uc131\uacf5 \ub610\ub294 \uc2e4\ud328\ub97c \ud3ec\ud568\ud569\ub2c8\ub2e4. \uadf8 \ud6c4 \uc2e4\ud328\ub97c \ucc98\ub9ac\ud558\uac70\ub098 \ub2e8\uc21c\ud788 <code>getOrNull()</code>\uc744 \ud638\ucd9c\ud574\uc57c \ud569\ub2c8\ub2e4.</p> <p>\uad00\ub828 \uc139\uc158: \uc751\ub2f5 \ucc98\ub9ac.</p>"},{"location":"ko/F.A.Q/#spring-boot-devtools","title":"<code>spring-boot-devtools</code> \uc0ac\uc6a9 \uc2dc \uc624\ub958\uac00 \ubc1c\uc0dd\ud569\ub2c8\ub2e4","text":"<p>\uc774\ub294 <code>spring-boot-devtools</code>\uac00 \uc790\uccb4 <code>classloader</code>\ub97c \uac00\uc9c0\uace0 \uc788\uace0 \uba54\uc11c\ub4dc\ub97c \ucc3e\uc9c0 \ubabb\ud558\uae30 \ub54c\ubb38\uc785\ub2c8\ub2e4.</p> <p><code>resources/META-INF/spring-devtools.properties</code>\uc5d0 \ub2e4\uc74c\uc744 \ucd94\uac00\ud574\uc57c \ud569\ub2c8\ub2e4:</p> <pre><code>restart.include.generated=/eu.vendeli\n</code></pre>"},{"location":"ko/F.A.Q/#ktor","title":"ktor \uc5d4\uc9c4\uc744 \ubcc0\uacbd\ud558\ub294 \ubc29\ubc95","text":"<p>\ud074\ub77c\uc774\uc5b8\ud2b8\uc5d0\uc11c \uc0ac\uc6a9\ud558\ub294 \uc5d4\uc9c4\uc744 \ubcc0\uacbd\ud558\ub824\uba74 \ud50c\ub7ec\uadf8\uc778 \uc124\uc815\uc758 \ub9e4\uac1c\ubcc0\uc218\ub97c \uac04\ub2e8\ud788 \ubcc0\uacbd\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4.</p>"},{"location":"ko/F.A.Q/#logging","title":"\uc120\ud638\ud558\ub294 logging \uc81c\uacf5\uc790\ub97c \uc0ac\uc6a9\ud558\ub294 \ubc29\ubc95","text":"<p>\ub77c\uc774\ube0c\ub7ec\ub9ac\ub294 <code>slf4j-api</code>\ub97c \uc0ac\uc6a9\ud558\uba70, \uc81c\uacf5\uc790\ub97c \uc0ac\uc6a9\ud558\ub824\uba74 \uc885\uc18d\uc131\uc5d0 \ucd94\uac00\ud558\uae30\ub9cc \ud558\uba74 \ub429\ub2c8\ub2e4.</p> <p>\ub77c\uc774\ube0c\ub7ec\ub9ac \ud50c\ub7ec\uadf8\uc778\uc740 \uc790\ub3d9\uc73c\ub85c \uc81c\uacf5\uc790 \uc0ac\uc6a9\uc744 \uac10\uc9c0\ud569\ub2c8\ub2e4. \uc81c\uacf5\uc790\uac00 \ub204\ub77d\ub41c \uacbd\uc6b0 \uae30\ubcf8\uc801\uc73c\ub85c <code>logback</code>\uc774 \uc0ac\uc6a9\ub429\ub2c8\ub2e4.</p>"},{"location":"ko/F.A.Q/#long-polling","title":"long-polling \ud578\ub4e4\ub7ec \ub0b4\uc5d0\uc11c \ub124\ud2b8\uc6cc\ud06c \uc608\uc678 \ucc98\ub9ac","text":"<p>\uc608\ub97c \ub4e4\uc5b4 \ubd88\uc548\uc815\ud55c \uc5f0\uacb0\uc774 \uc788\uace0 \uc774\ub85c \uc778\ud574 \uc624\ub958\ub97c \uc7a1\uc544\uc57c \ud558\ub294 \uacbd\uc6b0 \ub2e4\uc74c \uc811\uadfc \ubc29\uc2dd\uc774 \ub3c4\uc6c0\uc774 \ub420 \uc218 \uc788\uc2b5\ub2c8\ub2e4:</p> <pre><code>fun main() {\n    val bot = TelegramBot(\"TOKEN\")\n\n    try {\n        bot.handleUpdates()\n    } catch (e: Exception) {\n        // \ud544\uc694\ud55c \uacbd\uc6b0 \ucc98\ub9ac\n\n        bot.update.stopListener()\n        bot.handleUpdates()\n    }\n}\n</code></pre> <p>\ub610\ud55c spring-starter\uc5d0\uc11c \uc5b4\ub5bb\uac8c \uad6c\ud604\ub418\uc5c8\ub294\uc9c0 \ud655\uc778\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4.</p>"},{"location":"ko/FSM-and-Conversation-handling/","title":"FSM \ubc0f \ub300\ud654 \ucc98\ub9ac","text":"<p>\ub77c\uc774\ube0c\ub7ec\ub9ac\ub294 \ub610\ud55c FSM(\uc720\ud55c \uc0c1\ud0dc \uae30\uacc4) \uba54\ucee4\ub2c8\uc998\uc744 \uc9c0\uc6d0\ud569\ub2c8\ub2e4. \uc774\ub294 \uc798\ubabb\ub41c \uc785\ub825 \ucc98\ub9ac\ub97c \ud1b5\ud574 \uc0ac\uc6a9\uc790 \uc785\ub825\uc744 \uc810\uc9c4\uc801\uc73c\ub85c \ucc98\ub9ac\ud558\ub294 \uba54\ucee4\ub2c8\uc998\uc785\ub2c8\ub2e4.</p> <p>Note</p> <p>TL;DR: \uc608\uc81c\ub294 \uc5ec\uae30\uc5d0\uc11c \ud655\uc778\ud558\uc138\uc694.</p>"},{"location":"ko/FSM-and-Conversation-handling/#_1","title":"\uc774\ub860\uc0c1","text":"<p>\uc0ac\uc6a9\uc790 \uc124\ubb38 \uc870\uc0ac\ub97c \uc218\uc9d1\ud574\uc57c \ud558\ub294 \uc0c1\ud669\uc744 \uc0c1\uc0c1\ud574 \ubcf4\uc138\uc694. \ud55c \ub2e8\uacc4\uc5d0\uc11c \uc0ac\ub78c\uc758 \ubaa8\ub4e0 \ub370\uc774\ud130\ub97c \uc694\uccad\ud560 \uc218 \uc788\uc9c0\ub9cc, \ub9e4\uac1c\ubcc0\uc218 \uc911 \ud558\ub098\uc758 \uc785\ub825\uc774 \uc798\ubabb\ub418\uba74 \uc0ac\uc6a9\uc790\uc640 \uc6b0\ub9ac \ubaa8\ub450\uc5d0\uac8c \uc5b4\ub824\uc6b8 \uac83\uc774\uba70, \ud2b9\uc815 \uc785\ub825 \ub370\uc774\ud130\uc5d0 \ub530\ub77c \uac01 \ub2e8\uacc4\uac00 \ub2e4\ub97c \uc218 \uc788\uc2b5\ub2c8\ub2e4.</p> <p>\uc774\uc81c \ub2e8\uacc4\ubcc4\ub85c \ub370\uc774\ud130\ub97c \uc785\ub825\ud558\ub294 \uc0c1\ud669\uc744 \uc0c1\uc0c1\ud574 \ubcf4\uc138\uc694. \ubd07\uc774 \uc0ac\uc6a9\uc790\uc640 \ub300\ud654 \ubaa8\ub4dc\ub85c \ub4e4\uc5b4\uac11\ub2c8\ub2e4.</p> <p> </p> <p>\ub179\uc0c9 \ud654\uc0b4\ud45c\ub294 \uc624\ub958 \uc5c6\uc774 \ub2e8\uacc4\ub97c \uc804\ud658\ud558\ub294 \uacfc\uc815\uc744 \ub098\ud0c0\ub0b4\uace0, \ud30c\ub780\uc0c9 \ud654\uc0b4\ud45c\ub294 \ud604\uc7ac \uc0c1\ud0dc\ub97c \uc800\uc7a5\ud558\uace0 \uc7ac\uc785\ub825\uc744 \uae30\ub2e4\ub9ac\ub294 \uac83\uc744 \uc758\ubbf8\ud569\ub2c8\ub2e4(\uc608: \uc0ac\uc6a9\uc790\uac00 -100\uc138\ub77c\uace0 \uc785\ub825\ud558\uba74 \ub2e4\uc2dc \ub098\uc774\ub97c \ubb3b\uc2b5\ub2c8\ub2e4), \ube68\uac04\uc0c9 \ud654\uc0b4\ud45c\ub294 \ubaa8\ub4e0 \uba85\ub839 \ub610\ub294 \uae30\ud0c0 \uc758\ubbf8 \uc788\ub294 \ucde8\uc18c\ub85c \uc778\ud574 \uc804\uccb4 \ud504\ub85c\uc138\uc2a4\ub97c \uc885\ub8cc\ud558\ub294 \uac83\uc744 \ubcf4\uc5ec\uc90d\ub2c8\ub2e4.</p>"},{"location":"ko/FSM-and-Conversation-handling/#_2","title":"\uc2e4\uc81c \uc801\uc6a9","text":"<p>Wizard \uc2dc\uc2a4\ud15c\uc740 Telegram \ubd07\uc5d0\uc11c \ub2e4\ub2e8\uacc4 \uc0ac\uc6a9\uc790 \uc0c1\ud638\uc791\uc6a9\uc744 \uac00\ub2a5\ud558\uac8c \ud569\ub2c8\ub2e4. \uc0ac\uc6a9\uc790\ub97c \uc77c\ub828\uc758 \ub2e8\uacc4\ub97c \ud1b5\ud574 \uc548\ub0b4\ud558\uace0, \uc785\ub825\uc744 \uac80\uc99d\ud558\uba70, \uc0c1\ud0dc\ub97c \uc800\uc7a5\ud558\uace0, \ub2e8\uacc4 \uac04\uc5d0 \uc804\ud658\ud569\ub2c8\ub2e4.</p> <p>\uc8fc\uc694 \uc774\uc810: - \ud0c0\uc785 \uc548\uc804: \uc0c1\ud0dc \uc811\uadfc\uc744 \uc704\ud55c \ucef4\ud30c\uc77c \ud0c0\uc784 \ud0c0\uc785 \uac80\uc0ac - \uc120\uc5b8\uc801: \uc911\ucca9 \ud074\ub798\uc2a4/\uac1d\uccb4\ub85c \ub2e8\uacc4 \uc815\uc758 - \uc720\uc5f0\uc131: \uc870\uac74\ubd80 \uc804\ud658, \uc810\ud504 \ubc0f \uc7ac\uc2dc\ub3c4 \uc9c0\uc6d0 - \uc0c1\ud0dc \uc720\uc9c0: \ud50c\ub7ec\uadf8 \uac00\ub2a5\ud55c \uc800\uc7a5\uc18c \ubc31\uc5d4\ub4dc\ub97c \ud1b5\ud55c \uc790\ub3d9 \uc0c1\ud0dc \uc9c0\uc18d\uc131 - \ud1b5\ud569: \uae30\uc874 Activity \uc2dc\uc2a4\ud15c\uacfc \ud1b5\ud569</p>"},{"location":"ko/FSM-and-Conversation-handling/#_3","title":"\ud575\uc2ec \uac1c\ub150","text":""},{"location":"ko/FSM-and-Conversation-handling/#wizardstep","title":"WizardStep","text":"<p><code>WizardStep</code>\uc740 Wizard \ud750\ub984\uc758 \ub2e8\uc77c \ub2e8\uacc4\ub97c \ub098\ud0c0\ub0c5\ub2c8\ub2e4. \uac01 \ub2e8\uacc4\ub294 \ub2e4\uc74c\uc744 \uad6c\ud604\ud574\uc57c \ud569\ub2c8\ub2e4:</p> <ul> <li><code>onEntry(ctx: WizardContext)</code>: \uc0ac\uc6a9\uc790\uac00 \uc774 \ub2e8\uacc4\uc5d0 \ub4e4\uc5b4\uc62c \ub54c \ud638\ucd9c\ub429\ub2c8\ub2e4. \uc0ac\uc6a9\uc790\uc5d0\uac8c \ud504\ub86c\ud504\ud2b8\ub97c \ud45c\uc2dc\ud558\ub294 \ub370 \uc0ac\uc6a9\ud569\ub2c8\ub2e4.</li> <li><code>onRetry(ctx: WizardContext)</code>: \uac80\uc99d\uc774 \uc2e4\ud328\ud558\uace0 \ub2e8\uacc4\ub97c \uc7ac\uc2dc\ub3c4\ud574\uc57c \ud560 \ub54c \ud638\ucd9c\ub429\ub2c8\ub2e4. \uc624\ub958 \uba54\uc2dc\uc9c0\ub97c \ud45c\uc2dc\ud558\ub294 \ub370 \uc0ac\uc6a9\ud569\ub2c8\ub2e4.</li> <li><code>validate(ctx: WizardContext): Transition</code>: \ud604\uc7ac \uc785\ub825\uc744 \uac80\uc99d\ud558\uace0 \ub2e4\uc74c\uc5d0 \ubb34\uc5c7\uc774 \ubc1c\uc0dd\ud560\uc9c0 \ub098\ud0c0\ub0b4\ub294 <code>Transition</code>\uc744 \ubc18\ud658\ud569\ub2c8\ub2e4.</li> <li><code>store(ctx: WizardContext): Any?</code> (\uc120\ud0dd \uc0ac\ud56d): \uc774 \ub2e8\uacc4\uc5d0 \ub300\ud574 \uc9c0\uc18d\ud560 \uac12\uc744 \ubc18\ud658\ud569\ub2c8\ub2e4. \ub2e8\uacc4\uac00 \uc0c1\ud0dc\ub97c \uc800\uc7a5\ud558\uc9c0 \uc54a\uc73c\uba74 <code>null</code>\uc744 \ubc18\ud658\ud569\ub2c8\ub2e4.</li> </ul> <pre><code>object NameStep : WizardStep(isInitial = true) {\n    override suspend fun onEntry(ctx: WizardContext) {\n        message { \"What is your name?\" }.send(ctx.user, ctx.bot)\n    }\n\n    override suspend fun onRetry(ctx: WizardContext) {\n        message { \"Name cannot be empty. Please try again.\" }.send(ctx.user, ctx.bot)\n    }\n\n    override suspend fun validate(ctx: WizardContext): Transition {\n        return if (ctx.update.text.isNullOrBlank()) {\n            Transition.Retry\n        } else {\n            Transition.Next\n        }\n    }\n\n    override suspend fun store(ctx: WizardContext): String {\n        return ctx.update.text!!\n    }\n}\n</code></pre> <p>Note</p> <p>\uc5b4\ub5a4 \ub2e8\uacc4\uac00 \ucd08\uae30 \ub2e8\uacc4\ub85c \ud45c\uc2dc\ub418\uc9c0 \uc54a\uc73c\uba74 -&gt; \uccab \ubc88\uc9f8\ub85c \uc120\uc5b8\ub41c \ub2e8\uacc4\uac00 \uace0\ub824\ub429\ub2c8\ub2e4.</p>"},{"location":"ko/FSM-and-Conversation-handling/#transition","title":"Transition","text":"<p><code>Transition</code>\uc740 \uac80\uc99d \ud6c4 \ubb34\uc5c7\uc774 \ubc1c\uc0dd\ud560\uc9c0 \uacb0\uc815\ud569\ub2c8\ub2e4:</p> <ul> <li><code>Transition.Next</code>: \uc21c\uc11c\uc0c1 \ub2e4\uc74c \ub2e8\uacc4\ub85c \uc774\ub3d9</li> <li><code>Transition.JumpTo(step: KClass&lt;out WizardStep&gt;)</code>: \ud2b9\uc815 \ub2e8\uacc4\ub85c \uc810\ud504</li> <li><code>Transition.Retry</code>: \ud604\uc7ac \ub2e8\uacc4\ub97c \uc7ac\uc2dc\ub3c4(\uac80\uc99d \uc2e4\ud328)</li> <li><code>Transition.Finish</code>: Wizard \uc644\ub8cc</li> </ul> <pre><code>// \uc785\ub825\uc5d0 \ub530\ub978 \uc870\uac74\ubd80 \uc810\ud504\noverride suspend fun validate(ctx: WizardContext): Transition {\n    val age = ctx.update.text?.toIntOrNull()\n    return when {\n        age == null -&gt; Transition.Retry\n        age &lt; 18 -&gt; Transition.JumpTo(UnderageStep::class)\n        else -&gt; Transition.Next\n    }\n}\n</code></pre>"},{"location":"ko/FSM-and-Conversation-handling/#wizardcontext","title":"WizardContext","text":"<p><code>WizardContext</code>\ub294 \ub2e4\uc74c\uc5d0 \ub300\ud55c \uc811\uadfc\uc744 \uc81c\uacf5\ud569\ub2c8\ub2e4: - <code>user: User</code>: \ud604\uc7ac \uc0ac\uc6a9\uc790 - <code>update: ProcessedUpdate</code>: \ud604\uc7ac \uc5c5\ub370\uc774\ud2b8 - <code>bot: TelegramBot</code>: \ubd07 \uc778\uc2a4\ud134\uc2a4 - <code>userReference: UserChatReference</code>: \uc0c1\ud0dc \uc800\uc7a5\uc744 \uc704\ud55c \uc0ac\uc6a9\uc790 \ubc0f \ucc44\ud305 ID \ucc38\uc870</p> <p>KSP\uc5d0 \uc758\ud574 \uc0dd\uc131\ub41c \ud0c0\uc785 \uc548\uc804 \uc0c1\ud0dc \uc811\uadfc \uba54\uc11c\ub4dc\uac00 \ucd94\uac00\ub429\ub2c8\ub2e4.</p>"},{"location":"ko/FSM-and-Conversation-handling/#wizard","title":"Wizard \uc815\uc758","text":""},{"location":"ko/FSM-and-Conversation-handling/#_4","title":"\uae30\ubcf8 \uad6c\uc870","text":"<p>Wizard\ub294 <code>@WizardHandler</code> \uc5b4\ub178\ud14c\uc774\uc158\uc774 \ub2ec\ub9b0 \ud074\ub798\uc2a4 \ub610\ub294 \uac1d\uccb4\ub85c \uc815\uc758\ub429\ub2c8\ub2e4:</p> <pre><code>@WizardHandler(trigger = [\"/survey\"])\nobject SurveyWizard {\n    object NameStep : WizardStep(isInitial = true) {\n        // ... \ub2e8\uacc4 \uad6c\ud604\n    }\n\n    object AgeStep : WizardStep {\n        // ... \ub2e8\uacc4 \uad6c\ud604\n    }\n\n    object FinishStep : WizardStep {\n        // ... \ub2e8\uacc4 \uad6c\ud604\n    }\n}\n</code></pre>"},{"location":"ko/FSM-and-Conversation-handling/#_5","title":"\uc5b4\ub178\ud14c\uc774\uc158 \ub9e4\uac1c\ubcc0\uc218","text":"<p><code>@WizardHandler</code>\ub294 \ub2e4\uc74c\uc744 \ud5c8\uc6a9\ud569\ub2c8\ub2e4: - <code>trigger: Array&lt;String&gt;</code>: Wizard\ub97c \uc2dc\uc791\ud558\ub294 \uba85\ub839(\uc608: <code>[\"/start\", \"/survey\"]</code>) - <code>scope: Array&lt;UpdateType&gt;</code>: \uc218\uc2e0\ud560 \uc5c5\ub370\uc774\ud2b8 \uc720\ud615(\uae30\ubcf8\uac12: <code>[UpdateType.MESSAGE]</code>) - <code>stateManagers: Array&lt;KClass&lt;out WizardStateManager&lt;*&gt;&gt;&gt;</code>: \ub2e8\uacc4 \ub370\uc774\ud130\ub97c \uc800\uc7a5\ud558\uae30 \uc704\ud55c \uc0c1\ud0dc \uad00\ub9ac\uc790 \ud074\ub798\uc2a4</p>"},{"location":"ko/FSM-and-Conversation-handling/#_6","title":"\uc0c1\ud0dc \uad00\ub9ac","text":""},{"location":"ko/FSM-and-Conversation-handling/#wizardstatemanager","title":"WizardStateManager","text":"<p>\uc0c1\ud0dc\ub294 <code>WizardStateManager&lt;T&gt;</code> \uad6c\ud604\uc744 \uc0ac\uc6a9\ud558\uc5ec \uc800\uc7a5\ub429\ub2c8\ub2e4. \uac01 \uad00\ub9ac\uc790\ub294 \ud2b9\uc815 \ud0c0\uc785\uc744 \ucc98\ub9ac\ud569\ub2c8\ub2e4:</p> <pre><code>interface WizardStateManager&lt;T : Any&gt; {\n    suspend fun get(key: KClass&lt;out WizardStep&gt;, reference: UserChatReference): T?\n    suspend fun set(key: KClass&lt;out WizardStep&gt;, reference: UserChatReference, value: T)\n    suspend fun del(key: KClass&lt;out WizardStep&gt;, reference: UserChatReference)\n}\n</code></pre> <p>\ub2e4\uc74c\ub3c4 \ucc38\uc870\ud558\uc138\uc694: MapStateManager, MapStringStateManager, MapIntStateManager, MapLongStateManager."},{"location":"ko/FSM-and-Conversation-handling/#_7","title":"\uc790\ub3d9 \ub9e4\uce6d","text":"<p>KSP\ub294 <code>store()</code> \ubc18\ud658 \ud0c0\uc785\uc5d0 \ub530\ub77c \ub2e8\uacc4\ub97c \uc0c1\ud0dc \uad00\ub9ac\uc790\uc640 \ub9e4\uce6d\ud569\ub2c8\ub2e4:</p> <pre><code>@WizardHandler(\n    trigger = [\"/survey\"],\n    stateManagers = [StringStateManager::class, IntStateManager::class]\n)\nobject SurveyWizard {\n    object NameStep : WizardStep(isInitial = true) {\n        override suspend fun store(ctx: WizardContext): String {\n            return ctx.update.text!! // StringStateManager\uc640 \ub9e4\uce6d\n        }\n    }\n\n    object AgeStep : WizardStep {\n        override suspend fun store(ctx: WizardContext): Int {\n            return ctx.update.text!!.toInt() // IntStateManager\uc640 \ub9e4\uce6d\n        }\n    }\n}\n</code></pre>"},{"location":"ko/FSM-and-Conversation-handling/#_8","title":"\ub2e8\uacc4\ubcc4 \uc7ac\uc815\uc758","text":"<p><code>@WizardHandler.StateManager</code>\ub97c \uc0ac\uc6a9\ud558\uc5ec \ud2b9\uc815 \ub2e8\uacc4\uc758 \uc0c1\ud0dc \uad00\ub9ac\uc790\ub97c \uc7ac\uc815\uc758\ud569\ub2c8\ub2e4:</p> <pre><code>@WizardHandler(\n    trigger = [\"/survey\"],\n    stateManagers = [DefaultStateManager::class]\n)\nobject SurveyWizard {\n    object NameStep : WizardStep(isInitial = true) {\n        // DefaultStateManager \uc0ac\uc6a9\n    }\n\n    @WizardHandler.StateManager(CustomStateManager::class)\n    object AgeStep : WizardStep {\n        // CustomStateManager \uc0ac\uc6a9\n    }\n}\n</code></pre>"},{"location":"ko/FSM-and-Conversation-handling/#_9","title":"\ud0c0\uc785 \uc548\uc804 \uc0c1\ud0dc \uc811\uadfc","text":"<p>KSP\ub294 \uc0c1\ud0dc\ub97c \uc800\uc7a5\ud558\ub294 \uac01 \ub2e8\uacc4\uc5d0 \ub300\ud574 <code>WizardContext</code>\uc5d0\uc11c \ud0c0\uc785 \uc548\uc804 \ud655\uc7a5 \ud568\uc218\ub97c \uc0dd\uc131\ud569\ub2c8\ub2e4.</p>"},{"location":"ko/FSM-and-Conversation-handling/#_10","title":"\uc0dd\uc131\ub41c \ud568\uc218","text":"<p><code>String</code>\uc744 \uc800\uc7a5\ud558\ub294 \ub2e8\uacc4\uc758 \uacbd\uc6b0:</p> <pre><code>// KSP\uc5d0 \uc758\ud574 \uc790\ub3d9\uc73c\ub85c \uc0dd\uc131\ub428\nsuspend inline fun &lt;reified S : WizardStep&gt; WizardContext.getState(): String?\nsuspend inline fun &lt;reified S : WizardStep&gt; WizardContext.setState(value: String)\nsuspend inline fun &lt;reified S : WizardStep&gt; WizardContext.delState()\n</code></pre>"},{"location":"ko/FSM-and-Conversation-handling/#_11","title":"\uc0ac\uc6a9\ubc95","text":"<pre><code>object FinishStep : WizardStep {\n    override suspend fun onEntry(ctx: WizardContext) {\n        // \ud0c0\uc785 \uc548\uc804 \uc811\uadfc - String? (nullable) \ubc18\ud658\n        val name: String? = ctx.getState&lt;NameStep&gt;()\n\n        // \ud0c0\uc785 \uc548\uc804 \uc811\uadfc - Int? (nullable) \ubc18\ud658\n        val age: Int? = ctx.getState&lt;AgeStep&gt;()\n\n        val summary = buildString {\n            appendLine(\"Name: $name\")\n            appendLine(\"Age: $age\")\n        }\n\n        message { summary }.send(ctx.user, ctx.bot)\n    }\n\n    override suspend fun onRetry(ctx: WizardContext) = Unit\n\n    override suspend fun validate(ctx: WizardContext): Transition {\n        return Transition.Finish\n    }\n}\n</code></pre>"},{"location":"ko/FSM-and-Conversation-handling/#_12","title":"\ud3f4\ubc31 \uba54\uc11c\ub4dc","text":"<p>\ud0c0\uc785 \uc548\uc804 \uba54\uc11c\ub4dc\ub97c \uc0ac\uc6a9\ud560 \uc218 \uc5c6\ub294 \uacbd\uc6b0 \ud3f4\ubc31 \uba54\uc11c\ub4dc\ub97c \uc0ac\uc6a9\ud558\uc138\uc694:</p> <pre><code>// \ud3f4\ubc31 - Any? \ubc18\ud658\nval name = ctx.getState(NameStep::class)\n\n// \ud3f4\ubc31 - Any \ud5c8\uc6a9\nctx.setState(NameStep::class, \"John\")\nctx.delState(NameStep::class)\n</code></pre>"},{"location":"ko/FSM-and-Conversation-handling/#_13","title":"\uc804\uccb4 \uc608\uc81c","text":""},{"location":"ko/FSM-and-Conversation-handling/#wizard_1","title":"\uc0ac\uc6a9\uc790 \ub4f1\ub85d Wizard","text":"<pre><code>@WizardHandler(\n    trigger = [\"/register\"],\n    stateManagers = [StringStateManager::class, IntStateManager::class]\n)\nobject RegistrationWizard {\n    object NameStep : WizardStep(isInitial = true) {\n        override suspend fun onEntry(ctx: WizardContext) {\n            message { \"What is your name?\" }.send(ctx.user, ctx.bot)\n        }\n\n        override suspend fun onRetry(ctx: WizardContext) {\n            message { \"Please enter a valid name.\" }.send(ctx.user, ctx.bot)\n        }\n\n        override suspend fun validate(ctx: WizardContext): Transition {\n            val name = ctx.update.text?.trim()\n            return if (name.isNullOrBlank() || name.length &lt; 2) {\n                Transition.Retry\n            } else {\n                Transition.Next\n            }\n        }\n\n        override suspend fun store(ctx: WizardContext): String {\n            return ctx.update.text!!.trim()\n        }\n    }\n\n    object AgeStep : WizardStep {\n        override suspend fun onEntry(ctx: WizardContext) {\n            message { \"How old are you?\" }.send(ctx.user, ctx.bot)\n        }\n\n        override suspend fun onRetry(ctx: WizardContext) {\n            message { \"Please enter a valid age (must be a number).\" }.send(ctx.user, ctx.bot)\n        }\n\n        override suspend fun validate(ctx: WizardContext): Transition {\n            val age = ctx.update.text?.toIntOrNull()\n            return when {\n                age == null -&gt; Transition.Retry\n                age &lt; 0 || age &gt; 150 -&gt; Transition.Retry\n                age &lt; 18 -&gt; Transition.JumpTo(UnderageStep::class)\n                else -&gt; Transition.Next\n            }\n        }\n\n        override suspend fun store(ctx: WizardContext): Int {\n            return ctx.update.text!!.toInt()\n        }\n    }\n\n    object UnderageStep : WizardStep {\n        override suspend fun onEntry(ctx: WizardContext) {\n            message { \n                \"Sorry, you must be 18 or older to register.\" \n            }.send(ctx.user, ctx.bot)\n        }\n\n        override suspend fun onRetry(ctx: WizardContext) = Unit\n\n        override suspend fun validate(ctx: WizardContext): Transition {\n            return Transition.Finish\n        }\n    }\n\n    object ConfirmationStep : WizardStep {\n        override suspend fun onEntry(ctx: WizardContext) {\n            // \ud0c0\uc785 \uc548\uc804 \uc0c1\ud0dc \uc811\uadfc\n            val name: String? = ctx.getState&lt;NameStep&gt;()\n            val age: Int? = ctx.getState&lt;AgeStep&gt;()\n\n            val confirmation = buildString {\n                appendLine(\"Please confirm your information:\")\n                appendLine(\"Name: $name\")\n                appendLine(\"Age: $age\")\n                appendLine()\n                appendLine(\"Reply 'yes' to confirm or 'no' to start over.\")\n            }\n\n            message { confirmation }.send(ctx.user, ctx.bot)\n        }\n\n        override suspend fun onRetry(ctx: WizardContext) {\n            message { \"Please reply 'yes' or 'no'.\" }.send(ctx.user, ctx.bot)\n        }\n\n        override suspend fun validate(ctx: WizardContext): Transition {\n            val response = ctx.update.text?.lowercase()?.trim()\n            return when (response) {\n                \"yes\" -&gt; Transition.Finish\n                \"no\" -&gt; Transition.JumpTo(NameStep::class) // \ucc98\uc74c\ubd80\ud130 \ub2e4\uc2dc \uc2dc\uc791\n                else -&gt; Transition.Retry\n            }\n        }\n    }\n\n    object FinishStep : WizardStep {\n        override suspend fun onEntry(ctx: WizardContext) {\n            val name: String? = ctx.getState&lt;NameStep&gt;()\n            val age: Int? = ctx.getState&lt;AgeStep&gt;()\n\n            // \ub370\uc774\ud130\ubca0\uc774\uc2a4\uc5d0 \uc800\uc7a5, \ud655\uc778 \uba54\uc2dc\uc9c0 \uc804\uc1a1 \ub4f1\n            message { \n                \"Registration complete! Welcome, $name (age $age).\" \n            }.send(ctx.user, ctx.bot)\n        }\n\n        override suspend fun onRetry(ctx: WizardContext) = Unit\n\n        override suspend fun validate(ctx: WizardContext): Transition {\n            return Transition.Finish\n        }\n    }\n}\n</code></pre>"},{"location":"ko/FSM-and-Conversation-handling/#_14","title":"\uace0\uae09 \uae30\ub2a5","text":""},{"location":"ko/FSM-and-Conversation-handling/#_15","title":"\uc870\uac74\ubd80 \uc804\ud658","text":"<p>\uc870\uac74\ubd80 \ud750\ub984\uc5d0 <code>Transition.JumpTo</code>\ub97c \uc0ac\uc6a9\ud558\uc138\uc694:</p> <pre><code>override suspend fun validate(ctx: WizardContext): Transition {\n    val choice = ctx.update.text?.lowercase()\n    return when (choice) {\n        \"premium\" -&gt; Transition.JumpTo(PremiumStep::class)\n        \"basic\" -&gt; Transition.JumpTo(BasicStep::class)\n        else -&gt; Transition.Retry\n    }\n}\n</code></pre>"},{"location":"ko/FSM-and-Conversation-handling/#_16","title":"\uc0c1\ud0dc \uc5c6\ub294 \ub2e8\uacc4","text":"<p>\ub2e8\uacc4\ub294 \uc0c1\ud0dc\ub97c \uc800\uc7a5\ud560 \ud544\uc694\uac00 \uc5c6\uc2b5\ub2c8\ub2e4. \ub2e8\uc21c\ud788 <code>store()</code>\uc5d0\uc11c <code>null</code>\uc744 \ubc18\ud658\ud558\uc138\uc694(\ub610\ub294 \uadf8\ub300\ub85c \uc720\uc9c0):</p> <pre><code>object ConfirmationStep : WizardStep {\n    override suspend fun store(ctx: WizardContext): Any? = null\n    // ... \ub098\uba38\uc9c0 \uad6c\ud604\n}\n</code></pre>"},{"location":"ko/FSM-and-Conversation-handling/#_17","title":"\uc0ac\uc6a9\uc790 \uc815\uc758 \uc0c1\ud0dc \uad00\ub9ac\uc790","text":"<p>\uc0ac\uc6a9\uc790 \uc815\uc758 \uc800\uc7a5\uc18c(\ub370\uc774\ud130\ubca0\uc774\uc2a4, Redis \ub4f1)\ub97c \uc704\ud574 <code>WizardStateManager&lt;T&gt;</code>\ub97c \uad6c\ud604\ud558\uc138\uc694:</p> <pre><code>class DatabaseStateManager : WizardStateManager&lt;String&gt; {\n    override suspend fun get(\n        key: KClass&lt;out WizardStep&gt;,\n        reference: UserChatReference\n    ): String? {\n        // \ub370\uc774\ud130\ubca0\uc774\uc2a4\uc5d0\uc11c \ub85c\ub4dc\n        return database.getWizardState(reference.userId, key.qualifiedName)\n    }\n\n    override suspend fun set(\n        key: KClass&lt;out WizardStep&gt;,\n        reference: UserChatReference,\n        value: String\n    ) {\n        // \ub370\uc774\ud130\ubca0\uc774\uc2a4\uc5d0 \uc800\uc7a5\n        database.saveWizardState(reference.userId, key.qualifiedName, value)\n    }\n\n    override suspend fun del(\n        key: KClass&lt;out WizardStep&gt;,\n        reference: UserChatReference\n    ) {\n        // \ub370\uc774\ud130\ubca0\uc774\uc2a4\uc5d0\uc11c \uc0ad\uc81c\n        database.deleteWizardState(reference.userId, key.qualifiedName)\n    }\n}\n</code></pre>"},{"location":"ko/FSM-and-Conversation-handling/#_18","title":"\ub0b4\ubd80 \ub3d9\uc791 \ubc29\uc2dd","text":""},{"location":"ko/FSM-and-Conversation-handling/#_19","title":"\ucf54\ub4dc \uc0dd\uc131","text":"<p>KSP\ub294 \ub2e4\uc74c\uc744 \uc0dd\uc131\ud569\ub2c8\ub2e4:</p> <ol> <li>WizardActivity: <code>WizardActivity</code>\ub97c \ud655\uc7a5\ud558\ub294 \uad6c\uccb4\uc801\uc778 \uad6c\ud604\uacfc \ud558\ub4dc\ucf54\ub529\ub41c \ub2e8\uacc4</li> <li>\uc2dc\uc791 Activity: \uba85\ub839 \ud2b8\ub9ac\uac70\ub97c \ucc98\ub9ac\ud558\uace0 Wizard\ub97c \uc2dc\uc791</li> <li>\uc785\ub825 Activity: Wizard \ud750\ub984 \uc911 \uc0ac\uc6a9\uc790 \uc785\ub825 \ucc98\ub9ac</li> <li>\uc0c1\ud0dc \uc811\uadfc\uc790: \uc0c1\ud0dc \uc811\uadfc\uc744 \uc704\ud55c \ud0c0\uc785 \uc548\uc804 \ud655\uc7a5 \ud568\uc218</li> </ol>"},{"location":"ko/FSM-and-Conversation-handling/#_20","title":"\ud750\ub984","text":"<ol> <li>\uc0ac\uc6a9\uc790\uac00 <code>/register</code> \uc804\uc1a1 \u2192 \uc2dc\uc791 Activity\uac00 \ud638\ucd9c\ub428</li> <li>\uc2dc\uc791 Activity\uac00 <code>WizardContext</code>\ub97c \uc0dd\uc131\ud558\uace0 <code>wizardActivity.start(ctx)</code> \ud638\ucd9c</li> <li><code>start()</code>\uac00 \ucd08\uae30 \ub2e8\uacc4\uc5d0 \uc9c4\uc785\ud558\uace0 \ud604\uc7ac \ub2e8\uacc4\ub97c \ucd94\uc801\ud558\uae30 \uc704\ud574 <code>inputListener</code> \uc124\uc815</li> <li>\uc0ac\uc6a9\uc790\uac00 \uba54\uc2dc\uc9c0 \uc804\uc1a1 \u2192 \uc785\ub825 Activity\uac00 \ud638\ucd9c\ub428</li> <li>\uc785\ub825 Activity\uac00 <code>wizardActivity.handleInput(ctx)</code> \ud638\ucd9c</li> <li><code>handleInput()</code>\uc774 \uc785\ub825\uc744 \uac80\uc99d\ud558\uace0 \uc0c1\ud0dc\ub97c \uc9c0\uc18d\ud558\uba70 \ub2e4\uc74c \ub2e8\uacc4\ub85c \uc804\ud658</li> <li><code>Transition.Finish</code>\uac00 \ubc18\ud658\ub420 \ub54c\uae4c\uc9c0 \ud504\ub85c\uc138\uc2a4 \ubc18\ubcf5</li> </ol>"},{"location":"ko/FSM-and-Conversation-handling/#_21","title":"\uc0c1\ud0dc \uc9c0\uc18d\uc131","text":"<ul> <li>\uac80\uc99d \uc131\uacf5 \ud6c4 \uc0c1\ud0dc\uac00 \uc9c0\uc18d\ub428(\uc804\ud658 \uc804)</li> <li>\uac01 \ub2e8\uacc4\uc758 <code>store()</code> \ubc18\ud658 \uac12\uc774 \uc77c\uce58\ud558\ub294 <code>WizardStateManager</code>\ub97c \uc0ac\uc6a9\ud558\uc5ec \uc800\uc7a5\ub428</li> <li>\uc0c1\ud0dc\ub294 \uc0ac\uc6a9\uc790 \ubc0f \ucc44\ud305\ubcc4\ub85c \ubc94\uc704\uac00 \uc9c0\uc815\ub428(<code>UserChatReference</code>)</li> </ul>"},{"location":"ko/FSM-and-Conversation-handling/#_22","title":"\ubaa8\ubc94 \uc0ac\ub840","text":""},{"location":"ko/FSM-and-Conversation-handling/#1","title":"1. \ud56d\uc0c1 \uba85\ud655\ud55c \ud504\ub86c\ud504\ud2b8 \uc81c\uacf5","text":"<pre><code>override suspend fun onEntry(ctx: WizardContext) {\n    message { \n        \"Please enter your email address:\\n\" +\n        \"(Format: user@example.com)\" \n    }.send(ctx.user, ctx.bot)\n}\n</code></pre>"},{"location":"ko/FSM-and-Conversation-handling/#2","title":"2. \uac80\uc99d \uc624\ub958\ub97c \uc6b0\uc544\ud558\uac8c \ucc98\ub9ac","text":"<pre><code>override suspend fun onRetry(ctx: WizardContext) {\n    message { \n        \"Invalid email format. Please try again.\\n\" +\n        \"Example: user@example.com\" \n    }.send(ctx.user, ctx.bot)\n}\n</code></pre>"},{"location":"ko/FSM-and-Conversation-handling/#3","title":"3. \ud0c0\uc785 \uc548\uc804 \uc0c1\ud0dc \uc811\uadfc \uc0ac\uc6a9","text":"<p>\uc0dd\uc131\ub41c \ud0c0\uc785 \uc548\uc804 \uba54\uc11c\ub4dc\ub97c \uc120\ud638\ud558\uc138\uc694:</p> <pre><code>// \u2705 \uc88b\uc74c - \ud0c0\uc785 \uc548\uc804\nval name: String? = ctx.getState&lt;NameStep&gt;()\n\n// \u274c \ud53c\ud558\uc138\uc694 - \ud0c0\uc785 \uc548\uc804\uc131 \uc0c1\uc2e4\nval name = ctx.getState(NameStep::class) as? String\n</code></pre>"},{"location":"ko/FSM-and-Conversation-handling/#4","title":"4. \ub2e8\uacc4\ub97c \uc9d1\uc911\uc801\uc73c\ub85c \uc720\uc9c0","text":"<p>\uac01 \ub2e8\uacc4\ub294 \ub2e8\uc77c \ucc45\uc784\uc744 \uac00\uc838\uc57c \ud569\ub2c8\ub2e4:</p> <pre><code>// \u2705 \uc88b\uc74c - \uc9d1\uc911\ub41c \ub2e8\uacc4\nobject EmailStep : WizardStep {\n    // \uc774\uba54\uc77c \uc218\uc9d1\ub9cc \ucc98\ub9ac\n}\n\n// \u274c \ud53c\ud558\uc138\uc694 - \ub108\ubb34 \ub9ce\uc740 \ub85c\uc9c1\nobject PersonalInfoStep : WizardStep {\n    // \uc774\ub984, \uc774\uba54\uc77c, \uc804\ud654\ubc88\ud638, \uc8fc\uc18c \ub4f1 \ucc98\ub9ac...\n}\n</code></pre>"},{"location":"ko/FSM-and-Conversation-handling/#5","title":"5. \uc758\ubbf8 \uc788\ub294 \ub2e8\uacc4 \uc774\ub984 \uc0ac\uc6a9","text":"<pre><code>// \u2705 \uc88b\uc74c\nobject EmailVerificationStep : WizardStep\n\n// \u274c \ud53c\ud558\uc138\uc694\nobject Step2 : WizardStep\n</code></pre>"},{"location":"ko/FSM-and-Conversation-handling/#6","title":"6. \ud544\uc694\ud560 \ub54c \uc0c1\ud0dc \uc815\ub9ac","text":"<p>\uc0c1\ud0dc\ub97c \uc218\ub3d9\uc73c\ub85c \uc9c0\uc6cc\uc57c \ud560 \uacbd\uc6b0:</p> <pre><code>object CancelStep : WizardStep {\n    override suspend fun onEntry(ctx: WizardContext) {\n        // \ubaa8\ub4e0 Wizard \uc0c1\ud0dc \uc9c0\uc6b0\uae30\n        ctx.delState&lt;NameStep&gt;()\n        ctx.delState&lt;AgeStep&gt;()\n\n        message { \"Registration cancelled.\" }.send(ctx.user, ctx.bot)\n    }\n}\n</code></pre>"},{"location":"ko/FSM-and-Conversation-handling/#_23","title":"\uc694\uc57d","text":"<p>Wizard \uc2dc\uc2a4\ud15c\uc740 \ub2e4\uc74c\uc744 \uc81c\uacf5\ud569\ub2c8\ub2e4: - \u2705 \ud0c0\uc785 \uc548\uc804 \uc0c1\ud0dc \uad00\ub9ac\uc640 \ucef4\ud30c\uc77c \ud0c0\uc784 \uac80\uc0ac - \u2705 \uc120\uc5b8\uc801 \uc911\ucca9 \ud074\ub798\uc2a4\ub85c \ub2e8\uacc4 \uc815\uc758 - \u2705 \uc720\uc5f0\ud55c \uc870\uac74\ubd80 \ub17c\ub9ac\ub85c \uc804\ud658 - \u2705 \uc790\ub3d9 KSP\ub97c \ud1b5\ud55c \ucf54\ub4dc \uc0dd\uc131 - \u2705 \ud1b5\ud569\ub41c \uae30\uc874 Activity \uc2dc\uc2a4\ud15c - \u2705 \ud50c\ub7ec\uadf8 \uac00\ub2a5\ud55c \uc0c1\ud0dc \uc800\uc7a5\uc18c \ubc31\uc5d4\ub4dc</p> <p><code>@WizardHandler</code>\ub85c \ud074\ub798\uc2a4\uc5d0 \uc5b4\ub178\ud14c\uc774\uc158\uc744 \ucd94\uac00\ud558\uace0 \uc911\ucca9\ub41c <code>WizardStep</code> \uac1d\uccb4\ub85c \ub2e8\uacc4\ub97c \uc815\uc758\ud558\uc5ec Wizard \uad6c\ucd95\uc744 \uc2dc\uc791\ud558\uc138\uc694! \uc9c8\ubb38\uc774 \uc788\uc73c\uba74 \ucc44\ud305\uc5d0\uc11c \ubb38\uc758\ud558\uc138\uc694. \ub3c4\uc640\ub4dc\ub9ac\uaca0\uc2b5\ub2c8\ub2e4 :)</p>"},{"location":"ko/Functional-DSL/","title":"\ud568\uc218\ud615 DSL","text":""},{"location":"ko/Functional-DSL/#dsl","title":"~~\ubb34\ud55c\ub300~~ \ud568\uc218\ud615 DSL\uc640 \uadf8 \ub108\uba38\ub85c!","text":"<p>\ubd07\uc740 \uc5b4\ub178\ud14c\uc774\uc158 \uae30\ubc18\uacfc \ud568\uc218\ud615 DSL \ucee8\ud14d\uc2a4\ud2b8 \uc124\uc815 \ubaa8\ub450\ub97c \uc9c0\uc6d0\ud569\ub2c8\ub2e4. \ub450 \uc811\uadfc \ubc29\uc2dd\uc744 \uacb0\ud569\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4.</p>"},{"location":"ko/Functional-DSL/#dsl_1","title":"\ud568\uc218\ud615 DSL","text":"<p>\ud568\uc218\ud615 DSL\uc740 \ubd07 \ucee8\ud14d\uc2a4\ud2b8\ub97c \uc815\uc758\ud558\ub294 \ub2e4\ub978 \ubc29\ubc95\uc77c \ubfd0\uc785\ub2c8\ub2e4.</p> <p>\uc608\uc81c:</p> <pre><code>suspend fun main() {\n    val bot = TelegramBot(\"BOT_TOKEN\")\n\n    bot.setFunctionality {\n        onChosenInlineResult {\n            println(\"got a result ${update.chosenInlineResult.resultId} from ${update.user}\")\n        }\n    }\n}\n</code></pre>"},{"location":"ko/Functional-DSL/#_1","title":"\uba85\ub839\uc5b4\uc640 \uc785\ub825","text":"<p>\ud568\uc218\ud615 DSL\uc744 \uc0ac\uc6a9\ud558\uc5ec <code>\uba85\ub839\uc5b4</code>\uc640 <code>\uc785\ub825</code>\uc744 \ubaa8\ub450 \ucc98\ub9ac\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4.</p>"},{"location":"ko/Functional-DSL/#_2","title":"\uba85\ub839\uc5b4","text":"<pre><code>suspend fun main() {\n    val bot = TelegramBot(\"BOT_TOKEN\")\n\n    bot.setFunctionality {\n        // \uc77c\ubc18 \uba85\ub839\uc5b4\n        onCommand(\"/start\") {\n            message { \"Hello\" }.send(user, bot)\n        }\n\n        // \uc815\uaddc\uc2dd \uae30\ubc18 \uba85\ub839\uc5b4 \ub9e4\uce6d\n        onCommand(\"\"\"(red|green|blue)\"\"\".toRegex()) {\n            message { \"you typed ${update.text} color\" }.send(user, bot)\n        }\n    }\n}\n</code></pre> <p><code>onCommand</code>\uc5d0\uc11c \ud30c\uc2f1\ub41c \ub9e4\uac1c\ubcc0\uc218\ub294 \uad6c\uc131\uc5d0 \ub530\ub77c <code>Map&lt;String, String&gt;</code>\uc73c\ub85c \uc0ac\uc6a9\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4.</p>"},{"location":"ko/Functional-DSL/#_3","title":"\uc785\ub825","text":"<p><code>bot.inputListener</code>\ub97c \ud1b5\ud574 \uc785\ub825\uc744 \uc0ac\uc6a9\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4.</p> <pre><code>suspend fun main() {\n    val bot = TelegramBot(\"BOT_TOKEN\")\n\n    bot.setFunctionality {\n        onCommand(\"/start\") {\n            message { \"Hello, what's your name?\" }.send(user, bot)\n            bot.inputListener[user] = \"testInput\"\n        }\n\n        onInput(\"testInput\") {\n            message { \"Hey, nice to meet you, ${update.text}\" }.send(user, bot)\n        }\n    }\n}\n</code></pre>"},{"location":"ko/Functional-DSL/#_4","title":"\uc785\ub825 \uccb4\uc778","text":"<p>\ub2e4\ub2e8\uacc4 \uc785\ub825 \ud750\ub984\uc758 \uacbd\uc6b0 <code>inputChain</code>\uc744 \uc0ac\uc6a9\ud558\uc138\uc694:</p> <pre><code>bot.setFunctionality {\n    inputChain(\"conversation\") {\n        message { \"Nice to meet you, ${update.text}\" }.send(user, bot)\n        message { \"What is your favorite food?\" }.send(user, bot)\n    }.breakIf({ update.text == \"peanut butter\" }) { // \uccb4\uc778 \uc911\ub2e8 \uc870\uac74\n        message { \"Oh, too bad, I'm allergic to it.\" }.send(user, bot)\n        // \uc870\uac74\uc774 \uc77c\uce58\ud560 \ub54c \uc801\uc6a9\ub420 \uc791\uc5c5\n    }.andThen {\n        // \uc911\ub2e8 \uc870\uac74\uc774 \uc77c\uce58\ud558\uc9c0 \uc54a\uc73c\uba74 \ub2e4\uc74c \uc785\ub825 \uc9c0\uc810\n        message { \"Great choice!\" }.send(user, bot)\n    }\n}\n</code></pre> <p>\uccb4\uc778\uc740 \uc911\ub2e8 \uc870\uac74\uc774 \ucda9\uc871\ub418\uc9c0 \uc54a\ub294 \ud55c \uc790\ub3d9\uc73c\ub85c \ub2e4\uc74c \ub2e8\uacc4\ub85c \uc9c4\ud589\ub429\ub2c8\ub2e4. \uc911\ub2e8 \uc870\uac74\uc774 \uc77c\uce58\ud558\uace0 <code>repeat</code>\uc774 <code>true</code>(\uae30\ubcf8\uac12)\uc774\uba74 \uc0ac\uc6a9\uc790\ub294 \ud604\uc7ac \ub2e8\uacc4\uc5d0 \uba38\ubb34\ub985\ub2c8\ub2e4.</p>"},{"location":"ko/Functional-DSL/#_5","title":"\uc5c5\ub370\uc774\ud2b8 \ud0c0\uc785 \ud578\ub4e4\ub7ec","text":"<p>\ud2b9\uc815 \uc5c5\ub370\uc774\ud2b8 \ud0c0\uc785\uc744 \uc9c1\uc811 \ucc98\ub9ac\ud569\ub2c8\ub2e4:</p> <pre><code>bot.setFunctionality {\n    onUpdate(UpdateType.MESSAGE, UpdateType.CALLBACK_QUERY) {\n        // \uba54\uc2dc\uc9c0\uc640 \ucf5c\ubc31 \ucffc\ub9ac \uc5c5\ub370\uc774\ud2b8 \ubaa8\ub450 \ucc98\ub9ac\n        println(\"Received update: ${update.type}\")\n    }\n}\n</code></pre>"},{"location":"ko/Functional-DSL/#_6","title":"\uc77c\ubc18 \ub9e4\ucc98","text":"<p><code>common</code>\uc744 \uc0ac\uc6a9\ud558\uc5ec \ud14d\uc2a4\ud2b8 \ub0b4\uc6a9(\uba85\ub839\uc5b4\ubfd0\ub9cc \uc544\ub2c8\ub77c)\uc744 \ub9e4\uce6d\ud569\ub2c8\ub2e4:</p> <pre><code>bot.setFunctionality {\n    // \ubb38\uc790\uc5f4 \ub9e4\uce6d\n    common(\"hello\") {\n        message { \"Hi there!\" }.send(user, bot)\n    }\n\n    // \uc815\uaddc\uc2dd \ub9e4\uce6d\n    common(\"\"\"\\d+\"\"\".toRegex()) {\n        message { \"You sent a number!\" }.send(user, bot)\n    }\n}\n</code></pre>"},{"location":"ko/Functional-DSL/#_7","title":"\ud3f4\ubc31 \ud578\ub4e4\ub7ec","text":"<p>\uc5b4\ub5a4 \ud578\ub4e4\ub7ec\uc5d0\uc11c\ub3c4 \ucc98\ub9ac\ub418\uc9c0 \uc54a\uc740 \uc5c5\ub370\uc774\ud2b8\ub97c \ucc98\ub9ac\ud569\ub2c8\ub2e4:</p> <pre><code>bot.setFunctionality {\n    whenNotHandled {\n        message { \"I didn't understand that.\" }.send(user, bot)\n    }\n}\n</code></pre>"},{"location":"ko/Functional-DSL/#_8","title":"\uace0\uae09 \uc124\uc815","text":""},{"location":"ko/Functional-DSL/#_9","title":"\uc18d\ub3c4 \uc81c\ud55c","text":"<p>\uc5b4\ub5a4 \ud578\ub4e4\ub7ec\uc5d0\ub3c4 \uc18d\ub3c4 \uc81c\ud55c\uc744 \uc801\uc6a9\ud569\ub2c8\ub2e4:</p> <pre><code>bot.setFunctionality {\n    onCommand(\"/expensive\", rateLimits = RateLimits(5, 60)) {\n        // \uc774 \uba85\ub839\uc5b4\ub294 60\ucd08\ub2f9 \ucd5c\ub300 5\ud68c\ub9cc \ud638\ucd9c\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4\n        message { \"Processing...\" }.send(user, bot)\n    }\n}\n</code></pre>"},{"location":"ko/Functional-DSL/#_10","title":"\uac00\ub4dc","text":"<p>\uac00\ub4dc\ub97c \uc0ac\uc6a9\ud558\uc5ec \ucee4\uc2a4\ud140 \uc720\ud6a8\uc131 \uac80\uc0ac \ub85c\uc9c1\uc744 \ucd94\uac00\ud569\ub2c8\ub2e4:</p> <pre><code>bot.setFunctionality {\n    onCommand(\"/admin\", guard = AdminGuard::class) {\n        message { \"Admin command executed\" }.send(user, bot)\n    }\n}\n</code></pre>"},{"location":"ko/Functional-DSL/#_11","title":"\uc778\uc218 \ud30c\uc2f1","text":"<p>\uba85\ub839\uc5b4 \uc778\uc218\ub97c \ud30c\uc2f1\ud558\ub294 \ubc29\ubc95\uc744 \ucee4\uc2a4\ud130\ub9c8\uc774\uc988\ud569\ub2c8\ub2e4:</p> <pre><code>bot.setFunctionality {\n    onCommand(\"/custom\", argParser = CustomArgParser::class) {\n        // \ub9e4\uac1c\ubcc0\uc218\ub294 CustomArgParser\ub97c \uc0ac\uc6a9\ud558\uc5ec \ud30c\uc2f1\ub429\ub2c8\ub2e4\n        message { \"Parameters: $parameters\" }.send(user, bot)\n    }\n}\n</code></pre>"},{"location":"ko/Functional-DSL/#_12","title":"\ud568\uc218\ud615\uacfc \uc5b4\ub178\ud14c\uc774\uc158 \uae30\ubc18 \uc124\uc815 \uacb0\ud569","text":"<p>\ub450 \uc811\uadfc \ubc29\uc2dd\uc744 \uac19\uc740 \ubd07\uc5d0\uc11c \uc0ac\uc6a9\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4:</p> <pre><code>// \uc5b4\ub178\ud14c\uc774\uc158 \uae30\ubc18 \ud578\ub4e4\ub7ec\n@CommandHandler([\"/register\"])\nsuspend fun register(ctx: CommandContext) {\n    message { \"Registration started\" }.send(ctx.user, ctx.bot)\n}\n\n// \ud568\uc218\ud615 \ud578\ub4e4\ub7ec\nbot.setFunctionality {\n    onCommand(\"/help\") {\n        message { \"Available commands: /register, /help\" }.send(user, bot)\n    }\n}\n</code></pre> <p>\ub450 \ud578\ub4e4\ub7ec \ubaa8\ub450 \uac19\uc740 <code>ActivityRegistry</code>\uc5d0 \ub4f1\ub85d\ub418\uba70 \uc6d0\ud65c\ud558\uac8c \ud568\uaed8 \uc791\ub3d9\ud569\ub2c8\ub2e4.</p>"},{"location":"ko/Functional-DSL/#_13","title":"\ucc38\uace0","text":"<ul> <li>Action</li> <li>\uc720\uc6a9\ud55c \uc720\ud2f8\ub9ac\ud2f0</li> </ul>"},{"location":"ko/Guards/#_1","title":"\uc18c\uac1c","text":"<p>\uac00\ub4dc\ub294 \ubd07\uc744 \uac1c\ubc1c\ud558\ub294 \uac1c\ubc1c\uc790\ub4e4\uc744 \uc704\ud55c \ud544\uc218\uc801\uc778 \uae30\ub2a5\uc785\ub2c8\ub2e4. \uc774 \uac00\ub4dc\ub294 \ud2b9\uc815 \uba85\ub839\uc774 \uc2e4\ud589\ub418\uc5b4\uc57c \ud558\ub294\uc9c0 \uc5ec\ubd80\ub97c \uacb0\uc815\ud558\ub294 \uc0ac\uc804 \uc2e4\ud589 \uac80\uc0ac\ub85c \uc791\ub3d9\ud569\ub2c8\ub2e4. \uc774\ub7ec\ud55c \uac80\uc0ac\ub97c \uad6c\ud604\ud568\uc73c\ub85c\uc368 \uac1c\ubc1c\uc790\ub4e4\uc740 \ubd07\uc758 \uae30\ub2a5, \ubcf4\uc548 \ubc0f \uc0ac\uc6a9\uc790 \uacbd\ud5d8\uc744 \ud5a5\uc0c1\uc2dc\ud0ac \uc218 \uc788\uc2b5\ub2c8\ub2e4.</p>"},{"location":"ko/Guards/#_2","title":"\uc561\ud2f0\ube44\ud2f0 \uac00\ub4dc\uc758 \ubaa9\uc801","text":"<p>\uc561\ud2f0\ube44\ud2f0 \uac00\ub4dc\uc758 \uc8fc\uc694 \ubaa9\uc801\uc740 \uc624\uc9c1 \uad8c\ud55c\uc774 \uc788\ub294 \uc0ac\uc6a9\uc790\ub098 \ud2b9\uc815 \uc870\uac74\ub9cc\uc774 \uc561\ud2f0\ube44\ud2f0\ub97c \ud2b8\ub9ac\uac70\ud558\ub3c4\ub85d \ubcf4\uc7a5\ud558\ub294 \uac83\uc785\ub2c8\ub2e4.</p> <p>\uc774\ub294 \uc624\uc6a9\uc744 \ubc29\uc9c0\ud558\uace0, \ubd07\uc758 \ubb34\uacb0\uc131\uc744 \uc720\uc9c0\ud558\uba70, \uc0c1\ud638\uc791\uc6a9\uc744 \uac04\uc18c\ud654\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4.</p>"},{"location":"ko/Guards/#_3","title":"\uc77c\ubc18\uc801\uc778 \uc0ac\uc6a9 \uc0ac\ub840","text":"<ol> <li>\uc778\uc99d \ubc0f \uc778\uac00: \ud2b9\uc815 \uc0ac\uc6a9\uc790\ub9cc \ud2b9\uc815 \uba85\ub839\uc5d0 \uc811\uadfc\ud560 \uc218 \uc788\ub3c4\ub85d \ubcf4\uc7a5\ud569\ub2c8\ub2e4.</li> <li>\uc0ac\uc804 \uc870\uac74 \uac80\uc0ac: \uba85\ub839\uc744 \uc2e4\ud589\ud558\uae30 \uc804\uc5d0 \ud2b9\uc815 \uc870\uac74\uc774 \ucda9\uc871\ub418\ub294\uc9c0 \ud655\uc778\ud569\ub2c8\ub2e4(\uc608: \uc0ac\uc6a9\uc790\uac00 \ud2b9\uc815 \uc0c1\ud0dc\ub098 \ucee8\ud14d\uc2a4\ud2b8\uc5d0 \uc788\ub294\uc9c0 \ud655\uc778).</li> <li>\ucee8\ud14d\uc2a4\ud2b8 \uac00\ub4dc: \ud604\uc7ac \ucc44\ud305\uc774\ub098 \uc0ac\uc6a9\uc790 \uc0c1\ud0dc\uc5d0 \uae30\ubc18\ud55c \uacb0\uc815\uc744 \ub0b4\ub9bd\ub2c8\ub2e4.</li> </ol>"},{"location":"ko/Guards/#_4","title":"\uad6c\ud604 \uc804\ub7b5","text":"<p>Telegram \uba85\ub839 \uac00\ub4dc\ub97c \uad6c\ud604\ud558\ub294 \uac83\uc740 \uc77c\ubc18\uc801\uc73c\ub85c \uac01 \uac00\ub4dc\uc5d0 \ub300\ud55c \ub85c\uc9c1\uc744 \ucea1\uc290\ud654\ud558\ub294 \ud568\uc218\ub97c \uc791\uc131\ud558\uac70\ub098 \uba54\uc11c\ub4dc\ub97c \uc791\uc131\ud558\ub294 \uac83\uc744 \ud3ec\ud568\ud569\ub2c8\ub2e4. \uc544\ub798\ub294 \uc77c\ubc18\uc801\uc778 \uc804\ub7b5\uc785\ub2c8\ub2e4:</p> <ol> <li>\uc0ac\uc6a9\uc790 \uc5ed\ud560 \ud655\uc778:</li> <li> <p>\uba85\ub839\uc744 \uc2e4\ud589\ud558\uae30 \uc804\uc5d0 \uc0ac\uc6a9\uc790\uac00 \ud544\uc694\ud55c \uc5ed\ud560(\uc608: \uad00\ub9ac\uc790, \uc911\uc7ac\uc790)\uc744 \uac00\uc9c0\uace0 \uc788\ub294\uc9c0 \ud655\uc778\ud569\ub2c8\ub2e4.       <pre><code> override suspend fun condition(user: User?, update: ProcessedUpdate, bot: TelegramBot): Boolean {\n  // \uc8fc\uc5b4\uc9c4 \ucc44\ud305\uc5d0\uc11c \uc0ac\uc6a9\uc790\uac00 \uad00\ub9ac\uc790\uc778\uc9c0 \ud655\uc778\n }\n</code></pre></p> </li> <li> <p>\uc0c1\ud0dc \ud655\uc778:</p> </li> <li> <p>\uba85\ub839 \uc2e4\ud589\uc744 \ud5c8\uc6a9\ud558\uae30 \uc804\uc5d0 \uc0ac\uc6a9\uc790\uc758 \uc0c1\ud0dc\ub97c \ud655\uc778\ud569\ub2c8\ub2e4.      <pre><code>override suspend fun condition(user: User?, update: ProcessedUpdate, bot: TelegramBot): Boolean {\n   return bot.userData[user.id, \"data\"] == requiredState\n}\n</code></pre></p> </li> <li> <p>\uc0ac\uc6a9\uc790 \uc815\uc758 \uac00\ub4dc:</p> </li> <li>\ud2b9\uc815 \uc694\uad6c\uc0ac\ud56d\uc5d0 \uae30\ubc18\ud55c \uc0ac\uc6a9\uc790 \uc815\uc758 \ub85c\uc9c1\uc744 \uc0dd\uc131\ud569\ub2c8\ub2e4.      <pre><code>override suspend fun condition(user: User?, update: ProcessedUpdate, bot: TelegramBot): Boolean {\n   // \uba85\ub839\uc744 \uc2e4\ud589\ud574\uc57c \ud558\ub294\uc9c0 \uc5ec\ubd80\ub97c \uacb0\uc815\ud558\ub294 \uc0ac\uc6a9\uc790 \uc815\uc758 \ub85c\uc9c1\n}\n</code></pre></li> </ol>"},{"location":"ko/Guards/#_5","title":"\uc561\ud2f0\ube44\ud2f0\uc640 \uac00\ub4dc \ud1b5\ud569","text":"<p>\uc774\ub7ec\ud55c \uac00\ub4dc\ub97c \ubd07 \uba85\ub839\uacfc \ud1b5\ud569\ud558\ub824\uba74 \uba85\ub839 \ud578\ub4e4\ub7ec\uac00 \ud638\ucd9c\ub418\uae30 \uc804\uc5d0 \uc774\ub7ec\ud55c \uc870\uac74\uc744 \ud655\uc778\ud558\ub294 \uac00\ub4dc\ub97c \uc0dd\uc131\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4.</p>"},{"location":"ko/Guards/#_6","title":"\uad6c\ud604 \uc608\uc81c","text":"<pre><code>// \uc5b4\ub518\uac00\uc5d0 Guard \uc778\ud130\ud398\uc774\uc2a4\ub97c \uad6c\ud604\ud558\ub294 \uac00\ub4dc \ud074\ub798\uc2a4\ub97c \uc815\uc758\ud569\ub2c8\ub2e4\nobject YourGuard : Guard {\n    override suspend fun condition(user: User?, update: ProcessedUpdate, bot: TelegramBot): Boolean {\n        // \uc5ec\uae30\uc5d0 \uc870\uac74\uc744 \uc791\uc131\ud569\ub2c8\ub2e4\n    }\n}\n\n// ...\n\n@CommandHandler([\"yourCommand\"])\n@Guard(YourGuard::class) // InputHandler\ub3c4 \uc9c0\uc6d0\ub429\ub2c8\ub2e4\nfun command(bot: TelegramBot) {\n   // \uba85\ub839 \ubcf8\ubb38\n}\n</code></pre>"},{"location":"ko/Guards/#_7","title":"\ubaa8\ubc94 \uc0ac\ub840","text":"<ul> <li>\ubaa8\ub4c8\uc131: \uac00\ub4dc \ub85c\uc9c1\uc744 \ubaa8\ub4c8\ud654\ud558\uace0 \uc561\ud2f0\ube44\ud2f0\uc640 \ubd84\ub9ac\ud569\ub2c8\ub2e4.</li> <li>\uc7ac\uc0ac\uc6a9\uc131: \ub2e4\uc591\ud55c \uba85\ub839/\uc785\ub825\uc5d0 \uc27d\uac8c \uc801\uc6a9\ud560 \uc218 \uc788\ub294 \uc7ac\uc0ac\uc6a9 \uac00\ub2a5\ud55c \uac00\ub4dc \ud568\uc218\ub97c \uc791\uc131\ud569\ub2c8\ub2e4.</li> <li>\ud6a8\uc728\uc131: \uc131\ub2a5 \uc624\ubc84\ud5e4\ub4dc\ub97c \ucd5c\uc18c\ud654\ud558\uae30 \uc704\ud574 \uac00\ub4dc \uac80\uc0ac\ub97c \ucd5c\uc801\ud654\ud569\ub2c8\ub2e4.</li> <li>\uc0ac\uc6a9\uc790 \ud53c\ub4dc\ubc31: \uac00\ub4dc\uc5d0 \uc758\ud574 \uba85\ub839\uc774 \ucc28\ub2e8\ub420 \ub54c \uc0ac\uc6a9\uc790\uc5d0\uac8c \uba85\ud655\ud55c \ud53c\ub4dc\ubc31\uc744 \uc81c\uacf5\ud569\ub2c8\ub2e4.</li> </ul>"},{"location":"ko/Guards/#_8","title":"\uacb0\ub860","text":"<p>\uc561\ud2f0\ube44\ud2f0 \uac00\ub4dc\ub294 \ubd07 \uba85\ub839/\uc785\ub825 \uc2e4\ud589\uc744 \uad00\ub9ac\ud558\uae30 \uc704\ud55c \uac15\ub825\ud55c \ub3c4\uad6c\uc785\ub2c8\ub2e4.</p> <p>\uacac\uace0\ud55c \uac00\ub4dc \uba54\ucee4\ub2c8\uc998\uc744 \uad6c\ud604\ud568\uc73c\ub85c\uc368 \uac1c\ubc1c\uc790\ub4e4\uc740 \ubd07\uc774 \uc548\uc804\ud558\uace0 \ud6a8\uc728\uc801\uc73c\ub85c \uc791\ub3d9\ud558\ub3c4\ub85d \ubcf4\uc7a5\ud560 \uc218 \uc788\uc73c\uba70, \ub354 \ub098\uc740 \uc0ac\uc6a9\uc790 \uacbd\ud5d8\uc744 \uc81c\uacf5\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4.</p>"},{"location":"ko/Guards/#_9","title":"\ucc38\uc870","text":"<ul> <li>\uc561\ud2f0\ube44\ud2f0 \ubc0f \ud504\ub85c\uc138\uc11c</li> <li>\uc5c5\ub370\uc774\ud2b8 \ud30c\uc2f1</li> <li>\uc561\uc158</li> <li>\uc561\ud2f0\ube44\ud2f0 \ud638\ucd9c</li> </ul>"},{"location":"ko/Handlers/","title":"\ud578\ub4e4\ub7ec","text":""},{"location":"ko/Handlers/#_1","title":"\ud578\ub4e4\ub7ec\uc758 \ub2e4\uc591\uc131","text":"<p>\ubd07 \uac1c\ubc1c, \ud2b9\ud788 \uc0ac\uc6a9\uc790 \uc0c1\ud638\uc791\uc6a9\uc774 \ud3ec\ud568\ub41c \uc2dc\uc2a4\ud15c\uc5d0\uc11c \uba85\ub839\uacfc \uc774\ubca4\ud2b8\ub97c \ud6a8\uc728\uc801\uc73c\ub85c \uad00\ub9ac\ud558\uace0 \ucc98\ub9ac\ud558\ub294 \uac83\uc740 \ub9e4\uc6b0 \uc911\uc694\ud569\ub2c8\ub2e4.</p> <p>\uc774\ub7ec\ud55c \uc5b4\ub178\ud14c\uc774\uc158\uc740 \ud2b9\uc815 \uba85\ub839, \uc785\ub825 \ub610\ub294 \uc5c5\ub370\uc774\ud2b8\ub97c \ucc98\ub9ac\ud558\ub3c4\ub85d \uc124\uacc4\ub41c \ud568\uc218\ub97c \ud45c\uc2dc\ud558\uace0 \uba85\ub839 \ud0a4\uc6cc\ub4dc, \ubc94\uc704 \ubc0f \uac00\ub4dc\uc640 \uac19\uc740 \uba54\ud0c0\ub370\uc774\ud130\ub97c \uc81c\uacf5\ud569\ub2c8\ub2e4.</p>"},{"location":"ko/Handlers/#_2","title":"\uc5b4\ub178\ud14c\uc774\uc158 \uac1c\uc694","text":""},{"location":"ko/Handlers/#commandhandler","title":"CommandHandler","text":"<p><code>CommandHandler</code> \uc5b4\ub178\ud14c\uc774\uc158\uc740 \ud2b9\uc815 \uba85\ub839\uc744 \ucc98\ub9ac\ud558\ub294 \ud568\uc218\ub97c \ud45c\uc2dc\ud558\ub294 \ub370 \uc0ac\uc6a9\ub429\ub2c8\ub2e4. \uc774 \uc5b4\ub178\ud14c\uc774\uc158\uc5d0\ub294 \uba85\ub839\uc758 \ud0a4\uc6cc\ub4dc\uc640 \ubc94\uc704\ub97c \uc815\uc758\ud558\ub294 \uc18d\uc131\uc774 \ud3ec\ud568\ub418\uc5b4 \uc788\uc2b5\ub2c8\ub2e4.</p> <ul> <li>value: \uba85\ub839\uacfc \uad00\ub828\ub41c \ud0a4\uc6cc\ub4dc\ub97c \uc9c0\uc815\ud569\ub2c8\ub2e4.</li> <li>scope: \uba85\ub839\uc774 \ud655\uc778\ub420 \ucee8\ud14d\uc2a4\ud2b8 \ub610\ub294 \ubc94\uc704\ub97c \uacb0\uc815\ud569\ub2c8\ub2e4.</li> </ul> <pre><code>@CommandHandler([\"text\"])\nsuspend fun test(user: User, bot: TelegramBot) {\n    //...\n}\n</code></pre>"},{"location":"ko/Handlers/#commandhandlercallbackquery","title":"CommandHandler.CallbackQuery","text":"<p><code>CommandHandler</code> \uc5b4\ub178\ud14c\uc774\uc158\uc758 \ud2b9\uc218\ud55c \ubc84\uc804\uc73c\ub85c, \ucf5c\ubc31 \ucffc\ub9ac\ub97c \ucc98\ub9ac\ud558\uae30 \uc704\ud574 \ud2b9\ubcc4\ud788 \uc124\uacc4\ub418\uc5c8\uc2b5\ub2c8\ub2e4. \ucf5c\ubc31 \uad00\ub828 \uba85\ub839\uc5d0 \ucd08\uc810\uc744 \ub9de\ucd98 <code>CommandHandler</code>\uc640 \uc720\uc0ac\ud55c \uc18d\uc131\uc744 \ud3ec\ud568\ud569\ub2c8\ub2e4.</p> <p>\uc2e4\uc81c\ub85c\ub294 \ubbf8\ub9ac \uc124\uc815\ub41c <code>UpdateType.CALLBACK_QUERY</code> \ubc94\uc704\ub97c \uac00\uc9c4 \ub2e8\uc21c\ud55c <code>@CommandHandler</code>\uc640 \ub3d9\uc77c\ud569\ub2c8\ub2e4.</p> <ul> <li>value: \uba85\ub839\uacfc \uad00\ub828\ub41c \ud0a4\uc6cc\ub4dc\ub97c \uc9c0\uc815\ud569\ub2c8\ub2e4.</li> <li>autoAnswer: <code>callbackQuery</code>\uc5d0 \uc790\ub3d9\uc73c\ub85c \uc751\ub2f5\ud569\ub2c8\ub2e4 (<code>answerCallbackQuery</code>\ub97c \ucc98\ub9ac\ud558\uae30 \uc804\uc5d0 \ud638\ucd9c\ud569\ub2c8\ub2e4).</li> </ul> <pre><code>@CommandHandler.CallbackQuery([\"text\"])\nsuspend fun test(user: User, bot: TelegramBot) {\n    //...\n}\n</code></pre>"},{"location":"ko/Handlers/#commonhandler","title":"CommonHandler","text":"<p><code>CommonHandler</code> \uc5b4\ub178\ud14c\uc774\uc158\uc740 <code>CommandHandler</code> \ubc0f <code>InputHandler</code>\uc5d0 \ube44\ud574 \uc6b0\uc120\uc21c\uc704\uac00 \ub0ae\uc740 \uba85\ub839\uc744 \ucc98\ub9ac\ud558\ub294 \ud568\uc218\uc5d0 \uc0ac\uc6a9\ub429\ub2c8\ub2e4. \uc18c\uc2a4 \uc218\uc900\uc5d0\uc11c \uc0ac\uc6a9\ub418\uba70 \uc77c\ubc18 \uba85\ub839 \ud578\ub4e4\ub7ec\ub97c \uc815\uc758\ud558\ub294 \uc720\uc5f0\ud55c \ubc29\ubc95\uc744 \uc81c\uacf5\ud569\ub2c8\ub2e4.</p> <p><code>@CommonHandler</code> \uc790\uccb4 \ub0b4\uc5d0\uc11c\ub9cc \uc6b0\uc120\uc21c\uc704\uac00 \uc791\ub3d9\ud55c\ub2e4\ub294 \uc810\uc5d0 \uc720\uc758\ud558\uc138\uc694(\uc989, \ub2e4\ub978 \ud578\ub4e4\ub7ec\uc5d0 \uc601\ud5a5\uc744 \uc8fc\uc9c0 \uc54a\uc2b5\ub2c8\ub2e4).</p>"},{"location":"ko/Handlers/#commonhandlertext","title":"CommonHandler.Text","text":"<p>\uc774 \uc5b4\ub178\ud14c\uc774\uc158\uc740 \uc5c5\ub370\uc774\ud2b8\uc5d0 \ub300\ud55c \ud14d\uc2a4\ud2b8 \uc77c\uce58\ub97c \uc9c0\uc815\ud569\ub2c8\ub2e4. \uc77c\uce58\ud558\ub294 \ud14d\uc2a4\ud2b8, \ud544\ud130\ub9c1 \uc870\uac74, \uc6b0\uc120\uc21c\uc704 \ubc0f \ubc94\uc704\ub97c \uc815\uc758\ud558\ub294 \uc18d\uc131\uc744 \ud3ec\ud568\ud569\ub2c8\ub2e4.</p> <ul> <li>value: \ub4e4\uc5b4\uc624\ub294 \uc5c5\ub370\uc774\ud2b8\uc640 \uc77c\uce58\ud560 \ud14d\uc2a4\ud2b8\uc785\ub2c8\ub2e4.</li> <li>filter: \uc77c\uce58 \ud504\ub85c\uc138\uc2a4\uc5d0\uc11c \uc0ac\uc6a9\ub418\ub294 \uc870\uac74\uc744 \uc815\uc758\ud558\ub294 \ud074\ub798\uc2a4\uc785\ub2c8\ub2e4.</li> <li>priority: \ud578\ub4e4\ub7ec\uc758 \uc6b0\uc120\uc21c\uc704 \uc218\uc900\uc73c\ub85c, 0\uc774 \uac00\uc7a5 \ub192\uc740 \uc6b0\uc120\uc21c\uc704\uc785\ub2c8\ub2e4.</li> <li>scope: \ud14d\uc2a4\ud2b8 \uc77c\uce58\uac00 \ud655\uc778\ub420 \ucee8\ud14d\uc2a4\ud2b8 \ub610\ub294 \ubc94\uc704\uc785\ub2c8\ub2e4.</li> </ul> <pre><code>@CommonHandler.Text([\"text\"], filter = isNewUserFilter::class, priority = 10)\nsuspend fun test(user: User, bot: TelegramBot) {\n    //...\n}\n</code></pre>"},{"location":"ko/Handlers/#commonhandlerregex","title":"CommonHandler.Regex","text":"<p><code>CommonHandler.Text</code>\uc640 \uc720\uc0ac\ud558\uac8c, \uc774 \uc5b4\ub178\ud14c\uc774\uc158\uc740 \uc815\uaddc\ud45c\ud604\uc2dd\uc744 \uae30\ubc18\uc73c\ub85c \uc5c5\ub370\uc774\ud2b8\ub97c \uc77c\uce58\uc2dc\ud0a4\ub294 \ub370 \uc0ac\uc6a9\ub429\ub2c8\ub2e4. \uc815\uaddc\ud45c\ud604\uc2dd \ud328\ud134, \uc635\uc158, \ud544\ud130\ub9c1 \uc870\uac74, \uc6b0\uc120\uc21c\uc704 \ubc0f \ubc94\uc704\ub97c \uc815\uc758\ud558\ub294 \uc18d\uc131\uc744 \ud3ec\ud568\ud569\ub2c8\ub2e4.</p> <ul> <li>value: \uc77c\uce58\uc5d0 \uc0ac\uc6a9\ub418\ub294 \uc815\uaddc\ud45c\ud604\uc2dd \ud328\ud134\uc785\ub2c8\ub2e4.</li> <li>options: \uc815\uaddc\ud45c\ud604\uc2dd \ud328\ud134\uc758 \ub3d9\uc791\uc744 \uc218\uc815\ud558\ub294 \uc815\uaddc\ud45c\ud604\uc2dd \uc635\uc158\uc785\ub2c8\ub2e4.</li> <li>filter: \uc77c\uce58 \ud504\ub85c\uc138\uc2a4\uc5d0\uc11c \uc0ac\uc6a9\ub418\ub294 \uc870\uac74\uc744 \uc815\uc758\ud558\ub294 \ud074\ub798\uc2a4\uc785\ub2c8\ub2e4.</li> <li>priority: \ud578\ub4e4\ub7ec\uc758 \uc6b0\uc120\uc21c\uc704 \uc218\uc900\uc73c\ub85c, 0\uc774 \uac00\uc7a5 \ub192\uc740 \uc6b0\uc120\uc21c\uc704\uc785\ub2c8\ub2e4.</li> <li>scope: \uc815\uaddc\ud45c\ud604\uc2dd \uc77c\uce58\uac00 \ud655\uc778\ub420 \ucee8\ud14d\uc2a4\ud2b8 \ub610\ub294 \ubc94\uc704\uc785\ub2c8\ub2e4.</li> </ul> <pre><code>@CommonHandler.Regex(\"^\\d+$\", scope = [UpdateType.EDITED_MESSAGE])\nsuspend fun test(update: EditedMessageUpdate, user: User, bot: TelegramBot) {\n    //...\n}\n</code></pre>"},{"location":"ko/Handlers/#inputhandler","title":"InputHandler","text":"<p><code>InputHandler</code> \uc5b4\ub178\ud14c\uc774\uc158\uc740 \ud2b9\uc815 \uc785\ub825 \uc774\ubca4\ud2b8\ub97c \ucc98\ub9ac\ud558\ub294 \ud568\uc218\ub97c \ud45c\uc2dc\ud569\ub2c8\ub2e4. \ub7f0\ud0c0\uc784\uc5d0 \uc785\ub825\uc744 \ucc98\ub9ac\ud558\ub294 \ud568\uc218\uc5d0 \uc0ac\uc6a9\ub418\uba70 \uc785\ub825 \ud0a4\uc6cc\ub4dc\uc640 \ubc94\uc704\ub97c \uc815\uc758\ud558\ub294 \uc18d\uc131\uc744 \ud3ec\ud568\ud569\ub2c8\ub2e4.</p> <ul> <li>value: \uc785\ub825 \uc774\ubca4\ud2b8\uc640 \uad00\ub828\ub41c \ud0a4\uc6cc\ub4dc\ub97c \uc9c0\uc815\ud569\ub2c8\ub2e4.</li> </ul> <pre><code>@InputHandler(\"text\")\nsuspend fun test(update: ProcessedUpdate, user: User, bot: TelegramBot) {\n    //...\n}\n</code></pre>"},{"location":"ko/Handlers/#unprocessedhandler","title":"UnprocessedHandler","text":"<p><code>UnprocessedHandler</code> \uc5b4\ub178\ud14c\uc774\uc158\uc740 \ub2e4\ub978 \ud578\ub4e4\ub7ec\uc5d0\uc11c \ucc98\ub9ac\ub418\uc9c0 \uc54a\uc740 \uc5c5\ub370\uc774\ud2b8\ub97c \ucc98\ub9ac\ud558\ub294 \ud568\uc218\ub97c \ud45c\uc2dc\ud558\ub294 \ub370 \uc0ac\uc6a9\ub429\ub2c8\ub2e4. \ucc98\ub9ac\ub418\uc9c0 \uc54a\uc740 \uc5c5\ub370\uc774\ud2b8\uac00 \uc801\uc808\ud558\uac8c \uad00\ub9ac\ub418\ub3c4\ub85d \ud558\uba70, \uc774 \ud578\ub4e4\ub7ec \uc720\ud615\uc5d0 \ub300\ud574 \ud558\ub098\uc758 \ucc98\ub9ac \uc9c0\uc810\ub9cc \uac00\ub2a5\ud569\ub2c8\ub2e4.</p> <pre><code>@UnprocessedHandler\nsuspend fun test(update: ProcessedUpdate, user: User, bot: TelegramBot) {\n    //...\n}\n</code></pre>"},{"location":"ko/Handlers/#updatehandler","title":"UpdateHandler","text":"<p><code>UpdateHandler</code> \uc5b4\ub178\ud14c\uc774\uc158\uc740 \ud2b9\uc815 \uc720\ud615\uc758 \ub4e4\uc5b4\uc624\ub294 \uc5c5\ub370\uc774\ud2b8\ub97c \ucc98\ub9ac\ud558\ub294 \ud568\uc218\ub97c \ud45c\uc2dc\ud569\ub2c8\ub2e4. \ub2e4\uc591\ud55c \uc5c5\ub370\uc774\ud2b8 \uc720\ud615\uc744 \uccb4\uacc4\uc801\uc73c\ub85c \ubd84\ub958\ud558\uace0 \ucc98\ub9ac\ud558\ub294 \ubc29\ubc95\uc744 \uc81c\uacf5\ud569\ub2c8\ub2e4.</p> <ul> <li>type: \ud578\ub4e4\ub7ec \ud568\uc218\uac00 \ucc98\ub9ac\ud560 \uc5c5\ub370\uc774\ud2b8 \uc720\ud615\uc744 \uc9c0\uc815\ud569\ub2c8\ub2e4.</li> </ul> <pre><code>@UpdateHandler([UpdateType.PRE_CHECKOUT_QUERY])\nsuspend fun test(update: PreCheckoutQueryUpdate, user: User, bot: TelegramBot) {\n    //...\n}\n</code></pre>"},{"location":"ko/Handlers/#_3","title":"\ud578\ub4e4\ub7ec \ub3d9\ubc18 \uc5b4\ub178\ud14c\uc774\uc158","text":"<p>\ud578\ub4e4\ub7ec \uc790\uccb4\uc758 \uc120\ud0dd\uc801 \ub3d9\uc791\uc744 \ubcf4\uc644\ud558\ub294 \ucd94\uac00 \uc5b4\ub178\ud14c\uc774\uc158\ub3c4 \uc788\uc2b5\ub2c8\ub2e4.</p> <p>\uc774 \uc5b4\ub178\ud14c\uc774\uc158\uc740 \ud578\ub4e4\ub7ec\uac00 \uc801\uc6a9\ub418\ub294 \ud568\uc218\uc640 \ud074\ub798\uc2a4 \ubaa8\ub450\uc5d0 \ubc30\uce58\ud560 \uc218 \uc788\uc73c\uba70, \ud6c4\uc790\uc758 \uacbd\uc6b0 \ud574\ub2f9 \ud074\ub798\uc2a4\uc758 \ubaa8\ub4e0 \ud578\ub4e4\ub7ec\uc5d0 \uc790\ub3d9\uc73c\ub85c \uc801\uc6a9\ub418\uc9c0\ub9cc, \ud544\uc694\uc5d0 \ub530\ub77c \uc77c\ubd80 \ud568\uc218\uc5d0 \ub300\ud574 \ubcc4\ub3c4\uc758 \ub3d9\uc791\uc744 \uac00\uc9c8 \uc218 \uc788\uc2b5\ub2c8\ub2e4.</p> <p>\uc989, \uc801\uc6a9 \uc6b0\uc120\uc21c\uc704\ub294 <code>\ud568\uc218</code> &gt; <code>\ud074\ub798\uc2a4</code>\uc774\uba70, \ud568\uc218\uac00 \ub354 \ub192\uc740 \uc6b0\uc120\uc21c\uc704\ub97c \uac00\uc9d1\ub2c8\ub2e4.</p>"},{"location":"ko/Handlers/#_4","title":"\uc18d\ub3c4 \uc81c\ud55c","text":"<p>\ub610\ud55c \uc5b4\ub178\ud14c\uc774\uc158\uc5d0 \uc124\uba85\ub41c \uc18d\ub3c4 \uc81c\ud55c \uba54\ucee4\ub2c8\uc998\uc5d0 \ub300\ud574\uc11c\ub3c4 \uc124\uba85\ud558\uaca0\uc2b5\ub2c8\ub2e4.</p> <p>\uac01 \uc0ac\uc6a9\uc790\uc5d0 \ub300\ud55c \uc77c\ubc18\uc801\uc778 \uc81c\ud55c\uc744 \uc124\uc815\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4:</p> <pre><code>// ...\nval bot = TelegramBot(\"BOT_TOKEN\") {\n    rateLimiter { // \uc77c\ubc18 \uc81c\ud55c\n        limits = RateLimits(period = 10000, rate = 5)\n    }\n}\n</code></pre>"},{"location":"ko/Handlers/#_5","title":"\ud578\ub4e4\ub7ec\ubcc4 \uc81c\ud55c","text":"<p>\ud2b9\uc815 \uc791\uc5c5\uc5d0 \ub300\ud55c \uc81c\ud55c\uc740 <code>RateLimits</code> \uc5b4\ub178\ud14c\uc774\uc158\uc744 \uc0ac\uc6a9\ud558\uc5ec \uc815\uc758\ud560 \uc218 \uc788\uc73c\uba70, <code>@CommandHandler</code>, <code>@CommandHandler.CallbackQuery</code>, <code>@InputHandler</code>, <code>@CommonHandler</code>\uc5d0\uc11c \uc9c0\uc6d0\ub429\ub2c8\ub2e4.</p> <pre><code>@CommandHandler([\"/start\"])\n@RateLimits(period = 1000L, rate = 1L)\nsuspend fun start(user: User, bot: TelegramBot) {\n    // ...\n}\n</code></pre>"},{"location":"ko/Handlers/#guard","title":"Guard","text":"<p>\ud578\ub4e4\ub7ec\uc5d0 \ub300\ud55c \uc561\uc138\uc2a4\ub97c \uc81c\uc5b4\ud558\uae30 \uc704\ud574 \uac00\ub4dc\ub97c \ubcc4\ub3c4\ub85c \uc815\uc758\ud560 \uc218 \uc788\uc73c\uba70, <code>@CommandHandler</code>, <code>@CommandHandler.CallbackQuery</code>, <code>@InputHandler</code>\uc5d0\uc11c \uc9c0\uc6d0\ub429\ub2c8\ub2e4:</p> <pre><code>@CommandHandler([\"text\"])\n@Guard(isAdminGuard::class)\nsuspend fun test(user: User, bot: TelegramBot) {\n    //...\n}\n</code></pre>"},{"location":"ko/Handlers/#argparser","title":"ArgParser","text":"<p>\ud578\ub4e4\ub7ec\uc5d0 \ub300\ud55c \ub9e4\uac1c\ubcc0\uc218 \uad6c\ubb38 \ubd84\uc11d \ub3d9\uc791\uc744 \ubcc0\uacbd\ud558\uae30 \uc704\ud574 \uc0ac\uc6a9\uc790 \uc815\uc758 \uc778\uc218 \ud30c\uc11c\ub97c \ubcc4\ub3c4\ub85c \uc815\uc758\ud560 \uc218 \uc788\uc73c\uba70, <code>@CommandHandler</code>, <code>@CommandHandler.CallbackQuery</code>, <code>@CommonHandler</code>\uc5d0\uc11c \uc9c0\uc6d0\ub429\ub2c8\ub2e4:</p> <pre><code>@CommandHandler([\"text\"])\n@ArgParser(SpaceArgParser::class)\nsuspend fun test(user: User, bot: TelegramBot) {\n    //...\n}\n</code></pre> <p><code>defaultArgParser</code>\ub3c4 \ucc38\uc870\ud558\uc138\uc694</p>"},{"location":"ko/Handlers/#_6","title":"\uacb0\ub860","text":"<p>\uc774\ub7ec\ud55c \uc5b4\ub178\ud14c\uc774\uc158\uc740 \uba85\ub839, \uc785\ub825 \ubc0f \uc774\ubca4\ud2b8\ub97c \ucc98\ub9ac\ud558\uae30 \uc704\ud55c \uac15\ub825\ud558\uace0 \uc720\uc5f0\ud55c \ub3c4\uad6c\ub97c \uc81c\uacf5\ud558\uba70, \uc18d\ub3c4 \uc81c\ud55c \ubc0f \uac00\ub4dc\uc758 \ubcc4\ub3c4 \uad6c\uc131\uc744 \ud5c8\uc6a9\ud558\uc5ec \ubd07 \uac1c\ubc1c\uc758 \uc804\uccb4\uc801\uc778 \uad6c\uc870\uc640 \uc720\uc9c0\ubcf4\uc218\uc131\uc744 \ud5a5\uc0c1\uc2dc\ud0b5\ub2c8\ub2e4.</p>"},{"location":"ko/Handlers/#_7","title":"\ucc38\uace0 \uc790\ub8cc","text":"<ul> <li>Activities &amp; Processors</li> <li>Activity invocation</li> <li>FSM and Conversation handling</li> <li>Update parsing</li> <li>Aide</li> </ul>"},{"location":"ko/Interceptors-%28middleware%29/","title":"\uc778\ud130\uc149\ud130 (\ubbf8\ub4e4\uc6e8\uc5b4)","text":""},{"location":"ko/Interceptors-%28middleware%29/#_1","title":"\uc778\ud130\uc149\ud130: \ubd07\uc744 \uc704\ud55c \ud6a1\ub2e8 \uad00\uc2ec\uc0ac","text":"<p>Telegram \ubd07\uc744 \uad6c\ucd95\ud560 \ub54c \ud578\ub4e4\ub7ec \uc804\ubc18\uc5d0 \uac78\uccd0 \uc124\uc815, \uac80\uc0ac \ub610\ub294 \uc815\ub9ac \uc791\uc5c5\uc744 \ubc18\ubcf5\ud558\ub294 \uacbd\uc6b0\uac00 \ub9ce\uc2b5\ub2c8\ub2e4. \uc778\ud130\uc149\ud130\ub97c \uc0ac\uc6a9\ud558\uba74 \ud578\ub4e4\ub7ec \uc8fc\uc704\uc5d0 \uacf5\uc720 \ub85c\uc9c1\uc744 \uc5f0\uacb0\ud558\uc5ec \ud578\ub4e4\ub7ec\ub97c \uc9d1\uc911\uc801\uc774\uace0 \uc720\uc9c0\ubcf4\uc218\uac00 \uc6a9\uc774\ud558\uac8c \ub9cc\ub4e4 \uc218 \uc788\uc2b5\ub2c8\ub2e4.</p> <p>telegram-bot\uc5d0\uc11c \uc778\ud130\uc149\ud130\uac00 \uc791\ub3d9\ud558\ub294 \ubc29\uc2dd\uacfc \uc0ac\uc6a9\ud558\ub294 \ubc29\ubc95\uc740 \ub2e4\uc74c\uacfc \uac19\uc2b5\ub2c8\ub2e4.</p>"},{"location":"ko/Interceptors-%28middleware%29/#_2","title":"\uc778\ud130\uc149\ud130\ub780? (\uac04\ub2e8\ud55c \uc124\uba85)","text":"<p>\uc778\ud130\uc149\ud130\ub294 \uc5c5\ub370\uc774\ud2b8 \ucc98\ub9ac \ud30c\uc774\ud504\ub77c\uc778\uc758 \ud2b9\uc815 \uc2dc\uc810\uc5d0\uc11c \uc2e4\ud589\ub418\ub294 \ud568\uc218\uc785\ub2c8\ub2e4. \ub2e4\uc74c\uc744 \ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4: - \ucc98\ub9ac \ucee8\ud14d\uc2a4\ud2b8\ub97c \uac80\uc0ac\ud558\uace0 \uc218\uc815 - \ud6a1\ub2e8 \uad00\uc2ec\uc0ac \ub85c\uc9c1 \ucd94\uac00 (\ub85c\uae45, \uc778\uc99d, \uba54\ud2b8\ub9ad) - \ud544\uc694\ud55c \uacbd\uc6b0 \ucc98\ub9ac\ub97c \uc77c\ucc0d \uc911\ub2e8 - \ucc98\ub9ac \ud6c4 \ub9ac\uc18c\uc2a4 \uc815\ub9ac</p> <p>\uc778\ud130\uc149\ud130\ub97c \ubaa8\ub4e0 \uc5c5\ub370\uc774\ud2b8\uac00 \ud578\ub4e4\ub7ec \uc2e4\ud589 \uc804, \uc911, \ud6c4\uc5d0 \ud1b5\uacfc\ud558\ub294 \uccb4\ud06c\ud3ec\uc778\ud2b8\ub85c \uc0dd\uac01\ud574\ubcf4\uc138\uc694.</p>"},{"location":"ko/Interceptors-%28middleware%29/#_3","title":"\ucc98\ub9ac \ud30c\uc774\ud504\ub77c\uc778","text":"<p>\ubd07\uc740 7\ub2e8\uacc4 \ud30c\uc774\ud504\ub77c\uc778\uc744 \ud1b5\ud574 \uc5c5\ub370\uc774\ud2b8\ub97c \ucc98\ub9ac\ud569\ub2c8\ub2e4:</p> \ub2e8\uacc4 \uc2e4\ud589 \uc2dc\uc810 \uc6a9\ub3c4 \uc124\uc815 \ucc98\ub9ac \uc804, \uc5c5\ub370\uc774\ud2b8\uac00 \ub3c4\ucc29\ud558\uc790\ub9c8\uc790 \u2714 \uc804\uc5ed \uc18d\ub3c4 \uc81c\ud55c\u2714 \uc2a4\ud338 \ub610\ub294 \uc798\ubabb\ub41c \uc5c5\ub370\uc774\ud2b8 \ud544\ud130\ub9c1\u2714 \ucd08\uae30 \ub85c\uae45\u2714 \uacf5\uc720 \ucee8\ud14d\uc2a4\ud2b8 \uc124\uc815 \ud30c\uc2f1 \uc124\uc815 \ud6c4, \uba85\ub839\uacfc \ub9e4\uac1c\ubcc0\uc218 \ucd94\ucd9c \u2714 \uc0ac\uc6a9\uc790 \uc815\uc758 \uba85\ub839 \ud30c\uc2f1\u2714 \ud30c\uc2f1\ub41c \ub370\uc774\ud130\ub85c \ucee8\ud14d\uc2a4\ud2b8 \ubcf4\uac15\u2714 \uc5c5\ub370\uc774\ud2b8 \uad6c\uc870 \uc720\ud6a8\uc131 \uac80\uc0ac \ub9e4\uce6d \uc801\uc808\ud55c \ud578\ub4e4\ub7ec \ucc3e\uae30 (\uba85\ub839/\uc785\ub825/\uc77c\ubc18) \u2714 \ud578\ub4e4\ub7ec \uc120\ud0dd \uc7ac\uc815\uc758\u2714 \uc0ac\uc6a9\uc790 \uc815\uc758 \uc785\ub825 \ucc98\ub9ac \ub85c\uc9c1\u2714 \uc77c\uce58\ub41c \ud578\ub4e4\ub7ec \ub85c\uae45 \uac80\uc99d \ud578\ub4e4\ub7ec\ub97c \ucc3e\uc740 \ud6c4, \ud638\ucd9c \uc804 \u2714 \ud578\ub4e4\ub7ec\ubcc4 \uad8c\ud55c\u2714 \ud578\ub4e4\ub7ec\ubcc4 \uc18d\ub3c4 \uc81c\ud55c\u2714 \uac00\ub4dc \uac80\uc0ac\u2714 \uc870\uac74\uc774 \ucda9\uc871\ub418\uc9c0 \uc54a\uc73c\uba74 \ucc98\ub9ac \ucde8\uc18c \ud638\ucd9c \uc804 \ud578\ub4e4\ub7ec\uac00 \uc2e4\ud589\ub418\uae30 \uc9c1\uc804 \u2714 \ub9c8\uc9c0\ub9c9 \uc21c\uac04 \uac80\uc0ac\u2714 \ud0c0\uc774\uba38/\uba54\ud2b8\ub9ad \uc2dc\uc791\u2714 \ud578\ub4e4\ub7ec\ub97c \uc704\ud55c \ucee8\ud14d\uc2a4\ud2b8 \ubcf4\uac15\u2714 \ud578\ub4e4\ub7ec \ub3d9\uc791 \uc218\uc815 \ud638\ucd9c \ud578\ub4e4\ub7ec\uac00 \uc5ec\uae30\uc11c \uc2e4\ud589\ub428 \u2714 \ud578\ub4e4\ub7ec \uc2e4\ud589 \uac10\uc2f8\uae30\u2714 \uc624\ub958 \ucc98\ub9ac\u2714 \ud578\ub4e4\ub7ec \uacb0\uacfc \ub85c\uae45 \ud638\ucd9c \ud6c4 \ud578\ub4e4\ub7ec \uc644\ub8cc \ud6c4 (\uc131\uacf5 \ub610\ub294 \uc2e4\ud328) \u2714 \ub9ac\uc18c\uc2a4 \uc815\ub9ac\u2714 \uacb0\uacfc \ub85c\uae45\u2714 \uc624\ub958 \uc2dc \ud3f4\ubc31 \uba54\uc2dc\uc9c0 \uc804\uc1a1\u2714 \ubc18\ud658 \uc804 \uacb0\uacfc \uc218\uc815"},{"location":"ko/Interceptors-%28middleware%29/#_4","title":"\uc778\ud130\uc149\ud130 \uc0dd\uc131","text":"<p>\uc778\ud130\uc149\ud130\ub294 <code>ProcessingContext</code>\ub97c \ubc1b\ub294 \uac04\ub2e8\ud55c \ud568\uc218\uc785\ub2c8\ub2e4:</p> <pre><code>import eu.vendeli.tgbot.core.PipelineInterceptor\nimport eu.vendeli.tgbot.types.component.ProcessingContext\n\nval myInterceptor: PipelineInterceptor = { context -&gt;\n    // \uc5ec\uae30\uc5d0 \ub85c\uc9c1 \uc791\uc131\n    println(\"Processing update: ${context.update.updateId}\")\n}\n</code></pre> <p>\ub610\ub294 \ub78c\ub2e4\ub97c \uc0ac\uc6a9\ud569\ub2c8\ub2e4:</p> <pre><code>val loggingInterceptor = PipelineInterceptor { context -&gt;\n    val logger = context.bot.config.loggerFactory.get(\"MyInterceptor\")\n    logger.info(\"Processing update #${context.update.updateId}\")\n}\n</code></pre>"},{"location":"ko/Interceptors-%28middleware%29/#_5","title":"\uc778\ud130\uc149\ud130 \ub4f1\ub85d","text":"<p>\ucc98\ub9ac \ud30c\uc774\ud504\ub77c\uc778\uc5d0 \uc778\ud130\uc149\ud130\ub97c \ub4f1\ub85d\ud569\ub2c8\ub2e4:</p> <pre><code>suspend fun main() {\n    val bot = TelegramBot(\"BOT_TOKEN\")\n\n    // \uc124\uc815 \ub2e8\uacc4\uc5d0 \uc778\ud130\uc149\ud130 \ub4f1\ub85d\n    bot.update.pipeline.intercept(ProcessingPipePhase.Setup) { context -&gt;\n        // \uc0ac\uc6a9\uc790\uac00 \ucc28\ub2e8\ub418\uc5c8\ub294\uc9c0 \ud655\uc778\n        val user = context.update.userOrNull\n        if (user != null &amp;&amp; isBanned(user.id)) {\n            context.finish() // \ucc98\ub9ac \uc911\ub2e8\n            return@intercept\n        }\n    }\n\n    // \ud638\ucd9c \uc804 \ub2e8\uacc4\uc5d0 \uc778\ud130\uc149\ud130 \ub4f1\ub85d\n    bot.update.pipeline.intercept(ProcessingPipePhase.PreInvoke) { context -&gt;\n        val startTime = System.currentTimeMillis()\n        // \uc2dc\uc791 \uc2dc\uac04 \uc800\uc7a5\n    }\n\n    // \ud638\ucd9c \ud6c4 \ub2e8\uacc4\uc5d0 \uc778\ud130\uc149\ud130 \ub4f1\ub85d\n    bot.update.pipeline.intercept(ProcessingPipePhase.PostInvoke) { context -&gt;\n        val startTime = // \uc2dc\uc791 \uc2dc\uac04 \uac00\uc838\uc624\uae30\n        if (startTime != null) {\n            val duration = System.currentTimeMillis() - startTime\n            println(\"Handler took ${duration}ms\")\n        }\n    }\n\n    bot.handleUpdates()\n}\n</code></pre>"},{"location":"ko/Interceptors-%28middleware%29/#_6","title":"\uc2e4\uc81c \uc0ac\ub840: \uc778\uc99d \ubc0f \uba54\ud2b8\ub9ad","text":"<p>\uc608\uc81c: \ud2b9\uc815 \uba85\ub839\uc5d0 \uc778\uc99d\uc774 \ud544\uc694\ud55c \ubd07, \ud578\ub4e4\ub7ec \uc2e4\ud589 \uc2dc\uac04 \uce21\uc815, \ubaa8\ub4e0 \uba85\ub839 \ub85c\uae45:</p> <pre><code>suspend fun main() {\n    val bot = TelegramBot(\"BOT_TOKEN\")\n\n    // \uc124\uc815 \ub2e8\uacc4: \uc0ac\uc6a9\uc790 \uc778\uc99d \uc5ec\ubd80 \ud655\uc778\n    bot.update.pipeline.intercept(ProcessingPipePhase.Setup) { context -&gt;\n        val user = context.update.userOrNull ?: return@intercept\n\n        if (!isAuthenticated(user.id)) {\n            message { \"Please authenticate first using /login\" }\n                .send(user, context.bot)\n            context.finish()\n        }\n    }\n\n    // \ud638\ucd9c \uc804 \ub2e8\uacc4: \ud0c0\uc774\uba38 \uc2dc\uc791 \ubc0f \uad8c\ud55c \ud655\uc778\n    bot.update.pipeline.intercept(ProcessingPipePhase.PreInvoke) { context -&gt;\n        val activity = context.activity ?: return@intercept\n        val user = context.update.userOrNull ?: return@intercept\n\n        // \uc774 \ud578\ub4e4\ub7ec\uc5d0 \ub300\ud55c \uc0ac\uc6a9\uc790 \uad8c\ud55c \ud655\uc778\n        if (!hasPermission(user.id, activity)) {\n            message { \"You don't have permission to use this command.\" }\n                .send(user, context.bot)\n            context.finish()\n            return@intercept\n        }\n\n        // \ud0c0\uc774\uba38 \uc2dc\uc791\n        // \uc2dc\uc791 \uc2dc\uac04 \uc800\uc7a5\n    }\n\n    // \ud638\ucd9c \ud6c4 \ub2e8\uacc4: \ub85c\uae45 \ubc0f \uc815\ub9ac\n    bot.update.pipeline.intercept(ProcessingPipePhase.PostInvoke) { context -&gt;\n        val activity = context.activity ?: return@intercept\n        val startTime = // \uc2dc\uc791 \uc2dc\uac04 \uac00\uc838\uc624\uae30\n\n        if (startTime != null) {\n            val duration = System.currentTimeMillis() - startTime\n            val logger = context.bot.config.loggerFactory.get(\"Metrics\")\n            logger.info(\n                \"Handler ${activity::class.simpleName} took ${duration}ms \" +\n                \"for user ${context.update.userOrNull?.id}\"\n            )\n        }\n    }\n\n    bot.handleUpdates()\n}\n</code></pre>"},{"location":"ko/Interceptors-%28middleware%29/#processingcontext","title":"ProcessingContext","text":"<p><code>ProcessingContext</code>\ub294 \ub2e4\uc74c\uc5d0 \ub300\ud55c \uc561\uc138\uc2a4\ub97c \uc81c\uacf5\ud569\ub2c8\ub2e4:</p> <ul> <li><code>update: ProcessedUpdate</code> - \ud604\uc7ac \ucc98\ub9ac \uc911\uc778 \uc5c5\ub370\uc774\ud2b8</li> <li><code>bot: TelegramBot</code> - \ubd07 \uc778\uc2a4\ud134\uc2a4</li> <li><code>registry: ActivityRegistry</code> - \uc561\ud2f0\ube44\ud2f0 \ub808\uc9c0\uc2a4\ud2b8\ub9ac</li> <li><code>parsedInput: String</code> - \ud30c\uc2f1\ub41c \uba85\ub839/\uc785\ub825 \ud14d\uc2a4\ud2b8</li> <li><code>parameters: Map&lt;String, String&gt;</code> - \ud30c\uc2f1\ub41c \uba85\ub839 \ub9e4\uac1c\ubcc0\uc218</li> <li><code>activity: Activity?</code> - \ud655\uc778\ub41c \ud578\ub4e4\ub7ec (\ub9e4\uce6d \ub2e8\uacc4\uae4c\uc9c0 null)</li> <li><code>shouldProceed: Boolean</code> - \ucc98\ub9ac\ub97c \uacc4\uc18d\ud574\uc57c \ud558\ub294\uc9c0 \uc5ec\ubd80</li> <li><code>additionalContext: AdditionalContext</code> - \ucd94\uac00 \ucee8\ud14d\uc2a4\ud2b8 \ub370\uc774\ud130</li> <li><code>finish()</code> - \ucc98\ub9ac\ub97c \uc77c\ucc0d \uc911\ub2e8</li> </ul>"},{"location":"ko/Interceptors-%28middleware%29/#_7","title":"\ucc98\ub9ac \uc77c\ucc0d \uc911\ub2e8","text":"<p><code>context.finish()</code>\ub97c \ud638\ucd9c\ud558\uc5ec \ucc98\ub9ac\ub97c \uc911\ub2e8\ud569\ub2c8\ub2e4:</p> <pre><code>bot.update.pipeline.intercept(ProcessingPipePhase.Validation) { context -&gt;\n    if (someCondition) {\n        context.finish() // \ub354 \uc774\uc0c1 \ub2e8\uacc4\uac00 \uc2e4\ud589\ub418\uc9c0 \uc54a\uc74c\n    }\n}\n</code></pre>"},{"location":"ko/Interceptors-%28middleware%29/#_8","title":"\uc0ac\uc6a9\uc790 \ub370\uc774\ud130 \uc800\uc7a5","text":"<p>\uc778\ud130\uc149\ud130 \uac04\uc5d0 \ub370\uc774\ud130\ub97c \uc804\ub2ec\ud558\ub824\uba74 <code>additionalContext</code>\ub97c \uc0ac\uc6a9\ud569\ub2c8\ub2e4:</p> <pre><code>// \ud638\ucd9c \uc804\uc5d0\ncontext.additionalContext[\"userId\"] = context.update.userOrNull?.id\n\n// \ud638\ucd9c \ud6c4\uc5d0\nval userId = context.additionalContext[\"userId\"] as? Long\n</code></pre>"},{"location":"ko/Interceptors-%28middleware%29/#_9","title":"\uc5ec\ub7ec \uc778\ud130\uc149\ud130","text":"<p>\uac19\uc740 \ub2e8\uacc4\uc5d0 \uc5ec\ub7ec \uc778\ud130\uc149\ud130\ub97c \ub4f1\ub85d\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4. \ub4f1\ub85d \uc21c\uc11c\ub300\ub85c \uc2e4\ud589\ub429\ub2c8\ub2e4:</p> <pre><code>bot.update.pipeline.intercept(ProcessingPipePhase.Setup) { context -&gt;\n    println(\"First interceptor\")\n}\n\nbot.update.pipeline.intercept(ProcessingPipePhase.Setup) { context -&gt;\n    println(\"Second interceptor\")\n}\n\n// \uc5c5\ub370\uc774\ud2b8\uac00 \ucc98\ub9ac\ub420 \ub54c:\n// \ucd9c\ub825: \"First interceptor\"\n// \ucd9c\ub825: \"Second interceptor\"\n</code></pre> <p>\uc778\ud130\uc149\ud130\uac00 <code>context.finish()</code>\ub97c \ud638\ucd9c\ud558\uba74 \ud574\ub2f9 \ub2e8\uacc4\uc758 \ud6c4\uc18d \uc778\ud130\uc149\ud130\uac00 \uac74\ub108\ub6f0\uc5b4\uc9c0\uace0 \uc774\ud6c4 \ub2e8\uacc4\ub294 \uc2e4\ud589\ub418\uc9c0 \uc54a\uc2b5\ub2c8\ub2e4.</p>"},{"location":"ko/Interceptors-%28middleware%29/#_10","title":"\ubaa8\ubc94 \uc0ac\ub840","text":""},{"location":"ko/Interceptors-%28middleware%29/#1","title":"1. \uc801\uc808\ud55c \ub2e8\uacc4 \uc0ac\uc6a9","text":"<ul> <li>\uc124\uc815: \uc804\uc5ed \uac80\uc0ac, \ud544\ud130\ub9c1, \ucd08\uae30 \uc124\uc815</li> <li>\ud30c\uc2f1: \uc0ac\uc6a9\uc790 \uc815\uc758 \ud30c\uc2f1 \ub85c\uc9c1</li> <li>\ub9e4\uce6d: \ud578\ub4e4\ub7ec \uc120\ud0dd \ub85c\uc9c1</li> <li>\uac80\uc99d: \uad8c\ud55c, \uc18d\ub3c4 \uc81c\ud55c, \uac00\ub4dc</li> <li>\ud638\ucd9c \uc804: \ud578\ub4e4\ub7ec\ubcc4 \uc900\ube44</li> <li>\ud638\ucd9c: \uae30\ubcf8\uc801\uc73c\ub85c \uae30\ubcf8 \uc778\ud130\uc149\ud130\uac00 \ucc98\ub9ac</li> <li>\ud638\ucd9c \ud6c4: \uc815\ub9ac, \ub85c\uae45, \uc624\ub958 \ucc98\ub9ac</li> </ul>"},{"location":"ko/Interceptors-%28middleware%29/#2","title":"2. \uc778\ud130\uc149\ud130 \uc9d1\uc911 \uc720\uc9c0","text":"<p>\uac01 \uc778\ud130\uc149\ud130\ub294 \ud55c \uac00\uc9c0 \uc77c\ub9cc \ud574\uc57c \ud569\ub2c8\ub2e4:</p> <pre><code>// \u2705 \uc88b\uc74c - \uc9d1\uc911\ub41c \uc778\ud130\uc149\ud130\nbot.update.pipeline.intercept(ProcessingPipePhase.Setup) { context -&gt;\n    if (isBanned(context.update.userOrNull?.id)) {\n        context.finish()\n    }\n}\n\n// \u274c \ud53c\ud574\uc57c \ud568 - \ub108\ubb34 \ub9ce\uc740 \uc77c\uc744 \ud568\nbot.update.pipeline.intercept(ProcessingPipePhase.Setup) { context -&gt;\n    // \uc778\uc99d\n    // \ub85c\uae45\n    // \uba54\ud2b8\ub9ad\n    // \uc18d\ub3c4 \uc81c\ud55c\n    // ... \ub108\ubb34 \ub9ce\uc74c!\n}\n</code></pre>"},{"location":"ko/Interceptors-%28middleware%29/#3","title":"3. \uc624\ub958\ub97c \uc6b0\uc544\ud558\uac8c \ucc98\ub9ac","text":"<p>\uc778\ud130\uc149\ud130\ub294 \ubd07\uc744 \uc911\ub2e8\uc2dc\ud0a4\uba74 \uc548 \ub429\ub2c8\ub2e4:</p> <pre><code>bot.update.pipeline.intercept(ProcessingPipePhase.PreInvoke) { context -&gt;\n    try {\n        // \ub85c\uc9c1\n    } catch (e: Exception) {\n        val logger = context.bot.config.loggerFactory.get(\"Interceptor\")\n        logger.error(\"Interceptor error\", e)\n        // \ucc98\ub9ac\ub97c \uc911\ub2e8\ud558\ub824\ub294 \uacbd\uc6b0\uac00 \uc544\ub2c8\uba74 context.finish() \ud638\ucd9c \uc548 \ud568\n    }\n}\n</code></pre>"},{"location":"ko/Interceptors-%28middleware%29/#4","title":"4. \ub9ac\uc18c\uc2a4 \uc815\ub9ac","text":"<p><code>PreInvoke</code>\uc5d0\uc11c \ub9ac\uc18c\uc2a4\ub97c \uc5f4\uba74 <code>PostInvoke</code>\uc5d0\uc11c \uc815\ub9ac\ud569\ub2c8\ub2e4:</p> <pre><code>var timer: Timer? = null\n\nbot.update.pipeline.intercept(ProcessingPipePhase.PreInvoke) { context -&gt;\n    timer = Timer()\n    context.additionalContext[\"timer\"] = timer\n}\n\nbot.update.pipeline.intercept(ProcessingPipePhase.PostInvoke) { context -&gt;\n    val timer = context.additionalContext[\"timer\"] as? Timer\n    timer?.stop()\n}\n</code></pre>"},{"location":"ko/Interceptors-%28middleware%29/#5","title":"5. \uc21c\uc11c\uac00 \uc911\uc694\ud568","text":"<p>\uc6d0\ud558\ub294 \uc21c\uc11c\ub300\ub85c \uc778\ud130\uc149\ud130\ub97c \ub4f1\ub85d\ud569\ub2c8\ub2e4:</p> <pre><code>// \ub354 \uc77c\ubc18\uc801\uc778 \uac80\uc0ac\ub97c \uba3c\uc800\nbot.update.pipeline.intercept(ProcessingPipePhase.Setup) { \n    // \uc804\uc5ed \ucc28\ub2e8 \ud655\uc778\n}\n\n// \ub354 \uad6c\uccb4\uc801\uc778 \uac80\uc0ac\ub97c \ub098\uc911\uc5d0\nbot.update.pipeline.intercept(ProcessingPipePhase.Validation) { \n    // \ud578\ub4e4\ub7ec\ubcc4 \uad8c\ud55c \ud655\uc778\n}\n</code></pre>"},{"location":"ko/Interceptors-%28middleware%29/#6","title":"6. \ud6a1\ub2e8 \uad00\uc2ec\uc0ac\uc5d0 \uc778\ud130\uc149\ud130 \uc0ac\uc6a9","text":"<p>\uc778\ud130\uc149\ud130\ub294 \ub2e4\uc74c\uc5d0 \uc801\ud569\ud569\ub2c8\ub2e4: - \u2705 \uc778\uc99d/\uc778\uac00 - \u2705 \ub85c\uae45 - \u2705 \uba54\ud2b8\ub9ad/\uc131\ub2a5 \ubaa8\ub2c8\ud130\ub9c1 - \u2705 \uc18d\ub3c4 \uc81c\ud55c - \u2705 \uc624\ub958 \ucc98\ub9ac - \u2705 \uc694\uccad/\uc751\ub2f5 \ubcc0\ud658</p> <p>\ud578\ub4e4\ub7ec\ubcc4 \ub85c\uc9c1\uc740 \ud578\ub4e4\ub7ec\uc5d0 \uc720\uc9c0\ud569\ub2c8\ub2e4.</p>"},{"location":"ko/Interceptors-%28middleware%29/#_11","title":"\uae30\ubcf8 \uc778\ud130\uc149\ud130","text":"<p>\ud504\ub808\uc784\uc6cc\ud06c\uc5d0\ub294 \ud575\uc2ec \uae30\ub2a5\uc744 \uc704\ud55c \uae30\ubcf8 \uc778\ud130\uc149\ud130\uac00 \ud3ec\ud568\ub418\uc5b4 \uc788\uc2b5\ub2c8\ub2e4:</p> <ul> <li>DefaultSetupInterceptor: \uc804\uc5ed \uc18d\ub3c4 \uc81c\ud55c</li> <li>DefaultParsingInterceptor: \uba85\ub839 \ud30c\uc2f1</li> <li>DefaultMatchInterceptor: \ud578\ub4e4\ub7ec \ub9e4\uce6d (\uba85\ub839, \uc785\ub825, \uc77c\ubc18 \ub9e4\ucc98)</li> <li>DefaultValidationInterceptor: \uac00\ub4dc \uac80\uc0ac \ubc0f \ud578\ub4e4\ub7ec\ubcc4 \uc18d\ub3c4 \uc81c\ud55c</li> <li>DefaultInvokeInterceptor: \ud578\ub4e4\ub7ec \uc2e4\ud589 \ubc0f \uc624\ub958 \ucc98\ub9ac</li> </ul> <p>\uc0ac\uc6a9\uc790 \uc815\uc758 \uc778\ud130\uc149\ud130\ub294 \uc774 \uae30\ubcf8\uac12\uacfc \ud568\uaed8 \uc2e4\ud589\ub429\ub2c8\ub2e4. \uae30\ubcf8\uac12 \uc804\ud6c4\uc5d0 \ub85c\uc9c1\uc744 \ucd94\uac00\ud560 \uc218 \uc788\uc9c0\ub9cc \uae30\ubcf8 \uc778\ud130\uc149\ud130\ub97c \uc81c\uac70\ud560 \uc218\ub294 \uc5c6\uc2b5\ub2c8\ub2e4.</p>"},{"location":"ko/Interceptors-%28middleware%29/#_12","title":"\uace0\uae09: \uc870\uac74\ubd80 \uc778\ud130\uc149\ud130","text":"<p>\uc778\ud130\uc149\ud130\ub97c \uc870\uac74\ubd80\ub85c \ub9cc\ub4e4 \uc218 \uc788\uc2b5\ub2c8\ub2e4:</p> <pre><code>bot.update.pipeline.intercept(ProcessingPipePhase.PreInvoke) { context -&gt;\n    val activity = context.activity ?: return@intercept\n\n    // \ud2b9\uc815 \ud578\ub4e4\ub7ec\uc5d0\ub9cc \uc801\uc6a9\n    if (activity::class.simpleName?.contains(\"Admin\") == true) {\n        // \uad00\ub9ac\uc790 \uc804\uc6a9 \ub85c\uc9c1\n        checkAdminPermissions(context)\n    }\n}\n</code></pre>"},{"location":"ko/Interceptors-%28middleware%29/#_13","title":"\uc694\uc57d","text":"<p>\uc778\ud130\uc149\ud130\ub294 \ubd07\uc5d0 \ud6a1\ub2e8 \uad00\uc2ec\uc0ac \ub85c\uc9c1\uc744 \ucd94\uac00\ud558\ub294 \uae54\ub054\ud55c \ubc29\ubc95\uc744 \uc81c\uacf5\ud569\ub2c8\ub2e4:</p> <ul> <li>\u2705 7\ub2e8\uacc4 \ucc98\ub9ac\uc758 \ub2e4\ub978 \ub2e8\uacc4\ub97c \uc704\ud55c</li> <li>\u2705 \uac04\ub2e8\ud55c API: <code>PipelineInterceptor</code> \uad6c\ud604\ub9cc \ud558\uba74 \ub428</li> <li>\u2705 \uc720\uc5f0\ud568: \ub2e8\uacc4\ubcc4 \uc5ec\ub7ec \uc778\ud130\uc149\ud130 \ub4f1\ub85d \uac00\ub2a5</li> <li>\u2705 \uac15\ub825\ud568: \uc804\uccb4 \ucc98\ub9ac \ucee8\ud14d\uc2a4\ud2b8\uc5d0 \uc561\uc138\uc2a4</li> <li>\u2705 \uc548\uc804\ud568: <code>context.finish()</code>\ub85c \ucc98\ub9ac\ub97c \uc77c\ucc0d \uc911\ub2e8\ud560 \uc218 \uc788\uc74c</li> </ul> <p>\uc778\ud130\uc149\ud130\ub97c \uc0ac\uc6a9\ud558\uc5ec \ud578\ub4e4\ub7ec\ub97c \ube44\uc988\ub2c8\uc2a4 \ub85c\uc9c1\uc5d0 \uc9d1\uc911\uc2dc\ud0a4\uace0 \uc778\uc99d, \ub85c\uae45, \uba54\ud2b8\ub9ad \uac19\uc740 \uacf5\uc720 \uad00\uc2ec\uc0ac\ub97c \uc911\uc559 \uc9d1\uc911\uc2dd\uc73c\ub85c \ucc98\ub9ac\ud558\uc138\uc694.</p>"},{"location":"ko/Interceptors-%28middleware%29/#_14","title":"\ucc38\uace0","text":"<ul> <li>Functional Handling DSL - \ud568\uc218\ud615 \uc5c5\ub370\uc774\ud2b8 \ucc98\ub9ac</li> <li>Guards - \ud578\ub4e4\ub7ec \uc218\uc900 \uad8c\ud55c \ud655\uc778</li> </ul>"},{"location":"ko/Update-parsing/","title":"\uc5c5\ub370\uc774\ud2b8 \ud30c\uc2f1","text":""},{"location":"ko/Update-parsing/#_1","title":"\ud14d\uc2a4\ud2b8 \ud398\uc774\ub85c\ub4dc","text":"<p>\ud2b9\uc815 \uc5c5\ub370\uc774\ud2b8\ub294 \ucd94\uac00 \ucc98\ub9ac\ub97c \uc704\ud574 \ud30c\uc2f1\ud560 \uc218 \uc788\ub294 \ud14d\uc2a4\ud2b8 \ud398\uc774\ub85c\ub4dc\ub97c \uac00\uc9c8 \uc218 \uc788\uc2b5\ub2c8\ub2e4. \uc0b4\ud3b4\ubcf4\uaca0\uc2b5\ub2c8\ub2e4:</p> <ul> <li><code>MessageUpdate</code> -&gt; <code>message.text</code></li> <li><code>EditedMessageUpdate</code> -&gt; <code>editedMessage.text</code></li> <li><code>ChannelPostUpdate</code> -&gt; <code>channelPost.text</code></li> <li><code>EditedChannelPostUpdate</code> -&gt; <code>editedChannelPost.text</code></li> <li><code>InlineQueryUpdate</code> -&gt; <code>inlineQuery.query</code></li> <li><code>ChosenInlineResultUpdate</code> -&gt; <code>chosenInlineResult.query</code></li> <li><code>CallbackQueryUpdate</code> -&gt; <code>callbackQuery.data</code></li> <li><code>ShippingQueryUpdate</code> -&gt; <code>shippingQuery.invoicePayload</code></li> <li><code>PreCheckoutQueryUpdate</code> -&gt; <code>preCheckoutQuery.invoicePayload</code></li> <li><code>PollUpdate</code> -&gt; <code>poll.question</code></li> <li><code>PurchasedPaidMediaUpdate</code> -&gt; <code>purchasedPaidMedia.paidMediaPayload</code></li> </ul> <p>\ub098\uc5f4\ub41c \uc5c5\ub370\uc774\ud2b8\uc5d0\uc11c \ud2b9\uc815 \ud30c\ub77c\ubbf8\ud130\uac00 \uc120\ud0dd\ub418\uc5b4 <code>TextReference</code>\ub85c \uac00\uc838\uc640 \ucd94\uac00 \ud30c\uc2f1\uc744 \uc704\ud574 \uc0ac\uc6a9\ub429\ub2c8\ub2e4.</p>"},{"location":"ko/Update-parsing/#_2","title":"\ud30c\uc2f1","text":"<p>\uc120\ud0dd\ub41c \ud30c\ub77c\ubbf8\ud130\ub294 \uc801\uc808\ud558\uac8c \uad6c\uc131\ub41c \uad6c\ubd84\uc790\ub85c \ud30c\uc2f1\ub418\uc5b4 \uba85\ub839\uacfc \uadf8\uc5d0 \ub300\ud55c \ud30c\ub77c\ubbf8\ud130\ub85c \ubcc0\ud658\ub429\ub2c8\ub2e4.</p> <p><code>commandParsing</code> \uad6c\uc131 \ube14\ub85d\uc744 \ucc38\uc870\ud558\uc138\uc694.</p> <p>\uc544\ub798 \ub2e4\uc774\uc5b4\uadf8\ub7a8\uc5d0\uc11c \uc5b4\ub5a4 \ucef4\ud3ec\ub10c\ud2b8\uac00 \ub300\uc0c1 \ud568\uc218\uc758 \uc5b4\ub5a4 \ubd80\ubd84\uc5d0 \ub9e4\ud551\ub418\ub294\uc9c0 \ubcfc \uc218 \uc788\uc2b5\ub2c8\ub2e4.</p> <p> </p>"},{"location":"ko/Update-parsing/#parammapping","title":"@ParamMapping","text":"<p>\ud3b8\uc758\ub97c \uc704\ud574 \ub610\ub294 \ud2b9\ubcc4\ud55c \uacbd\uc6b0\ub97c \uc704\ud574 <code>@ParamMapping</code>\uc774\ub77c\ub294 \uc5b4\ub178\ud14c\uc774\uc158\ub3c4 \uc788\uc2b5\ub2c8\ub2e4.</p> <p>\uc774 \uc5b4\ub178\ud14c\uc774\uc158\uc744 \ud1b5\ud574 \ub4e4\uc5b4\uc624\ub294 \ud14d\uc2a4\ud2b8\uc5d0\uc11c \ud30c\ub77c\ubbf8\ud130 \uc774\ub984\uc744 \uc5b4\ub5a4 \ud30c\ub77c\ubbf8\ud130\uc5d0\ub4e0 \ub9e4\ud551\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4.</p> <p>\uc608\ub97c \ub4e4\uc5b4 <code>CallbackData</code>(64\uc790)\uc640 \uac19\uc774 \ub4e4\uc5b4\uc624\ub294 \ub370\uc774\ud130\uac00 \uc81c\ud55c\uc801\uc778 \uacbd\uc6b0\uc5d0\ub3c4 \ud3b8\ub9ac\ud569\ub2c8\ub2e4.</p> <p>\uc0ac\uc6a9 \uc608\uc2dc: <code>greeting?name=Adam</code></p> <pre><code>@CommandHandler([\"greeting\"])\nsuspend fun greeting(@ParamMapping(\"name\") anyParameterName: String, user: User, bot: TelegramBot) {\n    message { \"Hello, $anyParameterName\" }.send(to = user, via = bot)\n}\n</code></pre> <p>\ub610\ud55c \ud30c\uc11c\uac00 \ud30c\ub77c\ubbf8\ud130 \uc774\ub984\uc744 \uac74\ub108\ub6f0\uac70\ub098 \uc5c6\ub3c4\ub85d \uc124\uc815\ub41c \uacbd\uc6b0 \uc774\ub984 \uc5c6\ub294 \ud30c\ub77c\ubbf8\ud130\ub97c \uce90\uce58\ud558\ub294 \ub370\uc5d0\ub3c4 \uc0ac\uc6a9\ud560 \uc218 \uc788\uc73c\uba70, 'param_n' \ud328\ud134\uc73c\ub85c \uc804\ub2ec\ub418\ub294\ub370 \uc5ec\uae30\uc11c <code>n</code>\uc740 \uc21c\uc11c\uc785\ub2c8\ub2e4.</p> <p>\uc608\ub97c \ub4e4\uc5b4 \ub2e4\uc74c \ud14d\uc2a4\ud2b8 - <code>myCommand?p1=v1&amp;v2&amp;p3=&amp;p4=v4&amp;p5=</code>\ub294 \ub2e4\uc74c\uacfc \uac19\uc774 \ud30c\uc2f1\ub429\ub2c8\ub2e4: * \uba85\ub839 - <code>myCommand</code> * \ud30c\ub77c\ubbf8\ud130   * <code>p1</code> = <code>v1</code>   * <code>param_2</code> = <code>v2</code>   * <code>p3</code> = <code>* `p4` = `v4`   * `p5` =</code></p> <p>\ubcf4\uc2dc\ub2e4\uc2dc\ud53c \ub450 \ubc88\uc9f8 \ud30c\ub77c\ubbf8\ud130\ub294 \uc120\uc5b8\ub41c \uc774\ub984\uc774 \uc5c6\uc73c\ubbc0\ub85c <code>param_2</code>\ub85c \ud45c\ud604\ub429\ub2c8\ub2e4.</p> <p>\ub530\ub77c\uc11c \ucf5c\ubc31\uc5d0\uc11c \ubcc0\uc218 \uc774\ub984\uc744 \ucd95\uc57d\ud558\uace0 \ucf54\ub4dc\uc5d0\uc11c \uba85\ud655\ud558\uace0 \uc77d\uae30 \uc26c\uc6b4 \uc774\ub984\uc744 \uc0ac\uc6a9\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4.</p>"},{"location":"ko/Update-parsing/#_3","title":"\ub525\ub9c1\ud06c","text":"<p>\uc704\uc758 \uc815\ubcf4\ub97c \uace0\ub824\ud560 \ub54c start \uba85\ub839\uc5d0\uc11c \ub525\ub9c1\ud06c\ub97c \uc608\uc0c1\ud55c\ub2e4\uba74 \ub2e4\uc74c\ucc98\ub7fc \uce90\uce58\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4:</p> <pre><code>@CommandHandler([\"/start\"])\nsuspend fun start(@ParamMapping(\"param_1\") deeplink: String?, user: User, bot: TelegramBot) {\n    message { \"deeplink is $deeplink\" }.send(to = user, via = bot)\n}\n</code></pre>"},{"location":"ko/Update-parsing/#_4","title":"\uadf8\ub8f9 \uba85\ub839","text":"<p><code>commandParsing</code> \uad6c\uc131\uc5d0\uc11c <code>useIdentifierInGroupCommands</code> \ud30c\ub77c\ubbf8\ud130\uac00 \ud65c\uc131\ud654\ub418\uba74 <code>TelegramBot.identifier</code>(\uc124\uba85\ub41c \ud30c\ub77c\ubbf8\ud130\ub97c \uc0ac\uc6a9\ud558\ub294 \uacbd\uc6b0 \uc774\ub97c \ubcc0\uacbd\ud558\ub294 \uac83\uc744 \uc78a\uc9c0 \ub9c8\uc138\uc694)\ub97c \uba85\ub839 \uc77c\uce58 \ud504\ub85c\uc138\uc2a4\uc5d0\uc11c \uc0ac\uc6a9\ud560 \uc218 \uc788\uc73c\uba70, \uc5ec\ub7ec \ubd07 \uac04\uc5d0 \uc720\uc0ac\ud55c \uba85\ub839\uc744 \ubd84\ub9ac\ud558\ub294 \ub370 \ub3c4\uc6c0\uc774 \ub429\ub2c8\ub2e4. \uadf8\ub807\uc9c0 \uc54a\uc73c\uba74 <code>@MyBot</code> \ubd80\ubd84\uc740 \ub2e8\uc21c\ud788 \uac74\ub108\ub6f0\uc5b4\uc9d1\ub2c8\ub2e4.</p>"},{"location":"ko/Update-parsing/#_5","title":"\ucc38\uace0 \uc790\ub8cc","text":"<ul> <li>\ud65c\ub3d9 \ud638\ucd9c</li> <li>\ud65c\ub3d9 \ubc0f \ud504\ub85c\uc138\uc11c</li> <li>\uc791\uc5c5</li> </ul>"},{"location":"ko/Useful-utilities-and-tips/","title":"\uc720\uc6a9\ud55c \uc720\ud2f8\ub9ac\ud2f0\uc640 \ud301","text":""},{"location":"ko/Useful-utilities-and-tips/#processedupdate","title":"ProcessedUpdate \uc791\uc5c5","text":"<p><code>ProcessedUpdate</code>\ub294 \uc5c5\ub370\uc774\ud2b8\ub97c \uc704\ud55c \uc81c\ub124\ub9ad \ud074\ub798\uc2a4\ub85c, \uc6d0\ubcf8 \ub370\uc774\ud130\uc5d0 \ub530\ub77c \ub2e4\ub978 \ud0c0\uc785(<code>MessageUpdate</code>, <code>CallbackQueryUpdate</code> \ub4f1)\uc73c\ub85c \uc81c\uacf5\ub420 \uc218 \uc788\uc2b5\ub2c8\ub2e4.</p> <p>\ub530\ub77c\uc11c \ub4e4\uc5b4\uc624\ub294 \ub370\uc774\ud130\uc758 \ud0c0\uc785\uc744 \ud655\uc778\ud558\uace0 \uc2a4\ub9c8\ud2b8\uce90\uc2a4\ud2b8\ub97c \ud1b5\ud574 \ud2b9\uc815 \ub370\uc774\ud130\ub97c \ucd94\uac00\ub85c \uc870\uc791\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4. \uc608\ub97c \ub4e4\uc5b4:</p> <pre><code>// ...\nif (update !is MessageUpdate) {\n    message { \"Only messages are allowed\" }.send(user, bot)\n    return\n}\n// \uc774\ud6c4 ProcessedUpdate\ub294 MessageUpdate\ub85c \uc778\uc2dd\ub429\ub2c8\ub2e4.\n</code></pre> <p>\ub0b4\ubd80\uc5d0\ub294 \uc0ac\uc6a9\uc790 \ucc38\uc870\uac00 \uc788\ub294\uc9c0 \ud655\uc778\ud560 \uc218 \uc788\ub294 <code>UserReference</code> \uc778\ud130\ud398\uc774\uc2a4\ub3c4 \uc788\uc2b5\ub2c8\ub2e4. \uc0ac\uc6a9 \uc608\uc2dc:</p> <pre><code>val user = if(update is UserReference) update.user else null\n</code></pre> <p>\ud544\uc694\ud558\ub2e4\uba74 \ud56d\uc0c1 \uc6d0\ubcf8 <code>update</code>\uac00 update \ub9e4\uac1c\ubcc0\uc218\uc5d0 \uc788\uc2b5\ub2c8\ub2e4.</p>"},{"location":"ko/Useful-utilities-and-tips/#_1","title":"\uc758\uc874\uc131 \uc8fc\uc785","text":"<p>\ub77c\uc774\ube0c\ub7ec\ub9ac\ub294 \uc5c5\ub370\uc774\ud2b8 \ucc98\ub9ac \uba54\uc11c\ub4dc\uac00 \uc81c\uacf5\ub41c \uc5b4\ub178\ud14c\uc774\uc158\uc73c\ub85c \ud45c\uc2dc\ub41c \ud074\ub798\uc2a4\ub97c \ucd08\uae30\ud654\ud558\uae30 \uc704\ud574 \uac04\ub2e8\ud55c \uba54\ucee4\ub2c8\uc998\uc744 \uc0ac\uc6a9\ud569\ub2c8\ub2e4.</p> <p><code>ClassManagerImpl</code>\ub294 \uae30\ubcf8\uc801\uc73c\ub85c \uc5b4\ub178\ud14c\uc774\uc158\uc774 \ub2ec\ub9b0 \uba54\uc11c\ub4dc\ub97c \ud638\ucd9c\ud558\ub294 \ub370 \uc0ac\uc6a9\ub429\ub2c8\ub2e4.</p> <p>\ud558\uc9c0\ub9cc \ub2e4\ub978 \ub77c\uc774\ube0c\ub7ec\ub9ac\ub97c \uc0ac\uc6a9\ud558\ub824\uba74 <code>ClassManager</code> \uc778\ud130\ud398\uc774\uc2a4\ub97c \uc7ac\uc815\uc758\ud558\uace0\uc120\ud638\ud558\ub294 \uba54\ucee4\ub2c8\uc998\uc744 \uc0ac\uc6a9\ud55c \ud6c4 \ubd07 \ucd08\uae30\ud654 \uc2dc \uc804\ub2ec\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4.</p> <pre><code>fun main() = runBlocking {\n    val bot = TelegramBot(\"BOT_TOKEN\", \"com.example.controllers\") {\n        classManager = ClassManagerImpl()\n    }\n\n    bot.handleUpdates()\n}\n</code></pre>"},{"location":"ko/Useful-utilities-and-tips/#_2","title":"\uc5c5\ub370\uc774\ud2b8 \ud544\ud130\ub9c1","text":"<p>\ubcf5\uc7a1\ud55c \uc870\uac74\uc774 \ud544\uc694\ud558\uc9c0 \uc54a\ub2e4\uba74 \uac04\ub2e8\ud788 \ucc98\ub9ac\ud560 \uc5c5\ub370\uc774\ud2b8\ub97c \ud544\ud130\ub9c1\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4:</p> <pre><code>// \uc5c5\ub370\uc774\ud2b8 \ud544\ud130\ub9c1 \uc870\uac74\uc744 \uc815\uc758\ud558\ub294 \ud568\uc218\nfun filteringFun(update: Update): Boolean = update.message?.text.isNullOrBlank()\n\nfun main() = runBlocking {\n  val bot = TelegramBot(\"BOT_TOKEN\")\n\n  // \uc5c5\ub370\uc774\ud2b8\uc5d0 \ub300\ud55c \ub354 \uad6c\uccb4\uc801\uc778 \ucc98\ub9ac \ud750\ub984 \uc124\uc815\n  bot.update.setListener {\n    if(filteringFun(it)) return@setListener\n\n    // \ub530\ub77c\uc11c \ub9ac\uc2a4\ub108\uac00 \ud578\ub4e4\ub7ec \ud568\uc218\uc5d0 \ub3c4\ub2ec\ud558\uae30 \uc804\uc5d0 \ubc94\uc704\ub97c \ubc97\uc5b4\ub098\uba74 \ud544\ud130\ub9c1\uc774 \ub429\ub2c8\ub2e4.\n    // \uc2e4\uc81c\ub85c \uc9c1\uc811 if-\uc870\uac74\ubb38\uc744 \uc791\uc131\ud558\uc5ec return@setListener\uc744 \uc0ac\uc6a9\ud558\uac70\ub098 \ud544\ud130\ub9c1\uc744 \ubcc4\ub3c4 \ud074\ub798\uc2a4\ub85c \ud655\uc7a5\ud560 \uc218\ub3c4 \uc788\uc2b5\ub2c8\ub2e4.\n\n    handle(it) // \ub610\ub294 \ube14\ub85d\uc744 \uc0ac\uc6a9\ud55c \uc218\ub3d9 \ucc98\ub9ac \ubc29\ubc95\n  }\n}\n</code></pre> <p>\uba85\ub839\uc5b4 \ub9e4\uce6d \ub610\ub294 \uc81c\uc678 \ud504\ub85c\uc138\uc2a4\uc5d0 \ud544\ud130\ub9c1\uc744 \ud3ec\ud568\ud558\ub824\uba74 guards \ub610\ub294 <code>@CommonHandler</code>\ub97c \ud655\uc778\ud558\uc138\uc694.</p>"},{"location":"ko/Useful-utilities-and-tips/#_3","title":"\ub2e4\uc591\ud55c \uba54\uc11c\ub4dc\uc5d0 \ub300\ud55c \uc635\uc158 \uc77c\ubc18\ud654","text":"<p>\ub3d9\uc77c\ud55c \uc120\ud0dd\uc801 \ub9e4\uac1c\ubcc0\uc218\ub97c \uc790\uc8fc \uc801\uc6a9\ud574\uc57c \ud55c\ub2e4\uba74 \uc0ac\uc6a9\uc790\uc5d0\uac8c \ub9de\ub294 \uc720\uc0ac\ud55c \ud568\uc218\ub97c \uc791\uc131\ud558\uc5ec \ubcf4\uc77c\ub7ec\ud50c\ub808\uc774\ud2b8 \ucf54\ub4dc\ub97c \uc904\uc77c \uc218 \uc788\uc2b5\ub2c8\ub2e4 :)</p> <p>\uc77c\ubc18\uc801\uc778 \uc18d\uc131 \uc911 \uc77c\ubd80\ub294 \ub2e4\ub978 \uc778\ud130\ud398\uc774\uc2a4\ub85c \ubd84\ub9ac\ub418\uc5b4 \uc788\uc2b5\ub2c8\ub2e4.</p> <pre><code>@Suppress(\"NOTHING_TO_INLINE\")\ninline fun &lt;T, R, O&gt; T.markdownMode(crossinline block: O.() -&gt; Unit = {}): T\n        where               T : TgAction&lt;R&gt;,\n                            T : OptionsFeature&lt;T, O&gt;,\n                            O : Options,\n                            O : OptionsParseMode =\n    options {\n        parseMode = ParseMode.Markdown\n        block()\n    }\n\n\n// ... \uadf8\ub9ac\uace0 \ucf54\ub4dc\uc5d0\uc11c\n\nmessage { \"test\" }.markdownMode().send(to, via)\n</code></pre>"},{"location":"ko/Web-starters-%28Spring-and-Ktor%29/#spring-starter","title":"Spring starter","text":"<p>\ub77c\uc774\ube0c\ub7ec\ub9ac\ub97c \uc704\ud55c Spring Starter \ubaa8\ub4c8\uc740 Spring Boot \uc560\ud50c\ub9ac\ucf00\uc774\uc158\uc5d0 Telegram \ubd07 \uae30\ub2a5\uc744 \ud1b5\ud569\ud558\ub294 \uc790\ub3d9 \uc124\uc815 \ubaa8\ub4c8\uc785\ub2c8\ub2e4. \uc81c\uacf5\ub41c \uc124\uc815\uc5d0 \ub530\ub77c Telegram \ubd07\uc744 \uc790\ub3d9\uc73c\ub85c \uad6c\uc131\ud558\uae30 \uc704\ud574 Spring Boot\uc758 \uc758\uc874\uc131 \uc8fc\uc785\uacfc \uc124\uc815 \uc18d\uc131\uc758 \ud798\uc744 \ud65c\uc6a9\ud569\ub2c8\ub2e4. \uc774 \ub77c\uc774\ube0c\ub7ec\ub9ac\ub294 Kotlin\uacfc Spring Boot\ub97c \uc0ac\uc6a9\ud558\uc5ec Telegram \ubd07\uc744 \uad6c\ucd95\ud558\ub824\ub294 \uac1c\ubc1c\uc790\uc5d0\uac8c \ud2b9\ud788 \uc720\uc6a9\ud558\uba70, \ubd07 \uac1c\ubc1c \ubc0f \uad00\ub9ac\uc5d0 \ub300\ud55c \uac04\uc18c\ud654\ub41c \uc811\uadfc \ubc29\uc2dd\uc744 \uc81c\uacf5\ud569\ub2c8\ub2e4.</p>"},{"location":"ko/Web-starters-%28Spring-and-Ktor%29/#_1","title":"\uc8fc\uc694 \uae30\ub2a5","text":"<ul> <li>\uc790\ub3d9 \uc124\uc815: \ub77c\uc774\ube0c\ub7ec\ub9ac\ub294 \uc81c\uacf5\ub41c \uc124\uc815 \uc18d\uc131\uc5d0 \ub530\ub77c Telegram \ubd07\uc744 \uc790\ub3d9\uc73c\ub85c \uad6c\uc131\ud558\uc5ec \uc218\ub3d9 \uc124\uc815\uc758 \ud544\uc694\uc131\uc744 \uc5c6\uc571\ub2c8\ub2e4.</li> <li>\uc124\uc815 \uc18d\uc131: \ubd07 \ud1a0\ud070, \ud328\ud0a4\uc9c0 \uc774\ub984, \uc2dd\ubcc4\uc790 \ub4f1 \ubd07 \uc124\uc815\uc758 \uc26c\uc6b4 \uc0ac\uc6a9\uc790 \uc815\uc758\ub97c \uc704\ud55c \uc124\uc815 \uc18d\uc131\uc744 \uc9c0\uc6d0\ud569\ub2c8\ub2e4.</li> <li>Spring \ud1b5\ud569: Spring \uc0dd\ud0dc\uacc4\uc640 \uc6d0\ud65c\ud558\uac8c \ud1b5\ud569\ub418\uc5b4 Spring\uc758 \uc758\uc874\uc131 \uc8fc\uc785\uacfc \uc560\ud50c\ub9ac\ucf00\uc774\uc158 \ucee8\ud14d\uc2a4\ud2b8\ub97c \ud65c\uc6a9\ud558\uc5ec \ubd07 \uc778\uc2a4\ud134\uc2a4\ub97c \uad00\ub9ac\ud569\ub2c8\ub2e4.</li> <li>\ucf54\ub8e8\ud2f4 \uc9c0\uc6d0: Kotlin \ucf54\ub8e8\ud2f4\uc744 \ube44\ub3d9\uae30 \ubd07 \uc791\uc5c5\uc5d0 \ud65c\uc6a9\ud558\uc5ec \ud6a8\uc728\uc801\uc774\uace0 \ub17c\ube14\ub85c\ud0b9 \uc2e4\ud589\uc744 \ubcf4\uc7a5\ud569\ub2c8\ub2e4.</li> </ul>"},{"location":"ko/Web-starters-%28Spring-and-Ktor%29/#_2","title":"\uc2dc\uc791\ud558\uae30","text":"<p>Spring Starter \ub77c\uc774\ube0c\ub7ec\ub9ac\ub97c \uc0ac\uc6a9\ud558\ub824\uba74 Spring Boot \ud504\ub85c\uc81d\ud2b8\uc5d0 \uc885\uc18d\uc131\uc73c\ub85c \ud3ec\ud568\ud574\uc57c \ud569\ub2c8\ub2e4. \uc774 \ub77c\uc774\ube0c\ub7ec\ub9ac\ub294 Spring Boot \uc560\ud50c\ub9ac\ucf00\uc774\uc158\uacfc \ud568\uaed8 \uc791\ub3d9\ud558\ub3c4\ub85d \uc124\uacc4\ub418\uc5c8\uc73c\uba70 \uae30\ub2a5\uc744 \uc704\ud574 Spring Boot \ud504\ub808\uc784\uc6cc\ud06c\uac00 \ud544\uc694\ud569\ub2c8\ub2e4.</p>"},{"location":"ko/Web-starters-%28Spring-and-Ktor%29/#_3","title":"\uc885\uc18d\uc131","text":"<p><code>build.gradle</code> \ub610\ub294 <code>pom.xml</code> \ud30c\uc77c\uc5d0 \ub2e4\uc74c \uc885\uc18d\uc131\uc744 \ucd94\uac00\ud558\uc138\uc694:</p> <pre><code>dependencies {\n    implementation 'eu.vendeli:spring-starter:&lt;version&gt;'\n}\n</code></pre> <p><code>&lt;version&gt;</code>\uc744 \ub77c\uc774\ube0c\ub7ec\ub9ac\uc758 \ucd5c\uc2e0 \ubc84\uc804\uc73c\ub85c \ubc14\uafc9\ub2c8\ub2e4.</p>"},{"location":"ko/Web-starters-%28Spring-and-Ktor%29/#_4","title":"\uc124\uc815","text":"<p>\ub77c\uc774\ube0c\ub7ec\ub9ac\ub294 Spring Boot\uc758 <code>@ConfigurationProperties</code>\ub97c \uc0ac\uc6a9\ud558\uc5ec \uc124\uc815 \uc18d\uc131\uc744 \ubc14\uc778\ub529\ud569\ub2c8\ub2e4. Spring Boot \uc560\ud50c\ub9ac\ucf00\uc774\uc158\uc758 <code>application.properties</code> \ub610\ub294 <code>application.yml</code> \ud30c\uc77c\uc5d0 \ubd07 \uc124\uc815\uc744 \uc815\uc758\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4.</p> <pre><code>ktgram:\n autoStartPolling: true\n shareHttpClient: true\n bot:\n    - token: YOUR_BOT_TOKEN\n      pckg: com.example.bot\n      identifier: MyBot\n</code></pre>"},{"location":"ko/Web-starters-%28Spring-and-Ktor%29/#_5","title":"\uc0ac\uc6a9\ubc95","text":"<p>\ub77c\uc774\ube0c\ub7ec\ub9ac\uac00 \ud3ec\ud568\ub418\uace0 \uc124\uc815\ub418\uba74 \uc81c\uacf5\ub41c \uc124\uc815\uc5d0 \ub530\ub77c Telegram \ubd07 \uc778\uc2a4\ud134\uc2a4\ub97c \uc790\ub3d9\uc73c\ub85c \uc0dd\uc131\ud558\uace0 \uad6c\uc131\ud569\ub2c8\ub2e4.</p> <p>\ub610\ud55c \uc5ec\ub7ec \ubd07 \uc778\uc2a4\ud134\uc2a4\ub97c \uc9c0\uc6d0\ud569\ub2c8\ub2e4. \uc5ec\ub7ec \uac1c\ub97c \ucd08\uae30\ud654\ud558\ub824\uba74 \ubd07 \uc139\uc158\uc5d0\uc11c \uc0c8 \ud56d\ubaa9\uc73c\ub85c \uc120\uc5b8\ud558\uae30\ub9cc \ud558\uba74 \ub429\ub2c8\ub2e4:</p> <pre><code>ktgram:\n bot:\n    - token: YOUR_BOT_TOKEN\n    - token: SECOND_BOT_TOKEN\n</code></pre>"},{"location":"ko/Web-starters-%28Spring-and-Ktor%29/#_6","title":"\uace0\uae09 \uc124\uc815","text":"<p>\ubd07 \ub3d9\uc791 \uc0ac\uc6a9\uc790 \uc815\uc758\ub098 \ub2e4\ub978 Spring \ucef4\ud3ec\ub10c\ud2b8\uc640\uc758 \ud1b5\ud569\uacfc \uac19\uc740 \ub354 \uace0\uae09 \uc124\uc815\uc758 \uacbd\uc6b0 <code>BotConfiguration</code> \ud074\ub798\uc2a4\ub97c \ud655\uc7a5\ud558\uace0 <code>applyCfg</code> \uba54\uc11c\ub4dc\ub97c \ud1b5\ud574 \ubd07 \uc124\uc815\uc744 \ubcc0\uacbd\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4. \uc608\uc81c\ub294 \uc5ec\uae30\uc5d0\uc11c \ud655\uc778\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4.</p> <p>Tip</p> <p>\ucd08\uae30\ud654\ub41c \uac01 \uc778\uc2a4\ud134\uc2a4\ub97c \uc0ac\uc6a9\uc790 \uc815\uc758 \uc124\uc815\uc73c\ub85c \uad6c\uc131\ud558\ub824\uba74 \uc2dd\ubcc4\uc790\ub85c \uad6c\ubd84\ud558\uc138\uc694(BotConfiguration \ud074\ub798\uc2a4\uc5d0\ub3c4 \uc2dd\ubcc4\uc790\uac00 \uc788\uc2b5\ub2c8\ub2e4).</p>"},{"location":"ko/Web-starters-%28Spring-and-Ktor%29/#ktor","title":"Ktor","text":"<p>\uc774 \ubaa8\ub4c8\uc740 Telegram \ubd07\uc744 \uc704\ud55c \uc6f9\ud6c5 \uc11c\ubc84 \uc0dd\uc131\uc744 \uc6a9\uc774\ud558\uac8c \ud558\ub3c4\ub85d \uc124\uacc4\ub418\uc5c8\uc2b5\ub2c8\ub2e4. \uac1c\ubc1c\uc790\uac00 \uc11c\ubc84\ub97c \uad6c\uc131\ud560 \uc218 \uc788\uac8c \ud574\uc8fc\uba70, SSL/TLS \uc124\uc815\uc744 \ud3ec\ud568\ud558\uace0 \uc0ac\uc6a9\uc790 \uc815\uc758 \uc124\uc815\uc73c\ub85c \uc5ec\ub7ec Telegram \ubd07\uc744 \uc120\uc5b8\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4. \uc124\uc815 \ud504\ub85c\uc138\uc2a4\ub294 \uc720\uc5f0\ud558\uc5ec \uac1c\ubc1c\uc790\uac00 \ud2b9\uc815 \uc694\uad6c \uc0ac\ud56d\uc5d0 \ub9de\uac8c \uc11c\ubc84\ub97c \uc870\uc815\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4.</p>"},{"location":"ko/Web-starters-%28Spring-and-Ktor%29/#_7","title":"\uc124\uce58","text":"<p>Ktor starter\ub97c \uc124\uce58\ud558\ub824\uba74 \uc8fc \uc885\uc18d\uc131\uc5d0 \ucd94\uac00\ud558\uc138\uc694:</p> <pre><code>dependencies {\n    implementation(\"eu.vendeli:ktor-starter:x.y.z\") // \uc5ec\uae30\n    // x.y.z\ub97c \ud604\uc7ac \ub77c\uc774\ube0c\ub7ec\ub9ac \ubc84\uc804\uc73c\ub85c \ubcc0\uacbd\n}\n</code></pre>"},{"location":"ko/Web-starters-%28Spring-and-Ktor%29/#_8","title":"\uc8fc\uc694 \ucef4\ud3ec\ub10c\ud2b8","text":"<p><code>serveWebhook</code> \ud568\uc218</p> <p>serveWebhook \ud568\uc218\ub294 \ub77c\uc774\ube0c\ub7ec\ub9ac\uc758 \ud575\uc2ec\uc785\ub2c8\ub2e4. Telegram \ubd07\uc744 \uc704\ud55c \uc6f9\ud6c5 \uc11c\ubc84\ub97c \uc124\uc815\ud558\uace0 \uc2dc\uc791\ud569\ub2c8\ub2e4. \ub450 \uac1c\uc758 \ub9e4\uac1c\ubcc0\uc218\ub97c \ubc1b\uc2b5\ub2c8\ub2e4:</p> <ul> <li><code>wait</code>: \uc11c\ubc84\uac00 \uc885\ub8cc\ub418\uae30 \uc804\uc5d0 \uc560\ud50c\ub9ac\ucf00\uc774\uc158\uc774 \uc911\uc9c0\ub420 \ub54c\uae4c\uc9c0 \ub300\uae30\ud574\uc57c \ud558\ub294\uc9c0 \uc5ec\ubd80\ub97c \ub098\ud0c0\ub0b4\ub294 \ubd80\uc6b8\uac12\uc785\ub2c8\ub2e4. \uae30\ubcf8\uac12\uc740 true\uc785\ub2c8\ub2e4.</li> <li><code>serverBuilder</code>: \uc11c\ubc84\ub97c \uad6c\uc131\ud558\ub294 \ub78c\ub2e4 \ud568\uc218\uc785\ub2c8\ub2e4. \uae30\ubcf8\uac12\uc740 \ube48 \ub78c\ub2e4\uc785\ub2c8\ub2e4.</li> </ul>"},{"location":"ko/Web-starters-%28Spring-and-Ktor%29/#_9","title":"\uc124\uc815","text":"<ul> <li><code>WEBHOOK_PREFIX</code>: \uc6f9\ud6c5 \ub9ac\uc2a4\ub108 \ub77c\uc6b0\ud2b8\uc5d0 \uc0ac\uc6a9\ub420 \uc8fc\uc18c \uc811\ub450\uc0ac\uc785\ub2c8\ub2e4(\uae30\ubcf8\uac12\uc740 \"/\"\uc785\ub2c8\ub2e4).</li> </ul>"},{"location":"ko/Web-starters-%28Spring-and-Ktor%29/#_10","title":"\uc11c\ubc84 \uc124\uc815","text":"<ul> <li><code>server</code>: EnvConfiguration \ub610\ub294 ManualConfiguration\uc744 \uc0ac\uc6a9\ud558\uc5ec \uc11c\ubc84 \uc124\uc815\uc744 \uc124\uc815\ud558\ub294 \uba54\uc11c\ub4dc\uc785\ub2c8\ub2e4.</li> <li><code>engine</code>: Netty \uc560\ud50c\ub9ac\ucf00\uc774\uc158 \uc5d4\uc9c4\uc744 \uad6c\uc131\ud558\ub294 \uba54\uc11c\ub4dc\uc785\ub2c8\ub2e4.</li> <li><code>ktorModule</code>: \uc560\ud50c\ub9ac\ucf00\uc774\uc158\uc5d0 Ktor \ubaa8\ub4c8\uc744 \ucd94\uac00\ud558\ub294 \uba54\uc11c\ub4dc\uc785\ub2c8\ub2e4.</li> </ul> <p>\ub77c\uc774\ube0c\ub7ec\ub9ac\ub294 \ud638\uc2a4\ud2b8, \ud3ec\ud2b8, SSL \uc124\uc815 \ub4f1 \uc11c\ubc84\uc5d0 \ub300\ud55c \ub2e4\uc591\ud55c \uad6c\uc131 \uac00\ub2a5\ud55c \ub9e4\uac1c\ubcc0\uc218\ub97c \uc81c\uacf5\ud569\ub2c8\ub2e4. \uc774\ub97c \uad6c\uc131\ud558\ub294 \ub450 \uac00\uc9c0 \uad6c\uccb4\uc801\uc778 \uc635\uc158\uc774 \uc788\uc2b5\ub2c8\ub2e4:</p> <ul> <li><code>EnvConfiguration</code>: <code>KTGRAM_</code> \uc811\ub450\uc0ac\uac00 \uc788\ub294 \ud658\uacbd\uc5d0\uc11c \uad6c\uc131 \uac12\uc744 \uc77d\uc2b5\ub2c8\ub2e4.</li> <li><code>ManualConfiguration</code>: \uad6c\uc131 \uac12\uc758 \uc218\ub3d9 \uc124\uc815\uc744 \ud5c8\uc6a9\ud558\uba70, <code>server {}</code> \ud568\uc218\uc5d0\uc11c \ub9e4\uac1c\ubcc0\uc218\ub97c \uc124\uc815\ud569\ub2c8\ub2e4.</li> </ul> <p>\uc124\uc815\ud560 \uc218 \uc788\ub294 \ub9e4\uac1c\ubcc0\uc218 \ubaa9\ub85d\uc740 \ub2e4\uc74c\uacfc \uac19\uc2b5\ub2c8\ub2e4:</p> <ul> <li><code>HOST</code>: \uc11c\ubc84\uc758 \ud638\uc2a4\ud2b8 \uc774\ub984 \ub610\ub294 IP \uc8fc\uc18c\uc785\ub2c8\ub2e4.</li> <li><code>PORT</code>: \uc11c\ubc84\uc758 \ud3ec\ud2b8 \ubc88\ud638\uc785\ub2c8\ub2e4.</li> <li><code>SSL_PORT</code>: SSL/TLS \uc5f0\uacb0\uc758 \ud3ec\ud2b8 \ubc88\ud638\uc785\ub2c8\ub2e4.</li> <li><code>PEM_PRIVATE_KEY_PATH</code>: PEM \uac1c\uc778 \ud0a4 \ud30c\uc77c\uc758 \uacbd\ub85c\uc785\ub2c8\ub2e4.</li> <li><code>PEM_CHAIN_PATH</code>: PEM \uc778\uc99d\uc11c \uccb4\uc778 \ud30c\uc77c\uc758 \uacbd\ub85c\uc785\ub2c8\ub2e4.</li> <li><code>PEM_PRIVATE_KEY</code>: \ubb38\uc790 \ubc30\uc5f4\ub85c \ub41c PEM \uac1c\uc778 \ud0a4 \ube44\ubc00\ubc88\ud638\uc785\ub2c8\ub2e4.</li> <li><code>KEYSTORE_PATH</code>: Java KeyStore \ud30c\uc77c\uc758 \uacbd\ub85c\uc785\ub2c8\ub2e4.</li> <li><code>KEYSTORE_PASSWORD</code>: KeyStore\uc758 \ube44\ubc00\ubc88\ud638\uc785\ub2c8\ub2e4.</li> <li><code>KEY_ALIAS</code>: KeyStore\uc758 \ud0a4\uc5d0 \ub300\ud55c \ubcc4\uce6d\uc785\ub2c8\ub2e4.</li> <li><code>SSL_ON</code>: SSL/TLS\ub97c \ud65c\uc131\ud654\ud574\uc57c \ud558\ub294\uc9c0 \uc5ec\ubd80\ub97c \ub098\ud0c0\ub0b4\ub294 \ubd80\uc6b8\uac12\uc785\ub2c8\ub2e4. \uae30\ubcf8\uac12\uc740 true\uc785\ub2c8\ub2e4.</li> </ul> <p>Tip</p> <p>PEM \uc778\uc99d\uc11c\uac00 \uc788\uc73c\uba74 \ubaa8\ub4c8 \uc790\uccb4\uac00 \uc9c0\uc815\ub41c \uacbd\ub85c\uc5d0\uc11c \uc774\ub97c \uc0ac\uc6a9\ud558\uc5ec jks \uc2a4\ud1a0\ub9ac\uc9c0\ub97c \uc0dd\uc131\ud569\ub2c8\ub2e4.</p>"},{"location":"ko/Web-starters-%28Spring-and-Ktor%29/#_11","title":"\ubd07 \uc124\uc815:","text":"<p>\ubd07\uc744 \uad6c\uc131\ud558\ub824\uba74 \ub2e4\uc74c\uacfc \uac19\uc740 \ub9e4\uac1c\ubcc0\uc218\ub97c \uac00\uc9c4 <code>declareBot {}</code>\ub97c \ud638\ucd9c\ud558\uc138\uc694:</p> <ul> <li><code>token</code>: \ubd07 \ud1a0\ud070\uc785\ub2c8\ub2e4.</li> <li><code>pckg</code>: \ubd07\uc758 \ud328\ud0a4\uc9c0 \uc774\ub984\uc785\ub2c8\ub2e4.</li> <li><code>configuration</code>: \ubd07\uc744 \uad6c\uc131\ud558\ub294 \ub78c\ub2e4 \ud568\uc218\uc785\ub2c8\ub2e4.</li> <li><code>handlingBehaviour</code>: \ubd07\uc758 \ucc98\ub9ac \ub3d9\uc791\uc744 \uc124\uc815\ud558\ub294 \ub78c\ub2e4 \ud568\uc218\uc785\ub2c8\ub2e4.</li> <li><code>onInit</code>: \ubd07\uc774 \ucd08\uae30\ud654\ub420 \ub54c \uc2e4\ud589\ub420 \ub78c\ub2e4 \ud568\uc218\uc785\ub2c8\ub2e4.</li> </ul>"},{"location":"ko/Web-starters-%28Spring-and-Ktor%29/#_12","title":"\uc608\uc81c \uc0ac\uc6a9\ubc95","text":"<p>\uc774 \ubaa8\ub4c8\uc744 \uc0ac\uc6a9\ud558\ub824\uba74 <code>serveWebhook</code> \ud568\uc218\ub97c \ud638\ucd9c\ud558\uace0 \uc6d0\ud558\ub294 \uc124\uc815\uc73c\ub85c \uad6c\uc131\ud55c \ud6c4 \ubd07\uc744 \uc120\uc5b8\ud558\uc138\uc694. \uac04\ub2e8\ud55c \uc608\uc81c\ub294 \ub2e4\uc74c\uacfc \uac19\uc2b5\ub2c8\ub2e4:</p> <pre><code>fun main() = runBlocking {\n    serveWebhook {\n        server {\n            HOST = \"0.0.0.0\"\n            PORT = 8080\n            SSL_PORT = 8443\n\n            PEM_PRIVATE_KEY_PATH = \"/etc/letsencrypt/live/example.com/privkey.pem\"\n            PEM_CHAIN_PATH = \"/etc/letsencrypt/live/example.com/fullchain.pem\"\n            PEM_PRIVATE_KEY = \"pem_changeit\".toCharArray()\n\n            KEYSTORE_PATH = \"/etc/ssl/certs/java/cacerts/bot_keystore.jks\"\n            KEYSTORE_PASSWORD = \"changeit\".toCharArray()\n            // \ud544\uc694\ud55c \ub2e4\ub978 \uad6c\uc131 \ub9e4\uac1c\ubcc0\uc218 \uc124\uc815\n        }\n        declareBot {\n            token = \"YOUR_BOT_TOKEN\"\n            // \ub2e4\ub978 \ubd07 \uc124\uc815 \uad6c\uc131\n        }\n        // \ud544\uc694\ud55c \uacbd\uc6b0 \ub354 \ub9ce\uc740 \ubd07\uc744 \ucd94\uac00\ud558\uac70\ub098 \ub2e4\ub978 \ub9e4\uac1c\ubcc0\uc218\ub97c \uc124\uc815\n    }\n}\n</code></pre> <p>Caution</p> <p>\ubaa8\ub4e0 \uac83\uc774 \uc791\ub3d9\ud558\ub3c4\ub85d \uc6f9\ud6c5\uc744 \uc124\uc815\ud558\ub294 \uac83\uc744 \uc78a\uc9c0 \ub9c8\uc138\uc694. :)</p> <p>\uae30\ubcf8\uc801\uc73c\ub85c \ubaa8\ub4c8\uc740 \uc6f9\ud6c5 \ub9ac\uc2a4\ub2dd \uc5d4\ub4dc\ud3ec\uc778\ud2b8\ub97c <code>host/BOT_TOKEN</code>\uc73c\ub85c \uc81c\uacf5\ud569\ub2c8\ub2e4.</p> <p>STRUCTURAL INTEGRITY MODE:</p> <p>You must produce output that is byte-structurally compatible with the input Markdown.</p> <p>Rules: - The number of code blocks must match exactly. - The number of headings must match exactly. - All fenced code blocks must remain unchanged. - All URLs must remain identical. - All inline code spans must remain identical. - Do not merge or split paragraphs. - Do not normalize spacing.</p>"},{"location":"fa/","title":"\u062e\u0627\u0646\u0647","text":""},{"location":"fa/#_1","title":"\u0645\u0642\u062f\u0645\u0647","text":"<p>\u0628\u06cc\u0627\u06cc\u06cc\u062f \u0627\u06cc\u062f\u0647\u200c\u0627\u06cc \u0627\u0632 \u0627\u06cc\u0646\u06a9\u0647 \u0686\u06af\u0648\u0646\u0647 \u06a9\u062a\u0627\u0628\u062e\u0627\u0646\u0647 \u0628\u0647\u200c\u0637\u0648\u0631 \u06a9\u0644\u06cc \u0628\u0647 \u0631\u0648\u0632\u0631\u0633\u0627\u0646\u06cc\u200c\u0647\u0627 \u0631\u0627 \u0645\u062f\u06cc\u0631\u06cc\u062a \u0645\u06cc\u200c\u06a9\u0646\u062f\u060c \u0628\u062f\u0633\u062a \u0622\u0648\u0631\u06cc\u0645:</p> <p> </p> <p>\u067e\u0633 \u0627\u0632 \u062f\u0631\u06cc\u0627\u0641\u062a \u06cc\u06a9 \u0628\u0647\u200c\u0631\u0648\u0632\u0631\u0633\u0627\u0646\u06cc\u060c \u06a9\u062a\u0627\u0628\u062e\u0627\u0646\u0647 \u0633\u0647 \u0645\u0631\u062d\u0644\u0647 \u0627\u0635\u0644\u06cc \u0631\u0627 \u0627\u062c\u0631\u0627 \u0645\u06cc\u200c\u06a9\u0646\u062f\u060c \u0647\u0645\u0627\u0646\u0637\u0648\u0631 \u06a9\u0647 \u0645\u06cc\u200c\u062a\u0648\u0627\u0646\u06cc\u0645 \u0628\u0628\u06cc\u0646\u06cc\u0645.</p>"},{"location":"fa/#_2","title":"\u067e\u0631\u062f\u0627\u0632\u0634","text":"<p>\u067e\u0631\u062f\u0627\u0632\u0634 \u0628\u0627\u0632\u067e\u06cc\u0686\u06cc \u0628\u0647\u200c\u0631\u0648\u0632\u0631\u0633\u0627\u0646\u06cc \u062f\u0631\u06cc\u0627\u0641\u062a\u06cc \u0628\u0647 \u0632\u06cc\u0631\u06a9\u0644\u0627\u0633 \u0645\u0646\u0627\u0633\u0628 <code>ProcessedUpdate</code> \u0628\u0633\u062a\u0647 \u0628\u0647 \u0628\u0627\u0631 \u062d\u0645\u0644 \u0634\u062f\u0647 \u0627\u0633\u062a.</p> <p>\u0627\u06cc\u0646 \u0645\u0631\u062d\u0644\u0647 \u0628\u0631\u0627\u06cc \u062a\u0633\u0647\u06cc\u0644 \u0639\u0645\u0644\u06cc\u0627\u062a \u0628\u0647\u200c\u0631\u0648\u0632\u0631\u0633\u0627\u0646\u06cc \u0648 \u062a\u0648\u0633\u0639\u0647 \u062a\u0648\u0627\u0646\u0627\u06cc\u06cc\u200c\u0647\u0627\u06cc \u067e\u0631\u062f\u0627\u0632\u0634\u06cc \u0644\u0627\u0632\u0645 \u0627\u0633\u062a.</p>"},{"location":"fa/#_3","title":"\u0645\u062f\u06cc\u0631\u06cc\u062a","text":"<p>\u0645\u0631\u062d\u0644\u0647 \u0627\u0635\u0644\u06cc \u0628\u0639\u062f\u06cc\u060c \u062f\u0631 \u0627\u06cc\u0646\u062c\u0627 \u0628\u0647 \u062e\u0648\u062f \u0645\u062f\u06cc\u0631\u06cc\u062a \u0645\u06cc\u200c\u0631\u0633\u06cc\u0645.</p>"},{"location":"fa/#_4","title":"\u0645\u062d\u062f\u0648\u062f\u06a9\u0646\u0646\u062f\u0647 \u0633\u0631\u0639\u062a \u062c\u0647\u0627\u0646\u06cc","text":"<p>\u0627\u06af\u0631 \u06a9\u0627\u0631\u0628\u0631\u06cc \u062f\u0631 \u0628\u0647\u200c\u0631\u0648\u0632\u0631\u0633\u0627\u0646\u06cc \u0648\u062c\u0648\u062f \u062f\u0627\u0634\u062a\u0647 \u0628\u0627\u0634\u062f\u060c \u0627\u0632 \u0627\u0631\u062a\u06a9\u0627\u0628 \u0628\u0647 \u0645\u062d\u062f\u0648\u062f\u06a9\u0646\u0646\u062f\u0647 \u0633\u0631\u0639\u062a \u062c\u0647\u0627\u0646\u06cc \u0628\u0631\u0631\u0633\u06cc \u0645\u06cc\u200c\u06a9\u0646\u06cc\u0645.</p>"},{"location":"fa/#_5","title":"\u062a\u062c\u0632\u06cc\u0647 \u0645\u062a\u0646","text":"<p>\u0628\u0633\u062a\u0647 \u0628\u0647 \u0628\u0627\u0631\u060c \u0645\u0627 \u06cc\u06a9 \u06a9\u0627\u0645\u067e\u0648\u0646\u0646\u062a \u0628\u0647\u200c\u0631\u0648\u0632\u0631\u0633\u0627\u0646\u06cc \u062e\u0627\u0635 \u062d\u0627\u0648\u06cc \u0645\u062a\u0646 \u0631\u0627 \u0627\u0646\u062a\u062e\u0627\u0628 \u06a9\u0631\u062f\u0647 \u0648 \u0628\u0631\u0627\u0633\u0627\u0633 \u067e\u06cc\u06a9\u0631\u0628\u0646\u062f\u06cc \u0622\u0646 \u0631\u0627 \u062a\u062c\u0632\u06cc\u0647 \u0645\u06cc\u200c\u06a9\u0646\u06cc\u0645.</p> <p>\u062c\u0632\u0626\u06cc\u0627\u062a \u0628\u06cc\u0634\u062a\u0631 \u0631\u0627 \u0645\u06cc\u200c\u062a\u0648\u0627\u0646\u06cc\u062f \u062f\u0631 \u0645\u0642\u0627\u0644\u0647 \u062a\u062c\u0632\u06cc\u0647 \u0628\u0647\u200c\u0631\u0648\u0632\u0631\u0633\u0627\u0646\u06cc \u0628\u0628\u06cc\u0646\u06cc\u062f.</p>"},{"location":"fa/#_6","title":"\u06cc\u0627\u0641\u062a\u0646 \u0641\u0639\u0627\u0644\u06cc\u062a","text":"<p>\u0628\u0633\u062a\u0647 \u0628\u0647 \u0627\u0648\u0644\u0648\u06cc\u062a \u067e\u0631\u062f\u0627\u0632\u0634:</p> <p> </p> <p>\u0645\u0627 \u062f\u0631 \u062d\u0627\u0644 \u062c\u0633\u062a\u062c\u0648\u06cc \u062a\u0637\u0628\u06cc\u0642 \u0628\u06cc\u0646 \u062f\u0627\u062f\u0647\u200c\u0647\u0627\u06cc \u062a\u062c\u0632\u06cc\u0647 \u0634\u062f\u0647 \u0648 \u0641\u0639\u0627\u0644\u06cc\u062a\u200c\u0647\u0627\u06cc\u06cc \u0647\u0633\u062a\u06cc\u0645 \u06a9\u0647 \u0631\u0648\u06cc \u0622\u0646\u200c\u0647\u0627 \u0639\u0645\u0644 \u0645\u06cc\u200c\u06a9\u0646\u06cc\u0645. \u0647\u0645\u0627\u0646\u0637\u0648\u0631 \u06a9\u0647 \u062f\u0631 \u0646\u0645\u0648\u062f\u0627\u0631 \u0627\u0648\u0644\u0648\u06cc\u062a \u0645\u06cc\u200c\u0628\u06cc\u0646\u06cc\u0645\u060c <code>\u062f\u0633\u062a\u0648\u0631\u0627\u062a</code> \u0647\u0645\u06cc\u0634\u0647 \u0627\u0648\u0644 \u0647\u0633\u062a\u0646\u062f.</p> <p>\u06cc\u0639\u0646\u06cc \u0627\u06af\u0631 \u0628\u0627\u0631 \u0645\u062a\u0646\u06cc \u062f\u0631 \u0628\u0647\u200c\u0631\u0648\u0632\u0631\u0633\u0627\u0646\u06cc \u0628\u0627 \u0647\u0631 \u062f\u0633\u062a\u0648\u0631\u06cc \u0645\u0637\u0627\u0628\u0642\u062a \u062f\u0627\u0634\u062a\u0647 \u0628\u0627\u0634\u062f\u060c \u062c\u0633\u062a\u062c\u0648\u06cc \u0628\u06cc\u0634\u062a\u0631 \u0628\u0631\u0627\u06cc <code>\u0648\u0631\u0648\u062f\u06cc\u200c\u0647\u0627</code>\u060c <code>\u0639\u0645\u0648\u0645\u06cc</code> \u0648 \u0627\u0644\u0628\u062a\u0647 \u0627\u062c\u0631\u0627\u06cc \u0639\u0645\u0644 <code>\u067e\u0631\u062f\u0627\u0632\u0634\u200c\u0646\u0634\u062f\u0647</code> \u0627\u0646\u062c\u0627\u0645 \u0646\u062e\u0648\u0627\u0647\u062f \u0634\u062f.</p> <p>\u062a\u0646\u0647\u0627 \u0686\u06cc\u0632\u06cc \u0627\u06cc\u0646 \u0627\u0633\u062a \u06a9\u0647 \u0627\u06af\u0631 <code>UpdateHandlers</code> \u0648\u062c\u0648\u062f \u062f\u0627\u0634\u062a\u0647 \u0628\u0627\u0634\u062f\u060c \u0628\u062f\u0648\u0646 \u062f\u0631\u0646\u0638\u0631 \u06af\u0631\u0641\u062a\u0646 \u0647\u0645\u0632\u0645\u0627\u0646 \u0627\u062c\u0631\u0627 \u062e\u0648\u0627\u0647\u062f \u0634\u062f.</p>"},{"location":"fa/#_7","title":"\u062f\u0633\u062a\u0648\u0631\u0627\u062a","text":"<p>\u0628\u06cc\u0627\u06cc\u06cc\u062f \u0628\u0647 \u062f\u0633\u062a\u0648\u0631\u0627\u062a \u0648 \u067e\u0631\u062f\u0627\u0632\u0634 \u0622\u0646\u200c\u0647\u0627 \u0646\u0632\u062f\u06cc\u06a9\u200c\u062a\u0631 \u0646\u06af\u0627\u0647 \u06a9\u0646\u06cc\u0645.</p> <p>\u0647\u0645\u0627\u0646\u0637\u0648\u0631 \u06a9\u0647 \u0645\u0645\u06a9\u0646 \u0627\u0633\u062a \u0645\u062a\u0648\u062c\u0647 \u0634\u062f\u0647 \u0628\u0627\u0634\u06cc\u062f\u060c \u0627\u06af\u0631\u0686\u0647 \u0646\u0634\u0627\u0646\u0647\u200c\u06af\u0630\u0627\u0631\u06cc \u0628\u0631\u0627\u06cc \u067e\u0631\u062f\u0627\u0632\u0634 \u062f\u0633\u062a\u0648\u0631\u0627\u062a <code>CommandHandler</code> \u0646\u0627\u0645\u06cc\u062f\u0647 \u0645\u06cc\u200c\u0634\u0648\u062f\u060c \u0627\u0645\u0627 \u0627\u0632 \u0645\u0641\u0647\u0648\u0645 \u06a9\u0644\u0627\u0633\u06cc\u06a9 \u062f\u0631 \u0631\u0628\u0627\u062a\u200c\u0647\u0627\u06cc \u062a\u0644\u06af\u0631\u0627\u0645 \u0648\u0633\u06cc\u0639\u200c\u062a\u0631 \u0627\u0633\u062a.</p>"},{"location":"fa/#_8","title":"\u062d\u0648\u0632\u0647\u200c\u0647\u0627","text":"<p>\u0627\u06cc\u0646 \u0628\u0647 \u0627\u06cc\u0646 \u062f\u0644\u06cc\u0644 \u0627\u0633\u062a \u06a9\u0647 \u0622\u0646 \u062f\u0627\u0631\u0627\u06cc \u062f\u0627\u0645\u0646\u0647\u200c\u0627\u06cc \u0648\u0633\u06cc\u0639\u200c\u062a\u0631 \u0627\u0632 \u0627\u0645\u06a9\u0627\u0646\u0627\u062a \u067e\u0631\u062f\u0627\u0632\u0634\u06cc \u0627\u0633\u062a\u060c \u06cc\u0639\u0646\u06cc \u062a\u0627\u0628\u0639 \u0647\u062f\u0641 \u0645\u06cc\u200c\u062a\u0648\u0627\u0646\u062f \u0646\u0647 \u062a\u0646\u0647\u0627 \u0628\u0633\u062a\u0647 \u0628\u0647 \u062a\u0637\u0628\u06cc\u0642 \u0645\u062a\u0646\u060c \u0628\u0644\u06a9\u0647 \u0628\u0633\u062a\u0647 \u0628\u0647 \u0646\u0648\u0639 \u06cc\u06a9 \u0628\u0647\u200c\u0631\u0648\u0632\u0631\u0633\u0627\u0646\u06cc \u0645\u0646\u0627\u0633\u0628 \u0646\u06cc\u0632 \u062a\u0639\u0631\u06cc\u0641 \u0634\u0648\u062f\u060c \u0627\u06cc\u0646 \u0645\u0641\u0647\u0648\u0645 \u062d\u0648\u0632\u0647\u200c\u0647\u0627\u0633\u062a.</p> <p>\u0628\u0647 \u0627\u06cc\u0646 \u062a\u0631\u062a\u06cc\u0628\u060c \u0647\u0631 \u062f\u0633\u062a\u0648\u0631 \u0645\u06cc\u200c\u062a\u0648\u0627\u0646\u062f \u062f\u0633\u062a\u06af\u06cc\u0631\u0647\u200c\u0647\u0627\u06cc \u0645\u062a\u0641\u0627\u0648\u062a\u06cc \u0628\u0631\u0627\u06cc \u0641\u0647\u0631\u0633\u062a \u0645\u062a\u0641\u0627\u0648\u062a\u06cc \u0627\u0632 \u062d\u0648\u0632\u0647\u200c\u0647\u0627 \u062f\u0627\u0634\u062a\u0647 \u0628\u0627\u0634\u062f\u060c \u06cc\u0627 \u0628\u0627\u0644\u0639\u06a9\u0633\u060c \u06cc\u06a9 \u062f\u0633\u062a\u0648\u0631 \u0628\u0631\u0627\u06cc \u0686\u0646\u062f\u062a\u0627.</p> <p>\u062f\u0631 \u0632\u06cc\u0631 \u0645\u06cc\u200c\u062a\u0648\u0627\u0646\u06cc\u062f \u0628\u0628\u06cc\u0646\u06cc\u062f \u06a9\u0647 \u0686\u06af\u0648\u0646\u0647 \u0646\u0642\u0634\u0647\u200c\u0628\u0631\u062f\u0627\u0631\u06cc \u062a\u0648\u0633\u0637 \u0628\u0627\u0631 \u0645\u062a\u0646\u06cc \u0648 \u062d\u0648\u0632\u0647 \u0627\u0646\u062c\u0627\u0645 \u0645\u06cc\u200c\u0634\u0648\u062f:</p> <p> </p>"},{"location":"fa/#_9","title":"\u0648\u0631\u0648\u062f\u06cc\u200c\u0647\u0627","text":"<p>\u0628\u0639\u062f\u060c \u0627\u06af\u0631 \u0628\u0627\u0631 \u0645\u062a\u0646\u06cc \u0628\u0627 \u0647\u06cc\u0686 \u062f\u0633\u062a\u0648\u0631\u06cc \u0645\u0637\u0627\u0628\u0642\u062a \u0646\u062f\u0627\u0634\u062a\u0647 \u0628\u0627\u0634\u062f\u060c \u0646\u0642\u0627\u0637 \u0648\u0631\u0648\u062f\u06cc \u062c\u0633\u062a\u062c\u0648 \u0645\u06cc\u200c\u0634\u0648\u0646\u062f.</p> <p>\u0645\u0641\u0647\u0648\u0645 \u0628\u0633\u06cc\u0627\u0631 \u0634\u0628\u06cc\u0647 \u0628\u0647 \u0627\u0646\u062a\u0638\u0627\u0631 \u0648\u0631\u0648\u062f\u06cc \u062f\u0631 \u0628\u0631\u0646\u0627\u0645\u0647\u200c\u0647\u0627\u06cc \u062e\u0637 \u0641\u0631\u0645\u0627\u0646 \u0627\u0633\u062a\u060c \u0634\u0645\u0627 \u06cc\u06a9 \u0646\u0642\u0637\u0647 \u062f\u0631 \u0645\u062a\u0646 \u0628\u0627\u062a \u0628\u0631\u0627\u06cc \u06cc\u06a9 \u06a9\u0627\u0631\u0628\u0631 \u062e\u0627\u0635 \u0642\u0631\u0627\u0631 \u0645\u06cc\u200c\u062f\u0647\u06cc\u062f \u06a9\u0647 \u0648\u0631\u0648\u062f\u06cc \u0628\u0639\u062f\u06cc \u0627\u0648 \u0631\u0627 \u0645\u062f\u06cc\u0631\u06cc\u062a \u0645\u06cc\u200c\u06a9\u0646\u062f\u060c \u0645\u0647\u0645 \u0646\u06cc\u0633\u062a \u0686\u0647 \u0686\u06cc\u0632\u06cc \u062f\u0627\u0631\u062f\u060c \u0645\u0647\u0645 \u0627\u06cc\u0646 \u0627\u0633\u062a \u06a9\u0647 \u0628\u0647\u200c\u0631\u0648\u0632\u0631\u0633\u0627\u0646\u06cc \u0628\u0639\u062f\u06cc <code>User</code> \u062f\u0627\u0634\u062a\u0647 \u0628\u0627\u0634\u062f \u062a\u0627 \u0628\u062a\u0648\u0627\u0646 \u0622\u0646 \u0631\u0627 \u0628\u0627 \u0646\u0642\u0637\u0647 \u0627\u0646\u062a\u0638\u0627\u0631 \u0648\u0631\u0648\u062f\u06cc \u062a\u0646\u0638\u06cc\u0645 \u0634\u062f\u0647 \u0645\u0631\u062a\u0628\u0637 \u06a9\u0631\u062f.</p> <p>\u062f\u0631 \u0632\u06cc\u0631 \u0645\u06cc\u200c\u062a\u0648\u0627\u0646\u06cc\u062f \u0645\u062b\u0627\u0644\u06cc \u0627\u0632 \u067e\u0631\u062f\u0627\u0632\u0634 \u06cc\u06a9 \u0628\u0647\u200c\u0631\u0648\u0632\u0631\u0633\u0627\u0646\u06cc \u0631\u0627 \u0647\u0646\u06af\u0627\u0645\u06cc \u06a9\u0647 \u0647\u06cc\u0686 \u0645\u0637\u0627\u0628\u0642\u062a\u06cc \u0628\u0627 <code>\u062f\u0633\u062a\u0648\u0631\u0627\u062a</code> \u0648\u062c\u0648\u062f \u0646\u062f\u0627\u0631\u062f\u060c \u0645\u0634\u0627\u0647\u062f\u0647 \u06a9\u0646\u06cc\u062f.</p> <p> </p>"},{"location":"fa/#_10","title":"\u0639\u0645\u0648\u0645\u06cc\u200c\u0647\u0627","text":"<p>\u0627\u06af\u0631 \u062f\u0633\u062a\u06af\u06cc\u0631\u0647 \u0647\u06cc\u0686 <code>\u062f\u0633\u062a\u0648\u0631\u06cc</code> \u06cc\u0627 <code>\u0648\u0631\u0648\u062f\u06cc</code> \u067e\u06cc\u062f\u0627 \u0646\u06a9\u0646\u062f\u060c \u0628\u0627\u0631 \u0645\u062a\u0646 \u0631\u0627 \u062f\u0631 \u0645\u0642\u0627\u0628\u0644 \u062f\u0633\u062a\u06af\u06cc\u0631\u0647\u200c\u0647\u0627\u06cc <code>\u0639\u0645\u0648\u0645\u06cc</code> \u0628\u0631\u0631\u0633\u06cc \u0645\u06cc\u200c\u06a9\u0646\u062f.</p> <p>\u0645\u0627 \u062a\u0648\u0635\u06cc\u0647 \u0645\u06cc\u200c\u06a9\u0646\u06cc\u0645 \u0628\u062f\u0648\u0646 \u0633\u0648\u0621 \u0627\u0633\u062a\u0641\u0627\u062f\u0647 \u0627\u0632 \u0622\u0646 \u0627\u0633\u062a\u0641\u0627\u062f\u0647 \u0646\u06a9\u0646\u06cc\u062f\u060c \u0632\u06cc\u0631\u0627 \u0622\u0646 \u0628\u0627 \u0627\u0646\u062c\u0627\u0645 \u062a\u06a9\u0631\u0627\u0631 \u0628\u0631 \u0631\u0648\u06cc \u062a\u0645\u0627\u0645 \u0648\u0631\u0648\u062f\u06cc\u200c\u0647\u0627 \u0628\u0631\u0631\u0633\u06cc \u0645\u06cc\u200c\u06a9\u0646\u062f.</p>"},{"location":"fa/#_11","title":"\u067e\u0631\u062f\u0627\u0632\u0634\u200c\u0646\u0634\u062f\u0647","text":"<p>\u0648 \u0645\u0631\u062d\u0644\u0647 \u0646\u0647\u0627\u06cc\u06cc\u060c \u0627\u06af\u0631 \u062f\u0633\u062a\u06af\u06cc\u0631\u0647 \u0647\u06cc\u0686 \u0641\u0639\u0627\u0644\u06cc\u062a \u062a\u0637\u0628\u06cc\u0642\u06cc (<code>UpdateHandler</code> \u06a9\u0627\u0645\u0644\u0627\u064b \u0645\u0648\u0627\u0632\u06cc \u06a9\u0627\u0631 \u0645\u06cc\u200c\u06a9\u0646\u062f \u0648 \u0628\u0647 \u0639\u0646\u0648\u0627\u0646 \u0641\u0639\u0627\u0644\u06cc\u062a \u0645\u0639\u0645\u0648\u0644\u06cc \u0645\u062d\u0633\u0648\u0628 \u0646\u0645\u06cc\u200c\u0634\u0648\u062f) \u067e\u06cc\u062f\u0627 \u0646\u06a9\u0646\u062f\u060c \u0633\u067e\u0633 <code>UnprocessedHandler</code> \u0628\u0647 \u06a9\u0627\u0631 \u0645\u06cc\u200c\u0622\u06cc\u062f\u060c \u0627\u06af\u0631 \u062a\u0646\u0638\u06cc\u0645 \u0634\u062f\u0647 \u0628\u0627\u0634\u062f\u060c \u0627\u06cc\u0646 \u0645\u0648\u0631\u062f \u0631\u0627 \u0645\u062f\u06cc\u0631\u06cc\u062a \u0645\u06cc\u200c\u06a9\u0646\u062f\u060c \u0645\u0645\u06a9\u0646 \u0627\u0633\u062a \u0645\u0641\u06cc\u062f \u0628\u0627\u0634\u062f \u062a\u0627 \u0628\u0647 \u06a9\u0627\u0631\u0628\u0631 \u0647\u0634\u062f\u0627\u0631 \u062f\u0647\u06cc\u062f \u06a9\u0647 \u0686\u06cc\u0632\u06cc \u0627\u0634\u062a\u0628\u0627\u0647 \u0631\u0641\u062a\u0647 \u0627\u0633\u062a.</p> <p>\u062c\u0632\u0626\u06cc\u0627\u062a \u0628\u06cc\u0634\u062a\u0631 \u0631\u0627 \u062f\u0631 \u0645\u0642\u0627\u0644\u0647 \u062f\u0633\u062a\u06af\u06cc\u0631\u0647\u200c\u0647\u0627 \u0628\u062e\u0648\u0627\u0646\u06cc\u062f.</p>"},{"location":"fa/#_12","title":"\u0645\u062d\u062f\u0648\u062f\u06a9\u0646\u0646\u062f\u0647 \u0633\u0631\u0639\u062a \u0641\u0639\u0627\u0644\u06cc\u062a","text":"<p>\u067e\u0633 \u0627\u0632 \u06cc\u0627\u0641\u062a\u0646 \u06cc\u06a9 \u0641\u0639\u0627\u0644\u06cc\u062a\u060c \u0645\u062d\u062f\u0648\u062f\u06cc\u062a\u200c\u0647\u0627\u06cc \u0633\u0631\u0639\u062a \u06a9\u0627\u0631\u0628\u0631 \u0631\u0627 \u0628\u0631 \u0631\u0648\u06cc \u0622\u0646 \u0646\u06cc\u0632 \u0628\u0631\u0627\u0633\u0627\u0633 \u067e\u0627\u0631\u0627\u0645\u062a\u0631\u0647\u0627\u06cc \u0645\u0634\u062e\u0635 \u0634\u062f\u0647 \u062f\u0631 \u067e\u0627\u0631\u0627\u0645\u062a\u0631\u0647\u0627\u06cc \u0641\u0639\u0627\u0644\u06cc\u062a \u0628\u0631\u0631\u0633\u06cc \u0645\u06cc\u200c\u06a9\u0646\u062f.</p>"},{"location":"fa/#_13","title":"\u0641\u0639\u0627\u0644\u06cc\u062a","text":"<p>\u0641\u0639\u0627\u0644\u06cc\u062a \u0628\u0647 \u0627\u0646\u0648\u0627\u0639 \u0645\u062e\u062a\u0644\u0641 \u062f\u0633\u062a\u06af\u06cc\u0631\u0647\u200c\u0647\u0627\u06cc\u06cc \u0627\u0634\u0627\u0631\u0647 \u062f\u0627\u0631\u062f \u06a9\u0647 \u06a9\u062a\u0627\u0628\u062e\u0627\u0646\u0647 \u0631\u0628\u0627\u062a \u062a\u0644\u06af\u0631\u0627\u0645 \u0645\u06cc\u200c\u062a\u0648\u0627\u0646\u062f \u0645\u062f\u06cc\u0631\u06cc\u062a \u06a9\u0646\u062f\u060c \u0634\u0627\u0645\u0644 \u062f\u0633\u062a\u0648\u0631\u0627\u062a\u060c \u0648\u0631\u0648\u062f\u06cc\u200c\u0647\u0627\u060c \u0639\u0628\u0627\u0631\u0627\u062a \u0645\u0646\u0638\u0645 \u0648 \u062f\u0633\u062a\u06af\u06cc\u0631\u0647 \u067e\u0631\u062f\u0627\u0632\u0634\u200c\u0646\u0634\u062f\u0647.</p>"},{"location":"fa/#_14","title":"\u0641\u0631\u0627\u062e\u0648\u0627\u0646\u06cc","text":"<p>\u0645\u0631\u062d\u0644\u0647 \u0646\u0647\u0627\u06cc\u06cc \u067e\u0631\u062f\u0627\u0632\u0634\u060c \u0641\u0631\u0627\u062e\u0648\u0627\u0646\u06cc \u0641\u0639\u0627\u0644\u06cc\u062a \u06cc\u0627\u0641\u062a \u0634\u062f\u0647 \u0627\u0633\u062a.</p> <p>\u062c\u0632\u0626\u06cc\u0627\u062a \u0628\u06cc\u0634\u062a\u0631 \u0631\u0627 \u0645\u06cc\u200c\u062a\u0648\u0627\u0646\u06cc\u062f \u062f\u0631 \u0645\u0642\u0627\u0644\u0647 \u0641\u0631\u0627\u062e\u0648\u0627\u0646\u06cc \u0628\u06cc\u0627\u0628\u06cc\u062f.</p>"},{"location":"fa/#_15","title":"\u0647\u0645\u0686\u0646\u06cc\u0646 \u0628\u0628\u06cc\u0646\u06cc\u062f","text":"<ul> <li>\u062a\u062c\u0632\u06cc\u0647 \u0628\u0647\u200c\u0631\u0648\u0632\u0631\u0633\u0627\u0646\u06cc</li> <li>\u0641\u0631\u0627\u062e\u0648\u0627\u0646\u06cc \u0641\u0639\u0627\u0644\u06cc\u062a</li> <li>\u062f\u0633\u062a\u06af\u06cc\u0631\u0647\u200c\u0647\u0627</li> <li>\u067e\u06cc\u06a9\u0631\u0628\u0646\u062f\u06cc \u0631\u0628\u0627\u062a</li> <li>\u0634\u0631\u0648\u0639\u200c\u06a9\u0646\u0646\u062f\u0647\u200c\u0647\u0627\u06cc \u0648\u0628 (Spring, Ktor)</li> </ul>"},{"location":"fa/Actions/#all-requests-is-actions","title":"All requests is Actions","text":"<p>\u062a\u0645\u0627\u0645 \u062f\u0631\u062e\u0648\u0627\u0633\u062a\u200c\u0647\u0627\u06cc API \u062a\u0644\u06af\u0631\u0627\u0645 \u0627\u0646\u0648\u0627\u0639 \u0645\u062e\u062a\u0644\u0641\u06cc \u0627\u0632 \u0631\u0627\u0628\u0637 <code>TgAction</code> \u0647\u0633\u062a\u0646\u062f \u06a9\u0647 \u0631\u0648\u0634\u200c\u0647\u0627\u06cc \u0645\u062e\u062a\u0644\u0641\u06cc \u0631\u0627 \u067e\u06cc\u0627\u062f\u0647\u200c\u0633\u0627\u0632\u06cc \u0645\u06cc\u200c\u06a9\u0646\u0646\u062f \u0645\u0627\u0646\u0646\u062f <code>SendMessageAction</code>\u060c \u06a9\u0647 \u0628\u0647 \u0641\u0631\u0645 <code>message()</code> - type functions \u0628\u0631\u0627\u06cc \u0631\u0627\u062d\u062a\u06cc \u0631\u0627\u0628\u0637 \u06a9\u062a\u0627\u0628\u062e\u0627\u0646\u0647 \u0628\u0633\u062a\u0647\u200c\u0628\u0646\u062f\u06cc \u0634\u062f\u0647\u200c\u0627\u0646\u062f.</p> <p> </p> <p>\u0647\u0631 <code>Action</code> \u0645\u0645\u06a9\u0646 \u0627\u0633\u062a \u0631\u0648\u0634\u200c\u0647\u0627\u06cc \u0645\u062e\u062a\u0644\u0641\u06cc \u062f\u0627\u0634\u062a\u0647 \u0628\u0627\u0634\u062f\u060c \u0628\u0633\u062a\u0647 \u0628\u0647 \u0648\u06cc\u0698\u06af\u06cc\u200c\u0647\u0627\u06cc \u062f\u0631 \u062f\u0633\u062a\u0631\u0633.</p>"},{"location":"fa/Actions/#_1","title":"\u0648\u06cc\u0698\u06af\u06cc\u200c\u0647\u0627","text":"<p>\u0639\u0645\u0644\u06a9\u0631\u062f\u0647\u0627\u06cc \u0645\u062e\u062a\u0644\u0641 \u0645\u06cc\u200c\u062a\u0648\u0627\u0646\u0646\u062f \u0648\u06cc\u0698\u06af\u06cc\u200c\u0647\u0627\u06cc \u0645\u062e\u062a\u0644\u0641 \u062f\u0627\u0634\u062a\u0647 \u0628\u0627\u0634\u0646\u062f \u0628\u0633\u062a\u0647 \u0628\u0647 API Bot \u062a\u0644\u06af\u0631\u0627\u0645\u060c \u0645\u0627\u0646\u0646\u062f: <code>OptionsFeature</code>\u060c <code>MarkupFeature</code> <code>EntitiesFeature</code> <code>CaptionFeature</code>.</p> <p>\u0628\u06cc\u0627\u06cc\u06cc\u062f \u0628\u0647 \u0622\u0646\u200c\u0647\u0627 \u0646\u0632\u062f\u06cc\u06a9\u200c\u062a\u0631 \u0646\u06af\u0627\u0647 \u06a9\u0646\u06cc\u0645:</p>"},{"location":"fa/Actions/#_2","title":"\u06af\u0632\u06cc\u0646\u0647\u200c\u0647\u0627","text":"<p>\u0628\u0631\u0627\u06cc \u0645\u062b\u0627\u0644\u060c <code>OptionsFeature</code> \u0628\u0631\u0627\u06cc \u067e\u0627\u0633 \u062f\u0627\u062f\u0646 \u067e\u0627\u0631\u0627\u0645\u062a\u0631\u0647\u0627\u06cc \u0627\u062e\u062a\u06cc\u0627\u0631\u06cc \u0627\u0633\u062a\u0641\u0627\u062f\u0647 \u0645\u06cc\u200c\u0634\u0648\u062f.</p> <p>\u0647\u0631 \u0639\u0645\u0644\u06a9\u0631\u062f \u0646\u0648\u0639 \u062e\u0648\u062f \u0627\u0632 \u06af\u0632\u06cc\u0646\u0647\u200c\u0647\u0627 \u0631\u0627 \u062f\u0627\u0631\u062f\u060c \u0645\u0631\u0628\u0648\u0637 \u0628\u0647 \u0622\u0646 \u0631\u0627 \u0645\u06cc\u200c\u062a\u0648\u0627\u0646\u06cc\u062f \u062f\u0631 \u062e\u0648\u062f <code>Action</code> \u062f\u0631 \u067e\u0627\u0631\u0627\u0645\u062a\u0631 <code>options</code>\u060c \u062f\u0631 \u0628\u062e\u0634 \u0648\u06cc\u0698\u06af\u06cc\u200c\u0647\u0627 \u0645\u0634\u0627\u0647\u062f\u0647 \u06a9\u0646\u06cc\u062f. \u0628\u0631\u0627\u06cc \u0645\u062b\u0627\u0644\u060c <code>sendMessage</code> \u06a9\u0647 \u0634\u0627\u0645\u0644 \u062f\u0627\u062f\u0647\u200c\u06a9\u0644\u0627\u0633 <code>MessageOptions</code> \u0628\u0627 \u067e\u0627\u0631\u0627\u0645\u062a\u0631\u0647\u0627\u06cc \u0645\u062e\u062a\u0644\u0641 \u0628\u0647 \u0639\u0646\u0648\u0627\u0646 \u06af\u0632\u06cc\u0646\u0647\u200c\u0647\u0627\u0633\u062a.</p> <p>\u0645\u062b\u0627\u0644 \u0627\u0633\u062a\u0641\u0627\u062f\u0647:</p> <pre><code>message{ \"*Test*\" }.options {\n    parseMode = ParseMode.Markdown\n}.send(user, bot)\n</code></pre>"},{"location":"fa/Actions/#markup","title":"Markup","text":"<p>\u0647\u0645\u0686\u0646\u06cc\u0646 \u0631\u0648\u0634\u06cc \u0628\u0631\u0627\u06cc \u0627\u0631\u0633\u0627\u0644 markup \u0648\u062c\u0648\u062f \u062f\u0627\u0631\u062f \u06a9\u0647 \u062a\u0645\u0627\u0645 \u0627\u0646\u0648\u0627\u0639 \u06a9\u06cc\u0628\u0648\u0631\u062f\u0647\u0627 \u0631\u0627 \u067e\u0634\u062a\u06cc\u0628\u0627\u0646\u06cc \u0645\u06cc\u200c\u06a9\u0646\u062f: <code>ReplyKeyboardMarkup</code>\u060c <code>InlineKeyboardMarkup</code>\u060c <code>ForceReply</code>\u060c <code>ReplyKeyboardRemove</code>.</p>"},{"location":"fa/Actions/#inline-keyboard-markup","title":"Inline Keyboard Markup","text":"<p>\u0627\u06cc\u0646 \u0633\u0627\u0632\u0646\u062f\u0647 \u0628\u0647 \u0634\u0645\u0627 \u0627\u0645\u06a9\u0627\u0646 \u0645\u06cc\u200c\u062f\u0647\u062f \u062f\u06a9\u0645\u0647\u200c\u0647\u0627\u06cc inline \u0628\u0627 \u0647\u0631 \u062a\u0631\u06a9\u06cc\u0628\u06cc \u0627\u0632 \u067e\u0627\u0631\u0627\u0645\u062a\u0631\u0647\u0627 \u0628\u0633\u0627\u0632\u06cc\u062f.</p> <pre><code>message{ \"Test\" }.inlineKeyboardMarkup {\n    \"name\" callback \"callbackData\"         //\n    \"buttonName\" url \"https://google.com\"  //--- \u0627\u06cc\u0646 \u062f\u0648 \u062f\u06a9\u0645\u0647 \u062f\u0631 \u06cc\u06a9 \u0631\u062f\u06cc\u0641 \u062e\u0648\u0627\u0647\u0646\u062f \u0628\u0648\u062f.\n    newLine() // \u06cc\u0627 br()\n    \"otherButton\" webAppInfo \"data\"       // \u0627\u06cc\u0646 \u062f\u0631 \u0631\u062f\u06cc\u0641 \u062f\u06cc\u06af\u0631\u06cc \u062e\u0648\u0627\u0647\u062f \u0628\u0648\u062f\n\n    // \u0634\u0645\u0627 \u0647\u0645\u0686\u0646\u06cc\u0646 \u0645\u06cc\u200c\u062a\u0648\u0627\u0646\u06cc\u062f \u0627\u0632 \u06cc\u06a9 \u0633\u0628\u06a9 \u0645\u062a\u0641\u0627\u0648\u062a \u062f\u0631\u0648\u0646 \u0633\u0627\u0632\u0646\u062f\u0647 \u0627\u0633\u062a\u0641\u0627\u062f\u0647 \u06a9\u0646\u06cc\u062f:\n    callbackData(\"buttonName\") { \"callbackData\" }\n}.send(user, bot)\n</code></pre> <p>\u062c\u0632\u0626\u06cc\u0627\u062a \u0628\u06cc\u0634\u062a\u0631 \u0645\u06cc\u200c\u062a\u0648\u0627\u0646\u06cc\u062f \u062f\u0631 \u0645\u0633\u062a\u0646\u062f\u0627\u062a \u0633\u0627\u0632\u0646\u062f\u0647 \u0645\u0634\u0627\u0647\u062f\u0647 \u06a9\u0646\u06cc\u062f.</p>"},{"location":"fa/Actions/#reply-keyboard-markup","title":"Reply Keyboard Markup","text":"<p>\u0627\u06cc\u0646 \u0633\u0627\u0632\u0646\u062f\u0647 \u0628\u0647 \u0634\u0645\u0627 \u0627\u0645\u06a9\u0627\u0646 \u0645\u06cc\u200c\u062f\u0647\u062f \u062f\u06a9\u0645\u0647\u200c\u0647\u0627\u06cc \u0645\u0646\u0648 \u0628\u0633\u0627\u0632\u06cc\u062f.</p> <pre><code>message{ \"Test\" }.replyKeyboardMarkup {\n  + \"Menu button\"     // \u0634\u0645\u0627 \u0645\u06cc\u200c\u062a\u0648\u0627\u0646\u06cc\u062f \u062f\u06a9\u0645\u0647\u200c\u0647\u0627 \u0631\u0627 \u0628\u0627 \u0627\u0633\u062a\u0641\u0627\u062f\u0647 \u0627\u0632 \u0627\u067e\u0631\u0627\u062a\u0648\u0631 plus \u0627\u0636\u0627\u0641\u0647 \u06a9\u0646\u06cc\u062f\n  + \"Menu button 2\"\n  br() // \u0628\u0631\u0648 \u0628\u0647 \u0631\u062f\u06cc\u0641 \u062f\u0648\u0645\n  \"Send polls \ud83d\udc40\" requestPoll true   // \u062f\u06a9\u0645\u0647 \u0628\u0627 \u067e\u0627\u0631\u0627\u0645\u062a\u0631\n\n  options {\n    resizeKeyboard = true\n  }\n}.send(user, bot)\n</code></pre> <p>\u06af\u0632\u06cc\u0646\u0647\u200c\u0647\u0627\u06cc \u0627\u0636\u0627\u0641\u06cc \u0642\u0627\u0628\u0644 \u0627\u062c\u0631\u0627 \u0631\u0648\u06cc \u06a9\u06cc\u0628\u0648\u0631\u062f \u0631\u0627 \u0645\u06cc\u200c\u062a\u0648\u0627\u0646\u06cc\u062f \u062f\u0631 <code>ReplyKeyboardMarkupOptions</code> \u0645\u0634\u0627\u0647\u062f\u0647 \u06a9\u0646\u06cc\u062f.</p> <p>\u0628\u0631\u0627\u06cc \u062c\u0632\u0626\u06cc\u0627\u062a \u0628\u06cc\u0634\u062a\u0631 \u062f\u0631 \u0645\u0648\u0631\u062f \u0631\u0648\u0634\u200c\u0647\u0627\u060c \u0645\u0633\u062a\u0646\u062f\u0627\u062a \u0633\u0627\u0632\u0646\u062f\u0647 \u0631\u0627 \u0628\u0628\u06cc\u0646\u06cc\u062f.</p> <p>\u0627\u0633\u062a\u0641\u0627\u062f\u0647 \u0627\u0632 DSL \u0628\u0631\u0627\u06cc \u062c\u0645\u0639\u200c\u0622\u0648\u0631\u06cc markup \u06a9\u06cc\u0628\u0648\u0631\u062f \u0628\u06cc\u0634\u062a\u0631 \u0631\u0627\u062d\u062a \u0627\u0633\u062a\u060c \u0627\u0645\u0627 \u0627\u06af\u0631 \u0644\u0627\u0632\u0645 \u0628\u0648\u062f\u060c \u0634\u0645\u0627 \u0647\u0645\u0686\u0646\u06cc\u0646 \u0645\u06cc\u200c\u062a\u0648\u0627\u0646\u06cc\u062f markup \u0631\u0627 \u0628\u0647 \u0635\u0648\u0631\u062a \u062f\u0633\u062a\u06cc \u0627\u0636\u0627\u0641\u0647 \u06a9\u0646\u06cc\u062f.</p> <pre><code>message{ \"*Test*\" }.markup {\n    InlineKeyboardMarkup(\n        InlineKeyboardButton(\"test\", callbackData = \"testCallback\")\n    )\n}.send(user, bot)\n</code></pre> <pre><code>message{ \"*Test*\" }.markup {\n    ReplyKeyboardMarkup(\n        KeyboardButton(\"Test menu button\")\n    )\n}.send(user, bot)\n</code></pre>"},{"location":"fa/Actions/#entities","title":"Entities","text":"<p>\u0647\u0645\u0686\u0646\u06cc\u0646 \u0631\u0648\u0634\u06cc \u0628\u0631\u0627\u06cc \u0627\u0631\u0633\u0627\u0644 <code>MessageEntity</code> \u0648\u062c\u0648\u062f \u062f\u0627\u0631\u062f.</p> <p>\u0645\u062b\u0627\u0644 \u0627\u0633\u062a\u0641\u0627\u062f\u0647:</p> <pre><code>message{ \"Test \\$hello\" }.replyKeyboardMarkup {\n    +\"Test menu button\"\n}.entities {\n    5 to 15 url \"https://google.com\" // add TextLink\n    entity(EntityType.Bold, 0, 4)\n    entity(EntityType.Cashtag, 5, 5) // backslash \u0634\u0645\u0631\u062f\u0647 \u0646\u0645\u06cc\u200c\u0634\u0648\u062f (\u0686\u0648\u0646 \u0628\u0631\u0627\u06cc \u06a9\u0627\u0645\u067e\u0627\u06cc\u0644\u0631 \u0627\u0633\u062a\u0641\u0627\u062f\u0647 \u0645\u06cc\u200c\u0634\u0648\u062f)\n}.send(user, bot)\n</code></pre>"},{"location":"fa/Actions/#entities_1","title":"Entities \u0645\u062a\u0646\u06cc.","text":"<p>Entities \u0647\u0645\u0686\u0646\u06cc\u0646 \u0645\u06cc\u200c\u062a\u0648\u0627\u0646\u0646\u062f \u0627\u0632 \u0637\u0631\u06cc\u0642 \u0645\u062a\u0646 \u0628\u0631\u062e\u06cc \u0633\u0627\u0632\u0646\u062f\u0647\u200c\u0647\u0627 \u0627\u0636\u0627\u0641\u0647 \u0634\u0648\u0646\u062f\u060c \u0622\u0646\u200c\u0647\u0627 \u0628\u0627 \u0631\u0627\u0628\u0637 \u062e\u0627\u0635 EntitiesContextBuilder \u0628\u0631\u0686\u0633\u0628\u200c\u06af\u0630\u0627\u0631\u06cc \u0645\u06cc\u200c\u0634\u0648\u0646\u062f\u060c \u06a9\u0647 \u062f\u0631 \u0648\u06cc\u0698\u06af\u06cc caption \u0646\u06cc\u0632 \u0648\u062c\u0648\u062f \u062f\u0627\u0631\u062f.</p> <p>\u0645\u062b\u0627\u0644 \u0627\u0633\u062a\u0641\u0627\u062f\u0647:</p> <pre><code>message { \"usual text \" - bold { \"this is bold text\" } - \" continue usual\" }.send(user, bot)\n</code></pre> <p>\u062a\u0645\u0627\u0645 \u0627\u0646\u0648\u0627\u0639 \u0646\u0648\u0639 entity \u067e\u0634\u062a\u06cc\u0628\u0627\u0646\u06cc \u0645\u06cc\u200c\u0634\u0648\u062f.</p>"},{"location":"fa/Actions/#caption","title":"Caption","text":"<p>\u0647\u0645\u0686\u0646\u06cc\u0646\u060c \u0645\u062a\u062f <code>caption</code> \u0645\u06cc\u200c\u062a\u0648\u0627\u0646\u062f \u0628\u0631\u0627\u06cc \u0627\u0641\u0632\u0648\u062f\u0646 \u0632\u06cc\u0631\u0646\u0648\u06cc\u0633 \u0628\u0647 \u0641\u0627\u06cc\u0644\u200c\u0647\u0627\u06cc \u0631\u0633\u0627\u0646\u0647\u200c\u0627\u06cc \u0627\u0633\u062a\u0641\u0627\u062f\u0647 \u0634\u0648\u062f.</p> <p>\u0645\u062b\u0627\u0644 \u0627\u0633\u062a\u0641\u0627\u062f\u0647:</p> <pre><code>photo { \"FILE_ID\" }.caption { \"Test caption\" }.send(user, bot)\n</code></pre>"},{"location":"fa/Actions/#_3","title":"\u0647\u0645\u0686\u0646\u06cc\u0646 \u0628\u0628\u06cc\u0646\u06cc\u062f","text":"<ul> <li>Bot context</li> <li>FSM | Conversation handling</li> </ul>"},{"location":"fa/Activites-and-Processors/","title":"\u0641\u0639\u0627\u0644\u06cc\u062a\u200c\u0647\u0627 \u0648 \u067e\u0631\u062f\u0627\u0632\u0646\u062f\u0647\u200c\u0647\u0627","text":""},{"location":"fa/Activites-and-Processors/#_1","title":"\u0645\u0642\u062f\u0645\u0647","text":"<p><code>Activity</code> \u062f\u0631 \u0627\u0635\u0637\u0644\u0627\u062d \u0627\u06cc\u0646 \u06a9\u062a\u0627\u0628\u062e\u0627\u0646\u0647 \u0645\u0648\u062c\u0648\u062f\u06cc\u062a \u0627\u0646\u062a\u0632\u0627\u0639\u06cc \u0627\u0633\u062a \u06a9\u0647 \u062a\u0639\u0645\u06cc\u0645\u06cc \u0627\u0632 \u0645\u0648\u062c\u0648\u062f\u06cc\u062a\u200c\u0647\u0627\u06cc\u06cc \u0645\u0627\u0646\u0646\u062f <code>@CommandHandler</code>\u060c <code>@InputHandler</code>\u060c <code>@UnprocessedHandler</code> \u0648 <code>@CommonHandler</code> \u0627\u0633\u062a.</p> <p>\u0647\u0645\u0686\u0646\u06cc\u0646 \u0645\u0642\u0627\u0644\u0647 handlers \u0631\u0627 \u0646\u06cc\u0632 \u0628\u0631\u0631\u0633\u06cc \u06a9\u0646\u06cc\u062f.</p>"},{"location":"fa/Activites-and-Processors/#_2","title":"\u062c\u0645\u0639\u200c\u0622\u0648\u0631\u06cc \u0641\u0639\u0627\u0644\u06cc\u062a\u200c\u0647\u0627","text":"<p>\u0641\u0639\u0627\u0644\u06cc\u062a\u200c\u0647\u0627 \u062f\u0631 \u0632\u0645\u0627\u0646 \u06a9\u0627\u0645\u067e\u0627\u06cc\u0644 \u062c\u0645\u0639\u200c\u0622\u0648\u0631\u06cc \u0648 \u06a9\u0644\u06cc\u0647 \u0645\u062a\u0646 \u062f\u0631 \u0622\u0646\u200c\u0647\u0627 \u0622\u0645\u0627\u062f\u0647 \u0645\u06cc\u200c\u0634\u0648\u0646\u062f (\u0628\u0647 \u062c\u0632 \u0622\u0646\u200c\u0647\u0627\u06cc\u06cc \u06a9\u0647 \u0627\u0632 \u0637\u0631\u06cc\u0642 functional dsl \u062a\u0639\u0631\u06cc\u0641 \u0634\u062f\u0647\u200c\u0627\u0646\u062f).</p> <p>\u0627\u06af\u0631 \u0645\u06cc\u200c\u062e\u0648\u0627\u0647\u06cc\u062f \u0645\u0646\u0637\u0642\u0647\u200c\u0627\u06cc \u0631\u0627 \u06a9\u0647 \u0628\u0633\u062a\u0647 \u062f\u0631 \u0622\u0646 \u062c\u0633\u062a\u062c\u0648 \u0645\u06cc\u200c\u0634\u0648\u062f \u0645\u062d\u062f\u0648\u062f \u06a9\u0646\u06cc\u062f\u060c \u0645\u06cc\u200c\u062a\u0648\u0627\u0646\u06cc\u062f \u067e\u0627\u0631\u0627\u0645\u062a\u0631\u06cc \u0631\u0627 \u0628\u0647 \u067e\u0644\u0627\u06af\u06cc\u0646 \u0627\u0631\u0633\u0627\u0644 \u06a9\u0646\u06cc\u062f:</p> <pre><code>ktGram {\n    packages = listOf(\"com.example.mybot\")\n}\n</code></pre> <p>\u06cc\u0627 \u0628\u062f\u0648\u0646 \u067e\u0644\u0627\u06af\u06cc\u0646 \u0627\u0632 \u0637\u0631\u06cc\u0642 ksp:</p> <pre><code>ksp {\n    arg(\"package\", \"com.example.mybot\")\n}\n</code></pre> <p>\u062a\u0648\u062c\u0647 \u062f\u0627\u0634\u062a\u0647 \u0628\u0627\u0634\u06cc\u062f \u06a9\u0647 \u062f\u0631 \u0686\u0646\u06cc\u0646 \u062d\u0627\u0644\u062a\u06cc\u060c \u0628\u0631\u0627\u06cc \u0627\u06cc\u0646\u06a9\u0647 \u0627\u0642\u062f\u0627\u0645\u0627\u062a \u062c\u0645\u0639\u200c\u0622\u0648\u0631\u06cc \u0634\u062f\u0647 \u0628\u0647 \u062f\u0631\u0633\u062a\u06cc \u067e\u0631\u062f\u0627\u0632\u0634 \u0634\u0648\u0646\u062f\u060c \u0628\u0627\u06cc\u062f \u0628\u0633\u062a\u0647 \u0631\u0627 \u062f\u0631 \u062e\u0648\u062f \u0646\u0645\u0648\u0646\u0647 \u0646\u06cc\u0632 \u0645\u0634\u062e\u0635 \u06a9\u0646\u06cc\u062f.</p> <pre><code>fun main() = runBlocking {\n    val bot = TelegramBot(\"BOT_TOKEN\", \"com.example.mybot\")\n\n    bot.handleUpdates()\n    // \u0634\u0631\u0648\u0639 \u06af\u0648\u0634\u200c\u062f\u0647\u0646\u062f\u0647 long-polling\n}\n</code></pre> <p>\u0627\u06cc\u0646 \u06af\u0632\u06cc\u0646\u0647 \u0628\u0631\u0627\u06cc \u0627\u06cc\u0646 \u0627\u0636\u0627\u0641\u0647 \u0634\u062f\u0647 \u0627\u0633\u062a \u06a9\u0647 \u0628\u062a\u0648\u0627\u0646 \u0646\u0645\u0648\u0646\u0647\u200c\u0647\u0627\u06cc \u0686\u0646\u062f\u06af\u0627\u0646\u0647 \u0628\u0627\u062a \u0631\u0627 \u0627\u062c\u0631\u0627 \u06a9\u0631\u062f:</p> <pre><code>ktGram {\n    packages = listOf(\"com.example.mybot\", \"com.example.mybot2\")\n}\n</code></pre> <p>\u06cc\u0627 \u0627\u06af\u0631 \u0627\u0632 \u067e\u0644\u0627\u06af\u06cc\u0646 \u0627\u0633\u062a\u0641\u0627\u062f\u0647 \u0646\u0645\u06cc\u200c\u06a9\u0646\u06cc\u062f \u0648 \u0628\u0633\u062a\u0647\u200c\u0647\u0627\u06cc \u0645\u062a\u0641\u0627\u0648\u062a\u06cc \u0631\u0627 \u0645\u0634\u062e\u0635 \u0645\u06cc\u200c\u06a9\u0646\u06cc\u062f\u060c \u0628\u0627\u06cc\u062f \u0622\u0646\u200c\u0647\u0627 \u0631\u0627 \u0628\u0627 \u062c\u062f\u0627\u06a9\u0646\u0646\u062f\u0647 <code>;</code> \u0645\u0634\u062e\u0635 \u06a9\u0646\u06cc\u062f:</p> <pre><code>ksp {\n    arg(\"package\", \"com.example.mybot;com.example.mybot2\")\n}\n</code></pre>"},{"location":"fa/Activites-and-Processors/#_3","title":"\u067e\u0631\u062f\u0627\u0632\u0634","text":""},{"location":"fa/Activites-and-Processors/#webhooks","title":"Webhooks","text":"<p>\u062f\u0631 \u06a9\u0646\u062a\u0631\u0644\u0631 \u062e\u0648\u062f (\u06cc\u0627 \u0645\u06a9\u0627\u0646\u06cc \u062f\u06cc\u06af\u0631\u06cc \u06a9\u0647 <code>webhook</code> \u062f\u0631 \u0622\u0646 \u067e\u0631\u062f\u0627\u0632\u0634 \u0645\u06cc\u200c\u0634\u0648\u062f)\u060c \u0641\u0631\u0627\u062e\u0648\u0627\u0646\u06cc \u0645\u06cc\u200c\u06a9\u0646\u06cc\u062f: <code>bot.update.parseAndHandle(webhookString)</code></p>"},{"location":"fa/Activites-and-Processors/#long-polling","title":"Long polling","text":"<p>\u0641\u0631\u0627\u062e\u0648\u0627\u0646\u06cc \u06a9\u0646\u06cc\u062f: <code>bot.handleUpdates()</code> \u06cc\u0627 \u0627\u0632 \u0637\u0631\u06cc\u0642 <code>bot.update.setListener { handle(it) }</code></p>"},{"location":"fa/Activites-and-Processors/#_4","title":"\u0647\u0645\u0686\u0646\u06cc\u0646 \u0628\u0628\u06cc\u0646\u06cc\u062f","text":"<ul> <li>\u067e\u0631\u062f\u0627\u0632\u0634 \u0622\u067e\u062f\u06cc\u062a</li> <li>\u0641\u0631\u0627\u062e\u0648\u0627\u0646\u06cc \u0641\u0639\u0627\u0644\u06cc\u062a</li> <li>\u0627\u0642\u062f\u0627\u0645\u0627\u062a</li> </ul>"},{"location":"fa/Bot-configuration/","title":"Bot Configuration","text":"<p>\u06a9\u062a\u0627\u0628\u062e\u0627\u0646\u0647 \u06af\u0632\u06cc\u0646\u0647\u200c\u0647\u0627\u06cc \u0628\u0633\u06cc\u0627\u0631\u06cc \u0628\u0631\u0627\u06cc \u067e\u06cc\u06a9\u0631\u0628\u0646\u062f\u06cc \u0641\u0631\u0627\u0647\u0645 \u0645\u06cc\u200c\u06a9\u0646\u062f\u060c \u0645\u06cc\u200c\u062a\u0648\u0627\u0646\u06cc\u062f \u0628\u0647 \u0645\u0631\u062c\u0639 API \u062f\u0631 \u06a9\u0644\u0627\u0633 <code>BotConfiguration</code> \u0645\u0631\u0627\u062c\u0639\u0647 \u06a9\u0646\u06cc\u062f.</p> <p>\u062f\u0648 \u0631\u0648\u06cc\u06a9\u0631\u062f \u0628\u0631\u0627\u06cc \u067e\u06cc\u06a9\u0631\u0628\u0646\u062f\u06cc \u0631\u0628\u0627\u062a \u0648\u062c\u0648\u062f \u062f\u0627\u0631\u062f:</p>"},{"location":"fa/Bot-configuration/#lambda-configurator","title":"Lambda Configurator","text":"<pre><code>// ...\nval bot = TelegramBot(\"BOT_TOKEN\") {\n  inputListener = RedisInputListenerImpl()\n  classManager = KoinClassManagerImpl()\n  logging {\n      botLogLevel = LogLvl.DEBUG\n  }\n}\n// ...\n</code></pre>"},{"location":"fa/Bot-configuration/#configloader","title":"\u0631\u0627\u0628\u0637 ConfigLoader","text":"<p>\u0647\u0645\u0686\u0646\u06cc\u0646 \u0627\u0645\u06a9\u0627\u0646 \u067e\u06cc\u06a9\u0631\u0628\u0646\u062f\u06cc \u0627\u0632 \u0637\u0631\u06cc\u0642 \u0631\u0627\u0628\u0637 \u062e\u0627\u0635 <code>ConfigLoader</code> \u0648\u062c\u0648\u062f \u062f\u0627\u0631\u062f\u060c \u06a9\u0647 \u0645\u06cc\u200c\u062a\u0648\u0627\u0646\u06cc\u062f \u0628\u0631\u0627\u06cc \u0628\u0627\u0631\u06af\u0630\u0627\u0631\u06cc \u062a\u0646\u0638\u06cc\u0645\u0627\u062a \u0627\u0632 \u0645\u0646\u0627\u0628\u0639 \u062e\u0627\u0631\u062c\u06cc (<code>properties</code>, <code>command line args</code>, \u0648 \u063a\u06cc\u0631\u0647) \u0627\u0633\u062a\u0641\u0627\u062f\u0647 \u06a9\u0646\u06cc\u062f.</p> <p>\u067e\u06cc\u0627\u062f\u0647\u200c\u0633\u0627\u0632\u06cc \u0627\u06cc\u0646 \u0631\u0627\u0628\u0637 \u0645\u06cc\u200c\u062a\u0648\u0627\u0646\u062f \u0627\u0632 \u0637\u0631\u06cc\u0642 \u0633\u0627\u0632\u0646\u062f\u0647 \u062b\u0627\u0646\u0648\u06cc\u0647 \u0645\u0646\u062a\u0642\u0644 \u0634\u0648\u062f \u0648 \u0646\u0645\u0648\u0646\u0647 \u0645\u0637\u0627\u0628\u0642 \u0622\u0646 \u067e\u06cc\u06a9\u0631\u0628\u0646\u062f\u06cc \u062e\u0648\u0627\u0647\u062f \u0634\u062f.</p> <pre><code>val bot = TelegramBot(ConfigLoaderImpl)\n</code></pre> <p>\u062f\u0631 \u062d\u0627\u0644 \u062d\u0627\u0636\u0631 \u0686\u0646\u062f\u06cc\u0646 \u0645\u0627\u0698\u0648\u0644 \u0627\u0631\u0627\u0626\u0647 \u0634\u062f\u0647 \u06a9\u0647 \u0627\u06cc\u0646 \u0631\u0627\u0628\u0637 \u0631\u0627 \u067e\u06cc\u0627\u062f\u0647\u200c\u0633\u0627\u0632\u06cc \u0645\u06cc\u200c\u06a9\u0646\u062f \u0645\u0627\u0646\u0646\u062f <code>ktgram-config-env</code>\u060c <code>ktgram-config-toml</code>.</p>"},{"location":"fa/Bot-configuration/#botconfiguration","title":"BotConfiguration","text":"<p>\u06a9\u0644\u0627\u0633 <code>BotConfiguration</code> \u0645\u0631\u06a9\u0632 \u0627\u0635\u0644\u06cc \u0628\u0631\u0627\u06cc \u067e\u06cc\u06a9\u0631\u0628\u0646\u062f\u06cc \u0631\u0628\u0627\u062a \u0627\u0633\u062a. \u0634\u0627\u0645\u0644 \u062e\u0648\u0627\u0635\u06cc \u0628\u0631\u0627\u06cc \u0634\u0646\u0627\u0633\u0627\u06cc\u06cc \u0631\u0628\u0627\u062a\u060c \u062a\u0646\u0638\u06cc\u0645 \u0645\u06cc\u0632\u0628\u0627\u0646 API\u060c \u062a\u0639\u06cc\u06cc\u0646 \u0627\u06cc\u0646\u06a9\u0647 \u0622\u06cc\u0627 \u0631\u0628\u0627\u062a \u062f\u0631 \u0645\u062d\u06cc\u0637 \u0622\u0632\u0645\u0627\u06cc\u0634\u06cc \u0641\u0639\u0627\u0644 \u0627\u0633\u062a\u060c \u0645\u062f\u06cc\u0631\u06cc\u062a \u0648\u0631\u0648\u062f\u06cc\u200c\u0647\u0627\u060c \u0645\u062f\u06cc\u0631\u06cc\u062a \u06a9\u0644\u0627\u0633\u200c\u0647\u0627 \u0648 \u06a9\u0646\u062a\u0631\u0644 \u062d\u0630\u0641 \u062e\u0648\u062f\u06a9\u0627\u0631 \u0648\u0631\u0648\u062f\u06cc \u0627\u0633\u062a. \u0639\u0644\u0627\u0648\u0647 \u0628\u0631 \u0627\u06cc\u0646\u060c \u062e\u0648\u0627\u0635 \u062f\u0631\u0648\u0646\u06cc \u0628\u0631\u0627\u06cc \u0645\u062d\u062f\u0648\u062f\u06cc\u062a \u0646\u0631\u062e\u060c \u067e\u06cc\u06a9\u0631\u0628\u0646\u062f\u06cc \u06a9\u0644\u0627\u06cc\u0646\u062a HTTP\u060c \u0644\u0627\u06af\u06cc\u0646\u06af\u060c \u06af\u0648\u0634 \u062f\u0627\u062f\u0646 \u0628\u0647 \u0622\u067e\u062f\u06cc\u062a\u200c\u0647\u0627 \u0648 \u062a\u062c\u0632\u06cc\u0647 \u062f\u0633\u062a\u0648\u0631\u0627\u062a \u0627\u0631\u0627\u0626\u0647 \u0645\u06cc\u200c\u06a9\u0646\u062f.</p>"},{"location":"fa/Bot-configuration/#properties","title":"Properties","text":"<ul> <li><code>identifier</code>: \u0634\u0646\u0627\u0633\u0627\u06cc\u06cc \u0646\u0645\u0648\u0646\u0647\u200c\u0647\u0627\u06cc \u0645\u062e\u062a\u0644\u0641 \u0631\u0628\u0627\u062a \u062f\u0631 \u0637\u0648\u0644 \u067e\u0631\u062f\u0627\u0632\u0634 \u0686\u0646\u062f \u0631\u0628\u0627\u062a\u06cc.</li> <li><code>apiHost</code>: \u0645\u06cc\u0632\u0628\u0627\u0646 API \u062a\u0644\u06af\u0631\u0627\u0645.</li> <li><code>isTestEnv</code>: \u067e\u0631\u0686\u0645\u06cc \u06a9\u0647 \u0646\u0634\u0627\u0646 \u0645\u06cc\u200c\u062f\u0647\u062f \u0622\u06cc\u0627 \u0631\u0628\u0627\u062a \u062f\u0631 \u0645\u062d\u06cc\u0637 \u0622\u0632\u0645\u0627\u06cc\u0634\u06cc \u0641\u0639\u0627\u0644 \u0627\u0633\u062a.</li> <li><code>inputListener</code>: \u0646\u0645\u0648\u0646\u0647\u200c\u0627\u06cc \u0627\u0632 \u06a9\u0644\u0627\u0633 \u0645\u062f\u06cc\u0631\u06cc\u062a \u0648\u0631\u0648\u062f\u06cc.</li> <li><code>classManager</code>: \u0645\u062f\u06cc\u0631\u06cc\u062a\u06cc \u06a9\u0647 \u0628\u0631\u0627\u06cc \u062f\u0631\u06cc\u0627\u0641\u062a \u06a9\u0644\u0627\u0633\u200c\u0647\u0627 \u0627\u0633\u062a\u0641\u0627\u062f\u0647 \u0645\u06cc\u200c\u0634\u0648\u062f.</li> <li><code>inputAutoRemoval</code>: \u067e\u0631\u0686\u0645\u06cc \u06a9\u0647 \u062d\u0630\u0641 \u062e\u0648\u062f\u06a9\u0627\u0631 \u0646\u0642\u0637\u0647 \u0648\u0631\u0648\u062f\u06cc \u062f\u0631 \u0637\u0648\u0644 \u067e\u0631\u062f\u0627\u0632\u0634 \u0631\u0627 \u062a\u0646\u0638\u06cc\u0645 \u0645\u06cc\u200c\u06a9\u0646\u062f.</li> <li><code>exceptionHandlingStrategy</code>: \u0627\u0633\u062a\u0631\u0627\u062a\u0698\u06cc \u0628\u0631\u0627\u06cc \u0645\u062f\u06cc\u0631\u06cc\u062a \u0627\u0633\u062a\u062b\u0646\u0627\u0647\u0627 \u0631\u0627 \u062a\u0639\u0631\u06cc\u0641 \u0645\u06cc\u200c\u06a9\u0646\u062f.<ul> <li><code>CollectToChannel</code> - \u062c\u0645\u0639\u200c\u0622\u0648\u0631\u06cc \u0628\u0647 <code>TgUpdateHandler.caughtExceptions</code>.</li> <li><code>Throw</code> - \u062f\u0648\u0628\u0627\u0631\u0647 \u067e\u0631\u062a\u0627\u0628 \u0628\u0627 \u0644\u0641\u0627\u0641 <code>TgException</code>.</li> <li><code>DoNothing</code> - \u0647\u06cc\u0686 \u06a9\u0627\u0631\u06cc \u0627\u0646\u062c\u0627\u0645 \u0646\u062f\u0647 :)</li> <li><code>Handle</code> - \u062a\u0646\u0638\u06cc\u0645 \u06a9\u0646\u0646\u062f\u0647 \u0633\u0641\u0627\u0631\u0634\u06cc.</li> </ul> </li> <li><code>throwExOnActionsFailure</code>: \u0627\u0633\u062a\u062b\u0646\u0627 \u067e\u0631\u062a\u0627\u0628 \u0645\u06cc\u200c\u06a9\u0646\u062f \u0648\u0642\u062a\u06cc \u0647\u0631 \u062f\u0631\u062e\u0648\u0627\u0633\u062a \u0631\u0628\u0627\u062a\u06cc \u0634\u06a9\u0633\u062a \u0645\u06cc\u200c\u062e\u0648\u0631\u062f.</li> </ul>"},{"location":"fa/Bot-configuration/#configuration-blocks","title":"Configuration Blocks","text":"<p><code>BotConfiguration</code> \u0647\u0645\u0686\u0646\u06cc\u0646 \u062a\u0648\u0627\u0628\u0639\u06cc \u0628\u0631\u0627\u06cc \u067e\u06cc\u06a9\u0631\u0628\u0646\u062f\u06cc \u06a9\u0627\u0645\u067e\u0648\u0646\u0646\u062a\u200c\u0647\u0627\u06cc \u062f\u0631\u0648\u0646\u06cc \u062e\u0648\u062f \u0627\u0631\u0627\u0626\u0647 \u0645\u06cc\u200c\u062f\u0647\u062f:</p> <ul> <li><code>httpClient(block: HttpConfiguration.() -&gt; Unit)</code>: \u06a9\u0644\u0627\u06cc\u0646\u062a HTTP \u0631\u0627 \u067e\u06cc\u06a9\u0631\u0628\u0646\u062f\u06cc \u0645\u06cc\u200c\u06a9\u0646\u062f.</li> <li><code>logging(block: LoggingConfiguration.() -&gt; Unit)</code>: \u0644\u0627\u06af\u06cc\u0646\u06af \u0631\u0627 \u067e\u06cc\u06a9\u0631\u0628\u0646\u062f\u06cc \u0645\u06cc\u200c\u06a9\u0646\u062f.</li> <li><code>rateLimiter(block: RateLimiterConfiguration.() -&gt; Unit)</code>: \u0645\u062d\u062f\u0648\u062f\u06cc\u062a \u062f\u0631\u062e\u0648\u0627\u0633\u062a \u0631\u0627 \u067e\u06cc\u06a9\u0631\u0628\u0646\u062f\u06cc \u0645\u06cc\u200c\u06a9\u0646\u062f.</li> <li><code>updatesListener(block: UpdatesListenerConfiguration.() -&gt; Unit)</code>: \u06af\u0648\u0634\u200c\u062f\u0647\u0646\u062f\u0647 \u0622\u067e\u062f\u06cc\u062a\u200c\u0647\u0627 \u0631\u0627 \u067e\u06cc\u06a9\u0631\u0628\u0646\u062f\u06cc \u0645\u06cc\u200c\u06a9\u0646\u062f.</li> <li><code>commandParsing(block: CommandParsingConfiguration.() -&gt; Unit)</code>: \u0627\u0644\u06af\u0648\u06cc \u062a\u062c\u0632\u06cc\u0647 \u062f\u0633\u062a\u0648\u0631\u0627\u062a \u0631\u0627 \u0645\u0634\u062e\u0635 \u0645\u06cc\u200c\u06a9\u0646\u062f.</li> </ul>"},{"location":"fa/Bot-configuration/#_1","title":"\u06a9\u0644\u0627\u0633\u200c\u0647\u0627\u06cc \u067e\u06cc\u06a9\u0631\u0628\u0646\u062f\u06cc \u0645\u0631\u062a\u0628\u0637","text":""},{"location":"fa/Bot-configuration/#ratelimiterconfiguration","title":"RateLimiterConfiguration","text":"<p>\u0645\u062d\u062f\u0648\u062f\u06cc\u062a \u0646\u0631\u062e \u062c\u0647\u0627\u0646\u06cc \u0631\u0627 \u067e\u06cc\u06a9\u0631\u0628\u0646\u062f\u06cc \u0645\u06cc\u200c\u06a9\u0646\u062f.</p> <ul> <li><code>limits</code>: \u0645\u062d\u062f\u0648\u062f\u06cc\u062a\u200c\u0647\u0627\u06cc \u0646\u0631\u062e \u062c\u0647\u0627\u0646\u06cc.</li> <li><code>mechanism</code>: \u0645\u06a9\u0627\u0646\u06cc\u0632\u0645\u06cc \u06a9\u0647 \u0628\u0631\u0627\u06cc \u0645\u062d\u062f\u0648\u062f\u06cc\u062a \u0646\u0631\u062e \u0627\u0633\u062a\u0641\u0627\u062f\u0647 \u0645\u06cc\u200c\u0634\u0648\u062f\u060c \u067e\u06cc\u0634\u200c\u0641\u0631\u0636 \u0627\u0644\u06af\u0648\u0631\u06cc\u062a\u0645 TokenBucket \u0627\u0633\u062a.</li> <li><code>exceededAction</code>: \u0639\u0645\u0644\u06cc \u06a9\u0647 \u0632\u0645\u0627\u0646\u06cc \u0627\u0639\u0645\u0627\u0644 \u0645\u06cc\u200c\u0634\u0648\u062f \u06a9\u0647 \u0645\u062d\u062f\u0648\u062f\u06cc\u062a \u062a\u062c\u0627\u0648\u0632 \u0634\u0648\u062f.</li> </ul>"},{"location":"fa/Bot-configuration/#httpconfiguration","title":"HttpConfiguration","text":"<p>\u062a\u0646\u0638\u06cc\u0645\u0627\u062a \u06a9\u0644\u0627\u06cc\u0646\u062a HTTP \u0631\u0628\u0627\u062a \u0631\u0627 \u0634\u0627\u0645\u0644 \u0645\u06cc\u200c\u0634\u0648\u062f.</p> <ul> <li><code>requestTimeoutMillis</code>: \u0645\u0647\u0644\u062a \u062f\u0631\u062e\u0648\u0627\u0633\u062a \u0628\u0647 \u0645\u06cc\u0644\u06cc\u200c\u062b\u0627\u0646\u06cc\u0647.</li> <li><code>connectTimeoutMillis</code>: \u0645\u0647\u0644\u062a \u0627\u062a\u0635\u0627\u0644 \u0628\u0647 \u0645\u06cc\u0644\u06cc\u200c\u062b\u0627\u0646\u06cc\u0647.</li> <li><code>socketTimeoutMillis</code>: \u0645\u0647\u0644\u062a \u0633\u0648\u06a9\u062a \u0628\u0647 \u0645\u06cc\u0644\u06cc\u200c\u062b\u0627\u0646\u06cc\u0647.</li> <li><code>maxRequestRetry</code>: \u062d\u062f\u0627\u06a9\u062b\u0631 \u062a\u0644\u0627\u0634 \u0628\u0631\u0627\u06cc \u062f\u0631\u062e\u0648\u0627\u0633\u062a\u200c\u0647\u0627\u06cc HTTP.</li> <li><code>retryStrategy</code>: \u0627\u0633\u062a\u0631\u0627\u062a\u0698\u06cc \u0628\u0631\u0627\u06cc \u062a\u0644\u0627\u0634 \u0645\u062c\u062f\u062f\u060c \u0642\u0627\u0628\u0644 \u0633\u0641\u0627\u0631\u0634\u06cc\u200c\u0633\u0627\u0632\u06cc.</li> <li><code>retryDelay</code>: \u0636\u0631\u06cc\u0628 \u0628\u0631\u0627\u06cc timeout \u062f\u0631 \u0647\u0631 \u062a\u0644\u0627\u0634 \u0645\u062c\u062f\u062f.</li> <li><code>proxy</code>: \u062a\u0646\u0638\u06cc\u0645\u0627\u062a \u067e\u0631\u0648\u06a9\u0633\u06cc \u0628\u0631\u0627\u06cc \u062a\u0645\u0627\u0633\u200c\u0647\u0627\u06cc HTTP.</li> <li><code>additionalHeaders</code>: \u0647\u062f\u0631\u0647\u0627\u06cc\u06cc \u06a9\u0647 \u0628\u0647 \u0647\u0631 \u062f\u0631\u062e\u0648\u0627\u0633\u062a \u0627\u0639\u0645\u0627\u0644 \u0645\u06cc\u200c\u0634\u0648\u0646\u062f.</li> </ul>"},{"location":"fa/Bot-configuration/#loggingconfiguration","title":"LoggingConfiguration","text":"<p>\u0633\u0637\u062d \u0644\u0627\u06af\u06cc\u0646\u06af \u0631\u0627 \u0628\u0631\u0627\u06cc \u0627\u0642\u062f\u0627\u0645\u0627\u062a \u0631\u0628\u0627\u062a \u0648 \u062f\u0631\u062e\u0648\u0627\u0633\u062a\u200c\u0647\u0627\u06cc HTTP \u0645\u062f\u06cc\u0631\u06cc\u062a \u0645\u06cc\u200c\u06a9\u0646\u062f.</p> <ul> <li><code>botLogLevel</code>: \u0633\u0637\u062d \u0644\u0627\u06af\u200c\u0647\u0627 \u0628\u0631\u0627\u06cc \u0627\u0642\u062f\u0627\u0645\u0627\u062a \u0631\u0628\u0627\u062a.</li> <li><code>httpLogLevel</code>: \u0633\u0637\u062d \u0644\u0627\u06af\u200c\u0647\u0627 \u0628\u0631\u0627\u06cc \u062f\u0631\u062e\u0648\u0627\u0633\u062a\u200c\u0647\u0627\u06cc HTTP.</li> </ul>"},{"location":"fa/Bot-configuration/#updateslistenerconfiguration","title":"UpdatesListenerConfiguration","text":"<p>\u067e\u0627\u0631\u0627\u0645\u062a\u0631\u0647\u0627\u06cc \u0645\u0631\u0628\u0648\u0637 \u0628\u0647 \u06a9\u0634\u06cc\u062f\u0646 \u0622\u067e\u062f\u06cc\u062a\u200c\u0647\u0627 \u0631\u0627 \u067e\u06cc\u06a9\u0631\u0628\u0646\u062f\u06cc \u0645\u06cc\u200c\u06a9\u0646\u062f.</p> <ul> <li><code>dispatcher</code>: dispatcher \u0628\u0631\u0627\u06cc \u062c\u0645\u0639\u200c\u0622\u0648\u0631\u06cc \u0622\u067e\u062f\u06cc\u062a\u200c\u0647\u0627\u06cc \u0648\u0631\u0648\u062f\u06cc.</li> <li><code>processingDispatcher</code>: dispatcher \u0628\u0631\u0627\u06cc \u067e\u0631\u062f\u0627\u0632\u0634 \u0622\u067e\u062f\u06cc\u062a\u200c\u0647\u0627.</li> <li><code>pullingDelay</code>: \u062a\u0627\u062e\u06cc\u0631 \u0628\u0639\u062f \u0627\u0632 \u0647\u0631 \u062f\u0631\u062e\u0648\u0627\u0633\u062a \u06a9\u0634\u06cc\u062f\u0646.</li> <li><code>updatesPollingTimeout</code>: \u06af\u0632\u06cc\u0646\u0647 timeout \u0628\u0631\u0627\u06cc \u0645\u06a9\u0627\u0646\u06cc\u0632\u0645 long-polling.</li> </ul>"},{"location":"fa/Bot-configuration/#commandparsingconfiguration","title":"CommandParsingConfiguration","text":"<p>\u067e\u0627\u0631\u0627\u0645\u062a\u0631\u0647\u0627\u06cc\u06cc \u0628\u0631\u0627\u06cc \u062a\u062c\u0632\u06cc\u0647 \u062f\u0633\u062a\u0648\u0631\u0627\u062a \u0631\u0627 \u0645\u0634\u062e\u0635 \u0645\u06cc\u200c\u06a9\u0646\u062f.</p> <ul> <li><code>commandDelimiter</code>: \u062c\u062f\u0627\u06a9\u0646\u0646\u062f\u0647 \u0628\u06cc\u0646 \u062f\u0633\u062a\u0648\u0631 \u0648 \u067e\u0627\u0631\u0627\u0645\u062a\u0631\u0647\u0627.</li> <li><code>parametersDelimiter</code>: \u062c\u062f\u0627\u06a9\u0646\u0646\u062f\u0647 \u0628\u06cc\u0646 \u067e\u0627\u0631\u0627\u0645\u062a\u0631\u0647\u0627.</li> <li><code>parameterValueDelimiter</code>: \u062c\u062f\u0627\u06a9\u0646\u0646\u062f\u0647 \u0628\u06cc\u0646 \u06a9\u0644\u06cc\u062f \u0648 \u0645\u0642\u062f\u0627\u0631 \u067e\u0627\u0631\u0627\u0645\u062a\u0631.</li> <li><code>restrictSpacesInCommands</code>: \u067e\u0631\u0686\u0645\u06cc \u06a9\u0647 \u0646\u0634\u0627\u0646 \u0645\u06cc\u200c\u062f\u0647\u062f \u0622\u06cc\u0627 \u0641\u0636\u0627\u0647\u0627\u06cc \u062f\u0631 \u062f\u0633\u062a\u0648\u0631\u0627\u062a \u0628\u0627\u06cc\u062f \u0628\u0647 \u0639\u0646\u0648\u0627\u0646 \u067e\u0627\u06cc\u0627\u0646 \u062f\u0633\u062a\u0648\u0631 \u062f\u0631 \u0646\u0638\u0631 \u06af\u0631\u0641\u062a\u0647 \u0634\u0648\u0646\u062f.</li> <li><code>useIdentifierInGroupCommands</code>: \u0627\u0632 \u0634\u0646\u0627\u0633\u0647 \u0631\u0628\u0627\u062a \u0628\u0631\u0627\u06cc \u0645\u0637\u0627\u0628\u0642\u062a \u062f\u0633\u062a\u0648\u0631\u0627\u062a \u062d\u0627\u0648\u06cc @ \u0627\u0633\u062a\u0641\u0627\u062f\u0647 \u0645\u06cc\u200c\u06a9\u0646\u062f.</li> </ul>"},{"location":"fa/Bot-configuration/#_2","title":"\u0645\u062b\u0627\u0644 \u067e\u06cc\u06a9\u0631\u0628\u0646\u062f\u06cc","text":"<p>\u062f\u0631 \u0627\u06cc\u0646\u062c\u0627 \u0645\u062b\u0627\u0644\u06cc \u0627\u0632 \u0646\u062d\u0648\u0647 \u067e\u06cc\u06a9\u0631\u0628\u0646\u062f\u06cc \u0631\u0628\u0627\u062a \u0628\u0627 \u0627\u0633\u062a\u0641\u0627\u062f\u0647 \u0627\u0632 \u0627\u06cc\u0646 \u06a9\u0644\u0627\u0633\u200c\u0647\u0627 \u0622\u0648\u0631\u062f\u0647 \u0634\u062f\u0647 \u0627\u0633\u062a:</p> <pre><code>val bot = TelegramBot(\"TOKEN\") {\n    identifier = \"MyBot\",\n    apiHost = \"https://api.telegram.org\",\n    isTestEnv = true,\n    inputListener = InputListenerMapImpl(),\n    classManager = ClassManagerImpl(),\n\n    httpClient {\n        requestTimeoutMillis = 5000L\n        connectTimeoutMillis = 3000L\n        socketTimeoutMillis = 2000L\n    }\n    logging {\n        botLogLevel = LogLvl.DEBUG\n        httpLogLevel = HttpLogLevel.BODY\n    }\n    updatesListener {\n        dispatcher = Dispatchers.IO\n        processingDispatcher = Dispatchers.Unconfined\n        pullingDelay = 1000L\n    }\n    commandParsing {\n        commandDelimiter = '*'\n        parametersDelimiter = '&amp;'\n        restrictSpacesInCommands = true\n    }\n}\n</code></pre> <p>\u0627\u06cc\u0646 \u067e\u06cc\u06a9\u0631\u0628\u0646\u062f\u06cc \u0631\u0628\u0627\u062a\u06cc \u0628\u0627 \u0634\u0646\u0627\u0633\u0647\u200c\u0647\u0627\u06cc \u062e\u0627\u0635\u060c \u062d\u0627\u0644\u062a \u0645\u062d\u06cc\u0637 \u0622\u0632\u0645\u0627\u06cc\u0634\u06cc \u0631\u0627 \u0641\u0639\u0627\u0644\u060c \u0645\u062d\u062f\u0648\u062f\u06cc\u062a \u0646\u0631\u062e \u0631\u0627 \u067e\u06cc\u06a9\u0631\u0628\u0646\u062f\u06cc\u060c \u062a\u0646\u0638\u06cc\u0645\u0627\u062a \u06a9\u0644\u0627\u06cc\u0646\u062a HTTP\u060c \u0633\u0637\u0648\u062d \u0644\u0627\u06af\u06cc\u0646\u06af\u060c \u067e\u0627\u0631\u0627\u0645\u062a\u0631\u0647\u0627\u06cc \u06af\u0648\u0634\u200c\u062f\u0647\u0646\u062f\u0647 \u0622\u067e\u062f\u06cc\u062a \u0648 \u0642\u0648\u0627\u0646\u06cc\u0646 \u062a\u062c\u0632\u06cc\u0647 \u062f\u0633\u062a\u0648\u0631\u0627\u062a \u0631\u0627 \u062a\u0646\u0638\u06cc\u0645 \u0645\u06cc\u200c\u06a9\u0646\u062f.</p> <p>\u0628\u0627 \u0628\u0647\u0631\u0647\u200c\u0628\u0631\u062f\u0646 \u0627\u0632 \u0627\u06cc\u0646 \u06af\u0632\u06cc\u0646\u0647\u200c\u0647\u0627\u06cc \u067e\u06cc\u06a9\u0631\u0628\u0646\u062f\u06cc\u060c \u062a\u0648\u0633\u0639\u0647\u200c\u062f\u0647\u0646\u062f\u06af\u0627\u0646 \u0645\u06cc\u200c\u062a\u0648\u0627\u0646\u0646\u062f \u0631\u0628\u0627\u062a\u200c\u0647\u0627\u06cc \u062e\u0648\u062f \u0631\u0627 \u0628\u0631\u0627\u06cc \u0628\u0631\u0622\u0648\u0631\u062f\u0647 \u06a9\u0631\u062f\u0646 \u0646\u06cc\u0627\u0632\u0647\u0627\u06cc \u062e\u0627\u0635 \u0648 \u0628\u0647\u06cc\u0646\u0647\u200c\u0633\u0627\u0632\u06cc \u0639\u0645\u0644\u06a9\u0631\u062f \u062f\u0631 \u0633\u0646\u0627\u0631\u06cc\u0648\u0647\u0627\u06cc \u0639\u0645\u0644\u06cc\u0627\u062a\u06cc \u0645\u062e\u062a\u0644\u0641 \u062a\u0646\u0638\u06cc\u0645 \u06a9\u0646\u0646\u062f.</p>"},{"location":"fa/F.A.Q/#abstractmethoderror","title":"\u0627\u0633\u062a\u062b\u0646\u0627 <code>AbstractMethodError</code>","text":"<p>\u0627\u06af\u0631 \u062f\u0631 \u0632\u0645\u0627\u0646 \u0634\u0631\u0648\u0639 \u0628\u0631\u0646\u0627\u0645\u0647 \u062e\u0648\u062f \u0628\u0627 \u0627\u06cc\u0646 \u0627\u0633\u062a\u062b\u0646\u0627 \u0645\u0648\u0627\u062c\u0647 \u0634\u062f\u06cc\u062f:</p> <pre><code>Exception in thread \"DefaultDispatcher-worker-1\" java.lang.AbstractMethodError: 'kotlinx.serialization.KSerializer[] kotlinx.serialization.internal.GeneratedSerializer.typeParametersSerializers()'\n    at eu.vendeli.tgbot.types.options.GetUpdatesOptions$$serializer.typeParametersSerializers(GetUpdatesOptions.kt:6)\n</code></pre> <p>\u0627\u06cc\u0646 \u0627\u062a\u0641\u0627\u0642 \u0628\u0647 \u062f\u0644\u06cc\u0644 \u0627\u0633\u062a\u0641\u0627\u062f\u0647 \u06a9\u062a\u0627\u0628\u062e\u0627\u0646\u0647 \u0633\u0627\u0632\u06cc \u0642\u062f\u06cc\u0645\u06cc serialization \u062a\u0648\u0633\u0637 \u0633\u06cc\u0633\u062a\u0645 \u0633\u0627\u062e\u062a \u0634\u0645\u0627 \u0631\u062e \u0645\u06cc\u200c\u062f\u0647\u062f \u06a9\u0647 \u0645\u06a9\u0627\u0646\u06cc\u0632\u0645 \u062f\u0627\u062e\u0644\u06cc \u0622\u0646 \u0645\u062a\u0641\u0627\u0648\u062a \u0627\u0633\u062a. \u0628\u0631\u0627\u06cc \u062d\u0644 \u0627\u06cc\u0646 \u0645\u0634\u06a9\u0644 \u0628\u0627\u06cc\u062f \u0627\u0632 \u0646\u0633\u062e\u0647\u200c\u0627\u06cc \u062c\u062f\u06cc\u062f\u062a\u0631 \u0627\u0633\u062a\u0641\u0627\u062f\u0647 \u06a9\u0646\u06cc\u062f\u060c \u0628\u0631\u0627\u06cc \u0645\u062b\u0627\u0644 \u0628\u0627 \u0627\u0636\u0627\u0641\u0647 \u06a9\u0631\u062f\u0646 \u0627\u06cc\u0646 \u06a9\u062f \u0628\u0647 buildscript:</p> <pre><code>configurations.all {\n    resolutionStrategy.eachDependency {\n        val serdeVer = \"x.x.x\" // \u0628\u0627\u06cc\u062f &gt;= 1.8.0 \u0628\u0627\u0634\u062f\n        when(requested.module.toString()) {\n            // json serialiazaton\n            \"org.jetbrains.kotlinx:kotlinx-serialization-json\" -&gt; useVersion(serdeVer)\n            \"org.jetbrains.kotlinx:kotlinx-serialization-json-jvm\" -&gt; useVersion(serdeVer)\n            \"org.jetbrains.kotlinx:kotlinx-serialization-core\" -&gt; useVersion(serdeVer)\n            \"org.jetbrains.kotlinx:kotlinx-serialization-core-jvm\" -&gt; useVersion(serdeVer)\n            \"org.jetbrains.kotlinx:kotlinx-serialization-bom\" -&gt; useVersion(serdeVer)\n        }\n    }\n}\n</code></pre> <p>(\u0627\u06af\u0631 \u0627\u06cc\u0646 \u0645\u0648\u0636\u0648\u0639 \u062f\u0631 log \u0686\u0627\u0628\u06a9 \u062a\u0648\u0636\u06cc\u062d \u062f\u0627\u062f\u0647 \u0634\u062f\u0647 \u0628\u0648\u062f\u060c \u0645\u0646 \u0647\u0631\u06af\u0632 \u0627\u0631\u062a\u0642\u0627 \u0646\u0645\u06cc\u200c\u062f\u0627\u062f\u0645 \u0686\u0648\u0646 \u0686\u0646\u06cc\u0646 \u062a\u0639\u062f\u0627\u062f \u0632\u06cc\u0627\u062f\u06cc \u06af\u0632\u0627\u0631\u0634 \u062f\u0631 \u0645\u0648\u0631\u062f \u0627\u06cc\u0646 \u0645\u0634\u06a9\u0644 \u062f\u0631\u06cc\u0627\u0641\u062a \u0645\u06cc\u200c\u06a9\u0646\u0645)</p>"},{"location":"fa/F.A.Q/#_1","title":"\u0686\u06af\u0648\u0646\u0647 \u067e\u0627\u0633\u062e \u0645\u062a\u062f \u0631\u0627 \u062f\u0631\u06cc\u0627\u0641\u062a \u06a9\u0646\u0645\u061f","text":"<p>\u0628\u0631\u0627\u06cc \u062f\u0631\u06cc\u0627\u0641\u062a \u067e\u0627\u0633\u062e \u0648 \u0642\u0627\u0628\u0644\u06cc\u062a \u0639\u0645\u0644 \u0628\u0631 \u0631\u0648\u06cc \u0622\u0646\u060c \u0628\u0627\u06cc\u062f \u062f\u0631 \u0627\u0646\u062a\u0647\u0627\u06cc \u0645\u062a\u062f \u0627\u0632 <code>sendReturning</code> \u0627\u0633\u062a\u0641\u0627\u062f\u0647 \u06a9\u0646\u06cc\u062f \u0628\u0647 \u062c\u0627\u06cc <code>send</code>.</p> <p>\u062f\u0631 \u0627\u06cc\u0646 \u062d\u0627\u0644\u062a \u06a9\u0644\u0627\u0633 <code>Response</code> \u0628\u0631\u06af\u0631\u062f\u0627\u0646\u062f\u0647 \u0645\u06cc\u200c\u0634\u0648\u062f \u06a9\u0647 \u0634\u0627\u0645\u0644 \u067e\u0627\u0633\u062e\u060c \u0645\u0648\u0641\u0642 \u06cc\u0627 \u0646\u0627\u0645\u0648\u0641\u0642 \u0627\u0633\u062a \u0648 \u0634\u0645\u0627 \u0628\u0627\u06cc\u062f \u06cc\u0627 \u0646\u0627\u062a\u0648\u0627\u0646\u06cc \u0631\u0627 \u0645\u062f\u06cc\u0631\u06cc\u062a \u06a9\u0646\u06cc\u062f \u06cc\u0627 \u0641\u0642\u0637 <code>getOrNull()</code> \u0631\u0627 \u0635\u062f\u0627 \u0628\u0632\u0646\u06cc\u062f.</p> <p>\u0628\u062e\u0634\u06cc \u062f\u0631 \u0645\u0648\u0631\u062f: \u067e\u0631\u062f\u0627\u0632\u0634 \u067e\u0627\u0633\u062e\u200c\u0647\u0627 \u0648\u062c\u0648\u062f \u062f\u0627\u0631\u062f.</p>"},{"location":"fa/F.A.Q/#spring-boot-devtools","title":"\u0645\u0646 \u0647\u0646\u06af\u0627\u0645 \u0627\u0633\u062a\u0641\u0627\u062f\u0647 \u0627\u0632 <code>spring-boot-devtools</code> \u062e\u0637\u0627 \u062f\u0631\u06cc\u0627\u0641\u062a \u0645\u06cc\u200c\u06a9\u0646\u0645","text":"<p>\u0627\u06cc\u0646 \u0627\u062a\u0641\u0627\u0642 \u0628\u0647 \u0627\u06cc\u0646 \u062f\u0644\u06cc\u0644 \u0631\u062e \u0645\u06cc\u200c\u062f\u0647\u062f \u06a9\u0647 <code>spring-boot-devtools</code> \u062e\u0648\u062f\u0634 <code>classloader</code> \u062f\u0627\u0631\u062f \u0648 \u0645\u062a\u062f\u0647\u0627 \u0631\u0627 \u067e\u06cc\u062f\u0627 \u0646\u0645\u06cc\u200c\u06a9\u0646\u062f.</p> <p>\u0628\u0627\u06cc\u062f \u0628\u0647 <code>resources/META-INF/spring-devtools.properties</code> \u0627\u0636\u0627\u0641\u0647 \u06a9\u0646\u06cc\u062f:</p> <pre><code>restart.include.generated=/eu.vendeli\n</code></pre>"},{"location":"fa/F.A.Q/#ktor","title":"\u0686\u06af\u0648\u0646\u0647 \u0645\u0648\u062a\u0648\u0631 ktor \u0631\u0627 \u062a\u063a\u06cc\u06cc\u0631 \u062f\u0647\u0645","text":"<p>\u0627\u06af\u0631 \u0645\u06cc\u200c\u062e\u0648\u0627\u0647\u06cc\u062f \u0645\u0648\u062a\u0648\u0631 \u0645\u0648\u0631\u062f \u0627\u0633\u062a\u0641\u0627\u062f\u0647 \u062a\u0648\u0633\u0637 \u06a9\u0644\u0627\u06cc\u0646\u062a \u0631\u0627 \u062a\u063a\u06cc\u06cc\u0631 \u062f\u0647\u06cc\u062f\u060c \u0645\u06cc\u200c\u062a\u0648\u0627\u0646\u06cc\u062f \u0628\u0647 \u0633\u0627\u062f\u06af\u06cc \u067e\u0627\u0631\u0627\u0645\u062a\u0631 \u0631\u0627 \u062f\u0631 \u062a\u0646\u0638\u06cc\u0645\u0627\u062a \u067e\u0644\u0627\u06af\u06cc\u0646 \u062a\u063a\u06cc\u06cc\u0631 \u062f\u0647\u06cc\u062f.</p>"},{"location":"fa/F.A.Q/#logging","title":"\u0686\u06af\u0648\u0646\u0647 \u0627\u0632 \u062a\u0647\u06cc\u0647\u200c\u06a9\u0646\u0646\u062f\u0647 logging \u0645\u0648\u0631\u062f \u0639\u0644\u0627\u0642\u0647\u200c\u0627\u0645 \u0627\u0633\u062a\u0641\u0627\u062f\u0647 \u06a9\u0646\u0645","text":"<p>\u06a9\u062a\u0627\u0628\u062e\u0627\u0646\u0647 \u0627\u0632 <code>slf4j-api</code> \u0627\u0633\u062a\u0641\u0627\u062f\u0647 \u0645\u06cc\u200c\u06a9\u0646\u062f \u0648 \u0628\u0631\u0627\u06cc \u0627\u0633\u062a\u0641\u0627\u062f\u0647 \u0627\u0632 \u062a\u0647\u06cc\u0647\u200c\u06a9\u0646\u0646\u062f\u0647 \u0628\u0627\u06cc\u062f \u0622\u0646 \u0631\u0627 \u0628\u0647 \u0648\u0627\u0628\u0633\u062a\u06af\u06cc\u200c\u0647\u0627 \u0627\u0636\u0627\u0641\u0647 \u06a9\u0646\u06cc\u062f.</p> <p>\u067e\u0644\u0627\u06af\u06cc\u0646 \u06a9\u062a\u0627\u0628\u062e\u0627\u0646\u0647 \u0628\u0647 \u0637\u0648\u0631 \u062e\u0648\u062f\u06a9\u0627\u0631 \u0627\u0633\u062a\u0641\u0627\u062f\u0647 \u0627\u0632 \u062a\u0647\u06cc\u0647\u200c\u06a9\u0646\u0646\u062f\u0647 \u0631\u0627 \u062a\u0634\u062e\u06cc\u0635 \u0645\u06cc\u200c\u062f\u0647\u062f\u060c \u0627\u06af\u0631 \u062a\u0647\u06cc\u0647\u200c\u06a9\u0646\u0646\u062f\u0647 \u0648\u062c\u0648\u062f \u0646\u062f\u0627\u0634\u062a\u060c <code>logback</code> \u0628\u0647 \u0637\u0648\u0631 \u067e\u06cc\u0634\u200c\u0641\u0631\u0636 \u0627\u0633\u062a\u0641\u0627\u062f\u0647 \u0645\u06cc\u200c\u0634\u0648\u062f.</p>"},{"location":"fa/F.A.Q/#handler-long-polling","title":"\u06af\u0631\u0641\u062a\u0646 \u0627\u0633\u062a\u062b\u0646\u0627\u200c\u0647\u0627\u06cc \u0634\u0628\u06a9\u0647 \u062f\u0631\u0648\u0646 handler long-polling","text":"<p>\u0628\u0631\u0627\u06cc \u0645\u062b\u0627\u0644 \u0627\u06af\u0631 \u0627\u062a\u0635\u0627\u0644 \u0646\u0627\u067e\u0627\u06cc\u062f\u0627\u0631\u06cc \u062f\u0627\u0631\u06cc\u062f \u0648 \u0646\u06cc\u0627\u0632 \u0628\u0647 \u06af\u0631\u0641\u062a\u0646 \u062e\u0637\u0627 \u0628\u0647 \u062f\u0644\u06cc\u0644 \u0622\u0646 \u062f\u0627\u0631\u06cc\u062f\u060c \u0634\u0627\u06cc\u062f \u0627\u06cc\u0646 \u0631\u0648\u06cc\u06a9\u0631\u062f \u0628\u0647 \u0634\u0645\u0627 \u06a9\u0645\u06a9 \u06a9\u0646\u062f:</p> <pre><code>fun main() {\n    val bot = TelegramBot(\"TOKEN\")\n\n    try {\n        bot.handleUpdates()\n    } catch (e: Exception) {\n        // \u0645\u062f\u06cc\u0631\u06cc\u062a \u062f\u0631 \u0635\u0648\u0631\u062a \u0646\u06cc\u0627\u0632\n\n        bot.update.stopListener()\n        bot.handleUpdates()\n    }\n}\n</code></pre> <p>\u0647\u0645\u0686\u0646\u06cc\u0646 \u0645\u06cc\u200c\u062a\u0648\u0627\u0646\u06cc\u062f \u0646\u06af\u0627\u0647\u06cc \u0628\u06cc\u0646\u062f\u0627\u0632\u06cc\u062f \u06a9\u0647 \u0686\u06af\u0648\u0646\u0647 \u062f\u0631 spring-starter \u0627\u0646\u062c\u0627\u0645 \u0634\u062f\u0647 \u0627\u0633\u062a.</p>"},{"location":"fa/FSM-and-Conversation-handling/","title":"FSM and Conversation handling","text":"<p>\u06a9\u062a\u0627\u0628\u062e\u0627\u0646\u0647 \u0647\u0645\u0686\u0646\u06cc\u0646 \u0627\u0632 \u0645\u06a9\u0627\u0646\u06cc\u0632\u0645 FSM \u067e\u0634\u062a\u06cc\u0628\u0627\u0646\u06cc \u0645\u06cc\u200c\u06a9\u0646\u062f\u060c \u06a9\u0647 \u0645\u06a9\u0627\u0646\u06cc\u0632\u0645\u06cc \u0628\u0631\u0627\u06cc \u067e\u0631\u062f\u0627\u0632\u0634 \u062a\u062f\u0631\u06cc\u062c\u06cc \u0648\u0631\u0648\u062f\u06cc \u06a9\u0627\u0631\u0628\u0631 \u0628\u0627 \u0645\u062f\u06cc\u0631\u06cc\u062a \u0648\u0631\u0648\u062f\u06cc \u0646\u0627\u062f\u0631\u0633\u062a \u0627\u0633\u062a.</p> <p>Note</p> <p>TL;DR: \u0646\u0645\u0648\u0646\u0647 \u0631\u0627 \u062f\u0631 \u0627\u06cc\u0646\u062c\u0627 \u0628\u0628\u06cc\u0646\u06cc\u062f.</p>"},{"location":"fa/FSM-and-Conversation-handling/#_1","title":"\u062f\u0631 \u062a\u0626\u0648\u0631\u06cc","text":"<p>\u0628\u06cc\u0627\u06cc\u06cc\u062f \u06cc\u06a9 \u0645\u0648\u0642\u0639\u06cc\u062a \u0631\u0627 \u062a\u0635\u0648\u0631 \u06a9\u0646\u06cc\u0645 \u06a9\u0647 \u0634\u0645\u0627 \u0646\u06cc\u0627\u0632 \u0628\u0647 \u062c\u0645\u0639\u200c\u0622\u0648\u0631\u06cc \u06cc\u06a9 \u0646\u0638\u0631\u0633\u0646\u062c\u06cc \u0627\u0632 \u06a9\u0627\u0631\u0628\u0631 \u062f\u0627\u0631\u06cc\u062f\u060c \u0645\u06cc\u200c\u062a\u0648\u0627\u0646\u06cc\u062f \u062a\u0645\u0627\u0645 \u062f\u0627\u062f\u0647\u200c\u0647\u0627\u06cc \u06cc\u06a9 \u0634\u062e\u0635 \u0631\u0627 \u062f\u0631 \u06cc\u06a9 \u0645\u0631\u062d\u0644\u0647 \u0628\u067e\u0631\u0633\u06cc\u062f\u060c \u0627\u0645\u0627 \u0628\u0627 \u0648\u0631\u0648\u062f\u06cc \u0646\u0627\u062f\u0631\u0633\u062a \u06cc\u06a9\u06cc \u0627\u0632 \u067e\u0627\u0631\u0627\u0645\u062a\u0631\u0647\u0627\u060c \u0647\u0645 \u0628\u0631\u0627\u06cc \u06a9\u0627\u0631\u0628\u0631 \u0648 \u0647\u0645 \u0628\u0631\u0627\u06cc \u0645\u0627 \u062f\u0634\u0648\u0627\u0631 \u062e\u0648\u0627\u0647\u062f \u0628\u0648\u062f\u060c \u0648 \u0647\u0631 \u0645\u0631\u062d\u0644\u0647 \u0645\u0645\u06a9\u0646 \u0627\u0633\u062a \u0645\u062a\u0641\u0627\u0648\u062a \u0628\u0627\u0634\u062f \u0628\u0633\u062a\u0647 \u0628\u0647 \u062f\u0627\u062f\u0647\u200c\u0647\u0627\u06cc \u0648\u0631\u0648\u062f\u06cc \u062e\u0627\u0635.</p> <p>\u062d\u0627\u0644 \u0628\u06cc\u0627\u06cc\u06cc\u062f \u0648\u0631\u0648\u062f\u06cc \u06af\u0627\u0645\u200c\u0628\u0647\u200c\u06af\u0627\u0645 \u062f\u0627\u062f\u0647\u200c\u0647\u0627 \u0631\u0627 \u062a\u0635\u0648\u0631 \u06a9\u0646\u06cc\u0645\u060c \u062c\u0627\u06cc\u06cc \u06a9\u0647 \u0631\u0628\u0627\u062a \u0648\u0636\u0639\u06cc\u062a \u06af\u0641\u062a\u200c\u0648\u06af\u0648 \u0628\u0627 \u06a9\u0627\u0631\u0628\u0631 \u0631\u0627 \u0648\u0627\u0631\u062f \u0645\u06cc\u200c\u06a9\u0646\u062f.</p> <p> </p> <p>\u067e\u06cc\u06a9\u0627\u0646\u200c\u0647\u0627\u06cc \u0633\u0628\u0632 \u0641\u0631\u0622\u06cc\u0646\u062f \u06af\u0630\u0627\u0631 \u0627\u0632 \u0645\u0631\u062d\u0644\u0647 \u0628\u0647 \u0645\u0631\u062d\u0644\u0647 \u0628\u062f\u0648\u0646 \u062e\u0637\u0627 \u0631\u0627 \u0646\u0634\u0627\u0646 \u0645\u06cc\u200c\u062f\u0647\u0646\u062f\u060c \u067e\u06cc\u06a9\u0627\u0646\u200c\u0647\u0627\u06cc \u0622\u0628\u06cc \u0628\u0647 \u0645\u0639\u0646\u0627\u06cc \u0630\u062e\u06cc\u0631\u0647 \u0648\u0636\u0639\u06cc\u062a \u0641\u0639\u0644\u06cc \u0648 \u0645\u0646\u062a\u0638\u0631 \u0648\u0631\u0648\u062f\u06cc \u0645\u062c\u062f\u062f \u0627\u0633\u062a (\u0628\u0631\u0627\u06cc \u0645\u062b\u0627\u0644 \u0627\u06af\u0631 \u06a9\u0627\u0631\u0628\u0631 \u0627\u0634\u0627\u0631\u0647 \u06a9\u0631\u062f \u06a9\u0647 \u0633\u0646 \u0627\u0648 -100 \u0633\u0627\u0644 \u0627\u0633\u062a\u060c \u0628\u0627\u06cc\u062f \u062f\u0648\u0628\u0627\u0631\u0647 \u0627\u0632 \u0633\u0646 \u0628\u067e\u0631\u0633\u062f)\u060c \u0648 \u0642\u0631\u0645\u0632\u0647\u0627 \u062e\u0631\u0648\u062c \u0627\u0632 \u06a9\u0644 \u0641\u0631\u0622\u06cc\u0646\u062f \u0628\u0647 \u062f\u0644\u06cc\u0644 \u0647\u0631 \u062f\u0633\u062a\u0648\u0631\u06cc \u06cc\u0627 \u0647\u0631 \u0645\u0639\u0646\u0627\u06cc \u0644\u063a\u0648 \u062f\u06cc\u06af\u0631\u06cc \u0631\u0627 \u0646\u0634\u0627\u0646 \u0645\u06cc\u200c\u062f\u0647\u0646\u062f.</p>"},{"location":"fa/FSM-and-Conversation-handling/#_2","title":"\u062f\u0631 \u0639\u0645\u0644","text":"<p>\u0633\u06cc\u0633\u062a\u0645 Wizard \u062a\u0639\u0627\u0645\u0644\u200c\u0647\u0627\u06cc \u0686\u0646\u062f\u0645\u0631\u062d\u0644\u0647\u200c\u0627\u06cc \u06a9\u0627\u0631\u0628\u0631 \u0631\u0627 \u062f\u0631 \u0631\u0628\u0627\u062a\u200c\u0647\u0627\u06cc \u062a\u0644\u06af\u0631\u0627\u0645 \u0641\u0639\u0627\u0644 \u0645\u06cc\u200c\u06a9\u0646\u062f. \u06a9\u0627\u0631\u0628\u0631\u0627\u0646 \u0631\u0627 \u0627\u0632 \u0637\u0631\u06cc\u0642 \u06cc\u06a9 \u062a\u0648\u0627\u0644\u06cc \u0645\u0631\u0627\u062d\u0644 \u0631\u0627\u0647\u0646\u0645\u0627\u06cc\u06cc \u0645\u06cc\u200c\u06a9\u0646\u062f\u060c \u0648\u0631\u0648\u062f\u06cc \u0631\u0627 \u062a\u0623\u06cc\u06cc\u062f \u0645\u06cc\u200c\u06a9\u0646\u062f\u060c \u0648\u0636\u0639\u06cc\u062a \u0631\u0627 \u0630\u062e\u06cc\u0631\u0647 \u0645\u06cc\u200c\u06a9\u0646\u062f \u0648 \u0628\u06cc\u0646 \u0645\u0631\u0627\u062d\u0644 \u06af\u0630\u0627\u0631 \u0645\u06cc\u200c\u06a9\u0646\u062f.</p> <p>\u0645\u0632\u0627\u06cc\u0627\u06cc \u06a9\u0644\u06cc\u062f\u06cc: - \u062a\u0627\u06cc\u067e \u0627\u06cc\u0645\u0646: \u0628\u0631\u0631\u0633\u06cc \u062a\u0627\u06cc\u067e \u062f\u0631 \u0632\u0645\u0627\u0646 \u06a9\u0627\u0645\u067e\u0627\u06cc\u0644 \u0628\u0631\u0627\u06cc \u062f\u0633\u062a\u0631\u0633\u06cc \u0628\u0647 \u0648\u0636\u0639\u06cc\u062a - \u0627\u0639\u0644\u0627\u0645\u06cc: \u0645\u0631\u0627\u062d\u0644 \u0631\u0627 \u0628\u0647 \u0639\u0646\u0648\u0627\u0646 \u06a9\u0644\u0627\u0633\u200c\u0647\u0627\u06cc \u062a\u0648 \u062f\u0631 \u062a\u0648 \u062a\u0639\u0631\u06cc\u0641 \u06a9\u0646\u06cc\u062f - \u0627\u0646\u0639\u0637\u0627\u0641\u200c\u067e\u0630\u06cc\u0631: \u067e\u0634\u062a\u06cc\u0628\u0627\u0646\u06cc \u0627\u0632 \u06af\u0630\u0627\u0631\u0647\u0627\u06cc \u0634\u0631\u0637\u06cc\u060c \u067e\u0631\u0634\u200c\u0647\u0627 \u0648 \u062a\u0644\u0627\u0634 \u0645\u062c\u062f\u062f - \u0648\u0636\u0639\u06cc\u062a\u200c\u062f\u0627\u0631: \u067e\u0627\u06cc\u062f\u0627\u0631\u06cc \u062e\u0648\u062f\u06a9\u0627\u0631 \u0648\u0636\u0639\u06cc\u062a \u0628\u0627 \u0630\u062e\u06cc\u0631\u0647\u200c\u0633\u0627\u0632\u06cc backend \u0642\u0627\u0628\u0644 plug-in - \u06cc\u06a9\u067e\u0627\u0631\u0686\u0647: \u0628\u0627 \u0633\u06cc\u0633\u062a\u0645 \u0641\u0639\u0627\u0644\u06cc\u062a \u0645\u0648\u062c\u0648\u062f \u06a9\u0627\u0631 \u0645\u06cc\u200c\u06a9\u0646\u062f</p>"},{"location":"fa/FSM-and-Conversation-handling/#_3","title":"\u0645\u0641\u0627\u0647\u06cc\u0645 \u067e\u0627\u06cc\u0647","text":""},{"location":"fa/FSM-and-Conversation-handling/#wizardstep","title":"WizardStep","text":"<p>\u06cc\u06a9 <code>WizardStep</code> \u06cc\u06a9 \u0645\u0631\u062d\u0644\u0647 \u0645\u0646\u0641\u0631\u062f \u062f\u0631 \u062c\u0631\u06cc\u0627\u0646 wizard \u0631\u0627 \u0646\u0634\u0627\u0646 \u0645\u06cc\u200c\u062f\u0647\u062f. \u0647\u0631 \u0645\u0631\u062d\u0644\u0647 \u0628\u0627\u06cc\u062f \u067e\u06cc\u0627\u062f\u0647\u200c\u0633\u0627\u0632\u06cc \u06a9\u0646\u062f:</p> <ul> <li><code>onEntry(ctx: WizardContext)</code>: \u0632\u0645\u0627\u0646\u06cc \u06a9\u0647 \u06a9\u0627\u0631\u0628\u0631 \u0648\u0627\u0631\u062f \u0627\u06cc\u0646 \u0645\u0631\u062d\u0644\u0647 \u0645\u06cc\u200c\u0634\u0648\u062f \u0641\u0631\u0627\u062e\u0648\u0627\u0646\u06cc \u0645\u06cc\u200c\u0634\u0648\u062f. \u0627\u0632 \u0627\u06cc\u0646 \u0628\u0631\u0627\u06cc \u062f\u0631\u062e\u0648\u0627\u0633\u062a \u0627\u0632 \u06a9\u0627\u0631\u0628\u0631 \u0627\u0633\u062a\u0641\u0627\u062f\u0647 \u06a9\u0646\u06cc\u062f.</li> <li><code>onRetry(ctx: WizardContext)</code>: \u0632\u0645\u0627\u0646\u06cc \u06a9\u0647 \u062a\u0623\u06cc\u06cc\u062f \u0646\u0627\u0645\u0648\u0641\u0642 \u0628\u0648\u062f\u0647 \u0648 \u0645\u0631\u062d\u0644\u0647 \u0628\u0627\u06cc\u062f \u062a\u0644\u0627\u0634 \u0645\u062c\u062f\u062f \u06a9\u0646\u062f \u0641\u0631\u0627\u062e\u0648\u0627\u0646\u06cc \u0645\u06cc\u200c\u0634\u0648\u062f. \u0627\u0632 \u0627\u06cc\u0646 \u0628\u0631\u0627\u06cc \u0646\u0645\u0627\u06cc\u0634 \u067e\u06cc\u0627\u0645\u200c\u0647\u0627\u06cc \u062e\u0637\u0627 \u0627\u0633\u062a\u0641\u0627\u062f\u0647 \u06a9\u0646\u06cc\u062f.</li> <li><code>validate(ctx: WizardContext): Transition</code>: \u0648\u0631\u0648\u062f\u06cc \u0641\u0639\u0644\u06cc \u0631\u0627 \u062a\u0623\u06cc\u06cc\u062f \u0645\u06cc\u200c\u06a9\u0646\u062f \u0648 \u06cc\u06a9 <code>Transition</code> \u0628\u0627\u0632 \u0645\u06cc\u200c\u06af\u0631\u062f\u0627\u0646\u062f \u06a9\u0647 \u0646\u0634\u0627\u0646 \u0645\u06cc\u200c\u062f\u0647\u062f \u0686\u0647 \u0627\u062a\u0641\u0627\u0642\u06cc \u0628\u0639\u062f \u0627\u0632 \u0622\u0646 \u0645\u06cc\u200c\u0627\u0641\u062a\u062f.</li> <li><code>store(ctx: WizardContext): Any?</code> (\u0627\u062e\u062a\u06cc\u0627\u0631\u06cc): \u0645\u0642\u062f\u0627\u0631\u06cc \u0631\u0627 \u0628\u0627\u0632 \u0645\u06cc\u200c\u06af\u0631\u062f\u0627\u0646\u062f \u06a9\u0647 \u0628\u0627\u06cc\u062f \u0628\u0631\u0627\u06cc \u0627\u06cc\u0646 \u0645\u0631\u062d\u0644\u0647 \u0630\u062e\u06cc\u0631\u0647 \u0634\u0648\u062f. <code>null</code> \u0628\u0627\u0632\u06af\u0631\u062f\u0627\u0646\u06cc\u062f \u0627\u06af\u0631 \u0645\u0631\u062d\u0644\u0647 \u0648\u0636\u0639\u06cc\u062a\u06cc \u0630\u062e\u06cc\u0631\u0647 \u0646\u06a9\u0646\u062f.</li> </ul> <pre><code>object NameStep : WizardStep(isInitial = true) {\n    override suspend fun onEntry(ctx: WizardContext) {\n        message { \"What is your name?\" }.send(ctx.user, ctx.bot)\n    }\n\n    override suspend fun onRetry(ctx: WizardContext) {\n        message { \"Name cannot be empty. Please try again.\" }.send(ctx.user, ctx.bot)\n    }\n\n    override suspend fun validate(ctx: WizardContext): Transition {\n        return if (ctx.update.text.isNullOrBlank()) {\n            Transition.Retry\n        } else {\n            Transition.Next\n        }\n    }\n\n    override suspend fun store(ctx: WizardContext): String {\n        return ctx.update.text!!\n    }\n}\n</code></pre> <p>Note</p> <p>\u0627\u06af\u0631 \u0628\u0631\u062e\u06cc \u0627\u0632 \u0645\u0631\u0627\u062d\u0644 \u0628\u0647 \u0639\u0646\u0648\u0627\u0646 \u0627\u0648\u0644\u06cc\u0647 \u0645\u0634\u062e\u0635 \u0646\u0634\u062f\u0647 \u0628\u0627\u0634\u0646\u062f -&gt; \u0627\u0648\u0644\u06cc\u0646 \u0645\u0631\u062d\u0644\u0647 \u0627\u0639\u0644\u0627\u0645 \u0634\u062f\u0647 \u0628\u0647 \u0639\u0646\u0648\u0627\u0646 \u0627\u0648\u0644\u06cc\u0647 \u062f\u0631 \u0646\u0638\u0631 \u06af\u0631\u0641\u062a\u0647 \u0645\u06cc\u200c\u0634\u0648\u062f.</p>"},{"location":"fa/FSM-and-Conversation-handling/#transition","title":"Transition","text":"<p>\u06cc\u06a9 <code>Transition</code> \u062a\u0639\u06cc\u06cc\u0646 \u0645\u06cc\u200c\u06a9\u0646\u062f \u0686\u0647 \u0627\u062a\u0641\u0627\u0642\u06cc \u0628\u0639\u062f \u0627\u0632 \u062a\u0623\u06cc\u06cc\u062f \u0645\u06cc\u200c\u0627\u0641\u062a\u062f:</p> <ul> <li><code>Transition.Next</code>: \u0628\u0647 \u0645\u0631\u062d\u0644\u0647 \u0628\u0639\u062f\u06cc \u062f\u0631 \u062a\u0648\u0627\u0644\u06cc \u0628\u0631\u0648</li> <li><code>Transition.JumpTo(step: KClass&lt;out WizardStep&gt;)</code>: \u0628\u0647 \u06cc\u06a9 \u0645\u0631\u062d\u0644\u0647 \u062e\u0627\u0635 \u067e\u0631\u0634 \u06a9\u0646</li> <li><code>Transition.Retry</code>: \u0645\u0631\u062d\u0644\u0647 \u0641\u0639\u0644\u06cc \u0631\u0627 \u062a\u0644\u0627\u0634 \u0645\u062c\u062f\u062f \u06a9\u0646 (\u062a\u0623\u06cc\u06cc\u062f \u0646\u0627\u0645\u0648\u0641\u0642 \u0628\u0648\u062f)</li> <li><code>Transition.Finish</code>: wizard \u0631\u0627 \u0628\u0647 \u067e\u0627\u06cc\u0627\u0646 \u0628\u0631\u0633\u0627\u0646</li> </ul> <pre><code>// \u067e\u0631\u0634 \u0634\u0631\u0637\u06cc \u0628\u0631 \u0627\u0633\u0627\u0633 \u0648\u0631\u0648\u062f\u06cc\noverride suspend fun validate(ctx: WizardContext): Transition {\n    val age = ctx.update.text?.toIntOrNull()\n    return when {\n        age == null -&gt; Transition.Retry\n        age &lt; 18 -&gt; Transition.JumpTo(UnderageStep::class)\n        else -&gt; Transition.Next\n    }\n}\n</code></pre>"},{"location":"fa/FSM-and-Conversation-handling/#wizardcontext","title":"WizardContext","text":"<p><code>WizardContext</code> \u062f\u0633\u062a\u0631\u0633\u06cc \u0628\u0647: - <code>user: User</code>: \u06a9\u0627\u0631\u0628\u0631 \u0641\u0639\u0644\u06cc - <code>update: ProcessedUpdate</code>: \u0622\u067e\u062f\u06cc\u062a \u0641\u0639\u0644\u06cc - <code>bot: TelegramBot</code>: \u0646\u0645\u0648\u0646\u0647 \u0631\u0628\u0627\u062a - <code>userReference: UserChatReference</code>: \u0645\u0631\u062c\u0639 \u0634\u0646\u0627\u0633\u0647 \u06a9\u0627\u0631\u0628\u0631 \u0648 \u0686\u062a \u0628\u0631\u0627\u06cc \u0630\u062e\u06cc\u0631\u0647\u200c\u0633\u0627\u0632\u06cc \u0648\u0636\u0639\u06cc\u062a</p> <p>\u0639\u0644\u0627\u0648\u0647 \u0628\u0631 \u0645\u062a\u062f\u0647\u0627\u06cc \u062f\u0633\u062a\u0631\u0633\u06cc \u0628\u0647 \u0648\u0636\u0639\u06cc\u062a \u062a\u0627\u06cc\u067e \u0627\u06cc\u0645\u0646 (\u062a\u0648\u0633\u0637 KSP \u062a\u0648\u0644\u06cc\u062f \u0645\u06cc\u200c\u0634\u0648\u062f).</p>"},{"location":"fa/FSM-and-Conversation-handling/#wizard","title":"\u062a\u0639\u0631\u06cc\u0641 \u06cc\u06a9 Wizard","text":""},{"location":"fa/FSM-and-Conversation-handling/#_4","title":"\u0633\u0627\u062e\u062a\u0627\u0631 \u067e\u0627\u06cc\u0647","text":"<p>\u06cc\u06a9 wizard \u0628\u0647 \u0639\u0646\u0648\u0627\u0646 \u06cc\u06a9 \u06a9\u0644\u0627\u0633 \u06cc\u0627 \u0634\u06cc \u0628\u0627 \u06a9\u0627\u0645\u0646\u062a <code>@WizardHandler</code> \u062a\u0639\u0631\u06cc\u0641 \u0645\u06cc\u200c\u0634\u0648\u062f:</p> <pre><code>@WizardHandler(trigger = [\"/survey\"])\nobject SurveyWizard {\n    object NameStep : WizardStep(isInitial = true) {\n        // ... \u067e\u06cc\u0627\u062f\u0647\u200c\u0633\u0627\u0632\u06cc \u0645\u0631\u062d\u0644\u0647\n    }\n\n    object AgeStep : WizardStep {\n        // ... \u067e\u06cc\u0627\u062f\u0647\u200c\u0633\u0627\u0632\u06cc \u0645\u0631\u062d\u0644\u0647\n    }\n\n    object FinishStep : WizardStep {\n        // ... \u067e\u06cc\u0627\u062f\u0647\u200c\u0633\u0627\u0632\u06cc \u0645\u0631\u062d\u0644\u0647\n    }\n}\n</code></pre>"},{"location":"fa/FSM-and-Conversation-handling/#_5","title":"\u067e\u0627\u0631\u0627\u0645\u062a\u0631\u0647\u0627\u06cc \u06a9\u0627\u0645\u0646\u062a","text":"<p><code>@WizardHandler</code> \u067e\u0630\u06cc\u0631\u0641\u062a\u0647 \u0645\u06cc\u200c\u06a9\u0646\u062f: - <code>trigger: Array&lt;String&gt;</code>: \u062f\u0633\u062a\u0648\u0631\u0627\u062a\u06cc \u06a9\u0647 wizard \u0631\u0627 \u0634\u0631\u0648\u0639 \u0645\u06cc\u200c\u06a9\u0646\u0646\u062f (\u0645\u062b\u0644\u0627\u064b <code>[\"/start\", \"/survey\"]</code>) - <code>scope: Array&lt;UpdateType&gt;</code>: \u0627\u0646\u0648\u0627\u0639 \u0622\u067e\u062f\u06cc\u062a\u200c\u0647\u0627\u06cc\u06cc \u06a9\u0647 \u06af\u0648\u0634 \u0645\u06cc\u200c\u06a9\u0646\u062f (\u067e\u06cc\u0634\u200c\u0641\u0631\u0636: <code>[UpdateType.MESSAGE]</code>) - <code>stateManagers: Array&lt;KClass&lt;out WizardStateManager&lt;*&gt;&gt;&gt;</code>: \u06a9\u0644\u0627\u0633\u200c\u0647\u0627\u06cc \u0645\u062f\u06cc\u0631 \u0648\u0636\u0639\u06cc\u062a \u0628\u0631\u0627\u06cc \u0630\u062e\u06cc\u0631\u0647\u200c\u0633\u0627\u0632\u06cc \u062f\u0627\u062f\u0647 \u0645\u0631\u0627\u062d\u0644</p>"},{"location":"fa/FSM-and-Conversation-handling/#_6","title":"\u0645\u062f\u06cc\u0631\u06cc\u062a \u0648\u0636\u0639\u06cc\u062a","text":""},{"location":"fa/FSM-and-Conversation-handling/#wizardstatemanager","title":"WizardStateManager","text":"<p>\u0648\u0636\u0639\u06cc\u062a \u0628\u0627 \u0627\u0633\u062a\u0641\u0627\u062f\u0647 \u0627\u0632 \u067e\u06cc\u0627\u062f\u0647\u200c\u0633\u0627\u0632\u06cc\u200c\u0647\u0627\u06cc <code>WizardStateManager&lt;T&gt;</code> \u0630\u062e\u06cc\u0631\u0647 \u0645\u06cc\u200c\u0634\u0648\u062f. \u0647\u0631 \u0645\u062f\u06cc\u0631 \u06cc\u06a9 \u0646\u0648\u0639 \u062e\u0627\u0635 \u0631\u0627 \u0645\u062f\u06cc\u0631\u06cc\u062a \u0645\u06cc\u200c\u06a9\u0646\u062f:</p> <pre><code>interface WizardStateManager&lt;T : Any&gt; {\n    suspend fun get(key: KClass&lt;out WizardStep&gt;, reference: UserChatReference): T?\n    suspend fun set(key: KClass&lt;out WizardStep&gt;, reference: UserChatReference, value: T)\n    suspend fun del(key: KClass&lt;out WizardStep&gt;, reference: UserChatReference)\n}\n</code></pre> <p>\u0647\u0645\u0686\u0646\u06cc\u0646 \u0628\u0628\u06cc\u0646\u06cc\u062f: MapStateManager\u060c MapStringStateManager\u060c MapIntStateManager\u060c MapLongStateManager."},{"location":"fa/FSM-and-Conversation-handling/#_7","title":"\u062a\u0637\u0628\u06cc\u0642 \u062e\u0648\u062f\u06a9\u0627\u0631","text":"<p>KSP \u0645\u0631\u0627\u062d\u0644 \u0631\u0627 \u0628\u0627 \u0645\u062f\u06cc\u0631\u0627\u0646 \u0648\u0636\u0639\u06cc\u062a \u0628\u0631 \u0627\u0633\u0627\u0633 \u0646\u0648\u0639 \u0628\u0627\u0632\u06af\u0634\u062a\u06cc <code>store()</code> \u062a\u0637\u0628\u06cc\u0642 \u0645\u06cc\u200c\u062f\u0647\u062f:</p> <pre><code>@WizardHandler(\n    trigger = [\"/survey\"],\n    stateManagers = [StringStateManager::class, IntStateManager::class]\n)\nobject SurveyWizard {\n    object NameStep : WizardStep(isInitial = true) {\n        override suspend fun store(ctx: WizardContext): String {\n            return ctx.update.text!! // \u0628\u0627 StringStateManager \u062a\u0637\u0628\u06cc\u0642 \u0645\u06cc\u200c\u062e\u0648\u0631\u062f\n        }\n    }\n\n    object AgeStep : WizardStep {\n        override suspend fun store(ctx: WizardContext): Int {\n            return ctx.update.text!!.toInt() // \u0628\u0627 IntStateManager \u062a\u0637\u0628\u06cc\u0642 \u0645\u06cc\u200c\u062e\u0648\u0631\u062f\n        }\n    }\n}\n</code></pre>"},{"location":"fa/FSM-and-Conversation-handling/#_8","title":"\u0628\u0627\u0632\u0646\u0648\u06cc\u0633\u06cc \u062a\u06a9 \u0645\u0631\u062d\u0644\u0647\u200c\u0627\u06cc","text":"<p>\u0628\u0631\u0627\u06cc \u0628\u0627\u0632\u0646\u0648\u06cc\u0633\u06cc \u0645\u062f\u06cc\u0631 \u0648\u0636\u0639\u06cc\u062a \u0628\u0631\u0627\u06cc \u06cc\u06a9 \u0645\u0631\u062d\u0644\u0647 \u062e\u0627\u0635 \u0627\u0632 <code>@WizardHandler.StateManager</code> \u0627\u0633\u062a\u0641\u0627\u062f\u0647 \u06a9\u0646\u06cc\u062f:</p> <pre><code>@WizardHandler(\n    trigger = [\"/survey\"],\n    stateManagers = [DefaultStateManager::class]\n)\nobject SurveyWizard {\n    object NameStep : WizardStep(isInitial = true) {\n        // \u0627\u0632 DefaultStateManager \u0627\u0633\u062a\u0641\u0627\u062f\u0647 \u0645\u06cc\u200c\u06a9\u0646\u062f\n    }\n\n    @WizardHandler.StateManager(CustomStateManager::class)\n    object AgeStep : WizardStep {\n        // \u0628\u0647 \u062c\u0627\u06cc \u0622\u0646 \u0627\u0632 CustomStateManager \u0627\u0633\u062a\u0641\u0627\u062f\u0647 \u0645\u06cc\u200c\u06a9\u0646\u062f\n    }\n}\n</code></pre>"},{"location":"fa/FSM-and-Conversation-handling/#_9","title":"\u062f\u0633\u062a\u0631\u0633\u06cc \u0628\u0647 \u0648\u0636\u0639\u06cc\u062a \u062a\u0627\u06cc\u067e \u0627\u06cc\u0645\u0646","text":"<p>KSP \u062a\u0648\u0627\u0628\u0639 \u06af\u0633\u062a\u0631\u0634 \u062a\u0627\u06cc\u067e \u0627\u06cc\u0645\u0646 \u0628\u0631\u0627\u06cc <code>WizardContext</code> \u0628\u0631\u0627\u06cc \u0647\u0631 \u0645\u0631\u062d\u0644\u0647\u200c\u0627\u06cc \u06a9\u0647 \u0648\u0636\u0639\u06cc\u062a \u0630\u062e\u06cc\u0631\u0647 \u0645\u06cc\u200c\u06a9\u0646\u062f \u062a\u0648\u0644\u06cc\u062f \u0645\u06cc\u200c\u06a9\u0646\u062f.</p>"},{"location":"fa/FSM-and-Conversation-handling/#_10","title":"\u062a\u0648\u0627\u0628\u0639 \u062a\u0648\u0644\u06cc\u062f \u0634\u062f\u0647","text":"<p>\u0628\u0631\u0627\u06cc \u06cc\u06a9 \u0645\u0631\u062d\u0644\u0647 \u06a9\u0647 \u06cc\u06a9 <code>String</code> \u0630\u062e\u06cc\u0631\u0647 \u0645\u06cc\u200c\u06a9\u0646\u062f:</p> <pre><code>// \u0628\u0647 \u0635\u0648\u0631\u062a \u062e\u0648\u062f\u06a9\u0627\u0631 \u062a\u0648\u0633\u0637 KSP \u062a\u0648\u0644\u06cc\u062f \u0645\u06cc\u200c\u0634\u0648\u062f\nsuspend inline fun &lt;reified S : WizardStep&gt; WizardContext.getState(): String?\nsuspend inline fun &lt;reified S : WizardStep&gt; WizardContext.setState(value: String)\nsuspend inline fun &lt;reified S : WizardStep&gt; WizardContext.delState()\n</code></pre>"},{"location":"fa/FSM-and-Conversation-handling/#_11","title":"\u0627\u0633\u062a\u0641\u0627\u062f\u0647","text":"<pre><code>object FinishStep : WizardStep {\n    override suspend fun onEntry(ctx: WizardContext) {\n        // \u062f\u0633\u062a\u0631\u0633\u06cc \u062a\u0627\u06cc\u067e \u0627\u06cc\u0645\u0646 - String? (nullable) \u0628\u0627\u0632 \u0645\u06cc\u200c\u06af\u0631\u062f\u0627\u0646\u062f\n        val name: String? = ctx.getState&lt;NameStep&gt;()\n\n        // \u062f\u0633\u062a\u0631\u0633\u06cc \u062a\u0627\u06cc\u067e \u0627\u06cc\u0645\u0646 - Int? (nullable) \u0628\u0627\u0632 \u0645\u06cc\u200c\u06af\u0631\u062f\u0627\u0646\u062f\n        val age: Int? = ctx.getState&lt;AgeStep&gt;()\n\n        val summary = buildString {\n            appendLine(\"Name: $name\")\n            appendLine(\"Age: $age\")\n        }\n\n        message { summary }.send(ctx.user, ctx.bot)\n    }\n\n    override suspend fun onRetry(ctx: WizardContext) = Unit\n\n    override suspend fun validate(ctx: WizardContext): Transition {\n        return Transition.Finish\n    }\n}\n</code></pre>"},{"location":"fa/FSM-and-Conversation-handling/#fallback","title":"\u0645\u062a\u062f\u0647\u0627\u06cc fallback","text":"<p>\u0627\u06af\u0631 \u0645\u062a\u062f\u0647\u0627\u06cc \u062a\u0627\u06cc\u067e \u0627\u06cc\u0645\u0646 \u062f\u0631 \u062f\u0633\u062a\u0631\u0633 \u0646\u0628\u0627\u0634\u0646\u062f\u060c \u0627\u0632 \u0645\u062a\u062f\u0647\u0627\u06cc fallback \u0627\u0633\u062a\u0641\u0627\u062f\u0647 \u06a9\u0646\u06cc\u062f:</p> <pre><code>// Fallback - Any? \u0628\u0627\u0632 \u0645\u06cc\u200c\u06af\u0631\u062f\u0627\u0646\u062f\nval name = ctx.getState(NameStep::class)\n\n// Fallback - Any? \u0645\u06cc\u200c\u067e\u0630\u06cc\u0631\u062f\nctx.setState(NameStep::class, \"John\")\nctx.delState(NameStep::class)\n</code></pre>"},{"location":"fa/FSM-and-Conversation-handling/#_12","title":"\u0646\u0645\u0648\u0646\u0647 \u06a9\u0627\u0645\u0644","text":""},{"location":"fa/FSM-and-Conversation-handling/#wizard_1","title":"wizard \u062b\u0628\u062a\u200c\u0646\u0627\u0645 \u06a9\u0627\u0631\u0628\u0631","text":"<pre><code>@WizardHandler(\n    trigger = [\"/register\"],\n    stateManagers = [StringStateManager::class, IntStateManager::class]\n)\nobject RegistrationWizard {\n    object NameStep : WizardStep(isInitial = true) {\n        override suspend fun onEntry(ctx: WizardContext) {\n            message { \"What is your name?\" }.send(ctx.user, ctx.bot)\n        }\n\n        override suspend fun onRetry(ctx: WizardContext) {\n            message { \"Please enter a valid name.\" }.send(ctx.user, ctx.bot)\n        }\n\n        override suspend fun validate(ctx: WizardContext): Transition {\n            val name = ctx.update.text?.trim()\n            return if (name.isNullOrBlank() || name.length &lt; 2) {\n                Transition.Retry\n            } else {\n                Transition.Next\n            }\n        }\n\n        override suspend fun store(ctx: WizardContext): String {\n            return ctx.update.text!!.trim()\n        }\n    }\n\n    object AgeStep : WizardStep {\n        override suspend fun onEntry(ctx: WizardContext) {\n            message { \"How old are you?\" }.send(ctx.user, ctx.bot)\n        }\n\n        override suspend fun onRetry(ctx: WizardContext) {\n            message { \"Please enter a valid age (must be a number).\" }.send(ctx.user, ctx.bot)\n        }\n\n        override suspend fun validate(ctx: WizardContext): Transition {\n            val age = ctx.update.text?.toIntOrNull()\n            return when {\n                age == null -&gt; Transition.Retry\n                age &lt; 0 || age &gt; 150 -&gt; Transition.Retry\n                age &lt; 18 -&gt; Transition.JumpTo(UnderageStep::class)\n                else -&gt; Transition.Next\n            }\n        }\n\n        override suspend fun store(ctx: WizardContext): Int {\n            return ctx.update.text!!.toInt()\n        }\n    }\n\n    object UnderageStep : WizardStep {\n        override suspend fun onEntry(ctx: WizardContext) {\n            message { \n                \"Sorry, you must be 18 or older to register.\" \n            }.send(ctx.user, ctx.bot)\n        }\n\n        override suspend fun onRetry(ctx: WizardContext) = Unit\n\n        override suspend fun validate(ctx: WizardContext): Transition {\n            return Transition.Finish\n        }\n    }\n\n    object ConfirmationStep : WizardStep {\n        override suspend fun onEntry(ctx: WizardContext) {\n            // \u062f\u0633\u062a\u0631\u0633\u06cc \u062a\u0627\u06cc\u067e \u0627\u06cc\u0645\u0646 \u0628\u0647 \u0648\u0636\u0639\u06cc\u062a\n            val name: String? = ctx.getState&lt;NameStep&gt;()\n            val age: Int? = ctx.getState&lt;AgeStep&gt;()\n\n            val confirmation = buildString {\n                appendLine(\"Please confirm your information:\")\n                appendLine(\"Name: $name\")\n                appendLine(\"Age: $age\")\n                appendLine()\n                appendLine(\"Reply 'yes' to confirm or 'no' to start over.\")\n            }\n\n            message { confirmation }.send(ctx.user, ctx.bot)\n        }\n\n        override suspend fun onRetry(ctx: WizardContext) {\n            message { \"Please reply 'yes' or 'no'.\" }.send(ctx.user, ctx.bot)\n        }\n\n        override suspend fun validate(ctx: WizardContext): Transition {\n            val response = ctx.update.text?.lowercase()?.trim()\n            return when (response) {\n                \"yes\" -&gt; Transition.Finish\n                \"no\" -&gt; Transition.JumpTo(NameStep::class) // \u0627\u0632 \u0646\u0648 \u0634\u0631\u0648\u0639 \u06a9\u0646\n                else -&gt; Transition.Retry\n            }\n        }\n    }\n\n    object FinishStep : WizardStep {\n        override suspend fun onEntry(ctx: WizardContext) {\n            val name: String? = ctx.getState&lt;NameStep&gt;()\n            val age: Int? = ctx.getState&lt;AgeStep&gt;()\n\n            // \u0630\u062e\u06cc\u0631\u0647 \u062f\u0631 \u062f\u06cc\u062a\u0627\u0628\u06cc\u0633\u060c \u0627\u0631\u0633\u0627\u0644 \u062a\u0623\u06cc\u06cc\u062f\u060c \u0648 \u063a\u06cc\u0631\u0647.\n            message { \n                \"Registration complete! Welcome, $name (age $age).\" \n            }.send(ctx.user, ctx.bot)\n        }\n\n        override suspend fun onRetry(ctx: WizardContext) = Unit\n\n        override suspend fun validate(ctx: WizardContext): Transition {\n            return Transition.Finish\n        }\n    }\n}\n</code></pre>"},{"location":"fa/FSM-and-Conversation-handling/#_13","title":"\u0648\u06cc\u0698\u06af\u06cc\u200c\u0647\u0627\u06cc \u067e\u06cc\u0634\u0631\u0641\u062a\u0647","text":""},{"location":"fa/FSM-and-Conversation-handling/#_14","title":"\u06af\u0630\u0627\u0631\u0647\u0627\u06cc \u0634\u0631\u0637\u06cc","text":"<p>\u0628\u0631\u0627\u06cc \u062c\u0631\u06cc\u0627\u0646\u200c\u0647\u0627\u06cc \u0634\u0631\u0637\u06cc \u0627\u0632 <code>Transition.JumpTo</code> \u0627\u0633\u062a\u0641\u0627\u062f\u0647 \u06a9\u0646\u06cc\u062f:</p> <pre><code>override suspend fun validate(ctx: WizardContext): Transition {\n    val choice = ctx.update.text?.lowercase()\n    return when (choice) {\n        \"premium\" -&gt; Transition.JumpTo(PremiumStep::class)\n        \"basic\" -&gt; Transition.JumpTo(BasicStep::class)\n        else -&gt; Transition.Retry\n    }\n}\n</code></pre>"},{"location":"fa/FSM-and-Conversation-handling/#_15","title":"\u0645\u0631\u0627\u062d\u0644 \u0628\u062f\u0648\u0646 \u0648\u0636\u0639\u06cc\u062a","text":"<p>\u0645\u0631\u0627\u062d\u0644 \u0646\u06cc\u0627\u0632\u06cc \u0628\u0647 \u0630\u062e\u06cc\u0631\u0647 \u0648\u0636\u0639\u06cc\u062a \u0646\u062f\u0627\u0631\u0646\u062f. \u0628\u0628\u0633\u06cc\u062f <code>null</code> \u0627\u0632 <code>store()</code> \u0628\u0627\u0632\u06af\u0631\u062f\u0627\u0646\u06cc\u062f (\u06cc\u0627 \u0647\u0645\u0627\u0646\u0637\u0648\u0631 \u06a9\u0647 \u0647\u0633\u062a \u0628\u06af\u0630\u0627\u0631\u06cc\u062f):</p> <pre><code>object ConfirmationStep : WizardStep {\n    override suspend fun store(ctx: WizardContext): Any? = null\n    // ... \u0628\u0642\u06cc\u0647 \u067e\u06cc\u0627\u062f\u0647\u200c\u0633\u0627\u0632\u06cc\n}\n</code></pre>"},{"location":"fa/FSM-and-Conversation-handling/#_16","title":"\u0645\u062f\u06cc\u0631\u0627\u0646 \u0648\u0636\u0639\u06cc\u062a \u0633\u0641\u0627\u0631\u0634\u06cc","text":"<p><code>WizardStateManager&lt;T&gt;</code> \u0631\u0627 \u0628\u0631\u0627\u06cc \u0630\u062e\u06cc\u0631\u0647\u200c\u0633\u0627\u0632\u06cc \u0633\u0641\u0627\u0631\u0634\u06cc (\u062f\u06cc\u062a\u0627\u0628\u06cc\u0633\u060c Redis \u0648 \u063a\u06cc\u0631\u0647) \u067e\u06cc\u0627\u062f\u0647\u200c\u0633\u0627\u0632\u06cc \u06a9\u0646\u06cc\u062f:</p> <pre><code>class DatabaseStateManager : WizardStateManager&lt;String&gt; {\n    override suspend fun get(\n        key: KClass&lt;out WizardStep&gt;,\n        reference: UserChatReference\n    ): String? {\n        // \u0627\u0632 \u062f\u06cc\u062a\u0627\u0628\u06cc\u0633 \u0628\u0627\u0631\u06af\u0630\u0627\u0631\u06cc \u06a9\u0646\n        return database.getWizardState(reference.userId, key.qualifiedName)\n    }\n\n    override suspend fun set(\n        key: KClass&lt;out WizardStep&gt;,\n        reference: UserChatReference,\n        value: String\n    ) {\n        // \u062f\u0631 \u062f\u06cc\u062a\u0627\u0628\u06cc\u0633 \u0630\u062e\u06cc\u0631\u0647 \u06a9\u0646\n        database.saveWizardState(reference.userId, key.qualifiedName, value)\n    }\n\n    override suspend fun del(\n        key: KClass&lt;out WizardStep&gt;,\n        reference: UserChatReference\n    ) {\n        // \u0627\u0632 \u062f\u06cc\u062a\u0627\u0628\u06cc\u0633 \u062d\u0630\u0641 \u06a9\u0646\n        database.deleteWizardState(reference.userId, key.qualifiedName)\n    }\n}\n</code></pre>"},{"location":"fa/FSM-and-Conversation-handling/#_17","title":"\u0686\u06af\u0648\u0646\u0647 \u062f\u0631 \u062f\u0631\u0648\u0646 \u06a9\u0627\u0631 \u0645\u06cc\u200c\u06a9\u0646\u062f","text":""},{"location":"fa/FSM-and-Conversation-handling/#_18","title":"\u062a\u0648\u0644\u06cc\u062f \u06a9\u062f","text":"<p>KSP \u062a\u0648\u0644\u06cc\u062f \u0645\u06cc\u200c\u06a9\u0646\u062f:</p> <ol> <li>WizardActivity: \u06cc\u06a9 \u067e\u06cc\u0627\u062f\u0647\u200c\u0633\u0627\u0632\u06cc \u0645\u0644\u0645\u0648\u0633 \u06a9\u0647 \u0627\u0632 <code>WizardActivity</code> \u0627\u0631\u062b \u0645\u06cc\u200c\u0628\u0631\u062f \u0628\u0627 \u0645\u0631\u0627\u062d\u0644 hardcoded</li> <li>Start Activity: \u062f\u0633\u062a\u0648\u0631 trigger \u0631\u0627 \u0645\u062f\u06cc\u0631\u06cc\u062a \u06a9\u0631\u062f\u0647 \u0648 wizard \u0631\u0627 \u0634\u0631\u0648\u0639 \u0645\u06cc\u200c\u06a9\u0646\u062f</li> <li>Input Activity: \u0648\u0631\u0648\u062f\u06cc \u06a9\u0627\u0631\u0628\u0631 \u0631\u0627 \u062f\u0631 \u062c\u0631\u06cc\u0627\u0646 wizard \u0645\u062f\u06cc\u0631\u06cc\u062a \u0645\u06cc\u200c\u06a9\u0646\u062f</li> <li>State Accessors: \u062a\u0648\u0627\u0628\u0639 \u06af\u0633\u062a\u0631\u0634 \u062a\u0627\u06cc\u067e \u0627\u06cc\u0645\u0646 \u0628\u0631\u0627\u06cc \u062f\u0633\u062a\u0631\u0633\u06cc \u0628\u0647 \u0648\u0636\u0639\u06cc\u062a</li> </ol>"},{"location":"fa/FSM-and-Conversation-handling/#_19","title":"\u062c\u0631\u06cc\u0627\u0646","text":"<ol> <li>\u06a9\u0627\u0631\u0628\u0631 <code>/register</code> \u0631\u0627 \u0627\u0631\u0633\u0627\u0644 \u0645\u06cc\u200c\u06a9\u0646\u062f \u2192 Start Activity \u0641\u0631\u0627\u062e\u0648\u0627\u0646\u06cc \u0645\u06cc\u200c\u0634\u0648\u062f</li> <li>Start Activity \u06cc\u06a9 <code>WizardContext</code> \u0645\u06cc\u200c\u0633\u0627\u0632\u062f \u0648 <code>wizardActivity.start(ctx)</code> \u0631\u0627 \u0641\u0631\u0627\u062e\u0648\u0627\u0646\u06cc \u0645\u06cc\u200c\u06a9\u0646\u062f</li> <li><code>start()</code> \u0648\u0627\u0631\u062f \u0645\u0631\u062d\u0644\u0647 \u0627\u0648\u0644\u06cc\u0647 \u0645\u06cc\u200c\u0634\u0648\u062f \u0648 <code>inputListener</code> \u0631\u0627 \u0628\u0631\u0627\u06cc \u0631\u062f\u06cc\u0627\u0628\u06cc \u0645\u0631\u062d\u0644\u0647 \u0641\u0639\u0644\u06cc \u062a\u0646\u0638\u06cc\u0645 \u0645\u06cc\u200c\u06a9\u0646\u062f</li> <li>\u06a9\u0627\u0631\u0628\u0631 \u06cc\u06a9 \u067e\u06cc\u0627\u0645 \u0627\u0631\u0633\u0627\u0644 \u0645\u06cc\u200c\u06a9\u0646\u062f \u2192 Input Activity \u0641\u0631\u0627\u062e\u0648\u0627\u0646\u06cc \u0645\u06cc\u200c\u0634\u0648\u062f</li> <li>Input Activity <code>wizardActivity.handleInput(ctx)</code> \u0631\u0627 \u0641\u0631\u0627\u062e\u0648\u0627\u0646\u06cc \u0645\u06cc\u200c\u06a9\u0646\u062f</li> <li><code>handleInput()</code> \u0648\u0631\u0648\u062f\u06cc \u0631\u0627 \u062a\u0623\u06cc\u06cc\u062f \u0645\u06cc\u200c\u06a9\u0646\u062f\u060c \u0648\u0636\u0639\u06cc\u062a \u0631\u0627 \u0630\u062e\u06cc\u0631\u0647 \u0645\u06cc\u200c\u06a9\u0646\u062f \u0648 \u0628\u0647 \u0645\u0631\u062d\u0644\u0647 \u0628\u0639\u062f\u06cc \u06af\u0630\u0627\u0631 \u0645\u06cc\u200c\u06a9\u0646\u062f</li> <li>\u0641\u0631\u0622\u06cc\u0646\u062f \u062a\u0627 \u0632\u0645\u0627\u0646\u06cc \u06a9\u0647 <code>Transition.Finish</code> \u0628\u0627\u0632\u06af\u0631\u062f\u0627\u0646\u062f\u0647 \u0634\u0648\u062f \u062a\u06a9\u0631\u0627\u0631 \u0645\u06cc\u200c\u0634\u0648\u062f</li> </ol>"},{"location":"fa/FSM-and-Conversation-handling/#_20","title":"\u067e\u0627\u06cc\u062f\u0627\u0631\u06cc \u0648\u0636\u0639\u06cc\u062a","text":"<ul> <li>\u0648\u0636\u0639\u06cc\u062a \u0628\u0639\u062f \u0627\u0632 \u062a\u0623\u06cc\u06cc\u062f \u0645\u0648\u0641\u0642 (\u0642\u0628\u0644 \u0627\u0632 \u06af\u0630\u0627\u0631) \u0630\u062e\u06cc\u0631\u0647 \u0645\u06cc\u200c\u0634\u0648\u062f</li> <li>\u0645\u0642\u062f\u0627\u0631 \u0628\u0627\u0632\u06af\u0634\u062a\u06cc <code>store()</code> \u0647\u0631 \u0645\u0631\u062d\u0644\u0647 \u0628\u0627 \u0627\u0633\u062a\u0641\u0627\u062f\u0647 \u0627\u0632 <code>WizardStateManager</code> \u0645\u0637\u0627\u0628\u0642 \u0630\u062e\u06cc\u0631\u0647 \u0645\u06cc\u200c\u0634\u0648\u062f</li> <li>\u0648\u0636\u0639\u06cc\u062a \u062f\u0631 \u0647\u0631 \u06a9\u0627\u0631\u0628\u0631 \u0648 \u0686\u062a (<code>UserChatReference</code>) scoped \u0627\u0633\u062a</li> </ul>"},{"location":"fa/FSM-and-Conversation-handling/#_21","title":"\u0628\u0647\u062a\u0631\u06cc\u0646 \u0634\u06cc\u0648\u0647\u200c\u0647\u0627","text":""},{"location":"fa/FSM-and-Conversation-handling/#1","title":"1. \u0647\u0645\u06cc\u0634\u0647 \u067e\u06cc\u0627\u0645\u200c\u0647\u0627\u06cc \u0631\u0648\u0634\u0646 \u0627\u0631\u0627\u0626\u0647 \u062f\u0647\u06cc\u062f","text":"<pre><code>override suspend fun onEntry(ctx: WizardContext) {\n    message { \n        \"Please enter your email address:\\n\" +\n        \"(Format: user@example.com)\" \n    }.send(ctx.user, ctx.bot)\n}\n</code></pre>"},{"location":"fa/FSM-and-Conversation-handling/#2","title":"2. \u062e\u0637\u0627\u0647\u0627\u06cc \u062a\u0623\u06cc\u06cc\u062f \u0631\u0627 \u0628\u0627 \u0645\u0647\u0631\u0628\u0627\u0646\u06cc \u0645\u062f\u06cc\u0631\u06cc\u062a \u06a9\u0646\u06cc\u062f","text":"<pre><code>override suspend fun onRetry(ctx: WizardContext) {\n    message { \n        \"Invalid email format. Please try again.\\n\" +\n        \"Example: user@example.com\" \n    }.send(ctx.user, ctx.bot)\n}\n</code></pre>"},{"location":"fa/FSM-and-Conversation-handling/#3","title":"3. \u0627\u0632 \u062f\u0633\u062a\u0631\u0633\u06cc \u062a\u0627\u06cc\u067e \u0627\u06cc\u0645\u0646 \u0628\u0647 \u0648\u0636\u0639\u06cc\u062a \u0627\u0633\u062a\u0641\u0627\u062f\u0647 \u06a9\u0646\u06cc\u062f","text":"<p>\u062a\u0631\u062c\u06cc\u062d\u0627\u064b \u0627\u0632 \u0645\u062a\u062f\u0647\u0627\u06cc \u062a\u0627\u06cc\u067e \u0627\u06cc\u0645\u0646 \u062a\u0648\u0644\u06cc\u062f \u0634\u062f\u0647 \u0627\u0633\u062a\u0641\u0627\u062f\u0647 \u06a9\u0646\u06cc\u062f:</p> <pre><code>// \u2705 \u062e\u0648\u0628 - \u062a\u0627\u06cc\u067e \u0627\u06cc\u0645\u0646\nval name: String? = ctx.getState&lt;NameStep&gt;()\n\n// \u274c \u0627\u062c\u062a\u0646\u0627\u0628 \u06a9\u0646\u06cc\u062f - \u062a\u0627\u06cc\u067e \u0627\u06cc\u0645\u0646\u06cc \u0627\u0632 \u062f\u0633\u062a \u0645\u06cc\u200c\u062f\u0647\u062f\nval name = ctx.getState(NameStep::class) as? String\n</code></pre>"},{"location":"fa/FSM-and-Conversation-handling/#4","title":"4. \u0645\u0631\u0627\u062d\u0644 \u0631\u0627 \u0645\u062a\u0645\u0631\u06a9\u0632 \u0646\u06af\u0647 \u062f\u0627\u0631\u06cc\u062f","text":"<p>\u0647\u0631 \u0645\u0631\u062d\u0644\u0647 \u0628\u0627\u06cc\u062f \u06cc\u06a9 \u0645\u0633\u0626\u0648\u0644\u06cc\u062a \u0648\u0627\u062d\u062f \u062f\u0627\u0634\u062a\u0647 \u0628\u0627\u0634\u062f:</p> <pre><code>// \u2705 \u062e\u0648\u0628 - \u0645\u0631\u062d\u0644\u0647 \u0645\u062a\u0645\u0631\u06a9\u0632\nobject EmailStep : WizardStep {\n    // \u0641\u0642\u0637 \u062c\u0645\u0639\u200c\u0622\u0648\u0631\u06cc \u0627\u06cc\u0645\u06cc\u0644 \u0631\u0627 \u0645\u062f\u06cc\u0631\u06cc\u062a \u0645\u06cc\u200c\u06a9\u0646\u062f\n}\n\n// \u274c \u0627\u062c\u062a\u0646\u0627\u0628 \u06a9\u0646\u06cc\u062f - \u0645\u0646\u0637\u0642 \u0632\u06cc\u0627\u062f\nobject PersonalInfoStep : WizardStep {\n    // \u0646\u0627\u0645\u060c \u0627\u06cc\u0645\u06cc\u0644\u060c \u062a\u0644\u0641\u0646\u060c \u0622\u062f\u0631\u0633 \u0631\u0627 \u0645\u062f\u06cc\u0631\u06cc\u062a \u0645\u06cc\u200c\u06a9\u0646\u062f...\n}\n</code></pre>"},{"location":"fa/FSM-and-Conversation-handling/#5","title":"5. \u0627\u0632 \u0646\u0627\u0645\u200c\u0647\u0627\u06cc \u0645\u0639\u0646\u06cc\u200c\u062f\u0627\u0631 \u0645\u0631\u062d\u0644\u0647 \u0627\u0633\u062a\u0641\u0627\u062f\u0647 \u06a9\u0646\u06cc\u062f","text":"<pre><code>// \u2705 \u062e\u0648\u0628\nobject EmailVerificationStep : WizardStep\n\n// \u274c \u0627\u062c\u062a\u0646\u0627\u0628 \u06a9\u0646\u06cc\u062f\nobject Step2 : WizardStep\n</code></pre>"},{"location":"fa/FSM-and-Conversation-handling/#6","title":"6. \u0648\u0636\u0639\u06cc\u062a \u0631\u0627 \u0647\u0646\u06af\u0627\u0645 \u0646\u06cc\u0627\u0632 \u067e\u0627\u06a9 \u06a9\u0646\u06cc\u062f","text":"<p>\u0627\u06af\u0631 \u0646\u06cc\u0627\u0632 \u0628\u0647 \u067e\u0627\u06a9 \u06a9\u0631\u062f\u0646 \u062f\u0633\u062a\u06cc \u0648\u0636\u0639\u06cc\u062a \u062f\u0627\u0631\u06cc\u062f:</p> <pre><code>object CancelStep : WizardStep {\n    override suspend fun onEntry(ctx: WizardContext) {\n        // \u062a\u0645\u0627\u0645 \u0648\u0636\u0639\u06cc\u062a wizard \u0631\u0627 \u067e\u0627\u06a9 \u06a9\u0646\n        ctx.delState&lt;NameStep&gt;()\n        ctx.delState&lt;AgeStep&gt;()\n\n        message { \"Registration cancelled.\" }.send(ctx.user, ctx.bot)\n    }\n}\n</code></pre>"},{"location":"fa/FSM-and-Conversation-handling/#_22","title":"\u062e\u0644\u0627\u0635\u0647","text":"<p>\u0633\u06cc\u0633\u062a\u0645 Wizard \u0627\u0631\u0627\u0626\u0647 \u0645\u06cc\u200c\u062f\u0647\u062f: - \u2705 \u062a\u0627\u06cc\u067e \u0627\u06cc\u0645\u0646 \u0645\u062f\u06cc\u0631\u06cc\u062a \u0648\u0636\u0639\u06cc\u062a \u0628\u0627 \u0628\u0631\u0631\u0633\u06cc \u062f\u0631 \u0632\u0645\u0627\u0646 \u06a9\u0627\u0645\u067e\u0627\u06cc\u0644 - \u2705 \u0627\u0639\u0644\u0627\u0645\u06cc \u062a\u0639\u0631\u06cc\u0641 \u0645\u0631\u0627\u062d\u0644 \u0628\u0647 \u0639\u0646\u0648\u0627\u0646 \u06a9\u0644\u0627\u0633\u200c\u0647\u0627\u06cc \u062a\u0648 \u062f\u0631 \u062a\u0648 - \u2705 \u0627\u0646\u0639\u0637\u0627\u0641\u200c\u067e\u0630\u06cc\u0631 \u06af\u0630\u0627\u0631\u0647\u0627 \u0628\u0627 \u0645\u0646\u0637\u0642 \u0634\u0631\u0637\u06cc - \u2705 \u062e\u0648\u062f\u06a9\u0627\u0631 \u062a\u0648\u0644\u06cc\u062f \u06a9\u062f \u062a\u0648\u0633\u0637 KSP - \u2705 \u06cc\u06a9\u067e\u0627\u0631\u0686\u0647 \u0628\u0627 \u0633\u06cc\u0633\u062a\u0645 \u0641\u0639\u0627\u0644\u06cc\u062a \u0645\u0648\u062c\u0648\u062f - \u2705 \u0642\u0627\u0628\u0644 plug-in backend\u200c\u0647\u0627\u06cc \u0630\u062e\u06cc\u0631\u0647\u200c\u0633\u0627\u0632\u06cc \u0648\u0636\u0639\u06cc\u062a</p> <p>\u0634\u0631\u0648\u0639 \u0628\u0647 \u0633\u0627\u062e\u062a\u0646 wizard\u0647\u0627 \u0628\u0627 \u06a9\u0627\u0645\u0646\u062a \u06a9\u0631\u062f\u0646 \u06cc\u06a9 \u06a9\u0644\u0627\u0633 \u0628\u0627 <code>@WizardHandler</code> \u0648 \u062a\u0639\u0631\u06cc\u0641 \u0645\u0631\u0627\u062d\u0644 \u062e\u0648\u062f \u0628\u0647 \u0639\u0646\u0648\u0627\u0646 \u0627\u0634\u06cc\u0627\u06cc <code>WizardStep</code> \u062a\u0648 \u062f\u0631 \u062a\u0648 \u06a9\u0646\u06cc\u062f! \u0627\u06af\u0631 \u0633\u0648\u0627\u0644\u06cc \u062f\u0627\u0631\u06cc\u062f \u0628\u0627 \u0645\u0627 \u062f\u0631 \u0686\u062a \u062a\u0645\u0627\u0633 \u0628\u06af\u06cc\u0631\u06cc\u062f\u060c \u0645\u0627 \u062e\u0648\u0634\u062d\u0627\u0644\u06cc\u0645 \u06a9\u0647 \u06a9\u0645\u06a9 \u06a9\u0646\u06cc\u0645 :)</p>"},{"location":"fa/Guards/#introduction","title":"Introduction","text":"<p>\u0646\u06af\u0647\u0628\u0627\u0646\u200c\u0647\u0627 \u06cc\u06a9 \u0648\u06cc\u0698\u06af\u06cc \u0636\u0631\u0648\u0631\u06cc \u0628\u0631\u0627\u06cc \u062a\u0648\u0633\u0639\u0647\u200c\u062f\u0647\u0646\u062f\u06af\u0627\u0646\u06cc \u06a9\u0647 \u0631\u0628\u0627\u062a \u0645\u06cc\u200c\u0633\u0627\u0632\u0646\u062f \u0647\u0633\u062a\u0646\u062f. \u0627\u06cc\u0646 \u0646\u06af\u0647\u0628\u0627\u0646\u200c\u0647\u0627 \u0628\u0647 \u0639\u0646\u0648\u0627\u0646 \u0686\u06a9\u200c\u0647\u0627\u06cc \u067e\u06cc\u0634 \u0627\u0632 \u0627\u062c\u0631\u0627 \u0639\u0645\u0644 \u0645\u06cc\u200c\u06a9\u0646\u0646\u062f \u06a9\u0647 \u062a\u0639\u06cc\u06cc\u0646 \u0645\u06cc\u200c\u06a9\u0646\u0646\u062f \u0622\u06cc\u0627 \u06cc\u06a9 \u062f\u0633\u062a\u0648\u0631 \u062e\u0627\u0635 \u0628\u0627\u06cc\u062f \u0641\u0631\u0627\u062e\u0648\u0627\u0646\u06cc \u0634\u0648\u062f \u06cc\u0627 \u062e\u06cc\u0631. \u0628\u0627 \u067e\u06cc\u0627\u062f\u0647\u200c\u0633\u0627\u0632\u06cc \u0627\u06cc\u0646 \u0686\u06a9\u200c\u0647\u0627\u060c \u062a\u0648\u0633\u0639\u0647\u200c\u062f\u0647\u0646\u062f\u06af\u0627\u0646 \u0645\u06cc\u200c\u062a\u0648\u0627\u0646\u0646\u062f \u06a9\u0627\u0631\u06a9\u0631\u062f\u060c \u0627\u0645\u0646\u06cc\u062a \u0648 \u062a\u062c\u0631\u0628\u0647 \u06a9\u0627\u0631\u0628\u0631\u06cc \u0631\u0628\u0627\u062a\u200c\u0647\u0627\u06cc \u062e\u0648\u062f \u0631\u0627 \u0627\u0631\u062a\u0642\u0627 \u062f\u0647\u0646\u062f.</p>"},{"location":"fa/Guards/#_1","title":"\u0647\u062f\u0641 \u0627\u0632 \u0646\u06af\u0647\u0628\u0627\u0646\u200c\u0647\u0627\u06cc \u0641\u0639\u0627\u0644\u06cc\u062a","text":"<p>\u0647\u062f\u0641 \u0627\u0635\u0644\u06cc \u0646\u06af\u0647\u0628\u0627\u0646\u200c\u0647\u0627\u06cc \u0641\u0639\u0627\u0644\u06cc\u062a \u062a\u0636\u0645\u06cc\u0646 \u0627\u06cc\u0646 \u0627\u0633\u062a \u06a9\u0647 \u0641\u0642\u0637 \u06a9\u0627\u0631\u0628\u0631\u0627\u0646 \u0645\u062c\u0627\u0632 \u06cc\u0627 \u0634\u0631\u0627\u06cc\u0637 \u062e\u0627\u0635\u06cc \u0628\u0627\u0639\u062b \u0641\u0639\u0627\u0644 \u0634\u062f\u0646 \u06cc\u06a9 \u0641\u0639\u0627\u0644\u06cc\u062a \u0634\u0648\u0646\u062f.</p> <p>\u0627\u06cc\u0646 \u0645\u06cc\u200c\u062a\u0648\u0627\u0646\u062f \u0645\u0627\u0646\u0639 \u0633\u0648\u0621 \u0627\u0633\u062a\u0641\u0627\u062f\u0647 \u0634\u0648\u062f\u060c \u06cc\u06a9\u067e\u0627\u0631\u0686\u06af\u06cc \u0631\u0628\u0627\u062a \u0631\u0627 \u062d\u0641\u0638 \u06a9\u0646\u062f \u0648 \u062a\u0639\u0627\u0645\u0644\u0627\u062a \u0631\u0627 \u0633\u0627\u062f\u0647\u200c\u062a\u0631 \u06a9\u0646\u062f.</p>"},{"location":"fa/Guards/#_2","title":"\u0645\u0648\u0627\u0631\u062f \u0627\u0633\u062a\u0641\u0627\u062f\u0647 \u0631\u0627\u06cc\u062c","text":"<ol> <li>\u062a\u0623\u06cc\u06cc\u062f \u0647\u0648\u06cc\u062a \u0648 \u0645\u062c\u0648\u0632: \u062a\u0636\u0645\u06cc\u0646 \u0627\u06cc\u0646\u06a9\u0647 \u0641\u0642\u0637 \u06a9\u0627\u0631\u0628\u0631\u0627\u0646 \u062e\u0627\u0635 \u0645\u06cc\u200c\u062a\u0648\u0627\u0646\u0646\u062f \u0628\u0647 \u062f\u0633\u062a\u0648\u0631\u0627\u062a \u062e\u0627\u0635\u06cc \u062f\u0633\u062a\u0631\u0633\u06cc \u062f\u0627\u0634\u062a\u0647 \u0628\u0627\u0634\u0646\u062f.</li> <li>\u0686\u06a9\u200c\u0647\u0627\u06cc \u067e\u06cc\u0634\u200c\u0634\u0631\u0637: \u062a\u0623\u06cc\u06cc\u062f \u0627\u06cc\u0646\u06a9\u0647 \u0634\u0631\u0627\u06cc\u0637 \u062e\u0627\u0635\u06cc \u0642\u0628\u0644 \u0627\u0632 \u0627\u062c\u0631\u0627\u06cc \u06cc\u06a9 \u0641\u0639\u0627\u0644\u06cc\u062a \u0628\u0631\u0642\u0631\u0627\u0631 \u0628\u0627\u0634\u062f (\u0645\u062b\u0644\u0627\u064b \u062a\u0636\u0645\u06cc\u0646 \u0627\u06cc\u0646\u06a9\u0647 \u06cc\u06a9 \u06a9\u0627\u0631\u0628\u0631 \u062f\u0631 \u0648\u0636\u0639\u06cc\u062a \u06cc\u0627 \u0632\u0645\u06cc\u0646\u0647 \u062e\u0627\u0635\u06cc \u0642\u0631\u0627\u0631 \u062f\u0627\u0631\u062f).</li> <li>\u0646\u06af\u0647\u0628\u0627\u0646\u200c\u0647\u0627\u06cc \u0632\u0645\u06cc\u0646\u0647\u200c\u0627\u06cc: \u062a\u0635\u0645\u06cc\u0645\u200c\u06af\u06cc\u0631\u06cc \u0628\u0631 \u0627\u0633\u0627\u0633 \u0648\u0636\u0639\u06cc\u062a \u06af\u0641\u062a\u06af\u0648\u06cc \u0641\u0639\u0644\u06cc \u06cc\u0627 \u06a9\u0627\u0631\u0628\u0631.</li> </ol>"},{"location":"fa/Guards/#_3","title":"\u0627\u0633\u062a\u0631\u0627\u062a\u0698\u06cc\u200c\u0647\u0627\u06cc \u067e\u06cc\u0627\u062f\u0647\u200c\u0633\u0627\u0632\u06cc","text":"<p>\u067e\u06cc\u0627\u062f\u0647\u200c\u0633\u0627\u0632\u06cc \u0646\u06af\u0647\u0628\u0627\u0646\u200c\u0647\u0627\u06cc \u062f\u0633\u062a\u0648\u0631 \u062a\u0644\u06af\u0631\u0627\u0645 \u0645\u0639\u0645\u0648\u0644\u0627\u064b \u0634\u0627\u0645\u0644 \u0646\u0648\u0634\u062a\u0646 \u062a\u0648\u0627\u0628\u0639 \u06cc\u0627 \u0645\u062a\u062f\u0647\u0627\u06cc\u06cc \u0627\u0633\u062a \u06a9\u0647 \u0645\u0646\u0637\u0642 \u0647\u0631 \u0646\u06af\u0647\u0628\u0627\u0646 \u0631\u0627 \u062f\u0631 \u062e\u0648\u062f \u062c\u0627\u06cc \u0645\u06cc\u200c\u062f\u0647\u0646\u062f. \u062f\u0631 \u0632\u06cc\u0631 \u0627\u0633\u062a\u0631\u0627\u062a\u0698\u06cc\u200c\u0647\u0627\u06cc \u0631\u0627\u06cc\u062c \u0622\u0648\u0631\u062f\u0647 \u0634\u062f\u0647 \u0627\u0633\u062a:</p> <ol> <li>\u0686\u06a9 \u0646\u0642\u0634 \u06a9\u0627\u0631\u0628\u0631:</li> <li> <p>\u062a\u0636\u0645\u06cc\u0646 \u0627\u06cc\u0646\u06a9\u0647 \u06a9\u0627\u0631\u0628\u0631 \u0646\u0642\u0634 \u0645\u0648\u0631\u062f \u0646\u06cc\u0627\u0632 (\u0645\u062b\u0644\u0627\u064b \u0645\u062f\u06cc\u0631\u060c \u0645\u062f\u06cc\u0631 \u062a\u0627\u0644\u0627\u0631) \u0631\u0627 \u0642\u0628\u0644 \u0627\u0632 \u0627\u062c\u0631\u0627\u06cc \u062f\u0633\u062a\u0648\u0631 \u062f\u0627\u0634\u062a\u0647 \u0628\u0627\u0634\u062f.       <pre><code> override suspend fun condition(user: User?, update: ProcessedUpdate, bot: TelegramBot): Boolean {\n  // \u0628\u0631\u0631\u0633\u06cc \u0627\u06cc\u0646\u06a9\u0647 \u0622\u06cc\u0627 \u06a9\u0627\u0631\u0628\u0631 \u062f\u0631 \u06af\u0641\u062a\u06af\u0648\u06cc \u062f\u0627\u062f\u0647 \u0634\u062f\u0647 \u0645\u062f\u06cc\u0631 \u0627\u0633\u062a\n }\n</code></pre></p> </li> <li> <p>\u062a\u0623\u06cc\u06cc\u062f \u0648\u0636\u0639\u06cc\u062a:</p> </li> <li> <p>\u0628\u0631\u0631\u0633\u06cc \u0648\u0636\u0639\u06cc\u062a \u06a9\u0627\u0631\u0628\u0631 \u0642\u0628\u0644 \u0627\u0632 \u0627\u062c\u0627\u0632\u0647 \u062f\u0627\u062f\u0646 \u0628\u0647 \u0627\u062c\u0631\u0627\u06cc \u062f\u0633\u062a\u0648\u0631.      <pre><code>override suspend fun condition(user: User?, update: ProcessedUpdate, bot: TelegramBot): Boolean {\n   return bot.userData[user.id, \"data\"] == requiredState\n}\n</code></pre></p> </li> <li> <p>\u0646\u06af\u0647\u0628\u0627\u0646\u200c\u0647\u0627\u06cc \u0633\u0641\u0627\u0631\u0634\u06cc:</p> </li> <li>\u0627\u06cc\u062c\u0627\u062f \u0645\u0646\u0637\u0642 \u0633\u0641\u0627\u0631\u0634\u06cc \u0628\u0631 \u0627\u0633\u0627\u0633 \u0646\u06cc\u0627\u0632\u0647\u0627\u06cc \u062e\u0627\u0635.      <pre><code>override suspend fun condition(user: User?, update: ProcessedUpdate, bot: TelegramBot): Boolean {\n   // \u0645\u0646\u0637\u0642 \u0633\u0641\u0627\u0631\u0634\u06cc \u0628\u0631\u0627\u06cc \u062a\u0639\u06cc\u06cc\u0646 \u0627\u06cc\u0646\u06a9\u0647 \u0622\u06cc\u0627 \u062f\u0633\u062a\u0648\u0631 \u0628\u0627\u06cc\u062f \u0627\u062c\u0631\u0627 \u0634\u0648\u062f\n}\n</code></pre></li> </ol>"},{"location":"fa/Guards/#_4","title":"\u0627\u062f\u063a\u0627\u0645 \u0646\u06af\u0647\u0628\u0627\u0646\u200c\u0647\u0627 \u0628\u0627 \u0641\u0639\u0627\u0644\u06cc\u062a\u200c\u0647\u0627","text":"<p>\u0628\u0631\u0627\u06cc \u0627\u062f\u063a\u0627\u0645 \u0627\u06cc\u0646 \u0646\u06af\u0647\u0628\u0627\u0646\u200c\u0647\u0627 \u0628\u0627 \u062f\u0633\u062a\u0648\u0631\u0627\u062a \u0631\u0628\u0627\u062a \u062e\u0648\u062f\u060c \u0645\u06cc\u200c\u062a\u0648\u0627\u0646\u06cc\u062f \u06cc\u06a9 \u0646\u06af\u0647\u0628\u0627\u0646 \u0627\u06cc\u062c\u0627\u062f \u06a9\u0646\u06cc\u062f \u06a9\u0647 \u0627\u06cc\u0646 \u0634\u0631\u0627\u06cc\u0637 \u0631\u0627 \u0642\u0628\u0644 \u0627\u0632 \u0627\u06cc\u0646\u06a9\u0647 handler \u062f\u0633\u062a\u0648\u0631 \u0641\u0631\u0627\u062e\u0648\u0627\u0646\u06cc \u0634\u0648\u062f \u0628\u0631\u0631\u0633\u06cc \u06a9\u0646\u062f.</p>"},{"location":"fa/Guards/#_5","title":"\u067e\u06cc\u0627\u062f\u0647\u200c\u0633\u0627\u0632\u06cc \u0646\u0645\u0648\u0646\u0647","text":"<pre><code>// \u06a9\u0644\u0627\u0633 \u0646\u06af\u0647\u0628\u0627\u0646 \u062e\u0648\u062f \u0631\u0627 \u06a9\u0647 interface Guard \u0631\u0627 \u067e\u06cc\u0627\u062f\u0647\u200c\u0633\u0627\u0632\u06cc \u0645\u06cc\u200c\u06a9\u0646\u062f\u060c \u062f\u0631 \u062c\u0627\u06cc\u06cc \u062a\u0639\u0631\u06cc\u0641 \u06a9\u0646\u06cc\u062f\nobject YourGuard : Guard {\n    override suspend fun condition(user: User?, update: ProcessedUpdate, bot: TelegramBot): Boolean {\n        // \u0634\u0631\u0637 \u062e\u0648\u062f \u0631\u0627 \u0627\u06cc\u0646\u062c\u0627 \u0628\u0646\u0648\u06cc\u0633\u06cc\u062f\n    }\n}\n\n// ...\n\n@CommandHandler([\"yourCommand\"])\n@Guard(YourGuard::class) // InputHandler \u0646\u06cc\u0632 \u067e\u0634\u062a\u06cc\u0628\u0627\u0646\u06cc \u0645\u06cc\u200c\u0634\u0648\u062f\nfun command(bot: TelegramBot) {\n   // \u0628\u062f\u0646\u0647 \u062f\u0633\u062a\u0648\u0631\n}\n</code></pre>"},{"location":"fa/Guards/#_6","title":"\u0628\u0647\u062a\u0631\u06cc\u0646 \u0634\u06cc\u0648\u0647\u200c\u0647\u0627","text":"<ul> <li>\u0645\u062f\u0648\u0644\u0627\u0631\u06cc\u062a\u0647: \u0645\u0646\u0637\u0642 \u0646\u06af\u0647\u0628\u0627\u0646 \u0631\u0627 \u0645\u062f\u0648\u0644\u0627\u0631 \u0646\u06af\u0647 \u062f\u0627\u0631\u06cc\u062f \u0648 \u0627\u0632 \u0641\u0639\u0627\u0644\u06cc\u062a\u200c\u0647\u0627 \u062c\u062f\u0627 \u06a9\u0646\u06cc\u062f.</li> <li>\u0642\u0627\u0628\u0644\u06cc\u062a \u0627\u0633\u062a\u0641\u0627\u062f\u0647 \u0645\u062c\u062f\u062f: \u062a\u0648\u0627\u0628\u0639 \u0646\u06af\u0647\u0628\u0627\u0646 \u0642\u0627\u0628\u0644 \u0627\u0633\u062a\u0641\u0627\u062f\u0647 \u0645\u062c\u062f\u062f \u0628\u0646\u0648\u06cc\u0633\u06cc\u062f \u06a9\u0647 \u0628\u0647 \u0631\u0627\u062d\u062a\u06cc \u0645\u06cc\u200c\u062a\u0648\u0627\u0646 \u0622\u0646\u200c\u0647\u0627 \u0631\u0627 \u062f\u0631 \u062f\u0633\u062a\u0648\u0631\u0627\u062a/\u0648\u0631\u0648\u062f\u06cc\u200c\u0647\u0627\u06cc \u0645\u062e\u062a\u0644\u0641 \u0627\u0639\u0645\u0627\u0644 \u06a9\u0631\u062f.</li> <li>\u06a9\u0627\u0631\u0627\u06cc\u06cc: \u0686\u06a9\u200c\u0647\u0627\u06cc \u0646\u06af\u0647\u0628\u0627\u0646 \u0631\u0627 \u0628\u0647\u06cc\u0646\u0647 \u06a9\u0646\u06cc\u062f \u062a\u0627 \u0628\u0627\u0631 \u0639\u0645\u0644\u06a9\u0631\u062f\u06cc \u0631\u0627 \u06a9\u0645\u06cc\u0646\u0647 \u06a9\u0646\u06cc\u062f.</li> <li>\u0628\u0627\u0632\u062e\u0648\u0631\u062f \u06a9\u0627\u0631\u0628\u0631: \u0628\u0627\u0632\u062e\u0648\u0631\u062f \u0648\u0627\u0636\u062d\u06cc \u0628\u0647 \u06a9\u0627\u0631\u0628\u0631\u0627\u0646 \u0628\u062f\u0647\u06cc\u062f \u0648\u0642\u062a\u06cc \u062f\u0633\u062a\u0648\u0631\u06cc \u062a\u0648\u0633\u0637 \u06cc\u06a9 \u0646\u06af\u0647\u0628\u0627\u0646 \u0645\u0633\u062f\u0648\u062f \u0645\u06cc\u200c\u0634\u0648\u062f.</li> </ul>"},{"location":"fa/Guards/#_7","title":"\u0646\u062a\u06cc\u062c\u0647\u200c\u06af\u06cc\u0631\u06cc","text":"<p>\u0646\u06af\u0647\u0628\u0627\u0646\u200c\u0647\u0627\u06cc \u0641\u0639\u0627\u0644\u06cc\u062a \u06cc\u06a9 \u0627\u0628\u0632\u0627\u0631 \u0642\u062f\u0631\u062a\u0645\u0646\u062f \u0628\u0631\u0627\u06cc \u0645\u062f\u06cc\u0631\u06cc\u062a \u0627\u062c\u0631\u0627\u06cc \u062f\u0633\u062a\u0648\u0631\u0627\u062a/\u0648\u0631\u0648\u062f\u06cc \u0631\u0628\u0627\u062a \u0647\u0633\u062a\u0646\u062f.</p> <p>\u0628\u0627 \u067e\u06cc\u0627\u062f\u0647\u200c\u0633\u0627\u0632\u06cc \u0633\u0627\u0632\u0648\u06a9\u0627\u0631\u0647\u0627\u06cc \u0646\u06af\u0647\u0628\u0627\u0646 \u0642\u0648\u06cc\u060c \u062a\u0648\u0633\u0639\u0647\u200c\u062f\u0647\u0646\u062f\u06af\u0627\u0646 \u0645\u06cc\u200c\u062a\u0648\u0627\u0646\u0646\u062f \u062a\u0636\u0645\u06cc\u0646 \u06a9\u0646\u0646\u062f \u0631\u0628\u0627\u062a\u200c\u0647\u0627\u06cc\u0634\u0627\u0646 \u0628\u0647 \u0635\u0648\u0631\u062a \u0627\u0645\u0646 \u0648 \u06a9\u0627\u0631\u0622\u0645\u062f \u0639\u0645\u0644 \u0645\u06cc\u200c\u06a9\u0646\u0646\u062f \u0648 \u062a\u062c\u0631\u0628\u0647 \u0628\u0647\u062a\u0631\u06cc \u0628\u0631\u0627\u06cc \u06a9\u0627\u0631\u0628\u0631 \u0627\u0631\u0627\u0626\u0647 \u0645\u06cc\u200c\u062f\u0647\u0646\u062f.</p>"},{"location":"fa/Guards/#_8","title":"\u0647\u0645\u0686\u0646\u06cc\u0646 \u0628\u0628\u06cc\u0646\u06cc\u062f","text":"<ul> <li>\u0641\u0639\u0627\u0644\u06cc\u062a\u200c\u0647\u0627 \u0648 \u067e\u0631\u062f\u0627\u0632\u0634\u200c\u06af\u0631\u0647\u0627</li> <li>\u067e\u0631\u062f\u0627\u0632\u0634 \u0622\u067e\u062f\u06cc\u062a</li> <li>\u0627\u0642\u062f\u0627\u0645\u0627\u062a</li> <li>\u0641\u0631\u0627\u062e\u0648\u0627\u0646\u06cc \u0641\u0639\u0627\u0644\u06cc\u062a</li> </ul>"},{"location":"fa/Handlers/#variety-of-handlers","title":"Variety of Handlers","text":"<p>\u062f\u0631 \u062a\u0648\u0633\u0639\u0647 \u0631\u0628\u0627\u062a\u060c \u0628\u0647\u200c\u0648\u06cc\u0698\u0647 \u062f\u0631 \u0633\u06cc\u0633\u062a\u0645\u200c\u0647\u0627\u06cc\u06cc \u06a9\u0647 \u0634\u0627\u0645\u0644 \u062a\u0639\u0627\u0645\u0644\u0627\u062a \u06a9\u0627\u0631\u0628\u0631\u06cc \u0647\u0633\u062a\u0646\u062f\u060c \u0645\u062f\u06cc\u0631\u06cc\u062a \u0648 \u067e\u0631\u062f\u0627\u0632\u0634 \u062f\u0633\u062a\u0648\u0631\u0627\u062a \u0648 \u0631\u0648\u06cc\u062f\u0627\u062f\u0647\u0627 \u0628\u0647\u200c\u0635\u0648\u0631\u062a \u06a9\u0627\u0631\u0622\u0645\u062f \u0628\u0633\u06cc\u0627\u0631 \u062d\u06cc\u0627\u062a\u06cc \u0627\u0633\u062a.</p> <p>\u0627\u06cc\u0646 annotation\u0647\u0627 \u062a\u0648\u0627\u0628\u0639\u06cc \u0631\u0627 \u06a9\u0647 \u0628\u0631\u0627\u06cc \u067e\u0631\u062f\u0627\u0632\u0634 \u062f\u0633\u062a\u0648\u0631\u0627\u062a\u060c \u0648\u0631\u0648\u062f\u06cc\u200c\u0647\u0627 \u06cc\u0627 \u0622\u067e\u062f\u06cc\u062a\u200c\u0647\u0627\u06cc \u062e\u0627\u0635 \u0637\u0631\u0627\u062d\u06cc \u0634\u062f\u0647\u200c\u0627\u0646\u062f \u0639\u0644\u0627\u0645\u062a\u200c\u06af\u0630\u0627\u0631\u06cc \u0645\u06cc\u200c\u06a9\u0646\u0646\u062f \u0648 \u0645\u062a\u0627\u062f\u06cc\u062a\u0627\u06cc\u06cc \u0645\u0627\u0646\u0646\u062f \u06a9\u0644\u06cc\u062f\u0648\u0627\u0698\u0647\u200c\u0647\u0627\u06cc \u062f\u0633\u062a\u0648\u0631\u060c scope\u200c\u0647\u0627 \u0648 guards \u0641\u0631\u0627\u0647\u0645 \u0645\u06cc\u200c\u06a9\u0646\u0646\u062f.</p>"},{"location":"fa/Handlers/#commandhandler","title":"CommandHandler","text":"<p>Annotation <code>CommandHandler</code> \u0628\u0631\u0627\u06cc \u0639\u0644\u0627\u0645\u062a\u200c\u06af\u0630\u0627\u0631\u06cc \u062a\u0648\u0627\u0628\u0639\u06cc \u06a9\u0647 \u062f\u0633\u062a\u0648\u0631\u0627\u062a \u062e\u0627\u0635 \u0631\u0627 \u067e\u0631\u062f\u0627\u0632\u0634 \u0645\u06cc\u200c\u06a9\u0646\u0646\u062f \u0627\u0633\u062a\u0641\u0627\u062f\u0647 \u0645\u06cc\u200c\u0634\u0648\u062f. \u0627\u06cc\u0646 annotation \u0634\u0627\u0645\u0644 \u062e\u0648\u0627\u0635\u06cc \u0627\u0633\u062a \u06a9\u0647 \u06a9\u0644\u06cc\u062f\u0648\u0627\u0698\u0647\u200c\u0647\u0627\u06cc \u062f\u0633\u062a\u0648\u0631 \u0648 scope \u0631\u0627 \u062a\u0639\u0631\u06cc\u0641 \u0645\u06cc\u200c\u06a9\u0646\u062f.</p> <ul> <li>value: \u06a9\u0644\u06cc\u062f\u0648\u0627\u0698\u0647\u200c\u0647\u0627\u06cc\u06cc \u0631\u0627 \u06a9\u0647 \u0628\u0627 \u062f\u0633\u062a\u0648\u0631 \u0645\u0631\u062a\u0628\u0637 \u0647\u0633\u062a\u0646\u062f \u0645\u0634\u062e\u0635 \u0645\u06cc\u200c\u06a9\u0646\u062f.</li> <li>scope: \u0645\u062a\u0646\u06cc \u0631\u0627 \u06a9\u0647 \u062f\u0633\u062a\u0648\u0631 \u062f\u0631 \u0622\u0646 \u0628\u0631\u0631\u0633\u06cc \u062e\u0648\u0627\u0647\u062f \u0634\u062f \u0645\u0634\u062e\u0635 \u0645\u06cc\u200c\u06a9\u0646\u062f.</li> </ul> <pre><code>@CommandHandler([\"text\"])\nsuspend fun test(user: User, bot: TelegramBot) {\n    //...\n}\n</code></pre>"},{"location":"fa/Handlers/#commandhandlercallbackquery","title":"CommandHandler.CallbackQuery","text":"<p>\u0646\u0633\u062e\u0647 \u062a\u062e\u0635\u0635\u06cc annotation <code>CommandHandler</code> \u06a9\u0647 \u0628\u0647 \u0637\u0648\u0631 \u062e\u0627\u0635 \u0628\u0631\u0627\u06cc \u0645\u062f\u06cc\u0631\u06cc\u062a callback queries \u0637\u0631\u0627\u062d\u06cc \u0634\u062f\u0647 \u0627\u0633\u062a. \u0634\u0627\u0645\u0644 \u062e\u0648\u0627\u0635 \u0645\u0634\u0627\u0628\u0647 <code>CommandHandler</code> \u0627\u0633\u062a\u060c \u0628\u0627 \u062a\u0645\u0631\u06a9\u0632 \u0628\u0631 \u0631\u0648\u06cc \u062f\u0633\u062a\u0648\u0631\u0627\u062a \u0645\u0631\u062a\u0628\u0637 \u0628\u0627 callback.</p> <p>\u062f\u0631 \u0648\u0627\u0642\u0639 \u0647\u0645\u0627\u0646 <code>@CommandHandler</code> \u0628\u0627 <code>UpdateType.CALLBACK_QUERY</code> scope \u0627\u0632 \u067e\u06cc\u0634 \u062a\u0639\u06cc\u06cc\u0646 \u0634\u062f\u0647 \u0627\u0633\u062a.</p> <ul> <li>value: \u06a9\u0644\u06cc\u062f\u0648\u0627\u0698\u0647\u200c\u0647\u0627\u06cc\u06cc \u0631\u0627 \u06a9\u0647 \u0628\u0627 \u062f\u0633\u062a\u0648\u0631 \u0645\u0631\u062a\u0628\u0637 \u0647\u0633\u062a\u0646\u062f \u0645\u0634\u062e\u0635 \u0645\u06cc\u200c\u06a9\u0646\u062f.</li> <li>autoAnswer: \u0628\u0647\u200c\u0635\u0648\u0631\u062a \u062e\u0648\u062f\u06a9\u0627\u0631 \u0628\u0647 <code>callbackQuery</code> \u067e\u0627\u0633\u062e \u062f\u0647\u06cc\u062f (\u0642\u0628\u0644 \u0627\u0632 \u067e\u0631\u062f\u0627\u0632\u0634 <code>answerCallbackQuery</code> \u0631\u0627 \u0641\u0631\u0627\u062e\u0648\u0627\u0646\u06cc \u06a9\u0646\u06cc\u062f).</li> </ul> <pre><code>@CommandHandler.CallbackQuery([\"text\"])\nsuspend fun test(user: User, bot: TelegramBot) {\n    //...\n}\n</code></pre>"},{"location":"fa/Handlers/#commonhandler","title":"CommonHandler","text":"<p>Annotation <code>CommonHandler</code> \u0628\u0631\u0627\u06cc \u062a\u0648\u0627\u0628\u0639\u06cc \u0627\u0633\u062a \u06a9\u0647 \u062f\u0633\u062a\u0648\u0631\u0627\u062a\u06cc \u0628\u0627 \u0627\u0648\u0644\u0648\u06cc\u062a \u06a9\u0645\u062a\u0631 \u0646\u0633\u0628\u062a \u0628\u0647 <code>CommandHandler</code> \u0648 <code>InputHandler</code> \u0631\u0627 \u067e\u0631\u062f\u0627\u0632\u0634 \u0645\u06cc\u200c\u06a9\u0646\u062f. \u062f\u0631 \u0633\u0637\u062d \u0645\u0646\u0628\u0639 \u0627\u0633\u062a\u0641\u0627\u062f\u0647 \u0645\u06cc\u200c\u0634\u0648\u062f \u0648 \u0631\u0627\u0647\u06cc \u0627\u0646\u0639\u0637\u0627\u0641\u200c\u067e\u0630\u06cc\u0631 \u0628\u0631\u0627\u06cc \u062a\u0639\u0631\u06cc\u0641 common command handlers \u0641\u0631\u0627\u0647\u0645 \u0645\u06cc\u200c\u06a9\u0646\u062f.</p> <p>\u062a\u0648\u062c\u0647 \u062f\u0627\u0634\u062a\u0647 \u0628\u0627\u0634\u06cc\u062f\u060c \u0627\u0648\u0644\u0648\u06cc\u062a \u0641\u0642\u0637 \u062f\u0631\u0648\u0646 <code>@CommonHandler</code>\u0647\u0627 \u06a9\u0627\u0631 \u0645\u06cc\u200c\u06a9\u0646\u062f (\u06cc\u0639\u0646\u06cc \u0631\u0648\u06cc \u062f\u06cc\u06af\u0631 handlers \u062a\u0623\u062b\u06cc\u0631 \u0646\u0645\u06cc\u200c\u06af\u0630\u0627\u0631\u062f).</p>"},{"location":"fa/Handlers/#commonhandlertext","title":"CommonHandler.Text","text":"<p>\u0627\u06cc\u0646 annotation \u0628\u0631\u0627\u06cc \u062a\u0637\u0628\u06cc\u0642 \u0645\u062a\u0646 \u062f\u0631 \u0645\u0642\u0627\u0628\u0644 \u0622\u067e\u062f\u06cc\u062a\u200c\u0647\u0627 \u0645\u0634\u062e\u0635 \u0634\u062f\u0647 \u0627\u0633\u062a. \u0634\u0627\u0645\u0644 \u062e\u0648\u0627\u0635\u06cc \u0628\u0631\u0627\u06cc \u062a\u0639\u0631\u06cc\u0641 \u0645\u062a\u0646 \u062a\u0637\u0628\u06cc\u0642\u06cc\u060c \u0634\u0631\u0627\u06cc\u0637 \u0641\u06cc\u0644\u062a\u0631\u060c \u0627\u0648\u0644\u0648\u06cc\u062a \u0648 scope \u0627\u0633\u062a.</p> <ul> <li>value: \u0645\u062a\u0646\u06cc \u06a9\u0647 \u062f\u0631 \u0645\u0642\u0627\u0628\u0644 \u0622\u067e\u062f\u06cc\u062a\u200c\u0647\u0627\u06cc \u062f\u0631\u06cc\u0627\u0641\u062a\u06cc \u062a\u0637\u0628\u06cc\u0642 \u062f\u0627\u062f\u0647 \u0645\u06cc\u200c\u0634\u0648\u062f.</li> <li>filter: \u06cc\u06a9 \u06a9\u0644\u0627\u0633 \u06a9\u0647 \u0634\u0631\u0627\u06cc\u0637\u06cc \u0631\u0627 \u06a9\u0647 \u062f\u0631 \u0641\u0631\u0622\u06cc\u0646\u062f \u062a\u0637\u0628\u06cc\u0642 \u0627\u0633\u062a\u0641\u0627\u062f\u0647 \u0645\u06cc\u200c\u0634\u0648\u062f \u062a\u0639\u0631\u06cc\u0641 \u0645\u06cc\u200c\u06a9\u0646\u062f.</li> <li>priority: \u0633\u0637\u062d \u0627\u0648\u0644\u0648\u06cc\u062a handler\u060c \u06a9\u0647 0 \u0628\u0627\u0644\u0627\u062a\u0631\u06cc\u0646 \u0627\u0648\u0644\u0648\u06cc\u062a \u0627\u0633\u062a.</li> <li>scope: \u0645\u062a\u0646\u06cc \u06a9\u0647 \u062f\u0631 \u0622\u0646 \u062a\u0637\u0628\u06cc\u0642 \u0645\u062a\u0646 \u0628\u0631\u0631\u0633\u06cc \u062e\u0648\u0627\u0647\u062f \u0634\u062f.</li> </ul> <pre><code>@CommonHandler.Text([\"text\"], filter = isNewUserFilter::class, priority = 10)\nsuspend fun test(user: User, bot: TelegramBot) {\n    //...\n}\n</code></pre>"},{"location":"fa/Handlers/#commonhandlerregex","title":"CommonHandler.Regex","text":"<p>\u0645\u0634\u0627\u0628\u0647 <code>CommonHandler.Text</code>\u060c \u0627\u06cc\u0646 annotation \u0628\u0631\u0627\u06cc \u062a\u0637\u0628\u06cc\u0642 \u0622\u067e\u062f\u06cc\u062a\u200c\u0647\u0627 \u0628\u0631 \u0627\u0633\u0627\u0633 \u0639\u0628\u0627\u0631\u0627\u062a \u0645\u0646\u0638\u0645 \u0627\u0633\u062a\u0641\u0627\u062f\u0647 \u0645\u06cc\u200c\u0634\u0648\u062f. \u0634\u0627\u0645\u0644 \u062e\u0648\u0627\u0635\u06cc \u0628\u0631\u0627\u06cc \u062a\u0639\u0631\u06cc\u0641 \u0627\u0644\u06af\u0648\u06cc regex\u060c options\u060c \u0634\u0631\u0627\u06cc\u0637 \u0641\u06cc\u0644\u062a\u0631\u060c \u0627\u0648\u0644\u0648\u06cc\u062a \u0648 scope \u0627\u0633\u062a.</p> <ul> <li>value: \u0627\u0644\u06af\u0648\u06cc regex \u0628\u0631\u0627\u06cc \u062a\u0637\u0628\u06cc\u0642.</li> <li>options: options regex \u06a9\u0647 \u0631\u0641\u062a\u0627\u0631 \u0627\u0644\u06af\u0648\u06cc regex \u0631\u0627 \u062a\u063a\u06cc\u06cc\u0631 \u0645\u06cc\u200c\u062f\u0647\u0646\u062f.</li> <li>filter: \u06cc\u06a9 \u06a9\u0644\u0627\u0633 \u06a9\u0647 \u0634\u0631\u0627\u06cc\u0637\u06cc \u0631\u0627 \u06a9\u0647 \u062f\u0631 \u0641\u0631\u0622\u06cc\u0646\u062f \u062a\u0637\u0628\u06cc\u0642 \u0627\u0633\u062a\u0641\u0627\u062f\u0647 \u0645\u06cc\u200c\u0634\u0648\u062f \u062a\u0639\u0631\u06cc\u0641 \u0645\u06cc\u200c\u06a9\u0646\u062f.</li> <li>priority: \u0633\u0637\u062d \u0627\u0648\u0644\u0648\u06cc\u062a handler\u060c \u06a9\u0647 0 \u0628\u0627\u0644\u0627\u062a\u0631\u06cc\u0646 \u0627\u0648\u0644\u0648\u06cc\u062a \u0627\u0633\u062a.</li> <li>scope: \u0645\u062a\u0646\u06cc \u06a9\u0647 \u062f\u0631 \u0622\u0646 \u062a\u0637\u0628\u06cc\u0642 regex \u0628\u0631\u0631\u0633\u06cc \u062e\u0648\u0627\u0647\u062f \u0634\u062f.</li> </ul> <pre><code>@CommonHandler.Regex(\"^\\d+$\", scope = [UpdateType.EDITED_MESSAGE])\nsuspend fun test(update: EditedMessageUpdate, user: User, bot: TelegramBot) {\n    //...\n}\n</code></pre>"},{"location":"fa/Handlers/#inputhandler","title":"InputHandler","text":"<p>Annotation <code>InputHandler</code> \u062a\u0648\u0627\u0628\u0639\u06cc \u0631\u0627 \u06a9\u0647 \u0631\u0648\u06cc\u062f\u0627\u062f\u0647\u0627\u06cc \u0648\u0631\u0648\u062f\u06cc \u062e\u0627\u0635 \u0631\u0627 \u067e\u0631\u062f\u0627\u0632\u0634 \u0645\u06cc\u200c\u06a9\u0646\u0646\u062f \u0639\u0644\u0627\u0645\u062a\u200c\u06af\u0630\u0627\u0631\u06cc \u0645\u06cc\u200c\u06a9\u0646\u062f. \u0628\u0631\u0627\u06cc \u062a\u0648\u0627\u0628\u0639\u06cc \u0627\u0633\u062a \u06a9\u0647 \u0648\u0631\u0648\u062f\u06cc\u200c\u0647\u0627 \u0631\u0627 \u062f\u0631 \u0632\u0645\u0627\u0646 \u0627\u062c\u0631\u0627 \u0645\u062f\u06cc\u0631\u06cc\u062a \u0645\u06cc\u200c\u06a9\u0646\u0646\u062f \u0648 \u0634\u0627\u0645\u0644 \u062e\u0648\u0627\u0635\u06cc \u0628\u0631\u0627\u06cc \u062a\u0639\u0631\u06cc\u0641 \u06a9\u0644\u06cc\u062f\u0648\u0627\u0698\u0647\u200c\u0647\u0627\u06cc \u0648\u0631\u0648\u062f\u06cc \u0648 scope \u0627\u0633\u062a.</p> <ul> <li>value: \u06a9\u0644\u06cc\u062f\u0648\u0627\u0698\u0647\u200c\u0647\u0627\u06cc\u06cc \u0631\u0627 \u06a9\u0647 \u0628\u0627 \u0631\u0648\u06cc\u062f\u0627\u062f \u0648\u0631\u0648\u062f\u06cc \u0645\u0631\u062a\u0628\u0637 \u0647\u0633\u062a\u0646\u062f \u0645\u0634\u062e\u0635 \u0645\u06cc\u200c\u06a9\u0646\u062f.</li> </ul> <pre><code>@InputHandler(\"text\")\nsuspend fun test(update: ProcessedUpdate, user: User, bot: TelegramBot) {\n    //...\n}\n</code></pre>"},{"location":"fa/Handlers/#unprocessedhandler","title":"UnprocessedHandler","text":"<p>Annotation <code>UnprocessedHandler</code> \u0628\u0631\u0627\u06cc \u0639\u0644\u0627\u0645\u062a\u200c\u06af\u0630\u0627\u0631\u06cc \u062a\u0648\u0627\u0628\u0639\u06cc \u06a9\u0647 \u0622\u067e\u062f\u06cc\u062a\u200c\u0647\u0627\u06cc\u06cc \u0631\u0627 \u06a9\u0647 \u062a\u0648\u0633\u0637 \u0633\u0627\u06cc\u0631 handlers \u067e\u0631\u062f\u0627\u0632\u0634 \u0646\u0634\u062f\u0647\u200c\u0627\u0646\u062f \u0645\u062f\u06cc\u0631\u06cc\u062a \u0645\u06cc\u200c\u06a9\u0646\u0646\u062f \u0627\u0633\u062a\u0641\u0627\u062f\u0647 \u0645\u06cc\u200c\u0634\u0648\u062f. \u0627\u0637\u0645\u06cc\u0646\u0627\u0646 \u062d\u0627\u0635\u0644 \u0645\u06cc\u200c\u06a9\u0646\u062f \u06a9\u0647 \u0647\u0631 \u0622\u067e\u062f\u06cc\u062a \u063a\u06cc\u0631\u067e\u0631\u062f\u0627\u0632\u0634\u200c\u0634\u062f\u0647 \u0628\u0647 \u0637\u0648\u0631 \u0645\u0646\u0627\u0633\u0628 \u0645\u062f\u06cc\u0631\u06cc\u062a \u0634\u0648\u062f\u060c \u0628\u0627 \u0627\u06cc\u0646 \u062d\u0627\u0644 \u0641\u0642\u0637 \u06cc\u06a9 \u0646\u0642\u0637\u0647 \u067e\u0631\u062f\u0627\u0632\u0634 \u0628\u0631\u0627\u06cc \u0627\u06cc\u0646 \u0646\u0648\u0639 handler \u0645\u0645\u06a9\u0646 \u0627\u0633\u062a.</p> <pre><code>@UnprocessedHandler\nsuspend fun test(update: ProcessedUpdate, user: User, bot: TelegramBot) {\n    //...\n}\n</code></pre>"},{"location":"fa/Handlers/#updatehandler","title":"UpdateHandler","text":"<p>Annotation <code>UpdateHandler</code> \u062a\u0648\u0627\u0628\u0639\u06cc \u0631\u0627 \u06a9\u0647 \u0627\u0646\u0648\u0627\u0639 \u062e\u0627\u0635\u06cc \u0627\u0632 \u0622\u067e\u062f\u06cc\u062a\u200c\u0647\u0627\u06cc \u062f\u0631\u06cc\u0627\u0641\u062a\u06cc \u0631\u0627 \u0645\u062f\u06cc\u0631\u06cc\u062a \u0645\u06cc\u200c\u06a9\u0646\u0646\u062f \u0639\u0644\u0627\u0645\u062a\u200c\u06af\u0630\u0627\u0631\u06cc \u0645\u06cc\u200c\u06a9\u0646\u062f. \u0631\u0627\u0647\u06cc \u0628\u0631\u0627\u06cc \u062f\u0633\u062a\u0647\u200c\u0628\u0646\u062f\u06cc \u0648 \u067e\u0631\u062f\u0627\u0632\u0634 \u0645\u0646\u0638\u0645 \u0627\u0646\u0648\u0627\u0639 \u0645\u062e\u062a\u0644\u0641 \u0622\u067e\u062f\u06cc\u062a \u0641\u0631\u0627\u0647\u0645 \u0645\u06cc\u200c\u06a9\u0646\u062f.</p> <ul> <li>type: \u0627\u0646\u0648\u0627\u0639 \u0622\u067e\u062f\u06cc\u062a\u200c\u0647\u0627\u06cc\u06cc \u06a9\u0647 \u062a\u0627\u0628\u0639 handler \u067e\u0631\u062f\u0627\u0632\u0634 \u062e\u0648\u0627\u0647\u062f \u06a9\u0631\u062f \u0631\u0627 \u0645\u0634\u062e\u0635 \u0645\u06cc\u200c\u06a9\u0646\u062f.</li> </ul> <pre><code>@UpdateHandler([UpdateType.PRE_CHECKOUT_QUERY])\nsuspend fun test(update: PreCheckoutQueryUpdate, user: User, bot: TelegramBot) {\n    //...\n}\n</code></pre>"},{"location":"fa/Handlers/#handler-companion-annotations","title":"Handler Companion Annotations","text":"<p>\u0647\u0645\u0686\u0646\u06cc\u0646 annotation\u200c\u0647\u0627\u06cc \u0627\u0636\u0627\u0641\u06cc \u0648\u062c\u0648\u062f \u062f\u0627\u0631\u062f \u06a9\u0647 \u0628\u0631\u0627\u06cc handlers \u0627\u062e\u062a\u06cc\u0627\u0631\u06cc \u0647\u0633\u062a\u0646\u062f \u0648 \u0631\u0641\u062a\u0627\u0631 \u0627\u062e\u062a\u06cc\u0627\u0631\u06cc handlers \u0631\u0627 \u062a\u06a9\u0645\u06cc\u0644 \u0645\u06cc\u200c\u06a9\u0646\u0646\u062f.</p> <p>\u0622\u0646\u200c\u0647\u0627 \u0645\u06cc\u200c\u062a\u0648\u0627\u0646\u0646\u062f \u0647\u0645 \u0631\u0648\u06cc \u062a\u0648\u0627\u0628\u0639\u06cc \u06a9\u0647 handler \u0631\u0648\u06cc \u0622\u0646\u200c\u0647\u0627 \u0627\u0639\u0645\u0627\u0644 \u0634\u062f\u0647 \u0627\u0633\u062a \u0648 \u0647\u0645 \u0631\u0648\u06cc \u06a9\u0644\u0627\u0633\u200c\u0647\u0627 \u0642\u0631\u0627\u0631 \u06af\u06cc\u0631\u0646\u062f\u060c \u062f\u0631 \u0645\u0648\u0631\u062f \u062f\u0648\u0645 \u0628\u0647\u200c\u0637\u0648\u0631 \u062e\u0648\u062f\u06a9\u0627\u0631 \u0631\u0648\u06cc \u062a\u0645\u0627\u0645 handlers \u062f\u0631 \u0622\u0646 \u06a9\u0644\u0627\u0633 \u0627\u0639\u0645\u0627\u0644 \u062e\u0648\u0627\u0647\u0646\u062f \u0634\u062f\u060c \u0627\u0645\u0627 \u0627\u06af\u0631 \u0646\u06cc\u0627\u0632 \u0628\u0627\u0634\u062f \u0645\u06cc\u200c\u062a\u0648\u0627\u0646 \u0631\u0641\u062a\u0627\u0631 \u062c\u062f\u0627\u06af\u0627\u0646\u0647 \u0628\u0631\u0627\u06cc \u0628\u0631\u062e\u06cc \u062a\u0648\u0627\u0628\u0639 \u062f\u0627\u0634\u062a.</p> <p>\u06cc\u0639\u0646\u06cc \u0627\u0639\u0645\u0627\u0644 \u0628\u0627 \u0627\u0648\u0644\u0648\u06cc\u062a\u06cc \u0627\u06cc\u0646\u200c\u06af\u0648\u0646\u0647 \u0627\u0633\u062a\u060c <code>Function</code> &gt; <code>Class</code>\u060c \u06a9\u0647 function \u0627\u0648\u0644\u0648\u06cc\u062a \u0628\u0627\u0644\u0627\u062a\u0631\u06cc \u062f\u0627\u0631\u062f.</p>"},{"location":"fa/Handlers/#rate-limiting","title":"Rate Limiting","text":"<p>\u0639\u0644\u0627\u0648\u0647 \u0628\u0631 \u0627\u06cc\u0646\u060c \u0645\u06a9\u0627\u0646\u06cc\u0633\u0645 \u0645\u062d\u062f\u0648\u062f\u06cc\u062a \u0646\u0631\u062e\u06cc \u0631\u0627 \u06a9\u0647 \u062f\u0631 annotation\u200c\u0647\u0627 \u062a\u0648\u0636\u06cc\u062d \u062f\u0627\u062f\u0647 \u0634\u062f\u0647 \u0627\u0633\u062a \u0646\u06cc\u0632 \u0622\u0634\u06a9\u0627\u0631 \u0645\u06cc\u200c\u06a9\u0646\u06cc\u0645.</p> <p>\u0645\u06cc\u200c\u062a\u0648\u0627\u0646\u06cc\u062f \u0645\u062d\u062f\u0648\u062f\u06cc\u062a\u200c\u0647\u0627\u06cc \u06a9\u0644\u06cc \u0628\u0631\u0627\u06cc \u0647\u0631 \u06a9\u0627\u0631\u0628\u0631 \u062a\u0646\u0638\u06cc\u0645 \u06a9\u0646\u06cc\u062f:</p> <pre><code>// ...\nval bot = TelegramBot(\"BOT_TOKEN\") {\n    rateLimiter { // \u0645\u062d\u062f\u0648\u062f\u06cc\u062a\u200c\u0647\u0627\u06cc \u06a9\u0644\u06cc\n        limits = RateLimits(period = 10000, rate = 5)\n    }\n}\n</code></pre>"},{"location":"fa/Handlers/#handler-specific","title":"Handler specific","text":"<p>\u0645\u062d\u062f\u0648\u062f\u06cc\u062a\u200c\u0647\u0627\u06cc \u0631\u0648\u06cc \u0628\u0631\u062e\u06cc \u0627\u0642\u062f\u0627\u0645\u0627\u062a \u0645\u06cc\u200c\u062a\u0648\u0627\u0646\u0646\u062f \u0628\u0627 \u0627\u0633\u062a\u0641\u0627\u062f\u0647 \u0627\u0632 annotation <code>RateLimits</code> \u062a\u0639\u0631\u06cc\u0641 \u0634\u0648\u0646\u062f\u060c <code>CommandHandler</code>\u060c <code>CommandHandler.CallbackQuery</code>\u060c <code>InputHandler</code>\u060c <code>CommonHandler</code> \u0631\u0627 \u067e\u0634\u062a\u06cc\u0628\u0627\u0646\u06cc \u0645\u06cc\u200c\u06a9\u0646\u062f.</p> <pre><code>@CommandHandler([\"/start\"])\n@RateLimits(period = 1000L, rate = 1L)\nsuspend fun start(user: User, bot: TelegramBot) {\n    // ...\n}\n</code></pre>"},{"location":"fa/Handlers/#guard","title":"Guard","text":"<p>\u0645\u06cc\u200c\u062a\u0648\u0627\u0646\u06cc\u062f guards \u0631\u0627 \u062c\u062f\u0627\u06af\u0627\u0646\u0647 \u0628\u0631\u0627\u06cc \u06a9\u0646\u062a\u0631\u0644 \u062f\u0633\u062a\u0631\u0633\u06cc \u0628\u0647 handlers \u062a\u0639\u0631\u06cc\u0641 \u06a9\u0646\u06cc\u062f\u060c <code>CommandHandler</code>\u060c <code>CommandHandler.CallbackQuery</code>\u060c <code>InputHandler</code> \u0631\u0627 \u067e\u0634\u062a\u06cc\u0628\u0627\u0646\u06cc \u0645\u06cc\u200c\u06a9\u0646\u062f:</p> <pre><code>@CommandHandler([\"text\"])\n@Guard(isAdminGuard::class)\nsuspend fun test(user: User, bot: TelegramBot) {\n    //...\n}\n</code></pre>"},{"location":"fa/Handlers/#argparser","title":"ArgParser","text":"<p>\u0645\u06cc\u200c\u062a\u0648\u0627\u0646\u06cc\u062f parser \u062f\u0644\u062e\u0648\u0627\u0647 \u0622\u0631\u06af\u0648\u0645\u0627\u0646 \u0631\u0627 \u062c\u062f\u0627\u06af\u0627\u0646\u0647 \u0628\u0631\u0627\u06cc \u062a\u063a\u06cc\u06cc\u0631 \u0631\u0641\u062a\u0627\u0631 parse \u06a9\u0631\u062f\u0646 \u067e\u0627\u0631\u0627\u0645\u062a\u0631\u0647\u0627 \u0628\u0631\u0627\u06cc handlers \u062a\u0639\u0631\u06cc\u0641 \u06a9\u0646\u06cc\u062f\u060c <code>CommandHandler</code>\u060c <code>CommandHandler.CallbackQuery</code>\u060c <code>CommonHandler</code> \u0631\u0627 \u067e\u0634\u062a\u06cc\u0628\u0627\u0646\u06cc \u0645\u06cc\u200c\u06a9\u0646\u062f:</p> <pre><code>@CommandHandler([\"text\"])\n@ArgParser(SpaceArgParser::class)\nsuspend fun test(user: User, bot: TelegramBot) {\n    //...\n}\n</code></pre> <p>\u0647\u0645\u0686\u0646\u06cc\u0646 <code>defaultArgParser</code> \u0631\u0627 \u0628\u0628\u06cc\u0646\u06cc\u062f</p>"},{"location":"fa/Handlers/#conclusion","title":"Conclusion","text":"<p>\u0627\u06cc\u0646 annotation\u200c\u0647\u0627 \u0627\u0628\u0632\u0627\u0631\u0647\u0627\u06cc \u0642\u0648\u06cc \u0648 \u0627\u0646\u0639\u0637\u0627\u0641\u200c\u067e\u0630\u06cc\u0631\u06cc \u0628\u0631\u0627\u06cc \u0645\u062f\u06cc\u0631\u06cc\u062a \u062f\u0633\u062a\u0648\u0631\u0627\u062a\u060c \u0648\u0631\u0648\u062f\u06cc\u200c\u0647\u0627 \u0648 \u0631\u0648\u06cc\u062f\u0627\u062f\u0647\u0627 \u0641\u0631\u0627\u0647\u0645 \u0645\u06cc\u200c\u06a9\u0646\u0646\u062f\u060c \u0647\u0645\u0686\u0646\u06cc\u0646 \u0627\u0645\u06a9\u0627\u0646 \u062a\u0646\u0638\u06cc\u0645 \u062c\u062f\u0627\u06af\u0627\u0646\u0647 \u0645\u062d\u062f\u0648\u062f\u06cc\u062a \u0646\u0631\u062e \u0648 guards \u0631\u0627 \u0641\u0631\u0627\u0647\u0645 \u0645\u06cc\u200c\u0622\u0648\u0631\u0646\u062f\u060c \u06a9\u0647 \u0633\u0627\u062e\u062a\u0627\u0631 \u06a9\u0644\u06cc \u0648 \u0646\u06af\u0647\u062f\u0627\u0631\u06cc \u062a\u0648\u0633\u0639\u0647 \u0631\u0628\u0627\u062a \u0631\u0627 \u062a\u0642\u0648\u06cc\u062a \u0645\u06cc\u200c\u06a9\u0646\u062f.</p>"},{"location":"fa/Interceptors-%28middleware%29/#5-order-matters","title":"5. Order Matters","text":"<p>Register interceptors in the order you want them to run:</p> <pre><code>// More general checks first\nbot.update.pipeline.intercept(ProcessingPipePhase.Setup) {\n    // Global ban check\n}\n\n// More specific checks later\nbot.update.pipeline.intercept(ProcessingPipePhase.Validation) {\n    // Handler-specific permission check\n}\n</code></pre>"},{"location":"fa/Update-parsing/","title":"\u0628\u0647\u200c\u0631\u0648\u0632\u0631\u0633\u0627\u0646\u06cc \u067e\u0627\u0631\u0633\u06cc\u0646\u06af","text":""},{"location":"fa/Update-parsing/#_1","title":"\u0628\u0627\u0631 \u0645\u062a\u0646\u06cc","text":"<p>\u0628\u0631\u062e\u06cc \u0627\u0632 \u0628\u0647\u200c\u0631\u0648\u0632\u0631\u0633\u0627\u0646\u06cc\u200c\u0647\u0627 \u0645\u0645\u06a9\u0646 \u0627\u0633\u062a \u0628\u0627\u0631 \u0645\u062a\u0646\u06cc \u062f\u0627\u0634\u062a\u0647 \u0628\u0627\u0634\u0646\u062f \u06a9\u0647 \u0645\u06cc\u200c\u062a\u0648\u0627\u0646 \u0622\u0646\u200c\u0647\u0627 \u0631\u0627 \u0628\u0631\u0627\u06cc \u067e\u0631\u062f\u0627\u0632\u0634 \u0628\u06cc\u0634\u062a\u0631 \u062a\u062c\u0632\u06cc\u0647 \u06a9\u0631\u062f. \u0628\u06cc\u0627\u06cc\u06cc\u062f \u0628\u0647 \u0622\u0646\u200c\u0647\u0627 \u0646\u06af\u0627\u0647\u06cc \u0628\u06cc\u0646\u062f\u0627\u0632\u06cc\u0645:</p> <ul> <li><code>MessageUpdate</code> -&gt; <code>message.text</code></li> <li><code>EditedMessageUpdate</code> -&gt; <code>editedMessage.text</code></li> <li><code>ChannelPostUpdate</code> -&gt; <code>channelPost.text</code></li> <li><code>EditedChannelPostUpdate</code> -&gt; <code>editedChannelPost.text</code></li> <li><code>InlineQueryUpdate</code> -&gt; <code>inlineQuery.query</code></li> <li><code>ChosenInlineResultUpdate</code> -&gt; <code>chosenInlineResult.query</code></li> <li><code>CallbackQueryUpdate</code> -&gt; <code>callbackQuery.data</code></li> <li><code>ShippingQueryUpdate</code> -&gt; <code>shippingQuery.invoicePayload</code></li> <li><code>PreCheckoutQueryUpdate</code> -&gt; <code>preCheckoutQuery.invoicePayload</code></li> <li><code>PollUpdate</code> -&gt; <code>poll.question</code></li> <li><code>PurchasedPaidMediaUpdate</code> -&gt; <code>purchasedPaidMedia.paidMediaPayload</code></li> </ul> <p>\u0627\u0632 \u0628\u0647\u200c\u0631\u0648\u0632\u0631\u0633\u0627\u0646\u06cc\u200c\u0647\u0627\u06cc \u0641\u0647\u0631\u0633\u062a \u0634\u062f\u0647\u060c \u06cc\u06a9 \u067e\u0627\u0631\u0627\u0645\u062a\u0631 \u062e\u0627\u0635 \u0627\u0646\u062a\u062e\u0627\u0628 \u0648 \u0628\u0647 \u0639\u0646\u0648\u0627\u0646 <code>TextReference</code> \u0628\u0631\u0627\u06cc \u067e\u0631\u062f\u0627\u0632\u0634 \u0628\u06cc\u0634\u062a\u0631 \u062f\u0631 \u0646\u0638\u0631 \u06af\u0631\u0641\u062a\u0647 \u0645\u06cc\u200c\u0634\u0648\u062f.</p>"},{"location":"fa/Update-parsing/#_2","title":"\u067e\u0627\u0631\u0633\u06cc\u0646\u06af","text":"<p>\u067e\u0627\u0631\u0627\u0645\u062a\u0631\u0647\u0627\u06cc \u0627\u0646\u062a\u062e\u0627\u0628 \u0634\u062f\u0647 \u0628\u0627 \u062c\u062f\u0627\u06a9\u0646\u0646\u062f\u0647\u200c\u0647\u0627\u06cc \u067e\u06cc\u06a9\u0631\u0628\u0646\u062f\u06cc \u0634\u062f\u0647 \u0645\u0646\u0627\u0633\u0628 \u0628\u0647 \u062f\u0633\u062a\u0648\u0631 \u0648 \u067e\u0627\u0631\u0627\u0645\u062a\u0631\u0647\u0627\u06cc \u0622\u0646 \u062a\u062c\u0632\u06cc\u0647 \u0645\u06cc\u200c\u0634\u0648\u0646\u062f.</p> <p>\u067e\u06cc\u06a9\u0631\u0628\u0646\u062f\u06cc \u0628\u0644\u0648\u06a9 <code>commandParsing</code> \u0631\u0627 \u0645\u0634\u0627\u0647\u062f\u0647 \u06a9\u0646\u06cc\u062f.</p> <p>\u0645\u06cc\u200c\u062a\u0648\u0627\u0646\u06cc\u062f \u062f\u0631 \u0646\u0645\u0648\u062f\u0627\u0631 \u0632\u06cc\u0631 \u0628\u0628\u06cc\u0646\u06cc\u062f \u06a9\u062f\u0627\u0645 \u06a9\u0627\u0645\u067e\u0648\u0646\u0646\u062a\u200c\u0647\u0627 \u0628\u0647 \u06a9\u062f\u0627\u0645 \u0628\u062e\u0634 \u0627\u0632 \u062a\u0627\u0628\u0639 \u0647\u062f\u0641 \u0646\u06af\u0627\u0634\u062a \u0634\u062f\u0647\u200c\u0627\u0646\u062f.</p> <p> </p>"},{"location":"fa/Update-parsing/#parammapping","title":"@ParamMapping","text":"<p>\u0647\u0645\u0686\u0646\u06cc\u0646 \u06cc\u06a9 \u0627\u0646\u062a\u0632\u0627\u0639 \u0628\u0647 \u0646\u0627\u0645 <code>@ParamMapping</code> \u0628\u0631\u0627\u06cc \u0631\u0627\u062d\u062a\u06cc \u06cc\u0627 \u0647\u0631 \u0645\u0648\u0631\u062f \u062e\u0627\u0635\u06cc \u0648\u062c\u0648\u062f \u062f\u0627\u0631\u062f.</p> <p>\u0628\u0647 \u0634\u0645\u0627 \u0627\u062c\u0627\u0632\u0647 \u0645\u06cc\u200c\u062f\u0647\u062f \u0646\u0627\u0645 \u067e\u0627\u0631\u0627\u0645\u062a\u0631 \u0631\u0627 \u0627\u0632 \u0645\u062a\u0646 \u0648\u0631\u0648\u062f\u06cc \u0628\u0647 \u0647\u0631 \u067e\u0627\u0631\u0627\u0645\u062a\u0631\u06cc \u0646\u06af\u0627\u0634\u062a \u06a9\u0646\u06cc\u062f.</p> <p>\u0627\u06cc\u0646 \u0647\u0645\u0686\u0646\u06cc\u0646 \u0628\u0631\u0627\u06cc \u0632\u0645\u0627\u0646\u06cc \u06a9\u0647 \u062f\u0627\u062f\u0647 \u0648\u0631\u0648\u062f\u06cc \u0634\u0645\u0627 \u0645\u062d\u062f\u0648\u062f \u0627\u0633\u062a \u0631\u0627\u062d\u062a \u0627\u0633\u062a\u060c \u0628\u0647 \u0639\u0646\u0648\u0627\u0646 \u0645\u062b\u0627\u0644 <code>CallbackData</code> (64 \u06a9\u0627\u0631\u0627\u06a9\u062a\u0631).</p> <p>\u0645\u062b\u0627\u0644 \u0627\u0633\u062a\u0641\u0627\u062f\u0647 \u0631\u0627 \u0645\u0634\u0627\u0647\u062f\u0647 \u06a9\u0646\u06cc\u062f: <code>greeting?name=Adam</code></p> <pre><code>@CommandHandler([\"greeting\"])\nsuspend fun greeting(@ParamMapping(\"name\") anyParameterName: String, user: User, bot: TelegramBot) {\n    message { \"Hello, $anyParameterName\" }.send(to = user, via = bot)\n}\n</code></pre> <p>\u0648 \u0647\u0645\u0686\u0646\u06cc\u0646 \u0645\u06cc\u200c\u062a\u0648\u0627\u0646\u062f \u0628\u0631\u0627\u06cc \u06af\u0631\u0641\u062a\u0646 \u067e\u0627\u0631\u0627\u0645\u062a\u0631\u0647\u0627\u06cc \u0628\u062f\u0648\u0646 \u0646\u0627\u0645 \u0627\u0633\u062a\u0641\u0627\u062f\u0647 \u0634\u0648\u062f\u060c \u062f\u0631 \u0645\u0648\u0627\u0631\u062f\u06cc \u06a9\u0647 \u067e\u0627\u0631\u0633\u200c\u06af\u0631 \u0637\u0648\u0631\u06cc \u062a\u0646\u0638\u06cc\u0645 \u0634\u062f\u0647 \u06a9\u0647 \u0646\u0627\u0645 \u067e\u0627\u0631\u0627\u0645\u062a\u0631\u0647\u0627 \u0631\u062f \u0634\u0648\u0646\u062f \u06cc\u0627 \u062d\u062a\u06cc \u0648\u062c\u0648\u062f \u0646\u062f\u0627\u0634\u062a\u0647 \u0628\u0627\u0634\u0646\u062f\u060c \u06a9\u0647 \u0628\u0627 \u0627\u0644\u06af\u0648\u06cc 'param_n' \u0639\u0628\u0648\u0631 \u0645\u06cc\u200c\u06a9\u0646\u062f\u060c \u062c\u0627\u06cc\u06cc \u06a9\u0647 <code>n</code> \u062a\u0648\u0627\u0644\u06cc \u0622\u0646 \u0627\u0633\u062a.</p> <p>\u0628\u0631\u0627\u06cc \u0645\u062b\u0627\u0644 \u0645\u062a\u0646 \u0632\u06cc\u0631 - <code>myCommand?p1=v1&amp;v2&amp;p3=&amp;p4=v4&amp;p5=</code>\u060c \u0628\u0647 \u0627\u06cc\u0646 \u0635\u0648\u0631\u062a \u062a\u062c\u0632\u06cc\u0647 \u0645\u06cc\u200c\u0634\u0648\u062f: * \u062f\u0633\u062a\u0648\u0631 - <code>myCommand</code> * \u067e\u0627\u0631\u0627\u0645\u062a\u0631\u0647\u0627   * <code>p1</code> = <code>v1</code>   * <code>param_2</code> = <code>v2</code>   * <code>p3</code> = <code>* `p4` = `v4`   * `p5` =</code></p> <p>\u0647\u0645\u0627\u0646\u200c\u0637\u0648\u0631 \u06a9\u0647 \u0645\u06cc\u200c\u0628\u06cc\u0646\u06cc\u062f \u0627\u0632 \u0622\u0646\u062c\u0627 \u06a9\u0647 \u067e\u0627\u0631\u0627\u0645\u062a\u0631 \u062f\u0648\u0645 \u0646\u0627\u0645 \u0627\u0639\u0644\u0627\u0645 \u0634\u062f\u0647 \u0646\u062f\u0627\u0631\u062f\u060c \u0628\u0647 \u0639\u0646\u0648\u0627\u0646 <code>param_2</code> \u0646\u0645\u0627\u06cc\u0634 \u062f\u0627\u062f\u0647 \u0645\u06cc\u200c\u0634\u0648\u062f.</p> <p>\u067e\u0633 \u0645\u06cc\u200c\u062a\u0648\u0627\u0646\u06cc\u062f \u0646\u0627\u0645 \u0645\u062a\u063a\u06cc\u0631\u0647\u0627 \u0631\u0627 \u062f\u0631 \u06a9\u0627\u0644\u0628\u06a9 \u062e\u0648\u062f \u06a9\u0648\u062a\u0627\u0647 \u06a9\u0646\u06cc\u062f \u0648 \u0627\u0632 \u0646\u0627\u0645\u200c\u0647\u0627\u06cc \u062e\u0648\u0627\u0646\u0627 \u0648 \u0631\u0648\u0634\u0646 \u062f\u0631 \u06a9\u062f \u0627\u0633\u062a\u0641\u0627\u062f\u0647 \u06a9\u0646\u06cc\u062f.</p>"},{"location":"fa/Update-parsing/#deeplink","title":"Deeplink","text":"<p>\u0628\u0627 \u062a\u0648\u062c\u0647 \u0628\u0647 \u0627\u0637\u0644\u0627\u0639\u0627\u062a \u0628\u0627\u0644\u0627\u060c \u0627\u06af\u0631 \u062f\u0631 \u062f\u0633\u062a\u0648\u0631 start \u062e\u0648\u062f deeplink \u0627\u0646\u062a\u0638\u0627\u0631 \u062f\u0627\u0631\u06cc\u062f \u0645\u06cc\u200c\u062a\u0648\u0627\u0646\u06cc\u062f \u0622\u0646 \u0631\u0627 \u0628\u0627:</p> <pre><code>@CommandHandler([\"/start\"])\nsuspend fun start(@ParamMapping(\"param_1\") deeplink: String?, user: User, bot: TelegramBot) {\n    message { \"deeplink is $deeplink\" }.send(to = user, via = bot)\n}\n</code></pre> <p>\u0628\u06af\u06cc\u0631\u06cc\u062f.</p>"},{"location":"fa/Update-parsing/#_3","title":"\u062f\u0633\u062a\u0648\u0631\u0627\u062a \u06af\u0631\u0648\u0647\u06cc","text":"<p>\u062f\u0631 \u067e\u06cc\u06a9\u0631\u0628\u0646\u062f\u06cc <code>commandParsing</code> \u0645\u0627 \u067e\u0627\u0631\u0627\u0645\u062a\u0631 <code>useIdentifierInGroupCommands</code> \u062f\u0627\u0631\u06cc\u0645 \u06a9\u0647 \u0648\u0642\u062a\u06cc \u0631\u0648\u0634\u0646 \u0627\u0633\u062a\u060c \u0645\u06cc\u200c\u062a\u0648\u0627\u0646\u06cc\u0645 \u0627\u0632 <code>TelegramBot.identifier</code> (\u0641\u0631\u0627\u0645\u0648\u0634 \u0646\u06a9\u0646\u06cc\u062f \u06a9\u0647 \u0627\u06af\u0631 \u0627\u0632 \u067e\u0627\u0631\u0627\u0645\u062a\u0631 \u062a\u0648\u0635\u06cc\u0641 \u0634\u062f\u0647 \u0627\u0633\u062a\u0641\u0627\u062f\u0647 \u0645\u06cc\u200c\u06a9\u0646\u06cc\u062f \u0622\u0646 \u0631\u0627 \u062a\u063a\u06cc\u06cc\u0631 \u062f\u0647\u06cc\u062f) \u062f\u0631 \u0641\u0631\u0622\u06cc\u0646\u062f \u062a\u0637\u0628\u06cc\u0642 \u062f\u0633\u062a\u0648\u0631 \u0627\u0633\u062a\u0641\u0627\u062f\u0647 \u06a9\u0646\u06cc\u0645\u060c \u0627\u06cc\u0646 \u0628\u0647 \u062c\u062f\u0627\u0633\u0627\u0632\u06cc \u062f\u0633\u062a\u0648\u0631\u0627\u062a \u0645\u0634\u0627\u0628\u0647 \u0628\u06cc\u0646 \u0686\u0646\u062f\u06cc\u0646 \u0631\u0628\u0627\u062a \u06a9\u0645\u06a9 \u0645\u06cc\u200c\u06a9\u0646\u062f\u060c \u062f\u0631 \u063a\u06cc\u0631 \u0627\u06cc\u0646 \u0635\u0648\u0631\u062a \u0628\u062e\u0634 <code>@MyBot</code> \u0635\u0631\u0641\u0627\u064b \u0631\u062f \u0645\u06cc\u200c\u0634\u0648\u062f.</p>"},{"location":"fa/Update-parsing/#_4","title":"\u0647\u0645\u0686\u0646\u06cc\u0646 \u0628\u0628\u06cc\u0646\u06cc\u062f","text":"<ul> <li>\u0641\u0639\u0627\u0644\u200c\u0633\u0627\u0632\u06cc \u0641\u0639\u0627\u0644\u06cc\u062a</li> <li>\u0641\u0639\u0627\u0644\u06cc\u062a\u200c\u0647\u0627 \u0648 \u067e\u0631\u062f\u0627\u0632\u0634\u200c\u06af\u0631\u0647\u0627</li> <li>\u0627\u0642\u062f\u0627\u0645\u0627\u062a</li> </ul>"},{"location":"fa/Useful-utilities-and-tips/","title":"\u0627\u0628\u0632\u0627\u0631\u0647\u0627\u06cc \u0645\u0641\u06cc\u062f \u0648 \u0646\u06a9\u0627\u062a","text":""},{"location":"fa/Useful-utilities-and-tips/#processedupdate","title":"\u06a9\u0627\u0631 \u0628\u0627 ProcessedUpdate","text":"<p><code>ProcessedUpdate</code> \u06cc\u06a9 \u06a9\u0644\u0627\u0633 \u062c\u0646\u0631\u06cc\u06a9 \u0628\u0631\u0627\u06cc \u0622\u067e\u062f\u06cc\u062a\u200c\u0647\u0627 \u0627\u0633\u062a \u06a9\u0647 \u0628\u0633\u062a\u0647 \u0628\u0647 \u062f\u0627\u062f\u0647 \u0627\u0635\u0644\u06cc\u060c \u0645\u06cc\u200c\u062a\u0648\u0627\u0646\u062f \u062f\u0631 \u0627\u0646\u0648\u0627\u0639 \u0645\u062e\u062a\u0644\u0641\u06cc \u0627\u0631\u0627\u0626\u0647 \u0634\u0648\u062f (<code>MessageUpdate</code>\u060c <code>CallbackQueryUpdate</code> \u0648 \u063a\u06cc\u0631\u0647.)</p> <p>\u0628\u0646\u0627\u0628\u0631\u0627\u06cc\u0646 \u0645\u06cc\u200c\u062a\u0648\u0627\u0646\u06cc\u062f \u0646\u0648\u0639 \u062f\u0627\u062f\u0647 \u062f\u0631\u06cc\u0627\u0641\u062a\u06cc \u0631\u0627 \u0628\u0631\u0631\u0633\u06cc \u06a9\u0646\u06cc\u062f \u0648 \u0628\u0627 smartcasts \u062f\u0627\u062f\u0647\u200c\u0647\u0627\u06cc \u062e\u0627\u0635\u06cc \u0631\u0627 \u0628\u06cc\u0634\u062a\u0631 \u062f\u0633\u062a\u06a9\u0627\u0631\u06cc \u06a9\u0646\u06cc\u062f\u060c \u0628\u0647 \u0639\u0646\u0648\u0627\u0646 \u0645\u062b\u0627\u0644:</p> <pre><code>// ...\nif (update !is MessageUpdate) {\n    message { \"Only messages are allowed\" }.send(user, bot)\n    return\n}\n// \u062f\u0631 \u0627\u062f\u0627\u0645\u0647\u060c ProcessedUpdate \u0628\u0647 \u0639\u0646\u0648\u0627\u0646 MessageUpdate \u062f\u0631\u06a9 \u0645\u06cc\u200c\u0634\u0648\u062f.\n</code></pre> <p>\u0647\u0645\u0686\u0646\u06cc\u0646 \u06cc\u06a9 \u0627\u06cc\u0646\u062a\u0631\u0641\u06cc\u0633 <code>UserReference</code> \u062f\u0631\u0648\u0646 \u0622\u0646 \u0648\u062c\u0648\u062f \u062f\u0627\u0631\u062f \u06a9\u0647 \u0628\u0647 \u0634\u0645\u0627 \u0627\u0645\u06a9\u0627\u0646 \u0645\u06cc\u200c\u062f\u0647\u062f \u062a\u0639\u06cc\u06cc\u0646 \u06a9\u0646\u06cc\u062f \u0622\u06cc\u0627 \u06cc\u06a9 \u0645\u0631\u062c\u0639 \u06a9\u0627\u0631\u0628\u0631\u06cc \u062f\u0631\u0648\u0646 \u0622\u0646 \u0648\u062c\u0648\u062f \u062f\u0627\u0631\u062f\u060c \u0645\u0648\u0631\u062f \u0627\u0633\u062a\u0641\u0627\u062f\u0647:</p> <pre><code>val user = if(update is UserReference) update.user else null\n</code></pre> <p>\u0627\u06af\u0631 \u0644\u0627\u0632\u0645 \u0628\u0627\u0634\u062f\u060c \u0647\u0645\u06cc\u0634\u0647 \u0622\u067e\u062f\u06cc\u062a \u0627\u0635\u0644\u06cc <code>update</code> \u062f\u0631 \u067e\u0627\u0631\u0627\u0645\u062a\u0631 update \u0648\u062c\u0648\u062f \u062f\u0627\u0631\u062f.</p>"},{"location":"fa/Useful-utilities-and-tips/#_1","title":"\u062a\u0632\u0631\u06cc\u0642 \u0648\u0627\u0628\u0633\u062a\u06af\u06cc\u200c\u0647\u0627","text":"<p>\u06a9\u062a\u0627\u0628\u062e\u0627\u0646\u0647 \u0627\u0632 \u06cc\u06a9 \u0645\u06a9\u0627\u0646\u06cc\u0633\u0645 \u0633\u0627\u062f\u0647 \u0628\u0631\u0627\u06cc \u0645\u0642\u062f\u0627\u0631\u062f\u0647\u06cc \u06a9\u0644\u0627\u0633\u200c\u0647\u0627 \u0627\u0633\u062a\u0641\u0627\u062f\u0647 \u0645\u06cc\u200c\u06a9\u0646\u062f \u06a9\u0647 \u0631\u0648\u0634\u200c\u0647\u0627\u06cc \u067e\u0631\u062f\u0627\u0632\u0634 \u0622\u067e\u062f\u06cc\u062a \u0634\u0645\u0627 \u0628\u0627 annotation\u200c\u0647\u0627\u06cc \u0627\u0631\u0627\u0626\u0647 \u0634\u062f\u0647 \u0628\u0631\u0686\u0633\u0628\u200c\u06af\u0630\u0627\u0631\u06cc \u0634\u062f\u0647\u200c\u0627\u0646\u062f.</p> <p><code>ClassManagerImpl</code> \u0628\u0647 \u0637\u0648\u0631 \u067e\u06cc\u0634\u200c\u0641\u0631\u0636 \u0628\u0631\u0627\u06cc \u0641\u0631\u0627\u062e\u0648\u0627\u0646\u06cc \u0631\u0648\u0634\u200c\u0647\u0627\u06cc \u0628\u0631\u0686\u0633\u0628\u200c\u06af\u0630\u0627\u0631\u06cc \u0634\u062f\u0647 \u0627\u0633\u062a\u0641\u0627\u062f\u0647 \u0645\u06cc\u200c\u0634\u0648\u062f.</p> <p>\u0627\u0645\u0627 \u0627\u06af\u0631 \u0645\u06cc\u200c\u062e\u0648\u0627\u0647\u06cc\u062f \u0627\u0632 \u06a9\u062a\u0627\u0628\u062e\u0627\u0646\u0647\u200c\u0647\u0627\u06cc \u062f\u06cc\u06af\u0631\u06cc \u0628\u0631\u0627\u06cc \u0627\u06cc\u0646 \u0645\u0646\u0638\u0648\u0631 \u0627\u0633\u062a\u0641\u0627\u062f\u0647 \u06a9\u0646\u06cc\u062f\u060c \u0645\u06cc\u200c\u062a\u0648\u0627\u0646\u06cc\u062f \u0627\u06cc\u0646\u062a\u0631\u0641\u06cc\u0633 <code>ClassManager</code> \u0631\u0627 \u0645\u062c\u062f\u062f\u0627\u064b \u062a\u0639\u0631\u06cc\u0641 \u06a9\u0646\u06cc\u062f\u060c \u0628\u0627 \u0627\u0633\u062a\u0641\u0627\u062f\u0647 \u0627\u0632 \u0645\u06a9\u0627\u0646\u06cc\u0633\u0645 \u0645\u0648\u0631\u062f \u0646\u0638\u0631 \u062e\u0648\u062f \u0648 \u0647\u0646\u06af\u0627\u0645 \u0645\u0642\u062f\u0627\u0631\u062f\u0647\u06cc \u0631\u0628\u0627\u062a \u0622\u0646 \u0631\u0627 \u0627\u0631\u0633\u0627\u0644 \u06a9\u0646\u06cc\u062f.</p> <pre><code>fun main() = runBlocking {\n    val bot = TelegramBot(\"BOT_TOKEN\", \"com.example.controllers\") {\n        classManager = ClassManagerImpl()\n    }\n\n    bot.handleUpdates()\n}\n</code></pre>"},{"location":"fa/Useful-utilities-and-tips/#_2","title":"\u0641\u06cc\u0644\u062a\u0631 \u06a9\u0631\u062f\u0646 \u0622\u067e\u062f\u06cc\u062a\u200c\u0647\u0627","text":"<p>\u0627\u06af\u0631 \u0634\u0631\u0627\u06cc\u0637 \u067e\u06cc\u0686\u06cc\u062f\u0647\u200c\u0627\u06cc \u0646\u062f\u0627\u0631\u06cc\u062f\u060c \u0645\u06cc\u200c\u062a\u0648\u0627\u0646\u06cc\u062f \u0628\u0647 \u0633\u0627\u062f\u06af\u06cc \u0628\u0631\u062e\u06cc \u0622\u067e\u062f\u06cc\u062a\u200c\u0647\u0627 \u0631\u0627 \u0628\u0631\u0627\u06cc \u067e\u0631\u062f\u0627\u0632\u0634 \u0641\u06cc\u0644\u062a\u0631 \u06a9\u0646\u06cc\u062f:</p> <pre><code>// \u062a\u0627\u0628\u0639\u06cc \u06a9\u0647 \u0634\u0631\u0637 \u0641\u06cc\u0644\u062a\u0631 \u06a9\u0631\u062f\u0646 \u0622\u067e\u062f\u06cc\u062a\u200c\u0647\u0627 \u062f\u0631 \u0622\u0646 \u062a\u0639\u0631\u06cc\u0641 \u0634\u062f\u0647 \u0627\u0633\u062a\nfun filteringFun(update: Update): Boolean = update.message?.text.isNullOrBlank()\n\nfun main() = runBlocking {\n  val bot = TelegramBot(\"BOT_TOKEN\")\n\n  // \u062a\u0646\u0638\u06cc\u0645 \u062c\u0631\u06cc\u0627\u0646 \u067e\u0631\u062f\u0627\u0632\u0634\u06cc \u062e\u0627\u0635\u200c\u062a\u0631 \u0628\u0631\u0627\u06cc \u0622\u067e\u062f\u06cc\u062a\u200c\u0647\u0627\n  bot.update.setListener {\n    if(filteringFun(it)) return@setListener\n\n    // \u067e\u0633 \u0627\u0632 \u0627\u06cc\u0646\u06a9\u0647 \u0644\u06cc\u0633\u0646\u0631 \u0627\u0632 \u062d\u0648\u0632\u0647 \u062e\u0627\u0631\u062c \u0634\u062f\u0647 \u0648 \u0642\u0628\u0644 \u0627\u0632 \u0631\u0633\u06cc\u062f\u0646 \u0628\u0647 \u062a\u0627\u0628\u0639 handler\u060c \u0641\u06cc\u0644\u062a\u0631 \u06a9\u0631\u062f\u0647 \u0627\u0633\u062a.\n    // \u062f\u0631 \u0648\u0627\u0642\u0639 \u0645\u06cc\u200c\u062a\u0648\u0627\u0646\u06cc\u062f \u062d\u062a\u06cc \u0634\u0631\u0637 if \u0631\u0627 \u0645\u0633\u062a\u0642\u06cc\u0645\u0627\u064b \u062f\u0631 \u0622\u0646\u062c\u0627 \u0628\u0627 return@setListener \u0628\u0646\u0648\u06cc\u0633\u06cc\u062f \u06cc\u0627 \u0641\u06cc\u0644\u062a\u0631 \u06a9\u0631\u062f\u0646 \u0631\u0627 \u0628\u0647 \u06a9\u0644\u0627\u0633 \u062c\u062f\u0627\u06af\u0627\u0646\u0647 \u06af\u0633\u062a\u0631\u0634 \u062f\u0647\u06cc\u062f.\n\n    handle(it) // \u06cc\u0627 \u0631\u0648\u0634 \u062f\u0633\u062a\u06cc \u0645\u062f\u06cc\u0631\u06cc\u062a \u0628\u0627 \u0628\u0644\u0648\u06a9\n  }\n}\n</code></pre> <p>\u0628\u0631\u0627\u06cc \u0634\u0627\u0645\u0644 \u06a9\u0631\u062f\u0646 \u0641\u06cc\u0644\u062a\u0631 \u06a9\u0631\u062f\u0646 \u062f\u0631 \u0641\u0631\u0622\u06cc\u0646\u062f \u062a\u0637\u0628\u06cc\u0642 \u06cc\u0627 \u062d\u0630\u0641 \u062f\u0633\u062a\u0648\u0631\u0627\u062a\u060c \u0628\u0647 guard\u0647\u0627 \u06cc\u0627 <code>@CommonHandler</code> \u0646\u06af\u0627\u0647 \u06a9\u0646\u06cc\u062f.</p>"},{"location":"fa/Useful-utilities-and-tips/#_3","title":"\u06af\u0632\u06cc\u0646\u0647\u200c\u0647\u0627\u06cc\u06cc \u0628\u0631\u0627\u06cc \u062a\u0639\u0645\u06cc\u0645 \u062f\u0627\u062f\u0646 \u0631\u0648\u0634\u200c\u0647\u0627\u06cc \u0645\u062e\u062a\u0644\u0641","text":"<p>\u0627\u06af\u0631 \u0628\u0627\u06cc\u062f \u067e\u0627\u0631\u0627\u0645\u062a\u0631\u0647\u0627\u06cc \u0627\u062e\u062a\u06cc\u0627\u0631\u06cc \u06cc\u06a9\u0633\u0627\u0646 \u0631\u0627 \u0627\u063a\u0644\u0628 \u0627\u0639\u0645\u0627\u0644 \u06a9\u0646\u06cc\u062f\u060c \u0645\u06cc\u200c\u062a\u0648\u0627\u0646\u06cc\u062f \u06cc\u06a9 \u062a\u0627\u0628\u0639 \u0645\u0634\u0627\u0628\u0647 \u0628\u0646\u0648\u06cc\u0633\u06cc\u062f \u06a9\u0647 \u0628\u0631\u0627\u06cc \u0634\u0645\u0627 \u0645\u0646\u0627\u0633\u0628 \u0627\u0633\u062a \u0648 \u06a9\u062f boilerplate \u0631\u0627 \u0633\u0628\u06a9 \u06a9\u0646\u06cc\u062f :)</p> <p>\u0628\u0631\u062e\u06cc \u062e\u0648\u0627\u0635 \u0631\u0627\u06cc\u062c \u0628\u0647 \u0627\u06cc\u0646\u062a\u0631\u0641\u06cc\u0633\u200c\u0647\u0627\u06cc \u0645\u062e\u062a\u0644\u0641 \u062c\u062f\u0627 \u0634\u062f\u0647\u200c\u0627\u0646\u062f.</p> <pre><code>@Suppress(\"NOTHING_TO_INLINE\")\ninline fun &lt;T, R, O&gt; T.markdownMode(crossinline block: O.() -&gt; Unit = {}): T\n        where               T : TgAction&lt;R&gt;,\n                            T : OptionsFeature&lt;T, O&gt;,\n                            O : Options,\n                            O : OptionsParseMode =\n    options {\n        parseMode = ParseMode.Markdown\n        block()\n    }\n\n\n// ... \u0648 \u062f\u0631 \u06a9\u062f \u0634\u0645\u0627\n\nmessage { \"test\" }.markdownMode().send(to, via)\n</code></pre>"},{"location":"fa/Web-starters-%28Spring-and-Ktor%29/#spring-starter","title":"Spring starter","text":"<p>\u0645\u0627\u0698\u0648\u0644 Spring Starter \u0628\u0631\u0627\u06cc \u06a9\u062a\u0627\u0628\u062e\u0627\u0646\u0647 \u06cc\u06a9 \u0645\u0627\u0698\u0648\u0644 \u062e\u0648\u062f\u06a9\u0627\u0631-\u067e\u06cc\u06a9\u0631\u0628\u0646\u062f\u06cc \u0627\u0633\u062a \u06a9\u0647 \u0642\u0627\u0628\u0644\u06cc\u062a\u200c\u0647\u0627\u06cc \u0631\u0628\u0627\u062a \u062a\u0644\u06af\u0631\u0627\u0645 \u0631\u0627 \u062f\u0631 \u0628\u0631\u0646\u0627\u0645\u0647\u200c\u0647\u0627\u06cc Spring Boot \u06cc\u06a9\u067e\u0627\u0631\u0686\u0647 \u0645\u06cc\u200c\u06a9\u0646\u062f. \u0627\u06cc\u0646 \u0645\u0627\u0698\u0648\u0644 \u0627\u0632 \u0642\u062f\u0631\u062a \u062d\u0642\u0646 \u0648\u0627\u0628\u0633\u062a\u06af\u06cc Spring Boot \u0648 \u062e\u0635\u0648\u0635\u06cc\u0627\u062a \u067e\u06cc\u06a9\u0631\u0628\u0646\u062f\u06cc \u0628\u0631\u0627\u06cc \u067e\u06cc\u06a9\u0631\u0628\u0646\u062f\u06cc \u062e\u0648\u062f\u06a9\u0627\u0631 \u0631\u0628\u0627\u062a\u200c\u0647\u0627\u06cc \u062a\u0644\u06af\u0631\u0627\u0645 \u0628\u0631 \u0627\u0633\u0627\u0633 \u067e\u06cc\u06a9\u0631\u0628\u0646\u062f\u06cc \u0627\u0631\u0627\u0626\u0647 \u0634\u062f\u0647 \u0627\u0633\u062a\u0641\u0627\u062f\u0647 \u0645\u06cc\u200c\u06a9\u0646\u062f. \u0627\u06cc\u0646 \u06a9\u062a\u0627\u0628\u062e\u0627\u0646\u0647 \u0628\u0647\u200c\u0648\u06cc\u0698\u0647 \u0628\u0631\u0627\u06cc \u062a\u0648\u0633\u0639\u0647\u200c\u062f\u0647\u0646\u062f\u06af\u0627\u0646\u06cc \u06a9\u0647 \u0645\u06cc\u200c\u062e\u0648\u0627\u0647\u0646\u062f \u0631\u0628\u0627\u062a\u200c\u0647\u0627\u06cc \u062a\u0644\u06af\u0631\u0627\u0645 \u0631\u0627 \u0628\u0627 \u0627\u0633\u062a\u0641\u0627\u062f\u0647 \u0627\u0632 Kotlin \u0648 Spring Boot \u0628\u0633\u0627\u0632\u0646\u062f \u0645\u0641\u06cc\u062f \u0627\u0633\u062a \u0648 \u0631\u0648\u06cc\u06a9\u0631\u062f\u06cc \u0633\u0627\u062f\u0647\u200c\u062a\u0631\u06cc \u0628\u0631\u0627\u06cc \u062a\u0648\u0633\u0639\u0647 \u0648 \u0645\u062f\u06cc\u0631\u06cc\u062a \u0631\u0628\u0627\u062a \u0627\u0631\u0627\u0626\u0647 \u0645\u06cc\u200c\u062f\u0647\u062f.</p>"},{"location":"fa/Web-starters-%28Spring-and-Ktor%29/#_1","title":"\u0642\u0627\u0628\u0644\u06cc\u062a\u200c\u0647\u0627\u06cc \u06a9\u0644\u06cc\u062f\u06cc","text":"<ul> <li>\u067e\u06cc\u06a9\u0631\u0628\u0646\u062f\u06cc \u062e\u0648\u062f\u06a9\u0627\u0631: \u06a9\u062a\u0627\u0628\u062e\u0627\u0646\u0647 \u0628\u0631 \u0627\u0633\u0627\u0633 \u062e\u0635\u0648\u0635\u06cc\u0627\u062a \u067e\u06cc\u06a9\u0631\u0628\u0646\u062f\u06cc \u0627\u0631\u0627\u0626\u0647 \u0634\u062f\u0647 \u0631\u0628\u0627\u062a\u200c\u0647\u0627\u06cc \u062a\u0644\u06af\u0631\u0627\u0645 \u0631\u0627 \u062e\u0648\u062f\u06a9\u0627\u0631 \u067e\u06cc\u06a9\u0631\u0628\u0646\u062f\u06cc \u0645\u06cc\u200c\u06a9\u0646\u062f\u060c \u0628\u062f\u0648\u0646 \u0646\u06cc\u0627\u0632 \u0628\u0647 \u0631\u0627\u0647\u200c\u0627\u0646\u062f\u0627\u0632\u06cc \u062f\u0633\u062a\u06cc.</li> <li>\u062e\u0635\u0648\u0635\u06cc\u0627\u062a \u067e\u06cc\u06a9\u0631\u0628\u0646\u062f\u06cc: \u067e\u0634\u062a\u06cc\u0628\u0627\u0646\u06cc \u0627\u0632 \u062e\u0635\u0648\u0635\u06cc\u0627\u062a \u067e\u06cc\u06a9\u0631\u0628\u0646\u062f\u06cc \u0628\u0631\u0627\u06cc \u0633\u0641\u0627\u0631\u0634\u06cc\u200c\u0633\u0627\u0632\u06cc \u0622\u0633\u0627\u0646 \u062a\u0646\u0638\u06cc\u0645\u0627\u062a \u0631\u0628\u0627\u062a \u0645\u0627\u0646\u0646\u062f \u062a\u0648\u06a9\u0646\u200c\u0647\u0627\u06cc \u0631\u0628\u0627\u062a\u060c \u0646\u0627\u0645 \u0628\u0633\u062a\u0647\u200c\u0647\u0627 \u0648 \u0634\u0646\u0627\u0633\u0647\u200c\u0647\u0627 \u0631\u0627 \u0641\u0631\u0627\u0647\u0645 \u0645\u06cc\u200c\u06a9\u0646\u062f.</li> <li>\u06cc\u06a9\u067e\u0627\u0631\u0686\u06af\u06cc Spring: \u0628\u0647\u200c\u0637\u0648\u0631 \u06cc\u06a9\u067e\u0627\u0631\u0686\u0647 \u0628\u0627 \u0627\u06a9\u0648\u0633\u06cc\u0633\u062a\u0645 Spring \u0627\u062f\u063a\u0627\u0645 \u0645\u06cc\u200c\u0634\u0648\u062f \u0648 \u0627\u0632 \u062d\u0642\u0646 \u0648\u0627\u0628\u0633\u062a\u06af\u06cc Spring \u0648 \u0632\u0645\u06cc\u0646\u0647 \u0628\u0631\u0646\u0627\u0645\u0647 \u0628\u0631\u0627\u06cc \u0645\u062f\u06cc\u0631\u06cc\u062a \u0646\u0645\u0648\u0646\u0647\u200c\u0647\u0627\u06cc \u0631\u0628\u0627\u062a \u0627\u0633\u062a\u0641\u0627\u062f\u0647 \u0645\u06cc\u200c\u06a9\u0646\u062f.</li> <li>\u067e\u0634\u062a\u06cc\u0628\u0627\u0646\u06cc Coroutines: \u0627\u0632 Coroutines Kotlin \u0628\u0631\u0627\u06cc \u0639\u0645\u0644\u06cc\u0627\u062a\u200c\u0647\u0627\u06cc \u063a\u06cc\u0631\u0647\u0645\u0632\u0645\u0627\u0646 \u0631\u0628\u0627\u062a \u0627\u0633\u062a\u0641\u0627\u062f\u0647 \u0645\u06cc\u200c\u06a9\u0646\u062f \u062a\u0627 \u0627\u062c\u0631\u0627\u06cc \u06a9\u0627\u0631\u0622\u0645\u062f \u0648 \u063a\u06cc\u0631\u0645\u0633\u062f\u0648\u062f \u0631\u0627 \u062a\u0636\u0645\u06cc\u0646 \u06a9\u0646\u062f.</li> </ul>"},{"location":"fa/Web-starters-%28Spring-and-Ktor%29/#_2","title":"\u0634\u0631\u0648\u0639 \u06a9\u0627\u0631","text":"<p>\u0628\u0631\u0627\u06cc \u0627\u0633\u062a\u0641\u0627\u062f\u0647 \u0627\u0632 \u06a9\u062a\u0627\u0628\u062e\u0627\u0646\u0647 Spring Starter \u0628\u0631\u0627\u06cc \u0631\u0628\u0627\u062a\u200c\u0647\u0627\u06cc \u062a\u0644\u06af\u0631\u0627\u0645\u060c \u0628\u0627\u06cc\u062f \u0622\u0646 \u0631\u0627 \u0628\u0647 \u0639\u0646\u0648\u0627\u0646 \u0648\u0627\u0628\u0633\u062a\u06af\u06cc \u062f\u0631 \u067e\u0631\u0648\u0698\u0647 Spring Boot \u062e\u0648\u062f \u0627\u0636\u0627\u0641\u0647 \u06a9\u0646\u06cc\u062f. \u0627\u06cc\u0646 \u06a9\u062a\u0627\u0628\u062e\u0627\u0646\u0647 \u0628\u0631\u0627\u06cc \u06a9\u0627\u0631 \u0628\u0627 \u0628\u0631\u0646\u0627\u0645\u0647\u200c\u0647\u0627\u06cc Spring Boot \u0637\u0631\u0627\u062d\u06cc \u0634\u062f\u0647 \u0627\u0633\u062a \u0648 \u0628\u0631\u0627\u06cc \u06a9\u0627\u0631 \u06a9\u0631\u062f\u0646 \u0646\u06cc\u0627\u0632 \u0628\u0647 \u0686\u0627\u0631\u0686\u0648\u0628 Spring Boot \u062f\u0627\u0631\u062f.</p>"},{"location":"fa/Web-starters-%28Spring-and-Ktor%29/#_3","title":"\u0648\u0627\u0628\u0633\u062a\u06af\u06cc","text":"<p>\u062e\u0637 \u0632\u06cc\u0631 \u0631\u0627 \u0628\u0647 \u0641\u0627\u06cc\u0644 <code>build.gradle</code> \u06cc\u0627 <code>pom.xml</code> \u062e\u0648\u062f \u0627\u0636\u0627\u0641\u0647 \u06a9\u0646\u06cc\u062f:</p> <pre><code>dependencies {\n    implementation 'eu.vendeli:spring-starter:&lt;version&gt;'\n}\n</code></pre> <p><code>&lt;version&gt;</code> \u0631\u0627 \u0628\u0627 \u0622\u062e\u0631\u06cc\u0646 \u0646\u0633\u062e\u0647 \u06a9\u062a\u0627\u0628\u062e\u0627\u0646\u0647 \u062c\u0627\u06cc\u06af\u0632\u06cc\u0646 \u06a9\u0646\u06cc\u062f.</p>"},{"location":"fa/Web-starters-%28Spring-and-Ktor%29/#_4","title":"\u067e\u06cc\u06a9\u0631\u0628\u0646\u062f\u06cc","text":"<p>\u06a9\u062a\u0627\u0628\u062e\u0627\u0646\u0647 \u0627\u0632 <code>@ConfigurationProperties</code> Spring Boot \u0628\u0631\u0627\u06cc \u0627\u062a\u0635\u0627\u0644 \u062e\u0635\u0648\u0635\u06cc\u0627\u062a \u067e\u06cc\u06a9\u0631\u0628\u0646\u062f\u06cc \u0627\u0633\u062a\u0641\u0627\u062f\u0647 \u0645\u06cc\u200c\u06a9\u0646\u062f. \u0645\u06cc\u200c\u062a\u0648\u0627\u0646\u06cc\u062f \u067e\u06cc\u06a9\u0631\u0628\u0646\u062f\u06cc\u200c\u0647\u0627\u06cc \u0631\u0628\u0627\u062a \u062e\u0648\u062f \u0631\u0627 \u062f\u0631 \u0641\u0627\u06cc\u0644 <code>application.properties</code> \u06cc\u0627 <code>application.yml</code> \u0628\u0631\u0646\u0627\u0645\u0647 Spring Boot \u062e\u0648\u062f \u062a\u0639\u0631\u06cc\u0641 \u06a9\u0646\u06cc\u062f.</p> <pre><code>ktgram:\n autoStartPolling: true\n shareHttpClient: true\n bot:\n    - token: YOUR_BOT_TOKEN\n      pckg: com.example.bot\n      identifier: MyBot\n</code></pre>"},{"location":"fa/Web-starters-%28Spring-and-Ktor%29/#_5","title":"\u0627\u0633\u062a\u0641\u0627\u062f\u0647","text":"<p>\u067e\u0633 \u0627\u0632 \u0627\u0636\u0627\u0641\u0647 \u06a9\u0631\u062f\u0646 \u0648 \u067e\u06cc\u06a9\u0631\u0628\u0646\u062f\u06cc \u06a9\u062a\u0627\u0628\u062e\u0627\u0646\u0647\u060c \u0628\u0647\u200c\u0637\u0648\u0631 \u062e\u0648\u062f\u06a9\u0627\u0631 \u0646\u0645\u0648\u0646\u0647\u200c\u0647\u0627\u06cc \u0631\u0628\u0627\u062a \u062a\u0644\u06af\u0631\u0627\u0645 \u0631\u0627 \u0628\u0631 \u0627\u0633\u0627\u0633 \u067e\u06cc\u06a9\u0631\u0628\u0646\u062f\u06cc \u0627\u0631\u0627\u0626\u0647 \u0634\u062f\u0647 \u0645\u06cc\u200c\u0633\u0627\u0632\u062f \u0648 \u067e\u06cc\u06a9\u0631\u0628\u0646\u062f\u06cc \u0645\u06cc\u200c\u06a9\u0646\u062f.</p> <p>\u0647\u0645\u0686\u0646\u06cc\u0646 \u067e\u0634\u062a\u06cc\u0628\u0627\u0646\u06cc \u0627\u0632 \u0686\u0646\u062f\u06cc\u0646 \u0646\u0645\u0648\u0646\u0647 \u0631\u0628\u0627\u062a \u0631\u0627 \u062f\u0627\u0631\u062f\u060c \u0628\u0631\u0627\u06cc \u0631\u0627\u0647\u200c\u0627\u0646\u062f\u0627\u0632\u06cc \u0686\u0646\u062f \u0646\u0645\u0648\u0646\u0647 \u0641\u0642\u0637 \u0622\u0646 \u0631\u0627 \u0628\u0647 \u0639\u0646\u0648\u0627\u0646 \u0648\u0631\u0648\u062f\u06cc \u062c\u062f\u06cc\u062f \u062f\u0631 \u0628\u062e\u0634 bot \u0627\u0639\u0644\u0627\u0645 \u06a9\u0646\u06cc\u062f:</p> <pre><code>ktgram:\n bot:\n    - token: YOUR_BOT_TOKEN\n    - token: SECOND_BOT_TOKEN\n</code></pre>"},{"location":"fa/Web-starters-%28Spring-and-Ktor%29/#_6","title":"\u067e\u06cc\u06a9\u0631\u0628\u0646\u062f\u06cc \u067e\u06cc\u0634\u0631\u0641\u062a\u0647","text":"<p>\u0628\u0631\u0627\u06cc \u067e\u06cc\u06a9\u0631\u0628\u0646\u062f\u06cc\u200c\u0647\u0627\u06cc \u067e\u06cc\u0634\u0631\u0641\u062a\u0647\u200c\u062a\u0631 \u0645\u0627\u0646\u0646\u062f \u0633\u0641\u0627\u0631\u0634\u06cc\u200c\u0633\u0627\u0632\u06cc \u0631\u0641\u062a\u0627\u0631 \u0631\u0628\u0627\u062a \u06cc\u0627 \u0627\u062f\u063a\u0627\u0645 \u0628\u0627 \u06a9\u0627\u0645\u067e\u0648\u0646\u0646\u062a\u200c\u0647\u0627\u06cc \u062f\u06cc\u06af\u0631 Spring\u060c \u0645\u06cc\u200c\u062a\u0648\u0627\u0646\u06cc\u062f \u06a9\u0644\u0627\u0633 <code>BotConfiguration</code> \u0631\u0627 \u06af\u0633\u062a\u0631\u0634 \u062f\u0647\u06cc\u062f \u0648 \u067e\u06cc\u06a9\u0631\u0628\u0646\u062f\u06cc \u0631\u0628\u0627\u062a \u0631\u0627 \u0627\u0632 \u0637\u0631\u06cc\u0642 \u0645\u062a\u062f <code>applyCfg</code> \u0622\u0646 \u062a\u063a\u06cc\u06cc\u0631 \u062f\u0647\u06cc\u062f\u060c \u0645\u06cc\u200c\u062a\u0648\u0627\u0646\u06cc\u062f \u0646\u0645\u0648\u0646\u0647\u200c\u0627\u06cc \u0631\u0627 \u062f\u0631 \u0627\u06cc\u0646\u062c\u0627 \u0628\u0628\u06cc\u0646\u06cc\u062f.</p> <p>Tip</p> <p>\u0628\u0631\u0627\u06cc \u067e\u06cc\u06a9\u0631\u0628\u0646\u062f\u06cc \u0647\u0631 \u0646\u0645\u0648\u0646\u0647 \u0645\u0642\u062f\u0627\u0631\u062f\u0647\u06cc \u0634\u062f\u0647 \u0628\u0627 \u067e\u06cc\u06a9\u0631\u0628\u0646\u062f\u06cc \u0633\u0641\u0627\u0631\u0634\u06cc\u060c \u0622\u0646\u200c\u0647\u0627 \u0631\u0627 \u0628\u0631 \u0627\u0633\u0627\u0633 \u0634\u0646\u0627\u0633\u0647 \u0645\u062a\u0645\u0627\u06cc\u0632 \u06a9\u0646\u06cc\u062f (\u06a9\u0644\u0627\u0633 BotConfiguration \u0646\u06cc\u0632 \u0634\u0646\u0627\u0633\u0647 \u062f\u0627\u0631\u062f).</p>"},{"location":"fa/Web-starters-%28Spring-and-Ktor%29/#ktor","title":"Ktor","text":"<p>\u0645\u0627\u0698\u0648\u0644 \u0628\u0631\u0627\u06cc \u062a\u0633\u0647\u06cc\u0644 \u0627\u06cc\u062c\u0627\u062f \u0633\u0631\u0648\u0631 webhook \u0628\u0631\u0627\u06cc \u0631\u0628\u0627\u062a\u200c\u0647\u0627\u06cc \u062a\u0644\u06af\u0631\u0627\u0645 \u0637\u0631\u0627\u062d\u06cc \u0634\u062f\u0647 \u0627\u0633\u062a. \u0628\u0647 \u062a\u0648\u0633\u0639\u0647\u200c\u062f\u0647\u0646\u062f\u06af\u0627\u0646 \u0627\u0645\u06a9\u0627\u0646 \u0645\u06cc\u200c\u062f\u0647\u062f \u0633\u0631\u0648\u0631 \u0631\u0627 \u067e\u06cc\u06a9\u0631\u0628\u0646\u062f\u06cc \u06a9\u0646\u0646\u062f\u060c \u0634\u0627\u0645\u0644 \u062a\u0646\u0638\u06cc\u0645\u0627\u062a SSL/TLS\u060c \u0648 \u0686\u0646\u062f\u06cc\u0646 \u0631\u0628\u0627\u062a \u062a\u0644\u06af\u0631\u0627\u0645 \u0628\u0627 \u067e\u06cc\u06a9\u0631\u0628\u0646\u062f\u06cc\u200c\u0647\u0627\u06cc \u0633\u0641\u0627\u0631\u0634\u06cc \u0627\u0639\u0644\u0627\u0645 \u06a9\u0646\u0646\u062f. \u0641\u0631\u0622\u06cc\u0646\u062f \u0631\u0627\u0647\u200c\u0627\u0646\u062f\u0627\u0632\u06cc \u0645\u0646\u0639\u0637\u0641 \u0627\u0633\u062a \u0648 \u0628\u0647 \u062a\u0648\u0633\u0639\u0647\u200c\u062f\u0647\u0646\u062f\u06af\u0627\u0646 \u0627\u0645\u06a9\u0627\u0646 \u0645\u06cc\u200c\u062f\u0647\u062f \u0633\u0631\u0648\u0631 \u0631\u0627 \u0628\u0631 \u0627\u0633\u0627\u0633 \u0646\u06cc\u0627\u0632\u0647\u0627\u06cc \u062e\u0627\u0635 \u062e\u0648\u062f \u0633\u0641\u0627\u0631\u0634\u06cc \u06a9\u0646\u0646\u062f.</p>"},{"location":"fa/Web-starters-%28Spring-and-Ktor%29/#_7","title":"\u0646\u0635\u0628","text":"<p>\u0628\u0631\u0627\u06cc \u0646\u0635\u0628 \u0646\u0633\u062e\u0647 Ktor \u0628\u0647 \u0648\u0627\u0628\u0633\u062a\u06af\u06cc \u0627\u0635\u0644\u06cc \u0627\u0636\u0627\u0641\u0647 \u06a9\u0646\u06cc\u062f:</p> <pre><code>dependencies {\n    implementation(\"eu.vendeli:ktor-starter:x.y.z\") // there\n    // change x.y.z to current library version\n}\n</code></pre>"},{"location":"fa/Web-starters-%28Spring-and-Ktor%29/#_8","title":"\u06a9\u0627\u0645\u067e\u0648\u0646\u0646\u062a\u200c\u0647\u0627\u06cc \u06a9\u0644\u06cc\u062f\u06cc","text":"<p>\u062a\u0627\u0628\u0639 <code>serveWebhook</code></p> <p>\u062a\u0627\u0628\u0639 serveWebhook \u0647\u0633\u062a\u0647 \u06a9\u062a\u0627\u0628\u062e\u0627\u0646\u0647 \u0627\u0633\u062a. \u0633\u0631\u0648\u0631 webhook \u0631\u0627 \u0628\u0631\u0627\u06cc \u0631\u0628\u0627\u062a\u200c\u0647\u0627\u06cc \u062a\u0644\u06af\u0631\u0627\u0645 \u062a\u0646\u0638\u06cc\u0645 \u0648 \u0631\u0627\u0647\u200c\u0627\u0646\u062f\u0627\u0632\u06cc \u0645\u06cc\u200c\u06a9\u0646\u062f. \u062f\u0648 \u067e\u0627\u0631\u0627\u0645\u062a\u0631 \u0642\u0628\u0648\u0644 \u0645\u06cc\u200c\u06a9\u0646\u062f:</p> <ul> <li><code>wait</code>: \u06cc\u06a9 \u0628\u0648\u0644\u06cc\u0646 \u06a9\u0647 \u0646\u0634\u0627\u0646 \u0645\u06cc\u200c\u062f\u0647\u062f \u0622\u06cc\u0627 \u0633\u0631\u0648\u0631 \u0628\u0627\u06cc\u062f \u0642\u0628\u0644 \u0627\u0632 \u062e\u0627\u0645\u0648\u0634 \u0634\u062f\u0646 \u0645\u0646\u062a\u0638\u0631 \u062a\u0648\u0642\u0641 \u0628\u0631\u0646\u0627\u0645\u0647 \u0628\u0645\u0627\u0646\u062f. \u0628\u0647 \u0637\u0648\u0631 \u067e\u06cc\u0634\u200c\u0641\u0631\u0636 true \u0627\u0633\u062a.</li> <li><code>serverBuilder</code>: \u06cc\u06a9 \u062a\u0627\u0628\u0639 \u0644\u0627\u0646\u062f\u0627 \u0628\u0631\u0627\u06cc \u067e\u06cc\u06a9\u0631\u0628\u0646\u062f\u06cc \u0633\u0631\u0648\u0631. \u0628\u0647 \u0637\u0648\u0631 \u067e\u06cc\u0634\u200c\u0641\u0631\u0636 \u06cc\u06a9 \u0644\u0627\u0646\u062f\u0627 \u062e\u0627\u0644\u06cc \u0627\u0633\u062a.</li> </ul>"},{"location":"fa/Web-starters-%28Spring-and-Ktor%29/#_9","title":"\u067e\u06cc\u06a9\u0631\u0628\u0646\u062f\u06cc","text":"<ul> <li><code>WEBHOOK_PREFIX</code>: \u067e\u0627\u0631\u0627\u0645\u062a\u0631\u06cc \u0627\u0633\u062a \u06a9\u0647 \u0628\u0631\u0627\u06cc \u067e\u06cc\u0634\u0648\u0646\u062f \u0622\u062f\u0631\u0633 \u0645\u0633\u06cc\u0631 \u06af\u0648\u0634\u200c\u062f\u0647\u0646\u062f\u0647 webhook \u0627\u0633\u062a\u0641\u0627\u062f\u0647 \u0645\u06cc\u200c\u0634\u0648\u062f. (\u0628\u0647 \u0637\u0648\u0631 \u067e\u06cc\u0634\u200c\u0641\u0631\u0636 \"/\")</li> </ul>"},{"location":"fa/Web-starters-%28Spring-and-Ktor%29/#_10","title":"\u0631\u0627\u0647\u200c\u0627\u0646\u062f\u0627\u0632\u06cc \u0633\u0631\u0648\u0631","text":"<ul> <li><code>server</code>: \u06cc\u06a9 \u0645\u062a\u062f \u0628\u0631\u0627\u06cc \u062a\u0646\u0638\u06cc\u0645 \u067e\u06cc\u06a9\u0631\u0628\u0646\u062f\u06cc \u0633\u0631\u0648\u0631 \u0628\u0627 \u0627\u0633\u062a\u0641\u0627\u062f\u0647 \u0627\u0632 EnvConfiguration \u06cc\u0627 ManualConfiguration.</li> <li><code>engine</code>: \u06cc\u06a9 \u0645\u062a\u062f \u0628\u0631\u0627\u06cc \u067e\u06cc\u06a9\u0631\u0628\u0646\u062f\u06cc \u0645\u0648\u062a\u0648\u0631 \u0628\u0631\u0646\u0627\u0645\u0647 Netty.</li> <li><code>ktorModule</code>: \u06cc\u06a9 \u0645\u062a\u062f \u0628\u0631\u0627\u06cc \u0627\u0636\u0627\u0641\u0647 \u06a9\u0631\u062f\u0646 \u0645\u0627\u0698\u0648\u0644\u200c\u0647\u0627\u06cc Ktor \u0628\u0647 \u0628\u0631\u0646\u0627\u0645\u0647.</li> </ul> <p>\u06a9\u062a\u0627\u0628\u062e\u0627\u0646\u0647 \u0645\u062c\u0645\u0648\u0639\u0647 \u06af\u0633\u062a\u0631\u062f\u0647\u200c\u0627\u06cc \u0627\u0632 \u067e\u0627\u0631\u0627\u0645\u062a\u0631\u0647\u0627\u06cc \u0642\u0627\u0628\u0644 \u062a\u0646\u0638\u06cc\u0645 \u0628\u0631\u0627\u06cc \u0633\u0631\u0648\u0631 \u0641\u0631\u0627\u0647\u0645 \u0645\u06cc\u200c\u06a9\u0646\u062f\u060c \u0634\u0627\u0645\u0644 \u0645\u06cc\u0632\u0628\u0627\u0646\u060c \u067e\u0648\u0631\u062a\u060c \u062a\u0646\u0638\u06cc\u0645\u0627\u062a SSL \u0648 \u063a\u06cc\u0631\u0647. \u062f\u0648 \u06af\u0632\u06cc\u0646\u0647 \u0648\u0627\u0636\u062d \u0628\u0631\u0627\u06cc \u067e\u06cc\u06a9\u0631\u0628\u0646\u062f\u06cc \u0622\u0646 \u0648\u062c\u0648\u062f \u062f\u0627\u0631\u062f:</p> <ul> <li><code>EnvConfiguration</code>: \u0645\u0642\u0627\u062f\u06cc\u0631 \u067e\u06cc\u06a9\u0631\u0628\u0646\u062f\u06cc \u0631\u0627 \u0627\u0632 \u0645\u062d\u06cc\u0637 \u0628\u0627 \u067e\u06cc\u0634\u0648\u0646\u062f <code>KTGRAM_</code> \u0645\u06cc\u200c\u062e\u0648\u0627\u0646\u062f.</li> <li><code>ManualConfiguration</code>: \u0627\u0645\u06a9\u0627\u0646 \u062a\u0646\u0638\u06cc\u0645 \u062f\u0633\u062a\u06cc \u0645\u0642\u0627\u062f\u06cc\u0631 \u067e\u06cc\u06a9\u0631\u0628\u0646\u062f\u06cc \u0631\u0627 \u0641\u0631\u0627\u0647\u0645 \u0645\u06cc\u200c\u06a9\u0646\u062f\u060c \u067e\u0627\u0631\u0627\u0645\u062a\u0631\u0647\u0627\u06cc \u062e\u0648\u062f \u0631\u0627 \u062f\u0631 \u062a\u0627\u0628\u0639 <code>server {}</code> \u062a\u0646\u0638\u06cc\u0645 \u06a9\u0646\u06cc\u062f.</li> </ul> <p>\u0641\u0647\u0631\u0633\u062a\u06cc \u0627\u0632 \u067e\u0627\u0631\u0627\u0645\u062a\u0631\u0647\u0627\u06cc\u06cc \u06a9\u0647 \u0645\u06cc\u200c\u062a\u0648\u0627\u0646 \u062a\u0646\u0638\u06cc\u0645 \u06a9\u0631\u062f:</p> <ul> <li><code>HOST</code>: \u0646\u0627\u0645 \u0645\u06cc\u0632\u0628\u0627\u0646 \u06cc\u0627 \u0622\u062f\u0631\u0633 IP \u0633\u0631\u0648\u0631.</li> <li><code>PORT</code>: \u0634\u0645\u0627\u0631\u0647 \u067e\u0648\u0631\u062a \u0628\u0631\u0627\u06cc \u0633\u0631\u0648\u0631.</li> <li><code>SSL_PORT</code>: \u0634\u0645\u0627\u0631\u0647 \u067e\u0648\u0631\u062a \u0628\u0631\u0627\u06cc \u0627\u062a\u0635\u0627\u0644\u0627\u062a SSL/TLS.</li> <li><code>PEM_PRIVATE_KEY_PATH</code>: \u0645\u0633\u06cc\u0631 \u0641\u0627\u06cc\u0644 \u06a9\u0644\u06cc\u062f \u062e\u0635\u0648\u0635\u06cc PEM.</li> <li><code>PEM_CHAIN_PATH</code>: \u0645\u0633\u06cc\u0631 \u0641\u0627\u06cc\u0644 \u0632\u0646\u062c\u06cc\u0631\u0647 \u06af\u0648\u0627\u0647\u06cc PEM.</li> <li><code>PEM_PRIVATE_KEY</code>: \u0631\u0645\u0632 \u06a9\u0644\u06cc\u062f \u062e\u0635\u0648\u0635\u06cc PEM \u0628\u0647 \u0639\u0646\u0648\u0627\u0646 \u0622\u0631\u0627\u06cc\u0647 \u06a9\u0627\u0631\u0627\u06a9\u062a\u0631.</li> <li><code>KEYSTORE_PATH</code>: \u0645\u0633\u06cc\u0631 \u0641\u0627\u06cc\u0644 KeyStore \u062c\u0627\u0648\u0627.</li> <li><code>KEYSTORE_PASSWORD</code>: \u0631\u0645\u0632 \u0628\u0631\u0627\u06cc KeyStore.</li> <li><code>KEY_ALIAS</code>: \u0646\u0627\u0645 \u0645\u0633\u062a\u0639\u0627\u0631 \u0628\u0631\u0627\u06cc \u06a9\u0644\u06cc\u062f \u062f\u0631 KeyStore.</li> <li><code>SSL_ON</code>: \u06cc\u06a9 \u0628\u0648\u0644\u06cc\u0646 \u06a9\u0647 \u0646\u0634\u0627\u0646 \u0645\u06cc\u200c\u062f\u0647\u062f \u0622\u06cc\u0627 SSL/TLS \u0628\u0627\u06cc\u062f \u0641\u0639\u0627\u0644 \u0634\u0648\u062f. \u0628\u0647 \u0637\u0648\u0631 \u067e\u06cc\u0634\u200c\u0641\u0631\u0636 true \u0627\u0633\u062a.</li> </ul> <p>Tip</p> <p>\u0627\u06af\u0631 \u06af\u0648\u0627\u0647\u06cc\u200c\u0647\u0627\u06cc pem \u0648\u062c\u0648\u062f \u062f\u0627\u0634\u062a\u0647 \u0628\u0627\u0634\u0646\u062f\u060c \u0645\u0627\u0698\u0648\u0644 \u062e\u0648\u062f\u0634 \u0630\u062e\u06cc\u0631\u0647\u200c\u06af\u0627\u0647 jks \u0631\u0627 \u0627\u0632 \u0622\u0646\u200c\u0647\u0627 \u062f\u0631 \u0645\u0633\u06cc\u0631 \u0645\u0634\u062e\u0635 \u0634\u062f\u0647 \u0645\u06cc\u200c\u0633\u0627\u0632\u062f.</p>"},{"location":"fa/Web-starters-%28Spring-and-Ktor%29/#_11","title":"\u067e\u06cc\u06a9\u0631\u0628\u0646\u062f\u06cc \u0631\u0628\u0627\u062a:","text":"<p>\u0628\u0631\u0627\u06cc \u067e\u06cc\u06a9\u0631\u0628\u0646\u062f\u06cc \u0631\u0628\u0627\u062a\u060c \u062a\u0627\u0628\u0639 <code>declareBot {}</code> \u0631\u0627 \u0641\u0631\u0627\u062e\u0648\u0627\u0646\u06cc \u06a9\u0646\u06cc\u062f \u06a9\u0647 \u0686\u0646\u06cc\u0646 \u067e\u0627\u0631\u0627\u0645\u062a\u0631\u0647\u0627\u06cc\u06cc \u062f\u0627\u0631\u062f:</p> <ul> <li><code>token</code>: \u062a\u0648\u06a9\u0646 \u0631\u0628\u0627\u062a.</li> <li><code>pckg</code>: \u0646\u0627\u0645 \u0628\u0633\u062a\u0647 \u0628\u0631\u0627\u06cc \u0631\u0628\u0627\u062a.</li> <li><code>configuration</code>: \u06cc\u06a9 \u062a\u0627\u0628\u0639 \u0644\u0627\u0646\u062f\u0627 \u0628\u0631\u0627\u06cc \u067e\u06cc\u06a9\u0631\u0628\u0646\u062f\u06cc \u0631\u0628\u0627\u062a.</li> <li><code>handlingBehaviour</code>: \u06cc\u06a9 \u062a\u0627\u0628\u0639 \u0644\u0627\u0646\u062f\u0627 \u0628\u0631\u0627\u06cc \u062a\u0646\u0638\u06cc\u0645 \u0631\u0641\u062a\u0627\u0631 \u0645\u062f\u06cc\u0631\u06cc\u062a \u0631\u0628\u0627\u062a.</li> <li><code>onInit</code>: \u06cc\u06a9 \u062a\u0627\u0628\u0639 \u0644\u0627\u0646\u062f\u0627 \u06a9\u0647 \u0632\u0645\u0627\u0646\u06cc \u06a9\u0647 \u0631\u0628\u0627\u062a \u0645\u0642\u062f\u0627\u0631\u062f\u0647\u06cc \u0627\u0648\u0644\u06cc\u0647 \u0645\u06cc\u200c\u0634\u0648\u062f \u0627\u062c\u0631\u0627 \u0645\u06cc\u200c\u0634\u0648\u062f.</li> </ul>"},{"location":"fa/Web-starters-%28Spring-and-Ktor%29/#_12","title":"\u0646\u0645\u0648\u0646\u0647 \u0627\u0633\u062a\u0641\u0627\u062f\u0647","text":"<p>\u0628\u0631\u0627\u06cc \u0627\u0633\u062a\u0641\u0627\u062f\u0647 \u0627\u0632 \u0627\u06cc\u0646 \u0645\u0627\u0698\u0648\u0644\u060c \u062a\u0627\u0628\u0639 <code>serveWebhook</code> \u0631\u0627 \u0641\u0631\u0627\u062e\u0648\u0627\u0646\u06cc \u06a9\u0646\u06cc\u062f\u060c \u0622\u0646 \u0631\u0627 \u0628\u0627 \u062a\u0646\u0638\u06cc\u0645\u0627\u062a \u062f\u0644\u062e\u0648\u0627\u0647 \u067e\u06cc\u06a9\u0631\u0628\u0646\u062f\u06cc \u06a9\u0646\u06cc\u062f\u060c \u0631\u0628\u0627\u062a\u200c\u0647\u0627\u06cc \u062e\u0648\u062f \u0631\u0627 \u0627\u0639\u0644\u0627\u0645 \u06a9\u0646\u06cc\u062f. \u062f\u0631 \u0627\u06cc\u0646\u062c\u0627 \u06cc\u06a9 \u0646\u0645\u0648\u0646\u0647 \u0633\u0627\u062f\u0647\u200c\u0633\u0627\u0632\u06cc \u0634\u062f\u0647 \u0622\u0648\u0631\u062f\u0647 \u0634\u062f\u0647 \u0627\u0633\u062a:</p> <pre><code>fun main() = runBlocking {\n    serveWebhook {\n        server {\n            HOST = \"0.0.0.0\"\n            PORT = 8080\n            SSL_PORT = 8443\n\n            PEM_PRIVATE_KEY_PATH = \"/etc/letsencrypt/live/example.com/privkey.pem\"\n            PEM_CHAIN_PATH = \"/etc/letsencrypt/live/example.com/fullchain.pem\"\n            PEM_PRIVATE_KEY = \"pem_changeit\".toCharArray()\n\n            KEYSTORE_PATH = \"/etc/ssl/certs/java/cacerts/bot_keystore.jks\"\n            KEYSTORE_PASSWORD = \"changeit\".toCharArray()\n            // Set other configuration parameters as needed\n        }\n        declareBot {\n            token = \"YOUR_BOT_TOKEN\"\n            // Configure other bot settings\n        }\n        // Add more bots or set other parameters if needed\n    }\n}\n</code></pre> <p>Caution</p> <p>\u0641\u0631\u0627\u0645\u0648\u0634 \u0646\u06a9\u0646\u06cc\u062f webhook \u0631\u0627 \u062a\u0646\u0638\u06cc\u0645 \u06a9\u0646\u06cc\u062f \u062a\u0627 \u0647\u0645\u0647 \u0686\u06cc\u0632 \u06a9\u0627\u0631 \u06a9\u0646\u062f. :)</p> <p>\u0628\u0647 \u0637\u0648\u0631 \u067e\u06cc\u0634\u200c\u0641\u0631\u0636 \u0645\u0627\u0698\u0648\u0644 endpoints \u06af\u0648\u0634\u200c\u062f\u0647\u0646\u062f\u0647 webhook \u0631\u0627 \u0628\u0647 \u0639\u0646\u0648\u0627\u0646 <code>host/BOT_TOKEN</code> \u0627\u0631\u0627\u0626\u0647 \u0645\u06cc\u200c\u062f\u0647\u062f</p>"},{"location":"pt/#introducao","title":"Introdu\u00e7\u00e3o","text":"<p>Vamos ter uma ideia de como a biblioteca lida com atualiza\u00e7\u00f5es em geral:</p> <p> </p> <p>Ap\u00f3s receber uma atualiza\u00e7\u00e3o, a biblioteca executa tr\u00eas etapas principais, como podemos ver.</p>"},{"location":"pt/#processamento","title":"Processamento","text":"<p>O processamento consiste em repacotar a atualiza\u00e7\u00e3o recebida no subclasse apropriado de <code>ProcessedUpdate</code> dependendo da carga sendo transportada.</p> <p>Esta etapa \u00e9 necess\u00e1ria para facilitar a opera\u00e7\u00e3o da atualiza\u00e7\u00e3o e estender as capacidades de processamento.</p>"},{"location":"pt/#tratamento","title":"Tratamento","text":"<p>Segue a etapa principal, aqui chegamos ao pr\u00f3prio tratamento.</p>"},{"location":"pt/#ratelimiter-global","title":"RateLimiter Global","text":"<p>Se houver um usu\u00e1rio na atualiza\u00e7\u00e3o, verificamos o limite de taxa global.</p>"},{"location":"pt/#analisar-texto","title":"Analisar texto","text":"<p>Em seguida, dependendo da carga, pegamos um componente de atualiza\u00e7\u00e3o espec\u00edfico contendo texto e o analisamos de acordo com a configura\u00e7\u00e3o.</p> <p>Voc\u00ea pode ver mais detalhes no artigo de an\u00e1lise de atualiza\u00e7\u00e3o.</p>"},{"location":"pt/#encontrar-atividade","title":"Encontrar Atividade","text":"<p>Em seguida, de acordo com a prioridade de processamento:</p> <p> </p> <p>Estamos procurando uma correspond\u00eancia entre os dados analisados e as atividades com as quais estamos operando. Como podemos ver no diagrama de prioridade, os <code>Commands</code> sempre v\u00eam primeiro.</p> <p>Ou seja, se a carga de texto na atualiza\u00e7\u00e3o corresponde a qualquer comando, a busca adicional por <code>Inputs</code>, <code>Common</code> e, claro, a execu\u00e7\u00e3o da a\u00e7\u00e3o <code>Unprocessed</code> n\u00e3o ser\u00e1 realizada.</p> <p>A \u00fanica coisa \u00e9 que se houver <code>UpdateHandlers</code> eles ser\u00e3o acionados em paralelo independentemente.</p>"},{"location":"pt/#commands","title":"Commands","text":"<p>Vamos dar uma olhada mais de perto nos comandos e seu processamento.</p> <p>Como voc\u00ea pode ter notado, embora a anota\u00e7\u00e3o para processar comandos seja chamada <code>CommandHandler</code>, ela \u00e9 mais vers\u00e1til do que o conceito cl\u00e1ssico em Bots Telegram.</p>"},{"location":"pt/#escopos","title":"Escopos","text":"<p>Isso porque ela tem uma gama mais ampla de possibilidades de processamento, ou seja, a fun\u00e7\u00e3o alvo pode ser definida n\u00e3o apenas dependendo da correspond\u00eancia de texto, mas tamb\u00e9m do tipo de atualiza\u00e7\u00e3o adequada, este \u00e9 o conceito de escopos.</p> <p>Consequentemente, cada comando pode ter diferentes manipuladores para uma lista diferente de escopos, ou vice-versa, um comando para v\u00e1rios.</p> <p>Abaixo voc\u00ea pode ver como o mapeamento por carga de texto e escopo \u00e9 feito:</p> <p> </p>"},{"location":"pt/#inputs","title":"Inputs","text":"<p>Em seguida, se a carga de texto n\u00e3o corresponder a nenhum comando, os pontos de entrada s\u00e3o procurados.</p> <p>O conceito \u00e9 muito semelhante \u00e0 espera de entrada em aplicativos de linha de comando, voc\u00ea coloca no contexto do bot para um usu\u00e1rio espec\u00edfico um ponto que lidar\u00e1 com sua pr\u00f3xima entrada, n\u00e3o importa o que contenha, o importante \u00e9 que a pr\u00f3xima atualiza\u00e7\u00e3o tenha um <code>User</code> para poder relacion\u00e1-lo ao ponto de espera de entrada definido.</p> <p>Abaixo voc\u00ea pode ver um exemplo de processamento de uma atualiza\u00e7\u00e3o quando n\u00e3o h\u00e1 correspond\u00eancia em <code>Commands</code>.</p> <p> </p>"},{"location":"pt/#commons","title":"Commons","text":"<p>Se o manipulador n\u00e3o encontrar <code>commands</code> ou <code>inputs</code>, ele verifica a carga de texto contra manipuladores <code>common</code>.</p> <p>Aconselhamos a us\u00e1-lo sem abuso, pois verifica fazendo itera\u00e7\u00e3o sobre todas as entradas.</p>"},{"location":"pt/#unprocessed","title":"Unprocessed","text":"<p>E a etapa final, se o manipulador n\u00e3o encontrar nenhuma atividade correspondente (<code>UpdateHandler</code> funciona completamente em paralelo e n\u00e3o conta como atividade usual), ent\u00e3o o <code>UnprocessedHandler</code> entra em a\u00e7\u00e3o, se estiver definido, ele lidar\u00e1 com este caso, pode ser \u00fatil avisar o usu\u00e1rio que algo deu errado.</p> <p>Leia mais detalhes no artigo Handlers.</p>"},{"location":"pt/#ratelimiter-de-atividade","title":"RateLimiter de Atividade","text":"<p>Ap\u00f3s encontrar uma atividade, tamb\u00e9m verifica os limites de taxa do usu\u00e1rio sobre ela, de acordo com os par\u00e2metros especificados nos par\u00e2metros da atividade.</p>"},{"location":"pt/#atividade","title":"Atividade","text":"<p>Atividade refere-se aos diferentes tipos de manipuladores que a biblioteca de bots telegram pode lidar, incluindo Commands, Inputs, Regexes e o manipulador Unprocessed.</p>"},{"location":"pt/#invocacao","title":"Invoca\u00e7\u00e3o","text":"<p>A etapa final de processamento \u00e9 a invoca\u00e7\u00e3o da atividade encontrada.</p> <p>Mais detalhes podem ser encontrados no artigo de invoca\u00e7\u00e3o.</p>"},{"location":"pt/#veja-tambem","title":"Veja tamb\u00e9m","text":"<ul> <li>An\u00e1lise de atualiza\u00e7\u00e3o</li> <li>Invoca\u00e7\u00e3o de atividade</li> <li>Handlers</li> <li>Configura\u00e7\u00e3o do bot</li> <li>Web starters (Spring, Ktor)</li> </ul>"},{"location":"pt/Actions/","title":"A\u00e7\u00f5es","text":""},{"location":"pt/Actions/#todas-as-requisicoes-sao-acoes","title":"Todas as requisi\u00e7\u00f5es s\u00e3o A\u00e7\u00f5es","text":"<p>Todas as requisi\u00e7\u00f5es da API do Telegram s\u00e3o diferentes tipos de interfaces <code>TgAction</code> que implementam diferentes m\u00e9todos como <code>SendMessageAction</code>, que foram encapsulados na forma de fun\u00e7\u00f5es do tipo <code>message()</code> para a conveni\u00eancia da interface da biblioteca.</p> <p> </p> <p>Cada <code>Action</code> pode ter seus pr\u00f3prios m\u00e9todos poss\u00edveis, dependendo das <code>Feature</code> dispon\u00edveis.</p>"},{"location":"pt/Actions/#recursos","title":"Recursos","text":"<p>Diferentes a\u00e7\u00f5es podem ter diferentes <code>Features</code> dependendo da API do Bot do Telegram, como: <code>OptionsFeature</code>, <code>MarkupFeature</code> <code>EntitiesFeature</code> <code>CaptionFeature</code>.</p> <p>Vamos dar uma olhada mais de perto neles:</p>"},{"location":"pt/Actions/#opcoes","title":"Op\u00e7\u00f5es","text":"<p>Por exemplo, <code>OptionsFeature</code> \u00e9 usado para passar par\u00e2metros opcionais.</p> <p>Cada a\u00e7\u00e3o tem seu pr\u00f3prio tipo de op\u00e7\u00f5es, que voc\u00ea pode ver na pr\u00f3pria <code>Action</code> no par\u00e2metro <code>options</code>, na se\u00e7\u00e3o de propriedades. Por exemplo, <code>sendMessage</code> que cont\u00e9m uma classe de dados <code>MessageOptions</code> com diferentes par\u00e2metros como op\u00e7\u00f5es.</p> <p>Exemplo de uso:</p> <pre><code>message{ \"*Test*\" }.options {\n    parseMode = ParseMode.Markdown\n}.send(user, bot)\n</code></pre>"},{"location":"pt/Actions/#markup","title":"Markup","text":"<p>Tamb\u00e9m h\u00e1 um m\u00e9todo para enviar markups que suporta todos os tipos de teclados: <code>ReplyKeyboardMarkup</code>, <code>InlineKeyboardMarkup</code>, <code>ForceReply</code>, <code>ReplyKeyboardRemove</code>.</p>"},{"location":"pt/Actions/#inline-keyboard-markup","title":"Inline Keyboard Markup","text":"<p>Este construtor permite que voc\u00ea construa bot\u00f5es inline com qualquer combina\u00e7\u00e3o de par\u00e2metros.</p> <pre><code>message{ \"Test\" }.inlineKeyboardMarkup {\n    \"name\" callback \"callbackData\"         //\n    \"buttonName\" url \"https://google.com\"  //--- estes dois bot\u00f5es estar\u00e3o na mesma linha.\n    newLine() // ou br()\n    \"otherButton\" webAppInfo \"data\"       // este estar\u00e1 em outra linha\n\n    // voc\u00ea tamb\u00e9m pode usar um estilo diferente dentro do construtor:\n    callbackData(\"buttonName\") { \"callbackData\" }\n}.send(user, bot)\n</code></pre> <p>Mais detalhes podem ser vistos na documenta\u00e7\u00e3o do construtor documentation.</p>"},{"location":"pt/Actions/#reply-keyboard-markup","title":"Reply Keyboard Markup","text":"<p>Este construtor permite que voc\u00ea construa bot\u00f5es de menu.</p> <pre><code>message{ \"Test\" }.replyKeyboardMarkup {\n  + \"Menu button\"     // voc\u00ea pode adicionar bot\u00f5es usando o operador de soma un\u00e1rio\n  + \"Menu button 2\"\n  br() // v\u00e1 para a segunda linha\n  \"Send polls \ud83d\udc40\" requestPoll true   // bot\u00e3o com par\u00e2metro\n\n  options {\n    resizeKeyboard = true\n  }\n}.send(user, bot)\n</code></pre> <p>Op\u00e7\u00f5es adicionais aplic\u00e1veis ao teclado podem ser vistas em <code>ReplyKeyboardMarkupOptions</code>.</p> <p>Veja a documenta\u00e7\u00e3o do construtor documentation para mais detalhes sobre os m\u00e9todos.</p> <p>\u00c9 geralmente conveniente usar dsl para coletar markup do teclado, mas se necess\u00e1rio, voc\u00ea tamb\u00e9m pode adicionar markup manualmente.</p> <pre><code>message{ \"*Test*\" }.markup {\n    InlineKeyboardMarkup(\n        InlineKeyboardButton(\"test\", callbackData = \"testCallback\")\n    )\n}.send(user, bot)\n</code></pre> <pre><code>message{ \"*Test*\" }.markup {\n    ReplyKeyboardMarkup(\n        KeyboardButton(\"Test menu button\")\n    )\n}.send(user, bot)\n</code></pre>"},{"location":"pt/Actions/#entities","title":"Entities","text":"<p>Tamb\u00e9m h\u00e1 um m\u00e9todo para enviar <code>MessageEntity</code>.</p> <p>Exemplo de uso:</p> <pre><code>message{ \"Test \\$hello\" }.replyKeyboardMarkup {\n    +\"Test menu button\"\n}.entities {\n    5 to 15 url \"https://google.com\" // adicione TextLink\n    entity(EntityType.Bold, 0, 4)\n    entity(EntityType.Cashtag, 5, 5) // a contrabarra n\u00e3o conta (porque \u00e9 usada para o compilador)\n}.send(user, bot)\n</code></pre>"},{"location":"pt/Actions/#entities-contextuais","title":"Entities contextuais.","text":"<p>Entities tamb\u00e9m podem ser adicionadas atrav\u00e9s do contexto de algumas constru\u00e7\u00f5es, elas s\u00e3o rotuladas com uma interface espec\u00edfica EntitiesContextBuilder, que tamb\u00e9m est\u00e1 presente no recurso de legenda.</p> <p>Exemplo de uso:</p> <pre><code>message { \"usual text \" - bold { \"this is bold text\" } - \" continue usual\" }.send(user, bot)\n</code></pre> <p>Todos os tipos de entity types s\u00e3o suportados.</p>"},{"location":"pt/Actions/#caption","title":"Caption","text":"<p>Tamb\u00e9m, o m\u00e9todo <code>caption</code> pode ser usado para adicionar legendas a arquivos de m\u00eddia.</p> <p>Exemplo de uso:</p> <pre><code>photo { \"FILE_ID\" }.caption { \"Test caption\" }.send(user, bot)\n</code></pre>"},{"location":"pt/Actions/#veja-tambem","title":"Veja tamb\u00e9m","text":"<ul> <li>Bot context</li> <li>FSM | Conversation handling</li> </ul>"},{"location":"pt/Activites-and-Processors/","title":"Atividades e Processadores","text":""},{"location":"pt/Activites-and-Processors/#introducao","title":"Introdu\u00e7\u00e3o","text":"<p><code>Activity</code> nesta biblioteca \u00e9 a entidade abstrata que \u00e9 uma generaliza\u00e7\u00e3o de entidades como <code>@CommandHandler</code>, <code>@InputHandler</code>, <code>@UnprocessedHandler</code> e <code>@CommonHandler</code>.</p> <p>Tamb\u00e9m d\u00ea uma olhada no artigo sobre handlers.</p>"},{"location":"pt/Activites-and-Processors/#coletando-atividades","title":"Coletando atividades","text":"<p>As atividades s\u00e3o coletadas e todo o contexto preparado em tempo de compila\u00e7\u00e3o (exceto aquelas definidas atrav\u00e9s do DSL funcional).</p> <p>Se voc\u00ea quiser limitar a \u00e1rea em que o pacote ser\u00e1 pesquisado, pode passar um par\u00e2metro para o plugin:</p> <pre><code>ktGram {\n    packages = listOf(\"com.example.mybot\")\n}\n</code></pre> <p>ou sem plugin atrav\u00e9s do ksp:</p> <pre><code>ksp {\n    arg(\"package\", \"com.example.mybot\")\n}\n</code></pre> <p>note que nesse caso, para que as a\u00e7\u00f5es coletadas sejam processadas corretamente, voc\u00ea tamb\u00e9m deve especificar o pacote na pr\u00f3pria inst\u00e2ncia.</p> <pre><code>fun main() = runBlocking {\n    val bot = TelegramBot(\"BOT_TOKEN\", \"com.example.mybot\")\n\n    bot.handleUpdates()\n    // inicia o listener de long-polling\n}\n</code></pre> <p>esta op\u00e7\u00e3o foi adicionada para poder executar m\u00faltiplas inst\u00e2ncias do bot:</p> <pre><code>ktGram {\n    packages = listOf(\"com.example.mybot\", \"com.example.mybot2\")\n}\n</code></pre> <p>ou se voc\u00ea n\u00e3o estiver usando plugin para especificar pacotes diferentes, precisa especific\u00e1-los com separador <code>;</code>:</p> <pre><code>ksp {\n    arg(\"package\", \"com.example.mybot;com.example.mybot2\")\n}\n</code></pre>"},{"location":"pt/Activites-and-Processors/#processamento","title":"Processamento","text":""},{"location":"pt/Activites-and-Processors/#webhooks","title":"Webhooks","text":"<p>No seu controller (ou outro lugar onde o <code>webhook</code> \u00e9 processado), voc\u00ea chama: <code>bot.update.parseAndHandle(webhookString)</code></p>"},{"location":"pt/Activites-and-Processors/#long-polling","title":"Long polling","text":"<p>Chame: <code>bot.handleUpdates()</code> ou atrav\u00e9s de <code>bot.update.setListener { handle(it) }</code></p>"},{"location":"pt/Activites-and-Processors/#veja-tambem","title":"Veja tamb\u00e9m","text":"<ul> <li>Parsing de updates</li> <li>Invocation de atividades</li> <li>A\u00e7\u00f5es</li> </ul>"},{"location":"pt/Activity-invocation/","title":"Activity Invocation","text":"<p>Durante a invoca\u00e7\u00e3o de atividade, \u00e9 poss\u00edvel passar o contexto do bot, pois ele \u00e9 declarado como um par\u00e2metro nas fun\u00e7\u00f5es de destino.</p> <p>Os par\u00e2metros que podem ser passados s\u00e3o:</p> <ul> <li><code>ProcessedUpdate</code> (e todas as suas subclasses) - atualiza\u00e7\u00e3o de processamento.</li> <li><code>ProcessingContext</code> - contexto de baixo n\u00edvel do tratamento da atividade.</li> <li><code>User</code> - se presente.</li> <li><code>Chat</code> - se presente.</li> <li><code>TelegramBot</code> - inst\u00e2ncia atual do bot.</li> </ul> <p>Tamb\u00e9m \u00e9 poss\u00edvel adicionar um tipo personalizado para passagem.</p> <p>Para fazer isso, adicione uma classe que implemente <code>Autowiring&lt;T&gt;</code> e marque-a com a anota\u00e7\u00e3o <code>@Injectable</code>.</p> <p>Ap\u00f3s implementar a interface <code>Autowiring</code> - <code>T</code> estar\u00e1 dispon\u00edvel para passagem nas fun\u00e7\u00f5es de destino e ser\u00e1 obtido atrav\u00e9s do m\u00e9todo descrito na interface.</p> <pre><code>@Injectable\nobject UserResolver : Autowiring&lt;UserRecord&gt; {\n    override suspend fun get(update: ProcessedUpdate, bot: TelegramBot): UserRecord? {\n        return userRepository.getUserByTgId(update.user.id)\n    }\n}\n</code></pre> <p>Outros par\u00e2metros declarados nas fun\u00e7\u00f5es ser\u00e3o buscados nos par\u00e2metros analisados.</p> <p>Al\u00e9m disso, os par\u00e2metros analisados durante a passagem podem ser convertidos para certos tipos, aqui est\u00e1 a lista:</p> <ul> <li><code>String</code></li> <li><code>Integer</code></li> <li><code>Long</code></li> <li><code>Short</code></li> <li><code>Float</code></li> <li><code>Double</code></li> </ul> <p>Al\u00e9m disso, observe que se os par\u00e2metros forem declarados e estiverem ausentes (ou nos par\u00e2metros analisados ou, por exemplo, <code>User</code> estiver ausente em <code>Update</code>) ou o tipo declarado n\u00e3o se encaixar no par\u00e2metro recebido na fun\u00e7\u00e3o, <code>null</code> ser\u00e1 passado, ent\u00e3o tenha cuidado.</p> <p>Resumindo tudo, abaixo est\u00e1 um exemplo de como os par\u00e2metros da fun\u00e7\u00e3o geralmente s\u00e3o formados:</p> <p> </p>"},{"location":"pt/Activity-invocation/#veja-tambem","title":"Veja tamb\u00e9m","text":"<ul> <li>Update parsing</li> <li>Activities &amp; Processors</li> </ul>"},{"location":"pt/Bot-Context/","title":"Contexto do Bot","text":"<p>O bot tamb\u00e9m pode fornecer a capacidade de lembrar alguns dados atrav\u00e9s das interfaces <code>UserData</code> e <code>ClassData</code>.</p> <ul> <li><code>userData</code> \u00e9 um dado em n\u00edvel de usu\u00e1rio.</li> <li><code>classData</code> \u00e9 um dado em n\u00edvel de classe, ou seja, os dados ser\u00e3o armazenados at\u00e9 que o usu\u00e1rio se mova para um comando ou entrada que esteja em uma   classe diferente. (no modo fun\u00e7\u00e3o funcionar\u00e1 como dado de usu\u00e1rio)</li> </ul> <p>Por padr\u00e3o, a implementa\u00e7\u00e3o \u00e9 fornecida atrav\u00e9s de <code>ConcurrentHashMap</code> mas pode ser alterada para a sua pr\u00f3pria atrav\u00e9s das interfaces <code>UserData</code> e <code>ClassData</code> usando as ferramentas de armazenamento de dados de sua escolha.</p> <p>Caution</p> <p>N\u00e3o se esque\u00e7a de executar a tarefa gradle <code>kspKotlin</code>/ou qualquer tarefa ksp relevante para tornar as vincula\u00e7\u00f5es de codegen necess\u00e1rias dispon\u00edveis.</p> <p>Para alterar, tudo o que voc\u00ea precisa fazer \u00e9 colocar sob sua implementa\u00e7\u00e3o a anota\u00e7\u00e3o <code>@CtxProvider</code> e executar a tarefa gradle ksp (ou build).</p> <pre><code>@CtxProvider\nclass MyRedis : UserData&lt;String&gt; {\n    // ...\n}\n</code></pre>"},{"location":"pt/Bot-Context/#veja-tambem","title":"Veja tamb\u00e9m","text":"<ul> <li>Home</li> <li>Parsing de atualiza\u00e7\u00e3o</li> </ul>"},{"location":"pt/Bot-configuration/","title":"Configura\u00e7\u00e3o do Bot","text":"<p>A biblioteca oferece muitas op\u00e7\u00f5es de configura\u00e7\u00e3o, voc\u00ea pode ver a refer\u00eancia da API na descri\u00e7\u00e3o da classe <code>BotConfiguration</code>.</p> <p>H\u00e1 tamb\u00e9m duas abordagens para configurar o bot:</p>"},{"location":"pt/Bot-configuration/#lambda-do-configurator","title":"Lambda do Configurator","text":"<pre><code>// ...\nval bot = TelegramBot(\"BOT_TOKEN\") {\n  inputListener = RedisInputListenerImpl()\n  classManager = KoinClassManagerImpl()\n  logging {\n      botLogLevel = LogLvl.DEBUG\n  }\n}\n// ...\n</code></pre>"},{"location":"pt/Bot-configuration/#interface-configloader","title":"Interface ConfigLoader","text":"<p>H\u00e1 tamb\u00e9m a capacidade de configurar atrav\u00e9s de uma interface especial <code>ConfigLoader</code>, que voc\u00ea pode usar para carregar configura\u00e7\u00f5es de fontes externas (<code>properties</code>, <code>command line args</code>, etc.).</p> <p>A implementa\u00e7\u00e3o desta interface pode ser passada atrav\u00e9s de um construtor secund\u00e1rio e a inst\u00e2ncia ser\u00e1 configurada de acordo.</p> <pre><code>val bot = TelegramBot(ConfigLoaderImpl)\n</code></pre> <p>Atualmente h\u00e1 v\u00e1rios m\u00f3dulos fornecidos que implementam esta interface como <code>ktgram-config-env</code>, <code>ktgram-config-toml</code>.</p>"},{"location":"pt/Bot-configuration/#visao-geral-do-botconfiguration","title":"Vis\u00e3o Geral do BotConfiguration","text":""},{"location":"pt/Bot-configuration/#botconfiguration","title":"BotConfiguration","text":"<p>A classe <code>BotConfiguration</code> \u00e9 o centro principal para configurar um bot. Ela inclui propriedades para identificar o bot, configurar o host da API, determinar se o bot opera em um ambiente de teste, lidar com entradas, gerenciar classes e controlar a remo\u00e7\u00e3o autom\u00e1tica de entradas. Al\u00e9m disso, ela fornece propriedades internas para limita\u00e7\u00e3o de taxa, configura\u00e7\u00e3o do cliente HTTP, logging, escuta de atualiza\u00e7\u00f5es e an\u00e1lise de comandos.</p>"},{"location":"pt/Bot-configuration/#propriedades","title":"Propriedades","text":"<ul> <li><code>identifier</code>: Identifica diferentes inst\u00e2ncias de bot durante o processamento multi-bot.</li> <li><code>apiHost</code>: Host da API do Telegram.</li> <li><code>isTestEnv</code>: Flag indicando se o bot opera em um ambiente de teste.</li> <li><code>inputListener</code>: Inst\u00e2ncia da classe de tratamento de entrada.</li> <li><code>classManager</code>: Gerenciador usado para obter classes.</li> <li><code>inputAutoRemoval</code>: Flag regulando a exclus\u00e3o autom\u00e1tica do ponto de entrada durante o processamento.</li> <li><code>exceptionHandlingStrategy</code>: Define a estrat\u00e9gia para tratamento de exce\u00e7\u00f5es.<ul> <li><code>CollectToChannel</code> - Coleta para <code>TgUpdateHandler.caughtExceptions</code>.</li> <li><code>Throw</code> - Lan\u00e7a novamente envolvido com <code>TgException</code>.</li> <li><code>DoNothing</code> - N\u00e3o faz nada :)</li> <li><code>Handle</code> - Define um manipulador personalizado.</li> </ul> </li> <li><code>throwExOnActionsFailure</code>: Lan\u00e7a uma exce\u00e7\u00e3o quando qualquer solicita\u00e7\u00e3o do bot falha.</li> </ul>"},{"location":"pt/Bot-configuration/#blocos-de-configuracao","title":"Blocos de Configura\u00e7\u00e3o","text":"<p>O <code>BotConfiguration</code> tamb\u00e9m oferece fun\u00e7\u00f5es para configurar seus componentes internos:</p> <ul> <li><code>httpClient(block: HttpConfiguration.() -&gt; Unit)</code>: Configura o cliente HTTP.</li> <li><code>logging(block: LoggingConfiguration.() -&gt; Unit)</code>: Configura logging.</li> <li><code>rateLimiter(block: RateLimiterConfiguration.() -&gt; Unit)</code>: Configura limita\u00e7\u00e3o de solicita\u00e7\u00f5es.</li> <li><code>updatesListener(block: UpdatesListenerConfiguration.() -&gt; Unit)</code>: Configura o escutador de atualiza\u00e7\u00f5es.</li> <li><code>commandParsing(block: CommandParsingConfiguration.() -&gt; Unit)</code>: Especifica o padr\u00e3o de an\u00e1lise de comandos.</li> </ul>"},{"location":"pt/Bot-configuration/#classes-de-configuracao-associadas","title":"Classes de Configura\u00e7\u00e3o Associadas","text":""},{"location":"pt/Bot-configuration/#ratelimiterconfiguration","title":"RateLimiterConfiguration","text":"<p>Configura limita\u00e7\u00e3o global de taxa.</p> <ul> <li><code>limits</code>: Limites globais de taxa.</li> <li><code>mechanism</code>: Mecanismo usado para limita\u00e7\u00e3o de taxa, o padr\u00e3o \u00e9 o algoritmo TokenBucket.</li> <li><code>exceededAction</code>: A\u00e7\u00e3o aplicada quando o limite \u00e9 excedido.</li> </ul>"},{"location":"pt/Bot-configuration/#httpconfiguration","title":"HttpConfiguration","text":"<p>Cont\u00e9m configura\u00e7\u00e3o para o cliente HTTP do bot.</p> <ul> <li><code>requestTimeoutMillis</code>: Timeout de solicita\u00e7\u00e3o em milissegundos.</li> <li><code>connectTimeoutMillis</code>: Timeout de conex\u00e3o em milissegundos.</li> <li><code>socketTimeoutMillis</code>: Timeout de socket em milissegundos.</li> <li><code>maxRequestRetry</code>: M\u00e1ximo de tentativas para solicita\u00e7\u00f5es HTTP.</li> <li><code>retryStrategy</code>: Estrat\u00e9gia para tentativas, personaliz\u00e1vel.</li> <li><code>retryDelay</code>: Multiplicador para timeout em cada tentativa.</li> <li><code>proxy</code>: Configura\u00e7\u00f5es de proxy para chamadas HTTP.</li> <li><code>additionalHeaders</code>: Headers aplicados a cada solicita\u00e7\u00e3o.</li> </ul>"},{"location":"pt/Bot-configuration/#loggingconfiguration","title":"LoggingConfiguration","text":"<p>Gerencia n\u00edveis de logging para a\u00e7\u00f5es do bot e solicita\u00e7\u00f5es HTTP.</p> <ul> <li><code>botLogLevel</code>: N\u00edvel de logs para a\u00e7\u00f5es do bot.</li> <li><code>httpLogLevel</code>: N\u00edvel de logs para solicita\u00e7\u00f5es HTTP.</li> </ul>"},{"location":"pt/Bot-configuration/#updateslistenerconfiguration","title":"UpdatesListenerConfiguration","text":"<p>Configura par\u00e2metros relacionados \u00e0 obten\u00e7\u00e3o de atualiza\u00e7\u00f5es.</p> <ul> <li><code>dispatcher</code>: Dispatcher para coletar atualiza\u00e7\u00f5es recebidas.</li> <li><code>processingDispatcher</code>: Dispatcher para processar atualiza\u00e7\u00f5es.</li> <li><code>pullingDelay</code>: Delay ap\u00f3s cada solicita\u00e7\u00e3o de obten\u00e7\u00e3o.</li> <li><code>updatesPollingTimeout</code>: Op\u00e7\u00e3o de timeout para mecanismo de long-polling.</li> </ul>"},{"location":"pt/Bot-configuration/#commandparsingconfiguration","title":"CommandParsingConfiguration","text":"<p>Especifica par\u00e2metros para an\u00e1lise de comandos.</p> <ul> <li><code>commandDelimiter</code>: Separador entre comando e par\u00e2metros.</li> <li><code>parametersDelimiter</code>: Separador entre par\u00e2metros.</li> <li><code>parameterValueDelimiter</code>: Separador entre chave e valor do par\u00e2metro.</li> <li><code>restrictSpacesInCommands</code>: Flag indicando se espa\u00e7os em comandos devem ser tratados como fim do comando.</li> <li><code>useIdentifierInGroupCommands</code>: Usa o identificador do bot para corresponder comandos contendo @.</li> </ul>"},{"location":"pt/Bot-configuration/#exemplo-de-configuracao","title":"Exemplo de Configura\u00e7\u00e3o","text":"<p>Aqui est\u00e1 um exemplo de como configurar um bot usando estas classes:</p> <pre><code>val bot = TelegramBot(\"TOKEN\") {\n    identifier = \"MyBot\",\n    apiHost = \"https://api.telegram.org\",\n    isTestEnv = true,\n    inputListener = InputListenerMapImpl(),\n    classManager = ClassManagerImpl(),\n\n    httpClient {\n        requestTimeoutMillis = 5000L\n        connectTimeoutMillis = 3000L\n        socketTimeoutMillis = 2000L\n    }\n    logging {\n        botLogLevel = LogLvl.DEBUG\n        httpLogLevel = HttpLogLevel.BODY\n    }\n    updatesListener {\n        dispatcher = Dispatchers.IO\n        processingDispatcher = Dispatchers.Unconfined\n        pullingDelay = 1000L\n    }\n    commandParsing {\n        commandDelimiter = '*'\n        parametersDelimiter = '&amp;'\n        restrictSpacesInCommands = true\n    }\n}\n</code></pre> <p>Esta configura\u00e7\u00e3o configura um bot com identificadores espec\u00edficos, habilita o modo de ambiente de teste, configura limita\u00e7\u00e3o de taxa, configura\u00e7\u00f5es do cliente HTTP, n\u00edveis de logging, par\u00e2metros do escutador de atualiza\u00e7\u00f5es e regras de an\u00e1lise de comandos.</p>"},{"location":"pt/Bot-configuration/#ao-aproveitar-estas-opcoes-de-configuracao-os-desenvolvedores-podem-ajustar-seus-bots-para-atender-requisitos-especificos-e-otimizar-o-desempenho-em-varios-cenarios-operacionais","title":"Ao aproveitar estas op\u00e7\u00f5es de configura\u00e7\u00e3o, os desenvolvedores podem ajustar seus bots para atender requisitos espec\u00edficos e otimizar o desempenho em v\u00e1rios cen\u00e1rios operacionais.","text":""},{"location":"pt/F.A.Q/#excecao-abstractmethoderror","title":"Exce\u00e7\u00e3o <code>AbstractMethodError</code>","text":"<p>Se voc\u00ea est\u00e1 obtendo essa exce\u00e7\u00e3o ao iniciar seu aplicativo:</p> <pre><code>Exception in thread \"DefaultDispatcher-worker-1\" java.lang.AbstractMethodError: 'kotlinx.serialization.KSerializer[] kotlinx.serialization.internal.GeneratedSerializer.typeParametersSerializers()'\n    at eu.vendeli.tgbot.types.options.GetUpdatesOptions$$serializer.typeParametersSerializers(GetUpdatesOptions.kt:6)\n</code></pre> <p>Isso acontece porque seu sistema de build est\u00e1 resolvendo uma biblioteca de serializa\u00e7\u00e3o antiga cuja mec\u00e2nica interna difere. Para resolver isso voc\u00ea deve fazer com que use uma vers\u00e3o mais recente, por exemplo adicionando isso ao seu buildscript:</p> <pre><code>configurations.all {\n    resolutionStrategy.eachDependency {\n        val serdeVer = \"x.x.x\" // deve ser &gt;= 1.8.0\n        when(requested.module.toString()) {\n            // serializa\u00e7\u00e3o json\n            \"org.jetbrains.kotlinx:kotlinx-serialization-json\" -&gt; useVersion(serdeVer)\n            \"org.jetbrains.kotlinx:kotlinx-serialization-json-jvm\" -&gt; useVersion(serdeVer)\n            \"org.jetbrains.kotlinx:kotlinx-serialization-core\" -&gt; useVersion(serdeVer)\n            \"org.jetbrains.kotlinx:kotlinx-serialization-core-jvm\" -&gt; useVersion(serdeVer)\n            \"org.jetbrains.kotlinx:kotlinx-serialization-bom\" -&gt; useVersion(serdeVer)\n        }\n    }\n}\n</code></pre> <p>(Se estivesse bem descrito no changelog eu nunca teria atualizado, pois estou recebendo tantos relat\u00f3rios sobre este problema)</p>"},{"location":"pt/F.A.Q/#como-obter-a-resposta-do-metodo","title":"Como obter a resposta do m\u00e9todo?","text":"<p>Para obter uma resposta e poder operar sobre ela, voc\u00ea precisa usar <code>sendReturning</code> no final do m\u00e9todo em vez de <code>send</code>.</p> <p>Neste caso a classe <code>Response</code> \u00e9 retornada, que cont\u00e9m a resposta, sucesso ou falha, posteriormente voc\u00ea precisa ou tratar a falha ou simplesmente chamar <code>getOrNull()</code>.</p> <p>H\u00e1 uma se\u00e7\u00e3o sobre: Processando respostas.</p>"},{"location":"pt/F.A.Q/#estou-obtendo-erro-ao-usar-spring-boot-devtools","title":"Estou obtendo erro ao usar <code>spring-boot-devtools</code>","text":"<p>Isso acontece porque <code>spring-boot-devtools</code> tem seu pr\u00f3prio <code>classloader</code> e n\u00e3o encontra os m\u00e9todos.</p> <p>Voc\u00ea precisa adicionar ao <code>resources/META-INF/spring-devtools.properties</code>:</p> <pre><code>restart.include.generated=/eu.vendeli\n</code></pre>"},{"location":"pt/F.A.Q/#como-mudar-o-motor-ktor","title":"Como mudar o motor ktor","text":"<p>Se voc\u00ea quiser mudar o motor usado pelo cliente voc\u00ea pode simplesmente mudar o par\u00e2metro nas configura\u00e7\u00f5es do plugin.</p>"},{"location":"pt/F.A.Q/#como-usar-meu-provedor-de-logging-favorito","title":"Como usar meu provedor de logging favorito","text":"<p>A biblioteca usa <code>slf4j-api</code> e para usar o provedor voc\u00ea s\u00f3 precisa adicion\u00e1-lo \u00e0s depend\u00eancias.</p> <p>O plugin da biblioteca detecta automaticamente o uso do provedor, se o provedor estiver ausente, <code>logback</code> ser\u00e1 usado por padr\u00e3o.</p>"},{"location":"pt/F.A.Q/#capturar-excecoes-de-rede-dentro-do-manipulador-de-long-polling","title":"Capturar exce\u00e7\u00f5es de rede dentro do manipulador de long-polling","text":"<p>Por exemplo, se voc\u00ea tem uma conex\u00e3o inst\u00e1vel e precisa capturar um erro por causa disso, talvez esta abordagem ajude voc\u00ea:</p> <pre><code>fun main() {\n    val bot = TelegramBot(\"TOKEN\")\n\n    try {\n        bot.handleUpdates()\n    } catch (e: Exception) {\n        // tratar se necess\u00e1rio\n\n        bot.update.stopListener()\n        bot.handleUpdates()\n    }\n}\n</code></pre> <p>Voc\u00ea tamb\u00e9m pode dar uma olhada em como \u00e9 feito no spring-starter.</p>"},{"location":"pt/FSM-and-Conversation-handling/","title":"Fsm E Tratamento De Conversa\u00e7\u00e3o","text":"<p>A biblioteca tamb\u00e9m suporta o mecanismo FSM, que \u00e9 um mecanismo para processamento progressivo de entrada do usu\u00e1rio com tratamento de entrada incorreta.</p> <p>Note</p> <p>TL;DR: Veja exemplo l\u00e1.</p>"},{"location":"pt/FSM-and-Conversation-handling/#na-teoria","title":"Na teoria","text":"<p>Vamos imaginar uma situa\u00e7\u00e3o onde voc\u00ea precisa coletar uma pesquisa do usu\u00e1rio, voc\u00ea pode pedir todos os dados de uma pessoa em uma etapa, mas com entrada incorreta de um dos par\u00e2metros, ser\u00e1 dif\u00edcil tanto para o usu\u00e1rio quanto para n\u00f3s, e cada etapa pode ter uma diferen\u00e7a dependendo de certos dados de entrada.</p> <p>Agora vamos imaginar entrada passo a passo dos dados, onde o bot entra em modo de di\u00e1logo com o usu\u00e1rio.</p> <p> </p> <p>As setas verdes indicam o processo de transi\u00e7\u00e3o pelas etapas sem erros, as setas azuis significam salvar o estado atual e esperar por re-entrada (por exemplo, se o usu\u00e1rio indicou que ele tem -100 anos, deve pedir idade novamente), e as vermelhas mostram sa\u00edda de todo o processo devido a qualquer comando ou qualquer outro cancelamento significativo.</p>"},{"location":"pt/FSM-and-Conversation-handling/#na-pratica","title":"Na pr\u00e1tica","text":"<p>O sistema Wizard permite intera\u00e7\u00f5es de m\u00faltiplos passos em bots Telegram. Ele guia os usu\u00e1rios atrav\u00e9s de uma sequ\u00eancia de etapas, valida entrada, armazena estado e transita entre etapas.</p> <p>Principais Benef\u00edcios: - Type-safe: Verifica\u00e7\u00e3o de tipo em tempo de compila\u00e7\u00e3o para acesso ao estado - Declarativo: Defina etapas como classes/objeto aninhados - Flex\u00edvel: Suporte para transi\u00e7\u00f5es condicionais, saltos e novas tentativas - Stateful: Persist\u00eancia autom\u00e1tica de estado com backends de armazenamento plug\u00e1veis - Integrado: Funciona com o sistema Activity existente</p>"},{"location":"pt/FSM-and-Conversation-handling/#conceitos-principais","title":"Conceitos Principais","text":""},{"location":"pt/FSM-and-Conversation-handling/#wizardstep","title":"WizardStep","text":"<p>Um <code>WizardStep</code> representa uma \u00fanica etapa no fluxo do wizard. Cada etapa deve implementar:</p> <ul> <li><code>onEntry(ctx: WizardContext)</code>: Chamado quando o usu\u00e1rio entra nesta etapa. Use isso para solicitar ao usu\u00e1rio.</li> <li><code>onRetry(ctx: WizardContext)</code>: Chamado quando a valida\u00e7\u00e3o falha e a etapa deve tentar novamente. Use isso para mostrar mensagens de erro.</li> <li><code>validate(ctx: WizardContext): Transition</code>: Valida a entrada atual e retorna uma <code>Transition</code> indicando o que acontece em seguida.</li> <li><code>store(ctx: WizardContext): Any?</code> (opcional): Retorna o valor a persistir para esta etapa. Retorne <code>null</code> se a etapa n\u00e3o armazenar estado.</li> </ul> <pre><code>object NameStep : WizardStep(isInitial = true) {\n    override suspend fun onEntry(ctx: WizardContext) {\n        message { \"Qual \u00e9 o seu nome?\" }.send(ctx.user, ctx.bot)\n    }\n\n    override suspend fun onRetry(ctx: WizardContext) {\n        message { \"Nome n\u00e3o pode estar vazio. Por favor, tente novamente.\" }.send(ctx.user, ctx.bot)\n    }\n\n    override suspend fun validate(ctx: WizardContext): Transition {\n        return if (ctx.update.text.isNullOrBlank()) {\n            Transition.Retry\n        } else {\n            Transition.Next\n        }\n    }\n\n    override suspend fun store(ctx: WizardContext): String {\n        return ctx.update.text!!\n    }\n}\n</code></pre> <p>Note</p> <p>Se alguma etapa n\u00e3o estiver marcada como inicial -&gt; a primeira etapa declarada \u00e9 considerada como.</p>"},{"location":"pt/FSM-and-Conversation-handling/#transition","title":"Transition","text":"<p>Uma <code>Transition</code> determina o que acontece ap\u00f3s a valida\u00e7\u00e3o:</p> <ul> <li><code>Transition.Next</code>: V\u00e1 para a pr\u00f3xima etapa na sequ\u00eancia</li> <li><code>Transition.JumpTo(step: KClass&lt;out WizardStep&gt;)</code>: Salte para uma etapa espec\u00edfica</li> <li><code>Transition.Retry</code>: Tente novamente a etapa atual (valida\u00e7\u00e3o falhou)</li> <li><code>Transition.Finish</code>: Termine o wizard</li> </ul> <pre><code>// Salto condicional baseado na entrada\noverride suspend fun validate(ctx: WizardContext): Transition {\n    val age = ctx.update.text?.toIntOrNull()\n    return when {\n        age == null -&gt; Transition.Retry\n        age &lt; 18 -&gt; Transition.JumpTo(UnderageStep::class)\n        else -&gt; Transition.Next\n    }\n}\n</code></pre>"},{"location":"pt/FSM-and-Conversation-handling/#wizardcontext","title":"WizardContext","text":"<p><code>WizardContext</code> fornece acesso a: - <code>user: User</code>: O usu\u00e1rio atual - <code>update: ProcessedUpdate</code>: A atualiza\u00e7\u00e3o atual - <code>bot: TelegramBot</code>: A inst\u00e2ncia do bot - <code>userReference: UserChatReference</code>: Refer\u00eancia de ID de usu\u00e1rio e chat para armazenamento de estado</p> <p>Al\u00e9m de m\u00e9todos de acesso a estado type-safe (gerados pelo KSP).</p>"},{"location":"pt/FSM-and-Conversation-handling/#definindo-um-wizard","title":"Definindo um Wizard","text":""},{"location":"pt/FSM-and-Conversation-handling/#estrutura-basica","title":"Estrutura B\u00e1sica","text":"<p>Um wizard \u00e9 definido como uma classe ou objeto anotado com <code>@WizardHandler</code>:</p> <pre><code>@WizardHandler(trigger = [\"/survey\"])\nobject SurveyWizard {\n    object NameStep : WizardStep(isInitial = true) {\n        // ... implementa\u00e7\u00e3o da etapa\n    }\n\n    object AgeStep : WizardStep {\n        // ... implementa\u00e7\u00e3o da etapa\n    }\n\n    object FinishStep : WizardStep {\n        // ... implementa\u00e7\u00e3o da etapa\n    }\n}\n</code></pre>"},{"location":"pt/FSM-and-Conversation-handling/#parametros-de-anotacao","title":"Par\u00e2metros de Anota\u00e7\u00e3o","text":"<p><code>@WizardHandler</code> aceita: - <code>trigger: Array&lt;String&gt;</code>: Comandos que iniciam o wizard (e.g., <code>[\"/start\", \"/survey\"]</code>) - <code>scope: Array&lt;UpdateType&gt;</code>: Tipos de atualiza\u00e7\u00e3o para escutar (padr\u00e3o: <code>[UpdateType.MESSAGE]</code>) - <code>stateManagers: Array&lt;KClass&lt;out WizardStateManager&lt;*&gt;&gt;&gt;</code>: Classes de gerenciador de estado para armazenar dados de etapa</p>"},{"location":"pt/FSM-and-Conversation-handling/#gerenciamento-de-estado","title":"Gerenciamento de Estado","text":""},{"location":"pt/FSM-and-Conversation-handling/#wizardstatemanager","title":"WizardStateManager","text":"<p>O estado \u00e9 armazenado usando implementa\u00e7\u00f5es de <code>WizardStateManager&lt;T&gt;</code>. Cada gerenciador lida com um tipo espec\u00edfico:</p> <pre><code>interface WizardStateManager&lt;T : Any&gt; {\n    suspend fun get(key: KClass&lt;out WizardStep&gt;, reference: UserChatReference): T?\n    suspend fun set(key: KClass&lt;out WizardStep&gt;, reference: UserChatReference, value: T)\n    suspend fun del(key: KClass&lt;out WizardStep&gt;, reference: UserChatReference)\n}\n</code></pre> <p>Veja tamb\u00e9m: MapStateManager, MapStringStateManager, MapIntStateManager, MapLongStateManager."},{"location":"pt/FSM-and-Conversation-handling/#correspondencia-automatica","title":"Correspond\u00eancia Autom\u00e1tica","text":"<p>KSP corresponde etapas a gerenciadores de estado baseado no tipo de retorno do <code>store()</code>:</p> <pre><code>@WizardHandler(\n    trigger = [\"/survey\"],\n    stateManagers = [StringStateManager::class, IntStateManager::class]\n)\nobject SurveyWizard {\n    object NameStep : WizardStep(isInitial = true) {\n        override suspend fun store(ctx: WizardContext): String {\n            return ctx.update.text!! // Corresponde a StringStateManager\n        }\n    }\n\n    object AgeStep : WizardStep {\n        override suspend fun store(ctx: WizardContext): Int {\n            return ctx.update.text!!.toInt() // Corresponde a IntStateManager\n        }\n    }\n}\n</code></pre>"},{"location":"pt/FSM-and-Conversation-handling/#substituicao-por-etapa","title":"Substitui\u00e7\u00e3o Por Etapa","text":"<p>Substitua o gerenciador de estado para uma etapa espec\u00edfica usando <code>@WizardHandler.StateManager</code>:</p> <pre><code>@WizardHandler(\n    trigger = [\"/survey\"],\n    stateManagers = [DefaultStateManager::class]\n)\nobject SurveyWizard {\n    object NameStep : WizardStep(isInitial = true) {\n        // Usa DefaultStateManager\n    }\n\n    @WizardHandler.StateManager(CustomStateManager::class)\n    object AgeStep : WizardStep {\n        // Usa CustomStateManager em vez disso\n    }\n}\n</code></pre>"},{"location":"pt/FSM-and-Conversation-handling/#acesso-type-safe-ao-estado","title":"Acesso Type-Safe ao Estado","text":"<p>KSP gera fun\u00e7\u00f5es de extens\u00e3o type-safe em <code>WizardContext</code> para cada etapa que armazena estado.</p>"},{"location":"pt/FSM-and-Conversation-handling/#funcoes-geradas","title":"Fun\u00e7\u00f5es Geradas","text":"<p>Para uma etapa que armazena uma <code>String</code>:</p> <pre><code>// Gerado automaticamente pelo KSP\nsuspend inline fun &lt;reified S : WizardStep&gt; WizardContext.getState(): String?\nsuspend inline fun &lt;reified S : WizardStep&gt; WizardContext.setState(value: String)\nsuspend inline fun &lt;reified S : WizardStep&gt; WizardContext.delState()\n</code></pre>"},{"location":"pt/FSM-and-Conversation-handling/#uso","title":"Uso","text":"<pre><code>object FinishStep : WizardStep {\n    override suspend fun onEntry(ctx: WizardContext) {\n        // Acesso type-safe - retorna String? (nul\u00e1vel)\n        val name: String? = ctx.getState&lt;NameStep&gt;()\n\n        // Acesso type-safe - retorna Int? (nul\u00e1vel)\n        val age: Int? = ctx.getState&lt;AgeStep&gt;()\n\n        val summary = buildString {\n            appendLine(\"Nome: $name\")\n            appendLine(\"Idade: $age\")\n        }\n\n        message { summary }.send(ctx.user, ctx.bot)\n    }\n\n    override suspend fun onRetry(ctx: WizardContext) = Unit\n\n    override suspend fun validate(ctx: WizardContext): Transition {\n        return Transition.Finish\n    }\n}\n</code></pre>"},{"location":"pt/FSM-and-Conversation-handling/#metodos-de-fallback","title":"M\u00e9todos de Fallback","text":"<p>Se os m\u00e9todos type-safe n\u00e3o estiverem dispon\u00edveis, use os m\u00e9todos de fallback:</p> <pre><code>// Fallback - retorna Any?\nval name = ctx.getState(NameStep::class)\n\n// Fallback - aceita Any?\nctx.setState(NameStep::class, \"John\")\nctx.delState(NameStep::class)\n</code></pre>"},{"location":"pt/FSM-and-Conversation-handling/#exemplo-completo","title":"Exemplo Completo","text":""},{"location":"pt/FSM-and-Conversation-handling/#wizard-de-registro-de-usuario","title":"Wizard de Registro de Usu\u00e1rio","text":"<pre><code>@WizardHandler(\n    trigger = [\"/register\"],\n    stateManagers = [StringStateManager::class, IntStateManager::class]\n)\nobject RegistrationWizard {\n    object NameStep : WizardStep(isInitial = true) {\n        override suspend fun onEntry(ctx: WizardContext) {\n            message { \"Qual \u00e9 o seu nome?\" }.send(ctx.user, ctx.bot)\n        }\n\n        override suspend fun onRetry(ctx: WizardContext) {\n            message { \"Por favor, insira um nome v\u00e1lido.\" }.send(ctx.user, ctx.bot)\n        }\n\n        override suspend fun validate(ctx: WizardContext): Transition {\n            val name = ctx.update.text?.trim()\n            return if (name.isNullOrBlank() || name.length &lt; 2) {\n                Transition.Retry\n            } else {\n                Transition.Next\n            }\n        }\n\n        override suspend fun store(ctx: WizardContext): String {\n            return ctx.update.text!!.trim()\n        }\n    }\n\n    object AgeStep : WizardStep {\n        override suspend fun onEntry(ctx: WizardContext) {\n            message { \"Quantos anos voc\u00ea tem?\" }.send(ctx.user, ctx.bot)\n        }\n\n        override suspend fun onRetry(ctx: WizardContext) {\n            message { \"Por favor, insira uma idade v\u00e1lida (deve ser um n\u00famero).\" }.send(ctx.user, ctx.bot)\n        }\n\n        override suspend fun validate(ctx: WizardContext): Transition {\n            val age = ctx.update.text?.toIntOrNull()\n            return when {\n                age == null -&gt; Transition.Retry\n                age &lt; 0 || age &gt; 150 -&gt; Transition.Retry\n                age &lt; 18 -&gt; Transition.JumpTo(UnderageStep::class)\n                else -&gt; Transition.Next\n            }\n        }\n\n        override suspend fun store(ctx: WizardContext): Int {\n            return ctx.update.text!!.toInt()\n        }\n    }\n\n    object UnderageStep : WizardStep {\n        override suspend fun onEntry(ctx: WizardContext) {\n            message {\n                \"Desculpe, voc\u00ea deve ter 18 anos ou mais para se registrar.\"\n            }.send(ctx.user, ctx.bot)\n        }\n\n        override suspend fun onRetry(ctx: WizardContext) = Unit\n\n        override suspend fun validate(ctx: WizardContext): Transition {\n            return Transition.Finish\n        }\n    }\n\n    object ConfirmationStep : WizardStep {\n        override suspend fun onEntry(ctx: WizardContext) {\n            // Acesso type-safe ao estado\n            val name: String? = ctx.getState&lt;NameStep&gt;()\n            val age: Int? = ctx.getState&lt;AgeStep&gt;()\n\n            val confirmation = buildString {\n                appendLine(\"Por favor, confirme suas informa\u00e7\u00f5es:\")\n                appendLine(\"Nome: $name\")\n                appendLine(\"Idade: $age\")\n                appendLine()\n                appendLine(\"Responda 'sim' para confirmar ou 'n\u00e3o' para come\u00e7ar de novo.\")\n            }\n\n            message { confirmation }.send(ctx.user, ctx.bot)\n        }\n\n        override suspend fun onRetry(ctx: WizardContext) {\n            message { \"Por favor, responda 'sim' ou 'n\u00e3o'.\" }.send(ctx.user, ctx.bot)\n        }\n\n        override suspend fun validate(ctx: WizardContext): Transition {\n            val response = ctx.update.text?.lowercase()?.trim()\n            return when (response) {\n                \"sim\" -&gt; Transition.Finish\n                \"n\u00e3o\" -&gt; Transition.JumpTo(NameStep::class) // Come\u00e7ar de novo\n                else -&gt; Transition.Retry\n            }\n        }\n    }\n\n    object FinishStep : WizardStep {\n        override suspend fun onEntry(ctx: WizardContext) {\n            val name: String? = ctx.getState&lt;NameStep&gt;()\n            val age: Int? = ctx.getState&lt;AgeStep&gt;()\n\n            // Salvar no banco de dados, enviar confirma\u00e7\u00e3o, etc.\n            message {\n                \"Registro completo! Bem-vindo, $name (idade $age).\"\n            }.send(ctx.user, ctx.bot)\n        }\n\n        override suspend fun onRetry(ctx: WizardContext) = Unit\n\n        override suspend fun validate(ctx: WizardContext): Transition {\n            return Transition.Finish\n        }\n    }\n}\n</code></pre>"},{"location":"pt/FSM-and-Conversation-handling/#recursos-avancados","title":"Recursos Avan\u00e7ados","text":""},{"location":"pt/FSM-and-Conversation-handling/#transicoes-condicionais","title":"Transi\u00e7\u00f5es Condicionais","text":"<p>Use <code>Transition.JumpTo</code> para fluxos condicionais:</p> <pre><code>override suspend fun validate(ctx: WizardContext): Transition {\n    val choice = ctx.update.text?.lowercase()\n    return when (choice) {\n        \"premium\" -&gt; Transition.JumpTo(PremiumStep::class)\n        \"basic\" -&gt; Transition.JumpTo(BasicStep::class)\n        else -&gt; Transition.Retry\n    }\n}\n</code></pre>"},{"location":"pt/FSM-and-Conversation-handling/#etapas-sem-estado","title":"Etapas Sem Estado","text":"<p>Etapas n\u00e3o precisam armazenar estado. Simplesmente retorne <code>null</code> do <code>store()</code> (ou mantenha como est\u00e1):</p> <pre><code>object ConfirmationStep : WizardStep {\n    override suspend fun store(ctx: WizardContext): Any? = null\n    // ... resto da implementa\u00e7\u00e3o\n}\n</code></pre>"},{"location":"pt/FSM-and-Conversation-handling/#gerenciadores-de-estado-personalizados","title":"Gerenciadores de Estado Personalizados","text":"<p>Implemente <code>WizardStateManager&lt;T&gt;</code> para armazenamento personalizado (banco de dados, Redis, etc.):</p> <pre><code>class DatabaseStateManager : WizardStateManager&lt;String&gt; {\n    override suspend fun get(\n        key: KClass&lt;out WizardStep&gt;,\n        reference: UserChatReference\n    ): String? {\n        // Carregar do banco de dados\n        return database.getWizardState(reference.userId, key.qualifiedName)\n    }\n\n    override suspend fun set(\n        key: KClass&lt;out WizardStep&gt;,\n        reference: UserChatReference,\n        value: String\n    ) {\n        // Salvar no banco de dados\n        database.saveWizardState(reference.userId, key.qualifiedName, value)\n    }\n\n    override suspend fun del(\n        key: KClass&lt;out WizardStep&gt;,\n        reference: UserChatReference\n    ) {\n        // Deletar do banco de dados\n        database.deleteWizardState(reference.userId, key.qualifiedName)\n    }\n}\n</code></pre>"},{"location":"pt/FSM-and-Conversation-handling/#como-funciona-internamente","title":"Como Funciona Internamente","text":""},{"location":"pt/FSM-and-Conversation-handling/#geracao-de-codigo","title":"Gera\u00e7\u00e3o de C\u00f3digo","text":"<p>KSP gera:</p> <ol> <li>WizardActivity: Uma implementa\u00e7\u00e3o concreta estendendo <code>WizardActivity</code> com etapas hardcoded</li> <li>Start Activity: Lida com o comando trigger e inicia o wizard</li> <li>Input Activity: Lida com entrada do usu\u00e1rio durante o fluxo do wizard</li> <li>State Accessors: Fun\u00e7\u00f5es de extens\u00e3o type-safe para acesso ao estado</li> </ol>"},{"location":"pt/FSM-and-Conversation-handling/#fluxo","title":"Fluxo","text":"<ol> <li>Usu\u00e1rio envia <code>/register</code> \u2192 Start Activity \u00e9 invocado</li> <li>Start Activity cria <code>WizardContext</code> e chama <code>wizardActivity.start(ctx)</code></li> <li><code>start()</code> entra na etapa inicial e define <code>inputListener</code> para rastrear a etapa atual</li> <li>Usu\u00e1rio envia uma mensagem \u2192 Input Activity \u00e9 invocado</li> <li>Input Activity chama <code>wizardActivity.handleInput(ctx)</code></li> <li><code>handleInput()</code> valida entrada, persiste estado e transita para a pr\u00f3xima etapa</li> <li>Processo se repete at\u00e9 <code>Transition.Finish</code> ser retornado</li> </ol>"},{"location":"pt/FSM-and-Conversation-handling/#persistencia-de-estado","title":"Persist\u00eancia de Estado","text":"<ul> <li>Estado \u00e9 persistido ap\u00f3s valida\u00e7\u00e3o bem-sucedida (antes da transi\u00e7\u00e3o)</li> <li>O valor de retorno do <code>store()</code> de cada etapa \u00e9 salvo usando o <code>WizardStateManager</code> correspondente</li> <li>Estado \u00e9 escopo por usu\u00e1rio e chat (<code>UserChatReference</code>)</li> </ul>"},{"location":"pt/FSM-and-Conversation-handling/#melhores-praticas","title":"Melhores Pr\u00e1ticas","text":""},{"location":"pt/FSM-and-Conversation-handling/#1-sempre-forneca-prompts-claros","title":"1. Sempre Forne\u00e7a Prompts Claros","text":"<pre><code>override suspend fun onEntry(ctx: WizardContext) {\n    message {\n        \"Por favor, insira seu endere\u00e7o de email:\\n\" +\n        \"(Formato: usuario@exemplo.com)\"\n    }.send(ctx.user, ctx.bot)\n}\n</code></pre>"},{"location":"pt/FSM-and-Conversation-handling/#2-trate-erros-de-validacao-graciosamente","title":"2. Trate Erros de Valida\u00e7\u00e3o Graciosamente","text":"<pre><code>override suspend fun onRetry(ctx: WizardContext) {\n    message {\n        \"Formato de email inv\u00e1lido. Por favor, tente novamente.\\n\" +\n        \"Exemplo: usuario@exemplo.com\"\n    }.send(ctx.user, ctx.bot)\n}\n</code></pre>"},{"location":"pt/FSM-and-Conversation-handling/#3-use-acesso-type-safe-ao-estado","title":"3. Use Acesso Type-Safe ao Estado","text":"<p>Prefira m\u00e9todos type-safe gerados:</p> <pre><code>// \u2705 Bom - type-safe\nval name: String? = ctx.getState&lt;NameStep&gt;()\n\n// \u274c Evite - perde type safety\nval name = ctx.getState(NameStep::class) as? String\n</code></pre>"},{"location":"pt/FSM-and-Conversation-handling/#4-mantenha-etapas-focadas","title":"4. Mantenha Etapas Focadas","text":"<p>Cada etapa deve ter uma \u00fanica responsabilidade:</p> <pre><code>// \u2705 Bom - etapa focada\nobject EmailStep : WizardStep {\n    // Apenas lida com coleta de email\n}\n\n// \u274c Evite - l\u00f3gica demais\nobject PersonalInfoStep : WizardStep {\n    // Lida com nome, email, telefone, endere\u00e7o...\n}\n</code></pre>"},{"location":"pt/FSM-and-Conversation-handling/#5-use-nomes-significativos-para-etapas","title":"5. Use Nomes Significativos para Etapas","text":"<pre><code>// \u2705 Bom\nobject EmailVerificationStep : WizardStep\n\n// \u274c Evite\nobject Step2 : WizardStep\n</code></pre>"},{"location":"pt/FSM-and-Conversation-handling/#6-limpe-estado-quando-necessario","title":"6. Limpe Estado Quando Necess\u00e1rio","text":"<p>Se precisar limpar estado manualmente:</p> <pre><code>object CancelStep : WizardStep {\n    override suspend fun onEntry(ctx: WizardContext) {\n        // Limpar todo estado do wizard\n        ctx.delState&lt;NameStep&gt;()\n        ctx.delState&lt;AgeStep&gt;()\n\n        message { \"Registro cancelado.\" }.send(ctx.user, ctx.bot)\n    }\n}\n</code></pre>"},{"location":"pt/FSM-and-Conversation-handling/#resumo","title":"Resumo","text":"<p>O sistema Wizard fornece: - \u2705 Type-safe gerenciamento de estado com verifica\u00e7\u00e3o em tempo de compila\u00e7\u00e3o - \u2705 Declarativo defini\u00e7\u00f5es de etapas como classes aninhadas - \u2705 Flex\u00edvel transi\u00e7\u00f5es com l\u00f3gica condicional - \u2705 Autom\u00e1tico gera\u00e7\u00e3o de c\u00f3digo via KSP - \u2705 Integrado com o sistema Activity existente - \u2705 Plug\u00e1vel backends de armazenamento de estado</p> <p>Comece a construir wizards anotando uma classe com <code>@WizardHandler</code> e definindo suas etapas como objetos <code>WizardStep</code> aninhados! se voc\u00ea tiver alguma d\u00favida entre em contato conosco no chat, teremos prazer em ajudar :)</p>"},{"location":"pt/Functional-DSL/#para-infinito-functional-dsl-e-alem","title":"Para ~~infinito~~ functional dsl e al\u00e9m!","text":"<p>O bot suporta configura\u00e7\u00e3o de contexto baseada em anota\u00e7\u00f5es e functional dsl. Voc\u00ea pode combinar ambas as abordagens.</p>"},{"location":"pt/Functional-DSL/#functional-dsl","title":"Functional DSL","text":"<p>Functional DSL \u00e9 apenas uma forma diferente de definir o contexto do bot.</p> <p>Exemplo:</p> <pre><code>suspend fun main() {\n    val bot = TelegramBot(\"BOT_TOKEN\")\n\n    bot.setFunctionality {\n        onChosenInlineResult {\n            println(\"got a result ${update.chosenInlineResult.resultId} from ${update.user}\")\n        }\n    }\n}\n</code></pre>"},{"location":"pt/Functional-DSL/#comandos-e-entradas","title":"Comandos e Entradas","text":"<p>Voc\u00ea pode lidar com ambos <code>comandos</code> e <code>entradas</code> usando o functional DSL.</p>"},{"location":"pt/Functional-DSL/#comandos","title":"Comandos","text":"<pre><code>suspend fun main() {\n    val bot = TelegramBot(\"BOT_TOKEN\")\n\n    bot.setFunctionality {\n        // Comando regular\n        onCommand(\"/start\") {\n            message { \"Hello\" }.send(user, bot)\n        }\n\n        // Correspond\u00eancia de comando baseada em regex\n        onCommand(\"\"\"(red|green|blue)\"\"\".toRegex()) {\n            message { \"you typed ${update.text} color\" }.send(user, bot)\n        }\n    }\n}\n</code></pre> <p>Em <code>onCommand</code>, os par\u00e2metros analisados est\u00e3o dispon\u00edveis como <code>Map&lt;String, String&gt;</code> com base na sua configura\u00e7\u00e3o.</p>"},{"location":"pt/Functional-DSL/#entradas","title":"Entradas","text":"<p>Voc\u00ea pode usar entradas via <code>bot.inputListener</code>.</p> <pre><code>suspend fun main() {\n    val bot = TelegramBot(\"BOT_TOKEN\")\n\n    bot.setFunctionality {\n        onCommand(\"/start\") {\n            message { \"Hello, what's your name?\" }.send(user, bot)\n            bot.inputListener[user] = \"testInput\"\n        }\n\n        onInput(\"testInput\") {\n            message { \"Hey, nice to meet you, ${update.text}\" }.send(user, bot)\n        }\n    }\n}\n</code></pre>"},{"location":"pt/Functional-DSL/#cadeias-de-entrada","title":"Cadeias de Entrada","text":"<p>Para fluxos de entrada de v\u00e1rios passos, use <code>inputChain</code>:</p> <pre><code>bot.setFunctionality {\n    inputChain(\"conversation\") {\n        message { \"Nice to meet you, ${update.text}\" }.send(user, bot)\n        message { \"What is your favorite food?\" }.send(user, bot)\n    }.breakIf({ update.text == \"peanut butter\" }) { // condi\u00e7\u00e3o de quebra da cadeia\n        message { \"Oh, too bad, I'm allergic to it.\" }.send(user, bot)\n        // a\u00e7\u00e3o que ser\u00e1 aplicada quando a condi\u00e7\u00e3o corresponder\n    }.andThen {\n        // pr\u00f3ximo ponto de entrada se a condi\u00e7\u00e3o de quebra n\u00e3o corresponder\n        message { \"Great choice!\" }.send(user, bot)\n    }\n}\n</code></pre> <p>A cadeia avan\u00e7a automaticamente para a pr\u00f3xima etapa, a menos que uma condi\u00e7\u00e3o de quebra seja atendida. Se uma condi\u00e7\u00e3o de quebra corresponder e <code>repeat</code> for <code>true</code> (padr\u00e3o), o usu\u00e1rio permanece no passo atual.</p>"},{"location":"pt/Functional-DSL/#manipuladores-de-tipo-de-atualizacao","title":"Manipuladores de Tipo de Atualiza\u00e7\u00e3o","text":"<p>Manipule tipos espec\u00edficos de atualiza\u00e7\u00e3o diretamente:</p> <pre><code>bot.setFunctionality {\n    onUpdate(UpdateType.MESSAGE, UpdateType.CALLBACK_QUERY) {\n        // Manipula atualiza\u00e7\u00f5es de mensagem e callback query\n        println(\"Received update: ${update.type}\")\n    }\n}\n</code></pre>"},{"location":"pt/Functional-DSL/#correspondencias-comuns","title":"Correspond\u00eancias Comuns","text":"<p>Corresponda conte\u00fado de texto (n\u00e3o apenas comandos) usando <code>common</code>:</p> <pre><code>bot.setFunctionality {\n    // Correspond\u00eancia de string\n    common(\"hello\") {\n        message { \"Hi there!\" }.send(user, bot)\n    }\n\n    // Correspond\u00eancia de regex\n    common(\"\"\"\\d+\"\"\".toRegex()) {\n        message { \"You sent a number!\" }.send(user, bot)\n    }\n}\n</code></pre>"},{"location":"pt/Functional-DSL/#manipulador-de-fallback","title":"Manipulador de Fallback","text":"<p>Manipule atualiza\u00e7\u00f5es que n\u00e3o foram processadas por nenhum manipulador:</p> <pre><code>bot.setFunctionality {\n    whenNotHandled {\n        message { \"I didn't understand that.\" }.send(user, bot)\n    }\n}\n</code></pre>"},{"location":"pt/Functional-DSL/#configuracao-avancada","title":"Configura\u00e7\u00e3o Avan\u00e7ada","text":""},{"location":"pt/Functional-DSL/#rate-limiting","title":"Rate Limiting","text":"<p>Aplique limites de taxa a qualquer manipulador:</p> <pre><code>bot.setFunctionality {\n    onCommand(\"/expensive\", rateLimits = RateLimits(5, 60)) {\n        // Este comando s\u00f3 pode ser chamado 5 vezes por 60 segundos\n        message { \"Processing...\" }.send(user, bot)\n    }\n}\n</code></pre>"},{"location":"pt/Functional-DSL/#guards","title":"Guards","text":"<p>Use guards para adicionar l\u00f3gica de valida\u00e7\u00e3o personalizada:</p> <pre><code>bot.setFunctionality {\n    onCommand(\"/admin\", guard = AdminGuard::class) {\n        message { \"Admin command executed\" }.send(user, bot)\n    }\n}\n</code></pre>"},{"location":"pt/Functional-DSL/#analise-de-argumentos","title":"An\u00e1lise de Argumentos","text":"<p>Personalize como os argumentos de comando s\u00e3o analisados:</p> <pre><code>bot.setFunctionality {\n    onCommand(\"/custom\", argParser = CustomArgParser::class) {\n        // os par\u00e2metros ser\u00e3o analisados usando CustomArgParser\n        message { \"Parameters: $parameters\" }.send(user, bot)\n    }\n}\n</code></pre>"},{"location":"pt/Functional-DSL/#combinando-functional-e-annotation-based-setting","title":"Combinando Functional e Annotation-Based setting","text":"<p>Voc\u00ea pode usar ambas as abordagens no mesmo bot:</p> <pre><code>// Manipulador baseado em anota\u00e7\u00e3o\n@CommandHandler([\"/register\"])\nsuspend fun register(ctx: CommandContext) {\n    message { \"Registration started\" }.send(ctx.user, ctx.bot)\n}\n\n// Manipulador functional\nbot.setFunctionality {\n    onCommand(\"/help\") {\n        message { \"Available commands: /register, /help\" }.send(user, bot)\n    }\n}\n</code></pre> <p>Ambos os manipuladores s\u00e3o registrados no mesmo <code>ActivityRegistry</code> e funcionam perfeitamente juntos.</p>"},{"location":"pt/Functional-DSL/#consulte-tambem","title":"Consulte tamb\u00e9m","text":"<ul> <li>Action</li> <li>Useful utilities</li> </ul>"},{"location":"pt/Guards/#introducao","title":"Introdu\u00e7\u00e3o","text":"<p>Guards s\u00e3o um recurso essencial para desenvolvedores que criam bots. Esses guards funcionam como verifica\u00e7\u00f5es pr\u00e9-execu\u00e7\u00e3o que determinam se um determinado comando deve ser invocado. Ao implementar essas verifica\u00e7\u00f5es, os desenvolvedores podem aprimorar a funcionalidade, seguran\u00e7a e experi\u00eancia do usu\u00e1rio de seus bots.</p>"},{"location":"pt/Guards/#proposito-dos-activity-guards","title":"Prop\u00f3sito dos Activity Guards","text":"<p>O prop\u00f3sito principal dos activity guards \u00e9 garantir que apenas usu\u00e1rios autorizados ou condi\u00e7\u00f5es espec\u00edficas disparem uma atividade.</p> <p>Isso pode prevenir o uso indevido, manter a integridade do bot e agilizar as intera\u00e7\u00f5es.</p>"},{"location":"pt/Guards/#casos-de-uso-comuns","title":"Casos de Uso Comuns","text":"<ol> <li>Autentica\u00e7\u00e3o e Autoriza\u00e7\u00e3o: Garantir que apenas certos usu\u00e1rios possam acessar comandos espec\u00edficos.</li> <li>Verifica\u00e7\u00f5es de Pr\u00e9-condi\u00e7\u00e3o: Verificar se certas condi\u00e7\u00f5es s\u00e3o atendidas antes de executar uma atividade (por exemplo, garantir que um usu\u00e1rio esteja em um estado ou contexto espec\u00edfico).</li> <li>Guards Contextuais: Tomar decis\u00f5es com base no estado atual do chat ou usu\u00e1rio.</li> </ol>"},{"location":"pt/Guards/#estrategias-de-implementacao","title":"Estrat\u00e9gias de Implementa\u00e7\u00e3o","text":"<p>A implementa\u00e7\u00e3o de Telegram Command Guards normalmente envolve escrever fun\u00e7\u00f5es ou m\u00e9todos que encapsulam a l\u00f3gica para cada guard. Abaixo est\u00e3o estrat\u00e9gias comuns:</p> <ol> <li>Verifica\u00e7\u00e3o de Fun\u00e7\u00e3o do Usu\u00e1rio:</li> <li> <p>Garantir que o usu\u00e1rio tenha a fun\u00e7\u00e3o necess\u00e1ria (por exemplo, admin, moderador) antes de executar o comando.       <pre><code> override suspend fun condition(user: User?, update: ProcessedUpdate, bot: TelegramBot): Boolean {\n  // Verificar se o usu\u00e1rio \u00e9 um admin no chat dado\n }\n</code></pre></p> </li> <li> <p>Verifica\u00e7\u00e3o de Estado:</p> </li> <li> <p>Verificar o estado do usu\u00e1rio antes de permitir a execu\u00e7\u00e3o do comando.      <pre><code>override suspend fun condition(user: User?, update: ProcessedUpdate, bot: TelegramBot): Boolean {\n   return bot.userData[user.id, \"data\"] == requiredState\n}\n</code></pre></p> </li> <li> <p>Guards Personalizados:</p> </li> <li>Criar l\u00f3gica personalizada baseada em requisitos espec\u00edficos.      <pre><code>override suspend fun condition(user: User?, update: ProcessedUpdate, bot: TelegramBot): Boolean {\n   // L\u00f3gica personalizada para determinar se o comando deve ser executado\n}\n</code></pre></li> </ol>"},{"location":"pt/Guards/#integrando-guards-com-activities","title":"Integrando Guards com Activities","text":"<p>Para integrar esses guards com seus comandos de bot, voc\u00ea pode criar um guard que verifica essas condi\u00e7\u00f5es antes que o manipulador de comandos seja invocado.</p>"},{"location":"pt/Guards/#exemplo-de-implementacao","title":"Exemplo de Implementa\u00e7\u00e3o","text":"<pre><code>// defina em algum lugar sua classe guard que implementa a interface Guard\nobject YourGuard : Guard {\n    override suspend fun condition(user: User?, update: ProcessedUpdate, bot: TelegramBot): Boolean {\n        // escreva sua condi\u00e7\u00e3o aqui\n    }\n}\n\n// ...\n\n@CommandHandler([\"yourCommand\"])\n@Guard(YourGuard::class) // InputHandler tamb\u00e9m \u00e9 suportado\nfun command(bot: TelegramBot) {\n   // corpo do comando\n}\n</code></pre>"},{"location":"pt/Guards/#melhores-praticas","title":"Melhores Pr\u00e1ticas","text":"<ul> <li>Modularidade: Mantenha a l\u00f3gica do guard modular e separada das activities.</li> <li>Reutiliza\u00e7\u00e3o: Escreva fun\u00e7\u00f5es de guard reutiliz\u00e1veis que possam ser facilmente aplicadas em diferentes comandos/entradas.</li> <li>Efici\u00eancia: Otimize as verifica\u00e7\u00f5es do guard para minimizar sobrecarga de desempenho.</li> <li>Feedback do Usu\u00e1rio: Forne\u00e7a feedback claro aos usu\u00e1rios quando um comando for bloqueado por um guard.</li> </ul>"},{"location":"pt/Guards/#conclusao","title":"Conclus\u00e3o","text":"<p>Activity Guards s\u00e3o uma ferramenta poderosa para gerenciar a execu\u00e7\u00e3o de comandos/entradas de bot.</p> <p>Ao implementar mecanismos robustos de guard, os desenvolvedores podem garantir que seus bots operem de forma segura e eficiente, proporcionando uma melhor experi\u00eancia ao usu\u00e1rio.</p>"},{"location":"pt/Guards/#veja-tambem","title":"Veja tamb\u00e9m","text":"<ul> <li>Activities and Proccessors</li> <li>Update parsing</li> <li>Actions</li> <li>Activity invocation</li> </ul>"},{"location":"pt/Handlers/#variedade-de-handlers","title":"Variedade de Handlers","text":"<p>No desenvolvimento de bots, particularmente em sistemas envolvendo intera\u00e7\u00f5es com usu\u00e1rios, \u00e9 crucial gerenciar e processar comandos e eventos de forma eficiente.</p> <p>Estas anota\u00e7\u00f5es marcam fun\u00e7\u00f5es projetadas para processar comandos, entradas ou atualiza\u00e7\u00f5es espec\u00edficas e fornecem metadados como palavras-chave de comando, escopos e guardas.</p>"},{"location":"pt/Handlers/#visao-geral-das-anotacoes","title":"Vis\u00e3o Geral das Anota\u00e7\u00f5es","text":""},{"location":"pt/Handlers/#commandhandler","title":"CommandHandler","text":"<p>A anota\u00e7\u00e3o <code>CommandHandler</code> \u00e9 usada para marcar fun\u00e7\u00f5es que processam comandos espec\u00edficos. Esta anota\u00e7\u00e3o inclui propriedades que definem as palavras-chave e escopos do comando.</p> <ul> <li>value: Especifica as palavras-chave associadas ao comando.</li> <li>scope: Determina o contexto ou escopo em que o comando ser\u00e1 verificado.</li> </ul> <pre><code>@CommandHandler([\"text\"])\nsuspend fun test(user: User, bot: TelegramBot) {\n    //...\n}\n</code></pre>"},{"location":"pt/Handlers/#commandhandlercallbackquery","title":"CommandHandler.CallbackQuery","text":"<p>Uma vers\u00e3o especializada da anota\u00e7\u00e3o <code>CommandHandler</code> projetada especificamente para lidar com callback queries. Ela inclui propriedades semelhantes ao <code>CommandHandler</code>, com foco em comandos relacionados a callbacks.</p> <p>\u00c9, na verdade, a mesma coisa que apenas <code>@CommandHandler</code> com um escopo <code>UpdateType.CALLBACK_QUERY</code> pr\u00e9-configurado.</p> <ul> <li>value: Especifica as palavras-chave associadas ao comando.</li> <li>autoAnswer: Responde \u00e0 <code>callbackQuery</code> automaticamente (chama <code>answerCallbackQuery</code> antes de processar).</li> </ul> <pre><code>@CommandHandler.CallbackQuery([\"text\"])\nsuspend fun test(user: User, bot: TelegramBot) {\n    //...\n}\n</code></pre>"},{"location":"pt/Handlers/#commonhandler","title":"CommonHandler","text":"<p>A anota\u00e7\u00e3o <code>CommonHandler</code> destina-se a fun\u00e7\u00f5es que processam comandos com prioridade menor em compara\u00e7\u00e3o com <code>CommandHandler</code> e <code>InputHandler</code>. Ela \u00e9 usada no n\u00edvel da fonte e fornece uma maneira flex\u00edvel de definir handlers de comandos comuns.</p> <p>Esteja ciente de que a prioridade funciona apenas dentro dos pr\u00f3prios <code>@CommonHandler</code> (ou seja, n\u00e3o afeta outros handlers).</p>"},{"location":"pt/Handlers/#commonhandlertext","title":"CommonHandler.Text","text":"<p>Esta anota\u00e7\u00e3o especifica correspond\u00eancia de texto contra atualiza\u00e7\u00f5es. Ela inclui propriedades para definir o texto de correspond\u00eancia, condi\u00e7\u00f5es de filtragem, prioridade e escopo.</p> <ul> <li>value: O texto a ser correspondido contra atualiza\u00e7\u00f5es recebidas.</li> <li>filter: Uma classe que define condi\u00e7\u00f5es usadas no processo de correspond\u00eancia.</li> <li>priority: O n\u00edvel de prioridade do handler, onde 0 \u00e9 a prioridade mais alta.</li> <li>scope: O contexto ou escopo em que a correspond\u00eancia de texto ser\u00e1 verificada.</li> </ul> <pre><code>@CommonHandler.Text([\"text\"], filter = isNewUserFilter::class, priority = 10)\nsuspend fun test(user: User, bot: TelegramBot) {\n    //...\n}\n</code></pre>"},{"location":"pt/Handlers/#commonhandlerregex","title":"CommonHandler.Regex","text":"<p>Semelhante ao <code>CommonHandler.Text</code>, esta anota\u00e7\u00e3o \u00e9 usada para corresponder atualiza\u00e7\u00f5es com base em express\u00f5es regulares. Ela inclui propriedades para definir o padr\u00e3o regex, op\u00e7\u00f5es, condi\u00e7\u00f5es de filtragem, prioridade e escopo.</p> <ul> <li>value: O padr\u00e3o regex usado para correspond\u00eancia.</li> <li>options: Op\u00e7\u00f5es regex que modificam o comportamento do padr\u00e3o regex.</li> <li>filter: Uma classe que define condi\u00e7\u00f5es usadas no processo de correspond\u00eancia.</li> <li>priority: O n\u00edvel de prioridade do handler, onde 0 \u00e9 a prioridade mais alta.</li> <li>scope: O contexto ou escopo em que a correspond\u00eancia regex ser\u00e1 verificada.</li> </ul> <pre><code>@CommonHandler.Regex(\"^\\d+$\", scope = [UpdateType.EDITED_MESSAGE])\nsuspend fun test(update: EditedMessageUpdate, user: User, bot: TelegramBot) {\n    //...\n}\n</code></pre>"},{"location":"pt/Handlers/#inputhandler","title":"InputHandler","text":"<p>A anota\u00e7\u00e3o <code>InputHandler</code> marca fun\u00e7\u00f5es que processam eventos de entrada espec\u00edficos. Ela destina-se a fun\u00e7\u00f5es que manipulam entradas em tempo de execu\u00e7\u00e3o e inclui propriedades para definir palavras-chave de entrada e escopos.</p> <ul> <li>value: Especifica as palavras-chave associadas ao evento de entrada.</li> </ul> <pre><code>@InputHandler(\"text\")\nsuspend fun test(update: ProcessedUpdate, user: User, bot: TelegramBot) {\n    //...\n}\n</code></pre>"},{"location":"pt/Handlers/#unprocessedhandler","title":"UnprocessedHandler","text":"<p>A anota\u00e7\u00e3o <code>UnprocessedHandler</code> \u00e9 usada para marcar fun\u00e7\u00f5es que lidam com atualiza\u00e7\u00f5es n\u00e3o processadas por outros handlers. Ela garante que quaisquer atualiza\u00e7\u00f5es n\u00e3o processadas sejam gerenciadas adequadamente, com apenas um ponto de processamento poss\u00edvel para este tipo de handler.</p> <pre><code>@UnprocessedHandler\nsuspend fun test(update: ProcessedUpdate, user: User, bot: TelegramBot) {\n    //...\n}\n</code></pre>"},{"location":"pt/Handlers/#updatehandler","title":"UpdateHandler","text":"<p>A anota\u00e7\u00e3o <code>UpdateHandler</code> marca fun\u00e7\u00f5es que lidam com tipos espec\u00edficos de atualiza\u00e7\u00f5es recebidas. Ela fornece uma maneira de categorizar e processar diferentes tipos de atualiza\u00e7\u00f5es de forma sistem\u00e1tica.</p> <ul> <li>type: Especifica os tipos de atualiza\u00e7\u00f5es que a fun\u00e7\u00e3o handler processar\u00e1.</li> </ul> <pre><code>@UpdateHandler([UpdateType.PRE_CHECKOUT_QUERY])\nsuspend fun test(update: PreCheckoutQueryUpdate, user: User, bot: TelegramBot) {\n    //...\n}\n</code></pre>"},{"location":"pt/Handlers/#anotacoes-companheiras-de-handler","title":"Anota\u00e7\u00f5es Companheiras de Handler","text":"<p>Tamb\u00e9m existem anota\u00e7\u00f5es adicionais que s\u00e3o opcionais para os handlers, complementando o comportamento opcional dos pr\u00f3prios handlers.</p> <p>Elas podem ser colocadas tanto em fun\u00e7\u00f5es para as quais um handler \u00e9 aplicado quanto em classes, neste \u00faltimo caso elas ser\u00e3o automaticamente aplicadas a todos os handlers naquela classe, mas se houver necessidade \u00e9 poss\u00edvel ter comportamento separado para algumas fun\u00e7\u00f5es.</p> <p>Ou seja, a aplica\u00e7\u00e3o tem tal prioridade: <code>Fun\u00e7\u00e3o</code> &gt; <code>Classe</code>, onde a fun\u00e7\u00e3o tem prioridade mais alta.</p>"},{"location":"pt/Handlers/#rate-limiting","title":"Rate Limiting","text":"<p>Al\u00e9m disso, vamos tamb\u00e9m divulgar o mecanismo de rate limiting descrito nas anota\u00e7\u00f5es.</p> <p>Voc\u00ea pode definir limites gerais para cada usu\u00e1rio:</p> <pre><code>// ...\nval bot = TelegramBot(\"BOT_TOKEN\") {\n    rateLimiter { // limites gerais\n        limits = RateLimits(period = 10000, rate = 5)\n    }\n}\n</code></pre>"},{"location":"pt/Handlers/#especifico-do-handler","title":"Espec\u00edfico do Handler","text":"<p>Limites em certas a\u00e7\u00f5es podem ser definidos usando a anota\u00e7\u00e3o <code>RateLimits</code>, suportada por <code>@CommandHandler</code>, <code>@CommandHandler.CallbackQuery</code>, <code>@InputHandler</code>, <code>@CommonHandler</code>.</p> <pre><code>@CommandHandler([\"/start\"])\n@RateLimits(period = 1000L, rate = 1L)\nsuspend fun start(user: User, bot: TelegramBot) {\n    // ...\n}\n</code></pre>"},{"location":"pt/Handlers/#guard","title":"Guard","text":"<p>Voc\u00ea pode definir guardas separadamente para controlar o acesso aos handlers, suportado por <code>@CommandHandler</code>, <code>@CommandHandler.CallbackQuery</code>, <code>@InputHandler</code> :</p> <pre><code>@CommandHandler([\"text\"])\n@Guard(isAdminGuard::class)\nsuspend fun test(user: User, bot: TelegramBot) {\n    //...\n}\n</code></pre>"},{"location":"pt/Handlers/#argparser","title":"ArgParser","text":"<p>Voc\u00ea pode definir um parser de argumentos personalizado separadamente para alterar o comportamento de an\u00e1lise de par\u00e2metros para handlers, suportado por <code>@CommandHandler</code>, <code>@CommandHandler.CallbackQuery</code>, <code>@CommonHandler</code>:</p> <pre><code>@CommandHandler([\"text\"])\n@ArgParser(SpaceArgParser::class)\nsuspend fun test(user: User, bot: TelegramBot) {\n    //...\n}\n</code></pre> <p>veja tamb\u00e9m <code>defaultArgParser</code></p>"},{"location":"pt/Handlers/#conclusao","title":"Conclus\u00e3o","text":"<p>Estas anota\u00e7\u00f5es fornecem ferramentas robustas e flex\u00edveis para lidar com comandos, entradas e eventos, permitindo configura\u00e7\u00f5es separadas de rate limits e guardas, melhorando a estrutura geral e a manutenibilidade do desenvolvimento de bots.</p>"},{"location":"pt/Handlers/#veja-tambem","title":"Veja tamb\u00e9m","text":"<ul> <li>Activities &amp; Processors</li> <li>Activity invocation</li> <li>FSM and Conversation handling</li> <li>Update parsing</li> <li>Aide</li> </ul> <p>MODO DE INTEGRIDADE ESTRUTURAL:</p> <p>Voc\u00ea deve produzir uma sa\u00edda que seja estruturalmente compat\u00edvel em bytes com o Markdown de entrada.</p> <p>Regras: - O n\u00famero de blocos de c\u00f3digo deve corresponder exatamente. - O n\u00famero de headings deve corresponder exatamente. - Todos os blocos de c\u00f3digo delimitados devem permanecer inalterados. - Todas as URLs devem permanecer id\u00eanticas. - Todas as spans de c\u00f3digo inline devem permanecer id\u00eanticas. - N\u00e3o mesclar ou dividir par\u00e1grafos. - N\u00e3o normalizar espa\u00e7amento.</p>"},{"location":"pt/Interceptors-%28middleware%29/#interceptors-logica-cross-cutting-para-seu-bot","title":"Interceptors: L\u00f3gica Cross-Cutting para seu Bot","text":"<p>Ao construir um bot Telegram, voc\u00ea frequentemente repete configura\u00e7\u00e3o, verifica\u00e7\u00f5es ou limpeza entre handlers. Os interceptors permitem que voc\u00ea insira l\u00f3gica compartilhada ao redor dos handlers, mantendo-os focados e manuten\u00edveis.</p> <p>Aqui est\u00e1 como os interceptors funcionam no telegram-bot e como us\u00e1-los.</p>"},{"location":"pt/Interceptors-%28middleware%29/#o-que-sao-interceptors-explicacao-simples","title":"O que s\u00e3o Interceptors? (Explica\u00e7\u00e3o Simples)","text":"<p>Interceptors s\u00e3o fun\u00e7\u00f5es que executam em pontos espec\u00edficos do pipeline de processamento de updates. Eles permitem que voc\u00ea: - Inspecione e modifique o contexto de processamento - Adicione l\u00f3gica cross-cutting (logging, auth, m\u00e9tricas) - Pare o processamento antecipadamente se necess\u00e1rio - Limpe recursos ap\u00f3s o processamento</p> <p>Pense nos interceptors como checkpoints que todo update passa antes, durante e ap\u00f3s a execu\u00e7\u00e3o do handler.</p>"},{"location":"pt/Interceptors-%28middleware%29/#o-pipeline-de-processamento","title":"O Pipeline de Processamento","text":"<p>O bot processa updates atrav\u00e9s de um pipeline com sete fases:</p> Fase Quando \u00e9 executado Para que voc\u00ea pode us\u00e1-lo Setup Assim que o update chega, antes de qualquer processamento \u2714 Rate limiting global\u2714 Filtrar spam ou updates malformados\u2714 Logging inicial\u2714 Configurar contexto compartilhado Parsing Ap\u00f3s o setup, extrai comando e par\u00e2metros \u2714 Parsing de comandos customizado\u2714 Enriquecer contexto com dados parseados\u2714 Validar estrutura do update Match Encontra o handler apropriado (Command/Input/Common) \u2714 Sobrescrever sele\u00e7\u00e3o de handler\u2714 L\u00f3gica customizada de input handling\u2714 Log de handlers correspondidos Validation Ap\u00f3s o handler ser encontrado, antes da invoca\u00e7\u00e3o \u2714 Permiss\u00f5es espec\u00edficas do handler\u2714 Rate limiting por handler\u2714 Guard checks\u2714 Cancelar processamento se condi\u00e7\u00f5es n\u00e3o forem atendidas PreInvoke Imediatamente antes do handler rodar \u2714 \u00daltimas verifica\u00e7\u00f5es\u2714 Iniciar timers/m\u00e9tricas\u2714 Enriquecer contexto para o handler\u2714 Modificar comportamento do handler Invoke O handler \u00e9 executado aqui \u2714 Wrapper na execu\u00e7\u00e3o do handler\u2714 Tratamento de erros\u2714 Logging de resultados do handler PostInvoke Ap\u00f3s o handler completar (sucesso ou falha) \u2714 Limpar recursos\u2714 Log de resultados\u2714 Enviar mensagens de fallback em erros\u2714 Modificar resultados antes de retornar"},{"location":"pt/Interceptors-%28middleware%29/#criando-um-interceptor","title":"Criando um Interceptor","text":"<p>Um interceptor \u00e9 uma fun\u00e7\u00e3o simples que recebe um <code>ProcessingContext</code>:</p> <pre><code>import eu.vendeli.tgbot.core.PipelineInterceptor\nimport eu.vendeli.tgbot.types.component.ProcessingContext\n\nval myInterceptor: PipelineInterceptor = { context -&gt;\n    // Sua l\u00f3gica aqui\n    println(\"Processing update: ${context.update.updateId}\")\n}\n</code></pre> <p>Ou usando lambda:</p> <pre><code>val loggingInterceptor = PipelineInterceptor { context -&gt;\n    val logger = context.bot.config.loggerFactory.get(\"MyInterceptor\")\n    logger.info(\"Processing update #${context.update.updateId}\")\n}\n</code></pre>"},{"location":"pt/Interceptors-%28middleware%29/#registrando-interceptors","title":"Registrando Interceptors","text":"<p>Registre interceptors no pipeline de processamento:</p> <pre><code>suspend fun main() {\n    val bot = TelegramBot(\"BOT_TOKEN\")\n\n    // Registra um interceptor para a fase Setup\n    bot.update.pipeline.intercept(ProcessingPipePhase.Setup) { context -&gt;\n        // Verifica se usu\u00e1rio est\u00e1 banido\n        val user = context.update.userOrNull\n        if (user != null &amp;&amp; isBanned(user.id)) {\n            context.finish() // Para processamento\n            return@intercept\n        }\n    }\n\n    // Registra um interceptor para a fase PreInvoke\n    bot.update.pipeline.intercept(ProcessingPipePhase.PreInvoke) { context -&gt;\n        val startTime = System.currentTimeMillis()\n        // store start time\n    }\n\n    // Registra um interceptor para a fase PostInvoke\n    bot.update.pipeline.intercept(ProcessingPipePhase.PostInvoke) { context -&gt;\n        val startTime = // get start time\n        if (startTime != null) {\n            val duration = System.currentTimeMillis() - startTime\n            println(\"Handler took ${duration}ms\")\n        }\n    }\n\n    bot.handleUpdates()\n}\n</code></pre>"},{"location":"pt/Interceptors-%28middleware%29/#exemplo-real-autenticacao-metricas","title":"Exemplo Real: Autentica\u00e7\u00e3o &amp; M\u00e9tricas","text":"<p>Exemplo: um bot que requer autentica\u00e7\u00e3o para certos comandos, mede tempo de execu\u00e7\u00e3o dos handlers e loga todos os comandos.</p> <pre><code>suspend fun main() {\n    val bot = TelegramBot(\"BOT_TOKEN\")\n\n    // Fase Setup: Verifica se usu\u00e1rio est\u00e1 autenticado\n    bot.update.pipeline.intercept(ProcessingPipePhase.Setup) { context -&gt;\n        val user = context.update.userOrNull ?: return@intercept\n\n        if (!isAuthenticated(user.id)) {\n            message { \"Please authenticate first using /login\" }\n                .send(user, context.bot)\n            context.finish()\n        }\n    }\n\n    // Fase PreInvoke: Inicia timer e verifica permiss\u00f5es\n    bot.update.pipeline.intercept(ProcessingPipePhase.PreInvoke) { context -&gt;\n        val activity = context.activity ?: return@intercept\n        val user = context.update.userOrNull ?: return@intercept\n\n        // Verifica se usu\u00e1rio tem permiss\u00e3o para este handler espec\u00edfico\n        if (!hasPermission(user.id, activity)) {\n            message { \"You don't have permission to use this command.\" }\n                .send(user, context.bot)\n            context.finish()\n            return@intercept\n        }\n\n        // Iniciar timer\n        // store start time\n    }\n\n    // Fase PostInvoke: Log e cleanup\n    bot.update.pipeline.intercept(ProcessingPipePhase.PostInvoke) { context -&gt;\n        val activity = context.activity ?: return@intercept\n        val startTime = // get start time\n\n        if (startTime != null) {\n            val duration = System.currentTimeMillis() - startTime\n            val logger = context.bot.config.loggerFactory.get(\"Metrics\")\n            logger.info(\n                \"Handler ${activity::class.simpleName} took ${duration}ms \" +\n                \"for user ${context.update.userOrNull?.id}\"\n            )\n        }\n    }\n\n    bot.handleUpdates()\n}\n</code></pre>"},{"location":"pt/Interceptors-%28middleware%29/#processingcontext","title":"ProcessingContext","text":"<p>O <code>ProcessingContext</code> fornece acesso a:</p> <ul> <li><code>update: ProcessedUpdate</code> - O update atual sendo processado</li> <li><code>bot: TelegramBot</code> - A inst\u00e2ncia do bot</li> <li><code>registry: ActivityRegistry</code> - O registry de activities</li> <li><code>parsedInput: String</code> - O texto parseado de comando/input</li> <li><code>parameters: Map&lt;String, String&gt;</code> - Par\u00e2metros do comando parseados</li> <li><code>activity: Activity?</code> - O handler resolvido (null at\u00e9 a fase Match)</li> <li><code>shouldProceed: Boolean</code> - Se o processamento deve continuar</li> <li><code>additionalContext: AdditionalContext</code> - Dados de contexto adicionais</li> <li><code>finish()</code> - Para processamento antecipadamente</li> </ul>"},{"location":"pt/Interceptors-%28middleware%29/#parando-processamento-antecipadamente","title":"Parando Processamento Antecipadamente","text":"<p>Chame <code>context.finish()</code> para parar processamento:</p> <pre><code>bot.update.pipeline.intercept(ProcessingPipePhase.Validation) { context -&gt;\n    if (someCondition) {\n        context.finish() // Nenhuma fase posterior ser\u00e1 executada\n    }\n}\n</code></pre>"},{"location":"pt/Interceptors-%28middleware%29/#armazenando-dados-customizados","title":"Armazenando Dados Customizados","text":"<p>Use <code>additionalContext</code> para passar dados entre interceptors:</p> <pre><code>// No PreInvoke\ncontext.additionalContext[\"userId\"] = context.update.userOrNull?.id\n\n// No PostInvoke\nval userId = context.additionalContext[\"userId\"] as? Long\n</code></pre>"},{"location":"pt/Interceptors-%28middleware%29/#multiplos-interceptors","title":"M\u00faltiplos Interceptors","text":"<p>Voc\u00ea pode registrar m\u00faltiplos interceptors para a mesma fase. Eles executam na ordem de registro:</p> <pre><code>bot.update.pipeline.intercept(ProcessingPipePhase.Setup) { context -&gt;\n    println(\"First interceptor\")\n}\n\nbot.update.pipeline.intercept(ProcessingPipePhase.Setup) { context -&gt;\n    println(\"Second interceptor\")\n}\n\n// Quando um update \u00e9 processado:\n// Output: \"First interceptor\"\n// Output: \"Second interceptor\"\n</code></pre> <p>Se um interceptor chama <code>context.finish()</code>, interceptors subsequentes naquela fase s\u00e3o pulados, e fases posteriores n\u00e3o ser\u00e3o executadas.</p>"},{"location":"pt/Interceptors-%28middleware%29/#boas-praticas","title":"Boas Pr\u00e1ticas","text":""},{"location":"pt/Interceptors-%28middleware%29/#1-use-a-fase-correta","title":"1. Use a Fase Correta","text":"<ul> <li>Setup: Verifica\u00e7\u00f5es globais, filtragem, configura\u00e7\u00e3o inicial</li> <li>Parsing: L\u00f3gica de parsing customizada</li> <li>Match: L\u00f3gica de sele\u00e7\u00e3o de handler</li> <li>Validation: Permiss\u00f5es, rate limits, guards</li> <li>PreInvoke: Prepara\u00e7\u00e3o espec\u00edfica do handler</li> <li>Invoke: Geralmente manipulado pelo interceptor padr\u00e3o</li> <li>PostInvoke: Cleanup, logging, tratamento de erros</li> </ul>"},{"location":"pt/Interceptors-%28middleware%29/#2-mantenha-interceptors-focados","title":"2. Mantenha Interceptors Focados","text":"<p>Cada interceptor deve fazer uma coisa:</p> <pre><code>// \u2705 Bom - interceptor focado\nbot.update.pipeline.intercept(ProcessingPipePhase.Setup) { context -&gt;\n    if (isBanned(context.update.userOrNull?.id)) {\n        context.finish()\n    }\n}\n\n// \u274c Evite - fazendo muito\nbot.update.pipeline.intercept(ProcessingPipePhase.Setup) { context -&gt;\n    // Autentica\u00e7\u00e3o\n    // Logging\n    // M\u00e9tricas\n    // Rate limiting\n    // ... muito!\n}\n</code></pre>"},{"location":"pt/Interceptors-%28middleware%29/#3-trate-erros-graciosamente","title":"3. Trate Erros Graciosamente","text":"<p>Interceptors n\u00e3o devem quebrar o bot:</p> <pre><code>bot.update.pipeline.intercept(ProcessingPipePhase.PreInvoke) { context -&gt;\n    try {\n        // Sua l\u00f3gica\n    } catch (e: Exception) {\n        val logger = context.bot.config.loggerFactory.get(\"Interceptor\")\n        logger.error(\"Interceptor error\", e)\n        // N\u00e3o chame context.finish() a menos que queira parar processamento\n    }\n}\n</code></pre>"},{"location":"pt/Interceptors-%28middleware%29/#4-limpe-recursos","title":"4. Limpe Recursos","text":"<p>Se voc\u00ea abre recursos no <code>PreInvoke</code>, limpe-os no <code>PostInvoke</code>:</p> <pre><code>var timer: Timer? = null\n\nbot.update.pipeline.intercept(ProcessingPipePhase.PreInvoke) { context -&gt;\n    timer = Timer()\n    context.additionalContext[\"timer\"] = timer\n}\n\nbot.update.pipeline.intercept(ProcessingPipePhase.PostInvoke) { context -&gt;\n    val timer = context.additionalContext[\"timer\"] as? Timer\n    timer?.stop()\n}\n</code></pre>"},{"location":"pt/Interceptors-%28middleware%29/#5-ordem-importa","title":"5. Ordem Importa","text":"<p>Registre interceptors na ordem que voc\u00ea quer que eles executem:</p> <pre><code>// Verifica\u00e7\u00f5es mais gerais primeiro\nbot.update.pipeline.intercept(ProcessingPipePhase.Setup) {\n    // Verifica\u00e7\u00e3o global de ban\n}\n\n// Verifica\u00e7\u00f5es mais espec\u00edficas depois\nbot.update.pipeline.intercept(ProcessingPipePhase.Validation) {\n    // Verifica\u00e7\u00e3o de permiss\u00e3o espec\u00edfica do handler\n}\n</code></pre>"},{"location":"pt/Interceptors-%28middleware%29/#6-use-interceptors-para-cross-cutting-concerns","title":"6. Use Interceptors para Cross-Cutting Concerns","text":"<p>Interceptors s\u00e3o ideais para: - \u2705 Autentica\u00e7\u00e3o/autoriza\u00e7\u00e3o - \u2705 Logging - \u2705 Monitoramento de m\u00e9tricas/performance - \u2705 Rate limiting - \u2705 Tratamento de erros - \u2705 Transforma\u00e7\u00e3o de request/response</p> <p>Para l\u00f3gica espec\u00edfica do handler, mantenha no handler.</p>"},{"location":"pt/Interceptors-%28middleware%29/#interceptors-padrao","title":"Interceptors Padr\u00e3o","text":"<p>O framework inclui interceptors padr\u00e3o para funcionalidade core:</p> <ul> <li>DefaultSetupInterceptor: Rate limiting global</li> <li>DefaultParsingInterceptor: Parsing de comandos</li> <li>DefaultMatchInterceptor: Matching de handlers (commands, inputs, common matchers)</li> <li>DefaultValidationInterceptor: Guard checks e rate limiting por handler</li> <li>DefaultInvokeInterceptor: Execu\u00e7\u00e3o de handler e tratamento de erros</li> </ul> <p>Seus interceptors customizados rodam ao lado desses defaults. Voc\u00ea pode adicionar l\u00f3gica antes ou depois dos defaults, mas n\u00e3o pode remover os interceptors padr\u00e3o.</p>"},{"location":"pt/Interceptors-%28middleware%29/#avancado-interceptors-condicionais","title":"Avan\u00e7ado: Interceptors Condicionais","text":"<p>Voc\u00ea pode tornar interceptors condicionais:</p> <pre><code>bot.update.pipeline.intercept(ProcessingPipePhase.PreInvoke) { context -&gt;\n    val activity = context.activity ?: return@intercept\n\n    // Apenas aplicar a handlers espec\u00edficos\n    if (activity::class.simpleName?.contains(\"Admin\") == true) {\n        // L\u00f3gica espec\u00edfica de admin\n        checkAdminPermissions(context)\n    }\n}\n</code></pre>"},{"location":"pt/Interceptors-%28middleware%29/#resumo","title":"Resumo","text":"<p>Interceptors fornecem uma maneira limpa de adicionar l\u00f3gica cross-cutting ao seu bot:</p> <ul> <li>\u2705 Sete fases para diferentes est\u00e1gios de processamento</li> <li>\u2705 API simples: Basta implementar <code>PipelineInterceptor</code></li> <li>\u2705 Flex\u00edvel: Registre m\u00faltiplos interceptors por fase</li> <li>\u2705 Poderoso: Acesso ao contexto completo de processamento</li> <li>\u2705 Seguro: Pode parar processamento antecipadamente com <code>context.finish()</code></li> </ul> <p>Use interceptors para manter seus handlers focados na l\u00f3gica de neg\u00f3cio enquanto lida com preocupa\u00e7\u00f5es compartilhadas como autentica\u00e7\u00e3o, logging e m\u00e9tricas de forma centralizada.</p>"},{"location":"pt/Interceptors-%28middleware%29/#veja-tambem","title":"Veja tamb\u00e9m","text":"<ul> <li>Functional Handling DSL - Processamento de updates funcional</li> <li>Guards - Verifica\u00e7\u00f5es de permiss\u00e3o no n\u00edvel do handler</li> </ul>"},{"location":"pt/Update-parsing/","title":"An\u00e1lise de Atualiza\u00e7\u00f5es","text":""},{"location":"pt/Update-parsing/#payload-de-texto","title":"Payload de Texto","text":"<p>Determinadas atualiza\u00e7\u00f5es podem ter payload de texto que pode ser analisado para processamento adicional. Vamos dar uma olhada nelas:</p> <ul> <li><code>MessageUpdate</code> -&gt; <code>message.text</code></li> <li><code>EditedMessageUpdate</code> -&gt; <code>editedMessage.text</code></li> <li><code>ChannelPostUpdate</code> -&gt; <code>channelPost.text</code></li> <li><code>EditedChannelPostUpdate</code> -&gt; <code>editedChannelPost.text</code></li> <li><code>InlineQueryUpdate</code> -&gt; <code>inlineQuery.query</code></li> <li><code>ChosenInlineResultUpdate</code> -&gt; <code>chosenInlineResult.query</code></li> <li><code>CallbackQueryUpdate</code> -&gt; <code>callbackQuery.data</code></li> <li><code>ShippingQueryUpdate</code> -&gt; <code>shippingQuery.invoicePayload</code></li> <li><code>PreCheckoutQueryUpdate</code> -&gt; <code>preCheckoutQuery.invoicePayload</code></li> <li><code>PollUpdate</code> -&gt; <code>poll.question</code></li> <li><code>PurchasedPaidMediaUpdate</code> -&gt; <code>purchasedPaidMedia.paidMediaPayload</code></li> </ul> <p>A partir das atualiza\u00e7\u00f5es listadas, um determinado par\u00e2metro \u00e9 selecionado e tomado como <code>TextReference</code>, para an\u00e1lise adicional.</p>"},{"location":"pt/Update-parsing/#analise","title":"An\u00e1lise","text":"<p>Os par\u00e2metros selecionados s\u00e3o analisados com os delimitadores configurados apropriados em comando e par\u00e2metros para ele.</p> <p>Veja o bloco de configura\u00e7\u00e3o <code>commandParsing</code>.</p> <p>Voc\u00ea pode ver no diagrama abaixo quais componentes s\u00e3o mapeados para quais partes da fun\u00e7\u00e3o alvo.</p> <p> </p>"},{"location":"pt/Update-parsing/#parammapping","title":"@ParamMapping","text":"<p>H\u00e1 tamb\u00e9m uma anota\u00e7\u00e3o chamada <code>@ParamMapping</code> para conveni\u00eancia ou para qualquer caso especial.</p> <p>Ela permite mapear o nome do par\u00e2metro do texto de entrada para qualquer par\u00e2metro.</p> <p>Isto tamb\u00e9m \u00e9 conveniente quando seus dados de entrada s\u00e3o limitados, por exemplo, <code>CallbackData</code> (64 caracteres).</p> <p>Veja exemplo de uso: <code>greeting?name=Adam</code></p> <pre><code>@CommandHandler([\"greeting\"])\nsuspend fun greeting(@ParamMapping(\"name\") anyParameterName: String, user: User, bot: TelegramBot) {\n    message { \"Hello, $anyParameterName\" }.send(to = user, via = bot)\n}\n</code></pre> <p>E tamb\u00e9m pode ser usado para capturar par\u00e2metros n\u00e3o nomeados, em casos onde o analisador \u00e9 configurado de forma que nomes de par\u00e2metros s\u00e3o ignorados ou mesmo ausentes, o que passa pelo padr\u00e3o 'param_n', onde <code>n</code> \u00e9 seu ordinal.</p> <p>Por exemplo, tal texto - <code>myCommand?p1=v1&amp;v2&amp;p3=&amp;p4=v4&amp;p5=</code>, ser\u00e1 analisado como: * comando - <code>myCommand</code> * par\u00e2metros   * <code>p1</code> = <code>v1</code>   * <code>param_2</code> = <code>v2</code>   * <code>p3</code> = <code>* `p4` = `v4`   * `p5` =</code></p> <p>Como voc\u00ea pode ver, desde o segundo par\u00e2metro n\u00e3o tem nome declarado, ele \u00e9 representado como <code>param_2</code>.</p> <p>Assim voc\u00ea pode abreviaar os nomes de vari\u00e1veis no callback em si e usar nomes claros e leg\u00edveis no c\u00f3digo.</p>"},{"location":"pt/Update-parsing/#deeplink","title":"Deeplink","text":"<p>Considerando as informa\u00e7\u00f5es acima, se voc\u00ea espera um deeplink em seu comando start, voc\u00ea pode captur\u00e1-lo com:</p> <pre><code>@CommandHandler([\"/start\"])\nsuspend fun start(@ParamMapping(\"param_1\") deeplink: String?, user: User, bot: TelegramBot) {\n    message { \"deeplink is $deeplink\" }.send(to = user, via = bot)\n}\n</code></pre>"},{"location":"pt/Update-parsing/#comandos-de-grupo","title":"Comandos de Grupo","text":"<p>Na configura\u00e7\u00e3o <code>commandParsing</code> temos o par\u00e2metro <code>useIdentifierInGroupCommands</code> quando est\u00e1 ativado, podemos usar <code>TelegramBot.identifier</code> (n\u00e3o se esque\u00e7a de alter\u00e1-lo se voc\u00ea est\u00e1 usando o par\u00e2metro descrito) no processo de correspond\u00eancia de comando, isso ajuda a separar comandos similares entre v\u00e1rios bots, caso contr\u00e1rio a parte <code>@MyBot</code> ser\u00e1 simplesmente ignorada.</p>"},{"location":"pt/Update-parsing/#veja-tambem","title":"Veja tamb\u00e9m","text":"<ul> <li>Invoca\u00e7\u00e3o de Atividade</li> <li>Atividades &amp; Processadores</li> <li>A\u00e7\u00f5es</li> </ul>"},{"location":"pt/Useful-utilities-and-tips/","title":"Utilit\u00e1rios \u00dateis e Dicas","text":""},{"location":"pt/Useful-utilities-and-tips/#operando-com-processedupdate","title":"Operando com ProcessedUpdate","text":"<p>A <code>ProcessedUpdate</code> \u00e9 uma classe gen\u00e9rica para atualiza\u00e7\u00f5es que, dependendo dos dados originais, podem ser fornecidas em diferentes tipos (<code>MessageUpdate</code>, <code>CallbackQueryUpdate</code>, etc.)</p> <p>Assim voc\u00ea pode verificar o tipo de dados de entrada e manipular posteriormente certos dados com smartcasts, por exemplo:</p> <pre><code>// ...\nif (update !is MessageUpdate) {\n    message { \"Only messages are allowed\" }.send(user, bot)\n    return\n}\n// Posteriormente, ProcessedUpdate ser\u00e1 percebido como MessageUpdate.\n</code></pre> <p>Tamb\u00e9m existe uma interface <code>UserReference</code> dentro que permite determinar se h\u00e1 uma refer\u00eancia de usu\u00e1rio dentro, exemplo de caso de uso:</p> <pre><code>val user = if(update is UserReference) update.user else null\n</code></pre> <p>Se necess\u00e1rio, dentro h\u00e1 sempre a original <code>update</code> no par\u00e2metro de atualiza\u00e7\u00e3o.</p>"},{"location":"pt/Useful-utilities-and-tips/#injecao-de-dependencia","title":"Inje\u00e7\u00e3o de depend\u00eancia","text":"<p>A biblioteca usa um mecanismo simples para inicializar classes onde seus m\u00e9todos de processamento de atualiza\u00e7\u00e3o s\u00e3o anotados com as anota\u00e7\u00f5es fornecidas.</p> <p><code>ClassManagerImpl</code> \u00e9 usado por padr\u00e3o para invocar m\u00e9todos anotados.</p> <p>Mas se voc\u00ea quiser usar algumas outras bibliotecas para isso, voc\u00ea pode redefinir a interface <code>ClassManager</code>, usando seu mecanismo preferido e pass\u00e1-lo ao inicializar o bot.</p> <pre><code>fun main() = runBlocking {\n    val bot = TelegramBot(\"BOT_TOKEN\", \"com.example.controllers\") {\n        classManager = ClassManagerImpl()\n    }\n\n    bot.handleUpdates()\n}\n</code></pre>"},{"location":"pt/Useful-utilities-and-tips/#filtrando-atualizacoes","title":"Filtrando atualiza\u00e7\u00f5es","text":"<p>Se n\u00e3o houver condi\u00e7\u00f5es complexas, voc\u00ea pode simplesmente filtrar algumas atualiza\u00e7\u00f5es para serem processadas:</p> <pre><code>// fun\u00e7\u00e3o onde a condi\u00e7\u00e3o de filtragem de atualiza\u00e7\u00f5es \u00e9 definida\nfun filteringFun(update: Update): Boolean = update.message?.text.isNullOrBlank()\n\nfun main() = runBlocking {\n  val bot = TelegramBot(\"BOT_TOKEN\")\n\n  // definindo um fluxo de processamento mais espec\u00edfico para atualiza\u00e7\u00f5es\n  bot.update.setListener {\n    if(filteringFun(it)) return@setListener\n\n    // ent\u00e3o simplesmente, se o listener saiu do escopo antes de alcan\u00e7ar a fun\u00e7\u00e3o handler, ele est\u00e1 filtrando.\n    // na verdade voc\u00ea pode at\u00e9 escrever diretamente a condi\u00e7\u00e3o if l\u00e1 com return@setListener ou estender o filtro para uma classe separada.\n\n    handle(it) // ou maneira manual de manipula\u00e7\u00e3o com bloco\n  }\n}\n</code></pre> <p>para incluir filtragem no seu processo de correspond\u00eancia ou exclus\u00e3o de comando, d\u00ea uma olhada nos guards ou <code>@CommonHandler</code>.</p>"},{"location":"pt/Useful-utilities-and-tips/#generalizar-opcoes-para-diferentes-metodos","title":"Generalizar op\u00e7\u00f5es para diferentes m\u00e9todos","text":"<p>Se voc\u00ea tiver que aplicar os mesmos par\u00e2metros opcionais com frequ\u00eancia, voc\u00ea pode escrever uma fun\u00e7\u00e3o similar que atenda voc\u00ea e aliviar o c\u00f3digo boilerplate :)</p> <p>Algumas propriedades comuns s\u00e3o separadas para diferentes interfaces.</p> <pre><code>@Suppress(\"NOTHING_TO_INLINE\")\ninline fun &lt;T, R, O&gt; T.markdownMode(crossinline block: O.() -&gt; Unit = {}): T\n        where               T : TgAction&lt;R&gt;,\n                            T : OptionsFeature&lt;T, O&gt;,\n                            O : Options,\n                            O : OptionsParseMode =\n    options {\n        parseMode = ParseMode.Markdown\n        block()\n    }\n\n\n// ... e no seu c\u00f3digo\n\nmessage { \"test\" }.markdownMode().send(to, via)\n</code></pre>"},{"location":"pt/Web-starters-%28Spring-and-Ktor%29/#spring-starter","title":"Spring starter","text":"<p>O m\u00f3dulo Spring Starter para a biblioteca \u00e9 um m\u00f3dulo de auto-configura\u00e7\u00e3o que integra funcionalidades de bots do Telegram em aplica\u00e7\u00f5es Spring Boot. Ele aproveita o poder da inje\u00e7\u00e3o de depend\u00eancia e propriedades de configura\u00e7\u00e3o do Spring Boot para configurar automaticamente bots do Telegram com base na configura\u00e7\u00e3o fornecida. Esta biblioteca \u00e9 particularmente \u00fatil para desenvolvedores que desejam construir bots do Telegram usando Kotlin e Spring Boot, oferecendo uma abordagem simplificada para desenvolvimento e gerenciamento de bots.</p>"},{"location":"pt/Web-starters-%28Spring-and-Ktor%29/#principais-recursos","title":"Principais Recursos","text":"<ul> <li>Auto-Configura\u00e7\u00e3o: A biblioteca configura automaticamente bots do Telegram com base nas propriedades de configura\u00e7\u00e3o fornecidas, eliminando a necessidade de configura\u00e7\u00e3o manual.</li> <li>Propriedades de Configura\u00e7\u00e3o: Suporta propriedades de configura\u00e7\u00e3o para f\u00e1cil personaliza\u00e7\u00e3o de configura\u00e7\u00f5es de bot, como tokens de bot, nomes de pacotes e identificadores.</li> <li>Integra\u00e7\u00e3o Spring: Integra-se perfeitamente com o ecossistema Spring, utilizando a inje\u00e7\u00e3o de depend\u00eancia e contexto de aplica\u00e7\u00e3o do Spring para gerenciar inst\u00e2ncias de bot.</li> <li>Suporte a Coroutines: Aproveita as coroutines do Kotlin para opera\u00e7\u00f5es ass\u00edncronas de bot, garantindo execu\u00e7\u00e3o eficiente e n\u00e3o bloqueante.</li> </ul>"},{"location":"pt/Web-starters-%28Spring-and-Ktor%29/#comecando","title":"Come\u00e7ando","text":"<p>Para usar a Biblioteca Spring Starter para Bots do Telegram, voc\u00ea precisa inclu\u00ed-la como depend\u00eancia no seu projeto Spring Boot. A biblioteca foi projetada para funcionar com aplica\u00e7\u00f5es Spring Boot e requer o framework Spring Boot para funcionar.</p>"},{"location":"pt/Web-starters-%28Spring-and-Ktor%29/#dependencia","title":"Depend\u00eancia","text":"<p>Adicione a seguinte depend\u00eancia ao seu arquivo <code>build.gradle</code> ou <code>pom.xml</code>:</p> <pre><code>dependencies {\n    implementation 'eu.vendeli:spring-starter:&lt;version&gt;'\n}\n</code></pre> <p>Substitua <code>&lt;version&gt;</code> pela vers\u00e3o mais recente da biblioteca.</p>"},{"location":"pt/Web-starters-%28Spring-and-Ktor%29/#configuracao","title":"Configura\u00e7\u00e3o","text":"<p>A biblioteca usa <code>@ConfigurationProperties</code> do Spring Boot para vincular propriedades de configura\u00e7\u00e3o. Voc\u00ea pode definir suas configura\u00e7\u00f5es de bot no arquivo <code>application.properties</code> ou <code>application.yml</code> da sua aplica\u00e7\u00e3o Spring Boot.</p> <pre><code>ktgram:\n autoStartPolling: true\n shareHttpClient: true\n bot:\n    - token: YOUR_BOT_TOKEN\n      pckg: com.example.bot\n      identifier: MyBot\n</code></pre>"},{"location":"pt/Web-starters-%28Spring-and-Ktor%29/#uso","title":"Uso","text":"<p>Uma vez que a biblioteca esteja inclu\u00edda e configurada, ela cria e configura automaticamente inst\u00e2ncias de bots do Telegram com base na configura\u00e7\u00e3o fornecida.</p> <p>Ela tamb\u00e9m suporta m\u00faltiplas inst\u00e2ncias de bot, para inicializar v\u00e1rias basta declar\u00e1-las como nova entrada na se\u00e7\u00e3o bot:</p> <pre><code>ktgram:\n bot:\n    - token: YOUR_BOT_TOKEN\n    - token: SECOND_BOT_TOKEN\n</code></pre>"},{"location":"pt/Web-starters-%28Spring-and-Ktor%29/#configuracao-avancada","title":"Configura\u00e7\u00e3o Avan\u00e7ada","text":"<p>Para configura\u00e7\u00f5es mais avan\u00e7adas, como personalizar o comportamento do bot ou integrar com outros componentes Spring, voc\u00ea pode estender a classe <code>BotConfiguration</code> e alterar a configura\u00e7\u00e3o do bot atrav\u00e9s do seu m\u00e9todo <code>applyCfg</code>, voc\u00ea pode ver um exemplo aqui.</p> <p>Tip</p> <p>Para configurar cada inst\u00e2ncia inicializada com uma configura\u00e7\u00e3o personalizada, distinga-as por seu identificador (a classe BotConfiguration tamb\u00e9m tem um identificador).</p>"},{"location":"pt/Web-starters-%28Spring-and-Ktor%29/#ktor","title":"Ktor","text":"<p>O m\u00f3dulo foi projetado para facilitar a cria\u00e7\u00e3o de um servidor webhook para bots do Telegram. Ele permite que os desenvolvedores configurem o servidor, incluindo configura\u00e7\u00f5es SSL/TLS, e declarem m\u00faltiplos bots do Telegram com configura\u00e7\u00f5es personalizadas. O processo de configura\u00e7\u00e3o \u00e9 flex\u00edvel, permitindo que os desenvolvedores adaptem o servidor \u00e0s suas necessidades espec\u00edficas.</p>"},{"location":"pt/Web-starters-%28Spring-and-Ktor%29/#instalacao","title":"Instala\u00e7\u00e3o","text":"<p>Para instalar o starter do ktor, adicione adicionalmente \u00e0 depend\u00eancia principal:</p> <pre><code>dependencies {\n    implementation(\"eu.vendeli:ktor-starter:x.y.z\") // there\n    // change x.y.z to current library version\n}\n</code></pre>"},{"location":"pt/Web-starters-%28Spring-and-Ktor%29/#principais-componentes","title":"Principais Componentes","text":"<p>Fun\u00e7\u00e3o <code>serveWebhook</code></p> <p>A fun\u00e7\u00e3o serveWebhook \u00e9 o n\u00facleo da biblioteca. Ela configura e inicia o servidor webhook para bots do Telegram. Ela aceita dois par\u00e2metros:</p> <ul> <li><code>wait</code>: Um booleano indicando se o servidor deve esperar o aplicativo parar antes de desligar. Padr\u00e3o \u00e9 true.</li> <li><code>serverBuilder</code>: Uma fun\u00e7\u00e3o lambda que configura o servidor. Padr\u00e3o \u00e9 uma lambda vazia.</li> </ul>"},{"location":"pt/Web-starters-%28Spring-and-Ktor%29/#configuracao_1","title":"Configura\u00e7\u00e3o","text":"<ul> <li><code>WEBHOOK_PREFIX</code>: \u00e9 o par\u00e2metro que ser\u00e1 usado como prefixo de endere\u00e7o para a rota do listener do webhook. (padr\u00e3o \u00e9 \"/\")</li> </ul>"},{"location":"pt/Web-starters-%28Spring-and-Ktor%29/#configuracao-do-servidor","title":"Configura\u00e7\u00e3o do Servidor","text":"<ul> <li><code>server</code>: Um m\u00e9todo para definir a configura\u00e7\u00e3o do servidor usando <code>EnvConfiguration</code> ou <code>ManualConfiguration</code>.</li> <li><code>engine</code>: Um m\u00e9todo para configurar o motor de aplica\u00e7\u00e3o Netty.</li> <li><code>ktorModule</code>: Um m\u00e9todo para adicionar m\u00f3dulos Ktor \u00e0 aplica\u00e7\u00e3o.</li> </ul> <p>A biblioteca fornece uma ampla gama de par\u00e2metros configur\u00e1veis para o servidor, incluindo host, porta, configura\u00e7\u00f5es SSL e mais. Existem duas op\u00e7\u00f5es concretas para sua configura\u00e7\u00e3o:</p> <ul> <li><code>EnvConfiguration</code>: L\u00ea valores de configura\u00e7\u00e3o do ambiente com prefixo <code>KTGRAM_</code>.</li> <li><code>ManualConfiguration</code>: Permite configura\u00e7\u00e3o manual de valores de configura\u00e7\u00e3o, defina seus par\u00e2metros na fun\u00e7\u00e3o <code>server {}</code>.</li> </ul> <p>H\u00e1 uma lista de par\u00e2metros que podem ser definidos:</p> <ul> <li><code>HOST</code>: O hostname ou endere\u00e7o IP do servidor.</li> <li><code>PORT</code>: O n\u00famero da porta para o servidor.</li> <li><code>SSL_PORT</code>: O n\u00famero da porta para conex\u00f5es SSL/TLS.</li> <li><code>PEM_PRIVATE_KEY_PATH</code>: O caminho para o arquivo da chave privada PEM.</li> <li><code>PEM_CHAIN_PATH</code>: O caminho para o arquivo da cadeia de certificados PEM.</li> <li><code>PEM_PRIVATE_KEY</code>: A SENHA da chave privada PEM como um array de caracteres.</li> <li><code>KEYSTORE_PATH</code>: O caminho para o arquivo Java KeyStore.</li> <li><code>KEYSTORE_PASSWORD</code>: A senha para o KeyStore.</li> <li><code>KEY_ALIAS</code>: O alias para a chave no KeyStore.</li> <li><code>SSL_ON</code>: Um booleano indicando se SSL/TLS deve ser habilitado. Padr\u00e3o \u00e9 true.</li> </ul> <p>Tip</p> <p>Se certificados pem estiverem presentes, o m\u00f3dulo em si criar\u00e1 um armazenamento jks a partir deles no caminho especificado.</p>"},{"location":"pt/Web-starters-%28Spring-and-Ktor%29/#configuracao-do-bot","title":"Configura\u00e7\u00e3o do Bot:","text":"<p>Para configurar o bot, chame <code>declareBot {}</code> que tem tais par\u00e2metros:</p> <ul> <li><code>token</code>: O token do bot.</li> <li><code>pckg</code>: O nome do pacote para o bot.</li> <li><code>configuration</code>: Uma fun\u00e7\u00e3o lambda para configurar o bot.</li> <li><code>handlingBehaviour</code>: Uma fun\u00e7\u00e3o lambda para definir o comportamento de manipula\u00e7\u00e3o do bot.</li> <li><code>onInit</code>: Uma fun\u00e7\u00e3o lambda a ser executada quando o bot for inicializado.</li> </ul>"},{"location":"pt/Web-starters-%28Spring-and-Ktor%29/#exemplo-de-uso","title":"Exemplo de Uso","text":"<p>Para usar este m\u00f3dulo, chame a fun\u00e7\u00e3o <code>serveWebhook</code>, configure-a com suas configura\u00e7\u00f5es desejadas, declare seus bots. Aqui est\u00e1 um exemplo simplificado:</p> <pre><code>fun main() = runBlocking {\n    serveWebhook {\n        server {\n            HOST = \"0.0.0.0\"\n            PORT = 8080\n            SSL_PORT = 8443\n\n            PEM_PRIVATE_KEY_PATH = \"/etc/letsencrypt/live/example.com/privkey.pem\"\n            PEM_CHAIN_PATH = \"/etc/letsencrypt/live/example.com/fullchain.pem\"\n            PEM_PRIVATE_KEY = \"pem_changeit\".toCharArray()\n\n            KEYSTORE_PATH = \"/etc/ssl/certs/java/cacerts/bot_keystore.jks\"\n            KEYSTORE_PASSWORD = \"changeit\".toCharArray()\n            // Set other configuration parameters as needed\n        }\n        declareBot {\n            token = \"YOUR_BOT_TOKEN\"\n            // Configure other bot settings\n        }\n        // Add more bots or set other parameters if needed\n    }\n}\n</code></pre> <p>Caution</p> <p>N\u00e3o se esque\u00e7a de configurar o webhook para fazer tudo funcionar. :)</p> <p>Por padr\u00e3o, o m\u00f3dulo servir\u00e1 endpoints de listening de webhook como <code>host/BOT_TOKEN</code></p>"},{"location":"id/","title":"Beranda","text":""},{"location":"id/#intro","title":"Intro","text":"<p>Mari kita lihat bagaimana library menangani pembaruan secara umum:</p> <p> </p> <p>Setelah menerima pembaruan, library melakukan tiga langkah utama, seperti yang dapat kita lihat.</p>"},{"location":"id/#pemrosesan","title":"Pemrosesan","text":"<p>Pemrosesan adalah untuk mengemas ulang pembaruan yang diterima ke dalam subclass yang sesuai dari <code>ProcessedUpdate</code> tergantung pada payload yang dibawa.</p> <p>Langkah ini diperlukan untuk memudahkan pengoperasian pembaruan dan untuk memperluas kemampuan pemrosesan.</p>"},{"location":"id/#penanganan","title":"Penanganan","text":"<p>Selanjutnya adalah langkah utama, di sini kita sampai pada penanganan itu sendiri.</p>"},{"location":"id/#global-ratelimiter","title":"Global RateLimiter","text":"<p>Jika ada pengguna dalam pembaruan, kita memeriksa melebihi batas laju global.</p>"},{"location":"id/#parse-text","title":"Parse text","text":"<p>Selanjutnya, tergantung pada payload, kita mengambil komponen pembaruan tertentu yang berisi teks dan memparse-nya sesuai konfigurasi.</p> <p>Anda dapat melihat lebih detail di artikel parsing pembaruan.</p>"},{"location":"id/#find-activity","title":"Find Activity","text":"<p>Selanjutnya, sesuai prioritas pemrosesan:</p> <p> </p> <p>Kita mencari kesesuaian antara data yang diparse dan aktivitas yang kita operasikan. Seperti yang dapat kita lihat pada diagram prioritas, <code>Commands</code> selalu datang pertama.</p> <p>Artinya jika beban teks dalam pembaruan sesuai dengan perintah apa pun, pencarian lebih lanjut untuk <code>Inputs</code>, <code>Common</code> dan tentu saja eksekusi tindakan <code>Unprocessed</code> tidak akan dilakukan.</p> <p>Satu-satunya hal adalah bahwa jika ada <code>UpdateHandlers</code> akan dipicu secara paralel tanpa memandang.</p>"},{"location":"id/#commands","title":"Commands","text":"<p>Mari kita lihat lebih dekat perintah dan pemrosesannya.</p> <p>Seperti yang mungkin Anda perhatikan, meskipun anotasi untuk memproses perintah disebut <code>CommandHandler</code>, itu lebih serbaguna daripada konsep klasik di Telegram Bots.</p>"},{"location":"id/#scopes","title":"Scopes","text":"<p>Ini karena memiliki jangkauan kemungkinan pemrosesan yang lebih luas, yaitu fungsi target dapat didefinisikan tidak hanya tergantung pada pencocokan teks, tetapi juga pada tipe pembaruan yang sesuai, ini adalah konsep scopes.</p> <p>Sesuai dengan itu, setiap perintah dapat memiliki handler yang berbeda untuk daftar scopes yang berbeda, atau sebaliknya, satu perintah untuk beberapa.</p> <p>Di bawah ini Anda dapat melihat bagaimana pemetaan dilakukan berdasarkan payload teks dan scope:</p> <p> </p>"},{"location":"id/#inputs","title":"Inputs","text":"<p>Selanjutnya, jika payload teks tidak cocok dengan perintah apa pun, titik input dicari.</p> <p>Konsepnya sangat mirip dengan menunggu input di aplikasi command-line, Anda memasukkan konteks bot untuk pengguna tertentu sebuah titik yang akan menangani input berikutnya, tidak masalah apa yang berisi, yang penting adalah bahwa pembaruan berikutnya memiliki <code>User</code> untuk dapat menghubungkannya dengan titik penungguan input yang ditetapkan.</p> <p>Di bawah ini Anda dapat melihat contoh pemrosesan pembaruan ketika tidak ada kecocokan pada <code>Commands</code>.</p> <p> </p>"},{"location":"id/#commons","title":"Commons","text":"<p>Jika handler tidak menemukan <code>commands</code> atau <code>inputs</code>, ia memeriksa beban teks terhadap handler <code>common</code>.</p> <p>Kami menyarankan untuk menggunakannya tanpa penyalahgunaan, karena memeriksa dengan iterasi melalui semua entri.</p>"},{"location":"id/#unprocessed","title":"Unprocessed","text":"<p>Dan langkah terakhir, jika handler tidak menemukan aktivitas yang cocok (<code>UpdateHandler</code> bekerja sepenuhnya secara paralel dan tidak dihitung sebagai aktivitas biasa), maka <code>UnprocessedHandler</code> berperan, jika diatur, itu akan menangani kasus ini, mungkin berguna untuk memperingatkan pengguna bahwa sesuatu telah salah.</p> <p>Baca lebih detail di artikel Handlers.</p>"},{"location":"id/#activity-ratelimiter","title":"Activity RateLimiter","text":"<p>Setelah menemukan aktivitas, itu juga memeriksa batas laju pengguna pada aktivitas tersebut, sesuai dengan parameter yang ditentukan dalam parameter aktivitas.</p>"},{"location":"id/#activity","title":"Activity","text":"<p>Activity mengacu pada berbagai jenis handler yang dapat ditangani oleh library telegram bot, termasuk Commands, Inputs, Regexes, dan handler Unprocessed.</p>"},{"location":"id/#invocation","title":"Invocation","text":"<p>Langkah pemrosesan terakhir adalah pemanggilan aktivitas yang ditemukan.</p> <p>Detail lebih lanjut dapat ditemukan di artikel invocation.</p>"},{"location":"id/#lihat-juga","title":"Lihat juga","text":"<ul> <li>Update parsing</li> <li>Activity invocation</li> <li>Handlers</li> <li>Bot configuration</li> <li>[Web starters (Spring, Ktor)](Web-starters-(Spring-and-Ktor.md)</li> </ul>"},{"location":"id/Actions/#semua-permintaan-adalah-actions","title":"Semua Permintaan adalah Actions","text":"<p>Semua permintaan api telegram adalah berbagai jenis antarmuka <code>TgAction</code> yang mengimplementasikan metode berbeda seperti <code>SendMessageAction</code>, yang dibungkus dalam bentuk fungsi bertipe <code>message()</code> untuk kenyamanan antarmuka library.</p> <p> </p> <p>Setiap <code>Action</code> mungkin memiliki metode yang berbeda-beda, tergantung pada <code>Feature</code> yang tersedia.</p>"},{"location":"id/Actions/#features","title":"Features","text":"<p>Action yang berbeda mungkin memiliki <code>Features</code> yang berbeda tergantung pada Telegram Bot Api, seperti: <code>OptionsFeature</code>, <code>MarkupFeature</code> <code>EntitiesFeature</code> <code>CaptionFeature</code>.</p> <p>Mari kita lihat lebih dekat:</p>"},{"location":"id/Actions/#options","title":"Options","text":"<p>Sebagai contoh, <code>OptionsFeature</code> digunakan untuk meneruskan parameter opsional.</p> <p>Setiap action memiliki jenis opsi sendiri, yang sesuai dapat Anda lihat di <code>Action</code> itu sendiri dalam parameter <code>options</code>, di bagian properties. Sebagai contoh, <code>sendMessage</code> yang berisi data class <code>MessageOptions</code> dengan parameter berbeda sebagai opsi.</p> <p>Contoh penggunaan:</p> <pre><code>message{ \"*Test*\" }.options {\n    parseMode = ParseMode.Markdown\n}.send(user, bot)\n</code></pre>"},{"location":"id/Actions/#markup","title":"Markup","text":"<p>Ada juga metode untuk mengirim markups yang mendukung semua jenis keyboards: <code>ReplyKeyboardMarkup</code>, <code>InlineKeyboardMarkup</code>, <code>ForceReply</code>, <code>ReplyKeyboardRemove</code>.</p>"},{"location":"id/Actions/#inline-keyboard-markup","title":"Inline Keyboard Markup","text":"<p>Builder ini memungkinkan Anda membuat tombol inline dengan kombinasi parameter apa pun.</p> <pre><code>message{ \"Test\" }.inlineKeyboardMarkup {\n    \"name\" callback \"callbackData\"         //\n    \"buttonName\" url \"https://google.com\"  //--- kedua tombol ini akan berada di baris yang sama.\n    newLine() // atau br()\n    \"otherButton\" webAppInfo \"data\"       // ini akan berada di baris lain\n\n    // Anda juga dapat menggunakan gaya berbeda dalam builder:\n    callbackData(\"buttonName\") { \"callbackData\" }\n}.send(user, bot)\n</code></pre> <p>Detail lebih lanjut dapat dilihat di dokumentasi builder documentation.</p>"},{"location":"id/Actions/#reply-keyboard-markup","title":"Reply Keyboard Markup","text":"<p>Builder ini memungkinkan Anda membuat tombol menu.</p> <pre><code>message{ \"Test\" }.replyKeyboardMarkup {\n  + \"Menu button\"     // Anda dapat menambahkan tombol dengan menggunakan operator plus unary\n  + \"Menu button 2\"\n  br() // pindah ke baris kedua\n  \"Send polls \ud83d\udc40\" requestPoll true   // tombol dengan parameter\n\n  options {\n    resizeKeyboard = true\n  }\n}.send(user, bot)\n</code></pre> <p>Opsi tambahan yang berlaku untuk keyboard dapat dilihat di <code>ReplyKeyboardMarkupOptions</code>.</p> <p>Lihat dokumentasi builder documentation untuk detail lebih lanjut tentang metode-metode.</p> <p>Biasanya nyaman menggunakan dsl untuk mengumpulkan keyboard markup, tetapi jika diperlukan, Anda juga dapat menambahkan markup secara manual.</p> <pre><code>message{ \"*Test*\" }.markup {\n    InlineKeyboardMarkup(\n        InlineKeyboardButton(\"test\", callbackData = \"testCallback\")\n    )\n}.send(user, bot)\n</code></pre> <pre><code>message{ \"*Test*\" }.markup {\n    ReplyKeyboardMarkup(\n        KeyboardButton(\"Test menu button\")\n    )\n}.send(user, bot)\n</code></pre>"},{"location":"id/Actions/#entities","title":"Entities","text":"<p>Ada juga metode untuk mengirim <code>MessageEntity</code>.</p> <p>Contoh penggunaan:</p> <pre><code>message{ \"Test \\$hello\" }.replyKeyboardMarkup {\n    +\"Test menu button\"\n}.entities {\n    5 to 15 url \"https://google.com\" // tambahkan TextLink\n    entity(EntityType.Bold, 0, 4)\n    entity(EntityType.Cashtag, 5, 5) // backslash tidak dihitung (karena digunakan untuk compiler)\n}.send(user, bot)\n</code></pre>"},{"location":"id/Actions/#contextual-entities","title":"Contextual entities.","text":"<p>Entities juga dapat ditambahkan melalui konteks beberapa konstruksi, mereka diberi label dengan antarmuka EntitiesContextBuilder tertentu, yang juga hadir dalam fitur caption.</p> <p>Contoh penggunaan:</p> <pre><code>message { \"usual text \" - bold { \"this is bold text\" } - \" continue usual\" }.send(user, bot)\n</code></pre> <p>Semua jenis entity types didukung.</p>"},{"location":"id/Actions/#caption","title":"Caption","text":"<p>Juga, metode <code>caption</code> dapat digunakan untuk menambahkan caption ke file media.</p> <p>Contoh penggunaan:</p> <pre><code>photo { \"FILE_ID\" }.caption { \"Test caption\" }.send(user, bot)\n</code></pre>"},{"location":"id/Actions/#lihat-juga","title":"Lihat juga","text":"<ul> <li>Bot context</li> <li>FSM | Conversation handling</li> </ul>"},{"location":"id/Activites-and-Processors/#pengantar","title":"Pengantar","text":"<p><code>Activity</code> dalam hal ini adalah entitas abstrak yang merupakan generalisasi dari entitas seperti <code>@CommandHandler</code>, <code>@InputHandler</code>, <code>@UnprocessedHandler</code>, dan <code>@CommonHandler</code>.</p> <p>Juga lihat artikel handlers.</p>"},{"location":"id/Activites-and-Processors/#mengumpulkan-activities","title":"Mengumpulkan activities","text":"<p>Activities dikumpulkan dan dipersiapkan semua konteks pada waktu kompilasi (kecuali yang didefinisikan melalui functional dsl).</p> <p>Jika Anda ingin membatasi area di mana paket akan dicari, Anda dapat memberikan parameter ke plugin:</p> <pre><code>ktGram {\n    packages = listOf(\"com.example.mybot\")\n}\n</code></pre> <p>atau tanpa plugin melalui ksp:</p> <pre><code>ksp {\n    arg(\"package\", \"com.example.mybot\")\n}\n</code></pre> <p>catatan dalam kasus seperti itu, agar actions yang dikumpulkan dapat diproses dengan benar, Anda juga harus menentukan paket dalam instans itu sendiri.</p> <pre><code>fun main() = runBlocking {\n    val bot = TelegramBot(\"BOT_TOKEN\", \"com.example.mybot\")\n\n    bot.handleUpdates()\n    // mulai long-polling listener\n}\n</code></pre> <p>opsi ini ditambahkan untuk dapat menjalankan beberapa instans bot:</p> <pre><code>ktGram {\n    packages = listOf(\"com.example.mybot\", \"com.example.mybot2\")\n}\n</code></pre> <p>atau jika Anda tidak menggunakan plugin untuk menentukan paket yang berbeda, Anda perlu menentukannya dengan pemisah <code>;</code>:</p> <pre><code>ksp {\n    arg(\"package\", \"com.example.mybot;com.example.mybot2\")\n}\n</code></pre>"},{"location":"id/Activites-and-Processors/#pemrosesan","title":"Pemrosesan","text":""},{"location":"id/Activites-and-Processors/#webhooks","title":"Webhooks","text":"<p>Di controller Anda (atau tempat lain di mana <code>webhook</code> diproses), Anda panggil: <code>bot.update.parseAndHandle(webhookString)</code></p>"},{"location":"id/Activites-and-Processors/#long-polling","title":"Long polling","text":"<p>Panggil: <code>bot.handleUpdates()</code> atau melalui <code>bot.update.setListener { handle(it) }</code></p>"},{"location":"id/Activites-and-Processors/#lihat-juga","title":"Lihat juga","text":"<ul> <li>Update parsing</li> <li>Activity invocation</li> <li>Actions</li> </ul>"},{"location":"id/Activity-invocation/","title":"Activity Invocation","text":"<p>Selama invocation activity, adalah mungkin untuk melewatkan konteks bot, karena dinyatakan sebagai parameter dalam fungsi target.</p> <p>Parameter yang dapat dilewatkan adalah:</p> <ul> <li><code>ProcessedUpdate</code> (dan semua subclass-nya) - update pemrosesan saat ini.</li> <li><code>ProcessingContext</code> - konteks level rendah dari penanganan activity.</li> <li><code>User</code> - jika ada.</li> <li><code>Chat</code> - jika ada.</li> <li><code>TelegramBot</code> - instance bot saat ini.</li> </ul> <p>Juga dimungkinkan untuk menambahkan tipe kustom untuk dilewatkan.</p> <p>Untuk melakukannya, tambahkan kelas yang mengimplementasikan <code>Autowiring&lt;T&gt;</code> dan tandai dengan anotasi <code>@Injectable</code>.</p> <p>Setelah mengimplementasikan interface <code>Autowiring</code> - <code>T</code> akan tersedia untuk dilewatkan dalam fungsi target dan akan diperoleh melalui metode yang dijelaskan dalam interface.</p> <pre><code>@Injectable\nobject UserResolver : Autowiring&lt;UserRecord&gt; {\n    override suspend fun get(update: ProcessedUpdate, bot: TelegramBot): UserRecord? {\n        return userRepository.getUserByTgId(update.user.id)\n    }\n}\n</code></pre> <p>Parameter lain yang dinyatakan dalam fungsi akan dicari dalam parameter yang diparse.</p> <p>Selain itu, parameter yang diparse selama dilewatkan dapat di-cast ke tipe tertentu, berikut daftarnya:</p> <ul> <li><code>String</code></li> <li><code>Integer</code></li> <li><code>Long</code></li> <li><code>Short</code></li> <li><code>Float</code></li> <li><code>Double</code></li> </ul> <p>Selain itu, perhatikan bahwa jika parameter dinyatakan dan hilang (atau dalam parameter yang diparse atau misalnya <code>User</code> hilang dalam <code>Update</code>) atau tipe yang dinyatakan tidak sesuai dengan parameter yang diterima dalam fungsi, <code>null</code> akan dilewatkan jadi berhati-hatilah.</p> <p>Meringkas semuanya, di bawah ini adalah contoh bagaimana parameter fungsi biasanya dibentuk:</p> <p> </p>"},{"location":"id/Activity-invocation/#lihat-juga","title":"Lihat juga","text":"<ul> <li>Update parsing</li> <li>Activities &amp; Processors</li> </ul>"},{"location":"id/Bot-Context/","title":"Bot Context","text":"<p>Bot juga dapat memberikan kemampuan untuk mengingat beberapa data melalui antarmuka <code>UserData</code> dan <code>ClassData</code>.</p> <ul> <li><code>userData</code> adalah data level pengguna.</li> <li><code>classData</code> adalah data level kelas, yaitu data akan disimpan hingga pengguna berpindah ke perintah atau input yang berada di   kelas yang berbeda. (dalam mode fungsi akan bekerja seperti data pengguna)</li> </ul> <p>Secara default, implementasi disediakan melalui <code>ConcurrentHashMap</code> tetapi dapat diubah ke milik Anda sendiri melalui antarmuka <code>UserData</code> dan <code>ClassData</code> menggunakan alat penyimpanan data pilihan Anda.</p> <p>Caution</p> <p>Jangan lupa untuk menjalankan gradle <code>kspKotlin</code>/atau tugas ksp relevan lainnya untuk membuat binding codegen yang diperlukan tersedia.</p> <p>Untuk mengubah, yang perlu Anda lakukan hanyalah menempatkan di bawah implementasi Anda anotasi <code>@CtxProvider</code> dan menjalankan tugas ksp gradle (atau build).</p> <pre><code>@CtxProvider\nclass MyRedis : UserData&lt;String&gt; {\n    // ...\n}\n</code></pre>"},{"location":"id/Bot-Context/#lihat-juga","title":"Lihat juga","text":"<ul> <li>Beranda</li> <li>Update parsing</li> </ul>"},{"location":"id/Bot-configuration/","title":"Konfigurasi Bot","text":"<p>Library menyediakan banyak opsi konfigurasi, Anda dapat melihat referensi API di kelas <code>BotConfiguration</code>.</p> <p>Ada juga dua pendekatan untuk mengonfigurasi bot:</p>"},{"location":"id/Bot-configuration/#lambda-configurator","title":"Lambda Configurator","text":"<pre><code>// ...\nval bot = TelegramBot(\"BOT_TOKEN\") {\n  inputListener = RedisInputListenerImpl()\n  classManager = KoinClassManagerImpl()\n  logging {\n      botLogLevel = LogLvl.DEBUG\n  }\n}\n// ...\n</code></pre>"},{"location":"id/Bot-configuration/#interface-configloader","title":"Interface ConfigLoader","text":"<p>Ada juga kemampuan untuk mengonfigurasi melalui interface <code>ConfigLoader</code> khusus, yang dapat Anda gunakan untuk memuat pengaturan dari sumber eksternal (<code>properties</code>, <code>command line args</code>, dll).</p> <p>Implementasi dari interface ini dapat dilewatkan melalui constructor sekunder dan instance akan dikonfigurasi sesuai.</p> <pre><code>val bot = TelegramBot(ConfigLoaderImpl)\n</code></pre> <p>Saat ini ada beberapa modul yang disediakan yang mengimplementasikan interface ini seperti <code>ktgram-config-env</code>, <code>ktgram-config-toml</code>.</p>"},{"location":"id/Bot-configuration/#ikhtisar-botconfiguration","title":"Ikhtisar BotConfiguration","text":""},{"location":"id/Bot-configuration/#botconfiguration","title":"BotConfiguration","text":"<p>Kelas <code>BotConfiguration</code> adalah pusat untuk mengonfigurasi bot. Ini termasuk properti untuk mengidentifikasi bot, mengatur host API, menentukan apakah bot beroperasi di lingkungan test, menangani input, mengelola kelas, dan mengontrol penghapusan input otomatis. Selain itu, ini menyediakan properti internal untuk rate limiting, konfigurasi HTTP client, logging, update listening, dan command parsing.</p>"},{"location":"id/Bot-configuration/#properti","title":"Properti","text":"<ul> <li><code>identifier</code>: Mengidentifikasi instance bot yang berbeda selama pemrosesan multi-bot.</li> <li><code>apiHost</code>: Host dari Telegram API.</li> <li><code>isTestEnv</code>: Flag yang menunjukkan apakah bot beroperasi di lingkungan test.</li> <li><code>inputListener</code>: Instance dari kelas penanganan input.</li> <li><code>classManager</code>: Manager yang digunakan untuk mendapatkan kelas.</li> <li><code>inputAutoRemoval</code>: Flag yang mengatur penghapusan otomatis titik input selama pemrosesan.</li> <li><code>exceptionHandlingStrategy</code>: Menentukan strategi untuk menangani exception.<ul> <li><code>CollectToChannel</code> - Kumpulkan ke <code>TgUpdateHandler.caughtExceptions</code>.</li> <li><code>Throw</code> - Lempar lagi dibungkus dengan <code>TgException</code>.</li> <li><code>DoNothing</code> - Lakukan tidak ada :)</li> <li><code>Handle</code> - Setel handler kustom.</li> </ul> </li> <li><code>throwExOnActionsFailure</code>: Melempar exception ketika ada permintaan bot yang gagal.</li> </ul>"},{"location":"id/Bot-configuration/#blok-konfigurasi","title":"Blok Konfigurasi","text":"<p><code>BotConfiguration</code> juga menawarkan fungsi untuk mengonfigurasi komponen internalnya:</p> <ul> <li><code>httpClient(block: HttpConfiguration.() -&gt; Unit)</code>: Mengonfigurasi HTTP client.</li> <li><code>logging(block: LoggingConfiguration.() -&gt; Unit)</code>: Mengonfigurasi logging.</li> <li><code>rateLimiter(block: RateLimiterConfiguration.() -&gt; Unit)</code>: Mengonfigurasi request limiting.</li> <li><code>updatesListener(block: UpdatesListenerConfiguration.() -&gt; Unit)</code>: Mengonfigurasi updates listener.</li> <li><code>commandParsing(block: CommandParsingConfiguration.() -&gt; Unit)</code>: Menentukan pola command parsing.</li> </ul>"},{"location":"id/Bot-configuration/#kelas-konfigurasi-terkait","title":"Kelas Konfigurasi Terkait","text":""},{"location":"id/Bot-configuration/#ratelimiterconfiguration","title":"RateLimiterConfiguration","text":"<p>Mengonfigurasi global rate limiting.</p> <ul> <li><code>limits</code>: Global rate limits.</li> <li><code>mechanism</code>: Mekanisme yang digunakan untuk rate limiting, default adalah algoritma TokenBucket.</li> <li><code>exceededAction</code>: Action yang diterapkan ketika limit terlewati.</li> </ul>"},{"location":"id/Bot-configuration/#httpconfiguration","title":"HttpConfiguration","text":"<p>Berisi konfigurasi untuk HTTP client bot.</p> <ul> <li><code>requestTimeoutMillis</code>: Request timeout dalam milidetik.</li> <li><code>connectTimeoutMillis</code>: Connection timeout dalam milidetik.</li> <li><code>socketTimeoutMillis</code>: Socket timeout dalam milidetik.</li> <li><code>maxRequestRetry</code>: Maksimum retry untuk HTTP requests.</li> <li><code>retryStrategy</code>: Strategi untuk retry, dapat disesuaikan.</li> <li><code>retryDelay</code>: Multiplier untuk timeout pada setiap retry.</li> <li><code>proxy</code>: Proxy settings untuk HTTP calls.</li> <li><code>additionalHeaders</code>: Headers yang diterapkan ke setiap request.</li> </ul>"},{"location":"id/Bot-configuration/#loggingconfiguration","title":"LoggingConfiguration","text":"<p>Mengelola level logging untuk bot actions dan HTTP requests.</p> <ul> <li><code>botLogLevel</code>: Level log untuk bot actions.</li> <li><code>httpLogLevel</code>: Level log untuk HTTP requests.</li> </ul>"},{"location":"id/Bot-configuration/#updateslistenerconfiguration","title":"UpdatesListenerConfiguration","text":"<p>Mengonfigurasi parameter terkait pulling updates.</p> <ul> <li><code>dispatcher</code>: Dispatcher untuk mengumpulkan incoming updates.</li> <li><code>processingDispatcher</code>: Dispatcher untuk memproses updates.</li> <li><code>pullingDelay</code>: Delay setelah setiap pulling request.</li> <li><code>updatesPollingTimeout</code>: Timeout option untuk long-polling mechanism.</li> </ul>"},{"location":"id/Bot-configuration/#commandparsingconfiguration","title":"CommandParsingConfiguration","text":"<p>Menentukan parameter untuk command parsing.</p> <ul> <li><code>commandDelimiter</code>: Separator antara command dan parameters.</li> <li><code>parametersDelimiter</code>: Separator antara parameters.</li> <li><code>parameterValueDelimiter</code>: Separator antara key dan value dari parameter.</li> <li><code>restrictSpacesInCommands</code>: Flag yang menunjukkan apakah spasi dalam commands harus dianggap sebagai akhir dari command.</li> <li><code>useIdentifierInGroupCommands</code>: Menggunakan identifier bot untuk mencocokkan commands yang mengandung @.</li> </ul>"},{"location":"id/Bot-configuration/#contoh-konfigurasi","title":"Contoh Konfigurasi","text":"<p>Berikut adalah contoh cara mengonfigurasi bot menggunakan kelas-kelas ini:</p> <pre><code>val bot = TelegramBot(\"TOKEN\") {\n    identifier = \"MyBot\",\n    apiHost = \"https://api.telegram.org\",\n    isTestEnv = true,\n    inputListener = InputListenerMapImpl(),\n    classManager = ClassManagerImpl(),\n\n    httpClient {\n        requestTimeoutMillis = 5000L\n        connectTimeoutMillis = 3000L\n        socketTimeoutMillis = 2000L\n    }\n    logging {\n        botLogLevel = LogLvl.DEBUG\n        httpLogLevel = HttpLogLevel.BODY\n    }\n    updatesListener {\n        dispatcher = Dispatchers.IO\n        processingDispatcher = Dispatchers.Unconfined\n        pullingDelay = 1000L\n    }\n    commandParsing {\n        commandDelimiter = '*'\n        parametersDelimiter = '&amp;'\n        restrictSpacesInCommands = true\n    }\n}\n</code></pre> <p>Konfigurasi ini menyiapkan bot dengan identifier khusus, mengaktifkan mode test environment, mengonfigurasi rate limiting, HTTP client settings, logging levels, update listener parameters, dan command parsing rules.</p>"},{"location":"id/Bot-configuration/#dengan-memanfaatkan-opsi-konfigurasi-ini-developer-dapat-menyesuaikan-bot-mereka-untuk-memenuhi-persyaratan-spesifik-dan-mengoptimalkan-kinerja-di-berbagai-skenario-operasional","title":"Dengan memanfaatkan opsi konfigurasi ini, developer dapat menyesuaikan bot mereka untuk memenuhi persyaratan spesifik dan mengoptimalkan kinerja di berbagai skenario operasional.","text":""},{"location":"id/F.A.Q/#abstractmethoderror-exception","title":"<code>AbstractMethodError</code> exception","text":"<p>Jika Anda mendapatkan pengecualian seperti ini saat startup aplikasi Anda:</p> <pre><code>Exception in thread \"DefaultDispatcher-worker-1\" java.lang.AbstractMethodError: 'kotlinx.serialization.KSerializer[] kotlinx.serialization.internal.GeneratedSerializer.typeParametersSerializers()'\n    at eu.vendeli.tgbot.types.options.GetUpdatesOptions$$serializer.typeParametersSerializers(GetUpdatesOptions.kt:6)\n</code></pre> <p>Hal ini terjadi karena sistem build Anda menggunakan library serialisasi lama yang mekanisme internalnya berbeda. Untuk mengatasinya, Anda harus membuatnya menggunakan versi yang lebih baru, misalnya dengan menambahkan ini ke buildscript Anda:</p> <pre><code>configurations.all {\n    resolutionStrategy.eachDependency {\n        val serdeVer = \"x.x.x\" // should be &gt;= 1.8.0\n        when(requested.module.toString()) {\n            // json serialiazaton\n            \"org.jetbrains.kotlinx:kotlinx-serialization-json\" -&gt; useVersion(serdeVer)\n            \"org.jetbrains.kotlinx:kotlinx-serialization-json-jvm\" -&gt; useVersion(serdeVer)\n            \"org.jetbrains.kotlinx:kotlinx-serialization-core\" -&gt; useVersion(serdeVer)\n            \"org.jetbrains.kotlinx:kotlinx-serialization-core-jvm\" -&gt; useVersion(serdeVer)\n            \"org.jetbrains.kotlinx:kotlinx-serialization-bom\" -&gt; useVersion(serdeVer)\n        }\n    }\n}\n</code></pre> <p>(Jika ini sudah dijelaskan dengan baik di changelog, saya tidak akan pernah memutakhirkannya karena saya mendapat banyak laporan tentang masalah ini)</p>"},{"location":"id/F.A.Q/#bagaimana-cara-mendapatkan-respons-dari-method","title":"Bagaimana cara mendapatkan respons dari method?","text":"<p>Untuk mendapatkan respons dan dapat mengoperasikannya, Anda perlu menggunakan <code>sendReturning</code> di akhir method sebagai ganti <code>send</code>.</p> <p>Dalam hal ini, class <code>Response</code> dikembalikan, yang berisi respons, keberhasilan atau kegagalan, selanjutnya Anda perlu menangani kegagalan atau cukup panggil <code>getOrNull()</code>.</p> <p>Ada bagian tentang: Processing responses.</p>"},{"location":"id/F.A.Q/#saya-mendapatkan-error-saat-menggunakan-spring-boot-devtools","title":"Saya mendapatkan error saat menggunakan <code>spring-boot-devtools</code>","text":"<p>Hal ini terjadi karena <code>spring-boot-devtools</code> memiliki <code>classloader</code> sendiri dan tidak menemukan method.</p> <p>Anda perlu menambahkan ke <code>resources/META-INF/spring-devtools.properties</code>:</p> <pre><code>restart.include.generated=/eu.vendeli\n</code></pre>"},{"location":"id/F.A.Q/#bagaimana-cara-mengubah-engine-ktor","title":"Bagaimana cara mengubah engine ktor","text":"<p>Jika Anda ingin mengubah engine yang digunakan oleh client, Anda dapat dengan mudah mengubah parameter di plugin settings.</p>"},{"location":"id/F.A.Q/#bagaimana-cara-menggunakan-logging-provider-favorit-saya","title":"Bagaimana cara menggunakan logging provider favorit saya","text":"<p>Library menggunakan <code>slf4j-api</code> dan untuk menggunakan provider, Anda hanya perlu menambahkannya ke dependencies.</p> <p>Plugin library secara otomatis mendeteksi penggunaan provider, jika provider tidak ada, <code>logback</code> akan digunakan secara default.</p>"},{"location":"id/F.A.Q/#menangkap-network-exceptions-dalam-long-polling-handler","title":"Menangkap network exceptions dalam long-polling handler","text":"<p>Misalnya jika Anda memiliki koneksi yang tidak stabil dan perlu menangkap error karena ini, mungkin pendekatan ini akan membantu Anda:</p> <pre><code>fun main() {\n    val bot = TelegramBot(\"TOKEN\")\n\n    try {\n        bot.handleUpdates()\n    } catch (e: Exception) {\n        // handle if needed\n\n        bot.update.stopListener()\n        bot.handleUpdates()\n    }\n}\n</code></pre> <p>Anda juga dapat melihat bagaimana ini dilakukan di spring-starter.</p>"},{"location":"id/FSM-and-Conversation-handling/","title":"Fsm Dan Penanganan Percakapan","text":"<p>Perpustakaan ini juga mendukung mekanisme FSM, yang merupakan mekanisme untuk pemrosesan progresif input pengguna dengan penanganan input yang salah.</p> <p>Note</p> <p>TL;DR: Lihat contoh di sana.</p>"},{"location":"id/FSM-and-Conversation-handling/#secara-teori","title":"Secara Teori","text":"<p>Mari kita bayangkan situasi di mana Anda perlu mengumpulkan survei pengguna, Anda dapat meminta semua data seseorang dalam satu langkah, tetapi dengan input yang salah dari salah satu parameter, akan sulit baik untuk pengguna maupun untuk kita, dan setiap langkah mungkin berbeda tergantung pada data input tertentu.</p> <p>Sekarang mari kita bayangkan input data secara bertahap, di mana bot memasuki mode dialog dengan pengguna.</p> <p> </p> <p>Panah hijau menunjukkan proses transisi melalui langkah-langkah tanpa kesalahan, panah biru berarti menyimpan status saat ini dan menunggu input ulang (misalnya, jika pengguna menunjukkan bahwa dia berusia -100 tahun, itu harus meminta usia lagi), dan yang merah menunjukkan keluar dari seluruh proses karena ada perintah atau pembatalan makna lainnya.</p>"},{"location":"id/FSM-and-Conversation-handling/#secara-praktik","title":"Secara Praktik","text":"<p>Sistem Wizard memungkinkan interaksi multi-langkah dengan pengguna di bot Telegram. Ini membimbing pengguna melalui urutan langkah-langkah, memvalidasi input, menyimpan status, dan beralih antar langkah.</p> <p>Manfaat Utama: - Type-safe: Pemeriksaan tipe waktu kompilasi untuk akses status - Declarative: Tentukan langkah-langkah sebagai kelas/objek bersarang - Flexible: Dukungan untuk transisi bersyarat, lompatan, dan retry - Stateful: Persistensi status otomatis dengan backend penyimpanan yang dapat dihubungkan - Integrated: Bekerja dengan sistem Activity yang ada</p>"},{"location":"id/FSM-and-Conversation-handling/#konsep-inti","title":"Konsep Inti","text":""},{"location":"id/FSM-and-Conversation-handling/#wizardstep","title":"WizardStep","text":"<p><code>WizardStep</code> mewakili satu langkah dalam alur wizard. Setiap langkah harus mengimplementasikan:</p> <ul> <li><code>onEntry(ctx: WizardContext)</code>: Dipanggil ketika pengguna memasuki langkah ini. Gunakan ini untuk meminta pengguna.</li> <li><code>onRetry(ctx: WizardContext)</code>: Dipanggil ketika validasi gagal dan langkah harus retry. Gunakan ini untuk menampilkan pesan kesalahan.</li> <li><code>validate(ctx: WizardContext): Transition</code>: Memvalidasi input saat ini dan mengembalikan <code>Transition</code> yang menunjukkan apa yang terjadi selanjutnya.</li> <li><code>store(ctx: WizardContext): Any?</code> (opsional): Mengembalikan nilai yang akan disimpan untuk langkah ini. Kembalikan <code>null</code> jika langkah tidak menyimpan status.</li> </ul> <pre><code>object NameStep : WizardStep(isInitial = true) {\n    override suspend fun onEntry(ctx: WizardContext) {\n        message { \"What is your name?\" }.send(ctx.user, ctx.bot)\n    }\n\n    override suspend fun onRetry(ctx: WizardContext) {\n        message { \"Name cannot be empty. Please try again.\" }.send(ctx.user, ctx.bot)\n    }\n\n    override suspend fun validate(ctx: WizardContext): Transition {\n        return if (ctx.update.text.isNullOrBlank()) {\n            Transition.Retry\n        } else {\n            Transition.Next\n        }\n    }\n\n    override suspend fun store(ctx: WizardContext): String {\n        return ctx.update.text!!\n    }\n}\n</code></pre> <p>Note</p> <p>Jika beberapa langkah tidak ditandai sebagai initial -&gt; langkah pertama yang dideklarasikan dianggap sebagai.</p>"},{"location":"id/FSM-and-Conversation-handling/#transition","title":"Transition","text":"<p><code>Transition</code> menentukan apa yang terjadi setelah validasi:</p> <ul> <li><code>Transition.Next</code>: Pindah ke langkah berikutnya dalam urutan</li> <li><code>Transition.JumpTo(step: KClass&lt;out WizardStep&gt;)</code>: Lompat ke langkah tertentu</li> <li><code>Transition.Retry</code>: Retry langkah saat ini (validasi gagal)</li> <li><code>Transition.Finish</code>: Selesaikan wizard</li> </ul> <pre><code>// Lompatan bersyarat berdasarkan input\noverride suspend fun validate(ctx: WizardContext): Transition {\n    val age = ctx.update.text?.toIntOrNull()\n    return when {\n        age == null -&gt; Transition.Retry\n        age &lt; 18 -&gt; Transition.JumpTo(UnderageStep::class)\n        else -&gt; Transition.Next\n    }\n}\n</code></pre>"},{"location":"id/FSM-and-Conversation-handling/#wizardcontext","title":"WizardContext","text":"<p><code>WizardContext</code> menyediakan akses ke: - <code>user: User</code>: Pengguna saat ini - <code>update: ProcessedUpdate</code>: Update saat ini - <code>bot: TelegramBot</code>: Instance bot - <code>userReference: UserChatReference</code>: Referensi ID pengguna dan chat untuk penyimpanan status</p> <p>Plus metode akses status type-safe (dihasilkan oleh KSP).</p>"},{"location":"id/FSM-and-Conversation-handling/#mendefinisikan-wizard","title":"Mendefinisikan Wizard","text":""},{"location":"id/FSM-and-Conversation-handling/#struktur-dasar","title":"Struktur Dasar","text":"<p>Wizard didefinisikan sebagai kelas atau objek yang dianotasi dengan <code>@WizardHandler</code>:</p> <pre><code>@WizardHandler(trigger = [\"/survey\"])\nobject SurveyWizard {\n    object NameStep : WizardStep(isInitial = true) {\n        // ... implementasi langkah\n    }\n\n    object AgeStep : WizardStep {\n        // ... implementasi langkah\n    }\n\n    object FinishStep : WizardStep {\n        // ... implementasi langkah\n    }\n}\n</code></pre>"},{"location":"id/FSM-and-Conversation-handling/#parameter-anotasi","title":"Parameter Anotasi","text":"<p><code>@WizardHandler</code> menerima: - <code>trigger: Array&lt;String&gt;</code>: Perintah yang memulai wizard (misalnya, <code>[\"/start\", \"/survey\"]</code>) - <code>scope: Array&lt;UpdateType&gt;</code>: Tipe update yang akan didengarkan (default: <code>[UpdateType.MESSAGE]</code>) - <code>stateManagers: Array&lt;KClass&lt;out WizardStateManager&lt;*&gt;&gt;&gt;</code>: Kelas state manager untuk menyimpan data langkah</p>"},{"location":"id/FSM-and-Conversation-handling/#manajemen-status","title":"Manajemen Status","text":""},{"location":"id/FSM-and-Conversation-handling/#wizardstatemanager","title":"WizardStateManager","text":"<p>Status disimpan menggunakan implementasi <code>WizardStateManager&lt;T&gt;</code>. Setiap manager menangani tipe tertentu:</p> <pre><code>interface WizardStateManager&lt;T : Any&gt; {\n    suspend fun get(key: KClass&lt;out WizardStep&gt;, reference: UserChatReference): T?\n    suspend fun set(key: KClass&lt;out WizardStep&gt;, reference: UserChatReference, value: T)\n    suspend fun del(key: KClass&lt;out WizardStep&gt;, reference: UserChatReference)\n}\n</code></pre> <p>Lihat juga: MapStateManager, MapStringStateManager, MapIntStateManager, MapLongStateManager."},{"location":"id/FSM-and-Conversation-handling/#pencocokan-otomatis","title":"Pencocokan Otomatis","text":"<p>KSP mencocokkan langkah ke state manager berdasarkan tipe kembalian <code>store()</code>:</p> <pre><code>@WizardHandler(\n    trigger = [\"/survey\"],\n    stateManagers = [StringStateManager::class, IntStateManager::class]\n)\nobject SurveyWizard {\n    object NameStep : WizardStep(isInitial = true) {\n        override suspend fun store(ctx: WizardContext): String {\n            return ctx.update.text!! // Cocok dengan StringStateManager\n        }\n    }\n\n    object AgeStep : WizardStep {\n        override suspend fun store(ctx: WizardContext): Int {\n            return ctx.update.text!!.toInt() // Cocok dengan IntStateManager\n        }\n    }\n}\n</code></pre>"},{"location":"id/FSM-and-Conversation-handling/#override-per-langkah","title":"Override Per-Langkah","text":"<p>Override state manager untuk langkah tertentu menggunakan <code>@WizardHandler.StateManager</code>:</p> <pre><code>@WizardHandler(\n    trigger = [\"/survey\"],\n    stateManagers = [DefaultStateManager::class]\n)\nobject SurveyWizard {\n    object NameStep : WizardStep(isInitial = true) {\n        // Menggunakan DefaultStateManager\n    }\n\n    @WizardHandler.StateManager(CustomStateManager::class)\n    object AgeStep : WizardStep {\n        // Menggunakan CustomStateManager sebagai gantinya\n    }\n}\n</code></pre>"},{"location":"id/FSM-and-Conversation-handling/#akses-status-type-safe","title":"Akses Status Type-Safe","text":"<p>KSP menghasilkan fungsi ekstensi type-safe pada <code>WizardContext</code> untuk setiap langkah yang menyimpan status.</p>"},{"location":"id/FSM-and-Conversation-handling/#fungsi-yang-dihasilkan","title":"Fungsi yang Dihasilkan","text":"<p>Untuk langkah yang menyimpan <code>String</code>:</p> <pre><code>// Dihasilkan secara otomatis oleh KSP\nsuspend inline fun &lt;reified S : WizardStep&gt; WizardContext.getState(): String?\nsuspend inline fun &lt;reified S : WizardStep&gt; WizardContext.setState(value: String)\nsuspend inline fun &lt;reified S : WizardStep&gt; WizardContext.delState()\n</code></pre>"},{"location":"id/FSM-and-Conversation-handling/#penggunaan","title":"Penggunaan","text":"<pre><code>object FinishStep : WizardStep {\n    override suspend fun onEntry(ctx: WizardContext) {\n        // Akses type-safe - mengembalikan String? (nullable)\n        val name: String? = ctx.getState&lt;NameStep&gt;()\n\n        // Akses type-safe - mengembalikan Int? (nullable)\n        val age: Int? = ctx.getState&lt;AgeStep&gt;()\n\n        val summary = buildString {\n            appendLine(\"Name: $name\")\n            appendLine(\"Age: $age\")\n        }\n\n        message { summary }.send(ctx.user, ctx.bot)\n    }\n\n    override suspend fun onRetry(ctx: WizardContext) = Unit\n\n    override suspend fun validate(ctx: WizardContext): Transition {\n        return Transition.Finish\n    }\n}\n</code></pre>"},{"location":"id/FSM-and-Conversation-handling/#metode-fallback","title":"Metode Fallback","text":"<p>Jika metode type-safe tidak tersedia, gunakan metode fallback:</p> <pre><code>// Fallback - mengembalikan Any?\nval name = ctx.getState(NameStep::class)\n\n// Fallback - menerima Any?\nctx.setState(NameStep::class, \"John\")\nctx.delState(NameStep::class)\n</code></pre>"},{"location":"id/FSM-and-Conversation-handling/#contoh-lengkap","title":"Contoh Lengkap","text":""},{"location":"id/FSM-and-Conversation-handling/#user-registration-wizard","title":"User Registration Wizard","text":"<pre><code>@WizardHandler(\n    trigger = [\"/register\"],\n    stateManagers = [StringStateManager::class, IntStateManager::class]\n)\nobject RegistrationWizard {\n    object NameStep : WizardStep(isInitial = true) {\n        override suspend fun onEntry(ctx: WizardContext) {\n            message { \"What is your name?\" }.send(ctx.user, ctx.bot)\n        }\n\n        override suspend fun onRetry(ctx: WizardContext) {\n            message { \"Please enter a valid name.\" }.send(ctx.user, ctx.bot)\n        }\n\n        override suspend fun validate(ctx: WizardContext): Transition {\n            val name = ctx.update.text?.trim()\n            return if (name.isNullOrBlank() || name.length &lt; 2) {\n                Transition.Retry\n            } else {\n                Transition.Next\n            }\n        }\n\n        override suspend fun store(ctx: WizardContext): String {\n            return ctx.update.text!!.trim()\n        }\n    }\n\n    object AgeStep : WizardStep {\n        override suspend fun onEntry(ctx: WizardContext) {\n            message { \"How old are you?\" }.send(ctx.user, ctx.bot)\n        }\n\n        override suspend fun onRetry(ctx: WizardContext) {\n            message { \"Please enter a valid age (must be a number).\" }.send(ctx.user, ctx.bot)\n        }\n\n        override suspend fun validate(ctx: WizardContext): Transition {\n            val age = ctx.update.text?.toIntOrNull()\n            return when {\n                age == null -&gt; Transition.Retry\n                age &lt; 0 || age &gt; 150 -&gt; Transition.Retry\n                age &lt; 18 -&gt; Transition.JumpTo(UnderageStep::class)\n                else -&gt; Transition.Next\n            }\n        }\n\n        override suspend fun store(ctx: WizardContext): Int {\n            return ctx.update.text!!.toInt()\n        }\n    }\n\n    object UnderageStep : WizardStep {\n        override suspend fun onEntry(ctx: WizardContext) {\n            message { \n                \"Sorry, you must be 18 or older to register.\" \n            }.send(ctx.user, ctx.bot)\n        }\n\n        override suspend fun onRetry(ctx: WizardContext) = Unit\n\n        override suspend fun validate(ctx: WizardContext): Transition {\n            return Transition.Finish\n        }\n    }\n\n    object ConfirmationStep : WizardStep {\n        override suspend fun onEntry(ctx: WizardContext) {\n            // Akses status type-safe\n            val name: String? = ctx.getState&lt;NameStep&gt;()\n            val age: Int? = ctx.getState&lt;AgeStep&gt;()\n\n            val confirmation = buildString {\n                appendLine(\"Please confirm your information:\")\n                appendLine(\"Name: $name\")\n                appendLine(\"Age: $age\")\n                appendLine()\n                appendLine(\"Reply 'yes' to confirm or 'no' to start over.\")\n            }\n\n            message { confirmation }.send(ctx.user, ctx.bot)\n        }\n\n        override suspend fun onRetry(ctx: WizardContext) {\n            message { \"Please reply 'yes' or 'no'.\" }.send(ctx.user, ctx.bot)\n        }\n\n        override suspend fun validate(ctx: WizardContext): Transition {\n            val response = ctx.update.text?.lowercase()?.trim()\n            return when (response) {\n                \"yes\" -&gt; Transition.Finish\n                \"no\" -&gt; Transition.JumpTo(NameStep::class) // Mulai ulang\n                else -&gt; Transition.Retry\n            }\n        }\n    }\n\n    object FinishStep : WizardStep {\n        override suspend fun onEntry(ctx: WizardContext) {\n            val name: String? = ctx.getState&lt;NameStep&gt;()\n            val age: Int? = ctx.getState&lt;AgeStep&gt;()\n\n            // Simpan ke database, kirim konfirmasi, dll.\n            message { \n                \"Registration complete! Welcome, $name (age $age).\" \n            }.send(ctx.user, ctx.bot)\n        }\n\n        override suspend fun onRetry(ctx: WizardContext) = Unit\n\n        override suspend fun validate(ctx: WizardContext): Transition {\n            return Transition.Finish\n        }\n    }\n}\n</code></pre>"},{"location":"id/FSM-and-Conversation-handling/#fitur-lanjutan","title":"Fitur Lanjutan","text":""},{"location":"id/FSM-and-Conversation-handling/#transisi-bersyarat","title":"Transisi Bersyarat","text":"<p>Gunakan <code>Transition.JumpTo</code> untuk alur bersyarat:</p> <pre><code>override suspend fun validate(ctx: WizardContext): Transition {\n    val choice = ctx.update.text?.lowercase()\n    return when (choice) {\n        \"premium\" -&gt; Transition.JumpTo(PremiumStep::class)\n        \"basic\" -&gt; Transition.JumpTo(BasicStep::class)\n        else -&gt; Transition.Retry\n    }\n}\n</code></pre>"},{"location":"id/FSM-and-Conversation-handling/#langkah-tanpa-status","title":"Langkah Tanpa Status","text":"<p>Langkah tidak perlu menyimpan status. Cukup kembalikan <code>null</code> dari <code>store()</code> (atau biarkan seperti itu):</p> <pre><code>object ConfirmationStep : WizardStep {\n    override suspend fun store(ctx: WizardContext): Any? = null\n    // ... sisa implementasi\n}\n</code></pre>"},{"location":"id/FSM-and-Conversation-handling/#state-manager-kustom","title":"State Manager Kustom","text":"<p>Implementasikan <code>WizardStateManager&lt;T&gt;</code> untuk penyimpanan kustom (database, Redis, dll.):</p> <pre><code>class DatabaseStateManager : WizardStateManager&lt;String&gt; {\n    override suspend fun get(\n        key: KClass&lt;out WizardStep&gt;,\n        reference: UserChatReference\n    ): String? {\n        // Muat dari database\n        return database.getWizardState(reference.userId, key.qualifiedName)\n    }\n\n    override suspend fun set(\n        key: KClass&lt;out WizardStep&gt;,\n        reference: UserChatReference,\n        value: String\n    ) {\n        // Simpan ke database\n        database.saveWizardState(reference.userId, key.qualifiedName, value)\n    }\n\n    override suspend fun del(\n        key: KClass&lt;out WizardStep&gt;,\n        reference: UserChatReference\n    ) {\n        // Hapus dari database\n        database.deleteWizardState(reference.userId, key.qualifiedName)\n    }\n}\n</code></pre>"},{"location":"id/FSM-and-Conversation-handling/#cara-kerja-internal","title":"Cara Kerja Internal","text":""},{"location":"id/FSM-and-Conversation-handling/#generasi-kode","title":"Generasi Kode","text":"<p>KSP menghasilkan:</p> <ol> <li>WizardActivity: Implementasi konkret yang memperluas <code>WizardActivity</code> dengan langkah-langkah yang di-hardcode</li> <li>Start Activity: Menangani trigger perintah dan memulai wizard</li> <li>Input Activity: Menangani input pengguna selama alur wizard</li> <li>State Accessors: Fungsi ekstensi type-safe untuk akses status</li> </ol>"},{"location":"id/FSM-and-Conversation-handling/#alur","title":"Alur","text":"<ol> <li>Pengguna mengirim <code>/register</code> \u2192 Start Activity dipanggil</li> <li>Start Activity membuat <code>WizardContext</code> dan memanggil <code>wizardActivity.start(ctx)</code></li> <li><code>start()</code> memasuki langkah awal dan mengatur <code>inputListener</code> untuk melacak langkah saat ini</li> <li>Pengguna mengirim pesan \u2192 Input Activity dipanggil</li> <li>Input Activity memanggil <code>wizardActivity.handleInput(ctx)</code></li> <li><code>handleInput()</code> memvalidasi input, menyimpan status, dan beralih ke langkah berikutnya</li> <li>Proses berulang hingga <code>Transition.Finish</code> dikembalikan</li> </ol>"},{"location":"id/FSM-and-Conversation-handling/#persistensi-status","title":"Persistensi Status","text":"<ul> <li>Status disimpan setelah validasi berhasil (sebelum transisi)</li> <li>Nilai kembalian <code>store()</code> dari setiap langkah disimpan menggunakan <code>WizardStateManager</code> yang cocok</li> <li>Status di-scope per pengguna dan chat (<code>UserChatReference</code>)</li> </ul>"},{"location":"id/FSM-and-Conversation-handling/#praktik-terbaik","title":"Praktik Terbaik","text":""},{"location":"id/FSM-and-Conversation-handling/#1-selalu-berikan-prompt-yang-jelas","title":"1. Selalu Berikan Prompt yang Jelas","text":"<pre><code>override suspend fun onEntry(ctx: WizardContext) {\n    message { \n        \"Please enter your email address:\\n\" +\n        \"(Format: user@example.com)\" \n    }.send(ctx.user, ctx.bot)\n}\n</code></pre>"},{"location":"id/FSM-and-Conversation-handling/#2-tangani-kesalahan-validasi-dengan-baik","title":"2. Tangani Kesalahan Validasi dengan Baik","text":"<pre><code>override suspend fun onRetry(ctx: WizardContext) {\n    message { \n        \"Invalid email format. Please try again.\\n\" +\n        \"Example: user@example.com\" \n    }.send(ctx.user, ctx.bot)\n}\n</code></pre>"},{"location":"id/FSM-and-Conversation-handling/#3-gunakan-akses-status-type-safe","title":"3. Gunakan Akses Status Type-Safe","text":"<p>Lebih suka metode type-safe yang dihasilkan:</p> <pre><code>// \u2705 Bagus - type-safe\nval name: String? = ctx.getState&lt;NameStep&gt;()\n\n// \u274c Hindari - kehilangan type safety\nval name = ctx.getState(NameStep::class) as? String\n</code></pre>"},{"location":"id/FSM-and-Conversation-handling/#4-pertahankan-langkah-yang-fokus","title":"4. Pertahankan Langkah yang Fokus","text":"<p>Setiap langkah harus memiliki tanggung jawab tunggal:</p> <pre><code>// \u2705 Bagus - langkah fokus\nobject EmailStep : WizardStep {\n    // Hanya menangani pengumpulan email\n}\n\n// \u274c Hindari - terlalu banyak logika\nobject PersonalInfoStep : WizardStep {\n    // Menangani nama, email, telepon, alamat...\n}\n</code></pre>"},{"location":"id/FSM-and-Conversation-handling/#5-gunakan-nama-langkah-yang-bermakna","title":"5. Gunakan Nama Langkah yang Bermakna","text":"<pre><code>// \u2705 Bagus\nobject EmailVerificationStep : WizardStep\n\n// \u274c Hindari\nobject Step2 : WizardStep\n</code></pre>"},{"location":"id/FSM-and-Conversation-handling/#6-bersihkan-status-jika-diperlukan","title":"6. Bersihkan Status Jika Diperlukan","text":"<p>Jika Anda perlu menghapus status secara manual:</p> <pre><code>object CancelStep : WizardStep {\n    override suspend fun onEntry(ctx: WizardContext) {\n        // Hapus semua status wizard\n        ctx.delState&lt;NameStep&gt;()\n        ctx.delState&lt;AgeStep&gt;()\n\n        message { \"Registration cancelled.\" }.send(ctx.user, ctx.bot)\n    }\n}\n</code></pre>"},{"location":"id/FSM-and-Conversation-handling/#ringkasan","title":"Ringkasan","text":"<p>Sistem Wizard menyediakan: - \u2705 Type-safe manajemen status dengan pemeriksaan waktu kompilasi - \u2705 Declarative definisi langkah sebagai kelas bersarang - \u2705 Flexible transisi dengan logika bersyarat - \u2705 Automatic generasi kode via KSP - \u2705 Integrated dengan sistem Activity yang ada - \u2705 Pluggable backend penyimpanan status</p> <p>Mulailah membangun wizard dengan menganotasi kelas dengan <code>@WizardHandler</code> dan mendefinisikan langkah-langkah Anda sebagai objek <code>WizardStep</code> bersarang!</p>"},{"location":"id/Functional-DSL/#to-infinity-functional-dsl-and-beyond","title":"To ~~infinity~~ functional dsl and beyond!","text":"<p>Bot mendukung pengaturan konteks baik berbasis anotasi maupun functional dsl. Anda dapat menggabungkan kedua pendekatan tersebut.</p>"},{"location":"id/Functional-DSL/#functional-dsl","title":"Functional DSL","text":"<p>Functional DSL adalah cara berbeda untuk mendefinisikan konteks bot.</p> <p>Contoh:</p> <pre><code>suspend fun main() {\n    val bot = TelegramBot(\"BOT_TOKEN\")\n\n    bot.setFunctionality {\n        onChosenInlineResult {\n            println(\"got a result ${update.chosenInlineResult.resultId} from ${update.user}\")\n        }\n    }\n}\n</code></pre>"},{"location":"id/Functional-DSL/#commands-dan-inputs","title":"Commands dan Inputs","text":"<p>Anda dapat menangani baik <code>commands</code> maupun <code>inputs</code> menggunakan functional DSL.</p>"},{"location":"id/Functional-DSL/#commands","title":"Commands","text":"<pre><code>suspend fun main() {\n    val bot = TelegramBot(\"BOT_TOKEN\")\n\n    bot.setFunctionality {\n        // Regular command\n        onCommand(\"/start\") {\n            message { \"Hello\" }.send(user, bot)\n        }\n\n        // Regex-based command matching\n        onCommand(\"\"\"(red|green|blue)\"\"\".toRegex()) {\n            message { \"you typed ${update.text} color\" }.send(user, bot)\n        }\n    }\n}\n</code></pre> <p>Pada <code>onCommand</code>, parameter yang diurai tersedia sebagai <code>Map&lt;String, String&gt;</code> berdasarkan konfigurasi Anda.</p>"},{"location":"id/Functional-DSL/#inputs","title":"Inputs","text":"<p>Anda dapat menggunakan inputs melalui <code>bot.inputListener</code>.</p> <pre><code>suspend fun main() {\n    val bot = TelegramBot(\"BOT_TOKEN\")\n\n    bot.setFunctionality {\n        onCommand(\"/start\") {\n            message { \"Hello, what's your name?\" }.send(user, bot)\n            bot.inputListener[user] = \"testInput\"\n        }\n\n        onInput(\"testInput\") {\n            message { \"Hey, nice to meet you, ${update.text}\" }.send(user, bot)\n        }\n    }\n}\n</code></pre>"},{"location":"id/Functional-DSL/#input-chains","title":"Input Chains","text":"<p>Untuk alur input multi-langkah, gunakan <code>inputChain</code>:</p> <pre><code>bot.setFunctionality {\n    inputChain(\"conversation\") {\n        message { \"Nice to meet you, ${update.text}\" }.send(user, bot)\n        message { \"What is your favorite food?\" }.send(user, bot)\n    }.breakIf({ update.text == \"peanut butter\" }) { // chain break condition\n        message { \"Oh, too bad, I'm allergic to it.\" }.send(user, bot)\n        // action that will be applied when condition matches\n    }.andThen {\n        // next input point if break condition doesn't match\n        message { \"Great choice!\" }.send(user, bot)\n    }\n}\n</code></pre> <p>Chain secara otomatis melanjutkan ke langkah berikutnya kecuali kondisi break terpenuhi. Jika kondisi break cocok dan <code>repeat</code> adalah <code>true</code> (default), pengguna tetap pada langkah saat ini.</p>"},{"location":"id/Functional-DSL/#update-type-handlers","title":"Update Type Handlers","text":"<p>Tangani tipe update tertentu secara langsung:</p> <pre><code>bot.setFunctionality {\n    onUpdate(UpdateType.MESSAGE, UpdateType.CALLBACK_QUERY) {\n        // Handle both message and callback query updates\n        println(\"Received update: ${update.type}\")\n    }\n}\n</code></pre>"},{"location":"id/Functional-DSL/#common-matchers","title":"Common Matchers","text":"<p>Cocokkan konten teks (bukan hanya commands) menggunakan <code>common</code>:</p> <pre><code>bot.setFunctionality {\n    // String matching\n    common(\"hello\") {\n        message { \"Hi there!\" }.send(user, bot)\n    }\n\n    // Regex matching\n    common(\"\"\"\\d+\"\"\".toRegex()) {\n        message { \"You sent a number!\" }.send(user, bot)\n    }\n}\n</code></pre>"},{"location":"id/Functional-DSL/#fallback-handler","title":"Fallback Handler","text":"<p>Tangani updates yang tidak diproses oleh handler manapun:</p> <pre><code>bot.setFunctionality {\n    whenNotHandled {\n        message { \"I didn't understand that.\" }.send(user, bot)\n    }\n}\n</code></pre>"},{"location":"id/Functional-DSL/#rate-limiting","title":"Rate Limiting","text":"<p>Terapkan batasan rate ke handler manapun:</p> <pre><code>bot.setFunctionality {\n    onCommand(\"/expensive\", rateLimits = RateLimits(5, 60)) {\n        // This command can only be called 5 times per 60 seconds\n        message { \"Processing...\" }.send(user, bot)\n    }\n}\n</code></pre>"},{"location":"id/Functional-DSL/#guards","title":"Guards","text":"<p>Gunakan guards untuk menambahkan logika validasi kustom:</p> <pre><code>bot.setFunctionality {\n    onCommand(\"/admin\", guard = AdminGuard::class) {\n        message { \"Admin command executed\" }.send(user, bot)\n    }\n}\n</code></pre>"},{"location":"id/Functional-DSL/#argument-parsing","title":"Argument Parsing","text":"<p>Kustomisasi cara argumen command diurai:</p> <pre><code>bot.setFunctionality {\n    onCommand(\"/custom\", argParser = CustomArgParser::class) {\n        // parameters will be parsed using CustomArgParser\n        message { \"Parameters: $parameters\" }.send(user, bot)\n    }\n}\n</code></pre>"},{"location":"id/Functional-DSL/#menggabungkan-functional-dan-annotation-based-setting","title":"Menggabungkan Functional dan Annotation-Based setting","text":"<p>Anda dapat menggunakan kedua pendekatan dalam bot yang sama:</p> <pre><code>// Annotation-based handler\n@CommandHandler([\"/register\"])\nsuspend fun register(ctx: CommandContext) {\n    message { \"Registration started\" }.send(ctx.user, ctx.bot)\n}\n\n// Functional handler\nbot.setFunctionality {\n    onCommand(\"/help\") {\n        message { \"Available commands: /register, /help\" }.send(user, bot)\n    }\n}\n</code></pre> <p>Kedua handler terdaftar dalam <code>ActivityRegistry</code> yang sama dan bekerja secara seamless bersama-sama.</p>"},{"location":"id/Functional-DSL/#lihat-juga","title":"Lihat juga","text":"<ul> <li>Action</li> <li>Useful utilities</li> </ul>"},{"location":"id/Guards/#pengantar","title":"Pengantar","text":"<p>Guards adalah fitur penting bagi pengembang yang membuat bot. Guards ini berfungsi sebagai pemeriksaan pra-eksekusi yang menentukan apakah perintah tertentu harus dipanggil. Dengan menerapkan pemeriksaan ini, pengembang dapat meningkatkan fungsionalitas, keamanan, dan pengalaman pengguna bot mereka.</p>"},{"location":"id/Guards/#tujuan-activity-guards","title":"Tujuan Activity Guards","text":"<p>Tujuan utama activity guards adalah untuk memastikan bahwa hanya pengguna yang berwenang atau kondisi tertentu yang memicu sebuah activity.</p> <p>Hal ini dapat mencegah penyalahgunaan, menjaga integritas bot, dan merampingkan interaksi.</p>"},{"location":"id/Guards/#kasus-penggunaan-umum","title":"Kasus Penggunaan Umum","text":"<ol> <li>Otentikasi dan Otorisasi: Memastikan hanya pengguna tertentu yang dapat mengakses perintah tertentu.</li> <li>Pemeriksaan Pra-kondisi: Memverifikasi bahwa kondisi tertentu terpenuhi sebelum mengeksekusi sebuah activity (misalnya, memastikan pengguna berada dalam status atau konteks tertentu).</li> <li>Guards Kontekstual: Membuat keputusan berdasarkan status obrolan atau pengguna saat ini.</li> </ol>"},{"location":"id/Guards/#strategi-implementasi","title":"Strategi Implementasi","text":"<p>Menerapkan Telegram Command Guards biasanya melibatkan penulisan fungsi atau metode yang mengenkapsulasi logika untuk setiap guard. Berikut adalah strategi umum:</p> <ol> <li>Pemeriksaan Peran Pengguna:</li> <li> <p>Memastikan pengguna memiliki peran yang diperlukan (misalnya, admin, moderator) sebelum mengeksekusi perintah.       <pre><code> override suspend fun condition(user: User?, update: ProcessedUpdate, bot: TelegramBot): Boolean {\n  // Periksa apakah pengguna adalah admin dalam obrolan yang diberikan\n }\n</code></pre></p> </li> <li> <p>Verifikasi Status:</p> </li> <li> <p>Memeriksa status pengguna sebelum mengizinkan eksekusi perintah.      <pre><code>override suspend fun condition(user: User?, update: ProcessedUpdate, bot: TelegramBot): Boolean {\n   return bot.userData[user.id, \"data\"] == requiredState\n}\n</code></pre></p> </li> <li> <p>Guards Kustom:</p> </li> <li>Membuat logika kustom berdasarkan persyaratan spesifik.      <pre><code>override suspend fun condition(user: User?, update: ProcessedUpdate, bot: TelegramBot): Boolean {\n   // Logika kustom untuk menentukan apakah perintah harus dieksekusi\n}\n</code></pre></li> </ol>"},{"location":"id/Guards/#mengintegrasikan-guards-dengan-activities","title":"Mengintegrasikan Guards dengan Activities","text":"<p>Untuk mengintegrasikan guards ini dengan perintah bot Anda, Anda dapat membuat guard yang memeriksa kondisi-kondisi ini sebelum handler perintah dipanggil.</p>"},{"location":"id/Guards/#contoh-implementasi","title":"Contoh Implementasi","text":"<pre><code>// definisikan di suatu tempat kelas guard Anda yang mengimplementasikan interface Guard\nobject YourGuard : Guard {\n    override suspend fun condition(user: User?, update: ProcessedUpdate, bot: TelegramBot): Boolean {\n        // tulis kondisi Anda di sini\n    }\n}\n\n// ...\n\n@CommandHandler([\"yourCommand\"])\n@Guard(YourGuard::class) // InputHandler juga didukung\nfun command(bot: TelegramBot) {\n   // tubuh perintah\n}\n</code></pre>"},{"location":"id/Guards/#praktik-terbaik","title":"Praktik Terbaik","text":"<ul> <li>Modularitas: Jaga agar logika guard tetap modular dan terpisah dari activities.</li> <li>Reusability: Tulis fungsi guard yang dapat digunakan kembali yang dapat dengan mudah diterapkan di berbagai perintah/input.</li> <li>Efisiensi: Optimalkan pemeriksaan guard untuk meminimalkan overhead kinerja.</li> <li>Umpan Balik Pengguna: Berikan umpan balik yang jelas kepada pengguna ketika perintah diblokir oleh guard.</li> </ul>"},{"location":"id/Guards/#kesimpulan","title":"Kesimpulan","text":"<p>Activity Guards adalah alat yang ampuh untuk mengelola eksekusi perintah/input bot.</p> <p>Dengan menerapkan mekanisme guard yang kuat, pengembang dapat memastikan bot mereka beroperasi secara aman dan efisien, memberikan pengalaman pengguna yang lebih baik.</p>"},{"location":"id/Guards/#lihat-juga","title":"Lihat juga","text":"<ul> <li>Activities and Proccessors</li> <li>Update parsing</li> <li>Actions</li> <li>Activity invocation</li> </ul>"},{"location":"id/Handlers/#variety-of-handlers","title":"Variety of Handlers","text":"<p>Dalam pengembangan bot, khususnya dalam sistem yang melibatkan interaksi pengguna, sangat penting untuk mengelola dan memproses perintah dan event secara efisien.</p> <p>Anotasi-anotasi ini menandai fungsi yang dirancang untuk memproses perintah, input, atau update tertentu dan menyediakan metadata seperti kata kunci perintah, scope, dan guards.</p>"},{"location":"id/Handlers/#commandhandler","title":"CommandHandler","text":"<p>Anotasi <code>CommandHandler</code> digunakan untuk menandai fungsi yang memproses perintah tertentu. Anotasi ini menyertakan properti yang mendefinisikan kata kunci dan scope perintah.</p> <ul> <li>value: Menentukan kata kunci yang terkait dengan perintah.</li> <li>scope: Menentukan konteks atau scope di mana perintah akan diperiksa.</li> </ul> <pre><code>@CommandHandler([\"text\"])\nsuspend fun test(user: User, bot: TelegramBot) {\n    //...\n}\n</code></pre>"},{"location":"id/Handlers/#commandhandlercallbackquery","title":"CommandHandler.CallbackQuery","text":"<p>Versi khusus dari anotasi <code>CommandHandler</code> yang dirancang khusus untuk menangani callback queries. Ini menyertakan properti yang mirip dengan <code>CommandHandler</code>, dengan fokus pada perintah yang terkait callback.</p> <p>Sebenarnya sama saja dengan hanya <code>@CommandHandler</code> dengan preset <code>UpdateType.CALLBACK_QUERY</code> scope.</p> <ul> <li>value: Menentukan kata kunci yang terkait dengan perintah.</li> <li>autoAnswer: Membalas <code>callbackQuery</code> secara otomatis (memanggil <code>answerCallbackQuery</code> sebelum penanganan).</li> </ul> <pre><code>@CommandHandler.CallbackQuery([\"text\"])\nsuspend fun test(user: User, bot: TelegramBot) {\n    //...\n}\n</code></pre>"},{"location":"id/Handlers/#commonhandler","title":"CommonHandler","text":"<p>Anotasi <code>CommonHandler</code> ditujukan untuk fungsi yang memproses perintah dengan prioritas lebih rendah dibandingkan <code>CommandHandler</code> dan <code>InputHandler</code>. Ini digunakan pada level sumber dan menyediakan cara fleksibel untuk mendefinisikan common command handlers.</p> <p>Perhatikan, prioritas hanya berlaku dalam <code>@CommonHandler</code> itu sendiri (tidak mempengaruhi handler lain).</p>"},{"location":"id/Handlers/#commonhandlertext","title":"CommonHandler.Text","text":"<p>Anotasi ini menentukan pencocokan teks terhadap update. Ini menyertakan properti untuk mendefinisikan teks yang dicocokkan, kondisi filtering, prioritas, dan scope.</p> <ul> <li>value: Teks yang dicocokkan dengan update masuk.</li> <li>filter: Kelas yang mendefinisikan kondisi yang digunakan dalam proses pencocokan.</li> <li>priority: Tingkat prioritas handler, dimana 0 adalah prioritas tertinggi.</li> <li>scope: Konteks atau scope di mana pencocokan teks akan diperiksa.</li> </ul> <pre><code>@CommonHandler.Text([\"text\"], filter = isNewUserFilter::class, priority = 10)\nsuspend fun test(user: User, bot: TelegramBot) {\n    //...\n}\n</code></pre>"},{"location":"id/Handlers/#commonhandlerregex","title":"CommonHandler.Regex","text":"<p>Mirip dengan <code>CommonHandler.Text</code>, anotasi ini digunakan untuk mencocokkan update berdasarkan regular expressions. Ini menyertakan properti untuk mendefinisikan pola regex, opsi, kondisi filtering, prioritas, dan scope.</p> <ul> <li>value: Pola regex yang digunakan untuk pencocokan.</li> <li>options: Opsi regex yang memodifikasi perilaku pola regex.</li> <li>filter: Kelas yang mendefinisikan kondisi yang digunakan dalam proses pencocokan.</li> <li>priority: Tingkat prioritas handler, dimana 0 adalah prioritas tertinggi.</li> <li>scope: Konteks atau scope di mana pencocokan regex akan diperiksa.</li> </ul> <pre><code>@CommonHandler.Regex(\"^\\d+$\", scope = [UpdateType.EDITED_MESSAGE])\nsuspend fun test(update: EditedMessageUpdate, user: User, bot: TelegramBot) {\n    //...\n}\n</code></pre>"},{"location":"id/Handlers/#inputhandler","title":"InputHandler","text":"<p>Anotasi <code>InputHandler</code> menandai fungsi yang memproses event input tertentu. Ini ditujukan untuk fungsi yang menangani input saat runtime dan menyertakan properti untuk mendefinisikan kata kunci input dan scope.</p> <ul> <li>value: Menentukan kata kunci yang terkait dengan event input.</li> </ul> <pre><code>@InputHandler(\"text\")\nsuspend fun test(update: ProcessedUpdate, user: User, bot: TelegramBot) {\n    //...\n}\n</code></pre>"},{"location":"id/Handlers/#unprocessedhandler","title":"UnprocessedHandler","text":"<p>Anotasi <code>UnprocessedHandler</code> digunakan untuk menandai fungsi yang menangani update yang tidak diproses oleh handler lain. Ini memastikan bahwa update yang tidak diproses dikelola dengan tepat, dengan hanya satu titik pemrosesan yang mungkin untuk tipe handler ini.</p> <pre><code>@UnprocessedHandler\nsuspend fun test(update: ProcessedUpdate, user: User, bot: TelegramBot) {\n    //...\n}\n</code></pre>"},{"location":"id/Handlers/#updatehandler","title":"UpdateHandler","text":"<p>Anotasi <code>UpdateHandler</code> menandai fungsi yang menangani tipe update masuk tertentu. Ini menyediakan cara untuk mengkategorikan dan memproses berbagai tipe update secara sistematis.</p> <ul> <li>type: Menentukan tipe update yang akan diproses oleh fungsi handler.</li> </ul> <pre><code>@UpdateHandler([UpdateType.PRE_CHECKOUT_QUERY])\nsuspend fun test(update: PreCheckoutQueryUpdate, user: User, bot: TelegramBot) {\n    //...\n}\n</code></pre>"},{"location":"id/Handlers/#handler-companion-annotations","title":"Handler Companion Annotations","text":"<p>Ada juga anotasi tambahan yang opsional untuk handler, melengkapi perilaku opsional dari handler itu sendiri.</p> <p>Mereka dapat ditempatkan baik pada fungsi yang handler diterapkan maupun pada kelas, dalam kasus terakhir mereka akan diterapkan secara otomatis ke semua handler dalam kelas tersebut, tetapi jika diperlukan dimungkinkan untuk memiliki perilaku terpisah untuk beberapa fungsi.</p> <p>Misalnya, penerapan memiliki prioritas seperti ini, <code>Function</code> &gt; <code>Class</code>, dimana fungsi memiliki prioritas lebih tinggi.</p>"},{"location":"id/Handlers/#rate-limiting","title":"Rate Limiting","text":"<p>Selain itu, mari juga bahas mekanisme rate limiting yang dijelaskan dalam anotasi.</p> <p>Anda dapat mengatur batasan umum untuk setiap pengguna:</p> <pre><code>// ...\nval bot = TelegramBot(\"BOT_TOKEN\") {\n    rateLimiter { // batasan umum\n        limits = RateLimits(period = 10000, rate = 5)\n    }\n}\n</code></pre>"},{"location":"id/Handlers/#handler-specific","title":"Handler specific","text":"<p>Batasan pada tindakan tertentu dapat didefinisikan menggunakan anotasi <code>RateLimits</code>, didukung <code>@CommandHandler</code>, <code>@CommandHandler.CallbackQuery</code>, <code>@InputHandler</code>, <code>@CommonHandler</code>.</p> <pre><code>@CommandHandler([\"/start\"])\n@RateLimits(period = 1000L, rate = 1L)\nsuspend fun start(user: User, bot: TelegramBot) {\n    // ...\n}\n</code></pre>"},{"location":"id/Handlers/#guard","title":"Guard","text":"<p>Anda dapat mendefinisikan guards secara terpisah untuk mengontrol akses ke handler, didukung <code>@CommandHandler</code>, <code>@CommandHandler.CallbackQuery</code>, <code>@InputHandler</code> :</p> <pre><code>@CommandHandler([\"text\"])\n@Guard(isAdminGuard::class)\nsuspend fun test(user: User, bot: TelegramBot) {\n    //...\n}\n</code></pre>"},{"location":"id/Handlers/#argparser","title":"ArgParser","text":"<p>Anda dapat mendefinisikan custom argument parser secara terpisah untuk mengubah perilaku parsing parameter untuk handler, didukung <code>@CommandHandler</code>, <code>@CommandHandler.CallbackQuery</code>, <code>@CommonHandler</code>:</p> <pre><code>@CommandHandler([\"text\"])\n@ArgParser(SpaceArgParser::class)\nsuspend fun test(user: User, bot: TelegramBot) {\n    //...\n}\n</code></pre> <p>lihat juga <code>defaultArgParser</code></p>"},{"location":"id/Handlers/#conclusion","title":"Conclusion","text":"<p>Anotasi-anotasi ini menyediakan alat yang robust dan fleksibel untuk menangani perintah, input, dan event, sambil memungkinkan konfigurasi terpisah untuk rate limits dan guards, meningkatkan struktur dan maintainability pengembangan bot secara keseluruhan.</p>"},{"location":"id/Interceptors-%28middleware%29/#interceptors-logika-lintas-kepentingan-untuk-bot-anda","title":"Interceptors: Logika Lintas-Kepentingan untuk Bot Anda","text":"<p>Saat membangun bot Telegram, Anda sering mengulang setup, pengecekan, atau pembersihan di seluruh handler. Interceptors memungkinkan Anda memasang logika bersama di sekitar handler, menjaga handler tetap fokus dan mudah dikelola.</p> <p>Inilah cara interceptors bekerja di telegram-bot dan cara menggunakannya.</p>"},{"location":"id/Interceptors-%28middleware%29/#apa-itu-interceptors-penjelasan-sederhana","title":"Apa Itu Interceptors? (Penjelasan Sederhana)","text":"<p>Interceptors adalah fungsi yang berjalan pada titik-titik tertentu dalam pipeline pemrosesan update. Mereka memungkinkan Anda: - Memeriksa dan memodifikasi konteks pemrosesan - Menambahkan logika lintas-kepentingan (logging, auth, metrik) - Menghentikan pemrosesan lebih awal jika diperlukan - Membersihkan sumber daya setelah pemrosesan</p> <p>Bayangkan interceptors sebagai pos pemeriksaan yang dilewati setiap update sebelum, selama, dan setelah eksekusi handler.</p>"},{"location":"id/Interceptors-%28middleware%29/#pipeline-pemrosesan","title":"Pipeline Pemrosesan","text":"<p>Bot memproses update melalui pipeline dengan tujuh fase:</p> Fase Kapan Dijalankan Apa yang Dapat Digunakan Setup Segera setelah update tiba, sebelum pemrosesan \u2714 Pembatasan laju global\u2714 Filter spam atau update tidak valid\u2714 Logging awal\u2714 Setup konteks bersama Parsing Setelah setup, mengekstrak perintah dan parameter \u2714 Parsing perintah kustom\u2714 Perkaya konteks dengan data yang diparsing\u2714 Validasi struktur update Match Menemukan handler yang sesuai (Command/Input/Common) \u2714 Override pemilihan handler\u2714 Logika penanganan input kustom\u2714 Log handler yang cocok Validation Setelah handler ditemukan, sebelum dipanggil \u2714 Izin khusus handler\u2714 Pembatasan laju per handler\u2714 Pengecekan guard\u2714 Batalkan pemrosesan jika kondisi tidak terpenuhi PreInvoke Segera sebelum handler berjalan \u2714 Pengecekan menit terakhir\u2714 Mulai timer/metrik\u2714 Perkaya konteks untuk handler\u2714 Modifikasi perilaku handler Invoke Handler dieksekusi di sini \u2714 Bungkus eksekusi handler\u2714 Penanganan error\u2714 Logging hasil handler PostInvoke Setelah handler selesai (berhasil atau gagal) \u2714 Bersihkan sumber daya\u2714 Log hasil\u2714 Kirim pesan fallback pada error\u2714 Modifikasi hasil sebelum dikembalikan"},{"location":"id/Interceptors-%28middleware%29/#membuat-interceptor","title":"Membuat Interceptor","text":"<p>Interceptor adalah fungsi sederhana yang menerima <code>ProcessingContext</code>:</p> <pre><code>import eu.vendeli.tgbot.core.PipelineInterceptor\nimport eu.vendeli.tgbot.types.component.ProcessingContext\n\nval myInterceptor: PipelineInterceptor = { context -&gt;\n    // Logika Anda di sini\n    println(\"Processing update: ${context.update.updateId}\")\n}\n</code></pre> <p>Atau menggunakan lambda:</p> <pre><code>val loggingInterceptor = PipelineInterceptor { context -&gt;\n    val logger = context.bot.config.loggerFactory.get(\"MyInterceptor\")\n    logger.info(\"Processing update #${context.update.updateId}\")\n}\n</code></pre>"},{"location":"id/Interceptors-%28middleware%29/#mendaftarkan-interceptors","title":"Mendaftarkan Interceptors","text":"<p>Daftarkan interceptors pada pipeline pemrosesan:</p> <pre><code>suspend fun main() {\n    val bot = TelegramBot(\"BOT_TOKEN\")\n\n    // Daftarkan interceptor untuk fase Setup\n    bot.update.pipeline.intercept(ProcessingPipePhase.Setup) { context -&gt;\n        // Cek apakah user diblokir\n        val user = context.update.userOrNull\n        if (user != null &amp;&amp; isBanned(user.id)) {\n            context.finish() // Hentikan pemrosesan\n            return@intercept\n        }\n    }\n\n    // Daftarkan interceptor untuk fase PreInvoke\n    bot.update.pipeline.intercept(ProcessingPipePhase.PreInvoke) { context -&gt;\n        val startTime = System.currentTimeMillis()\n        // simpan waktu mulai\n    }\n\n    // Daftarkan interceptor untuk fase PostInvoke\n    bot.update.pipeline.intercept(ProcessingPipePhase.PostInvoke) { context -&gt;\n        val startTime = // dapatkan waktu mulai\n        if (startTime != null) {\n            val duration = System.currentTimeMillis() - startTime\n            println(\"Handler took ${duration}ms\")\n        }\n    }\n\n    bot.handleUpdates()\n}\n</code></pre>"},{"location":"id/Interceptors-%28middleware%29/#contoh-dunia-nyata-authentication-metrics","title":"Contoh Dunia Nyata: Authentication &amp; Metrics","text":"<p>Contoh: bot yang memerlukan autentikasi untuk perintah tertentu, mengukur waktu eksekusi handler, dan melog semua perintah.</p> <pre><code>suspend fun main() {\n    val bot = TelegramBot(\"BOT_TOKEN\")\n\n    // Fase Setup: Cek apakah user terautentikasi\n    bot.update.pipeline.intercept(ProcessingPipePhase.Setup) { context -&gt;\n        val user = context.update.userOrNull ?: return@intercept\n\n        if (!isAuthenticated(user.id)) {\n            message { \"Please authenticate first using /login\" }\n                .send(user, context.bot)\n            context.finish()\n        }\n    }\n\n    // Fase PreInvoke: Mulai timer dan cek izin\n    bot.update.pipeline.intercept(ProcessingPipePhase.PreInvoke) { context -&gt;\n        val activity = context.activity ?: return@intercept\n        val user = context.update.userOrNull ?: return@intercept\n\n        // Cek apakah user memiliki izin untuk handler spesifik ini\n        if (!hasPermission(user.id, activity)) {\n            message { \"You don't have permission to use this command.\" }\n                .send(user, context.bot)\n            context.finish()\n            return@intercept\n        }\n\n        // Mulai timer\n        // simpan waktu mulai\n    }\n\n    // Fase PostInvoke: Log dan cleanup\n    bot.update.pipeline.intercept(ProcessingPipePhase.PostInvoke) { context -&gt;\n        val activity = context.activity ?: return@intercept\n        val startTime = // dapatkan waktu mulai\n\n        if (startTime != null) {\n            val duration = System.currentTimeMillis() - startTime\n            val logger = context.bot.config.loggerFactory.get(\"Metrics\")\n            logger.info(\n                \"Handler ${activity::class.simpleName} took ${duration}ms \" +\n                \"for user ${context.update.userOrNull?.id}\"\n            )\n        }\n    }\n\n    bot.handleUpdates()\n}\n</code></pre>"},{"location":"id/Interceptors-%28middleware%29/#processingcontext","title":"ProcessingContext","text":"<p><code>ProcessingContext</code> menyediakan akses ke:</p> <ul> <li><code>update: ProcessedUpdate</code> - Update yang sedang diproses</li> <li><code>bot: TelegramBot</code> - Instance bot</li> <li><code>registry: ActivityRegistry</code> - Registry aktivitas</li> <li><code>parsedInput: String</code> - Teks input/perintah yang diparsing</li> <li><code>parameters: Map&lt;String, String&gt;</code> - Parameter perintah yang diparsing</li> <li><code>activity: Activity?</code> - Handler yang diresolusi (null hingga fase Match)</li> <li><code>shouldProceed: Boolean</code> - Apakah pemrosesan harus dilanjutkan</li> <li><code>additionalContext: AdditionalContext</code> - Data konteks tambahan</li> <li><code>finish()</code> - Hentikan pemrosesan lebih awal</li> </ul>"},{"location":"id/Interceptors-%28middleware%29/#menghentikan-pemrosesan-lebih-awal","title":"Menghentikan Pemrosesan Lebih Awal","text":"<p>Panggil <code>context.finish()</code> untuk menghentikan pemrosesan:</p> <pre><code>bot.update.pipeline.intercept(ProcessingPipePhase.Validation) { context -&gt;\n    if (someCondition) {\n        context.finish() // Tidak ada fase selanjutnya yang akan dieksekusi\n    }\n}\n</code></pre>"},{"location":"id/Interceptors-%28middleware%29/#menyimpan-data-kustom","title":"Menyimpan Data Kustom","text":"<p>Gunakan <code>additionalContext</code> untuk mengirim data antar interceptors:</p> <pre><code>// Di PreInvoke\ncontext.additionalContext[\"userId\"] = context.update.userOrNull?.id\n\n// Di PostInvoke\nval userId = context.additionalContext[\"userId\"] as? Long\n</code></pre>"},{"location":"id/Interceptors-%28middleware%29/#multiple-interceptors","title":"Multiple Interceptors","text":"<p>Anda dapat mendaftarkan multiple interceptors untuk fase yang sama. Mereka dieksekusi dalam urutan pendaftaran:</p> <pre><code>bot.update.pipeline.intercept(ProcessingPipePhase.Setup) { context -&gt;\n    println(\"First interceptor\")\n}\n\nbot.update.pipeline.intercept(ProcessingPipePhase.Setup) { context -&gt;\n    println(\"Second interceptor\")\n}\n\n// Saat update diproses:\n// Output: \"First interceptor\"\n// Output: \"Second interceptor\"\n</code></pre> <p>Jika interceptor memanggil <code>context.finish()</code>, interceptors selanjutnya di fase tersebut akan dilewati, dan fase selanjutnya tidak akan dieksekusi.</p>"},{"location":"id/Interceptors-%28middleware%29/#1-gunakan-fase-yang-tepat","title":"1. Gunakan Fase yang Tepat","text":"<ul> <li>Setup: Pengecekan global, filtering, setup awal</li> <li>Parsing: Logika parsing kustom</li> <li>Match: Logika pemilihan handler</li> <li>Validation: Izin, pembatasan laju, guard</li> <li>PreInvoke: Persiapan khusus handler</li> <li>Invoke: Biasanya ditangani oleh interceptor default</li> <li>PostInvoke: Cleanup, logging, penanganan error</li> </ul>"},{"location":"id/Interceptors-%28middleware%29/#2-jaga-interceptors-tetap-fokus","title":"2. Jaga Interceptors Tetap Fokus","text":"<p>Setiap interceptor harus melakukan satu hal:</p> <pre><code>// \u2705 Baik - interceptor fokus\nbot.update.pipeline.intercept(ProcessingPipePhase.Setup) { context -&gt;\n    if (isBanned(context.update.userOrNull?.id)) {\n        context.finish()\n    }\n}\n\n// \u274c Hindari - melakukan terlalu banyak\nbot.update.pipeline.intercept(ProcessingPipePhase.Setup) { context -&gt;\n    // Authentication\n    // Logging\n    // Metrics\n    // Rate limiting\n    // ... terlalu banyak!\n}\n</code></pre>"},{"location":"id/Interceptors-%28middleware%29/#3-tangani-error-dengan-elegan","title":"3. Tangani Error dengan Elegan","text":"<p>Interceptors tidak boleh crash bot:</p> <pre><code>bot.update.pipeline.intercept(ProcessingPipePhase.PreInvoke) { context -&gt;\n    try {\n        // Logika Anda\n    } catch (e: Exception) {\n        val logger = context.bot.config.loggerFactory.get(\"Interceptor\")\n        logger.error(\"Interceptor error\", e)\n        // Jangan panggil context.finish() kecuali Anda ingin menghentikan pemrosesan\n    }\n}\n</code></pre>"},{"location":"id/Interceptors-%28middleware%29/#4-bersihkan-sumber-daya","title":"4. Bersihkan Sumber Daya","text":"<p>Jika Anda membuka sumber daya di <code>PreInvoke</code>, bersihkan di <code>PostInvoke</code>:</p> <pre><code>var timer: Timer? = null\n\nbot.update.pipeline.intercept(ProcessingPipePhase.PreInvoke) { context -&gt;\n    timer = Timer()\n    context.additionalContext[\"timer\"] = timer\n}\n\nbot.update.pipeline.intercept(ProcessingPipePhase.PostInvoke) { context -&gt;\n    val timer = context.additionalContext[\"timer\"] as? Timer\n    timer?.stop()\n}\n</code></pre>"},{"location":"id/Interceptors-%28middleware%29/#5-urutan-penting","title":"5. Urutan Penting","text":"<p>Daftarkan interceptors dalam urutan yang Anda inginkan:</p> <pre><code>// Pengecekan umum lebih dulu\nbot.update.pipeline.intercept(ProcessingPipePhase.Setup) { \n    // Pengecekan ban global\n}\n\n// Pengecekan spesifik kemudian\nbot.update.pipeline.intercept(ProcessingPipePhase.Validation) { \n    // Pengecekan izin khusus handler\n}\n</code></pre>"},{"location":"id/Interceptors-%28middleware%29/#6-gunakan-interceptors-untuk-cross-cutting-concerns","title":"6. Gunakan Interceptors untuk Cross-Cutting Concerns","text":"<p>Interceptors ideal untuk: - \u2705 Authentication/authorization - \u2705 Logging - \u2705 Metrics/performance monitoring - \u2705 Rate limiting - \u2705 Error handling - \u2705 Request/response transformation</p> <p>Untuk logika khusus handler, simpan di handler.</p>"},{"location":"id/Interceptors-%28middleware%29/#default-interceptors","title":"Default Interceptors","text":"<p>Framework menyertakan default interceptors untuk fungsionalitas inti:</p> <ul> <li>DefaultSetupInterceptor: Pembatasan laju global</li> <li>DefaultParsingInterceptor: Parsing perintah</li> <li>DefaultMatchInterceptor: Pematching handler (commands, inputs, common matchers)</li> <li>DefaultValidationInterceptor: Guard checks dan pembatasan laju per-handler</li> <li>DefaultInvokeInterceptor: Eksekusi handler dan penanganan error</li> </ul> <p>Custom interceptors Anda berjalan bersama default ini. Anda dapat menambahkan logika sebelum atau sesudah default, tetapi Anda tidak dapat menghapus default interceptors.</p>"},{"location":"id/Interceptors-%28middleware%29/#advanced-conditional-interceptors","title":"Advanced: Conditional Interceptors","text":"<p>Anda dapat membuat interceptors kondisional:</p> <pre><code>bot.update.pipeline.intercept(ProcessingPipePhase.PreInvoke) { context -&gt;\n    val activity = context.activity ?: return@intercept\n\n    // Hanya terapkan ke handler spesifik\n    if (activity::class.simpleName?.contains(\"Admin\") == true) {\n        // Logika khusus admin\n        checkAdminPermissions(context)\n    }\n}\n</code></pre>"},{"location":"id/Interceptors-%28middleware%29/#summary","title":"Summary","text":"<p>Interceptors menyediakan cara bersih untuk menambahkan logika lintas-kepentingan ke bot Anda:</p> <ul> <li>\u2705 Tujuh fase untuk tahap pemrosesan berbeda</li> <li>\u2705 API sederhana: Cukup implementasikan <code>PipelineInterceptor</code></li> <li>\u2705 Fleksibel: Daftarkan multiple interceptors per fase</li> <li>\u2705 Kuat: Akses ke konteks pemrosesan lengkap</li> <li>\u2705 Aman: Dapat menghentikan pemrosesan lebih awal dengan <code>context.finish()</code></li> </ul> <p>Gunakan interceptors untuk menjaga handler fokus pada logika bisnis sambil menangani kepentingan bersama seperti authentication, logging, dan metrics secara terpusat.</p>"},{"location":"id/Interceptors-%28middleware%29/#see-also","title":"See also","text":"<ul> <li>Functional Handling DSL - Pemrosesan update fungsional</li> <li>Guards - Pengecekan izin level handler</li> </ul>"},{"location":"id/Update-parsing/#text-payload","title":"Text payload","text":"<p>Beberapa update mungkin memiliki payload teks yang dapat diparsing untuk pemrosesan lebih lanjut. Mari kita lihat mereka:</p> <ul> <li><code>MessageUpdate</code> -&gt; <code>message.text</code></li> <li><code>EditedMessageUpdate</code> -&gt; <code>editedMessage.text</code></li> <li><code>ChannelPostUpdate</code> -&gt; <code>channelPost.text</code></li> <li><code>EditedChannelPostUpdate</code> -&gt; <code>editedChannelPost.text</code></li> <li><code>InlineQueryUpdate</code> -&gt; <code>inlineQuery.query</code></li> <li><code>ChosenInlineResultUpdate</code> -&gt; <code>chosenInlineResult.query</code></li> <li><code>CallbackQueryUpdate</code> -&gt; <code>callbackQuery.data</code></li> <li><code>ShippingQueryUpdate</code> -&gt; <code>shippingQuery.invoicePayload</code></li> <li><code>PreCheckoutQueryUpdate</code> -&gt; <code>preCheckoutQuery.invoicePayload</code></li> <li><code>PollUpdate</code> -&gt; <code>poll.question</code></li> <li><code>PurchasedPaidMediaUpdate</code> -&gt; <code>purchasedPaidMedia.paidMediaPayload</code></li> </ul> <p>Dari update yang terdaftar, parameter tertentu dipilih dan diambil sebagai <code>TextReference</code>, untuk parsing lebih lanjut.</p>"},{"location":"id/Update-parsing/#parsing","title":"Parsing","text":"<p>Parameter yang dipilih diparsing dengan delimiter yang dikonfigurasi dengan tepat menjadi perintah dan parameter untuknya.</p> <p>Lihat konfigurasi blok <code>commandParsing</code>.</p> <p>Anda dapat melihat pada diagram di bawah komponen mana yang dipetakan ke bagian mana dari fungsi target.</p> <p> </p>"},{"location":"id/Update-parsing/#parammapping","title":"@ParamMapping","text":"<p>Ada juga anotasi yang disebut <code>@ParamMapping</code> untuk kenyamanan atau untuk kasus khusus.</p> <p>Ini memungkinkan Anda memetakan nama parameter dari teks masuk ke parameter apa pun.</p> <p>Ini juga nyaman ketika data masuk Anda terbatas, misalnya, <code>CallbackData</code> (64 karakter).</p> <p>Lihat contoh penggunaan: <code>greeting?name=Adam</code></p> <pre><code>@CommandHandler([\"greeting\"])\nsuspend fun greeting(@ParamMapping(\"name\") anyParameterName: String, user: User, bot: TelegramBot) {\n    message { \"Hello, $anyParameterName\" }.send(to = user, via = bot)\n}\n</code></pre> <p>Dan juga dapat digunakan untuk menangkap parameter tak bernama, dalam kasus di mana parser diatur sedemikian rupa sehingga nama parameter dilewati atau bahkan tidak ada, yang dilewati dengan pola 'param_n', di mana <code>n</code> adalah ordinalnya.</p> <p>Sebagai contoh teks seperti itu - <code>myCommand?p1=v1&amp;v2&amp;p3=&amp;p4=v4&amp;p5=</code>, akan diparsing menjadi: * command - <code>myCommand</code> * parameters   * <code>p1</code> = <code>v1</code>   * <code>param_2</code> = <code>v2</code>   * <code>p3</code> = <code>* `p4` = `v4`   * `p5` =</code></p> <p>Seperti yang Anda lihat karena parameter kedua tidak memiliki nama yang dideklarasikan, itu direpresentasikan sebagai <code>param_2</code>.</p> <p>Jadi Anda dapat menyingkat nama variabel dalam callback itu sendiri dan menggunakan nama yang jelas dan mudah dibaca dalam kode.</p>"},{"location":"id/Update-parsing/#deeplink","title":"Deeplink","text":"<p>Mempertimbangkan informasi dari atas, jika Anda mengharapkan deeplink dalam perintah start Anda, Anda dapat menangkapnya dengan:</p> <pre><code>@CommandHandler([\"/start\"])\nsuspend fun start(@ParamMapping(\"param_1\") deeplink: String?, user: User, bot: TelegramBot) {\n    message { \"deeplink is $deeplink\" }.send(to = user, via = bot)\n}\n</code></pre>"},{"location":"id/Update-parsing/#group-commands","title":"Group commands","text":"<p>Dalam konfigurasi <code>commandParsing</code> kita memiliki parameter <code>useIdentifierInGroupCommands</code> ketika diaktifkan, kita dapat menggunakan <code>TelegramBot.identifier</code> (jangan lupa untuk mengubahnya jika Anda menggunakan parameter yang dijelaskan) dalam proses pencocokan perintah, ini membantu memisahkan perintah serupa antara beberapa bot, jika tidak bagian <code>@MyBot</code> hanya akan dilewati.</p>"},{"location":"id/Useful-utilities-and-tips/","title":"Utilities dan Tips Berguna","text":""},{"location":"id/Useful-utilities-and-tips/#beroperasi-dengan-processedupdate","title":"Beroperasi dengan ProcessedUpdate","text":"<p><code>ProcessedUpdate</code> adalah kelas generik untuk pembaruan yang, tergantung pada data asli, dapat disediakan dalam tipe berbeda (<code>MessageUpdate</code>, <code>CallbackQueryUpdate</code>, dll.)</p> <p>Jadi Anda dapat memeriksa tipe data masuk dan lebih lanjut memanipulasi data tertentu dengan smartcasts, misalnya:</p> <pre><code>// ...\nif (update !is MessageUpdate) {\n    message { \"Only messages are allowed\" }.send(user, bot)\n    return\n}\n// Selanjutnya, ProcessedUpdate akan dianggap sebagai MessageUpdate.\n</code></pre> <p>Ada juga antarmuka <code>UserReference</code> di dalamnya yang memungkinkan Anda menentukan apakah ada referensi pengguna di dalamnya, contoh penggunaan:</p> <pre><code>val user = if(update is UserReference) update.user else null\n</code></pre> <p>Jika diperlukan di dalamnya selalu ada <code>update</code> asli di parameter update.</p>"},{"location":"id/Useful-utilities-and-tips/#dependency-injection","title":"Dependency injection","text":"<p>Pustaka menggunakan mekanisme sederhana untuk menginisialisasi kelas di mana metode pemrosesan pembaruan Anda diannotasi dengan anotasi yang disediakan.</p> <p><code>ClassManagerImpl</code> digunakan secara default untuk memanggil metode yang diannotasi.</p> <p>Tetapi jika Anda ingin menggunakan beberapa pustaka lain untuk itu Anda dapat mendefinisikan ulang antarmuka <code>ClassManager</code>, menggunakan mekanisme pilihan Anda dan meneruskannya saat menginisialisasi bot.</p> <pre><code>fun main() = runBlocking {\n    val bot = TelegramBot(\"BOT_TOKEN\", \"com.example.controllers\") {\n        classManager = ClassManagerImpl()\n    }\n\n    bot.handleUpdates()\n}\n</code></pre>"},{"location":"id/Useful-utilities-and-tips/#filtering-updates","title":"Filtering updates","text":"<p>Jika tidak ada kondisi kompleks Anda dapat dengan sederhana memfilter beberapa pembaruan untuk diproses:</p> <pre><code>// fungsi di mana kondisi filtering pembaruan didefinisikan\nfun filteringFun(update: Update): Boolean = update.message?.text.isNullOrBlank()\n\nfun main() = runBlocking {\n  val bot = TelegramBot(\"BOT_TOKEN\")\n\n  // menetapkan aliran pemrosesan yang lebih spesifik untuk pembaruan\n  bot.update.setListener {\n    if(filteringFun(it)) return@setListener\n\n    // jadi sederhana, jika listener keluar dari scope sebelum mencapai fungsi handler, itu adalah filtering.\n    // sebenarnya Anda bahkan bisa langsung menulis if-condition di sana dengan return@setListener atau memperluas filtering ke kelas terpisah.\n\n    handle(it) // atau cara penanganan manual dengan block\n  }\n}\n</code></pre> <p>untuk menyertakan filtering dalam proses pencocokan atau pengecualian perintah Anda lihat guards atau <code>@CommonHandler</code>.</p>"},{"location":"id/Useful-utilities-and-tips/#generalize-options-untuk-metode-yang-berbeda","title":"Generalize options untuk metode yang berbeda","text":"<p>Jika Anda harus menerapkan parameter opsional yang sama sering, Anda dapat menulis fungsi serupa yang sesuai untuk Anda dan meringankan kode boilerplate :)</p> <p>Beberapa properti umum dipisahkan ke antarmuka yang berbeda.</p> <pre><code>@Suppress(\"NOTHING_TO_INLINE\")\ninline fun &lt;T, R, O&gt; T.markdownMode(crossinline block: O.() -&gt; Unit = {}): T\n        where               T : TgAction&lt;R&gt;,\n                            T : OptionsFeature&lt;T, O&gt;,\n                            O : Options,\n                            O : OptionsParseMode =\n    options {\n        parseMode = ParseMode.Markdown\n        block()\n    }\n\n\n// ... dan dalam kode Anda\n\nmessage { \"test\" }.markdownMode().send(to, via)\n</code></pre>"},{"location":"id/Web-starters-%28Spring-and-Ktor%29/","title":"Web Starters (Spring Dan Ktor)","text":""},{"location":"id/Web-starters-%28Spring-and-Ktor%29/#spring-starter","title":"Spring starter","text":"<p>Modul Spring Starter untuk library adalah modul auto-configuration yang mengintegrasikan fungsionalitas bot Telegram ke dalam aplikasi Spring Boot. Ini memanfaatkan kekuatan dependency injection dan properties konfigurasi Spring Boot untuk secara otomatis mengonfigurasi bot Telegram berdasarkan konfigurasi yang diberikan. Library ini sangat berguna untuk developer yang ingin membangun bot Telegram menggunakan Kotlin dan Spring Boot, menawarkan pendekatan yang terstruktur untuk pengembangan dan manajemen bot.</p>"},{"location":"id/Web-starters-%28Spring-and-Ktor%29/#fitur-utama","title":"Fitur Utama","text":"<ul> <li>Auto-Configuration: Library secara otomatis mengonfigurasi bot Telegram berdasarkan properties konfigurasi yang diberikan, menghilangkan kebutuhan untuk setup manual.</li> <li>Properties Konfigurasi: Mendukung properties konfigurasi untuk kustomisasi mudah dari pengaturan bot, seperti token bot, nama paket, dan identifier.</li> <li>Spring Integration: Terintegrasi secara mulus dengan ekosistem Spring, memanfaatkan dependency injection dan application context Spring untuk mengelola instance bot.</li> <li>Coroutine Support: Memanfaatkan Kotlin coroutines untuk operasi bot asynchronous, memastikan eksekusi yang efisien dan non-blocking.</li> </ul>"},{"location":"id/Web-starters-%28Spring-and-Ktor%29/#getting-started","title":"Getting Started","text":"<p>Untuk menggunakan Library Spring Starter untuk Telegram Bots, Anda perlu menyertakannya sebagai dependency di proyek Spring Boot Anda. Library dirancang untuk bekerja dengan aplikasi Spring Boot dan memerlukan framework Spring Boot untuk berfungsi.</p>"},{"location":"id/Web-starters-%28Spring-and-Ktor%29/#dependency","title":"Dependency","text":"<p>Tambahkan dependency berikut ke file <code>build.gradle</code> atau <code>pom.xml</code> Anda:</p> <pre><code>dependencies {\n    implementation 'eu.vendeli:spring-starter:&lt;version&gt;'\n}\n</code></pre> <p>Ganti <code>&lt;version&gt;</code> dengan versi terbaru dari library.</p>"},{"location":"id/Web-starters-%28Spring-and-Ktor%29/#configuration","title":"Configuration","text":"<p>Library menggunakan Spring Boot's <code>@ConfigurationProperties</code> untuk mengikat properties konfigurasi. Anda dapat mendefinisikan konfigurasi bot Anda di file <code>application.properties</code> atau <code>application.yml</code> dari aplikasi Spring Boot Anda.</p> <pre><code>ktgram:\n autoStartPolling: true\n shareHttpClient: true\n bot:\n    - token: YOUR_BOT_TOKEN\n      pckg: com.example.bot\n      identifier: MyBot\n</code></pre>"},{"location":"id/Web-starters-%28Spring-and-Ktor%29/#usage","title":"Usage","text":"<p>Setelah library disertakan dan dikonfigurasi, secara otomatis membuat dan mengonfigurasi instance bot Telegram berdasarkan konfigurasi yang diberikan.</p> <p>Ini juga mendukung multiple bot instances, untuk menginisialisasi beberapa instance cukup deklarasikan sebagai entry baru di section bot:</p> <pre><code>ktgram:\n bot:\n    - token: YOUR_BOT_TOKEN\n    - token: SECOND_BOT_TOKEN\n</code></pre>"},{"location":"id/Web-starters-%28Spring-and-Ktor%29/#advanced-configuration","title":"Advanced Configuration","text":"<p>Untuk konfigurasi yang lebih advance, seperti menyesuaikan perilaku bot atau mengintegrasikan dengan komponen Spring lainnya, Anda dapat memperluas kelas <code>BotConfiguration</code> dan mengubah konfigurasi bot melalui method <code>applyCfg</code>, Anda dapat melihat contoh di sana.</p> <p>Tip</p> <p>Untuk mengonfigurasi setiap instance yang diinisialisasi dengan konfigurasi custom, bedakan mereka dengan identifier mereka (kelas BotConfiguration juga memiliki identifier).</p>"},{"location":"id/Web-starters-%28Spring-and-Ktor%29/#ktor","title":"Ktor","text":"<p>Modul ini dirancang untuk memfasilitasi pembuatan webhook server untuk Telegram bots. Ini memungkinkan developer untuk mengonfigurasi server, termasuk pengaturan SSL/TLS, dan mendeklarasikan multiple Telegram bots dengan konfigurasi custom. Proses setup fleksibel, memungkinkan developer untuk menyesuaikan server sesuai kebutuhan spesifik mereka.</p>"},{"location":"id/Web-starters-%28Spring-and-Ktor%29/#installation","title":"Installation","text":"<p>Untuk menginstal ktor starter tambahkan additional ke main dependency:</p> <pre><code>dependencies {\n    implementation(\"eu.vendeli:ktor-starter:x.y.z\") // there\n    // change x.y.z to current library version\n}\n</code></pre>"},{"location":"id/Web-starters-%28Spring-and-Ktor%29/#key-components","title":"Key Components","text":"<p><code>serveWebhook</code> Function</p> <p>Fungsi serveWebhook adalah inti dari library. Ini mengatur dan memulai webhook server untuk Telegram bots. Ini menerima dua parameter:</p> <ul> <li><code>wait</code>: Boolean yang menunjukkan apakah server harus menunggu aplikasi berhenti sebelum shutdown. Defaults to true.</li> <li><code>serverBuilder</code>: Fungsi lambda yang mengonfigurasi server. Defaults to an empty lambda.</li> </ul>"},{"location":"id/Web-starters-%28Spring-and-Ktor%29/#configuration_1","title":"Configuration","text":"<ul> <li><code>WEBHOOK_PREFIX</code>: itu adalah parameter yang akan digunakan untuk address prefix untuk webhook listener route. (defaults to \"/\")</li> </ul>"},{"location":"id/Web-starters-%28Spring-and-Ktor%29/#server-setup","title":"Server Setup","text":"<ul> <li><code>server</code>: Method untuk mengatur konfigurasi server menggunakan EnvConfiguration atau ManualConfiguration.</li> <li><code>engine</code>: Method untuk mengonfigurasi Netty application engine.</li> <li><code>ktorModule</code>: Method untuk menambahkan Ktor modules ke aplikasi.</li> </ul> <p>Library menyediakan wide range dari configurable parameters untuk server, termasuk host, port, SSL settings, dan lainnya. Ada dua concrete options untuk configuringnya:</p> <ul> <li><code>EnvConfiguration</code>: Membaca configuration values dari environment dengan prefix <code>KTGRAM_</code>.</li> <li><code>ManualConfiguration</code>: Memungkinkan untuk manual setting dari configuration values, set parameters Anda di function <code>server {}</code>.</li> </ul> <p>Ada list dari parameters yang dapat di-set:</p> <ul> <li><code>HOST</code>: Hostname atau IP address dari server.</li> <li><code>PORT</code>: Port number untuk server.</li> <li><code>SSL_PORT</code>: Port number untuk SSL/TLS connections.</li> <li><code>PEM_PRIVATE_KEY_PATH</code>: Path ke PEM private key file.</li> <li><code>PEM_CHAIN_PATH</code>: Path ke PEM certificate chain file.</li> <li><code>PEM_PRIVATE_KEY</code>: PEM private key PASSWORD sebagai character array.</li> <li><code>KEYSTORE_PATH</code>: Path ke Java KeyStore file.</li> <li><code>KEYSTORE_PASSWORD</code>: Password untuk KeyStore.</li> <li><code>KEY_ALIAS</code>: Alias untuk key di KeyStore.</li> <li><code>SSL_ON</code>: Boolean yang menunjukkan apakah SSL/TLS harus di-enable. Defaults to true.</li> </ul> <p>Tip</p> <p>Jika pem certificates ada, module sendiri akan membuat jks storage dari mereka di path yang ditentukan.</p>"},{"location":"id/Web-starters-%28Spring-and-Ktor%29/#bot-configuration","title":"Bot Configuration:","text":"<p>Untuk mengonfigurasi bot panggil <code>declareBot {}</code> yang memiliki parameters seperti:</p> <ul> <li><code>token</code>: Bot token.</li> <li><code>pckg</code>: Package name untuk bot.</li> <li><code>configuration</code>: Fungsi lambda untuk mengonfigurasi bot.</li> <li><code>handlingBehaviour</code>: Fungsi lambda untuk mengatur handling behavior bot.</li> <li><code>onInit</code>: Fungsi lambda untuk dieksekusi saat bot diinisialisasi.</li> </ul>"},{"location":"id/Web-starters-%28Spring-and-Ktor%29/#example-usage","title":"Example Usage","text":"<p>Untuk menggunakan module ini, panggil function <code>serveWebhook</code>, konfigurasikan dengan settings yang diinginkan, deklarasikan bots Anda. Berikut contoh sederhananya:</p> <pre><code>fun main() = runBlocking {\n    serveWebhook {\n        server {\n            HOST = \"0.0.0.0\"\n            PORT = 8080\n            SSL_PORT = 8443\n\n            PEM_PRIVATE_KEY_PATH = \"/etc/letsencrypt/live/example.com/privkey.pem\"\n            PEM_CHAIN_PATH = \"/etc/letsencrypt/live/example.com/fullchain.pem\"\n            PEM_PRIVATE_KEY = \"pem_changeit\".toCharArray()\n\n            KEYSTORE_PATH = \"/etc/ssl/certs/java/cacerts/bot_keystore.jks\"\n            KEYSTORE_PASSWORD = \"changeit\".toCharArray()\n            // Set other configuration parameters as needed\n        }\n        declareBot {\n            token = \"YOUR_BOT_TOKEN\"\n            // Configure other bot settings\n        }\n        // Add more bots or set other parameters if needed\n    }\n}\n</code></pre> <p>Caution</p> <p>Jangan lupa untuk set webhook agar semuanya berfungsi. :)</p> <p>Secara default module akan serve webhook listenening endpoints sebagai <code>host/BOT_TOKEN</code></p>"},{"location":"vi/","title":"Trang ch\u1ee7","text":""},{"location":"vi/#gioi-thieu","title":"Gi\u1edbi thi\u1ec7u","text":"<p>H\u00e3y t\u00ecm hi\u1ec3u \u00fd t\u01b0\u1edfng v\u1ec1 c\u00e1ch th\u01b0 vi\u1ec7n x\u1eed l\u00fd c\u00e1c b\u1ea3n c\u1eadp nh\u1eadt n\u00f3i chung:</p> <p> </p> <p>Sau khi nh\u1eadn \u0111\u01b0\u1ee3c b\u1ea3n c\u1eadp nh\u1eadt, th\u01b0 vi\u1ec7n th\u1ef1c hi\u1ec7n ba b\u01b0\u1edbc ch\u00ednh, nh\u01b0 ch\u00fang ta c\u00f3 th\u1ec3 th\u1ea5y.</p>"},{"location":"vi/#xu-ly","title":"X\u1eed l\u00fd","text":"<p>X\u1eed l\u00fd l\u00e0 \u0111\u00f3ng g\u00f3i l\u1ea1i b\u1ea3n c\u1eadp nh\u1eadt nh\u1eadn \u0111\u01b0\u1ee3c th\u00e0nh l\u1edbp con ph\u00f9 h\u1ee3p c\u1ee7a <code>ProcessedUpdate</code> t\u00f9y thu\u1ed9c v\u00e0o t\u1ea3i tr\u1ecdng \u0111\u01b0\u1ee3c mang theo.</p> <p>B\u01b0\u1edbc n\u00e0y c\u1ea7n thi\u1ebft \u0111\u1ec3 d\u1ec5 d\u00e0ng v\u1eadn h\u00e0nh b\u1ea3n c\u1eadp nh\u1eadt v\u00e0 m\u1edf r\u1ed9ng kh\u1ea3 n\u0103ng x\u1eed l\u00fd.</p>"},{"location":"vi/#xu-ly_1","title":"X\u1eed l\u00fd","text":"<p>Ti\u1ebfp theo l\u00e0 b\u01b0\u1edbc ch\u00ednh, \u1edf \u0111\u00e2y ch\u00fang ta \u0111\u1ebfn v\u1edbi vi\u1ec7c x\u1eed l\u00fd th\u1ef1c t\u1ebf.</p>"},{"location":"vi/#global-ratelimiter","title":"Global RateLimiter","text":"<p>N\u1ebfu c\u00f3 ng\u01b0\u1eddi d\u00f9ng trong b\u1ea3n c\u1eadp nh\u1eadt, ch\u00fang ta ki\u1ec3m tra vi\u1ec7c v\u01b0\u1ee3t qu\u00e1 gi\u1edbi h\u1ea1n t\u1ed1c \u0111\u1ed9 to\u00e0n c\u1ea7u.</p>"},{"location":"vi/#phan-tich-van-ban","title":"Ph\u00e2n t\u00edch v\u0103n b\u1ea3n","text":"<p>Ti\u1ebfp theo, t\u00f9y thu\u1ed9c v\u00e0o t\u1ea3i tr\u1ecdng, ch\u00fang ta l\u1ea5y m\u1ed9t th\u00e0nh ph\u1ea7n b\u1ea3n c\u1eadp nh\u1eadt c\u1ee5 th\u1ec3 ch\u1ee9a v\u0103n b\u1ea3n v\u00e0 ph\u00e2n t\u00edch n\u00f3 theo c\u1ea5u h\u00ecnh.</p> <p>B\u1ea1n c\u00f3 th\u1ec3 xem chi ti\u1ebft h\u01a1n trong b\u00e0i vi\u1ebft ph\u00e2n t\u00edch b\u1ea3n c\u1eadp nh\u1eadt.</p>"},{"location":"vi/#tim-hoat-ong","title":"T\u00ecm Ho\u1ea1t \u0111\u1ed9ng","text":"<p>Ti\u1ebfp theo, theo th\u1ee9 t\u1ef1 \u01b0u ti\u00ean x\u1eed l\u00fd:</p> <p> </p> <p>Ch\u00fang ta \u0111ang t\u00ecm ki\u1ebfm s\u1ef1 t\u01b0\u01a1ng \u1ee9ng gi\u1eefa d\u1eef li\u1ec7u \u0111\u00e3 ph\u00e2n t\u00edch v\u00e0 c\u00e1c ho\u1ea1t \u0111\u1ed9ng m\u00e0 ch\u00fang ta \u0111ang v\u1eadn h\u00e0nh. Nh\u01b0 ch\u00fang ta c\u00f3 th\u1ec3 th\u1ea5y tr\u00ean s\u01a1 \u0111\u1ed3 \u01b0u ti\u00ean, <code>Commands</code> lu\u00f4n \u0111\u1ee9ng \u0111\u1ea7u ti\u00ean.</p> <p>Ngh\u0129a l\u00e0 n\u1ebfu t\u1ea3i tr\u1ecdng v\u0103n b\u1ea3n trong b\u1ea3n c\u1eadp nh\u1eadt t\u01b0\u01a1ng \u1ee9ng v\u1edbi b\u1ea5t k\u1ef3 l\u1ec7nh n\u00e0o, vi\u1ec7c t\u00ecm ki\u1ebfm ti\u1ebfp theo cho <code>Inputs</code>, <code>Common</code> v\u00e0 t\u1ea5t nhi\u00ean l\u00e0 th\u1ef1c thi h\u00e0nh \u0111\u1ed9ng <code>Unprocessed</code> s\u1ebd kh\u00f4ng \u0111\u01b0\u1ee3c th\u1ef1c hi\u1ec7n.</p> <p>\u0110i\u1ec1u duy nh\u1ea5t l\u00e0 n\u1ebfu c\u00f3 <code>UpdateHandlers</code> s\u1ebd \u0111\u01b0\u1ee3c k\u00edch ho\u1ea1t song song b\u1ea5t k\u1ec3.</p>"},{"location":"vi/#commands","title":"Commands","text":"<p>H\u00e3y xem x\u00e9t k\u1ef9 h\u01a1n v\u1ec1 c\u00e1c l\u1ec7nh v\u00e0 c\u00e1ch x\u1eed l\u00fd c\u1ee7a ch\u00fang.</p> <p>Nh\u01b0 b\u1ea1n c\u00f3 th\u1ec3 \u0111\u00e3 nh\u1eadn th\u1ea5y, m\u1eb7c d\u00f9 ch\u00fa th\u00edch cho vi\u1ec7c x\u1eed l\u00fd l\u1ec7nh \u0111\u01b0\u1ee3c g\u1ecdi l\u00e0 <code>CommandHandler</code>, n\u00f3 linh ho\u1ea1t h\u01a1n kh\u00e1i ni\u1ec7m c\u1ed5 \u0111i\u1ec3n trong Telegram Bots.</p>"},{"location":"vi/#scopes","title":"Scopes","text":"<p>\u0110i\u1ec1u n\u00e0y l\u00e0 do n\u00f3 c\u00f3 ph\u1ea1m vi x\u1eed l\u00fd r\u1ed9ng h\u01a1n, ngh\u0129a l\u00e0 h\u00e0m m\u1ee5c ti\u00eau c\u00f3 th\u1ec3 \u0111\u01b0\u1ee3c \u0111\u1ecbnh ngh\u0129a kh\u00f4ng ch\u1ec9 t\u00f9y thu\u1ed9c v\u00e0o s\u1ef1 kh\u1edbp v\u0103n b\u1ea3n, m\u00e0 c\u00f2n t\u00f9y thu\u1ed9c v\u00e0o lo\u1ea1i b\u1ea3n c\u1eadp nh\u1eadt ph\u00f9 h\u1ee3p, \u0111\u00e2y l\u00e0 kh\u00e1i ni\u1ec7m v\u1ec1 scopes.</p> <p>T\u01b0\u01a1ng \u1ee9ng, m\u1ed7i l\u1ec7nh c\u00f3 th\u1ec3 c\u00f3 c\u00e1c tr\u00ecnh x\u1eed l\u00fd kh\u00e1c nhau cho danh s\u00e1ch scopes kh\u00e1c nhau, ho\u1eb7c ng\u01b0\u1ee3c l\u1ea1i, m\u1ed9t l\u1ec7nh cho nhi\u1ec1u scopes.</p> <p>B\u1ea1n c\u00f3 th\u1ec3 th\u1ea5y b\u00ean d\u01b0\u1edbi c\u00e1ch \u00e1nh x\u1ea1 b\u1eb1ng t\u1ea3i tr\u1ecdng v\u0103n b\u1ea3n v\u00e0 scope \u0111\u01b0\u1ee3c th\u1ef1c hi\u1ec7n:</p> <p> </p>"},{"location":"vi/#inputs","title":"Inputs","text":"<p>Ti\u1ebfp theo, n\u1ebfu t\u1ea3i tr\u1ecdng v\u0103n b\u1ea3n kh\u00f4ng kh\u1edbp v\u1edbi b\u1ea5t k\u1ef3 l\u1ec7nh n\u00e0o th\u00ec c\u00e1c \u0111i\u1ec3m \u0111\u1ea7u v\u00e0o \u0111\u01b0\u1ee3c t\u00ecm ki\u1ebfm.</p> <p>Kh\u00e1i ni\u1ec7m n\u00e0y r\u1ea5t gi\u1ed1ng v\u1edbi vi\u1ec7c ch\u1edd \u0111\u1ea7u v\u00e0o trong c\u00e1c \u1ee9ng d\u1ee5ng d\u00f2ng l\u1ec7nh, b\u1ea1n \u0111\u1eb7t trong ng\u1eef c\u1ea3nh bot cho m\u1ed9t ng\u01b0\u1eddi d\u00f9ng c\u1ee5 th\u1ec3 m\u1ed9t \u0111i\u1ec3m s\u1ebd x\u1eed l\u00fd \u0111\u1ea7u v\u00e0o ti\u1ebfp theo c\u1ee7a anh ta, kh\u00f4ng quan tr\u1ecdng n\u00f3 ch\u1ee9a g\u00ec, \u0111i\u1ec1u ch\u00ednh l\u00e0 b\u1ea3n c\u1eadp nh\u1eadt ti\u1ebfp theo c\u00f3 <code>User</code> \u0111\u1ec3 c\u00f3 th\u1ec3 li\u00ean k\u1ebft n\u00f3 v\u1edbi \u0111i\u1ec3m ch\u1edd \u0111\u1ea7u v\u00e0o \u0111\u00e3 \u0111\u1eb7t.</p> <p>B\u1ea1n c\u00f3 th\u1ec3 th\u1ea5y b\u00ean d\u01b0\u1edbi m\u1ed9t v\u00ed d\u1ee5 v\u1ec1 x\u1eed l\u00fd b\u1ea3n c\u1eadp nh\u1eadt khi kh\u00f4ng c\u00f3 s\u1ef1 kh\u1edbp tr\u00ean <code>Commands</code>.</p> <p> </p>"},{"location":"vi/#commons","title":"Commons","text":"<p>N\u1ebfu tr\u00ecnh x\u1eed l\u00fd kh\u00f4ng t\u00ecm th\u1ea5y <code>commands</code> ho\u1eb7c <code>inputs</code>, n\u00f3 ki\u1ec3m tra t\u1ea3i tr\u1ecdng v\u0103n b\u1ea3n v\u1edbi c\u00e1c tr\u00ecnh x\u1eed l\u00fd <code>common</code>.</p> <p>Ch\u00fang t\u00f4i khuy\u00ean n\u00ean s\u1eed d\u1ee5ng n\u00f3 m\u00e0 kh\u00f4ng l\u1ea1m d\u1ee5ng, v\u00ec n\u00f3 ki\u1ec3m tra b\u1eb1ng c\u00e1ch l\u1eb7p qua t\u1ea5t c\u1ea3 c\u00e1c m\u1ee5c.</p>"},{"location":"vi/#unprocessed","title":"Unprocessed","text":"<p>V\u00e0 b\u01b0\u1edbc cu\u1ed1i c\u00f9ng, n\u1ebfu tr\u00ecnh x\u1eed l\u00fd kh\u00f4ng t\u00ecm th\u1ea5y ho\u1ea1t \u0111\u1ed9ng n\u00e0o kh\u1edbp (<code>UpdateHandler</code> ho\u1ea1t \u0111\u1ed9ng ho\u00e0n to\u00e0n song song v\u00e0 kh\u00f4ng \u0111\u01b0\u1ee3c t\u00ednh l\u00e0 ho\u1ea1t \u0111\u1ed9ng th\u00f4ng th\u01b0\u1eddng), th\u00ec <code>UnprocessedHandler</code> s\u1ebd \u0111\u01b0\u1ee3c k\u00edch ho\u1ea1t, n\u1ebfu \u0111\u01b0\u1ee3c \u0111\u1eb7t, n\u00f3 s\u1ebd x\u1eed l\u00fd tr\u01b0\u1eddng h\u1ee3p n\u00e0y, c\u00f3 th\u1ec3 h\u1eefu \u00edch \u0111\u1ec3 c\u1ea3nh b\u00e1o ng\u01b0\u1eddi d\u00f9ng r\u1eb1ng c\u00f3 g\u00ec \u0111\u00f3 \u0111\u00e3 sai.</p> <p>\u0110\u1ecdc chi ti\u1ebft h\u01a1n trong b\u00e0i vi\u1ebft Handlers.</p>"},{"location":"vi/#activity-ratelimiter","title":"Activity RateLimiter","text":"<p>Sau khi t\u00ecm th\u1ea5y ho\u1ea1t \u0111\u1ed9ng, n\u00f3 c\u0169ng ki\u1ec3m tra gi\u1edbi h\u1ea1n t\u1ed1c \u0111\u1ed9 c\u1ee7a ng\u01b0\u1eddi d\u00f9ng tr\u00ean n\u00f3, theo c\u00e1c tham s\u1ed1 \u0111\u01b0\u1ee3c ch\u1ec9 \u0111\u1ecbnh trong tham s\u1ed1 ho\u1ea1t \u0111\u1ed9ng.</p>"},{"location":"vi/#hoat-ong","title":"Ho\u1ea1t \u0111\u1ed9ng","text":"<p>Ho\u1ea1t \u0111\u1ed9ng \u0111\u1ec1 c\u1eadp \u0111\u1ebfn c\u00e1c lo\u1ea1i tr\u00ecnh x\u1eed l\u00fd kh\u00e1c nhau m\u00e0 th\u01b0 vi\u1ec7n bot telegram c\u00f3 th\u1ec3 x\u1eed l\u00fd, bao g\u1ed3m Commands, Inputs, Regexes, v\u00e0 tr\u00ecnh x\u1eed l\u00fd Unprocessed.</p>"},{"location":"vi/#invocation","title":"Invocation","text":"<p>B\u01b0\u1edbc x\u1eed l\u00fd cu\u1ed1i c\u00f9ng l\u00e0 vi\u1ec7c g\u1ecdi ho\u1ea1t \u0111\u1ed9ng \u0111\u00e3 t\u00ecm th\u1ea5y.</p> <p>Chi ti\u1ebft h\u01a1n c\u00f3 th\u1ec3 t\u00ecm th\u1ea5y trong b\u00e0i vi\u1ebft invocation.</p>"},{"location":"vi/#xem-them","title":"Xem th\u00eam","text":"<ul> <li>Ph\u00e2n t\u00edch b\u1ea3n c\u1eadp nh\u1eadt</li> <li>G\u1ecdi ho\u1ea1t \u0111\u1ed9ng</li> <li>Handlers</li> <li>C\u1ea5u h\u00ecnh bot</li> <li>Web starters (Spring, Ktor)</li> </ul>"},{"location":"vi/Actions/#all-requests-is-actions","title":"All requests is Actions","text":"<p>T\u1ea5t c\u1ea3 c\u00e1c y\u00eau c\u1ea7u API c\u1ee7a telegram l\u00e0 c\u00e1c ki\u1ec3u kh\u00e1c nhau c\u1ee7a giao di\u1ec7n <code>TgAction</code> tri\u1ec3n khai c\u00e1c ph\u01b0\u01a1ng th\u1ee9c kh\u00e1c nhau nh\u01b0 <code>SendMessageAction</code>, \u0111\u01b0\u1ee3c \u0111\u00f3ng g\u00f3i d\u01b0\u1edbi d\u1ea1ng c\u00e1c h\u00e0m ki\u1ec3u <code>message()</code> \u0111\u1ec3 thu\u1eadn ti\u1ec7n cho giao di\u1ec7n th\u01b0 vi\u1ec7n.</p> <p> </p> <p>M\u1ed7i <code>Action</code> c\u00f3 th\u1ec3 c\u00f3 c\u00e1c ph\u01b0\u01a1ng th\u1ee9c ri\u00eang c\u1ee7a n\u00f3, t\u00f9y thu\u1ed9c v\u00e0o c\u00e1c <code>Feature</code> c\u00f3 s\u1eb5n.</p>"},{"location":"vi/Actions/#features","title":"Features","text":"<p>C\u00e1c actions kh\u00e1c nhau c\u00f3 th\u1ec3 c\u00f3 c\u00e1c <code>Features</code> kh\u00e1c nhau t\u00f9y thu\u1ed9c v\u00e0o Telegram Bot Api, ch\u1eb3ng h\u1ea1n nh\u01b0: <code>OptionsFeature</code>, <code>MarkupFeature</code> <code>EntitiesFeature</code> <code>CaptionFeature</code>.</p> <p>H\u00e3y xem k\u1ef9 h\u01a1n v\u1ec1 ch\u00fang:</p>"},{"location":"vi/Actions/#options","title":"Options","text":"<p>V\u00ed d\u1ee5, <code>OptionsFeature</code> \u0111\u01b0\u1ee3c s\u1eed d\u1ee5ng \u0111\u1ec3 truy\u1ec1n c\u00e1c tham s\u1ed1 t\u00f9y ch\u1ecdn.</p> <p>M\u1ed7i action c\u00f3 lo\u1ea1i options ri\u00eang c\u1ee7a n\u00f3, b\u1ea1n c\u00f3 th\u1ec3 th\u1ea5y t\u01b0\u01a1ng \u1ee9ng trong ch\u00ednh <code>Action</code> trong tham s\u1ed1 <code>options</code>, trong ph\u1ea7n properties. V\u00ed d\u1ee5, <code>sendMessage</code> ch\u1ee9a m\u1ed9t d\u1eef li\u1ec7u <code>MessageOptions</code> v\u1edbi c\u00e1c tham s\u1ed1 kh\u00e1c nhau nh\u01b0 options.</p> <p>V\u00ed d\u1ee5 s\u1eed d\u1ee5ng:</p> <pre><code>message{ \"*Test*\" }.options {\n    parseMode = ParseMode.Markdown\n}.send(user, bot)\n</code></pre>"},{"location":"vi/Actions/#markup","title":"Markup","text":"<p>C\u0169ng c\u00f3 m\u1ed9t ph\u01b0\u01a1ng th\u1ee9c \u0111\u1ec3 g\u1eedi markups h\u1ed7 tr\u1ee3 t\u1ea5t c\u1ea3 c\u00e1c lo\u1ea1i keyboards: <code>ReplyKeyboardMarkup</code>, <code>InlineKeyboardMarkup</code>, <code>ForceReply</code>, <code>ReplyKeyboardRemove</code>.</p>"},{"location":"vi/Actions/#inline-keyboard-markup","title":"Inline Keyboard Markup","text":"<p>Tr\u00ecnh x\u00e2y d\u1ef1ng n\u00e0y cho ph\u00e9p b\u1ea1n x\u00e2y d\u1ef1ng c\u00e1c n\u00fat inline v\u1edbi b\u1ea5t k\u1ef3 k\u1ebft h\u1ee3p tham s\u1ed1 n\u00e0o.</p> <pre><code>message{ \"Test\" }.inlineKeyboardMarkup {\n    \"name\" callback \"callbackData\"         //\n    \"buttonName\" url \"https://google.com\"  //--- hai n\u00fat n\u00e0y s\u1ebd \u1edf c\u00f9ng m\u1ed9t h\u00e0ng.\n    newLine() // or br()\n    \"otherButton\" webAppInfo \"data\"       // \u0111i\u1ec1u n\u00e0y s\u1ebd \u1edf h\u00e0ng kh\u00e1c\n\n    // b\u1ea1n c\u0169ng c\u00f3 th\u1ec3 s\u1eed d\u1ee5ng phong c\u00e1ch kh\u00e1c trong tr\u00ecnh x\u00e2y d\u1ef1ng:\n    callbackData(\"buttonName\") { \"callbackData\" }\n}.send(user, bot)\n</code></pre> <p>Chi ti\u1ebft h\u01a1n c\u00f3 th\u1ec3 \u0111\u01b0\u1ee3c xem trong t\u00e0i li\u1ec7u tr\u00ecnh x\u00e2y d\u1ef1ng documentation.</p>"},{"location":"vi/Actions/#reply-keyboard-markup","title":"Reply Keyboard Markup","text":"<p>Tr\u00ecnh x\u00e2y d\u1ef1ng n\u00e0y cho ph\u00e9p b\u1ea1n x\u00e2y d\u1ef1ng c\u00e1c n\u00fat menu.</p> <pre><code>message{ \"Test\" }.replyKeyboardMarkup {\n  + \"Menu button\"     // b\u1ea1n c\u00f3 th\u1ec3 th\u00eam n\u00fat b\u1eb1ng c\u00e1ch s\u1eed d\u1ee5ng to\u00e1n t\u1eed c\u1ed9ng m\u1ed9t ng\u00f4i\n  + \"Menu button 2\"\n  br() // chuy\u1ec3n sang h\u00e0ng th\u1ee9 hai\n  \"Send polls \ud83d\udc40\" requestPoll true   // n\u00fat c\u00f3 tham s\u1ed1\n\n  options {\n    resizeKeyboard = true\n  }\n}.send(user, bot)\n</code></pre> <p>C\u00e1c t\u00f9y ch\u1ecdn b\u1ed5 sung \u00e1p d\u1ee5ng cho b\u00e0n ph\u00edm c\u00f3 th\u1ec3 \u0111\u01b0\u1ee3c xem trong <code>ReplyKeyboardMarkupOptions</code>.</p> <p>Xem t\u00e0i li\u1ec7u tr\u00ecnh x\u00e2y d\u1ef1ng documentation \u0111\u1ec3 bi\u1ebft th\u00eam chi ti\u1ebft v\u1ec1 c\u00e1c ph\u01b0\u01a1ng th\u1ee9c.</p> <p>Nh\u00ecn chung, s\u1eed d\u1ee5ng DSL \u0111\u1ec3 thu th\u1eadp b\u00e0n ph\u00edm markup r\u1ea5t ti\u1ec7n l\u1ee3i, nh\u01b0ng n\u1ebfu c\u1ea7n, b\u1ea1n c\u0169ng c\u00f3 th\u1ec3 th\u00eam markup theo c\u00e1ch th\u1ee7 c\u00f4ng.</p> <pre><code>message{ \"*Test*\" }.markup {\n    InlineKeyboardMarkup(\n        InlineKeyboardButton(\"test\", callbackData = \"testCallback\")\n    )\n}.send(user, bot)\n</code></pre> <pre><code>message{ \"*Test*\" }.markup {\n    ReplyKeyboardMarkup(\n        KeyboardButton(\"Test menu button\")\n    )\n}.send(user, bot)\n</code></pre>"},{"location":"vi/Actions/#entities","title":"Entities","text":"<p>C\u0169ng c\u00f3 m\u1ed9t ph\u01b0\u01a1ng th\u1ee9c \u0111\u1ec3 g\u1eedi <code>MessageEntity</code>.</p> <p>V\u00ed d\u1ee5 s\u1eed d\u1ee5ng:</p> <pre><code>message{ \"Test \\$hello\" }.replyKeyboardMarkup {\n    +\"Test menu button\"\n}.entities {\n    5 to 15 url \"https://google.com\" // th\u00eam TextLink\n    entity(EntityType.Bold, 0, 4)\n    entity(EntityType.Cashtag, 5, 5) // d\u1ea5u g\u1ea1ch ch\u00e9o ng\u01b0\u1ee3c kh\u00f4ng \u0111\u01b0\u1ee3c t\u00ednh (v\u00ec n\u00f3 \u0111\u01b0\u1ee3c s\u1eed d\u1ee5ng cho tr\u00ecnh bi\u00ean d\u1ecbch)\n}.send(user, bot)\n</code></pre>"},{"location":"vi/Actions/#contextual-entities","title":"Contextual entities.","text":"<p>C\u00e1c entities c\u0169ng c\u00f3 th\u1ec3 \u0111\u01b0\u1ee3c th\u00eam th\u00f4ng qua ng\u1eef c\u1ea3nh c\u1ee7a m\u1ed9t s\u1ed1 c\u1ea5u tr\u00fac, ch\u00fang \u0111\u01b0\u1ee3c g\u1eafn nh\u00e3n v\u1edbi m\u1ed9t giao di\u1ec7n EntitiesContextBuilder c\u1ee5 th\u1ec3, n\u00f3 c\u0169ng c\u00f3 m\u1eb7t trong feature caption.</p> <p>V\u00ed d\u1ee5 s\u1eed d\u1ee5ng:</p> <pre><code>message { \"usual text \" - bold { \"this is bold text\" } - \" continue usual\" }.send(user, bot)\n</code></pre> <p>T\u1ea5t c\u1ea3 c\u00e1c lo\u1ea1i entity types \u0111\u1ec1u \u0111\u01b0\u1ee3c h\u1ed7 tr\u1ee3.</p>"},{"location":"vi/Actions/#caption","title":"Caption","text":"<p>Ngo\u00e0i ra, ph\u01b0\u01a1ng th\u1ee9c <code>caption</code> c\u00f3 th\u1ec3 \u0111\u01b0\u1ee3c s\u1eed d\u1ee5ng \u0111\u1ec3 th\u00eam ch\u00fa th\u00edch cho c\u00e1c t\u1ec7p media.</p> <p>V\u00ed d\u1ee5 s\u1eed d\u1ee5ng:</p> <pre><code>photo { \"FILE_ID\" }.caption { \"Test caption\" }.send(user, bot)\n</code></pre>"},{"location":"vi/Activites-and-Processors/","title":"Ho\u1ea1t \u0111\u1ed9ng v\u00e0 B\u1ed9 x\u1eed l\u00fd","text":""},{"location":"vi/Activites-and-Processors/#gioi-thieu","title":"Gi\u1edbi thi\u1ec7u","text":"<p><code>Activity</code> trong th\u01b0 vi\u1ec7n n\u00e0y l\u00e0 th\u1ef1c th\u1ec3 tr\u1eebu t\u01b0\u1ee3ng t\u1ed5ng qu\u00e1t h\u00f3a c\u00e1c th\u1ef1c th\u1ec3 nh\u01b0 <code>@CommandHandler</code>, <code>@InputHandler</code>, <code>@UnprocessedHandler</code>, v\u00e0 <code>@CommonHandler</code>.</p> <p>C\u0169ng xem th\u00eam b\u00e0i vi\u1ebft v\u1ec1 handlers.</p>"},{"location":"vi/Activites-and-Processors/#thu-thap-hoat-ong","title":"Thu th\u1eadp ho\u1ea1t \u0111\u1ed9ng","text":"<p>C\u00e1c ho\u1ea1t \u0111\u1ed9ng \u0111\u01b0\u1ee3c thu th\u1eadp v\u00e0 chu\u1ea9n b\u1ecb t\u1ea5t c\u1ea3 ng\u1eef c\u1ea3nh trong th\u1eddi gian bi\u00ean d\u1ecbch (tr\u1eeb nh\u1eefng ho\u1ea1t \u0111\u1ed9ng \u0111\u01b0\u1ee3c \u0111\u1ecbnh ngh\u0129a th\u00f4ng qua DSL ch\u1ee9c n\u0103ng).</p> <p>N\u1ebfu b\u1ea1n mu\u1ed1n gi\u1edbi h\u1ea1n khu v\u1ef1c m\u00e0 g\u00f3i s\u1ebd \u0111\u01b0\u1ee3c t\u00ecm ki\u1ebfm, b\u1ea1n c\u00f3 th\u1ec3 truy\u1ec1n tham s\u1ed1 cho plugin:</p> <pre><code>ktGram {\n    packages = listOf(\"com.example.mybot\")\n}\n</code></pre> <p>ho\u1eb7c kh\u00f4ng s\u1eed d\u1ee5ng plugin th\u00f4ng qua ksp:</p> <pre><code>ksp {\n    arg(\"package\", \"com.example.mybot\")\n}\n</code></pre> <p>l\u01b0u \u00fd r\u1eb1ng trong tr\u01b0\u1eddng h\u1ee3p n\u00e0y, \u0111\u1ec3 c\u00e1c h\u00e0nh \u0111\u1ed9ng \u0111\u01b0\u1ee3c thu th\u1eadp \u0111\u01b0\u1ee3c x\u1eed l\u00fd ch\u00ednh x\u00e1c, b\u1ea1n c\u0169ng ph\u1ea3i ch\u1ec9 \u0111\u1ecbnh g\u00f3i trong ch\u00ednh th\u1ec3 hi\u1ec7n \u0111\u00f3.</p> <pre><code>fun main() = runBlocking {\n    val bot = TelegramBot(\"BOT_TOKEN\", \"com.example.mybot\")\n\n    bot.handleUpdates()\n    // b\u1eaft \u0111\u1ea7u tr\u00ecnh l\u1eafng nghe long-polling\n}\n</code></pre> <p>t\u00f9y ch\u1ecdn n\u00e0y \u0111\u01b0\u1ee3c th\u00eam v\u00e0o \u0111\u1ec3 c\u00f3 th\u1ec3 ch\u1ea1y nhi\u1ec1u th\u1ec3 hi\u1ec7n bot:</p> <pre><code>ktGram {\n    packages = listOf(\"com.example.mybot\", \"com.example.mybot2\")\n}\n</code></pre> <p>ho\u1eb7c n\u1ebfu b\u1ea1n kh\u00f4ng s\u1eed d\u1ee5ng plugin \u0111\u1ec3 ch\u1ec9 \u0111\u1ecbnh c\u00e1c g\u00f3i kh\u00e1c nhau, b\u1ea1n c\u1ea7n ch\u1ec9 \u0111\u1ecbnh ch\u00fang v\u1edbi d\u1ea5u ph\u00e2n c\u00e1ch <code>;</code>:</p> <pre><code>ksp {\n    arg(\"package\", \"com.example.mybot;com.example.mybot2\")\n}\n</code></pre>"},{"location":"vi/Activites-and-Processors/#xu-ly","title":"X\u1eed l\u00fd","text":""},{"location":"vi/Activites-and-Processors/#webhooks","title":"Webhooks","text":"<p>Trong controller c\u1ee7a b\u1ea1n (ho\u1eb7c m\u1ed9t n\u01a1i kh\u00e1c n\u01a1i <code>webhook</code> \u0111\u01b0\u1ee3c x\u1eed l\u00fd), b\u1ea1n g\u1ecdi: <code>bot.update.parseAndHandle(webhookString)</code></p>"},{"location":"vi/Activites-and-Processors/#long-polling","title":"Long polling","text":"<p>G\u1ecdi: <code>bot.handleUpdates()</code> ho\u1eb7c th\u00f4ng qua <code>bot.update.setListener { handle(it) }</code></p>"},{"location":"vi/Activites-and-Processors/#xem-them","title":"Xem th\u00eam","text":"<ul> <li>C\u1eadp nh\u1eadt ph\u00e2n t\u00edch</li> <li>G\u1ecdi ho\u1ea1t \u0111\u1ed9ng</li> <li>H\u00e0nh \u0111\u1ed9ng</li> </ul>"},{"location":"vi/Activity-invocation/","title":"Activity Invocation","text":"<p>Trong qu\u00e1 tr\u00ecnh g\u1ecdi ho\u1ea1t \u0111\u1ed9ng, c\u00f3 th\u1ec3 truy\u1ec1n ng\u1eef c\u1ea3nh bot, v\u00ec n\u00f3 \u0111\u01b0\u1ee3c khai b\u00e1o l\u00e0 tham s\u1ed1 trong c\u00e1c h\u00e0m \u0111\u00edch.</p> <p>C\u00e1c tham s\u1ed1 c\u00f3 th\u1ec3 truy\u1ec1n l\u00e0:</p> <ul> <li><code>ProcessedUpdate</code> (v\u00e0 t\u1ea5t c\u1ea3 l\u1edbp con c\u1ee7a n\u00f3) - c\u1eadp nh\u1eadt \u0111ang x\u1eed l\u00fd hi\u1ec7n t\u1ea1i.</li> <li><code>ProcessingContext</code> - ng\u1eef c\u1ea3nh c\u1ea5p th\u1ea5p c\u1ee7a vi\u1ec7c x\u1eed l\u00fd ho\u1ea1t \u0111\u1ed9ng.</li> <li><code>User</code> - n\u1ebfu c\u00f3.</li> <li><code>Chat</code> - n\u1ebfu c\u00f3.</li> <li><code>TelegramBot</code> - th\u1ec3 hi\u1ec7n bot hi\u1ec7n t\u1ea1i.</li> </ul> <p>C\u0169ng c\u00f3 th\u1ec3 th\u00eam m\u1ed9t ki\u1ec3u t\u00f9y ch\u1ec9nh \u0111\u1ec3 truy\u1ec1n.</p> <p>\u0110\u1ec3 l\u00e0m \u0111i\u1ec1u n\u00e0y, th\u00eam m\u1ed9t l\u1edbp implements <code>Autowiring&lt;T&gt;</code> v\u00e0 \u0111\u00e1nh d\u1ea5u n\u00f3 v\u1edbi annotation <code>@Injectable</code>.</p> <p>Sau khi implements interface <code>Autowiring</code> - <code>T</code> s\u1ebd c\u00f3 s\u1eb5n \u0111\u1ec3 truy\u1ec1n trong c\u00e1c h\u00e0m \u0111\u00edch v\u00e0 s\u1ebd \u0111\u01b0\u1ee3c l\u1ea5y th\u00f4ng qua ph\u01b0\u01a1ng th\u1ee9c \u0111\u01b0\u1ee3c m\u00f4 t\u1ea3 trong interface.</p> <pre><code>@Injectable\nobject UserResolver : Autowiring&lt;UserRecord&gt; {\n    override suspend fun get(update: ProcessedUpdate, bot: TelegramBot): UserRecord? {\n        return userRepository.getUserByTgId(update.user.id)\n    }\n}\n</code></pre> <p>C\u00e1c tham s\u1ed1 kh\u00e1c \u0111\u01b0\u1ee3c khai b\u00e1o trong h\u00e0m s\u1ebd \u0111\u01b0\u1ee3c t\u00ecm ki\u1ebfm trong c\u00e1c tham s\u1ed1 \u0111\u00e3 \u0111\u01b0\u1ee3c parse.</p> <p>Ngo\u00e0i ra, c\u00e1c tham s\u1ed1 \u0111\u00e3 \u0111\u01b0\u1ee3c parse trong qu\u00e1 tr\u00ecnh truy\u1ec1n c\u00f3 th\u1ec3 \u0111\u01b0\u1ee3c \u00e9p ki\u1ec3u th\u00e0nh m\u1ed9t s\u1ed1 ki\u1ec3u nh\u1ea5t \u0111\u1ecbnh, \u0111\u00e2y l\u00e0 danh s\u00e1ch c\u1ee7a ch\u00fang:</p> <ul> <li><code>String</code></li> <li><code>Integer</code></li> <li><code>Long</code></li> <li><code>Short</code></li> <li><code>Float</code></li> <li><code>Double</code></li> </ul> <p>H\u01a1n n\u1eefa, l\u01b0u \u00fd r\u1eb1ng n\u1ebfu c\u00e1c tham s\u1ed1 \u0111\u01b0\u1ee3c khai b\u00e1o v\u00e0 b\u1ecb thi\u1ebfu (ho\u1eb7c trong c\u00e1c tham s\u1ed1 \u0111\u00e3 \u0111\u01b0\u1ee3c parse ho\u1eb7c v\u00ed d\u1ee5 <code>User</code> b\u1ecb thi\u1ebfu trong <code>Update</code>) ho\u1eb7c ki\u1ec3u \u0111\u01b0\u1ee3c khai b\u00e1o kh\u00f4ng ph\u00f9 h\u1ee3p v\u1edbi tham s\u1ed1 nh\u1eadn \u0111\u01b0\u1ee3c trong h\u00e0m, <code>null</code> s\u1ebd \u0111\u01b0\u1ee3c truy\u1ec1n n\u00ean h\u00e3y c\u1ea9n th\u1eadn.</p> <p>T\u00f3m t\u1eaft t\u1ea5t c\u1ea3, d\u01b0\u1edbi \u0111\u00e2y l\u00e0 m\u1ed9t v\u00ed d\u1ee5 v\u1ec1 c\u00e1ch c\u00e1c tham s\u1ed1 h\u00e0m th\u01b0\u1eddng \u0111\u01b0\u1ee3c h\u00ecnh th\u00e0nh:</p> <p> </p>"},{"location":"vi/Activity-invocation/#xem-them","title":"Xem th\u00eam","text":"<ul> <li>Update parsing</li> <li>Activities &amp; Processors</li> </ul>"},{"location":"vi/Bot-Context/","title":"Ng\u1eef c\u1ea3nh Bot","text":"<p>Bot c\u0169ng c\u00f3 th\u1ec3 cung c\u1ea5p kh\u1ea3 n\u0103ng ghi nh\u1edb m\u1ed9t s\u1ed1 d\u1eef li\u1ec7u th\u00f4ng qua c\u00e1c giao di\u1ec7n <code>UserData</code> v\u00e0 <code>ClassData</code>.</p> <ul> <li><code>userData</code> l\u00e0 d\u1eef li\u1ec7u \u1edf c\u1ea5p \u0111\u1ed9 ng\u01b0\u1eddi d\u00f9ng.</li> <li><code>classData</code> l\u00e0 d\u1eef li\u1ec7u \u1edf c\u1ea5p \u0111\u1ed9 l\u1edbp, t\u1ee9c l\u00e0 d\u1eef li\u1ec7u s\u1ebd \u0111\u01b0\u1ee3c l\u01b0u tr\u1eef cho \u0111\u1ebfn khi ng\u01b0\u1eddi d\u00f9ng chuy\u1ec3n sang l\u1ec7nh ho\u1eb7c \u0111\u1ea7u v\u00e0o n\u1eb1m trong   m\u1ed9t l\u1edbp kh\u00e1c. (\u1ede ch\u1ebf \u0111\u1ed9 h\u00e0m n\u00f3 s\u1ebd ho\u1ea1t \u0111\u1ed9ng gi\u1ed1ng nh\u01b0 d\u1eef li\u1ec7u ng\u01b0\u1eddi d\u00f9ng)</li> </ul> <p>M\u1eb7c \u0111\u1ecbnh, vi\u1ec7c tri\u1ec3n khai \u0111\u01b0\u1ee3c cung c\u1ea5p th\u00f4ng qua <code>ConcurrentHashMap</code> nh\u01b0ng c\u00f3 th\u1ec3 thay \u0111\u1ed5i th\u00e0nh c\u1ee7a ri\u00eang b\u1ea1n th\u00f4ng qua c\u00e1c giao di\u1ec7n <code>UserData</code> v\u00e0 <code>ClassData</code> s\u1eed d\u1ee5ng c\u00e1c c\u00f4ng c\u1ee5 l\u01b0u tr\u1eef d\u1eef li\u1ec7u b\u1ea1n ch\u1ecdn.</p> <p>Caution</p> <p>\u0110\u1eebng qu\u00ean ch\u1ea1y gradle <code>kspKotlin</code>/ho\u1eb7c b\u1ea5t k\u1ef3 t\u00e1c v\u1ee5 ksp li\u00ean quan n\u00e0o \u0111\u1ec3 l\u00e0m cho c\u00e1c r\u00e0ng bu\u1ed9c sinh m\u00e3 c\u1ea7n thi\u1ebft c\u00f3 s\u1eb5n.</p> <p>\u0110\u1ec3 thay \u0111\u1ed5i, t\u1ea5t c\u1ea3 nh\u1eefng g\u00ec b\u1ea1n c\u1ea7n l\u00e0m l\u00e0 \u0111\u1eb7t annotation <code>@CtxProvider</code> d\u01b0\u1edbi l\u1edbp tri\u1ec3n khai c\u1ee7a b\u1ea1n v\u00e0 ch\u1ea1y t\u00e1c v\u1ee5 gradle ksp (ho\u1eb7c build).</p> <pre><code>@CtxProvider\nclass MyRedis : UserData&lt;String&gt; {\n    // ...\n}\n</code></pre>"},{"location":"vi/Bot-Context/#xem-them","title":"Xem th\u00eam","text":"<ul> <li>Trang ch\u1ee7</li> <li>C\u1eadp nh\u1eadt ph\u00e2n t\u00edch</li> </ul>"},{"location":"vi/Bot-configuration/","title":"C\u1ea5u h\u00ecnh Bot","text":"<p>Th\u01b0 vi\u1ec7n cung c\u1ea5p nhi\u1ec1u t\u00f9y ch\u1ecdn c\u1ea5u h\u00ecnh, b\u1ea1n c\u00f3 th\u1ec3 xem tham chi\u1ebfu API trong m\u00f4 t\u1ea3 l\u1edbp <code>BotConfiguration</code>.</p> <p>C\u00f3 hai c\u00e1ch ti\u1ebfp c\u1eadn \u0111\u1ec3 c\u1ea5u h\u00ecnh bot:</p>"},{"location":"vi/Bot-configuration/#lambda-configurator","title":"Lambda Configurator","text":"<pre><code>// ...\nval bot = TelegramBot(\"BOT_TOKEN\") {\n  inputListener = RedisInputListenerImpl()\n  classManager = KoinClassManagerImpl()\n  logging {\n      botLogLevel = LogLvl.DEBUG\n  }\n}\n// ...\n</code></pre>"},{"location":"vi/Bot-configuration/#interface-configloader","title":"Interface ConfigLoader","text":"<p>C\u0169ng c\u00f3 kh\u1ea3 n\u0103ng c\u1ea5u h\u00ecnh th\u00f4ng qua interface <code>ConfigLoader</code> \u0111\u1eb7c bi\u1ec7t, m\u00e0 b\u1ea1n c\u00f3 th\u1ec3 s\u1eed d\u1ee5ng \u0111\u1ec3 t\u1ea3i c\u00e0i \u0111\u1eb7t t\u1eeb c\u00e1c ngu\u1ed3n b\u00ean ngo\u00e0i (<code>properties</code>, <code>command line args</code>, etc.).</p> <p>Vi\u1ec7c tri\u1ec3n khai interface n\u00e0y c\u00f3 th\u1ec3 \u0111\u01b0\u1ee3c truy\u1ec1n qua constructor th\u1ee9 c\u1ea5p v\u00e0 instance s\u1ebd \u0111\u01b0\u1ee3c c\u1ea5u h\u00ecnh t\u01b0\u01a1ng \u1ee9ng.</p> <pre><code>val bot = TelegramBot(ConfigLoaderImpl)\n</code></pre> <p>Hi\u1ec7n t\u1ea1i c\u00f3 m\u1ed9t s\u1ed1 module \u0111\u01b0\u1ee3c cung c\u1ea5p tri\u1ec3n khai interface n\u00e0y nh\u01b0 <code>ktgram-config-env</code>, <code>ktgram-config-toml</code>.</p>"},{"location":"vi/Bot-configuration/#tong-quan-ve-botconfiguration","title":"T\u1ed5ng quan v\u1ec1 BotConfiguration","text":""},{"location":"vi/Bot-configuration/#botconfiguration","title":"BotConfiguration","text":"<p>L\u1edbp <code>BotConfiguration</code> l\u00e0 trung t\u00e2m \u0111\u1ec3 c\u1ea5u h\u00ecnh bot. N\u00f3 bao g\u1ed3m c\u00e1c thu\u1ed9c t\u00ednh \u0111\u1ec3 x\u00e1c \u0111\u1ecbnh bot, thi\u1ebft l\u1eadp host API, x\u00e1c \u0111\u1ecbnh bot c\u00f3 ho\u1ea1t \u0111\u1ed9ng trong m\u00f4i tr\u01b0\u1eddng th\u1eed nghi\u1ec7m hay kh\u00f4ng, x\u1eed l\u00fd \u0111\u1ea7u v\u00e0o, qu\u1ea3n l\u00fd l\u1edbp, v\u00e0 ki\u1ec3m so\u00e1t t\u1ef1 \u0111\u1ed9ng x\u00f3a \u0111\u1ea7u v\u00e0o. Ngo\u00e0i ra, n\u00f3 cung c\u1ea5p c\u00e1c thu\u1ed9c t\u00ednh n\u1ed9i b\u1ed9 cho gi\u1edbi h\u1ea1n t\u1ed1c \u0111\u1ed9, c\u1ea5u h\u00ecnh client HTTP, ghi log, l\u1eafng nghe c\u1eadp nh\u1eadt, v\u00e0 ph\u00e2n t\u00edch l\u1ec7nh.</p>"},{"location":"vi/Bot-configuration/#thuoc-tinh","title":"Thu\u1ed9c t\u00ednh","text":"<ul> <li><code>identifier</code>: X\u00e1c \u0111\u1ecbnh c\u00e1c instance bot kh\u00e1c nhau trong qu\u00e1 tr\u00ecnh x\u1eed l\u00fd multi-bot.</li> <li><code>apiHost</code>: Host c\u1ee7a Telegram API.</li> <li><code>isTestEnv</code>: C\u1edd ch\u1ec9 ra bot c\u00f3 ho\u1ea1t \u0111\u1ed9ng trong m\u00f4i tr\u01b0\u1eddng th\u1eed nghi\u1ec7m hay kh\u00f4ng.</li> <li><code>inputListener</code>: Instance c\u1ee7a l\u1edbp x\u1eed l\u00fd \u0111\u1ea7u v\u00e0o.</li> <li><code>classManager</code>: Tr\u00ecnh qu\u1ea3n l\u00fd \u0111\u01b0\u1ee3c s\u1eed d\u1ee5ng \u0111\u1ec3 l\u1ea5y l\u1edbp.</li> <li><code>inputAutoRemoval</code>: C\u1edd \u0111i\u1ec1u ch\u1ec9nh t\u1ef1 \u0111\u1ed9ng x\u00f3a \u0111i\u1ec3m \u0111\u1ea7u v\u00e0o trong qu\u00e1 tr\u00ecnh x\u1eed l\u00fd.</li> <li><code>exceptionHandlingStrategy</code>: \u0110\u1ecbnh ngh\u0129a chi\u1ebfn l\u01b0\u1ee3c x\u1eed l\u00fd ngo\u1ea1i l\u1ec7.<ul> <li><code>CollectToChannel</code> - Thu th\u1eadp v\u00e0o <code>TgUpdateHandler.caughtExceptions</code>.</li> <li><code>Throw</code> - N\u00e9m l\u1ea1i \u0111\u01b0\u1ee3c b\u1ecdc v\u1edbi <code>TgException</code>.</li> <li><code>DoNothing</code> - Kh\u00f4ng l\u00e0m g\u00ec :)</li> <li><code>Handle</code> - \u0110\u1eb7t tr\u00ecnh x\u1eed l\u00fd t\u00f9y ch\u1ec9nh.</li> </ul> </li> <li><code>throwExOnActionsFailure</code>: N\u00e9m ngo\u1ea1i l\u1ec7 khi b\u1ea5t k\u1ef3 request bot n\u00e0o th\u1ea5t b\u1ea1i.</li> </ul>"},{"location":"vi/Bot-configuration/#khoi-cau-hinh","title":"Kh\u1ed1i C\u1ea5u h\u00ecnh","text":"<p><code>BotConfiguration</code> c\u0169ng cung c\u1ea5p c\u00e1c h\u00e0m \u0111\u1ec3 c\u1ea5u h\u00ecnh c\u00e1c th\u00e0nh ph\u1ea7n n\u1ed9i b\u1ed9 c\u1ee7a n\u00f3:</p> <ul> <li><code>httpClient(block: HttpConfiguration.() -&gt; Unit)</code>: C\u1ea5u h\u00ecnh client HTTP.</li> <li><code>logging(block: LoggingConfiguration.() -&gt; Unit)</code>: C\u1ea5u h\u00ecnh ghi log.</li> <li><code>rateLimiter(block: RateLimiterConfiguration.() -&gt; Unit)</code>: C\u1ea5u h\u00ecnh gi\u1edbi h\u1ea1n request.</li> <li><code>updatesListener(block: UpdatesListenerConfiguration.() -&gt; Unit)</code>: C\u1ea5u h\u00ecnh tr\u00ecnh l\u1eafng nghe c\u1eadp nh\u1eadt.</li> <li><code>commandParsing(block: CommandParsingConfiguration.() -&gt; Unit)</code>: X\u00e1c \u0111\u1ecbnh pattern ph\u00e2n t\u00edch l\u1ec7nh.</li> </ul>"},{"location":"vi/Bot-configuration/#cac-lop-cau-hinh-lien-quan","title":"C\u00e1c L\u1edbp C\u1ea5u h\u00ecnh Li\u00ean quan","text":""},{"location":"vi/Bot-configuration/#ratelimiterconfiguration","title":"RateLimiterConfiguration","text":"<p>C\u1ea5u h\u00ecnh gi\u1edbi h\u1ea1n t\u1ed1c \u0111\u1ed9 to\u00e0n c\u1ee5c.</p> <ul> <li><code>limits</code>: Gi\u1edbi h\u1ea1n t\u1ed1c \u0111\u1ed9 to\u00e0n c\u1ee5c.</li> <li><code>mechanism</code>: C\u01a1 ch\u1ebf \u0111\u01b0\u1ee3c s\u1eed d\u1ee5ng cho gi\u1edbi h\u1ea1n t\u1ed1c \u0111\u1ed9, m\u1eb7c \u0111\u1ecbnh l\u00e0 thu\u1eadt to\u00e1n TokenBucket.</li> <li><code>exceededAction</code>: H\u00e0nh \u0111\u1ed9ng \u0111\u01b0\u1ee3c \u00e1p d\u1ee5ng khi v\u01b0\u1ee3t qu\u00e1 gi\u1edbi h\u1ea1n.</li> </ul>"},{"location":"vi/Bot-configuration/#httpconfiguration","title":"HttpConfiguration","text":"<p>Ch\u1ee9a c\u1ea5u h\u00ecnh cho client HTTP c\u1ee7a bot.</p> <ul> <li><code>requestTimeoutMillis</code>: Th\u1eddi gian ch\u1edd request t\u00ednh b\u1eb1ng milliseconds.</li> <li><code>connectTimeoutMillis</code>: Th\u1eddi gian ch\u1edd k\u1ebft n\u1ed1i t\u00ednh b\u1eb1ng milliseconds.</li> <li><code>socketTimeoutMillis</code>: Th\u1eddi gian ch\u1edd socket t\u00ednh b\u1eb1ng milliseconds.</li> <li><code>maxRequestRetry</code>: S\u1ed1 l\u1ea7n th\u1eed l\u1ea1i t\u1ed1i \u0111a cho HTTP requests.</li> <li><code>retryStrategy</code>: Chi\u1ebfn l\u01b0\u1ee3c cho retries, c\u00f3 th\u1ec3 t\u00f9y ch\u1ec9nh.</li> <li><code>retryDelay</code>: Nh\u00e2n t\u1eed cho th\u1eddi gian ch\u1edd \u1edf m\u1ed7i l\u1ea7n th\u1eed l\u1ea1i.</li> <li><code>proxy</code>: C\u00e0i \u0111\u1eb7t proxy cho HTTP calls.</li> <li><code>additionalHeaders</code>: Headers \u0111\u01b0\u1ee3c \u00e1p d\u1ee5ng cho m\u1ecdi request.</li> </ul>"},{"location":"vi/Bot-configuration/#loggingconfiguration","title":"LoggingConfiguration","text":"<p>Qu\u1ea3n l\u00fd m\u1ee9c ghi log cho h\u00e0nh \u0111\u1ed9ng bot v\u00e0 HTTP requests.</p> <ul> <li><code>botLogLevel</code>: M\u1ee9c log cho h\u00e0nh \u0111\u1ed9ng bot.</li> <li><code>httpLogLevel</code>: M\u1ee9c log cho HTTP requests.</li> </ul>"},{"location":"vi/Bot-configuration/#updateslistenerconfiguration","title":"UpdatesListenerConfiguration","text":"<p>C\u1ea5u h\u00ecnh c\u00e1c tham s\u1ed1 li\u00ean quan \u0111\u1ebfn pulling updates.</p> <ul> <li><code>dispatcher</code>: Dispatcher \u0111\u1ec3 thu th\u1eadp incoming updates.</li> <li><code>processingDispatcher</code>: Dispatcher \u0111\u1ec3 x\u1eed l\u00fd updates.</li> <li><code>pullingDelay</code>: \u0110\u1ed9 tr\u1ec5 sau m\u1ed7i pulling request.</li> <li><code>updatesPollingTimeout</code>: T\u00f9y ch\u1ecdn timeout cho c\u01a1 ch\u1ebf long-polling.</li> </ul>"},{"location":"vi/Bot-configuration/#commandparsingconfiguration","title":"CommandParsingConfiguration","text":"<p>X\u00e1c \u0111\u1ecbnh c\u00e1c tham s\u1ed1 cho ph\u00e2n t\u00edch l\u1ec7nh.</p> <ul> <li><code>commandDelimiter</code>: Ph\u00e2n t\u00e1ch gi\u1eefa l\u1ec7nh v\u00e0 tham s\u1ed1.</li> <li><code>parametersDelimiter</code>: Ph\u00e2n t\u00e1ch gi\u1eefa c\u00e1c tham s\u1ed1.</li> <li><code>parameterValueDelimiter</code>: Ph\u00e2n t\u00e1ch gi\u1eefa kh\u00f3a v\u00e0 gi\u00e1 tr\u1ecb c\u1ee7a tham s\u1ed1.</li> <li><code>restrictSpacesInCommands</code>: C\u1edd ch\u1ec9 ra li\u1ec7u kho\u1ea3ng tr\u1eafng trong l\u1ec7nh c\u00f3 n\u00ean \u0111\u01b0\u1ee3c coi l\u00e0 k\u1ebft th\u00fac l\u1ec7nh hay kh\u00f4ng.</li> <li><code>useIdentifierInGroupCommands</code>: S\u1eed d\u1ee5ng identifier c\u1ee7a bot \u0111\u1ec3 match l\u1ec7nh ch\u1ee9a @.</li> </ul>"},{"location":"vi/Bot-configuration/#vi-du-cau-hinh","title":"V\u00ed d\u1ee5 C\u1ea5u h\u00ecnh","text":"<p>\u0110\u00e2y l\u00e0 v\u00ed d\u1ee5 v\u1ec1 c\u00e1ch c\u1ea5u h\u00ecnh bot s\u1eed d\u1ee5ng c\u00e1c l\u1edbp n\u00e0y:</p> <pre><code>val bot = TelegramBot(\"TOKEN\") {\n    identifier = \"MyBot\",\n    apiHost = \"https://api.telegram.org\",\n    isTestEnv = true,\n    inputListener = InputListenerMapImpl(),\n    classManager = ClassManagerImpl(),\n\n    httpClient {\n        requestTimeoutMillis = 5000L\n        connectTimeoutMillis = 3000L\n        socketTimeoutMillis = 2000L\n    }\n    logging {\n        botLogLevel = LogLvl.DEBUG\n        httpLogLevel = HttpLogLevel.BODY\n    }\n    updatesListener {\n        dispatcher = Dispatchers.IO\n        processingDispatcher = Dispatchers.Unconfined\n        pullingDelay = 1000L\n    }\n    commandParsing {\n        commandDelimiter = '*'\n        parametersDelimiter = '&amp;'\n        restrictSpacesInCommands = true\n    }\n}\n</code></pre> <p>C\u1ea5u h\u00ecnh n\u00e0y thi\u1ebft l\u1eadp bot v\u1edbi c\u00e1c identifier c\u1ee5 th\u1ec3, b\u1eadt ch\u1ebf \u0111\u1ed9 test environment, c\u1ea5u h\u00ecnh gi\u1edbi h\u1ea1n t\u1ed1c \u0111\u1ed9, c\u00e0i \u0111\u1eb7t client HTTP, m\u1ee9c ghi log, c\u00e1c tham s\u1ed1 listener c\u1eadp nh\u1eadt, v\u00e0 quy t\u1eafc ph\u00e2n t\u00edch l\u1ec7nh.</p>"},{"location":"vi/Bot-configuration/#bang-cach-tan-dung-cac-tuy-chon-cau-hinh-nay-cac-nha-phat-trien-co-the-tinh-chinh-bot-cua-ho-e-ap-ung-cac-yeu-cau-cu-the-va-toi-uu-hoa-hieu-nang-tren-nhieu-kich-ban-hoat-ong-khac-nhau","title":"B\u1eb1ng c\u00e1ch t\u1eadn d\u1ee5ng c\u00e1c t\u00f9y ch\u1ecdn c\u1ea5u h\u00ecnh n\u00e0y, c\u00e1c nh\u00e0 ph\u00e1t tri\u1ec3n c\u00f3 th\u1ec3 tinh ch\u1ec9nh bot c\u1ee7a h\u1ecd \u0111\u1ec3 \u0111\u00e1p \u1ee9ng c\u00e1c y\u00eau c\u1ea7u c\u1ee5 th\u1ec3 v\u00e0 t\u1ed1i \u01b0u h\u00f3a hi\u1ec7u n\u0103ng tr\u00ean nhi\u1ec1u k\u1ecbch b\u1ea3n ho\u1ea1t \u0111\u1ed9ng kh\u00e1c nhau.","text":""},{"location":"vi/F.A.Q/","title":"C\u00e2u h\u1ecfi th\u01b0\u1eddng g\u1eb7p","text":""},{"location":"vi/F.A.Q/#ngoai-le-abstractmethoderror","title":"Ngo\u1ea1i l\u1ec7 <code>AbstractMethodError</code>","text":"<p>N\u1ebfu b\u1ea1n g\u1eb7p ngo\u1ea1i l\u1ec7 n\u00e0y khi kh\u1edfi \u0111\u1ed9ng \u1ee9ng d\u1ee5ng:</p> <pre><code>Exception in thread \"DefaultDispatcher-worker-1\" java.lang.AbstractMethodError: 'kotlinx.serialization.KSerializer[] kotlinx.serialization.internal.GeneratedSerializer.typeParametersSerializers()'\n    at eu.vendeli.tgbot.types.options.GetUpdatesOptions$$serializer.typeParametersSerializers(GetUpdatesOptions.kt:6)\n</code></pre> <p>\u0110i\u1ec1u n\u00e0y x\u1ea3y ra v\u00ec h\u1ec7 th\u1ed1ng build c\u1ee7a b\u1ea1n \u0111ang s\u1eed d\u1ee5ng th\u01b0 vi\u1ec7n serialization c\u0169 c\u00f3 c\u01a1 ch\u1ebf n\u1ed9i b\u1ed9 kh\u00e1c bi\u1ec7t. \u0110\u1ec3 kh\u1eafc ph\u1ee5c, b\u1ea1n c\u1ea7n s\u1eed d\u1ee5ng phi\u00ean b\u1ea3n m\u1edbi h\u01a1n, v\u00ed d\u1ee5 b\u1eb1ng c\u00e1ch th\u00eam \u0111o\u1ea1n n\u00e0y v\u00e0o buildscript:</p> <pre><code>configurations.all {\n    resolutionStrategy.eachDependency {\n        val serdeVer = \"x.x.x\" // n\u00ean &gt;= 1.8.0\n        when(requested.module.toString()) {\n            // json serialiazation\n            \"org.jetbrains.kotlinx:kotlinx-serialization-json\" -&gt; useVersion(serdeVer)\n            \"org.jetbrains.kotlinx:kotlinx-serialization-json-jvm\" -&gt; useVersion(serdeVer)\n            \"org.jetbrains.kotlinx:kotlinx-serialization-core\" -&gt; useVersion(serdeVer)\n            \"org.jetbrains.kotlinx:kotlinx-serialization-core-jvm\" -&gt; useVersion(serdeVer)\n            \"org.jetbrains.kotlinx:kotlinx-serialization-bom\" -&gt; useVersion(serdeVer)\n        }\n    }\n}\n</code></pre> <p>(N\u1ebfu v\u1ea5n \u0111\u1ec1 n\u00e0y \u0111\u01b0\u1ee3c m\u00f4 t\u1ea3 r\u00f5 trong changelog th\u00ec t\u00f4i \u0111\u00e3 kh\u00f4ng bao gi\u1edd n\u00e2ng c\u1ea5p n\u00f3 v\u00ec t\u00f4i nh\u1eadn \u0111\u01b0\u1ee3c qu\u00e1 nhi\u1ec1u b\u00e1o c\u00e1o v\u1ec1 v\u1ea5n \u0111\u1ec1 n\u00e0y)</p>"},{"location":"vi/F.A.Q/#lam-the-nao-e-lay-response-tu-phuong-thuc","title":"L\u00e0m th\u1ebf n\u00e0o \u0111\u1ec3 l\u1ea5y response t\u1eeb ph\u01b0\u01a1ng th\u1ee9c?","text":"<p>\u0110\u1ec3 l\u1ea5y response v\u00e0 c\u00f3 th\u1ec3 thao t\u00e1c v\u1edbi n\u00f3, b\u1ea1n c\u1ea7n s\u1eed d\u1ee5ng <code>sendReturning</code> \u1edf cu\u1ed1i ph\u01b0\u01a1ng th\u1ee9c thay v\u00ec <code>send</code>.</p> <p>Trong tr\u01b0\u1eddng h\u1ee3p n\u00e0y, l\u1edbp <code>Response</code> \u0111\u01b0\u1ee3c tr\u1ea3 v\u1ec1, ch\u1ee9a response, th\u00e0nh c\u00f4ng ho\u1eb7c th\u1ea5t b\u1ea1i, sau \u0111\u00f3 b\u1ea1n c\u1ea7n x\u1eed l\u00fd th\u1ea5t b\u1ea1i ho\u1eb7c \u0111\u01a1n gi\u1ea3n g\u1ecdi <code>getOrNull()</code>.</p> <p>C\u00f3 m\u1ed9t ph\u1ea7n v\u1ec1: X\u1eed l\u00fd responses.</p>"},{"location":"vi/F.A.Q/#toi-gap-loi-khi-su-dung-spring-boot-devtools","title":"T\u00f4i g\u1eb7p l\u1ed7i khi s\u1eed d\u1ee5ng <code>spring-boot-devtools</code>","text":"<p>\u0110i\u1ec1u n\u00e0y x\u1ea3y ra v\u00ec <code>spring-boot-devtools</code> c\u00f3 <code>classloader</code> ri\u00eang v\u00e0 kh\u00f4ng t\u00ecm th\u1ea5y c\u00e1c ph\u01b0\u01a1ng th\u1ee9c.</p> <p>B\u1ea1n c\u1ea7n th\u00eam v\u00e0o <code>resources/META-INF/spring-devtools.properties</code>:</p> <pre><code>restart.include.generated=/eu.vendeli\n</code></pre>"},{"location":"vi/F.A.Q/#lam-the-nao-e-thay-oi-engine-cua-ktor","title":"L\u00e0m th\u1ebf n\u00e0o \u0111\u1ec3 thay \u0111\u1ed5i engine c\u1ee7a ktor","text":"<p>N\u1ebfu b\u1ea1n mu\u1ed1n thay \u0111\u1ed5i engine \u0111\u01b0\u1ee3c client s\u1eed d\u1ee5ng, b\u1ea1n c\u00f3 th\u1ec3 \u0111\u01a1n gi\u1ea3n thay \u0111\u1ed5i tham s\u1ed1 trong c\u00e0i \u0111\u1eb7t plugin.</p>"},{"location":"vi/F.A.Q/#lam-the-nao-e-su-dung-provider-logging-yeu-thich-cua-toi","title":"L\u00e0m th\u1ebf n\u00e0o \u0111\u1ec3 s\u1eed d\u1ee5ng provider logging y\u00eau th\u00edch c\u1ee7a t\u00f4i","text":"<p>Th\u01b0 vi\u1ec7n s\u1eed d\u1ee5ng <code>slf4j-api</code> v\u00e0 \u0111\u1ec3 s\u1eed d\u1ee5ng provider b\u1ea1n ch\u1ec9 c\u1ea7n th\u00eam n\u00f3 v\u00e0o dependencies.</p> <p>Plugin th\u01b0 vi\u1ec7n t\u1ef1 \u0111\u1ed9ng ph\u00e1t hi\u1ec7n vi\u1ec7c s\u1eed d\u1ee5ng provider, n\u1ebfu provider b\u1ecb thi\u1ebfu, <code>logback</code> s\u1ebd \u0111\u01b0\u1ee3c s\u1eed d\u1ee5ng m\u1eb7c \u0111\u1ecbnh.</p>"},{"location":"vi/F.A.Q/#bat-ngoai-le-mang-trong-handler-long-polling","title":"B\u1eaft ngo\u1ea1i l\u1ec7 m\u1ea1ng trong handler long-polling","text":"<p>V\u00ed d\u1ee5 n\u1ebfu b\u1ea1n c\u00f3 k\u1ebft n\u1ed1i kh\u00f4ng \u1ed5n \u0111\u1ecbnh v\u00e0 c\u1ea7n b\u1eaft l\u1ed7i do \u0111i\u1ec1u n\u00e0y, c\u00f3 l\u1ebd c\u00e1ch ti\u1ebfp c\u1eadn n\u00e0y s\u1ebd gi\u00fap b\u1ea1n:</p> <pre><code>fun main() {\n    val bot = TelegramBot(\"TOKEN\")\n\n    try {\n        bot.handleUpdates()\n    } catch (e: Exception) {\n        // handle if needed\n\n        bot.update.stopListener()\n        bot.handleUpdates()\n    }\n}\n</code></pre> <p>B\u1ea1n c\u0169ng c\u00f3 th\u1ec3 xem c\u00e1ch th\u1ef1c hi\u1ec7n trong spring-starter.</p>"},{"location":"vi/FSM-and-Conversation-handling/","title":"X\u1eed L\u00fd FSM V\u00e0 H\u1ed9i Tho\u1ea1i","text":"<p>Th\u01b0 vi\u1ec7n c\u0169ng h\u1ed7 tr\u1ee3 c\u01a1 ch\u1ebf FSM, \u0111\u00e2y l\u00e0 c\u01a1 ch\u1ebf x\u1eed l\u00fd ti\u1ebfn b\u1ed9 \u0111\u1ea7u v\u00e0o c\u1ee7a ng\u01b0\u1eddi d\u00f9ng v\u1edbi vi\u1ec7c x\u1eed l\u00fd \u0111\u1ea7u v\u00e0o kh\u00f4ng ch\u00ednh x\u00e1c.</p> <p>Note</p> <p>TL;DR: Xem v\u00ed d\u1ee5 \u1edf \u0111\u00f3.</p>"},{"location":"vi/FSM-and-Conversation-handling/#ve-mat-ly-thuyet","title":"V\u1ec1 m\u1eb7t l\u00fd thuy\u1ebft","text":"<p>H\u00e3y t\u01b0\u1edfng t\u01b0\u1ee3ng m\u1ed9t t\u00ecnh hu\u1ed1ng b\u1ea1n c\u1ea7n thu th\u1eadp kh\u1ea3o s\u00e1t ng\u01b0\u1eddi d\u00f9ng, b\u1ea1n c\u00f3 th\u1ec3 h\u1ecfi t\u1ea5t c\u1ea3 d\u1eef li\u1ec7u c\u1ee7a m\u1ed9t ng\u01b0\u1eddi trong m\u1ed9t b\u01b0\u1edbc, nh\u01b0ng v\u1edbi \u0111\u1ea7u v\u00e0o kh\u00f4ng ch\u00ednh x\u00e1c c\u1ee7a m\u1ed9t trong c\u00e1c tham s\u1ed1, n\u00f3 s\u1ebd kh\u00f3 kh\u0103n c\u1ea3 cho ng\u01b0\u1eddi d\u00f9ng v\u00e0 cho ch\u00fang ta, v\u00e0 m\u1ed7i b\u01b0\u1edbc c\u00f3 th\u1ec3 kh\u00e1c nhau t\u00f9y thu\u1ed9c v\u00e0o m\u1ed9t s\u1ed1 d\u1eef li\u1ec7u \u0111\u1ea7u v\u00e0o nh\u1ea5t \u0111\u1ecbnh.</p> <p>B\u00e2y gi\u1edd h\u00e3y t\u01b0\u1edfng t\u01b0\u1ee3ng \u0111\u1ea7u v\u00e0o t\u1eebng b\u01b0\u1edbc c\u1ee7a d\u1eef li\u1ec7u, n\u01a1i bot \u0111i v\u00e0o ch\u1ebf \u0111\u1ed9 h\u1ed9i tho\u1ea1i v\u1edbi ng\u01b0\u1eddi d\u00f9ng.</p> <p> </p> <p>M\u0169i t\u00ean m\u00e0u xanh l\u00e1 c\u00e2y ch\u1ec9 qu\u00e1 tr\u00ecnh chuy\u1ec3n ti\u1ebfp qua c\u00e1c b\u01b0\u1edbc kh\u00f4ng c\u00f3 l\u1ed7i, m\u0169i t\u00ean m\u00e0u xanh d\u01b0\u01a1ng c\u00f3 ngh\u0129a l\u00e0 l\u01b0u tr\u1ea1ng th\u00e1i hi\u1ec7n t\u1ea1i v\u00e0 ch\u1edd nh\u1eadp l\u1ea1i (v\u00ed d\u1ee5: n\u1ebfu ng\u01b0\u1eddi d\u00f9ng ch\u1ec9 ra r\u1eb1ng anh ta -100 tu\u1ed5i, n\u00f3 n\u00ean h\u1ecfi l\u1ea1i tu\u1ed5i), v\u00e0 m\u0169i t\u00ean m\u00e0u \u0111\u1ecf hi\u1ec3n th\u1ecb tho\u00e1t kh\u1ecfi to\u00e0n b\u1ed9 qu\u00e1 tr\u00ecnh do b\u1ea5t k\u1ef3 l\u1ec7nh n\u00e0o ho\u1eb7c b\u1ea5t k\u1ef3 \u00fd ngh\u0129a h\u1ee7y b\u1ecf n\u00e0o kh\u00e1c.</p>"},{"location":"vi/FSM-and-Conversation-handling/#trong-thuc-te","title":"Trong th\u1ef1c t\u1ebf","text":"<p>H\u1ec7 th\u1ed1ng Wizard cho ph\u00e9p t\u01b0\u01a1ng t\u00e1c nhi\u1ec1u b\u01b0\u1edbc v\u1edbi ng\u01b0\u1eddi d\u00f9ng trong c\u00e1c bot Telegram. N\u00f3 h\u01b0\u1edbng d\u1eabn ng\u01b0\u1eddi d\u00f9ng qua m\u1ed9t chu\u1ed7i c\u00e1c b\u01b0\u1edbc, x\u00e1c th\u1ef1c \u0111\u1ea7u v\u00e0o, l\u01b0u tr\u1ea1ng th\u00e1i v\u00e0 chuy\u1ec3n ti\u1ebfp gi\u1eefa c\u00e1c b\u01b0\u1edbc.</p> <p>L\u1ee3i \u00edch ch\u00ednh: - An to\u00e0n ki\u1ec3u: Ki\u1ec3m tra ki\u1ec3u t\u1ea1i th\u1eddi gian bi\u00ean d\u1ecbch cho truy c\u1eadp tr\u1ea1ng th\u00e1i - Khai b\u00e1o: \u0110\u1ecbnh ngh\u0129a c\u00e1c b\u01b0\u1edbc d\u01b0\u1edbi d\u1ea1ng l\u1edbp/nh\u00f3m l\u1ed3ng nhau - Linh ho\u1ea1t: H\u1ed7 tr\u1ee3 chuy\u1ec3n ti\u1ebfp c\u00f3 \u0111i\u1ec1u ki\u1ec7n, nh\u1ea3y v\u00e0 th\u1eed l\u1ea1i - C\u00f3 tr\u1ea1ng th\u00e1i: T\u1ef1 \u0111\u1ed9ng l\u01b0u tr\u1eef tr\u1ea1ng th\u00e1i v\u1edbi backend l\u01b0u tr\u1eef c\u00f3 th\u1ec3 c\u1eafm \u0111\u01b0\u1ee3c - T\u00edch h\u1ee3p: Ho\u1ea1t \u0111\u1ed9ng v\u1edbi h\u1ec7 th\u1ed1ng Activity hi\u1ec7n c\u00f3</p>"},{"location":"vi/FSM-and-Conversation-handling/#cac-khai-niem-cot-loi","title":"C\u00e1c Kh\u00e1i Ni\u1ec7m C\u1ed1t L\u00f5i","text":""},{"location":"vi/FSM-and-Conversation-handling/#wizardstep","title":"WizardStep","text":"<p><code>WizardStep</code> \u0111\u1ea1i di\u1ec7n cho m\u1ed9t b\u01b0\u1edbc \u0111\u01a1n trong lu\u1ed3ng wizard. M\u1ed7i b\u01b0\u1edbc ph\u1ea3i tri\u1ec3n khai:</p> <ul> <li><code>onEntry(ctx: WizardContext)</code>: \u0110\u01b0\u1ee3c g\u1ecdi khi ng\u01b0\u1eddi d\u00f9ng v\u00e0o b\u01b0\u1edbc n\u00e0y. S\u1eed d\u1ee5ng \u0111\u1ec3 nh\u1eafc ng\u01b0\u1eddi d\u00f9ng.</li> <li><code>onRetry(ctx: WizardContext)</code>: \u0110\u01b0\u1ee3c g\u1ecdi khi x\u00e1c th\u1ef1c th\u1ea5t b\u1ea1i v\u00e0 b\u01b0\u1edbc n\u00ean th\u1eed l\u1ea1i. S\u1eed d\u1ee5ng \u0111\u1ec3 hi\u1ec3n th\u1ecb th\u00f4ng b\u00e1o l\u1ed7i.</li> <li><code>validate(ctx: WizardContext): Transition</code>: X\u00e1c th\u1ef1c \u0111\u1ea7u v\u00e0o hi\u1ec7n t\u1ea1i v\u00e0 tr\u1ea3 v\u1ec1 <code>Transition</code> ch\u1ec9 ra \u0111i\u1ec1u g\u00ec x\u1ea3y ra ti\u1ebfp theo.</li> <li><code>store(ctx: WizardContext): Any?</code> (t\u00f9y ch\u1ecdn): Tr\u1ea3 v\u1ec1 gi\u00e1 tr\u1ecb \u0111\u1ec3 l\u01b0u tr\u1eef cho b\u01b0\u1edbc n\u00e0y. Tr\u1ea3 v\u1ec1 <code>null</code> n\u1ebfu b\u01b0\u1edbc kh\u00f4ng l\u01b0u tr\u1eef tr\u1ea1ng th\u00e1i.</li> </ul> <pre><code>object NameStep : WizardStep(isInitial = true) {\n    override suspend fun onEntry(ctx: WizardContext) {\n        message { \"What is your name?\" }.send(ctx.user, ctx.bot)\n    }\n\n    override suspend fun onRetry(ctx: WizardContext) {\n        message { \"Name cannot be empty. Please try again.\" }.send(ctx.user, ctx.bot)\n    }\n\n    override suspend fun validate(ctx: WizardContext): Transition {\n        return if (ctx.update.text.isNullOrBlank()) {\n            Transition.Retry\n        } else {\n            Transition.Next\n        }\n    }\n\n    override suspend fun store(ctx: WizardContext): String {\n        return ctx.update.text!!\n    }\n}\n</code></pre> <p>Note</p> <p>N\u1ebfu m\u1ed9t s\u1ed1 b\u01b0\u1edbc kh\u00f4ng \u0111\u01b0\u1ee3c \u0111\u00e1nh d\u1ea5u l\u00e0 ban \u0111\u1ea7u -&gt; b\u01b0\u1edbc \u0111\u01b0\u1ee3c khai b\u00e1o \u0111\u1ea7u ti\u00ean \u0111\u01b0\u1ee3c coi l\u00e0.</p>"},{"location":"vi/FSM-and-Conversation-handling/#transition","title":"Transition","text":"<p><code>Transition</code> x\u00e1c \u0111\u1ecbnh \u0111i\u1ec1u g\u00ec x\u1ea3y ra sau khi x\u00e1c th\u1ef1c:</p> <ul> <li><code>Transition.Next</code>: Chuy\u1ec3n sang b\u01b0\u1edbc ti\u1ebfp theo trong chu\u1ed7i</li> <li><code>Transition.JumpTo(step: KClass&lt;out WizardStep&gt;)</code>: Nh\u1ea3y \u0111\u1ebfn m\u1ed9t b\u01b0\u1edbc c\u1ee5 th\u1ec3</li> <li><code>Transition.Retry</code>: Th\u1eed l\u1ea1i b\u01b0\u1edbc hi\u1ec7n t\u1ea1i (x\u00e1c th\u1ef1c th\u1ea5t b\u1ea1i)</li> <li><code>Transition.Finish</code>: K\u1ebft th\u00fac wizard</li> </ul> <pre><code>// Nh\u1ea3y c\u00f3 \u0111i\u1ec1u ki\u1ec7n d\u1ef1a tr\u00ean \u0111\u1ea7u v\u00e0o\noverride suspend fun validate(ctx: WizardContext): Transition {\n    val age = ctx.update.text?.toIntOrNull()\n    return when {\n        age == null -&gt; Transition.Retry\n        age &lt; 18 -&gt; Transition.JumpTo(UnderageStep::class)\n        else -&gt; Transition.Next\n    }\n}\n</code></pre>"},{"location":"vi/FSM-and-Conversation-handling/#wizardcontext","title":"WizardContext","text":"<p><code>WizardContext</code> cung c\u1ea5p quy\u1ec1n truy c\u1eadp v\u00e0o: - <code>user: User</code>: Ng\u01b0\u1eddi d\u00f9ng hi\u1ec7n t\u1ea1i - <code>update: ProcessedUpdate</code>: C\u1eadp nh\u1eadt hi\u1ec7n t\u1ea1i - <code>bot: TelegramBot</code>: Th\u1ec3 hi\u1ec7n bot - <code>userReference: UserChatReference</code>: Tham chi\u1ebfu ID ng\u01b0\u1eddi d\u00f9ng v\u00e0 chat cho l\u01b0u tr\u1eef tr\u1ea1ng th\u00e1i</p> <p>C\u1ed9ng v\u1edbi c\u00e1c ph\u01b0\u01a1ng th\u1ee9c truy c\u1eadp tr\u1ea1ng th\u00e1i an to\u00e0n ki\u1ec3u (\u0111\u01b0\u1ee3c t\u1ea1o b\u1edfi KSP).</p>"},{"location":"vi/FSM-and-Conversation-handling/#inh-nghia-mot-wizard","title":"\u0110\u1ecbnh Ngh\u0129a M\u1ed9t Wizard","text":""},{"location":"vi/FSM-and-Conversation-handling/#cau-truc-co-ban","title":"C\u1ea5u Tr\u00fac C\u01a1 B\u1ea3n","text":"<p>M\u1ed9t wizard \u0111\u01b0\u1ee3c \u0111\u1ecbnh ngh\u0129a l\u00e0 m\u1ed9t l\u1edbp ho\u1eb7c \u0111\u1ed1i t\u01b0\u1ee3ng \u0111\u01b0\u1ee3c ch\u00fa th\u00edch v\u1edbi <code>@WizardHandler</code>:</p> <pre><code>@WizardHandler(trigger = [\"/survey\"])\nobject SurveyWizard {\n    object NameStep : WizardStep(isInitial = true) {\n        // ... tri\u1ec3n khai b\u01b0\u1edbc\n    }\n\n    object AgeStep : WizardStep {\n        // ... tri\u1ec3n khai b\u01b0\u1edbc\n    }\n\n    object FinishStep : WizardStep {\n        // ... tri\u1ec3n khai b\u01b0\u1edbc\n    }\n}\n</code></pre>"},{"location":"vi/FSM-and-Conversation-handling/#tham-so-chu-thich","title":"Tham S\u1ed1 Ch\u00fa Th\u00edch","text":"<p><code>@WizardHandler</code> ch\u1ea5p nh\u1eadn: - <code>trigger: Array&lt;String&gt;</code>: L\u1ec7nh b\u1eaft \u0111\u1ea7u wizard (v\u00ed d\u1ee5: <code>[\"/start\", \"/survey\"]</code>) - <code>scope: Array&lt;UpdateType&gt;</code>: C\u00e1c lo\u1ea1i c\u1eadp nh\u1eadt \u0111\u1ec3 l\u1eafng nghe (m\u1eb7c \u0111\u1ecbnh: <code>[UpdateType.MESSAGE]</code>) - <code>stateManagers: Array&lt;KClass&lt;out WizardStateManager&lt;*&gt;&gt;&gt;</code>: C\u00e1c l\u1edbp qu\u1ea3n l\u00fd tr\u1ea1ng th\u00e1i cho l\u01b0u tr\u1eef d\u1eef li\u1ec7u b\u01b0\u1edbc</p>"},{"location":"vi/FSM-and-Conversation-handling/#quan-ly-trang-thai","title":"Qu\u1ea3n L\u00fd Tr\u1ea1ng Th\u00e1i","text":""},{"location":"vi/FSM-and-Conversation-handling/#wizardstatemanager","title":"WizardStateManager","text":"<p>Tr\u1ea1ng th\u00e1i \u0111\u01b0\u1ee3c l\u01b0u tr\u1eef s\u1eed d\u1ee5ng c\u00e1c tri\u1ec3n khai <code>WizardStateManager&lt;T&gt;</code>. M\u1ed7i tr\u00ecnh qu\u1ea3n l\u00fd x\u1eed l\u00fd m\u1ed9t ki\u1ec3u c\u1ee5 th\u1ec3:</p> <pre><code>interface WizardStateManager&lt;T : Any&gt; {\n    suspend fun get(key: KClass&lt;out WizardStep&gt;, reference: UserChatReference): T?\n    suspend fun set(key: KClass&lt;out WizardStep&gt;, reference: UserChatReference, value: T)\n    suspend fun del(key: KClass&lt;out WizardStep&gt;, reference: UserChatReference)\n}\n</code></pre> <p>Xem th\u00eam: MapStateManager, MapStringStateManager, MapIntStateManager, MapLongStateManager."},{"location":"vi/FSM-and-Conversation-handling/#ghep-oi-tu-ong","title":"Gh\u00e9p \u0110\u00f4i T\u1ef1 \u0110\u1ed9ng","text":"<p>KSP gh\u00e9p c\u00e1c b\u01b0\u1edbc v\u1edbi tr\u00ecnh qu\u1ea3n l\u00fd tr\u1ea1ng th\u00e1i d\u1ef1a tr\u00ean ki\u1ec3u tr\u1ea3 v\u1ec1 c\u1ee7a <code>store()</code>:</p> <pre><code>@WizardHandler(\n    trigger = [\"/survey\"],\n    stateManagers = [StringStateManager::class, IntStateManager::class]\n)\nobject SurveyWizard {\n    object NameStep : WizardStep(isInitial = true) {\n        override suspend fun store(ctx: WizardContext): String {\n            return ctx.update.text!! // Kh\u1edbp v\u1edbi StringStateManager\n        }\n    }\n\n    object AgeStep : WizardStep {\n        override suspend fun store(ctx: WizardContext): Int {\n            return ctx.update.text!!.toInt() // Kh\u1edbp v\u1edbi IntStateManager\n        }\n    }\n}\n</code></pre>"},{"location":"vi/FSM-and-Conversation-handling/#ghi-e-theo-buoc","title":"Ghi \u0110\u00e8 Theo B\u01b0\u1edbc","text":"<p>Ghi \u0111\u00e8 tr\u00ecnh qu\u1ea3n l\u00fd tr\u1ea1ng th\u00e1i cho m\u1ed9t b\u01b0\u1edbc c\u1ee5 th\u1ec3 s\u1eed d\u1ee5ng <code>@WizardHandler.StateManager</code>:</p> <pre><code>@WizardHandler(\n    trigger = [\"/survey\"],\n    stateManagers = [DefaultStateManager::class]\n)\nobject SurveyWizard {\n    object NameStep : WizardStep(isInitial = true) {\n        // S\u1eed d\u1ee5ng DefaultStateManager\n    }\n\n    @WizardHandler.StateManager(CustomStateManager::class)\n    object AgeStep : WizardStep {\n        // S\u1eed d\u1ee5ng CustomStateManager thay th\u1ebf\n    }\n}\n</code></pre>"},{"location":"vi/FSM-and-Conversation-handling/#truy-cap-trang-thai-an-toan-kieu","title":"Truy C\u1eadp Tr\u1ea1ng Th\u00e1i An To\u00e0n Ki\u1ec3u","text":"<p>KSP t\u1ea1o c\u00e1c h\u00e0m m\u1edf r\u1ed9ng an to\u00e0n ki\u1ec3u tr\u00ean <code>WizardContext</code> cho m\u1ed7i b\u01b0\u1edbc l\u01b0u tr\u1eef tr\u1ea1ng th\u00e1i.</p>"},{"location":"vi/FSM-and-Conversation-handling/#ham-uoc-tao","title":"H\u00e0m \u0110\u01b0\u1ee3c T\u1ea1o","text":"<p>\u0110\u1ed1i v\u1edbi m\u1ed9t b\u01b0\u1edbc l\u01b0u tr\u1eef <code>String</code>:</p> <pre><code>// \u0110\u01b0\u1ee3c t\u1ea1o t\u1ef1 \u0111\u1ed9ng b\u1edfi KSP\nsuspend inline fun &lt;reified S : WizardStep&gt; WizardContext.getState(): String?\nsuspend inline fun &lt;reified S : WizardStep&gt; WizardContext.setState(value: String)\nsuspend inline fun &lt;reified S : WizardStep&gt; WizardContext.delState()\n</code></pre>"},{"location":"vi/FSM-and-Conversation-handling/#cach-su-dung","title":"C\u00e1ch S\u1eed D\u1ee5ng","text":"<pre><code>object FinishStep : WizardStep {\n    override suspend fun onEntry(ctx: WizardContext) {\n        // Truy c\u1eadp an to\u00e0n ki\u1ec3u - tr\u1ea3 v\u1ec1 String? (nullable)\n        val name: String? = ctx.getState&lt;NameStep&gt;()\n\n        // Truy c\u1eadp an to\u00e0n ki\u1ec3u - tr\u1ea3 v\u1ec1 Int? (nullable)\n        val age: Int? = ctx.getState&lt;AgeStep&gt;()\n\n        val summary = buildString {\n            appendLine(\"Name: $name\")\n            appendLine(\"Age: $age\")\n        }\n\n        message { summary }.send(ctx.user, ctx.bot)\n    }\n\n    override suspend fun onRetry(ctx: WizardContext) = Unit\n\n    override suspend fun validate(ctx: WizardContext): Transition {\n        return Transition.Finish\n    }\n}\n</code></pre>"},{"location":"vi/FSM-and-Conversation-handling/#phuong-thuc-du-phong","title":"Ph\u01b0\u01a1ng Th\u1ee9c D\u1ef1 Ph\u00f2ng","text":"<p>N\u1ebfu c\u00e1c ph\u01b0\u01a1ng th\u1ee9c an to\u00e0n ki\u1ec3u kh\u00f4ng kh\u1ea3 d\u1ee5ng, s\u1eed d\u1ee5ng c\u00e1c ph\u01b0\u01a1ng th\u1ee9c d\u1ef1 ph\u00f2ng:</p> <pre><code>// D\u1ef1 ph\u00f2ng - tr\u1ea3 v\u1ec1 Any?\nval name = ctx.getState(NameStep::class)\n\n// D\u1ef1 ph\u00f2ng - ch\u1ea5p nh\u1eadn Any?\nctx.setState(NameStep::class, \"John\")\nctx.delState(NameStep::class)\n</code></pre>"},{"location":"vi/FSM-and-Conversation-handling/#vi-du-hoan-chinh","title":"V\u00ed D\u1ee5 Ho\u00e0n Ch\u1ec9nh","text":""},{"location":"vi/FSM-and-Conversation-handling/#wizard-ang-ky-nguoi-dung","title":"Wizard \u0110\u0103ng K\u00fd Ng\u01b0\u1eddi D\u00f9ng","text":"<pre><code>@WizardHandler(\n    trigger = [\"/register\"],\n    stateManagers = [StringStateManager::class, IntStateManager::class]\n)\nobject RegistrationWizard {\n    object NameStep : WizardStep(isInitial = true) {\n        override suspend fun onEntry(ctx: WizardContext) {\n            message { \"What is your name?\" }.send(ctx.user, ctx.bot)\n        }\n\n        override suspend fun onRetry(ctx: WizardContext) {\n            message { \"Please enter a valid name.\" }.send(ctx.user, ctx.bot)\n        }\n\n        override suspend fun validate(ctx: WizardContext): Transition {\n            val name = ctx.update.text?.trim()\n            return if (name.isNullOrBlank() || name.length &lt; 2) {\n                Transition.Retry\n            } else {\n                Transition.Next\n            }\n        }\n\n        override suspend fun store(ctx: WizardContext): String {\n            return ctx.update.text!!.trim()\n        }\n    }\n\n    object AgeStep : WizardStep {\n        override suspend fun onEntry(ctx: WizardContext) {\n            message { \"How old are you?\" }.send(ctx.user, ctx.bot)\n        }\n\n        override suspend fun onRetry(ctx: WizardContext) {\n            message { \"Please enter a valid age (must be a number).\" }.send(ctx.user, ctx.bot)\n        }\n\n        override suspend fun validate(ctx: WizardContext): Transition {\n            val age = ctx.update.text?.toIntOrNull()\n            return when {\n                age == null -&gt; Transition.Retry\n                age &lt; 0 || age &gt; 150 -&gt; Transition.Retry\n                age &lt; 18 -&gt; Transition.JumpTo(UnderageStep::class)\n                else -&gt; Transition.Next\n            }\n        }\n\n        override suspend fun store(ctx: WizardContext): Int {\n            return ctx.update.text!!.toInt()\n        }\n    }\n\n    object UnderageStep : WizardStep {\n        override suspend fun onEntry(ctx: WizardContext) {\n            message { \n                \"Sorry, you must be 18 or older to register.\" \n            }.send(ctx.user, ctx.bot)\n        }\n\n        override suspend fun onRetry(ctx: WizardContext) = Unit\n\n        override suspend fun validate(ctx: WizardContext): Transition {\n            return Transition.Finish\n        }\n    }\n\n    object ConfirmationStep : WizardStep {\n        override suspend fun onEntry(ctx: WizardContext) {\n            // Truy c\u1eadp tr\u1ea1ng th\u00e1i an to\u00e0n ki\u1ec3u\n            val name: String? = ctx.getState&lt;NameStep&gt;()\n            val age: Int? = ctx.getState&lt;AgeStep&gt;()\n\n            val confirmation = buildString {\n                appendLine(\"Please confirm your information:\")\n                appendLine(\"Name: $name\")\n                appendLine(\"Age: $age\")\n                appendLine()\n                appendLine(\"Reply 'yes' to confirm or 'no' to start over.\")\n            }\n\n            message { confirmation }.send(ctx.user, ctx.bot)\n        }\n\n        override suspend fun onRetry(ctx: WizardContext) {\n            message { \"Please reply 'yes' or 'no'.\" }.send(ctx.user, ctx.bot)\n        }\n\n        override suspend fun validate(ctx: WizardContext): Transition {\n            val response = ctx.update.text?.lowercase()?.trim()\n            return when (response) {\n                \"yes\" -&gt; Transition.Finish\n                \"no\" -&gt; Transition.JumpTo(NameStep::class) // B\u1eaft \u0111\u1ea7u l\u1ea1i\n                else -&gt; Transition.Retry\n            }\n        }\n    }\n\n    object FinishStep : WizardStep {\n        override suspend fun onEntry(ctx: WizardContext) {\n            val name: String? = ctx.getState&lt;NameStep&gt;()\n            val age: Int? = ctx.getState&lt;AgeStep&gt;()\n\n            // L\u01b0u v\u00e0o c\u01a1 s\u1edf d\u1eef li\u1ec7u, g\u1eedi x\u00e1c nh\u1eadn, v.v.\n            message { \n                \"Registration complete! Welcome, $name (age $age).\" \n            }.send(ctx.user, ctx.bot)\n        }\n\n        override suspend fun onRetry(ctx: WizardContext) = Unit\n\n        override suspend fun validate(ctx: WizardContext): Transition {\n            return Transition.Finish\n        }\n    }\n}\n</code></pre>"},{"location":"vi/FSM-and-Conversation-handling/#tinh-nang-nang-cao","title":"T\u00ednh N\u0103ng N\u00e2ng Cao","text":""},{"location":"vi/FSM-and-Conversation-handling/#chuyen-tiep-co-ieu-kien","title":"Chuy\u1ec3n Ti\u1ebfp C\u00f3 \u0110i\u1ec1u Ki\u1ec7n","text":"<p>S\u1eed d\u1ee5ng <code>Transition.JumpTo</code> cho lu\u1ed3ng c\u00f3 \u0111i\u1ec1u ki\u1ec7n:</p> <pre><code>override suspend fun validate(ctx: WizardContext): Transition {\n    val choice = ctx.update.text?.lowercase()\n    return when (choice) {\n        \"premium\" -&gt; Transition.JumpTo(PremiumStep::class)\n        \"basic\" -&gt; Transition.JumpTo(BasicStep::class)\n        else -&gt; Transition.Retry\n    }\n}\n</code></pre>"},{"location":"vi/FSM-and-Conversation-handling/#cac-buoc-khong-co-trang-thai","title":"C\u00e1c B\u01b0\u1edbc Kh\u00f4ng C\u00f3 Tr\u1ea1ng Th\u00e1i","text":"<p>C\u00e1c b\u01b0\u1edbc kh\u00f4ng c\u1ea7n l\u01b0u tr\u1eef tr\u1ea1ng th\u00e1i. \u0110\u01a1n gi\u1ea3n tr\u1ea3 v\u1ec1 <code>null</code> t\u1eeb <code>store()</code> (ho\u1eb7c gi\u1eef nguy\u00ean):</p> <pre><code>object ConfirmationStep : WizardStep {\n    override suspend fun store(ctx: WizardContext): Any? = null\n    // ... ph\u1ea7n c\u00f2n l\u1ea1i c\u1ee7a tri\u1ec3n khai\n}\n</code></pre>"},{"location":"vi/FSM-and-Conversation-handling/#trinh-quan-ly-trang-thai-tuy-chinh","title":"Tr\u00ecnh Qu\u1ea3n L\u00fd Tr\u1ea1ng Th\u00e1i T\u00f9y Ch\u1ec9nh","text":"<p>Tri\u1ec3n khai <code>WizardStateManager&lt;T&gt;</code> cho l\u01b0u tr\u1eef t\u00f9y ch\u1ec9nh (c\u01a1 s\u1edf d\u1eef li\u1ec7u, Redis, v.v.):</p> <pre><code>class DatabaseStateManager : WizardStateManager&lt;String&gt; {\n    override suspend fun get(\n        key: KClass&lt;out WizardStep&gt;,\n        reference: UserChatReference\n    ): String? {\n        // T\u1ea3i t\u1eeb c\u01a1 s\u1edf d\u1eef li\u1ec7u\n        return database.getWizardState(reference.userId, key.qualifiedName)\n    }\n\n    override suspend fun set(\n        key: KClass&lt;out WizardStep&gt;,\n        reference: UserChatReference,\n        value: String\n    ) {\n        // L\u01b0u v\u00e0o c\u01a1 s\u1edf d\u1eef li\u1ec7u\n        database.saveWizardState(reference.userId, key.qualifiedName, value)\n    }\n\n    override suspend fun del(\n        key: KClass&lt;out WizardStep&gt;,\n        reference: UserChatReference\n    ) {\n        // X\u00f3a kh\u1ecfi c\u01a1 s\u1edf d\u1eef li\u1ec7u\n        database.deleteWizardState(reference.userId, key.qualifiedName)\n    }\n}\n</code></pre>"},{"location":"vi/FSM-and-Conversation-handling/#cach-no-hoat-ong-ben-trong","title":"C\u00e1ch N\u00f3 Ho\u1ea1t \u0110\u1ed9ng B\u00ean Trong","text":""},{"location":"vi/FSM-and-Conversation-handling/#tao-ma","title":"T\u1ea1o M\u00e3","text":"<p>KSP t\u1ea1o:</p> <ol> <li>WizardActivity: M\u1ed9t tri\u1ec3n khai c\u1ee5 th\u1ec3 m\u1edf r\u1ed9ng <code>WizardActivity</code> v\u1edbi c\u00e1c b\u01b0\u1edbc \u0111\u01b0\u1ee3c m\u00e3 h\u00f3a c\u1ee9ng</li> <li>Start Activity: X\u1eed l\u00fd tr\u00ecnh k\u00edch ho\u1ea1t l\u1ec7nh v\u00e0 b\u1eaft \u0111\u1ea7u wizard</li> <li>Input Activity: X\u1eed l\u00fd \u0111\u1ea7u v\u00e0o ng\u01b0\u1eddi d\u00f9ng trong lu\u1ed3ng wizard</li> <li>State Accessors: C\u00e1c h\u00e0m m\u1edf r\u1ed9ng an to\u00e0n ki\u1ec3u cho truy c\u1eadp tr\u1ea1ng th\u00e1i</li> </ol>"},{"location":"vi/FSM-and-Conversation-handling/#luong","title":"Lu\u1ed3ng","text":"<ol> <li>Ng\u01b0\u1eddi d\u00f9ng g\u1eedi <code>/register</code> \u2192 Start Activity \u0111\u01b0\u1ee3c g\u1ecdi</li> <li>Start Activity t\u1ea1o <code>WizardContext</code> v\u00e0 g\u1ecdi <code>wizardActivity.start(ctx)</code></li> <li><code>start()</code> v\u00e0o b\u01b0\u1edbc ban \u0111\u1ea7u v\u00e0 thi\u1ebft l\u1eadp <code>inputListener</code> \u0111\u1ec3 theo d\u00f5i b\u01b0\u1edbc hi\u1ec7n t\u1ea1i</li> <li>Ng\u01b0\u1eddi d\u00f9ng g\u1eedi tin nh\u1eafn \u2192 Input Activity \u0111\u01b0\u1ee3c g\u1ecdi</li> <li>Input Activity g\u1ecdi <code>wizardActivity.handleInput(ctx)</code></li> <li><code>handleInput()</code> x\u00e1c th\u1ef1c \u0111\u1ea7u v\u00e0o, l\u01b0u tr\u1eef tr\u1ea1ng th\u00e1i v\u00e0 chuy\u1ec3n ti\u1ebfp sang b\u01b0\u1edbc ti\u1ebfp theo</li> <li>Qu\u00e1 tr\u00ecnh l\u1eb7p l\u1ea1i cho \u0111\u1ebfn khi <code>Transition.Finish</code> \u0111\u01b0\u1ee3c tr\u1ea3 v\u1ec1</li> </ol>"},{"location":"vi/FSM-and-Conversation-handling/#luu-tru-trang-thai","title":"L\u01b0u Tr\u1eef Tr\u1ea1ng Th\u00e1i","text":"<ul> <li>Tr\u1ea1ng th\u00e1i \u0111\u01b0\u1ee3c l\u01b0u tr\u1eef sau khi x\u00e1c th\u1ef1c th\u00e0nh c\u00f4ng (tr\u01b0\u1edbc khi chuy\u1ec3n ti\u1ebfp)</li> <li>Gi\u00e1 tr\u1ecb tr\u1ea3 v\u1ec1 c\u1ee7a <code>store()</code> cho m\u1ed7i b\u01b0\u1edbc \u0111\u01b0\u1ee3c l\u01b0u tr\u1eef s\u1eed d\u1ee5ng <code>WizardStateManager</code> kh\u1edbp</li> <li>Tr\u1ea1ng th\u00e1i \u0111\u01b0\u1ee3c gi\u1edbi h\u1ea1n theo ng\u01b0\u1eddi d\u00f9ng v\u00e0 chat (<code>UserChatReference</code>)</li> </ul>"},{"location":"vi/FSM-and-Conversation-handling/#thuc-hanh-tot-nhat","title":"Th\u1ef1c H\u00e0nh T\u1ed1t Nh\u1ea5t","text":""},{"location":"vi/FSM-and-Conversation-handling/#1-luon-cung-cap-loi-nhac-ro-rang","title":"1. Lu\u00f4n Cung C\u1ea5p L\u1eddi Nh\u1eafc R\u00f5 R\u00e0ng","text":"<pre><code>override suspend fun onEntry(ctx: WizardContext) {\n    message { \n        \"Please enter your email address:\\n\" +\n        \"(Format: user@example.com)\" \n    }.send(ctx.user, ctx.bot)\n}\n</code></pre>"},{"location":"vi/FSM-and-Conversation-handling/#2-xu-ly-loi-xac-thuc-mot-cach-lich-su","title":"2. X\u1eed L\u00fd L\u1ed7i X\u00e1c Th\u1ef1c M\u1ed9t C\u00e1ch L\u1ecbch S\u1ef1","text":"<pre><code>override suspend fun onRetry(ctx: WizardContext) {\n    message { \n        \"Invalid email format. Please try again.\\n\" +\n        \"Example: user@example.com\" \n    }.send(ctx.user, ctx.bot)\n}\n</code></pre>"},{"location":"vi/FSM-and-Conversation-handling/#3-su-dung-truy-cap-trang-thai-an-toan-kieu","title":"3. S\u1eed D\u1ee5ng Truy C\u1eadp Tr\u1ea1ng Th\u00e1i An To\u00e0n Ki\u1ec3u","text":"<p>Th\u00edch c\u00e1c ph\u01b0\u01a1ng th\u1ee9c an to\u00e0n ki\u1ec3u \u0111\u01b0\u1ee3c t\u1ea1o:</p> <pre><code>// \u2705 T\u1ed1t - an to\u00e0n ki\u1ec3u\nval name: String? = ctx.getState&lt;NameStep&gt;()\n\n// \u274c Tr\u00e1nh - m\u1ea5t an to\u00e0n ki\u1ec3u\nval name = ctx.getState(NameStep::class) as? String\n</code></pre>"},{"location":"vi/FSM-and-Conversation-handling/#4-giu-cac-buoc-tap-trung","title":"4. Gi\u1eef C\u00e1c B\u01b0\u1edbc T\u1eadp Trung","text":"<p>M\u1ed7i b\u01b0\u1edbc n\u00ean c\u00f3 m\u1ed9t tr\u00e1ch nhi\u1ec7m duy nh\u1ea5t:</p> <pre><code>// \u2705 T\u1ed1t - b\u01b0\u1edbc t\u1eadp trung\nobject EmailStep : WizardStep {\n    // Ch\u1ec9 x\u1eed l\u00fd thu th\u1eadp email\n}\n\n// \u274c Tr\u00e1nh - qu\u00e1 nhi\u1ec1u logic\nobject PersonalInfoStep : WizardStep {\n    // X\u1eed l\u00fd t\u00ean, email, \u0111i\u1ec7n tho\u1ea1i, \u0111\u1ecba ch\u1ec9...\n}\n</code></pre>"},{"location":"vi/FSM-and-Conversation-handling/#5-su-dung-ten-buoc-co-y-nghia","title":"5. S\u1eed D\u1ee5ng T\u00ean B\u01b0\u1edbc C\u00f3 \u00dd Ngh\u0129a","text":"<pre><code>// \u2705 T\u1ed1t\nobject EmailVerificationStep : WizardStep\n\n// \u274c Tr\u00e1nh\nobject Step2 : WizardStep\n</code></pre>"},{"location":"vi/FSM-and-Conversation-handling/#6-don-dep-trang-thai-khi-can","title":"6. D\u1ecdn D\u1eb9p Tr\u1ea1ng Th\u00e1i Khi C\u1ea7n","text":"<p>N\u1ebfu b\u1ea1n c\u1ea7n x\u00f3a tr\u1ea1ng th\u00e1i th\u1ee7 c\u00f4ng:</p> <pre><code>object CancelStep : WizardStep {\n    override suspend fun onEntry(ctx: WizardContext) {\n        // X\u00f3a t\u1ea5t c\u1ea3 tr\u1ea1ng th\u00e1i wizard\n        ctx.delState&lt;NameStep&gt;()\n        ctx.delState&lt;AgeStep&gt;()\n\n        message { \"Registration cancelled.\" }.send(ctx.user, ctx.bot)\n    }\n}\n</code></pre>"},{"location":"vi/FSM-and-Conversation-handling/#tom-tat","title":"T\u00f3m T\u1eaft","text":"<p>H\u1ec7 th\u1ed1ng Wizard cung c\u1ea5p: - \u2705 An to\u00e0n ki\u1ec3u qu\u1ea3n l\u00fd tr\u1ea1ng th\u00e1i v\u1edbi ki\u1ec3m tra t\u1ea1i th\u1eddi gian bi\u00ean d\u1ecbch - \u2705 Khai b\u00e1o \u0111\u1ecbnh ngh\u0129a b\u01b0\u1edbc d\u01b0\u1edbi d\u1ea1ng l\u1edbp l\u1ed3ng nhau - \u2705 Linh ho\u1ea1t chuy\u1ec3n ti\u1ebfp v\u1edbi logic c\u00f3 \u0111i\u1ec1u ki\u1ec7n - \u2705 T\u1ef1 \u0111\u1ed9ng t\u1ea1o m\u00e3 qua KSP - \u2705 T\u00edch h\u1ee3p v\u1edbi h\u1ec7 th\u1ed1ng Activity hi\u1ec7n c\u00f3 - \u2705 C\u00f3 th\u1ec3 c\u1eafm \u0111\u01b0\u1ee3c backend l\u01b0u tr\u1eef tr\u1ea1ng th\u00e1i</p> <p>B\u1eaft \u0111\u1ea7u x\u00e2y d\u1ef1ng wizard b\u1eb1ng c\u00e1ch ch\u00fa th\u00edch m\u1ed9t l\u1edbp v\u1edbi <code>@WizardHandler</code> v\u00e0 \u0111\u1ecbnh ngh\u0129a c\u00e1c b\u01b0\u1edbc c\u1ee7a b\u1ea1n d\u01b0\u1edbi d\u1ea1ng c\u00e1c \u0111\u1ed1i t\u01b0\u1ee3ng <code>WizardStep</code> l\u1ed3ng nhau! n\u1ebfu b\u1ea1n c\u00f3 b\u1ea5t k\u1ef3 c\u00e2u h\u1ecfi n\u00e0o li\u00ean h\u1ec7 v\u1edbi ch\u00fang t\u00f4i trong chat, ch\u00fang t\u00f4i s\u1ebd r\u1ea5t vui \u0111\u01b0\u1ee3c gi\u00fap \u0111\u1ee1 :)</p>"},{"location":"vi/Functional-DSL/#en-vo-cuc-functional-dsl-va-xa-hon","title":"\u0110\u1ebfn ~~v\u00f4 c\u1ef1c~~ functional dsl v\u00e0 xa h\u01a1n!","text":"<p>Bot h\u1ed7 tr\u1ee3 c\u1ea3 hai c\u00e1ch thi\u1ebft l\u1eadp ng\u1eef c\u1ea3nh d\u1ef1a tr\u00ean annotation v\u00e0 functional dsl. B\u1ea1n c\u00f3 th\u1ec3 k\u1ebft h\u1ee3p c\u1ea3 hai c\u00e1ch ti\u1ebfp c\u1eadn.</p>"},{"location":"vi/Functional-DSL/#functional-dsl","title":"Functional DSL","text":"<p>Functional DSL ch\u1ec9 l\u00e0 m\u1ed9t c\u00e1ch kh\u00e1c \u0111\u1ec3 \u0111\u1ecbnh ngh\u0129a ng\u1eef c\u1ea3nh bot.</p> <p>V\u00ed d\u1ee5:</p> <pre><code>suspend fun main() {\n    val bot = TelegramBot(\"BOT_TOKEN\")\n\n    bot.setFunctionality {\n        onChosenInlineResult {\n            println(\"got a result ${update.chosenInlineResult.resultId} from ${update.user}\")\n        }\n    }\n}\n</code></pre>"},{"location":"vi/Functional-DSL/#commands-va-inputs","title":"Commands v\u00e0 Inputs","text":"<p>B\u1ea1n c\u00f3 th\u1ec3 x\u1eed l\u00fd c\u1ea3 <code>commands</code> v\u00e0 <code>inputs</code> s\u1eed d\u1ee5ng functional DSL.</p>"},{"location":"vi/Functional-DSL/#commands","title":"Commands","text":"<pre><code>suspend fun main() {\n    val bot = TelegramBot(\"BOT_TOKEN\")\n\n    bot.setFunctionality {\n        // Regular command\n        onCommand(\"/start\") {\n            message { \"Hello\" }.send(user, bot)\n        }\n\n        // Regex-based command matching\n        onCommand(\"\"\"(red|green|blue)\"\"\".toRegex()) {\n            message { \"you typed ${update.text} color\" }.send(user, bot)\n        }\n    }\n}\n</code></pre> <p>Trong <code>onCommand</code>, c\u00e1c tham s\u1ed1 \u0111\u00e3 \u0111\u01b0\u1ee3c parse c\u00f3 s\u1eb5n d\u01b0\u1edbi d\u1ea1ng <code>Map&lt;String, String&gt;</code> d\u1ef1a tr\u00ean c\u1ea5u h\u00ecnh c\u1ee7a b\u1ea1n.</p>"},{"location":"vi/Functional-DSL/#inputs","title":"Inputs","text":"<p>B\u1ea1n c\u00f3 th\u1ec3 s\u1eed d\u1ee5ng inputs th\u00f4ng qua <code>bot.inputListener</code>.</p> <pre><code>suspend fun main() {\n    val bot = TelegramBot(\"BOT_TOKEN\")\n\n    bot.setFunctionality {\n        onCommand(\"/start\") {\n            message { \"Hello, what's your name?\" }.send(user, bot)\n            bot.inputListener[user] = \"testInput\"\n        }\n\n        onInput(\"testInput\") {\n            message { \"Hey, nice to meet you, ${update.text}\" }.send(user, bot)\n        }\n    }\n}\n</code></pre>"},{"location":"vi/Functional-DSL/#input-chains","title":"Input Chains","text":"<p>\u0110\u1ed1i v\u1edbi lu\u1ed3ng input nhi\u1ec1u b\u01b0\u1edbc, s\u1eed d\u1ee5ng <code>inputChain</code>:</p> <pre><code>bot.setFunctionality {\n    inputChain(\"conversation\") {\n        message { \"Nice to meet you, ${update.text}\" }.send(user, bot)\n        message { \"What is your favorite food?\" }.send(user, bot)\n    }.breakIf({ update.text == \"peanut butter\" }) { // chain break condition\n        message { \"Oh, too bad, I'm allergic to it.\" }.send(user, bot)\n        // action that will be applied when condition matches\n    }.andThen {\n        // next input point if break condition doesn't match\n        message { \"Great choice!\" }.send(user, bot)\n    }\n}\n</code></pre> <p>Chu\u1ed7i t\u1ef1 \u0111\u1ed9ng chuy\u1ec3n sang b\u01b0\u1edbc ti\u1ebfp theo tr\u1eeb khi \u0111i\u1ec1u ki\u1ec7n break \u0111\u01b0\u1ee3c \u0111\u00e1p \u1ee9ng. N\u1ebfu \u0111i\u1ec1u ki\u1ec7n break \u0111\u01b0\u1ee3c \u0111\u00e1p \u1ee9ng v\u00e0 <code>repeat</code> l\u00e0 <code>true</code> (m\u1eb7c \u0111\u1ecbnh), ng\u01b0\u1eddi d\u00f9ng s\u1ebd \u1edf l\u1ea1i b\u01b0\u1edbc hi\u1ec7n t\u1ea1i.</p>"},{"location":"vi/Functional-DSL/#update-type-handlers","title":"Update Type Handlers","text":"<p>X\u1eed l\u00fd tr\u1ef1c ti\u1ebfp c\u00e1c lo\u1ea1i update c\u1ee5 th\u1ec3:</p> <pre><code>bot.setFunctionality {\n    onUpdate(UpdateType.MESSAGE, UpdateType.CALLBACK_QUERY) {\n        // Handle both message and callback query updates\n        println(\"Received update: ${update.type}\")\n    }\n}\n</code></pre>"},{"location":"vi/Functional-DSL/#common-matchers","title":"Common Matchers","text":"<p>Match n\u1ed9i dung v\u0103n b\u1ea3n (kh\u00f4ng ch\u1ec9 commands) s\u1eed d\u1ee5ng <code>common</code>:</p> <pre><code>bot.setFunctionality {\n    // String matching\n    common(\"hello\") {\n        message { \"Hi there!\" }.send(user, bot)\n    }\n\n    // Regex matching\n    common(\"\"\"\\d+\"\"\".toRegex()) {\n        message { \"You sent a number!\" }.send(user, bot)\n    }\n}\n</code></pre>"},{"location":"vi/Functional-DSL/#fallback-handler","title":"Fallback Handler","text":"<p>X\u1eed l\u00fd c\u00e1c update kh\u00f4ng \u0111\u01b0\u1ee3c x\u1eed l\u00fd b\u1edfi b\u1ea5t k\u1ef3 handler n\u00e0o:</p> <pre><code>bot.setFunctionality {\n    whenNotHandled {\n        message { \"I didn't understand that.\" }.send(user, bot)\n    }\n}\n</code></pre>"},{"location":"vi/Functional-DSL/#cau-hinh-nang-cao","title":"C\u1ea5u h\u00ecnh N\u00e2ng cao","text":""},{"location":"vi/Functional-DSL/#rate-limiting","title":"Rate Limiting","text":"<p>\u00c1p d\u1ee5ng gi\u1edbi h\u1ea1n t\u1ed1c \u0111\u1ed9 cho b\u1ea5t k\u1ef3 handler n\u00e0o:</p> <pre><code>bot.setFunctionality {\n    onCommand(\"/expensive\", rateLimits = RateLimits(5, 60)) {\n        // This command can only be called 5 times per 60 seconds\n        message { \"Processing...\" }.send(user, bot)\n    }\n}\n</code></pre>"},{"location":"vi/Functional-DSL/#guards","title":"Guards","text":"<p>S\u1eed d\u1ee5ng guards \u0111\u1ec3 th\u00eam logic validation t\u00f9y ch\u1ec9nh:</p> <pre><code>bot.setFunctionality {\n    onCommand(\"/admin\", guard = AdminGuard::class) {\n        message { \"Admin command executed\" }.send(user, bot)\n    }\n}\n</code></pre>"},{"location":"vi/Functional-DSL/#argument-parsing","title":"Argument Parsing","text":"<p>T\u00f9y ch\u1ec9nh c\u00e1ch parse tham s\u1ed1 command:</p> <pre><code>bot.setFunctionality {\n    onCommand(\"/custom\", argParser = CustomArgParser::class) {\n        // parameters will be parsed using CustomArgParser\n        message { \"Parameters: $parameters\" }.send(user, bot)\n    }\n}\n</code></pre>"},{"location":"vi/Functional-DSL/#ket-hop-functional-va-annotation-based-setting","title":"K\u1ebft h\u1ee3p Functional v\u00e0 Annotation-Based setting","text":"<p>B\u1ea1n c\u00f3 th\u1ec3 s\u1eed d\u1ee5ng c\u1ea3 hai c\u00e1ch ti\u1ebfp c\u1eadn trong c\u00f9ng m\u1ed9t bot:</p> <pre><code>// Annotation-based handler\n@CommandHandler([\"/register\"])\nsuspend fun register(ctx: CommandContext) {\n    message { \"Registration started\" }.send(ctx.user, ctx.bot)\n}\n\n// Functional handler\nbot.setFunctionality {\n    onCommand(\"/help\") {\n        message { \"Available commands: /register, /help\" }.send(user, bot)\n    }\n}\n</code></pre> <p>C\u1ea3 hai handlers \u0111\u1ec1u \u0111\u01b0\u1ee3c \u0111\u0103ng k\u00fd trong c\u00f9ng m\u1ed9t <code>ActivityRegistry</code> v\u00e0 ho\u1ea1t \u0111\u1ed9ng li\u1ec1n m\u1ea1ch v\u1edbi nhau.</p>"},{"location":"vi/Handlers/#handler-specific","title":"Handler specific","text":"<p>Limits on certain actions can be defined using the <code>RateLimits</code> annotation, supported <code>@CommandHandler</code>, <code>@CommandHandler.CallbackQuery</code>, <code>@InputHandler</code>, <code>@CommonHandler</code>.</p> <pre><code>@CommandHandler([\"/start\"])\n@RateLimits(period = 1000L, rate = 1L)\nsuspend fun start(user: User, bot: TelegramBot) {\n    // ...\n}\n</code></pre>"},{"location":"vi/Interceptors-%28middleware%29/#interceptors-logic-cross-cutting-cho-bot-cua-ban","title":"Interceptors: Logic Cross-Cutting cho Bot c\u1ee7a b\u1ea1n","text":"<p>Khi x\u00e2y d\u1ef1ng m\u1ed9t bot Telegram, b\u1ea1n th\u01b0\u1eddng l\u1eb7p l\u1ea1i vi\u1ec7c thi\u1ebft l\u1eadp, ki\u1ec3m tra, ho\u1eb7c d\u1ecdn d\u1eb9p tr\u00ean c\u00e1c handler. Interceptors cho ph\u00e9p b\u1ea1n ch\u00e8n logic chia s\u1ebb xung quanh c\u00e1c handler, gi\u1eef cho c\u00e1c handler t\u1eadp trung v\u00e0 d\u1ec5 b\u1ea3o tr\u00ec.</p> <p>\u0110\u00e2y l\u00e0 c\u00e1ch interceptors ho\u1ea1t \u0111\u1ed9ng trong telegram-bot v\u00e0 c\u00e1ch s\u1eed d\u1ee5ng ch\u00fang.</p>"},{"location":"vi/Interceptors-%28middleware%29/#interceptors-la-gi-giai-thich-on-gian","title":"Interceptors l\u00e0 g\u00ec? (Gi\u1ea3i th\u00edch \u0111\u01a1n gi\u1ea3n)","text":"<p>Interceptors l\u00e0 c\u00e1c h\u00e0m ch\u1ea1y t\u1ea1i c\u00e1c \u0111i\u1ec3m c\u1ee5 th\u1ec3 trong pipeline x\u1eed l\u00fd c\u1eadp nh\u1eadt. Ch\u00fang cho ph\u00e9p b\u1ea1n: - Ki\u1ec3m tra v\u00e0 s\u1eeda \u0111\u1ed5i context x\u1eed l\u00fd - Th\u00eam logic cross-cutting (logging, auth, metrics) - D\u1eebng x\u1eed l\u00fd s\u1edbm n\u1ebfu c\u1ea7n - D\u1ecdn d\u1eb9p t\u00e0i nguy\u00ean sau khi x\u1eed l\u00fd</p> <p>H\u00e3y ngh\u0129 v\u1ec1 interceptors nh\u01b0 c\u00e1c checkpoint m\u00e0 m\u1ecdi c\u1eadp nh\u1eadt \u0111\u1ec1u \u0111i qua tr\u01b0\u1edbc, trong v\u00e0 sau khi th\u1ef1c thi handler.</p>"},{"location":"vi/Interceptors-%28middleware%29/#pipeline-xu-ly","title":"Pipeline X\u1eed l\u00fd","text":"<p>Bot x\u1eed l\u00fd c\u1eadp nh\u1eadt th\u00f4ng qua m\u1ed9t pipeline v\u1edbi b\u1ea3y giai \u0111o\u1ea1n:</p> Giai \u0111o\u1ea1n Khi n\u00e0o ch\u1ea1y B\u1ea1n c\u00f3 th\u1ec3 d\u00f9ng \u0111\u1ec3 l\u00e0m g\u00ec Setup Ngay khi c\u1eadp nh\u1eadt \u0111\u1ebfn, tr\u01b0\u1edbc m\u1ecdi x\u1eed l\u00fd \u2714 Gi\u1edbi h\u1ea1n t\u1ed1c \u0111\u1ed9 to\u00e0n c\u1ee5c\u2714 L\u1ecdc spam ho\u1eb7c c\u1eadp nh\u1eadt b\u1ecb l\u1ed7i\u2714 Logging ban \u0111\u1ea7u\u2714 Thi\u1ebft l\u1eadp context chia s\u1ebb Parsing Sau Setup, tr\u00edch xu\u1ea5t l\u1ec7nh v\u00e0 tham s\u1ed1 \u2714 Custom command parsing\u2714 B\u1ed5 sung context v\u1edbi d\u1eef li\u1ec7u \u0111\u00e3 parsed\u2714 Validate c\u1ea5u tr\u00fac c\u1eadp nh\u1eadt Match T\u00ecm handler ph\u00f9 h\u1ee3p (Command/Input/Common) \u2714 Ghi \u0111\u00e8 selection handler\u2714 Custom input handling logic\u2714 Log matched handlers Validation Sau khi t\u00ecm th\u1ea5y handler, tr\u01b0\u1edbc khi g\u1ecdi \u2714 Permissions ri\u00eang cho handler\u2714 Gi\u1edbi h\u1ea1n t\u1ed1c \u0111\u1ed9 theo handler\u2714 Guard checks\u2714 Cancel processing n\u1ebfu \u0111i\u1ec1u ki\u1ec7n kh\u00f4ng \u0111\u01b0\u1ee3c \u0111\u00e1p \u1ee9ng PreInvoke Ngay tr\u01b0\u1edbc khi handler ch\u1ea1y \u2714 Checks ph\u00fat cu\u1ed1i\u2714 Start timers/metrics\u2714 B\u1ed5 sung context cho handler\u2714 S\u1eeda \u0111\u1ed5i h\u00e0nh vi handler Invoke Handler \u0111\u01b0\u1ee3c th\u1ef1c thi \u1edf \u0111\u00e2y \u2714 Wrap handler execution\u2714 Error handling\u2714 Logging handler results PostInvoke Sau khi handler ho\u00e0n th\u00e0nh (th\u00e0nh c\u00f4ng ho\u1eb7c th\u1ea5t b\u1ea1i) \u2714 D\u1ecdn d\u1eb9p t\u00e0i nguy\u00ean\u2714 Log results\u2714 Send fallback messages khi l\u1ed7i\u2714 S\u1eeda \u0111\u1ed5i k\u1ebft qu\u1ea3 tr\u01b0\u1edbc khi tr\u1ea3 v\u1ec1"},{"location":"vi/Interceptors-%28middleware%29/#tao-mot-interceptor","title":"T\u1ea1o m\u1ed9t Interceptor","text":"<p>M\u1ed9t interceptor l\u00e0 m\u1ed9t h\u00e0m \u0111\u01a1n gi\u1ea3n nh\u1eadn m\u1ed9t <code>ProcessingContext</code>:</p> <pre><code>import eu.vendeli.tgbot.core.PipelineInterceptor\nimport eu.vendeli.tgbot.types.component.ProcessingContext\n\nval myInterceptor: PipelineInterceptor = { context -&gt;\n    // Logic c\u1ee7a b\u1ea1n \u1edf \u0111\u00e2y\n    println(\"Processing update: ${context.update.updateId}\")\n}\n</code></pre> <p>Ho\u1eb7c s\u1eed d\u1ee5ng lambda:</p> <pre><code>val loggingInterceptor = PipelineInterceptor { context -&gt;\n    val logger = context.bot.config.loggerFactory.get(\"MyInterceptor\")\n    logger.info(\"Processing update #${context.update.updateId}\")\n}\n</code></pre>"},{"location":"vi/Interceptors-%28middleware%29/#ang-ky-interceptors","title":"\u0110\u0103ng k\u00fd Interceptors","text":"<p>\u0110\u0103ng k\u00fd interceptors tr\u00ean pipeline x\u1eed l\u00fd:</p> <pre><code>suspend fun main() {\n    val bot = TelegramBot(\"BOT_TOKEN\")\n\n    // \u0110\u0103ng k\u00fd interceptor cho giai \u0111o\u1ea1n Setup\n    bot.update.pipeline.intercept(ProcessingPipePhase.Setup) { context -&gt;\n        // Ki\u1ec3m tra n\u1ebfu user b\u1ecb banned\n        val user = context.update.userOrNull\n        if (user != null &amp;&amp; isBanned(user.id)) {\n            context.finish() // D\u1eebng x\u1eed l\u00fd\n            return@intercept\n        }\n    }\n\n    // \u0110\u0103ng k\u00fd interceptor cho giai \u0111o\u1ea1n PreInvoke\n    bot.update.pipeline.intercept(ProcessingPipePhase.PreInvoke) { context -&gt;\n        val startTime = System.currentTimeMillis()\n        // store start time\n    }\n\n    // \u0110\u0103ng k\u00fd interceptor cho giai \u0111o\u1ea1n PostInvoke\n    bot.update.pipeline.intercept(ProcessingPipePhase.PostInvoke) { context -&gt;\n        val startTime = // get start time\n        if (startTime != null) {\n            val duration = System.currentTimeMillis() - startTime\n            println(\"Handler took ${duration}ms\")\n        }\n    }\n\n    bot.handleUpdates()\n}\n</code></pre>"},{"location":"vi/Interceptors-%28middleware%29/#vi-du-thuc-te-authentication-metrics","title":"V\u00ed d\u1ee5 th\u1ef1c t\u1ebf: Authentication &amp; Metrics","text":"<p>V\u00ed d\u1ee5: m\u1ed9t bot y\u00eau c\u1ea7u authentication cho m\u1ed9t s\u1ed1 l\u1ec7nh, \u0111o th\u1eddi gian th\u1ef1c thi handler, v\u00e0 log t\u1ea5t c\u1ea3 c\u00e1c l\u1ec7nh.</p> <pre><code>suspend fun main() {\n    val bot = TelegramBot(\"BOT_TOKEN\")\n\n    // Giai \u0111o\u1ea1n Setup: Ki\u1ec3m tra n\u1ebfu user \u0111\u00e3 \u0111\u01b0\u1ee3c authenticated\n    bot.update.pipeline.intercept(ProcessingPipePhase.Setup) { context -&gt;\n        val user = context.update.userOrNull ?: return@intercept\n\n        if (!isAuthenticated(user.id)) {\n            message { \"Please authenticate first using /login\" }\n                .send(user, context.bot)\n            context.finish()\n        }\n    }\n\n    // Giai \u0111o\u1ea1n PreInvoke: Start timer v\u00e0 check permissions\n    bot.update.pipeline.intercept(ProcessingPipePhase.PreInvoke) { context -&gt;\n        val activity = context.activity ?: return@intercept\n        val user = context.update.userOrNull ?: return@intercept\n\n        // Ki\u1ec3m tra n\u1ebfu user c\u00f3 permission cho handler c\u1ee5 th\u1ec3 n\u00e0y\n        if (!hasPermission(user.id, activity)) {\n            message { \"You don't have permission to use this command.\" }\n                .send(user, context.bot)\n            context.finish()\n            return@intercept\n        }\n\n        // Start timer\n        // store start time\n    }\n\n    // Giai \u0111o\u1ea1n PostInvoke: Log v\u00e0 cleanup\n    bot.update.pipeline.intercept(ProcessingPipePhase.PostInvoke) { context -&gt;\n        val activity = context.activity ?: return@intercept\n        val startTime = // get start time\n\n        if (startTime != null) {\n            val duration = System.currentTimeMillis() - startTime\n            val logger = context.bot.config.loggerFactory.get(\"Metrics\")\n            logger.info(\n                \"Handler ${activity::class.simpleName} took ${duration}ms \" +\n                \"for user ${context.update.userOrNull?.id}\"\n            )\n        }\n    }\n\n    bot.handleUpdates()\n}\n</code></pre>"},{"location":"vi/Interceptors-%28middleware%29/#processingcontext","title":"ProcessingContext","text":"<p><code>ProcessingContext</code> cung c\u1ea5p truy c\u1eadp \u0111\u1ebfn:</p> <ul> <li><code>update: ProcessedUpdate</code> - C\u1eadp nh\u1eadt hi\u1ec7n t\u1ea1i \u0111ang \u0111\u01b0\u1ee3c x\u1eed l\u00fd</li> <li><code>bot: TelegramBot</code> - Bot instance</li> <li><code>registry: ActivityRegistry</code> - Activity registry</li> <li><code>parsedInput: String</code> - Command/input text \u0111\u00e3 parsed</li> <li><code>parameters: Map&lt;String, String&gt;</code> - Command parameters \u0111\u00e3 parsed</li> <li><code>activity: Activity?</code> - Handler \u0111\u00e3 resolved (null cho \u0111\u1ebfn giai \u0111o\u1ea1n Match)</li> <li><code>shouldProceed: Boolean</code> - Li\u1ec7u x\u1eed l\u00fd c\u00f3 n\u00ean ti\u1ebfp t\u1ee5c</li> <li><code>additionalContext: AdditionalContext</code> - D\u1eef li\u1ec7u context b\u1ed5 sung</li> <li><code>finish()</code> - D\u1eebng x\u1eed l\u00fd s\u1edbm</li> </ul>"},{"location":"vi/Interceptors-%28middleware%29/#dung-xu-ly-som","title":"D\u1eebng X\u1eed l\u00fd S\u1edbm","text":"<p>G\u1ecdi <code>context.finish()</code> \u0111\u1ec3 d\u1eebng x\u1eed l\u00fd:</p> <pre><code>bot.update.pipeline.intercept(ProcessingPipePhase.Validation) { context -&gt;\n    if (someCondition) {\n        context.finish() // Kh\u00f4ng c\u00f3 giai \u0111o\u1ea1n ti\u1ebfp theo n\u00e0o s\u1ebd th\u1ef1c thi\n    }\n}\n</code></pre>"},{"location":"vi/Interceptors-%28middleware%29/#luu-tru-du-lieu-tuy-chinh","title":"L\u01b0u tr\u1eef D\u1eef li\u1ec7u T\u00f9y ch\u1ec9nh","text":"<p>S\u1eed d\u1ee5ng <code>additionalContext</code> \u0111\u1ec3 truy\u1ec1n d\u1eef li\u1ec7u gi\u1eefa c\u00e1c interceptors:</p> <pre><code>// Trong PreInvoke\ncontext.additionalContext[\"userId\"] = context.update.userOrNull?.id\n\n// Trong PostInvoke\nval userId = context.additionalContext[\"userId\"] as? Long\n</code></pre>"},{"location":"vi/Interceptors-%28middleware%29/#multiple-interceptors","title":"Multiple Interceptors","text":"<p>B\u1ea1n c\u00f3 th\u1ec3 \u0111\u0103ng k\u00fd multiple interceptors cho c\u00f9ng m\u1ed9t giai \u0111o\u1ea1n. Ch\u00fang th\u1ef1c thi theo th\u1ee9 t\u1ef1 \u0111\u0103ng k\u00fd:</p> <pre><code>bot.update.pipeline.intercept(ProcessingPipePhase.Setup) { context -&gt;\n    println(\"First interceptor\")\n}\n\nbot.update.pipeline.intercept(ProcessingPipePhase.Setup) { context -&gt;\n    println(\"Second interceptor\")\n}\n\n// Khi m\u1ed9t c\u1eadp nh\u1eadt \u0111\u01b0\u1ee3c x\u1eed l\u00fd:\n// Output: \"First interceptor\"\n// Output: \"Second interceptor\"\n</code></pre> <p>N\u1ebfu m\u1ed9t interceptor g\u1ecdi <code>context.finish()</code>, c\u00e1c interceptors ti\u1ebfp theo trong giai \u0111o\u1ea1n \u0111\u00f3 s\u1ebd b\u1ecb b\u1ecf qua, v\u00e0 c\u00e1c giai \u0111o\u1ea1n sau s\u1ebd kh\u00f4ng th\u1ef1c thi.</p>"},{"location":"vi/Interceptors-%28middleware%29/#1-dung-ung-giai-oan","title":"1. D\u00f9ng \u0111\u00fang Giai \u0111o\u1ea1n","text":"<ul> <li>Setup: Global checks, filtering, initial setup</li> <li>Parsing: Custom parsing logic</li> <li>Match: Handler selection logic</li> <li>Validation: Permissions, rate limits, guards</li> <li>PreInvoke: Handler-specific preparation</li> <li>Invoke: Th\u01b0\u1eddng \u0111\u01b0\u1ee3c x\u1eed l\u00fd b\u1edfi interceptor m\u1eb7c \u0111\u1ecbnh</li> <li>PostInvoke: Cleanup, logging, error handling</li> </ul>"},{"location":"vi/Interceptors-%28middleware%29/#2-giu-interceptors-tap-trung","title":"2. Gi\u1eef Interceptors T\u1eadp trung","text":"<p>M\u1ed7i interceptor n\u00ean l\u00e0m m\u1ed9t vi\u1ec7c:</p> <pre><code>// \u2705 Good - interceptor t\u1eadp trung\nbot.update.pipeline.intercept(ProcessingPipePhase.Setup) { context -&gt;\n    if (isBanned(context.update.userOrNull?.id)) {\n        context.finish()\n    }\n}\n\n// \u274c Avoid - l\u00e0m qu\u00e1 nhi\u1ec1u\nbot.update.pipeline.intercept(ProcessingPipePhase.Setup) { context -&gt;\n    // Authentication\n    // Logging\n    // Metrics\n    // Rate limiting\n    // ... qu\u00e1 nhi\u1ec1u!\n}\n</code></pre>"},{"location":"vi/Interceptors-%28middleware%29/#3-xu-ly-errors-gracefully","title":"3. X\u1eed l\u00fd Errors Gracefully","text":"<p>Interceptors kh\u00f4ng n\u00ean crash bot:</p> <pre><code>bot.update.pipeline.intercept(ProcessingPipePhase.PreInvoke) { context -&gt;\n    try {\n        // Logic c\u1ee7a b\u1ea1n\n    } catch (e: Exception) {\n        val logger = context.bot.config.loggerFactory.get(\"Interceptor\")\n        logger.error(\"Interceptor error\", e)\n        // \u0110\u1eebng g\u1ecdi context.finish() tr\u1eeb khi b\u1ea1n mu\u1ed1n d\u1eebng x\u1eed l\u00fd\n    }\n}\n</code></pre>"},{"location":"vi/Interceptors-%28middleware%29/#4-don-dep-tai-nguyen","title":"4. D\u1ecdn d\u1eb9p T\u00e0i nguy\u00ean","text":"<p>N\u1ebfu b\u1ea1n m\u1edf t\u00e0i nguy\u00ean trong <code>PreInvoke</code>, d\u1ecdn d\u1eb9p ch\u00fang trong <code>PostInvoke</code>:</p> <pre><code>var timer: Timer? = null\n\nbot.update.pipeline.intercept(ProcessingPipePhase.PreInvoke) { context -&gt;\n    timer = Timer()\n    context.additionalContext[\"timer\"] = timer\n}\n\nbot.update.pipeline.intercept(ProcessingPipePhase.PostInvoke) { context -&gt;\n    val timer = context.additionalContext[\"timer\"] as? Timer\n    timer?.stop()\n}\n</code></pre>"},{"location":"vi/Interceptors-%28middleware%29/#5-thu-tu-quan-trong","title":"5. Th\u1ee9 t\u1ef1 Quan tr\u1ecdng","text":"<p>\u0110\u0103ng k\u00fd interceptors theo th\u1ee9 t\u1ef1 b\u1ea1n mu\u1ed1n ch\u00fang ch\u1ea1y:</p> <pre><code>// Checks chung tr\u01b0\u1edbc\nbot.update.pipeline.intercept(ProcessingPipePhase.Setup) {\n    // Global ban check\n}\n\n// Checks c\u1ee5 th\u1ec3 sau\nbot.update.pipeline.intercept(ProcessingPipePhase.Validation) {\n    // Handler-specific permission check\n}\n</code></pre>"},{"location":"vi/Interceptors-%28middleware%29/#6-dung-interceptors-cho-cross-cutting-concerns","title":"6. D\u00f9ng Interceptors cho Cross-Cutting Concerns","text":"<p>Interceptors l\u00fd t\u01b0\u1edfng cho: - \u2705 Authentication/authorization - \u2705 Logging - \u2705 Metrics/performance monitoring - \u2705 Rate limiting - \u2705 Error handling - \u2705 Request/response transformation</p> <p>V\u1edbi handler-specific logic, gi\u1eef n\u00f3 trong handler.</p>"},{"location":"vi/Interceptors-%28middleware%29/#default-interceptors","title":"Default Interceptors","text":"<p>Framework bao g\u1ed3m default interceptors cho core functionality:</p> <ul> <li>DefaultSetupInterceptor: Global rate limiting</li> <li>DefaultParsingInterceptor: Command parsing</li> <li>DefaultMatchInterceptor: Handler matching (commands, inputs, common matchers)</li> <li>DefaultValidationInterceptor: Guard checks v\u00e0 per-handler rate limiting</li> <li>DefaultInvokeInterceptor: Handler execution v\u00e0 error handling</li> </ul> <p>Custom interceptors c\u1ee7a b\u1ea1n ch\u1ea1y c\u00f9ng v\u1edbi defaults. B\u1ea1n c\u00f3 th\u1ec3 th\u00eam logic tr\u01b0\u1edbc ho\u1eb7c sau defaults, nh\u01b0ng b\u1ea1n kh\u00f4ng th\u1ec3 x\u00f3a default interceptors.</p>"},{"location":"vi/Interceptors-%28middleware%29/#advanced-conditional-interceptors","title":"Advanced: Conditional Interceptors","text":"<p>B\u1ea1n c\u00f3 th\u1ec3 l\u00e0m interceptors conditional:</p> <pre><code>bot.update.pipeline.intercept(ProcessingPipePhase.PreInvoke) { context -&gt;\n    val activity = context.activity ?: return@intercept\n\n    // Ch\u1ec9 \u00e1p d\u1ee5ng cho c\u00e1c handler c\u1ee5 th\u1ec3\n    if (activity::class.simpleName?.contains(\"Admin\") == true) {\n        // Admin-specific logic\n        checkAdminPermissions(context)\n    }\n}\n</code></pre>"},{"location":"vi/Interceptors-%28middleware%29/#summary","title":"Summary","text":"<p>Interceptors cung c\u1ea5p c\u00e1ch s\u1ea1ch s\u1ebd \u0111\u1ec3 th\u00eam cross-cutting logic cho bot c\u1ee7a b\u1ea1n:</p> <ul> <li>\u2705 B\u1ea3y giai \u0111o\u1ea1n cho c\u00e1c stages kh\u00e1c nhau c\u1ee7a x\u1eed l\u00fd</li> <li>\u2705 API \u0111\u01a1n gi\u1ea3n: Ch\u1ec9 implement <code>PipelineInterceptor</code></li> <li>\u2705 Flexible: \u0110\u0103ng k\u00fd multiple interceptors m\u1ed7i giai \u0111o\u1ea1n</li> <li>\u2705 Powerful: Truy c\u1eadp \u0111\u1ea7y \u0111\u1ee7 processing context</li> <li>\u2705 Safe: C\u00f3 th\u1ec3 d\u1eebng x\u1eed l\u00fd s\u1edbm v\u1edbi <code>context.finish()</code></li> </ul> <p>D\u00f9ng interceptors \u0111\u1ec3 gi\u1eef handlers t\u1eadp trung v\u00e0o business logic trong khi x\u1eed l\u00fd shared concerns nh\u01b0 authentication, logging, v\u00e0 metrics m\u1ed9t c\u00e1ch centralized.</p>"},{"location":"vi/Update-parsing/","title":"C\u1eadp nh\u1eadt Ph\u00e2n t\u00edch V\u0103n b\u1ea3n","text":""},{"location":"vi/Update-parsing/#van-ban-tra-ve","title":"V\u0103n b\u1ea3n tr\u1ea3 v\u1ec1","text":"<p>M\u1ed9t s\u1ed1 c\u1eadp nh\u1eadt c\u00f3 th\u1ec3 ch\u1ee9a v\u0103n b\u1ea3n tr\u1ea3 v\u1ec1 c\u00f3 th\u1ec3 \u0111\u01b0\u1ee3c ph\u00e2n t\u00edch \u0111\u1ec3 x\u1eed l\u00fd ti\u1ebfp. H\u00e3y xem ch\u00fang:</p> <ul> <li><code>MessageUpdate</code> -&gt; <code>message.text</code></li> <li><code>EditedMessageUpdate</code> -&gt; <code>editedMessage.text</code></li> <li><code>ChannelPostUpdate</code> -&gt; <code>channelPost.text</code></li> <li><code>EditedChannelPostUpdate</code> -&gt; <code>editedChannelPost.text</code></li> <li><code>InlineQueryUpdate</code> -&gt; <code>inlineQuery.query</code></li> <li><code>ChosenInlineResultUpdate</code> -&gt; <code>chosenInlineResult.query</code></li> <li><code>CallbackQueryUpdate</code> -&gt; <code>callbackQuery.data</code></li> <li><code>ShippingQueryUpdate</code> -&gt; <code>shippingQuery.invoicePayload</code></li> <li><code>PreCheckoutQueryUpdate</code> -&gt; <code>preCheckoutQuery.invoicePayload</code></li> <li><code>PollUpdate</code> -&gt; <code>poll.question</code></li> <li><code>PurchasedPaidMediaUpdate</code> -&gt; <code>purchasedPaidMedia.paidMediaPayload</code></li> </ul> <p>T\u1eeb c\u00e1c c\u1eadp nh\u1eadt \u0111\u01b0\u1ee3c li\u1ec7t k\u00ea, m\u1ed9t tham s\u1ed1 nh\u1ea5t \u0111\u1ecbnh \u0111\u01b0\u1ee3c ch\u1ecdn v\u00e0 l\u1ea5y l\u00e0m <code>TextReference</code> \u0111\u1ec3 ph\u00e2n t\u00edch ti\u1ebfp.</p>"},{"location":"vi/Update-parsing/#phan-tich","title":"Ph\u00e2n t\u00edch","text":"<p>C\u00e1c tham s\u1ed1 \u0111\u01b0\u1ee3c ch\u1ecdn \u0111\u01b0\u1ee3c ph\u00e2n t\u00edch v\u1edbi c\u00e1c d\u1ea5u ph\u00e2n c\u00e1ch \u0111\u01b0\u1ee3c c\u1ea5u h\u00ecnh ph\u00f9 h\u1ee3p th\u00e0nh l\u1ec7nh v\u00e0 c\u00e1c tham s\u1ed1 c\u1ee7a n\u00f3.</p> <p>Xem kh\u1ed1i c\u1ea5u h\u00ecnh <code>commandParsing</code>.</p> <p>B\u1ea1n c\u00f3 th\u1ec3 th\u1ea5y trong s\u01a1 \u0111\u1ed3 b\u00ean d\u01b0\u1edbi c\u00e1c th\u00e0nh ph\u1ea7n n\u00e0o \u0111\u01b0\u1ee3c \u00e1nh x\u1ea1 \u0111\u1ebfn c\u00e1c ph\u1ea7n n\u00e0o c\u1ee7a h\u00e0m \u0111\u00edch.</p> <p> </p>"},{"location":"vi/Update-parsing/#parammapping","title":"@ParamMapping","text":"<p>C\u0169ng c\u00f3 m\u1ed9t annotation g\u1ecdi l\u00e0 <code>@ParamMapping</code> \u0111\u1ec3 thu\u1eadn ti\u1ec7n ho\u1eb7c cho b\u1ea5t k\u1ef3 tr\u01b0\u1eddng h\u1ee3p \u0111\u1eb7c bi\u1ec7t n\u00e0o.</p> <p>N\u00f3 cho ph\u00e9p b\u1ea1n \u00e1nh x\u1ea1 t\u00ean tham s\u1ed1 t\u1eeb v\u0103n b\u1ea3n \u0111\u1ea7u v\u00e0o \u0111\u1ebfn b\u1ea5t k\u1ef3 tham s\u1ed1 n\u00e0o.</p> <p>\u0110i\u1ec1u n\u00e0y c\u0169ng thu\u1eadn ti\u1ec7n khi d\u1eef li\u1ec7u \u0111\u1ea7u v\u00e0o c\u1ee7a b\u1ea1n b\u1ecb gi\u1edbi h\u1ea1n, v\u00ed d\u1ee5 <code>CallbackData</code> (64 k\u00fd t\u1ef1).</p> <p>Xem v\u00ed d\u1ee5 s\u1eed d\u1ee5ng: <code>greeting?name=Adam</code></p> <pre><code>@CommandHandler([\"greeting\"])\nsuspend fun greeting(@ParamMapping(\"name\") anyParameterName: String, user: User, bot: TelegramBot) {\n    message { \"Hello, $anyParameterName\" }.send(to = user, via = bot)\n}\n</code></pre> <p>V\u00e0 n\u00f3 c\u0169ng c\u00f3 th\u1ec3 \u0111\u01b0\u1ee3c s\u1eed d\u1ee5ng \u0111\u1ec3 b\u1eaft c\u00e1c tham s\u1ed1 kh\u00f4ng c\u00f3 t\u00ean, trong c\u00e1c tr\u01b0\u1eddng h\u1ee3p m\u00e0 tr\u00ecnh ph\u00e2n t\u00edch \u0111\u01b0\u1ee3c thi\u1ebft l\u1eadp sao cho t\u00ean tham s\u1ed1 b\u1ecb b\u1ecf qua ho\u1eb7c th\u1eadm ch\u00ed kh\u00f4ng c\u00f3, \u0111i\u1ec1u n\u00e0y \u0111i qua m\u1eabu 'param_n', trong \u0111\u00f3 <code>n</code> l\u00e0 th\u1ee9 t\u1ef1 c\u1ee7a n\u00f3.</p> <p>V\u00ed d\u1ee5: v\u0103n b\u1ea3n <code>myCommand?p1=v1&amp;v2&amp;p3=&amp;p4=v4&amp;p5=</code> s\u1ebd \u0111\u01b0\u1ee3c ph\u00e2n t\u00edch th\u00e0nh: * l\u1ec7nh - <code>myCommand</code> * tham s\u1ed1   * <code>p1</code> = <code>v1</code>   * <code>param_2</code> = <code>v2</code>   * <code>p3</code> = <code>* `p4` = `v4`   * `p5` =</code></p> <p>Nh\u01b0 b\u1ea1n c\u00f3 th\u1ec3 th\u1ea5y, v\u00ec tham s\u1ed1 th\u1ee9 hai kh\u00f4ng c\u00f3 t\u00ean \u0111\u01b0\u1ee3c khai b\u00e1o n\u00ean n\u00f3 \u0111\u01b0\u1ee3c bi\u1ec3u di\u1ec5n d\u01b0\u1edbi d\u1ea1ng <code>param_2</code>.</p> <p>V\u00ec v\u1eady, b\u1ea1n c\u00f3 th\u1ec3 vi\u1ebft t\u1eaft t\u00ean bi\u1ebfn trong callback v\u00e0 s\u1eed d\u1ee5ng t\u00ean r\u00f5 r\u00e0ng, d\u1ec5 \u0111\u1ecdc trong m\u00e3.</p>"},{"location":"vi/Update-parsing/#deeplink","title":"Deeplink","text":"<p>X\u00e9t th\u00f4ng tin t\u1eeb tr\u00ean, n\u1ebfu b\u1ea1n mong \u0111\u1ee3i deeplink trong l\u1ec7nh b\u1eaft \u0111\u1ea7u c\u1ee7a m\u00ecnh, b\u1ea1n c\u00f3 th\u1ec3 b\u1eaft n\u00f3 v\u1edbi:</p> <pre><code>@CommandHandler([\"/start\"])\nsuspend fun start(@ParamMapping(\"param_1\") deeplink: String?, user: User, bot: TelegramBot) {\n    message { \"deeplink is $deeplink\" }.send(to = user, via = bot)\n}\n</code></pre>"},{"location":"vi/Update-parsing/#lenh-nhom","title":"L\u1ec7nh nh\u00f3m","text":"<p>Trong c\u1ea5u h\u00ecnh <code>commandParsing</code>, ch\u00fang ta c\u00f3 tham s\u1ed1 <code>useIdentifierInGroupCommands</code> khi \u0111\u01b0\u1ee3c b\u1eadt, ch\u00fang ta c\u00f3 th\u1ec3 s\u1eed d\u1ee5ng <code>TelegramBot.identifier</code> (\u0111\u1eebng qu\u00ean thay \u0111\u1ed5i n\u00f3 n\u1ebfu b\u1ea1n \u0111ang s\u1eed d\u1ee5ng tham s\u1ed1 \u0111\u01b0\u1ee3c m\u00f4 t\u1ea3) trong qu\u00e1 tr\u00ecnh kh\u1edbp l\u1ec7nh, \u0111i\u1ec1u n\u00e0y gi\u00fap ph\u00e2n t\u00e1ch c\u00e1c l\u1ec7nh t\u01b0\u01a1ng t\u1ef1 gi\u1eefa nhi\u1ec1u bot, n\u1ebfu kh\u00f4ng ph\u1ea7n <code>@MyBot</code> s\u1ebd ch\u1ec9 b\u1ecb b\u1ecf qua.</p>"},{"location":"vi/Update-parsing/#xem-them","title":"Xem th\u00eam","text":"<ul> <li>Ho\u1ea1t \u0111\u1ed9ng g\u1ecdi</li> <li>Ho\u1ea1t \u0111\u1ed9ng &amp; Tr\u00ecnh x\u1eed l\u00fd</li> <li>H\u00e0nh \u0111\u1ed9ng</li> </ul>"},{"location":"vi/Useful-utilities-and-tips/","title":"Ti\u1ec7n \u00edch H\u1eefu \u00edch v\u00e0 M\u1eb9o","text":""},{"location":"vi/Useful-utilities-and-tips/#hoat-ong-voi-processedupdate","title":"Ho\u1ea1t \u0111\u1ed9ng v\u1edbi ProcessedUpdate","text":"<p><code>ProcessedUpdate</code> l\u00e0 m\u1ed9t l\u1edbp generic cho c\u00e1c b\u1ea3n c\u1eadp nh\u1eadt c\u00f3 th\u1ec3 \u0111\u01b0\u1ee3c cung c\u1ea5p \u1edf c\u00e1c ki\u1ec3u kh\u00e1c nhau t\u00f9y thu\u1ed9c v\u00e0o d\u1eef li\u1ec7u g\u1ed1c (<code>MessageUpdate</code>, <code>CallbackQueryUpdate</code>, v.v.)</p> <p>V\u00ec v\u1eady b\u1ea1n c\u00f3 th\u1ec3 ki\u1ec3m tra ki\u1ec3u d\u1eef li\u1ec7u \u0111\u1ebfn v\u00e0 ti\u1ebfp t\u1ee5c thao t\u00e1c v\u1edbi m\u1ed9t s\u1ed1 d\u1eef li\u1ec7u nh\u1ea5t \u0111\u1ecbnh b\u1eb1ng smartcasts, v\u00ed d\u1ee5:</p> <pre><code>// ...\nif (update !is MessageUpdate) {\n    message { \"Only messages are allowed\" }.send(user, bot)\n    return\n}\n// Ti\u1ebfp theo, ProcessedUpdate s\u1ebd \u0111\u01b0\u1ee3c nh\u1eadn th\u1ee9c nh\u01b0 MessageUpdate.\n</code></pre> <p>C\u0169ng c\u00f3 m\u1ed9t interface <code>UserReference</code> b\u00ean trong cho ph\u00e9p b\u1ea1n x\u00e1c \u0111\u1ecbnh xem c\u00f3 tham chi\u1ebfu ng\u01b0\u1eddi d\u00f9ng b\u00ean trong hay kh\u00f4ng, v\u00ed d\u1ee5 tr\u01b0\u1eddng h\u1ee3p s\u1eed d\u1ee5ng:</p> <pre><code>val user = if(update is UserReference) update.user else null\n</code></pre> <p>N\u1ebfu c\u1ea7n, lu\u00f4n c\u00f3 b\u1ea3n g\u1ed1c <code>update</code> trong tham s\u1ed1 c\u1eadp nh\u1eadt.</p>"},{"location":"vi/Useful-utilities-and-tips/#tiem-phu-thuoc","title":"Ti\u00eam ph\u1ee5 thu\u1ed9c","text":"<p>Th\u01b0 vi\u1ec7n s\u1eed d\u1ee5ng c\u01a1 ch\u1ebf \u0111\u01a1n gi\u1ea3n \u0111\u1ec3 kh\u1edfi t\u1ea1o c\u00e1c l\u1edbp n\u01a1i c\u00e1c ph\u01b0\u01a1ng th\u1ee9c x\u1eed l\u00fd b\u1ea3n c\u1eadp nh\u1eadt c\u1ee7a b\u1ea1n \u0111\u01b0\u1ee3c ch\u00fa th\u00edch b\u1eb1ng c\u00e1c ch\u00fa th\u00edch \u0111\u01b0\u1ee3c cung c\u1ea5p.</p> <p><code>ClassManagerImpl</code> \u0111\u01b0\u1ee3c s\u1eed d\u1ee5ng theo m\u1eb7c \u0111\u1ecbnh \u0111\u1ec3 g\u1ecdi c\u00e1c ph\u01b0\u01a1ng th\u1ee9c \u0111\u01b0\u1ee3c ch\u00fa th\u00edch.</p> <p>Nh\u01b0ng n\u1ebfu b\u1ea1n mu\u1ed1n s\u1eed d\u1ee5ng m\u1ed9t s\u1ed1 th\u01b0 vi\u1ec7n kh\u00e1c cho vi\u1ec7c \u0111\u00f3, b\u1ea1n c\u00f3 th\u1ec3 \u0111\u1ecbnh ngh\u0129a l\u1ea1i interface <code>ClassManager</code>, s\u1eed d\u1ee5ng c\u01a1 ch\u1ebf \u01b0a th\u00edch c\u1ee7a b\u1ea1n v\u00e0 truy\u1ec1n n\u00f3 khi kh\u1edfi t\u1ea1o bot.</p> <pre><code>fun main() = runBlocking {\n    val bot = TelegramBot(\"BOT_TOKEN\", \"com.example.controllers\") {\n        classManager = ClassManagerImpl()\n    }\n\n    bot.handleUpdates()\n}\n</code></pre>"},{"location":"vi/Useful-utilities-and-tips/#loc-ban-cap-nhat","title":"L\u1ecdc b\u1ea3n c\u1eadp nh\u1eadt","text":"<p>N\u1ebfu kh\u00f4ng c\u00f3 \u0111i\u1ec1u ki\u1ec7n ph\u1ee9c t\u1ea1p, b\u1ea1n c\u00f3 th\u1ec3 \u0111\u01a1n gi\u1ea3n l\u1ecdc m\u1ed9t s\u1ed1 b\u1ea3n c\u1eadp nh\u1eadt \u0111\u1ec3 x\u1eed l\u00fd:</p> <pre><code>// h\u00e0m n\u01a1i \u0111\u1ecbnh ngh\u0129a \u0111i\u1ec1u ki\u1ec7n l\u1ecdc b\u1ea3n c\u1eadp nh\u1eadt\nfun filteringFun(update: Update): Boolean = update.message?.text.isNullOrBlank()\n\nfun main() = runBlocking {\n  val bot = TelegramBot(\"BOT_TOKEN\")\n\n  // thi\u1ebft l\u1eadp lu\u1ed3ng x\u1eed l\u00fd c\u1ee5 th\u1ec3 h\u01a1n cho c\u00e1c b\u1ea3n c\u1eadp nh\u1eadt\n  bot.update.setListener {\n    if(filteringFun(it)) return@setListener\n\n    // v\u00ec v\u1eady \u0111\u01a1n gi\u1ea3n, n\u1ebfu listener r\u1eddi kh\u1ecfi ph\u1ea1m vi tr\u01b0\u1edbc khi \u0111\u1ea1t t\u1edbi h\u00e0m x\u1eed l\u00fd, \u0111\u00f3 l\u00e0 l\u1ecdc.\n    // th\u1ef1c t\u1ebf b\u1ea1n th\u1eadm ch\u00ed c\u00f3 th\u1ec3 vi\u1ebft tr\u1ef1c ti\u1ebfp \u0111i\u1ec1u ki\u1ec7n if \u1edf \u0111\u00f3 v\u1edbi return@setListener ho\u1eb7c m\u1edf r\u1ed9ng l\u1ecdc th\u00e0nh m\u1ed9t l\u1edbp ri\u00eang.\n\n    handle(it) // ho\u1eb7c c\u00e1ch x\u1eed l\u00fd th\u1ee7 c\u00f4ng v\u1edbi block\n  }\n}\n</code></pre> <p>\u0111\u1ec3 bao g\u1ed3m l\u1ecdc trong qu\u00e1 tr\u00ecnh so kh\u1edbp ho\u1eb7c lo\u1ea1i tr\u1eeb l\u1ec7nh c\u1ee7a b\u1ea1n, h\u00e3y xem guards ho\u1eb7c <code>@CommonHandler</code>.</p>"},{"location":"vi/Useful-utilities-and-tips/#tong-quat-hoa-tuy-chon-cho-cac-phuong-thuc-khac-nhau","title":"T\u1ed5ng qu\u00e1t h\u00f3a t\u00f9y ch\u1ecdn cho c\u00e1c ph\u01b0\u01a1ng th\u1ee9c kh\u00e1c nhau","text":"<p>N\u1ebfu b\u1ea1n ph\u1ea3i \u00e1p d\u1ee5ng c\u00f9ng c\u00e1c tham s\u1ed1 t\u00f9y ch\u1ecdn th\u01b0\u1eddng xuy\u00ean, b\u1ea1n c\u00f3 th\u1ec3 vi\u1ebft m\u1ed9t h\u00e0m t\u01b0\u01a1ng t\u1ef1 ph\u00f9 h\u1ee3p v\u1edbi b\u1ea1n v\u00e0 gi\u1ea3m b\u1edbt code boilerplate :)</p> <p>M\u1ed9t s\u1ed1 thu\u1ed9c t\u00ednh chung \u0111\u01b0\u1ee3c t\u00e1ch ra th\u00e0nh c\u00e1c interface kh\u00e1c nhau.</p> <pre><code>@Suppress(\"NOTHING_TO_INLINE\")\ninline fun &lt;T, R, O&gt; T.markdownMode(crossinline block: O.() -&gt; Unit = {}): T\n        where               T : TgAction&lt;R&gt;,\n                            T : OptionsFeature&lt;T, O&gt;,\n                            O : Options,\n                            O : OptionsParseMode =\n    options {\n        parseMode = ParseMode.Markdown\n        block()\n    }\n\n\n// ... v\u00e0 trong code c\u1ee7a b\u1ea1n\n\nmessage { \"test\" }.markdownMode().send(to, via)\n</code></pre>"},{"location":"vi/Web-starters-%28Spring-and-Ktor%29/#spring-starter","title":"Spring starter","text":"<p>M\u00f4-\u0111un Spring Starter cho th\u01b0 vi\u1ec7n l\u00e0 m\u1ed9t m\u00f4-\u0111un t\u1ef1 \u0111\u1ed9ng c\u1ea5u h\u00ecnh t\u00edch h\u1ee3p c\u00e1c ch\u1ee9c n\u0103ng bot Telegram v\u00e0o c\u00e1c \u1ee9ng d\u1ee5ng Spring Boot. N\u00f3 t\u1eadn d\u1ee5ng s\u1ee9c m\u1ea1nh c\u1ee7a dependency injection v\u00e0 configuration properties c\u1ee7a Spring Boot \u0111\u1ec3 t\u1ef1 \u0111\u1ed9ng c\u1ea5u h\u00ecnh c\u00e1c bot Telegram d\u1ef1a tr\u00ean c\u1ea5u h\u00ecnh \u0111\u01b0\u1ee3c cung c\u1ea5p. Th\u01b0 vi\u1ec7n n\u00e0y \u0111\u1eb7c bi\u1ec7t h\u1eefu \u00edch cho c\u00e1c nh\u00e0 ph\u00e1t tri\u1ec3n mu\u1ed1n x\u00e2y d\u1ef1ng c\u00e1c bot Telegram s\u1eed d\u1ee5ng Kotlin v\u00e0 Spring Boot, cung c\u1ea5p c\u00e1ch ti\u1ebfp c\u1eadn \u0111\u01b0\u1ee3c t\u1ed1i \u01b0u h\u00f3a cho vi\u1ec7c ph\u00e1t tri\u1ec3n v\u00e0 qu\u1ea3n l\u00fd bot.</p>"},{"location":"vi/Web-starters-%28Spring-and-Ktor%29/#tinh-nang-chinh","title":"T\u00ednh n\u0103ng ch\u00ednh","text":"<ul> <li>T\u1ef1 \u0111\u1ed9ng c\u1ea5u h\u00ecnh: Th\u01b0 vi\u1ec7n t\u1ef1 \u0111\u1ed9ng c\u1ea5u h\u00ecnh c\u00e1c bot Telegram d\u1ef1a tr\u00ean c\u00e1c properties c\u1ea5u h\u00ecnh \u0111\u01b0\u1ee3c cung c\u1ea5p, lo\u1ea1i b\u1ecf nhu c\u1ea7u thi\u1ebft l\u1eadp th\u1ee7 c\u00f4ng.</li> <li>Properties c\u1ea5u h\u00ecnh: N\u00f3 h\u1ed7 tr\u1ee3 properties c\u1ea5u h\u00ecnh \u0111\u1ec3 t\u00f9y ch\u1ec9nh d\u1ec5 d\u00e0ng c\u00e1c c\u00e0i \u0111\u1eb7t bot, ch\u1eb3ng h\u1ea1n nh\u01b0 bot tokens, t\u00ean g\u00f3i v\u00e0 identifiers.</li> <li>T\u00edch h\u1ee3p Spring: T\u00edch h\u1ee3p li\u1ec1n m\u1ea1ch v\u1edbi h\u1ec7 sinh th\u00e1i Spring, s\u1eed d\u1ee5ng dependency injection v\u00e0 application context c\u1ee7a Spring \u0111\u1ec3 qu\u1ea3n l\u00fd c\u00e1c bot instances.</li> <li>H\u1ed7 tr\u1ee3 Coroutine: T\u1eadn d\u1ee5ng Kotlin coroutines cho c\u00e1c ho\u1ea1t \u0111\u1ed9ng bot b\u1ea5t \u0111\u1ed3ng b\u1ed9, \u0111\u1ea3m b\u1ea3o th\u1ef1c thi hi\u1ec7u qu\u1ea3 v\u00e0 kh\u00f4ng b\u1ecb ch\u1eb7n.</li> </ul>"},{"location":"vi/Web-starters-%28Spring-and-Ktor%29/#bat-au","title":"B\u1eaft \u0111\u1ea7u","text":"<p>\u0110\u1ec3 s\u1eed d\u1ee5ng Spring Starter Library cho Telegram Bots, b\u1ea1n c\u1ea7n th\u00eam n\u00f3 l\u00e0m dependency v\u00e0o d\u1ef1 \u00e1n Spring Boot c\u1ee7a b\u1ea1n. Th\u01b0 vi\u1ec7n \u0111\u01b0\u1ee3c thi\u1ebft k\u1ebf \u0111\u1ec3 ho\u1ea1t \u0111\u1ed9ng v\u1edbi c\u00e1c \u1ee9ng d\u1ee5ng Spring Boot v\u00e0 y\u00eau c\u1ea7u framework Spring Boot \u0111\u1ec3 ho\u1ea1t \u0111\u1ed9ng.</p>"},{"location":"vi/Web-starters-%28Spring-and-Ktor%29/#dependency","title":"Dependency","text":"<p>Th\u00eam dependency sau v\u00e0o t\u1ec7p <code>build.gradle</code> ho\u1eb7c <code>pom.xml</code> c\u1ee7a b\u1ea1n:</p> <pre><code>dependencies {\n    implementation 'eu.vendeli:spring-starter:&lt;version&gt;'\n}\n</code></pre> <p>Thay th\u1ebf <code>&lt;version&gt;</code> v\u1edbi phi\u00ean b\u1ea3n m\u1edbi nh\u1ea5t c\u1ee7a th\u01b0 vi\u1ec7n.</p>"},{"location":"vi/Web-starters-%28Spring-and-Ktor%29/#cau-hinh","title":"C\u1ea5u h\u00ecnh","text":"<p>Th\u01b0 vi\u1ec7n s\u1eed d\u1ee5ng <code>@ConfigurationProperties</code> c\u1ee7a Spring Boot \u0111\u1ec3 li\u00ean k\u1ebft properties c\u1ea5u h\u00ecnh. B\u1ea1n c\u00f3 th\u1ec3 \u0111\u1ecbnh ngh\u0129a c\u1ea5u h\u00ecnh bot c\u1ee7a m\u00ecnh trong t\u1ec7p <code>application.properties</code> ho\u1eb7c <code>application.yml</code> c\u1ee7a \u1ee9ng d\u1ee5ng Spring Boot c\u1ee7a b\u1ea1n.</p> <pre><code>ktgram:\n autoStartPolling: true\n shareHttpClient: true\n bot:\n    - token: YOUR_BOT_TOKEN\n      pckg: com.example.bot\n      identifier: MyBot\n</code></pre>"},{"location":"vi/Web-starters-%28Spring-and-Ktor%29/#su-dung","title":"S\u1eed d\u1ee5ng","text":"<p>Sau khi th\u01b0 vi\u1ec7n \u0111\u01b0\u1ee3c th\u00eam v\u00e0 c\u1ea5u h\u00ecnh, n\u00f3 t\u1ef1 \u0111\u1ed9ng t\u1ea1o v\u00e0 c\u1ea5u h\u00ecnh c\u00e1c bot instances c\u1ee7a Telegram d\u1ef1a tr\u00ean c\u1ea5u h\u00ecnh \u0111\u01b0\u1ee3c cung c\u1ea5p.</p> <p>N\u00f3 c\u0169ng h\u1ed7 tr\u1ee3 nhi\u1ec1u bot instances, \u0111\u1ec3 kh\u1edfi t\u1ea1o nhi\u1ec1u bot ch\u1ec9 c\u1ea7n khai b\u00e1o n\u00f3 nh\u01b0 m\u1ed9t entry m\u1edbi trong ph\u1ea7n bot:</p> <pre><code>ktgram:\n bot:\n    - token: YOUR_BOT_TOKEN\n    - token: SECOND_BOT_TOKEN\n</code></pre>"},{"location":"vi/Web-starters-%28Spring-and-Ktor%29/#cau-hinh-nang-cao","title":"C\u1ea5u h\u00ecnh n\u00e2ng cao","text":"<p>\u0110\u1ed1i v\u1edbi c\u00e1c c\u1ea5u h\u00ecnh n\u00e2ng cao h\u01a1n, ch\u1eb3ng h\u1ea1n nh\u01b0 t\u00f9y ch\u1ec9nh h\u00e0nh vi bot ho\u1eb7c t\u00edch h\u1ee3p v\u1edbi c\u00e1c th\u00e0nh ph\u1ea7n Spring kh\u00e1c, b\u1ea1n c\u00f3 th\u1ec3 m\u1edf r\u1ed9ng l\u1edbp <code>BotConfiguration</code> v\u00e0 thay \u0111\u1ed5i c\u1ea5u h\u00ecnh bot th\u00f4ng qua ph\u01b0\u01a1ng th\u1ee9c <code>applyCfg</code> c\u1ee7a n\u00f3, b\u1ea1n c\u00f3 th\u1ec3 xem v\u00ed d\u1ee5 \u1edf \u0111\u00f3.</p> <p>Tip</p> <p>\u0110\u1ec3 c\u1ea5u h\u00ecnh t\u1eebng instance \u0111\u00e3 kh\u1edfi t\u1ea1o v\u1edbi c\u1ea5u h\u00ecnh t\u00f9y ch\u1ec9nh, ph\u00e2n bi\u1ec7t ch\u00fang b\u1eb1ng identifier c\u1ee7a ch\u00fang (l\u1edbp BotConfiguration c\u0169ng c\u00f3 identifier).</p>"},{"location":"vi/Web-starters-%28Spring-and-Ktor%29/#ktor","title":"Ktor","text":"<p>M\u00f4-\u0111un \u0111\u01b0\u1ee3c thi\u1ebft k\u1ebf \u0111\u1ec3 t\u1ea1o \u0111i\u1ec1u ki\u1ec7n thu\u1eadn l\u1ee3i cho vi\u1ec7c t\u1ea1o webhook server cho c\u00e1c bot Telegram. N\u00f3 cho ph\u00e9p c\u00e1c nh\u00e0 ph\u00e1t tri\u1ec3n c\u1ea5u h\u00ecnh server, bao g\u1ed3m c\u1ea3 c\u00e0i \u0111\u1eb7t SSL/TLS, v\u00e0 khai b\u00e1o nhi\u1ec1u bot Telegram v\u1edbi c\u1ea5u h\u00ecnh t\u00f9y ch\u1ec9nh. Qu\u00e1 tr\u00ecnh thi\u1ebft l\u1eadp linh ho\u1ea1t, cho ph\u00e9p c\u00e1c nh\u00e0 ph\u00e1t tri\u1ec3n \u0111i\u1ec1u ch\u1ec9nh server theo nhu c\u1ea7u c\u1ee5 th\u1ec3 c\u1ee7a h\u1ecd.</p>"},{"location":"vi/Web-starters-%28Spring-and-Ktor%29/#cai-at","title":"C\u00e0i \u0111\u1eb7t","text":"<p>\u0110\u1ec3 c\u00e0i \u0111\u1eb7t ktor starter th\u00eam b\u1ed5 sung v\u00e0o dependency ch\u00ednh:</p> <pre><code>dependencies {\n    implementation(\"eu.vendeli:ktor-starter:x.y.z\") // \u1edf \u0111\u00f3\n    // thay \u0111\u1ed5i x.y.z th\u00e0nh phi\u00ean b\u1ea3n th\u01b0 vi\u1ec7n hi\u1ec7n t\u1ea1i\n}\n</code></pre>"},{"location":"vi/Web-starters-%28Spring-and-Ktor%29/#thanh-phan-chinh","title":"Th\u00e0nh ph\u1ea7n ch\u00ednh","text":"<p>H\u00e0m <code>serveWebhook</code></p> <p>H\u00e0m serveWebhook l\u00e0 l\u00f5i c\u1ee7a th\u01b0 vi\u1ec7n. N\u00f3 thi\u1ebft l\u1eadp v\u00e0 b\u1eaft \u0111\u1ea7u webhook server cho c\u00e1c bot Telegram. N\u00f3 ch\u1ea5p nh\u1eadn hai tham s\u1ed1:</p> <ul> <li><code>wait</code>: M\u1ed9t boolean ch\u1ec9 ra li\u1ec7u server c\u00f3 n\u00ean \u0111\u1ee3i \u1ee9ng d\u1ee5ng d\u1eebng l\u1ea1i tr\u01b0\u1edbc khi t\u1eaft hay kh\u00f4ng. M\u1eb7c \u0111\u1ecbnh l\u00e0 true.</li> <li><code>serverBuilder</code>: M\u1ed9t lambda function c\u1ea5u h\u00ecnh server. M\u1eb7c \u0111\u1ecbnh l\u00e0 lambda r\u1ed7ng.</li> </ul>"},{"location":"vi/Web-starters-%28Spring-and-Ktor%29/#cau-hinh_1","title":"C\u1ea5u h\u00ecnh","text":"<ul> <li><code>WEBHOOK_PREFIX</code>: \u0111\u00f3 l\u00e0 tham s\u1ed1 s\u1ebd \u0111\u01b0\u1ee3c s\u1eed d\u1ee5ng cho ti\u1ec1n t\u1ed1 \u0111\u1ecba ch\u1ec9 cho webhook listener route. (m\u1eb7c \u0111\u1ecbnh l\u00e0 \"/\")</li> </ul>"},{"location":"vi/Web-starters-%28Spring-and-Ktor%29/#thiet-lap-server","title":"Thi\u1ebft l\u1eadp server","text":"<ul> <li><code>server</code>: M\u1ed9t ph\u01b0\u01a1ng th\u1ee9c \u0111\u1ec3 \u0111\u1eb7t c\u1ea5u h\u00ecnh server s\u1eed d\u1ee5ng ho\u1eb7c EnvConfiguration ho\u1eb7c ManualConfiguration.</li> <li><code>engine</code>: M\u1ed9t ph\u01b0\u01a1ng th\u1ee9c \u0111\u1ec3 c\u1ea5u h\u00ecnh Netty application engine.</li> <li><code>ktorModule</code>: M\u1ed9t ph\u01b0\u01a1ng th\u1ee9c \u0111\u1ec3 th\u00eam Ktor modules v\u00e0o \u1ee9ng d\u1ee5ng.</li> </ul> <p>Th\u01b0 vi\u1ec7n cung c\u1ea5p ph\u1ea1m vi r\u1ed9ng c\u00e1c tham s\u1ed1 c\u00f3 th\u1ec3 c\u1ea5u h\u00ecnh cho server, bao g\u1ed3m host, port, SSL settings, v\u00e0 h\u01a1n n\u1eefa. C\u00f3 hai t\u00f9y ch\u1ecdn c\u1ee5 th\u1ec3 cho vi\u1ec7c c\u1ea5u h\u00ecnh n\u00f3:</p> <ul> <li><code>EnvConfiguration</code>: \u0110\u1ecdc c\u00e1c gi\u00e1 tr\u1ecb c\u1ea5u h\u00ecnh t\u1eeb environment v\u1edbi ti\u1ec1n t\u1ed1 <code>KTGRAM_</code>.</li> <li><code>ManualConfiguration</code>: Cho ph\u00e9p thi\u1ebft l\u1eadp th\u1ee7 c\u00f4ng c\u00e1c gi\u00e1 tr\u1ecb c\u1ea5u h\u00ecnh, \u0111\u1eb7t c\u00e1c tham s\u1ed1 c\u1ee7a b\u1ea1n trong h\u00e0m <code>server {}</code>.</li> </ul> <p>\u0110\u00e2y l\u00e0 danh s\u00e1ch c\u00e1c tham s\u1ed1 c\u00f3 th\u1ec3 \u0111\u01b0\u1ee3c \u0111\u1eb7t:</p> <ul> <li><code>HOST</code>: Hostname ho\u1eb7c IP address c\u1ee7a server.</li> <li><code>PORT</code>: Port number cho server.</li> <li><code>SSL_PORT</code>: Port number cho SSL/TLS connections.</li> <li><code>PEM_PRIVATE_KEY_PATH</code>: \u0110\u01b0\u1eddng d\u1eabn \u0111\u1ebfn PEM private key file.</li> <li><code>PEM_CHAIN_PATH</code>: \u0110\u01b0\u1eddng d\u1eabn \u0111\u1ebfn PEM certificate chain file.</li> <li><code>PEM_PRIVATE_KEY</code>: PEM private key PASSWORD d\u01b0\u1edbi d\u1ea1ng character array.</li> <li><code>KEYSTORE_PATH</code>: \u0110\u01b0\u1eddng d\u1eabn \u0111\u1ebfn Java KeyStore file.</li> <li><code>KEYSTORE_PASSWORD</code>: Password cho KeyStore.</li> <li><code>KEY_ALIAS</code>: Alias cho key trong KeyStore.</li> <li><code>SSL_ON</code>: M\u1ed9t boolean ch\u1ec9 ra li\u1ec7u SSL/TLS c\u00f3 n\u00ean \u0111\u01b0\u1ee3c b\u1eadt hay kh\u00f4ng. M\u1eb7c \u0111\u1ecbnh l\u00e0 true.</li> </ul> <p>Tip</p> <p>N\u1ebfu c\u00f3 pem certificates, m\u00f4-\u0111un t\u1ef1 n\u00f3 s\u1ebd t\u1ea1o jks storage t\u1eeb ch\u00fang t\u1ea1i \u0111\u01b0\u1eddng d\u1eabn \u0111\u01b0\u1ee3c ch\u1ec9 \u0111\u1ecbnh.</p>"},{"location":"vi/Web-starters-%28Spring-and-Ktor%29/#cau-hinh-bot","title":"C\u1ea5u h\u00ecnh Bot:","text":"<p>\u0110\u1ec3 c\u1ea5u h\u00ecnh bot g\u1ecdi <code>declareBot {}</code> c\u00f3 c\u00e1c tham s\u1ed1 nh\u01b0:</p> <ul> <li><code>token</code>: Bot token.</li> <li><code>pckg</code>: T\u00ean g\u00f3i cho bot.</li> <li><code>configuration</code>: M\u1ed9t lambda function \u0111\u1ec3 c\u1ea5u h\u00ecnh bot.</li> <li><code>handlingBehaviour</code>: M\u1ed9t lambda function \u0111\u1ec3 \u0111\u1eb7t h\u00e0nh vi x\u1eed l\u00fd c\u1ee7a bot.</li> <li><code>onInit</code>: M\u1ed9t lambda function \u0111\u01b0\u1ee3c th\u1ef1c thi khi bot \u0111\u01b0\u1ee3c kh\u1edfi t\u1ea1o.</li> </ul>"},{"location":"vi/Web-starters-%28Spring-and-Ktor%29/#vi-du-su-dung","title":"V\u00ed d\u1ee5 s\u1eed d\u1ee5ng","text":"<p>\u0110\u1ec3 s\u1eed d\u1ee5ng m\u00f4-\u0111un n\u00e0y, g\u1ecdi h\u00e0m <code>serveWebhook</code>, c\u1ea5u h\u00ecnh n\u00f3 v\u1edbi c\u00e1c c\u00e0i \u0111\u1eb7t mong mu\u1ed1n c\u1ee7a b\u1ea1n, khai b\u00e1o c\u00e1c bot c\u1ee7a b\u1ea1n. \u0110\u00e2y l\u00e0 m\u1ed9t v\u00ed d\u1ee5 \u0111\u01a1n gi\u1ea3n:</p> <pre><code>fun main() = runBlocking {\n    serveWebhook {\n        server {\n            HOST = \"0.0.0.0\"\n            PORT = 8080\n            SSL_PORT = 8443\n\n            PEM_PRIVATE_KEY_PATH = \"/etc/letsencrypt/live/example.com/privkey.pem\"\n            PEM_CHAIN_PATH = \"/etc/letsencrypt/live/example.com/fullchain.pem\"\n            PEM_PRIVATE_KEY = \"pem_changeit\".toCharArray()\n\n            KEYSTORE_PATH = \"/etc/ssl/certs/java/cacerts/bot_keystore.jks\"\n            KEYSTORE_PASSWORD = \"changeit\".toCharArray()\n            // \u0110\u1eb7t c\u00e1c tham s\u1ed1 c\u1ea5u h\u00ecnh kh\u00e1c theo c\u1ea7n\n        }\n        declareBot {\n            token = \"YOUR_BOT_TOKEN\"\n            // C\u1ea5u h\u00ecnh c\u00e1c c\u00e0i \u0111\u1eb7t bot kh\u00e1c\n        }\n        // Th\u00eam nhi\u1ec1u bot ho\u1eb7c \u0111\u1eb7t c\u00e1c tham s\u1ed1 kh\u00e1c n\u1ebfu c\u1ea7n\n    }\n}\n</code></pre> <p>Caution</p> <p>\u0110\u1eebng qu\u00ean \u0111\u1eb7t webhook \u0111\u1ec3 m\u1ecdi th\u1ee9 ho\u1ea1t \u0111\u1ed9ng. :)</p> <p>M\u1eb7c \u0111\u1ecbnh m\u00f4-\u0111un s\u1ebd ph\u1ee5c v\u1ee5 webhook listening endpoints l\u00e0 <code>host/BOT_TOKEN</code></p>"}]}