<!doctype html><html class=no-js lang=en><meta charset=utf-8><meta content="width=device-width,initial-scale=1" name=viewport><meta content="Telegram Bot API wrapper with handy Kotlin DSL." name=description><link href=https://tgbot.vendeli.eu/Web-starters-%28Spring-and-Ktor%29/ rel=canonical><link href=../Useful-utilities-and-tips/ rel=prev><link href=../assets/img/lib-logo.png rel=icon><meta content="mkdocs-1.6.1, mkdocs-material-9.5.49" name=generator><title>Web Starters (Spring And Ktor) - Telegram bot</title><link href=../assets/stylesheets/main.6f8fc17f.min.css rel=stylesheet><link href=../assets/stylesheets/palette.06af60db.min.css rel=stylesheet><link crossorigin href=https://fonts.gstatic.com rel=preconnect><link href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback" rel=stylesheet><style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style><link href=../assets/stylesheets/extra.css rel=stylesheet><script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script><script id=__analytics>var __md_analytics=(()=>{let f=0,c=`config`,e=`event`,g=1,d=`G-NV2HD45F9G`;function a(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],a(`js`,new Date),a(c,d),document.addEventListener(`DOMContentLoaded`,(()=>{document.forms.search&&document.forms.search.query.addEventListener(`blur`,(function(){this.value&&a(e,`search`,{search_term:this.value})}));document$.subscribe((()=>{var b=document.forms.feedback;if(void f!==b)for(var c of b.querySelectorAll(`[type=submit]`))c.addEventListener(`click`,(function(c){c.preventDefault();var d=document.location.pathname,h=this.getAttribute(`data-md-value`);a(e,`feedback`,{page:d,data:h}),b.firstElementChild.disabled=!f;var i=b.querySelector(`.md-feedback__note [data-md-value='`+ h+ `']`);i&&(i.hidden=!g)})),b.hidden=!g})),location$.subscribe((b=>{a(c,d,{page_path:b.pathname})}))}));var b=document.createElement(`script`);b.async=!f,b.src=`https://www.googletagmanager.com/gtag/js?id=G-NV2HD45F9G`,document.getElementById(`__analytics`).insertAdjacentElement(`afterEnd`,b)})</script><script>if("undefined"!=typeof __md_analytics){var consent=__md_get("__consent");consent&&consent.analytics&&__md_analytics()}</script><body data-md-color-accent=indigo data-md-color-primary=indigo data-md-color-scheme=slate dir=ltr><input autocomplete=off class=md-toggle data-md-toggle=drawer id=__drawer type=checkbox><input autocomplete=off class=md-toggle data-md-toggle=search id=__search type=checkbox><label class=md-overlay for=__drawer></label><div data-md-component=skip><a class=md-skip href=#spring-starter> Skip to content </a></div><div data-md-component=announce></div><header class=md-header data-md-component=header><nav class="md-header__inner md-grid" aria-label=Header><a aria-label="Telegram bot" class="md-header__button md-logo" title="Telegram bot" data-md-component=logo href=..> <img alt=logo src=../assets/img/lib-logo.png> </a><label class="md-header__button md-icon" for=__drawer><svg viewbox="0 0 24 24" xmlns=http://www.w3.org/2000/svg><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg></label><div class=md-header__title data-md-component=header-title><div class=md-header__ellipsis><div class=md-header__topic><span class=md-ellipsis> Telegram bot </span></div><div class=md-header__topic data-md-component=header-topic><span class=md-ellipsis> Web Starters (Spring And Ktor) </span></div></div></div><form class=md-header__option data-md-component=palette><input aria-label="Switch to light mode" data-md-color-media="(prefers-color-scheme: dark)" class=md-option data-md-color-accent=indigo data-md-color-primary=indigo data-md-color-scheme=slate id=__palette_0 name=__palette type=radio><label class="md-header__button md-icon" title="Switch to light mode" for=__palette_1 hidden><svg viewbox="0 0 24 24" xmlns=http://www.w3.org/2000/svg><path d="m17.75 4.09-2.53 1.94.91 3.06-2.63-1.81-2.63 1.81.91-3.06-2.53-1.94L12.44 4l1.06-3 1.06 3zm3.5 6.91-1.64 1.25.59 1.98-1.7-1.17-1.7 1.17.59-1.98L15.75 11l2.06-.05L18.5 9l.69 1.95zm-2.28 4.95c.83-.08 1.72 1.1 1.19 1.85-.32.45-.66.87-1.08 1.27C15.17 23 8.84 23 4.94 19.07c-3.91-3.9-3.91-10.24 0-14.14.4-.4.82-.76 1.27-1.08.75-.53 1.93.36 1.85 1.19-.27 2.86.69 5.83 2.89 8.02a9.96 9.96 0 0 0 8.02 2.89m-1.64 2.02a12.08 12.08 0 0 1-7.8-3.47c-2.17-2.19-3.33-5-3.49-7.82-2.81 3.14-2.7 7.96.31 10.98 3.02 3.01 7.84 3.12 10.98.31"/></svg></label><input aria-label="Switch to dark mode" data-md-color-media="(prefers-color-scheme: light)" class=md-option data-md-color-accent=indigo data-md-color-primary=indigo data-md-color-scheme=default id=__palette_1 name=__palette type=radio><label class="md-header__button md-icon" title="Switch to dark mode" for=__palette_0 hidden><svg viewbox="0 0 24 24" xmlns=http://www.w3.org/2000/svg><path d="M12 7a5 5 0 0 1 5 5 5 5 0 0 1-5 5 5 5 0 0 1-5-5 5 5 0 0 1 5-5m0 2a3 3 0 0 0-3 3 3 3 0 0 0 3 3 3 3 0 0 0 3-3 3 3 0 0 0-3-3m0-7 2.39 3.42C13.65 5.15 12.84 5 12 5s-1.65.15-2.39.42zM3.34 7l4.16-.35A7.2 7.2 0 0 0 5.94 8.5c-.44.74-.69 1.5-.83 2.29zm.02 10 1.76-3.77a7.131 7.131 0 0 0 2.38 4.14zM20.65 7l-1.77 3.79a7.02 7.02 0 0 0-2.38-4.15zm-.01 10-4.14.36c.59-.51 1.12-1.14 1.54-1.86.42-.73.69-1.5.83-2.29zM12 22l-2.41-3.44c.74.27 1.55.44 2.41.44.82 0 1.63-.17 2.37-.44z"/></svg></label></form><script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script><div class=md-header__option><div class=md-select><button aria-label="Select language" class="md-header__button md-icon"><svg viewbox="0 0 24 24" xmlns=http://www.w3.org/2000/svg><path d="m12.87 15.07-2.54-2.51.03-.03A17.5 17.5 0 0 0 14.07 6H17V4h-7V2H8v2H1v2h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11zM18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2zm-2.62 7 1.62-4.33L19.12 17z"/></svg></button><div class=md-select__inner><ul class=md-select__list><li class=md-select__item><a class=md-select__link href=./ hreflang=en> English </a><li class=md-select__item><a class=md-select__link href=../zh/Web-starters-%28Spring-and-Ktor%29/ hreflang=zh> 中文 </a></ul></div></div></div><label class="md-header__button md-icon" for=__search><svg viewbox="0 0 24 24" xmlns=http://www.w3.org/2000/svg><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg></label><div class=md-search data-md-component=search role=dialog><label class=md-search__overlay for=__search></label><div class=md-search__inner role=search><form class=md-search__form name=search><input aria-label=Search autocapitalize=off autocomplete=off autocorrect=off class=md-search__input data-md-component=search-query name=query placeholder=Search required spellcheck=false type=text><label class="md-search__icon md-icon" for=__search><svg viewbox="0 0 24 24" xmlns=http://www.w3.org/2000/svg><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg> <svg viewbox="0 0 24 24" xmlns=http://www.w3.org/2000/svg><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg></label><nav aria-label=Search class=md-search__options><a class="md-search__icon md-icon" aria-label=Share data-clipboard data-clipboard-text data-md-component=search-share href=javascript:void(0) tabindex=-1 title=Share> <svg viewbox="0 0 24 24" xmlns=http://www.w3.org/2000/svg><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66 0 1.61 1.31 2.91 2.92 2.91s2.92-1.3 2.92-2.91A2.92 2.92 0 0 0 18 16.08"/></svg> </a><button class="md-search__icon md-icon" aria-label=Clear tabindex=-1 title=Clear type=reset><svg viewbox="0 0 24 24" xmlns=http://www.w3.org/2000/svg><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg></button></nav></form><div class=md-search__output><div class=md-search__scrollwrap data-md-scrollfix tabindex=0><div class=md-search-result data-md-component=search-result><div class=md-search-result__meta>Initializing search</div><ol class=md-search-result__list role=presentation></ol></div></div></div></div></div><div class=md-header__source><a title="Go to repository" class=md-source data-md-component=source href=https://github.com/vendelieu/telegram-bot> <div class="md-source__icon md-icon"><svg viewbox="0 0 496 512" xmlns=http://www.w3.org/2000/svg><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8M97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg></div> <div class=md-source__repository>vendelieu/telegram-bot</div> </a></div></nav></header><div class=md-container data-md-component=container><nav aria-label=Tabs class=md-tabs data-md-component=tabs><div class=md-grid><ul class=md-tabs__list><li class=md-tabs__item><a class=md-tabs__link href=..> Home </a><li class="md-tabs__item md-tabs__item--active"><a class=md-tabs__link href=../Actions/> Documentation </a><li class=md-tabs__item><a class=md-tabs__link href=https://vendelieu.github.io/telegram-bot/> API Reference </a></ul></div></nav><main class=md-main data-md-component=main><div class="md-main__inner md-grid"><div class="md-sidebar md-sidebar--primary" data-md-component=sidebar data-md-type=navigation><div class=md-sidebar__scrollwrap><div class=md-sidebar__inner><nav class="md-nav md-nav--primary md-nav--lifted" aria-label=Navigation data-md-level=0><label class=md-nav__title for=__drawer><a aria-label="Telegram bot" class="md-nav__button md-logo" title="Telegram bot" data-md-component=logo href=..> <img alt=logo src=../assets/img/lib-logo.png> </a> Telegram bot</label><div class=md-nav__source><a title="Go to repository" class=md-source data-md-component=source href=https://github.com/vendelieu/telegram-bot> <div class="md-source__icon md-icon"><svg viewbox="0 0 496 512" xmlns=http://www.w3.org/2000/svg><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8M97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg></div> <div class=md-source__repository>vendelieu/telegram-bot</div> </a></div><ul class=md-nav__list data-md-scrollfix><li class=md-nav__item><a class=md-nav__link href=..> <span class=md-ellipsis> Home </span> </a><li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested"><input class="md-nav__toggle md-toggle" checked id=__nav_2 type=checkbox> <label class=md-nav__link for=__nav_2 id=__nav_2_label><span class=md-ellipsis> Documentation </span> <span class="md-nav__icon md-icon"></span></label> <nav aria-expanded=true aria-labelledby=__nav_2_label class=md-nav data-md-level=1><label class=md-nav__title for=__nav_2><span class="md-nav__icon md-icon"></span> Documentation</label><ul class=md-nav__list data-md-scrollfix><li class=md-nav__item><a class=md-nav__link href=../Actions/> <span class=md-ellipsis> Actions </span> </a><li class=md-nav__item><a class=md-nav__link href=../Activites-and-Processors/> <span class=md-ellipsis> Activites And Processors </span> </a><li class=md-nav__item><a class=md-nav__link href=../Activity-invocation/> <span class=md-ellipsis> Activity Invocation </span> </a><li class=md-nav__item><a class=md-nav__link href=../Bot-Context/> <span class=md-ellipsis> Bot Context </span> </a><li class=md-nav__item><a class=md-nav__link href=../Bot-configuration/> <span class=md-ellipsis> Bot Configuration </span> </a><li class=md-nav__item><a class=md-nav__link href=../F.A.Q/> <span class=md-ellipsis> F.A.Q </span> </a><li class=md-nav__item><a class=md-nav__link href=../FSM-and-Conversation-handling/> <span class=md-ellipsis> Fsm And Conversation Handling </span> </a><li class=md-nav__item><a class=md-nav__link href=../Functional-DSL/> <span class=md-ellipsis> Functional Dsl </span> </a><li class=md-nav__item><a class=md-nav__link href=../Guards/> <span class=md-ellipsis> Guards </span> </a><li class=md-nav__item><a class=md-nav__link href=../Handlers/> <span class=md-ellipsis> Handlers </span> </a><li class=md-nav__item><a class=md-nav__link href=../Update-parsing/> <span class=md-ellipsis> Update Parsing </span> </a><li class=md-nav__item><a class=md-nav__link href=../Useful-utilities-and-tips/> <span class=md-ellipsis> Useful Utilities And Tips </span> </a><li class="md-nav__item md-nav__item--active"><input class="md-nav__toggle md-toggle" id=__toc type=checkbox> <label class="md-nav__link md-nav__link--active" for=__toc><span class=md-ellipsis> Web Starters (Spring And Ktor) </span> <span class="md-nav__icon md-icon"></span></label> <a class="md-nav__link md-nav__link--active" href=./> <span class=md-ellipsis> Web Starters (Spring And Ktor) </span> </a> <nav aria-label="On this page" class="md-nav md-nav--secondary"><label class=md-nav__title for=__toc><span class="md-nav__icon md-icon"></span> On this page</label><ul class=md-nav__list data-md-component=toc data-md-scrollfix><li class=md-nav__item><a class=md-nav__link href=#spring-starter> <span class=md-ellipsis> Spring starter </span> </a><li class=md-nav__item><a class=md-nav__link href=#key-features> <span class=md-ellipsis> Key Features </span> </a><li class=md-nav__item><a class=md-nav__link href=#getting-started> <span class=md-ellipsis> Getting Started </span> </a> <nav aria-label="Getting Started" class=md-nav><ul class=md-nav__list><li class=md-nav__item><a class=md-nav__link href=#dependency> <span class=md-ellipsis> Dependency </span> </a><li class=md-nav__item><a class=md-nav__link href=#configuration> <span class=md-ellipsis> Configuration </span> </a><li class=md-nav__item><a class=md-nav__link href=#usage> <span class=md-ellipsis> Usage </span> </a></ul></nav><li class=md-nav__item><a class=md-nav__link href=#advanced-configuration> <span class=md-ellipsis> Advanced Configuration </span> </a><li class=md-nav__item><a class=md-nav__link href=#ktor> <span class=md-ellipsis> Ktor </span> </a><li class=md-nav__item><a class=md-nav__link href=#installation> <span class=md-ellipsis> Installation </span> </a><li class=md-nav__item><a class=md-nav__link href=#key-components> <span class=md-ellipsis> Key Components </span> </a><li class=md-nav__item><a class=md-nav__link href=#configuration_1> <span class=md-ellipsis> Configuration </span> </a> <nav aria-label=Configuration class=md-nav><ul class=md-nav__list><li class=md-nav__item><a class=md-nav__link href=#server-setup> <span class=md-ellipsis> Server Setup </span> </a><li class=md-nav__item><a class=md-nav__link href=#bot-configuration> <span class=md-ellipsis> Bot Configuration: </span> </a></ul></nav><li class=md-nav__item><a class=md-nav__link href=#example-usage> <span class=md-ellipsis> Example Usage </span> </a></ul></nav></ul></nav><li class=md-nav__item><a class=md-nav__link href=https://vendelieu.github.io/telegram-bot/> <span class=md-ellipsis> API Reference </span> </a></ul></nav></div></div></div><div class="md-sidebar md-sidebar--secondary" data-md-component=sidebar data-md-type=toc><div class=md-sidebar__scrollwrap><div class=md-sidebar__inner><nav aria-label="On this page" class="md-nav md-nav--secondary"><label class=md-nav__title for=__toc><span class="md-nav__icon md-icon"></span> On this page</label><ul class=md-nav__list data-md-component=toc data-md-scrollfix><li class=md-nav__item><a class=md-nav__link href=#spring-starter> <span class=md-ellipsis> Spring starter </span> </a><li class=md-nav__item><a class=md-nav__link href=#key-features> <span class=md-ellipsis> Key Features </span> </a><li class=md-nav__item><a class=md-nav__link href=#getting-started> <span class=md-ellipsis> Getting Started </span> </a> <nav aria-label="Getting Started" class=md-nav><ul class=md-nav__list><li class=md-nav__item><a class=md-nav__link href=#dependency> <span class=md-ellipsis> Dependency </span> </a><li class=md-nav__item><a class=md-nav__link href=#configuration> <span class=md-ellipsis> Configuration </span> </a><li class=md-nav__item><a class=md-nav__link href=#usage> <span class=md-ellipsis> Usage </span> </a></ul></nav><li class=md-nav__item><a class=md-nav__link href=#advanced-configuration> <span class=md-ellipsis> Advanced Configuration </span> </a><li class=md-nav__item><a class=md-nav__link href=#ktor> <span class=md-ellipsis> Ktor </span> </a><li class=md-nav__item><a class=md-nav__link href=#installation> <span class=md-ellipsis> Installation </span> </a><li class=md-nav__item><a class=md-nav__link href=#key-components> <span class=md-ellipsis> Key Components </span> </a><li class=md-nav__item><a class=md-nav__link href=#configuration_1> <span class=md-ellipsis> Configuration </span> </a> <nav aria-label=Configuration class=md-nav><ul class=md-nav__list><li class=md-nav__item><a class=md-nav__link href=#server-setup> <span class=md-ellipsis> Server Setup </span> </a><li class=md-nav__item><a class=md-nav__link href=#bot-configuration> <span class=md-ellipsis> Bot Configuration: </span> </a></ul></nav><li class=md-nav__item><a class=md-nav__link href=#example-usage> <span class=md-ellipsis> Example Usage </span> </a></ul></nav></div></div></div><div class=md-content data-md-component=content><article class="md-content__inner md-typeset"><h1>Web Starters (Spring And Ktor)</h1><h3 id=spring-starter>Spring starter<a title="Permanent link" class=headerlink href=#spring-starter>¶</a></h3><p>The Spring Starter module for library is an auto-configuration module that integrates Telegram bot functionalities into Spring Boot applications. It leverages the power of Spring Boot's dependency injection and configuration properties to automatically configure Telegram bots based on the provided configuration. This library is particularly useful for developers looking to build Telegram bots using Kotlin and Spring Boot, offering a streamlined approach to bot development and management.<h3 id=key-features>Key Features<a title="Permanent link" class=headerlink href=#key-features>¶</a></h3><ul><li><strong>Auto-Configuration</strong>: The library automatically configures Telegram bots based on the provided configuration properties, eliminating the need for manual setup.<li><strong>Configuration Properties</strong>: It supports configuration properties for easy customization of bot settings, such as bot tokens, package names, and identifiers.<li><strong>Spring Integration</strong>: Seamlessly integrates with the Spring ecosystem, utilizing Spring's dependency injection and application context for managing bot instances.<li><strong>Coroutine Support</strong>: Leverages Kotlin coroutines for asynchronous bot operations, ensuring efficient and non-blocking execution.</ul><h3 id=getting-started>Getting Started<a title="Permanent link" class=headerlink href=#getting-started>¶</a></h3><p>To use the Spring Starter Library for Telegram Bots, you need to include it as a dependency in your Spring Boot project. The library is designed to work with Spring Boot applications and requires the Spring Boot framework to function.<h4 id=dependency>Dependency<a title="Permanent link" class=headerlink href=#dependency>¶</a></h4><p>Add the following dependency to your <code>build.gradle</code> or <code>pom.xml</code> file:<div class=highlight><pre><span></span><code><a href=#__codelineno-0-1 id=__codelineno-0-1 name=__codelineno-0-1></a>dependencies {
<a href=#__codelineno-0-2 id=__codelineno-0-2 name=__codelineno-0-2></a>    implementation 'eu.vendeli:spring-starter:&LTversion>'
<a href=#__codelineno-0-3 id=__codelineno-0-3 name=__codelineno-0-3></a>}
</code></pre></div><p>Replace <code>&LTversion></code> with the latest version of the library.<h4 id=configuration>Configuration<a title="Permanent link" class=headerlink href=#configuration>¶</a></h4><p>The library uses Spring Boot's <code>@ConfigurationProperties</code> to bind configuration properties. You can define your bot configurations in the <code>application.properties</code> or <code>application.yml</code> file of your Spring Boot application.<div class=highlight><pre><span></span><code><a href=#__codelineno-1-1 id=__codelineno-1-1 name=__codelineno-1-1></a><span class=nt>ktgram</span><span class=p>:</span>
<a href=#__codelineno-1-2 id=__codelineno-1-2 name=__codelineno-1-2></a><span class=w> </span><span class=nt>autoStartPolling</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
<a href=#__codelineno-1-3 id=__codelineno-1-3 name=__codelineno-1-3></a><span class=w> </span><span class=nt>shareHttpClient</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
<a href=#__codelineno-1-4 id=__codelineno-1-4 name=__codelineno-1-4></a><span class=w> </span><span class=nt>bot</span><span class=p>:</span>
<a href=#__codelineno-1-5 id=__codelineno-1-5 name=__codelineno-1-5></a><span class=w>    </span><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>token</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">YOUR_BOT_TOKEN</span>
<a href=#__codelineno-1-6 id=__codelineno-1-6 name=__codelineno-1-6></a><span class=w>      </span><span class=nt>pckg</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">com.example.bot</span>
<a href=#__codelineno-1-7 id=__codelineno-1-7 name=__codelineno-1-7></a><span class=w>      </span><span class=nt>identifier</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">MyBot</span>
</code></pre></div><h4 id=usage>Usage<a title="Permanent link" class=headerlink href=#usage>¶</a></h4><p>Once the library is included and configured, it automatically creates and configures Telegram bot instances based on the provided configuration.<p>It also supports multiple bot instances, to initialize several ones just declare it as new entry in bot section:<div class=highlight><pre><span></span><code><a href=#__codelineno-2-1 id=__codelineno-2-1 name=__codelineno-2-1></a><span class=nt>ktgram</span><span class=p>:</span>
<a href=#__codelineno-2-2 id=__codelineno-2-2 name=__codelineno-2-2></a><span class=w> </span><span class=nt>bot</span><span class=p>:</span>
<a href=#__codelineno-2-3 id=__codelineno-2-3 name=__codelineno-2-3></a><span class=w>    </span><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>token</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">YOUR_BOT_TOKEN</span>
<a href=#__codelineno-2-4 id=__codelineno-2-4 name=__codelineno-2-4></a><span class=w>    </span><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>token</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">SECOND_BOT_TOKEN</span>
</code></pre></div><h3 id=advanced-configuration>Advanced Configuration<a title="Permanent link" class=headerlink href=#advanced-configuration>¶</a></h3><p>For more advanced configurations, such as customizing bot behavior or integrating with other Spring components, you can extend the <code>BotConfiguration</code> class and change bot configuration through its <code>applyCfg</code> method, you can see example <a href=https://github.com/vendelieu/telegram-bot_template/blob/spring-bot/src/main/kotlin/com/example/springbot/configuration/BotConfig.kt>there</a>.<div class="admonition tip"><p class=admonition-title>Tip<p>To configure each initialized instance with a custom configuration, distinguish them by their identifier (the BotConfiguration class also has an identifier).</div><h3 id=ktor>Ktor<a title="Permanent link" class=headerlink href=#ktor>¶</a></h3><p>The module is designed to facilitate the creation of a webhook server for Telegram bots. It allows developers to configure the server, including SSL/TLS settings, and declare multiple Telegram bots with custom configurations. The setup process is flexible, enabling developers to tailor the server to their specific needs.<h3 id=installation>Installation<a title="Permanent link" class=headerlink href=#installation>¶</a></h3><p>To install ktor starter add additional to main dependency:<div class=highlight><pre><span></span><code><a href=#__codelineno-3-1 id=__codelineno-3-1 name=__codelineno-3-1></a>dependencies {
<a href=#__codelineno-3-2 id=__codelineno-3-2 name=__codelineno-3-2></a>    implementation("eu.vendeli:ktor-starter:x.y.z") // there
<a href=#__codelineno-3-3 id=__codelineno-3-3 name=__codelineno-3-3></a>    // change x.y.z to current library version
<a href=#__codelineno-3-4 id=__codelineno-3-4 name=__codelineno-3-4></a>}
</code></pre></div><h3 id=key-components>Key Components<a title="Permanent link" class=headerlink href=#key-components>¶</a></h3><p><code>serveWebhook</code> Function<p>The serveWebhook function is the core of the library. It sets up and starts the webhook server for Telegram bots. It accepts two parameters:<ul><li><code>wait</code>: A boolean indicating whether the server should wait for the application to stop before shutting down. Defaults to true.<li><code>serverBuilder</code>: A lambda function that configures the server. Defaults to an empty lambda.</ul><h3 id=configuration_1>Configuration<a title="Permanent link" class=headerlink href=#configuration_1>¶</a></h3><ul><li><code>WEBHOOK_PREFIX</code>: it's paramter that will be used for address prefix for webhook listener route. (defaults to "/")</ul><h4 id=server-setup>Server Setup<a title="Permanent link" class=headerlink href=#server-setup>¶</a></h4><ul><li><code>server</code>: A method to set the server configuration using either EnvConfiguration or ManualConfiguration.<li><code>engine</code>: A method to configure the Netty application engine.<li><code>ktorModule</code>: A method to add Ktor modules to the application.</ul><p>The library provides wide range of configurable parameters for the server, including host, port, SSL settings, and more. There are two concrete options for its configuring:<ul><li><code>EnvConfiguration</code>: Reads configuration values from environment with <code>KTGRAM_</code> prefix.<li><code>ManualConfiguration</code>: Allows for manual setting of configuration values, set your parameters in <code>server {}</code> function.</ul><p>There's list of parameters that can be set:<ul><li><code>HOST</code>: The hostname or IP address of the server.<li><code>PORT</code>: The port number for the server.<li><code>SSL_PORT</code>: The port number for SSL/TLS connections.<li><code>PEM_PRIVATE_KEY_PATH</code>: The path to the PEM private key file.<li><code>PEM_CHAIN_PATH</code>: The path to the PEM certificate chain file.<li><code>PEM_PRIVATE_KEY</code>: The PEM private key PASSWORD as a character array.<li><code>KEYSTORE_PATH</code>: The path to the Java KeyStore file.<li><code>KEYSTORE_PASSWORD</code>: The password for the KeyStore.<li><code>KEY_ALIAS</code>: The alias for the key in the KeyStore.<li><code>SSL_ON</code>: A boolean indicating whether SSL/TLS should be enabled. Defaults to true.</ul><div class="admonition tip"><p class=admonition-title>Tip<p>If pem certificates are present, the module itself will create a jks storage from them at the specified path.</div><h4 id=bot-configuration>Bot Configuration:<a title="Permanent link" class=headerlink href=#bot-configuration>¶</a></h4><p>To configure bot call <code>declareBot {}</code> which have such parameters:<ul><li><code>token</code>: The bot token.<li><code>pckg</code>: The package name for the bot.<li><code>configuration</code>: A lambda function for configuring the bot.<li><code>handlingBehaviour</code>: A lambda function for setting the bot's handling behavior.<li><code>onInit</code>: A lambda function to be executed when the bot is initialized.</ul><h3 id=example-usage>Example Usage<a title="Permanent link" class=headerlink href=#example-usage>¶</a></h3><p>To use this module, call <code>serveWebhook</code> function, configure it with your desired settings, declare your bots. Here's a simplified example:<div class=highlight><pre><span></span><code><a href=#__codelineno-4-1 id=__codelineno-4-1 name=__codelineno-4-1></a><span class=kd>fun</span><span class=w> </span><span class=nf>main</span><span class=p>()</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>runBlocking</span><span class=w> </span><span class=p>{</span>
<a href=#__codelineno-4-2 id=__codelineno-4-2 name=__codelineno-4-2></a><span class=w>    </span><span class=n>serveWebhook</span><span class=w> </span><span class=p>{</span>
<a href=#__codelineno-4-3 id=__codelineno-4-3 name=__codelineno-4-3></a><span class=w>        </span><span class=n>server</span><span class=w> </span><span class=p>{</span>
<a href=#__codelineno-4-4 id=__codelineno-4-4 name=__codelineno-4-4></a><span class=w>            </span><span class=n>HOST</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s>"0.0.0.0"</span>
<a href=#__codelineno-4-5 id=__codelineno-4-5 name=__codelineno-4-5></a><span class=w>            </span><span class=n>PORT</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=m>8080</span>
<a href=#__codelineno-4-6 id=__codelineno-4-6 name=__codelineno-4-6></a><span class=w>            </span><span class=n>SSL_PORT</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=m>8443</span>
<a href=#__codelineno-4-7 id=__codelineno-4-7 name=__codelineno-4-7></a>
<a href=#__codelineno-4-8 id=__codelineno-4-8 name=__codelineno-4-8></a><span class=w>            </span><span class=n>PEM_PRIVATE_KEY_PATH</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s>"/etc/letsencrypt/live/example.com/privkey.pem"</span>
<a href=#__codelineno-4-9 id=__codelineno-4-9 name=__codelineno-4-9></a><span class=w>            </span><span class=n>PEM_CHAIN_PATH</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s>"/etc/letsencrypt/live/example.com/fullchain.pem"</span>
<a href=#__codelineno-4-10 id=__codelineno-4-10 name=__codelineno-4-10></a><span class=w>            </span><span class=n>PEM_PRIVATE_KEY</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s>"pem_changeit"</span><span class=p>.</span><span class=na>toCharArray</span><span class=p>()</span>
<a href=#__codelineno-4-11 id=__codelineno-4-11 name=__codelineno-4-11></a>
<a href=#__codelineno-4-12 id=__codelineno-4-12 name=__codelineno-4-12></a><span class=w>            </span><span class=n>KEYSTORE_PATH</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s>"/etc/ssl/certs/java/cacerts/bot_keystore.jks"</span>
<a href=#__codelineno-4-13 id=__codelineno-4-13 name=__codelineno-4-13></a><span class=w>            </span><span class=n>KEYSTORE_PASSWORD</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s>"changeit"</span><span class=p>.</span><span class=na>toCharArray</span><span class=p>()</span>
<a href=#__codelineno-4-14 id=__codelineno-4-14 name=__codelineno-4-14></a><span class=w>            </span><span class=c1>// Set other configuration parameters as needed</span>
<a href=#__codelineno-4-15 id=__codelineno-4-15 name=__codelineno-4-15></a><span class=w>        </span><span class=p>}</span>
<a href=#__codelineno-4-16 id=__codelineno-4-16 name=__codelineno-4-16></a><span class=w>        </span><span class=n>declareBot</span><span class=w> </span><span class=p>{</span>
<a href=#__codelineno-4-17 id=__codelineno-4-17 name=__codelineno-4-17></a><span class=w>            </span><span class=n>token</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s>"YOUR_BOT_TOKEN"</span>
<a href=#__codelineno-4-18 id=__codelineno-4-18 name=__codelineno-4-18></a><span class=w>            </span><span class=c1>// Configure other bot settings</span>
<a href=#__codelineno-4-19 id=__codelineno-4-19 name=__codelineno-4-19></a><span class=w>        </span><span class=p>}</span>
<a href=#__codelineno-4-20 id=__codelineno-4-20 name=__codelineno-4-20></a><span class=w>        </span><span class=c1>// Add more bots or set other parameters if needed</span>
<a href=#__codelineno-4-21 id=__codelineno-4-21 name=__codelineno-4-21></a><span class=w>    </span><span class=p>}</span>
<a href=#__codelineno-4-22 id=__codelineno-4-22 name=__codelineno-4-22></a><span class=p>}</span>
</code></pre></div><div class="admonition danger"><p class=admonition-title>Caution<p>Don't forget to set webhook to make everything work. :)</div><p>By default module will serve webhook listenening endpoints as <code>host/BOT_TOKEN</code></article></div><script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script></div><button class="md-top md-icon" data-md-component=top hidden type=button><svg viewbox="0 0 24 24" xmlns=http://www.w3.org/2000/svg><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg> Back to top</button></main><footer class=md-footer><nav class="md-footer__inner md-grid" aria-label=Footer><a aria-label="Previous: Useful Utilities And Tips" class="md-footer__link md-footer__link--prev" href=../Useful-utilities-and-tips/> <div class="md-footer__button md-icon"><svg viewbox="0 0 24 24" xmlns=http://www.w3.org/2000/svg><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg></div> <div class=md-footer__title><span class=md-footer__direction> Previous </span><div class=md-ellipsis>Useful Utilities And Tips</div></div> </a></nav><div class="md-footer-meta md-typeset"><div class="md-footer-meta__inner md-grid"><div class=md-copyright>Made with <a href=https://squidfunk.github.io/mkdocs-material/ rel=noopener target=_blank> Material for MkDocs </a></div></div></div></footer></div><div class=md-dialog data-md-component=dialog><div class="md-dialog__inner md-typeset"></div></div><div class=md-consent data-md-component=consent hidden id=__consent><div class=md-consent__overlay></div><aside class=md-consent__inner><form class="md-consent__form md-grid md-typeset" name=consent><h4>Cookie consent</h4><p>We use cookies to recognize your repeated visits and preferences, as well as to measure the effectiveness of our documentation and whether users find what they're searching for. With your consent, you're helping us to make our documentation better.</p><input class=md-toggle id=__settings type=checkbox><div class=md-consent__settings><ul class=task-list><li class=task-list-item><label class=task-list-control><input checked name=analytics type=checkbox> <span class=task-list-indicator></span> Google Analytics</label><li class=task-list-item><label class=task-list-control><input checked name=github type=checkbox> <span class=task-list-indicator></span> GitHub</label></ul></div><div class=md-consent__controls><button class="md-button md-button--primary">Accept</button><label class=md-button for=__settings>Manage settings</label></div></form></aside></div><script>var consent=__md_get(`__consent`);if(consent)for(var input of document.forms.consent.elements)input.name&&(input.checked=consent[input.name]||!1);else `file:`!==location.protocol&&setTimeout((()=>{document.querySelector(`[data-md-component=consent]`).hidden=!1}),250);var form=document.forms.consent;for(var action of [`submit`,a])form.addEventListener(action,(b=>{if(b.preventDefault(),a===b.type)for(var c of document.forms.consent.elements)c.name&&(c.checked=!1);__md_set(`__consent`,Object.fromEntries(Array.from(new FormData(form).keys()).map((a=>[a,!0])))),location.hash=``,location.reload()}))</script><script id=__config type=application/json>{"base": "..", "features": ["content.code.annotate", "content.code.copy", "navigation.footer", "navigation.tabs", "navigation.top", "navigation.tracking", "search.share", "toc.follow"], "search": "../assets/javascripts/workers/search.6ce7567c.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script><script src=../assets/javascripts/bundle.88dd0f4e.min.js></script>