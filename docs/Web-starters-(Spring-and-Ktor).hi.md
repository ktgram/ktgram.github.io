---
---
title: Web Starters (Spring And Ktor)
---

### Spring starter

लाइब्रेरी के लिए Spring Starter मॉड्यूल एक ऑटो-कॉन्फ़िगरेशन मॉड्यूल है जो Spring Boot एप्लिकेशन में Telegram बॉट कार्यक्षमताओं को एकीकृत करता है। यह Spring Boot के निर्भरता इंजेक्शन और कॉन्फ़िगरेशन गुणों की शक्ति का लाभ उठाता है ताकि प्रदान किए गए कॉन्फ़िगरेशन के आधार पर स्वचालित रूप से Telegram बॉट्स को कॉन्फ़िगर किया जा सके। यह लाइब्रेरी विशेष रूप से Kotlin और Spring Boot का उपयोग करके Telegram बॉट्स बनाने की तलाश कर रहे डेवलपर्स के लिए उपयोगी है, बॉट विकास और प्रबंधन के लिए एक सुव्यवस्थित दृष्टिकोण प्रदान करता है।

### प्रमुख विशेषताएँ

- **ऑटो-कॉन्फ़िगरेशन**: लाइब्रेरी स्वचालित रूप से प्रदान किए गए कॉन्फ़िगरेशन गुणों के आधार पर Telegram बॉट्स को कॉन्फ़िगर करती है, मैनुअल सेटअप की आवश्यकता को समाप्त करती है।
- **कॉन्फ़िगरेशन गुण**: यह बॉट सेटिंग्स के आसान अनुकूलन के लिए कॉन्फ़िगरेशन गुणों का समर्थन करता है, जैसे बॉट टोकन, पैकेज नाम और पहचानकर्ता।
- **Spring एकीकरण**: Spring इकोसिस्टम के साथ सहजता से एकीकृत होता है, बॉट उदाहरणों के प्रबंधन के लिए Spring के निर्भरता इंजेक्शन और एप्लिकेशन संदर्भ का उपयोग करता है।
- **कोरुटीन समर्थन**: अतुल्यकालिक बॉट संचालन के लिए Kotlin कोरुटीन का लाभ उठाता है, कुशल और गैर-अवरोधक निष्पादन सुनिश्चित करता है।

### आरंभ करना

Spring Starter लाइब्रेरी का उपयोग करने के लिए, आपको इसे अपने Spring Boot प्रोजेक्ट में निर्भरता के रूप में शामिल करना होगा। लाइब्रेरी Spring Boot एप्लिकेशन के साथ काम करने के लिए डिज़ाइन की गई है और कार्य करने के लिए Spring Boot फ्रेमवर्क की आवश्यकता होती है।

#### निर्भरता

अपने `build.gradle` या `pom.xml` फ़ाइल में निम्नलिखित निर्भरता जोड़ें:

```gradle
dependencies {
    implementation 'eu.vendeli:spring-starter:<version>'
}
```

`<version>` को लाइब्रेरी के नवीनतम संस्करण से बदलें।

#### कॉन्फ़िगरेशन

लाइब्रेरी Spring Boot के `@ConfigurationProperties` का उपयोग करके कॉन्फ़िगरेशन गुणों को बाध्य करती है। आप अपने Spring Boot एप्लिकेशन के `application.properties` या `application.yml` फ़ाइल में अपनी बॉट कॉन्फ़िगरेशन को परिभाषित कर सकते हैं।

```yaml
ktgram:
 autoStartPolling: true
 shareHttpClient: true
 bot:
    - token: YOUR_BOT_TOKEN
      pckg: com.example.bot
      identifier: MyBot
```

#### उपयोग

एक बार लाइब्रेरी शामिल और कॉन्फ़िगर हो जाने के बाद, यह प्रदान किए गए कॉन्फ़िगरेशन के आधार पर स्वचालित रूप से Telegram बॉट उदाहरण बनाता और कॉन्फ़िगर करता है।

यह कई बॉट उदाहरणों का भी समर्थन करता है, कई को प्रारंभ करने के लिए बस बॉट अनुभाग में इसे नए प्रविष्टि के रूप में घोषित करें:

```yaml
ktgram:
 bot:
    - token: YOUR_BOT_TOKEN
    - token: SECOND_BOT_TOKEN
```

### उन्नत कॉन्फ़िगरेशन

अधिक उन्नत कॉन्फ़िगरेशन के लिए, जैसे बॉट व्यवहार को अनुकूलित करना या अन्य Spring घटकों के साथ एकीकरण, आप `BotConfiguration` कक्षा का विस्तार कर सकते हैं और इसके `applyCfg` विधि के माध्यम से बॉट कॉन्फ़िगरेशन को बदल सकते हैं, आप [वहां](https://github.com/vendelieu/telegram-bot_template/blob/spring-bot/src/main/kotlin/com/example/springbot/configuration/BotConfig.kt) उदाहरण देख सकते हैं।

> [!TIP]
> प्रत्येक प्रारंभित उदाहरण को कस्टम कॉन्फ़िगरेशन के साथ कॉन्फ़िगर करने के लिए, उन्हें उनकी पहचानकर्ता द्वारा अलग करें (BotConfiguration कक्षा में भी एक पहचानकर्ता है)।

### Ktor

यह मॉड्यूल Telegram बॉट्स के लिए एक webhook सर्वर बनाने की सुविधा प्रदान करने के लिए डिज़ाइन किया गया है। यह डेवलपर्स को सर्वर को कॉन्फ़िगर करने की अनुमति देता है, जिसमें SSL/TLS सेटिंग्स शामिल हैं, और कस्टम कॉन्फ़िगरेशन के साथ कई Telegram बॉट्स घोषित करता है। सेटअप प्रक्रिया लचीली है, जिससे डेवलपर्स सर्वर को अपनी विशिष्ट आवश्यकताओं के अनुसार अनुकूलित कर सकते हैं।

### स्थापना

ktor starter स्थापित करने के लिए मुख्य निर्भरता में अतिरिक्त जोड़ें:

```gradle
dependencies {
    implementation("eu.vendeli:ktor-starter:x.y.z") // there
    // change x.y.z to current library version
}
```

### प्रमुख घटक

`serveWebhook` फ़ंक्शन

serveWebhook फ़ंक्शन लाइब्रेरी का मूल है। यह Telegram बॉट्स के लिए webhook सर्वर को सेटअप और स्टार्ट करता है। यह दो पैरामीटर स्वीकार करता है:

- `wait`: एक बूलियन जो इंगित करता है कि क्या सर्वर को बंद होने से पहले एप्लिकेशन के रुकने की प्रतीक्षा करनी चाहिए। डिफ़ॉल्ट रूप से सत्य।
- `serverBuilder`: सर्वर को कॉन्फ़िगर करने वाला एक लैम्ब्डा फ़ंक्शन। डिफ़ॉल्ट रूप से एक खाली लैम्ब्डा।

### कॉन्फ़िगरेशन

* `WEBHOOK_PREFIX`: यह पैरामीटर webhook लिसनर रूट के लिए पते के उपसर्ग के रूप में उपयोग किया जाएगा। (डिफ़ॉल्ट रूप से "/" है)

#### सर्वर सेटअप

- `server`: EnvConfiguration या ManualConfiguration का उपयोग करके सर्वर कॉन्फ़िगरेशन सेट करने की एक विधि।
- `engine`: Netty एप्लिकेशन इंजन को कॉन्फ़िगर करने की एक विधि।
- `ktorModule`: एप्लिकेशन में Ktor मॉड्यूल जोड़ने की एक विधि।

लाइब्रेरी सर्वर के लिए कॉन्फ़िगर करने योग्य पैरामीटर की एक विस्तृत श्रृंखला प्रदान करती है, जिसमें होस्ट, पोर्ट, SSL सेटिंग्स और बहुत कुछ शामिल हैं। इसके कॉन्फ़िगर करने के लिए दो ठोस विकल्प हैं:

* `EnvConfiguration`: `KTGRAM_` उपसर्ग के साथ वातावरण से कॉन्फ़िगरेशन मान पढ़ता है।
* `ManualConfiguration`: कॉन्फ़िगरेशन मानों को मैन्युअल रूप से सेट करने की अनुमति देता है, अपने पैरामीटर को `server {}` फ़ंक्शन में सेट करें।

सेट किए जा सकने वाले पैरामीटर की सूची है:

- `HOST`: सर्वर का होस्टनाम या IP पता।
- `PORT`: सर्वर के लिए पोर्ट नंबर।
- `SSL_PORT`: SSL/TLS कनेक्शन के लिए पोर्ट नंबर।
- `PEM_PRIVATE_KEY_PATH`: PEM निजी कुंजी फ़ाइल का पथ।
- `PEM_CHAIN_PATH`: PEM प्रमाणपत्र श्रृंखला फ़ाइल का पथ।
- `PEM_PRIVATE_KEY`: PEM निजी कुंजी पासवर्ड वर्ण सरणि के रूप में।
- `KEYSTORE_PATH`: Java KeyStore फ़ाइल का पथ।
- `KEYSTORE_PASSWORD`: KeyStore के लिए पासवर्ड।
- `KEY_ALIAS`: KeyStore में कुंजी के लिए उपनाम।
- `SSL_ON`: एक बूलियन जो इंगित करता है कि क्या SSL/TLS सक्षम होना चाहिए। डिफ़ॉल्ट रूप से सत्य।

> [!TIP]
> यदि pem प्रमाणपत्र मौजूद हैं, तो मॉड्यूल स्वयं उन्हें निर्दिष्ट पथ पर jks संग्रहण से बनाएगा।

#### बॉट कॉन्फ़िगरेशन:

बॉट को कॉन्फ़िगर करने के लिए `declareBot {}` कॉल करें जिसमें ऐसे पैरामीटर हैं:

- `token`: बॉट टोकन।
- `pckg`: बॉट के लिए पैकेज नाम।
- `configuration`: बॉट को कॉन्फ़िगर करने के लिए एक लैम्ब्डा फ़ंक्शन।
- `handlingBehaviour`: बॉट के हैंडलिंग व्यवहार को सेट करने के लिए एक लैम्ब्डा फ़ंक्शन।
- `onInit`: बॉट प्रारंभ होने पर निष्पादित किए जाने वाले लैम्ब्डा फ़ंक्शन।

### उदाहरण उपयोग

इस मॉड्यूल का उपयोग करने के लिए, `serveWebhook` फ़ंक्शन कॉल करें, अपनी वांछित सेटिंग्स के साथ इसे कॉन्फ़िगर करें, अपने बॉट्स को घोषित करें। यहां एक सरलीकृत उदाहरण है:

```kotlin
fun main() = runBlocking {
    serveWebhook {
        server {
            HOST = "0.0.0.0"
            PORT = 8080
            SSL_PORT = 8443

            PEM_PRIVATE_KEY_PATH = "/etc/letsencrypt/live/example.com/privkey.pem"
            PEM_CHAIN_PATH = "/etc/letsencrypt/live/example.com/fullchain.pem"
            PEM_PRIVATE_KEY = "pem_changeit".toCharArray()

            KEYSTORE_PATH = "/etc/ssl/certs/java/cacerts/bot_keystore.jks"
            KEYSTORE_PASSWORD = "changeit".toCharArray()
            // Set other configuration parameters as needed
        }
        declareBot {
            token = "YOUR_BOT_TOKEN"
            // Configure other bot settings
        }
        // Add more bots or set other parameters if needed
    }
}
```

> [!CAUTION]
> सब कुछ काम करने के लिए webhook सेट करना न भूलें। :)

डिफ़ॉल्ट रूप से मॉड्यूल webhook सुनने वाले एंडपॉइंट्स को `host/BOT_TOKEN` के रूप में परोसेगा


---