<!doctype html><html class=no-js lang=vi><meta charset=utf-8><meta content="width=device-width,initial-scale=1" name=viewport><meta content="Telegram Bot API wrapper with handy Kotlin DSL." name=description><link href=https://tgbot.vendeli.eu/vi/Web-starters-%28Spring-and-Ktor%29/ rel=canonical><link href=../Useful-utilities-and-tips/ rel=prev><link href=../../Web-starters-%28Spring-and-Ktor%29/ hreflang=en rel=alternate><link href=../../zh/Web-starters-%28Spring-and-Ktor%29/ hreflang=zh rel=alternate><link href=../../hi/Web-starters-%28Spring-and-Ktor%29/ hreflang=hi rel=alternate><link href=../../ru/Web-starters-%28Spring-and-Ktor%29/ hreflang=ru rel=alternate><link href=../../ko/Web-starters-%28Spring-and-Ktor%29/ hreflang=ko rel=alternate><link href=../../fa/Web-starters-%28Spring-and-Ktor%29/ hreflang=fa rel=alternate><link href=../../pt/Web-starters-%28Spring-and-Ktor%29/ hreflang=pt rel=alternate><link href=../../id/Web-starters-%28Spring-and-Ktor%29/ hreflang=id rel=alternate><link href=./ hreflang=vi rel=alternate><link href=../../assets/img/lib-logo.png rel=icon><meta content="mkdocs-1.6.1, mkdocs-material-9.7.1" name=generator><title>Web Starters (Spring And Ktor) - Telegram bot</title><link href=../../assets/stylesheets/main.484c7ddc.min.css rel=stylesheet><link href=../../assets/stylesheets/palette.ab4e12ef.min.css rel=stylesheet><link crossorigin href=https://fonts.gstatic.com rel=preconnect><link href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback" rel=stylesheet><style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style><link href=../../assets/stylesheets/extra.css rel=stylesheet><script>__md_scope=new URL(`../..`,location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+`.`+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+`.`+e,JSON.stringify(_))}catch{}};</script><body data-md-color-accent=indigo data-md-color-primary=indigo data-md-color-scheme=slate dir=ltr><input autocomplete=off class=md-toggle data-md-toggle=drawer id=__drawer type=checkbox><input autocomplete=off class=md-toggle data-md-toggle=search id=__search type=checkbox><label class=md-overlay for=__drawer></label><div data-md-component=skip><a class=md-skip href=#spring-starter> Bỏ qua </a></div><div data-md-component=announce></div><header class=md-header data-md-component=header><nav aria-label="Đầu trang" class="md-header__inner md-grid"><a aria-label="Telegram bot" class="md-header__button md-logo" title="Telegram bot" data-md-component=logo href=../> <img alt=logo src=../../assets/img/lib-logo.png> </a><label class="md-header__button md-icon" for=__drawer><svg viewbox="0 0 24 24" xmlns=http://www.w3.org/2000/svg><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg></label><div class=md-header__title data-md-component=header-title><div class=md-header__ellipsis><div class=md-header__topic><span class=md-ellipsis> Telegram bot </span></div><div class=md-header__topic data-md-component=header-topic><span class=md-ellipsis> Web Starters (Spring And Ktor) </span></div></div></div><form class=md-header__option data-md-component=palette><input aria-label="Switch to light mode" data-md-color-media="(prefers-color-scheme: dark)" class=md-option data-md-color-accent=indigo data-md-color-primary=indigo data-md-color-scheme=slate id=__palette_0 name=__palette type=radio><label class="md-header__button md-icon" title="Switch to light mode" for=__palette_1 hidden><svg viewbox="0 0 24 24" xmlns=http://www.w3.org/2000/svg><path d="m17.75 4.09-2.53 1.94.91 3.06-2.63-1.81-2.63 1.81.91-3.06-2.53-1.94L12.44 4l1.06-3 1.06 3zm3.5 6.91-1.64 1.25.59 1.98-1.7-1.17-1.7 1.17.59-1.98L15.75 11l2.06-.05L18.5 9l.69 1.95zm-2.28 4.95c.83-.08 1.72 1.1 1.19 1.85-.32.45-.66.87-1.08 1.27C15.17 23 8.84 23 4.94 19.07c-3.91-3.9-3.91-10.24 0-14.14.4-.4.82-.76 1.27-1.08.75-.53 1.93.36 1.85 1.19-.27 2.86.69 5.83 2.89 8.02a9.96 9.96 0 0 0 8.02 2.89m-1.64 2.02a12.08 12.08 0 0 1-7.8-3.47c-2.17-2.19-3.33-5-3.49-7.82-2.81 3.14-2.7 7.96.31 10.98 3.02 3.01 7.84 3.12 10.98.31"/></svg></label><input aria-label="Switch to dark mode" data-md-color-media="(prefers-color-scheme: light)" class=md-option data-md-color-accent=indigo data-md-color-primary=indigo data-md-color-scheme=default id=__palette_1 name=__palette type=radio><label class="md-header__button md-icon" title="Switch to dark mode" for=__palette_0 hidden><svg viewbox="0 0 24 24" xmlns=http://www.w3.org/2000/svg><path d="M12 7a5 5 0 0 1 5 5 5 5 0 0 1-5 5 5 5 0 0 1-5-5 5 5 0 0 1 5-5m0 2a3 3 0 0 0-3 3 3 3 0 0 0 3 3 3 3 0 0 0 3-3 3 3 0 0 0-3-3m0-7 2.39 3.42C13.65 5.15 12.84 5 12 5s-1.65.15-2.39.42zM3.34 7l4.16-.35A7.2 7.2 0 0 0 5.94 8.5c-.44.74-.69 1.5-.83 2.29zm.02 10 1.76-3.77a7.131 7.131 0 0 0 2.38 4.14zM20.65 7l-1.77 3.79a7.02 7.02 0 0 0-2.38-4.15zm-.01 10-4.14.36c.59-.51 1.12-1.14 1.54-1.86.42-.73.69-1.5.83-2.29zM12 22l-2.41-3.44c.74.27 1.55.44 2.41.44.82 0 1.63-.17 2.37-.44z"/></svg></label></form><script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script><div class=md-header__option><div class=md-select><button aria-label="Chọn ngôn ngữ" class="md-header__button md-icon"><svg viewbox="0 0 24 24" xmlns=http://www.w3.org/2000/svg><path d="m12.87 15.07-2.54-2.51.03-.03A17.5 17.5 0 0 0 14.07 6H17V4h-7V2H8v2H1v2h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11zM18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2zm-2.62 7 1.62-4.33L19.12 17z"/></svg></button><div class=md-select__inner><ul class=md-select__list><li class=md-select__item><a class=md-select__link href=../../Web-starters-%28Spring-and-Ktor%29/ hreflang=en> English </a><li class=md-select__item><a class=md-select__link href=../../zh/Web-starters-%28Spring-and-Ktor%29/ hreflang=zh> 中文 </a><li class=md-select__item><a class=md-select__link href=../../hi/Web-starters-%28Spring-and-Ktor%29/ hreflang=hi> हिन्दी </a><li class=md-select__item><a class=md-select__link href=../../ru/Web-starters-%28Spring-and-Ktor%29/ hreflang=ru> Русский </a><li class=md-select__item><a class=md-select__link href=../../ko/Web-starters-%28Spring-and-Ktor%29/ hreflang=ko> 한국어 </a><li class=md-select__item><a class=md-select__link href=../../fa/Web-starters-%28Spring-and-Ktor%29/ hreflang=fa> فارسی </a><li class=md-select__item><a class=md-select__link href=../../pt/Web-starters-%28Spring-and-Ktor%29/ hreflang=pt> Português </a><li class=md-select__item><a class=md-select__link href=../../id/Web-starters-%28Spring-and-Ktor%29/ hreflang=id> Bahasa Indonesia </a><li class=md-select__item><a class=md-select__link href=./ hreflang=vi> Tiếng Việt </a></ul></div></div></div><label class="md-header__button md-icon" for=__search><svg viewbox="0 0 24 24" xmlns=http://www.w3.org/2000/svg><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg></label><div class=md-search data-md-component=search role=dialog><label class=md-search__overlay for=__search></label><div class=md-search__inner role=search><form class=md-search__form name=search><input aria-label="Tìm kiếm" placeholder="Tìm kiếm" autocapitalize=off autocomplete=off autocorrect=off class=md-search__input data-md-component=search-query name=query required spellcheck=false type=text><label class="md-search__icon md-icon" for=__search><svg viewbox="0 0 24 24" xmlns=http://www.w3.org/2000/svg><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg> <svg viewbox="0 0 24 24" xmlns=http://www.w3.org/2000/svg><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg></label><nav aria-label="Tìm kiếm" class=md-search__options><a aria-label="Chia sẻ" class="md-search__icon md-icon" title="Chia sẻ" data-clipboard data-clipboard-text data-md-component=search-share href=javascript:void(0) tabindex=-1> <svg viewbox="0 0 24 24" xmlns=http://www.w3.org/2000/svg><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66 0 1.61 1.31 2.91 2.92 2.91s2.92-1.3 2.92-2.91A2.92 2.92 0 0 0 18 16.08"/></svg> </a><button class="md-search__icon md-icon" aria-label=Xoá tabindex=-1 title=Xoá type=reset><svg viewbox="0 0 24 24" xmlns=http://www.w3.org/2000/svg><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg></button></nav></form><div class=md-search__output><div class=md-search__scrollwrap data-md-scrollfix tabindex=0><div class=md-search-result data-md-component=search-result><div class=md-search-result__meta>Initializing search</div><ol class=md-search-result__list role=presentation></ol></div></div></div></div></div><div class=md-header__source><a title="Xem mã nguồn" class=md-source data-md-component=source href=https://github.com/vendelieu/telegram-bot> <div class="md-source__icon md-icon"><svg viewbox="0 0 512 512" xmlns=http://www.w3.org/2000/svg><path d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg></div> <div class=md-source__repository>vendelieu/telegram-bot</div> </a></div></nav></header><div class=md-container data-md-component=container><nav aria-label=Tabs class=md-tabs data-md-component=tabs><div class=md-grid><ul class=md-tabs__list><li class=md-tabs__item><a class=md-tabs__link href=../> Home </a><li class="md-tabs__item md-tabs__item--active"><a class=md-tabs__link href=../Actions/> Documentation </a><li class=md-tabs__item><a class=md-tabs__link href=https://vendelieu.github.io/telegram-bot/> API Reference </a></ul></div></nav><main class=md-main data-md-component=main><div class="md-main__inner md-grid"><div class="md-sidebar md-sidebar--primary" data-md-component=sidebar data-md-type=navigation><div class=md-sidebar__scrollwrap><div class=md-sidebar__inner><nav aria-label="Thanh điều hướng" class="md-nav md-nav--primary md-nav--lifted" data-md-level=0><label class=md-nav__title for=__drawer><a aria-label="Telegram bot" class="md-nav__button md-logo" title="Telegram bot" data-md-component=logo href=../> <img alt=logo src=../../assets/img/lib-logo.png> </a> Telegram bot</label><div class=md-nav__source><a title="Xem mã nguồn" class=md-source data-md-component=source href=https://github.com/vendelieu/telegram-bot> <div class="md-source__icon md-icon"><svg viewbox="0 0 512 512" xmlns=http://www.w3.org/2000/svg><path d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg></div> <div class=md-source__repository>vendelieu/telegram-bot</div> </a></div><ul class=md-nav__list data-md-scrollfix><li class=md-nav__item><a class=md-nav__link href=../> <span class=md-ellipsis> Home </span> </a><li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested"><input class="md-nav__toggle md-toggle" checked id=__nav_2 type=checkbox> <label class=md-nav__link for=__nav_2 id=__nav_2_label><span class=md-ellipsis> Documentation </span> <span class="md-nav__icon md-icon"></span></label> <nav aria-expanded=true aria-labelledby=__nav_2_label class=md-nav data-md-level=1><label class=md-nav__title for=__nav_2><span class="md-nav__icon md-icon"></span> Documentation</label><ul class=md-nav__list data-md-scrollfix><li class=md-nav__item><a class=md-nav__link href=../Actions/> <span class=md-ellipsis> Actions </span> </a><li class=md-nav__item><a class=md-nav__link href=../Activites-and-Processors/> <span class=md-ellipsis> Hoạt động và Bộ xử lý </span> </a><li class=md-nav__item><a class=md-nav__link href=../Activity-invocation/> <span class=md-ellipsis> Activity Invocation </span> </a><li class=md-nav__item><a class=md-nav__link href=../Bot-Context/> <span class=md-ellipsis> Ngữ cảnh Bot </span> </a><li class=md-nav__item><a class=md-nav__link href=../Bot-configuration/> <span class=md-ellipsis> Cấu hình Bot </span> </a><li class=md-nav__item><a class=md-nav__link href=../F.A.Q/> <span class=md-ellipsis> Câu hỏi thường gặp </span> </a><li class=md-nav__item><a class=md-nav__link href=../FSM-and-Conversation-handling/> <span class=md-ellipsis> Xử Lý FSM Và Hội Thoại </span> </a><li class=md-nav__item><a class=md-nav__link href=../Functional-DSL/> <span class=md-ellipsis> Functional Dsl </span> </a><li class=md-nav__item><a class=md-nav__link href=../Guards/> <span class=md-ellipsis> Guards </span> </a><li class=md-nav__item><a class=md-nav__link href=../Handlers/> <span class=md-ellipsis> Handlers </span> </a><li class=md-nav__item><a class=md-nav__link href=../Interceptors-%28middleware%29/> <span class=md-ellipsis> Interceptors (Middleware) </span> </a><li class=md-nav__item><a class=md-nav__link href=../Update-parsing/> <span class=md-ellipsis> Cập nhật Phân tích Văn bản </span> </a><li class=md-nav__item><a class=md-nav__link href=../Useful-utilities-and-tips/> <span class=md-ellipsis> Tiện ích Hữu ích và Mẹo </span> </a><li class="md-nav__item md-nav__item--active"><input class="md-nav__toggle md-toggle" id=__toc type=checkbox> <label class="md-nav__link md-nav__link--active" for=__toc><span class=md-ellipsis> Web Starters (Spring And Ktor) </span> <span class="md-nav__icon md-icon"></span></label> <a class="md-nav__link md-nav__link--active" href=./> <span class=md-ellipsis> Web Starters (Spring And Ktor) </span> </a> <nav aria-label="On this page" class="md-nav md-nav--secondary"><label class=md-nav__title for=__toc><span class="md-nav__icon md-icon"></span> On this page</label><ul class=md-nav__list data-md-component=toc data-md-scrollfix><li class=md-nav__item><a class=md-nav__link href=#spring-starter> <span class=md-ellipsis> Spring starter </span> </a><li class=md-nav__item><a class=md-nav__link href=#tinh-nang-chinh> <span class=md-ellipsis> Tính năng chính </span> </a><li class=md-nav__item><a class=md-nav__link href=#bat-au> <span class=md-ellipsis> Bắt đầu </span> </a> <nav aria-label="Bắt đầu" class=md-nav><ul class=md-nav__list><li class=md-nav__item><a class=md-nav__link href=#dependency> <span class=md-ellipsis> Dependency </span> </a><li class=md-nav__item><a class=md-nav__link href=#cau-hinh> <span class=md-ellipsis> Cấu hình </span> </a><li class=md-nav__item><a class=md-nav__link href=#su-dung> <span class=md-ellipsis> Sử dụng </span> </a></ul></nav><li class=md-nav__item><a class=md-nav__link href=#cau-hinh-nang-cao> <span class=md-ellipsis> Cấu hình nâng cao </span> </a><li class=md-nav__item><a class=md-nav__link href=#ktor> <span class=md-ellipsis> Ktor </span> </a><li class=md-nav__item><a class=md-nav__link href=#cai-at> <span class=md-ellipsis> Cài đặt </span> </a><li class=md-nav__item><a class=md-nav__link href=#thanh-phan-chinh> <span class=md-ellipsis> Thành phần chính </span> </a><li class=md-nav__item><a class=md-nav__link href=#cau-hinh_1> <span class=md-ellipsis> Cấu hình </span> </a> <nav aria-label="Cấu hình" class=md-nav><ul class=md-nav__list><li class=md-nav__item><a class=md-nav__link href=#thiet-lap-server> <span class=md-ellipsis> Thiết lập server </span> </a><li class=md-nav__item><a class=md-nav__link href=#cau-hinh-bot> <span class=md-ellipsis> Cấu hình Bot: </span> </a></ul></nav><li class=md-nav__item><a class=md-nav__link href=#vi-du-su-dung> <span class=md-ellipsis> Ví dụ sử dụng </span> </a></ul></nav></ul></nav><li class=md-nav__item><a class=md-nav__link href=https://vendelieu.github.io/telegram-bot/> <span class=md-ellipsis> API Reference </span> </a></ul></nav></div></div></div><div class="md-sidebar md-sidebar--secondary" data-md-component=sidebar data-md-type=toc><div class=md-sidebar__scrollwrap><div class=md-sidebar__inner><nav aria-label="On this page" class="md-nav md-nav--secondary"><label class=md-nav__title for=__toc><span class="md-nav__icon md-icon"></span> On this page</label><ul class=md-nav__list data-md-component=toc data-md-scrollfix><li class=md-nav__item><a class=md-nav__link href=#spring-starter> <span class=md-ellipsis> Spring starter </span> </a><li class=md-nav__item><a class=md-nav__link href=#tinh-nang-chinh> <span class=md-ellipsis> Tính năng chính </span> </a><li class=md-nav__item><a class=md-nav__link href=#bat-au> <span class=md-ellipsis> Bắt đầu </span> </a> <nav aria-label="Bắt đầu" class=md-nav><ul class=md-nav__list><li class=md-nav__item><a class=md-nav__link href=#dependency> <span class=md-ellipsis> Dependency </span> </a><li class=md-nav__item><a class=md-nav__link href=#cau-hinh> <span class=md-ellipsis> Cấu hình </span> </a><li class=md-nav__item><a class=md-nav__link href=#su-dung> <span class=md-ellipsis> Sử dụng </span> </a></ul></nav><li class=md-nav__item><a class=md-nav__link href=#cau-hinh-nang-cao> <span class=md-ellipsis> Cấu hình nâng cao </span> </a><li class=md-nav__item><a class=md-nav__link href=#ktor> <span class=md-ellipsis> Ktor </span> </a><li class=md-nav__item><a class=md-nav__link href=#cai-at> <span class=md-ellipsis> Cài đặt </span> </a><li class=md-nav__item><a class=md-nav__link href=#thanh-phan-chinh> <span class=md-ellipsis> Thành phần chính </span> </a><li class=md-nav__item><a class=md-nav__link href=#cau-hinh_1> <span class=md-ellipsis> Cấu hình </span> </a> <nav aria-label="Cấu hình" class=md-nav><ul class=md-nav__list><li class=md-nav__item><a class=md-nav__link href=#thiet-lap-server> <span class=md-ellipsis> Thiết lập server </span> </a><li class=md-nav__item><a class=md-nav__link href=#cau-hinh-bot> <span class=md-ellipsis> Cấu hình Bot: </span> </a></ul></nav><li class=md-nav__item><a class=md-nav__link href=#vi-du-su-dung> <span class=md-ellipsis> Ví dụ sử dụng </span> </a></ul></nav></div></div></div><div class=md-content data-md-component=content><article class="md-content__inner md-typeset"><h1>Web Starters (Spring And Ktor)</h1><h3 id=spring-starter>Spring starter<a title="Permanent link" class=headerlink href=#spring-starter>¶</a></h3><p>Mô-đun Spring Starter cho thư viện là một mô-đun tự động cấu hình tích hợp các chức năng bot Telegram vào các ứng dụng Spring Boot. Nó tận dụng sức mạnh của dependency injection và configuration properties của Spring Boot để tự động cấu hình các bot Telegram dựa trên cấu hình được cung cấp. Thư viện này đặc biệt hữu ích cho các nhà phát triển muốn xây dựng các bot Telegram sử dụng Kotlin và Spring Boot, cung cấp cách tiếp cận được tối ưu hóa cho việc phát triển và quản lý bot.<h3 id=tinh-nang-chinh>Tính năng chính<a title="Permanent link" class=headerlink href=#tinh-nang-chinh>¶</a></h3><ul><li><strong>Tự động cấu hình</strong>: Thư viện tự động cấu hình các bot Telegram dựa trên các properties cấu hình được cung cấp, loại bỏ nhu cầu thiết lập thủ công.<li><strong>Properties cấu hình</strong>: Nó hỗ trợ properties cấu hình để tùy chỉnh dễ dàng các cài đặt bot, chẳng hạn như bot tokens, tên gói và identifiers.<li><strong>Tích hợp Spring</strong>: Tích hợp liền mạch với hệ sinh thái Spring, sử dụng dependency injection và application context của Spring để quản lý các bot instances.<li><strong>Hỗ trợ Coroutine</strong>: Tận dụng Kotlin coroutines cho các hoạt động bot bất đồng bộ, đảm bảo thực thi hiệu quả và không bị chặn.</ul><h3 id=bat-au>Bắt đầu<a title="Permanent link" class=headerlink href=#bat-au>¶</a></h3><p>Để sử dụng Spring Starter Library cho Telegram Bots, bạn cần thêm nó làm dependency vào dự án Spring Boot của bạn. Thư viện được thiết kế để hoạt động với các ứng dụng Spring Boot và yêu cầu framework Spring Boot để hoạt động.<h4 id=dependency>Dependency<a title="Permanent link" class=headerlink href=#dependency>¶</a></h4><p>Thêm dependency sau vào tệp <code>build.gradle</code> hoặc <code>pom.xml</code> của bạn:<div class=highlight><pre><span></span><code><a href=#__codelineno-0-1 id=__codelineno-0-1 name=__codelineno-0-1></a>dependencies {
<a href=#__codelineno-0-2 id=__codelineno-0-2 name=__codelineno-0-2></a>    implementation 'eu.vendeli:spring-starter:&lt;version>'
<a href=#__codelineno-0-3 id=__codelineno-0-3 name=__codelineno-0-3></a>}
</code></pre></div><p>Thay thế <code>&lt;version></code> với phiên bản mới nhất của thư viện.<h4 id=cau-hinh>Cấu hình<a title="Permanent link" class=headerlink href=#cau-hinh>¶</a></h4><p>Thư viện sử dụng <code>@ConfigurationProperties</code> của Spring Boot để liên kết properties cấu hình. Bạn có thể định nghĩa cấu hình bot của mình trong tệp <code>application.properties</code> hoặc <code>application.yml</code> của ứng dụng Spring Boot của bạn.<div class=highlight><pre><span></span><code><a href=#__codelineno-1-1 id=__codelineno-1-1 name=__codelineno-1-1></a><span class=nt>ktgram</span><span class=p>:</span>
<a href=#__codelineno-1-2 id=__codelineno-1-2 name=__codelineno-1-2></a><span class=w> </span><span class=nt>autoStartPolling</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
<a href=#__codelineno-1-3 id=__codelineno-1-3 name=__codelineno-1-3></a><span class=w> </span><span class=nt>shareHttpClient</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
<a href=#__codelineno-1-4 id=__codelineno-1-4 name=__codelineno-1-4></a><span class=w> </span><span class=nt>bot</span><span class=p>:</span>
<a href=#__codelineno-1-5 id=__codelineno-1-5 name=__codelineno-1-5></a><span class=w>    </span><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>token</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">YOUR_BOT_TOKEN</span>
<a href=#__codelineno-1-6 id=__codelineno-1-6 name=__codelineno-1-6></a><span class=w>      </span><span class=nt>pckg</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">com.example.bot</span>
<a href=#__codelineno-1-7 id=__codelineno-1-7 name=__codelineno-1-7></a><span class=w>      </span><span class=nt>identifier</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">MyBot</span>
</code></pre></div><h4 id=su-dung>Sử dụng<a title="Permanent link" class=headerlink href=#su-dung>¶</a></h4><p>Sau khi thư viện được thêm và cấu hình, nó tự động tạo và cấu hình các bot instances của Telegram dựa trên cấu hình được cung cấp.<p>Nó cũng hỗ trợ nhiều bot instances, để khởi tạo nhiều bot chỉ cần khai báo nó như một entry mới trong phần bot:<div class=highlight><pre><span></span><code><a href=#__codelineno-2-1 id=__codelineno-2-1 name=__codelineno-2-1></a><span class=nt>ktgram</span><span class=p>:</span>
<a href=#__codelineno-2-2 id=__codelineno-2-2 name=__codelineno-2-2></a><span class=w> </span><span class=nt>bot</span><span class=p>:</span>
<a href=#__codelineno-2-3 id=__codelineno-2-3 name=__codelineno-2-3></a><span class=w>    </span><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>token</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">YOUR_BOT_TOKEN</span>
<a href=#__codelineno-2-4 id=__codelineno-2-4 name=__codelineno-2-4></a><span class=w>    </span><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>token</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">SECOND_BOT_TOKEN</span>
</code></pre></div><h3 id=cau-hinh-nang-cao>Cấu hình nâng cao<a title="Permanent link" class=headerlink href=#cau-hinh-nang-cao>¶</a></h3><p>Đối với các cấu hình nâng cao hơn, chẳng hạn như tùy chỉnh hành vi bot hoặc tích hợp với các thành phần Spring khác, bạn có thể mở rộng lớp <code>BotConfiguration</code> và thay đổi cấu hình bot thông qua phương thức <code>applyCfg</code> của nó, bạn có thể xem ví dụ <a href=https://github.com/vendelieu/telegram-bot_template/blob/spring-bot/src/main/kotlin/com/example/springbot/configuration/BotConfig.kt>ở đó</a>.<div class="admonition tip"><p class=admonition-title>Tip<p>Để cấu hình từng instance đã khởi tạo với cấu hình tùy chỉnh, phân biệt chúng bằng identifier của chúng (lớp BotConfiguration cũng có identifier).</div><h3 id=ktor>Ktor<a title="Permanent link" class=headerlink href=#ktor>¶</a></h3><p>Mô-đun được thiết kế để tạo điều kiện thuận lợi cho việc tạo webhook server cho các bot Telegram. Nó cho phép các nhà phát triển cấu hình server, bao gồm cả cài đặt SSL/TLS, và khai báo nhiều bot Telegram với cấu hình tùy chỉnh. Quá trình thiết lập linh hoạt, cho phép các nhà phát triển điều chỉnh server theo nhu cầu cụ thể của họ.<h3 id=cai-at>Cài đặt<a title="Permanent link" class=headerlink href=#cai-at>¶</a></h3><p>Để cài đặt ktor starter thêm bổ sung vào dependency chính:<div class=highlight><pre><span></span><code><a href=#__codelineno-3-1 id=__codelineno-3-1 name=__codelineno-3-1></a>dependencies {
<a href=#__codelineno-3-2 id=__codelineno-3-2 name=__codelineno-3-2></a>    implementation("eu.vendeli:ktor-starter:x.y.z") // ở đó
<a href=#__codelineno-3-3 id=__codelineno-3-3 name=__codelineno-3-3></a>    // thay đổi x.y.z thành phiên bản thư viện hiện tại
<a href=#__codelineno-3-4 id=__codelineno-3-4 name=__codelineno-3-4></a>}
</code></pre></div><h3 id=thanh-phan-chinh>Thành phần chính<a title="Permanent link" class=headerlink href=#thanh-phan-chinh>¶</a></h3><p>Hàm <code>serveWebhook</code><p>Hàm serveWebhook là lõi của thư viện. Nó thiết lập và bắt đầu webhook server cho các bot Telegram. Nó chấp nhận hai tham số:<ul><li><code>wait</code>: Một boolean chỉ ra liệu server có nên đợi ứng dụng dừng lại trước khi tắt hay không. Mặc định là true.<li><code>serverBuilder</code>: Một lambda function cấu hình server. Mặc định là lambda rỗng.</ul><h3 id=cau-hinh_1>Cấu hình<a title="Permanent link" class=headerlink href=#cau-hinh_1>¶</a></h3><ul><li><code>WEBHOOK_PREFIX</code>: đó là tham số sẽ được sử dụng cho tiền tố địa chỉ cho webhook listener route. (mặc định là "/")</ul><h4 id=thiet-lap-server>Thiết lập server<a title="Permanent link" class=headerlink href=#thiet-lap-server>¶</a></h4><ul><li><code>server</code>: Một phương thức để đặt cấu hình server sử dụng hoặc EnvConfiguration hoặc ManualConfiguration.<li><code>engine</code>: Một phương thức để cấu hình Netty application engine.<li><code>ktorModule</code>: Một phương thức để thêm Ktor modules vào ứng dụng.</ul><p>Thư viện cung cấp phạm vi rộng các tham số có thể cấu hình cho server, bao gồm host, port, SSL settings, và hơn nữa. Có hai tùy chọn cụ thể cho việc cấu hình nó:<ul><li><code>EnvConfiguration</code>: Đọc các giá trị cấu hình từ environment với tiền tố <code>KTGRAM_</code>.<li><code>ManualConfiguration</code>: Cho phép thiết lập thủ công các giá trị cấu hình, đặt các tham số của bạn trong hàm <code>server {}</code>.</ul><p>Đây là danh sách các tham số có thể được đặt:<ul><li><code>HOST</code>: Hostname hoặc IP address của server.<li><code>PORT</code>: Port number cho server.<li><code>SSL_PORT</code>: Port number cho SSL/TLS connections.<li><code>PEM_PRIVATE_KEY_PATH</code>: Đường dẫn đến PEM private key file.<li><code>PEM_CHAIN_PATH</code>: Đường dẫn đến PEM certificate chain file.<li><code>PEM_PRIVATE_KEY</code>: PEM private key PASSWORD dưới dạng character array.<li><code>KEYSTORE_PATH</code>: Đường dẫn đến Java KeyStore file.<li><code>KEYSTORE_PASSWORD</code>: Password cho KeyStore.<li><code>KEY_ALIAS</code>: Alias cho key trong KeyStore.<li><code>SSL_ON</code>: Một boolean chỉ ra liệu SSL/TLS có nên được bật hay không. Mặc định là true.</ul><div class="admonition tip"><p class=admonition-title>Tip<p>Nếu có pem certificates, mô-đun tự nó sẽ tạo jks storage từ chúng tại đường dẫn được chỉ định.</div><h4 id=cau-hinh-bot>Cấu hình Bot:<a title="Permanent link" class=headerlink href=#cau-hinh-bot>¶</a></h4><p>Để cấu hình bot gọi <code>declareBot {}</code> có các tham số như:<ul><li><code>token</code>: Bot token.<li><code>pckg</code>: Tên gói cho bot.<li><code>configuration</code>: Một lambda function để cấu hình bot.<li><code>handlingBehaviour</code>: Một lambda function để đặt hành vi xử lý của bot.<li><code>onInit</code>: Một lambda function được thực thi khi bot được khởi tạo.</ul><h3 id=vi-du-su-dung>Ví dụ sử dụng<a title="Permanent link" class=headerlink href=#vi-du-su-dung>¶</a></h3><p>Để sử dụng mô-đun này, gọi hàm <code>serveWebhook</code>, cấu hình nó với các cài đặt mong muốn của bạn, khai báo các bot của bạn. Đây là một ví dụ đơn giản:<div class=highlight><pre><span></span><code><a href=#__codelineno-4-1 id=__codelineno-4-1 name=__codelineno-4-1></a><span class=kd>fun</span><span class=w> </span><span class=nf>main</span><span class=p>()</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>runBlocking</span><span class=w> </span><span class=p>{</span>
<a href=#__codelineno-4-2 id=__codelineno-4-2 name=__codelineno-4-2></a><span class=w>    </span><span class=n>serveWebhook</span><span class=w> </span><span class=p>{</span>
<a href=#__codelineno-4-3 id=__codelineno-4-3 name=__codelineno-4-3></a><span class=w>        </span><span class=n>server</span><span class=w> </span><span class=p>{</span>
<a href=#__codelineno-4-4 id=__codelineno-4-4 name=__codelineno-4-4></a><span class=w>            </span><span class=n>HOST</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s>"0.0.0.0"</span>
<a href=#__codelineno-4-5 id=__codelineno-4-5 name=__codelineno-4-5></a><span class=w>            </span><span class=n>PORT</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=m>8080</span>
<a href=#__codelineno-4-6 id=__codelineno-4-6 name=__codelineno-4-6></a><span class=w>            </span><span class=n>SSL_PORT</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=m>8443</span>
<a href=#__codelineno-4-7 id=__codelineno-4-7 name=__codelineno-4-7></a>
<a href=#__codelineno-4-8 id=__codelineno-4-8 name=__codelineno-4-8></a><span class=w>            </span><span class=n>PEM_PRIVATE_KEY_PATH</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s>"/etc/letsencrypt/live/example.com/privkey.pem"</span>
<a href=#__codelineno-4-9 id=__codelineno-4-9 name=__codelineno-4-9></a><span class=w>            </span><span class=n>PEM_CHAIN_PATH</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s>"/etc/letsencrypt/live/example.com/fullchain.pem"</span>
<a href=#__codelineno-4-10 id=__codelineno-4-10 name=__codelineno-4-10></a><span class=w>            </span><span class=n>PEM_PRIVATE_KEY</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s>"pem_changeit"</span><span class=p>.</span><span class=na>toCharArray</span><span class=p>()</span>
<a href=#__codelineno-4-11 id=__codelineno-4-11 name=__codelineno-4-11></a>
<a href=#__codelineno-4-12 id=__codelineno-4-12 name=__codelineno-4-12></a><span class=w>            </span><span class=n>KEYSTORE_PATH</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s>"/etc/ssl/certs/java/cacerts/bot_keystore.jks"</span>
<a href=#__codelineno-4-13 id=__codelineno-4-13 name=__codelineno-4-13></a><span class=w>            </span><span class=n>KEYSTORE_PASSWORD</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s>"changeit"</span><span class=p>.</span><span class=na>toCharArray</span><span class=p>()</span>
<a href=#__codelineno-4-14 id=__codelineno-4-14 name=__codelineno-4-14></a><span class=w>            </span><span class=c1>// Đặt các tham số cấu hình khác theo cần</span>
<a href=#__codelineno-4-15 id=__codelineno-4-15 name=__codelineno-4-15></a><span class=w>        </span><span class=p>}</span>
<a href=#__codelineno-4-16 id=__codelineno-4-16 name=__codelineno-4-16></a><span class=w>        </span><span class=n>declareBot</span><span class=w> </span><span class=p>{</span>
<a href=#__codelineno-4-17 id=__codelineno-4-17 name=__codelineno-4-17></a><span class=w>            </span><span class=n>token</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s>"YOUR_BOT_TOKEN"</span>
<a href=#__codelineno-4-18 id=__codelineno-4-18 name=__codelineno-4-18></a><span class=w>            </span><span class=c1>// Cấu hình các cài đặt bot khác</span>
<a href=#__codelineno-4-19 id=__codelineno-4-19 name=__codelineno-4-19></a><span class=w>        </span><span class=p>}</span>
<a href=#__codelineno-4-20 id=__codelineno-4-20 name=__codelineno-4-20></a><span class=w>        </span><span class=c1>// Thêm nhiều bot hoặc đặt các tham số khác nếu cần</span>
<a href=#__codelineno-4-21 id=__codelineno-4-21 name=__codelineno-4-21></a><span class=w>    </span><span class=p>}</span>
<a href=#__codelineno-4-22 id=__codelineno-4-22 name=__codelineno-4-22></a><span class=p>}</span>
</code></pre></div><div class="admonition danger"><p class=admonition-title>Caution<p>Đừng quên đặt webhook để mọi thứ hoạt động. :)</div><p>Mặc định mô-đun sẽ phục vụ webhook listening endpoints là <code>host/BOT_TOKEN</code><hr></article></div><script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script></div><button class="md-top md-icon" data-md-component=top hidden type=button><svg viewbox="0 0 24 24" xmlns=http://www.w3.org/2000/svg><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg> Trở lại mục lục</button></main><footer class=md-footer><nav aria-label="Chân trang" class="md-footer__inner md-grid"><a aria-label="Trước: Tiện ích Hữu ích và Mẹo" class="md-footer__link md-footer__link--prev" href=../Useful-utilities-and-tips/> <div class="md-footer__button md-icon"><svg viewbox="0 0 24 24" xmlns=http://www.w3.org/2000/svg><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg></div> <div class=md-footer__title><span class=md-footer__direction> Trước </span><div class=md-ellipsis>Tiện ích Hữu ích và Mẹo</div></div> </a></nav><div class="md-footer-meta md-typeset"><div class="md-footer-meta__inner md-grid"><div class=md-copyright>Made with <a href=https://squidfunk.github.io/mkdocs-material/ rel=noopener target=_blank> Material for MkDocs </a></div></div></div></footer></div><div class=md-dialog data-md-component=dialog><div class="md-dialog__inner md-typeset"></div></div><script id=__config type=application/json>{"annotate": null, "base": "../..", "features": ["content.code.annotate", "content.code.copy", "navigation.footer", "navigation.tabs", "navigation.top", "navigation.tracking", "search.share", "toc.follow"], "search": "../../assets/javascripts/workers/search.2c215733.min.js", "tags": null, "translations": {"clipboard.copied": "\u0110\u00e3 sao ch\u00e9p", "clipboard.copy": "Sao ch\u00e9p v\u00e0o b\u1ed9 nh\u1edb t\u1ea1m", "search.result.more.one": "1 t\u1eeb kh\u00e1c trong trang", "search.result.more.other": "# t\u1eeb kh\u00e1c trong trang", "search.result.none": "Kh\u00f4ng t\u00ecm th\u1ea5y t\u00e0i li\u1ec7u li\u00ean quan", "search.result.one": "1 t\u00e0i li\u1ec7u li\u00ean quan", "search.result.other": "# t\u00e0i li\u1ec7u li\u00ean quan", "search.result.placeholder": "Nh\u1eadp \u0111\u1ec3 b\u1eaft \u0111\u1ea7u t\u00ecm ki\u1ebfm", "search.result.term.missing": "Kh\u00f4ng", "select.version": "Ch\u1ecdn phi\u00ean b\u1ea3n"}, "version": null}</script><script src=../../assets/javascripts/bundle.79ae519e.min.js></script>